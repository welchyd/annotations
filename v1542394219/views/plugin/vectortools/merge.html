<div class="d-flex flex-column flex-fill">
  <div class="modal-body d-flex flex-column flex-fill">
    <div ng-form="mergeForm" ng-submit="ctrl.accept()" class="container-fluid d-flex flex-column flex-fill">
      <div class="form-group row" ng-class="{'text-danger':mergeForm.name.$invalid && mergeForm.name.$dirty}">
        <label class="col-form-label">Layer Name</label>
        <div class="col">
          <input class="form-control w-100" type="text" name="name" ng-model="ctrl.name" ng-required="true" ng-maxlength="100"/>
          <validation-message target="mergeForm.name"></validation-message>
        </div>
      </div>
      <mappingcounter source-ids="sourceIds"></mappingcounter>
    </div>
  </div>

  <div class="modal-footer">
    <span ng-if="mergeForm.$error.featureCount">
      <popover x-title="ctrl.popoverTitle" x-content="ctrl.featureCountText" x-pos="'left'" icon="'fa fa-warning text-warning'"></popover>
      <span class="text-warning">{{ctrl.popoverText}}</span>
    </span>
    <button class="btn btn-primary" ng-disabled="mergeForm.$invalid" ng-click="ctrl.accept()">
      <i class="fa fa-check"></i> OK
    </button>
    <button class="btn btn-secondary" ng-click="ctrl.close()">
      <i class="fa fa-ban"></i> Cancel
    </button>
  </div>
</div>
