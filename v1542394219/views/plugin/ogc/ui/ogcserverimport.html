<div class="c-ogcserver-form flex-fill w-100 d-flex flex-column">
  <div class="modal-body container flex-fill">
    <div class="text-center" ng-show="testing">
      <div><i class="fa fa-4x fa-spin fa-smooth fa-spinner"></i></div>
      <div>Testing...</div>
    </div>
    <form ng-show="!testing" name="form" ng-submit="ctrl.accept()">
      <div class="form-group">
        <label for="title">Title</label>
        <input unique-provider-title type="text" class="form-control" name="title" ng-disabled="!edit"
            ng-model="config.label" ng-required="true" ng-maxlength="1000"/>
        <small class="form-text text-muted" data-ng-show="form.title.$error.maxlength">Title is too long!</small>
        <small class="form-text text-muted" data-ng-show="form.title.$error.unique">Title is not unique!</small>
        <small class="form-text text-muted" data-ng-show="form.title.$error.required">Please enter a title</small>
      </div>
      <div class="form-group">
        <label for="wms">WMS (Tile) Server</label>
        <input type="text" name="wms" class="form-control" ng-disabled="!edit" ng-model="config.wms"
            ng-required="!config.wms && !config.wfs" ng-maxlength="1000" placeholder="e.g. http://www.example.com/ogcserver/wms"/>
        <small class="form-text text-muted" data-ng-show="form.wms.$error.maxlength">URL is too long!</small>
        <small class="form-text text-muted" data-ng-show="form.wms.$error.required">Please enter a URL</small>
      </div>
      <div class="form-group">
        <label for="wfs">WFS (Features) Server</label>
        <input type="text" name="wfs" class="form-control" ng-disabled="!edit" ng-model="config.wfs"
            ng-required="!config.wms && !config.wfs" ng-maxlength="1000" placeholder="e.g. http://www.example.com/ogcserver/wfs"/>
        <small class="form-text text-muted" data-ng-show="form.wfs.$error.maxlength">URL is too long!</small>
        <small class="form-text text-muted" data-ng-show="form.wfs.$error.required">Please enter a URL</small>
      </div>
      <input type="submit" hidden>
    </form>
    <div class="error" ng-if="error">
      <h5>Error!</h5>
      <p ng-bind-html="error"></p>
    </div>
  </div>
  <div class="modal-footer d-flex">
    <button class="btn btn-primary" ng-click="ctrl.accept()" ng-disabled="form.$invalid || testing">
      <i class="fa fa-check"></i>
      {{edit ? 'Save' : 'OK'}}
    </button>
    <button class="btn btn-secondary" ng-click="ctrl.close()">
      <i class="fa fa-ban"></i>
      Cancel
    </button>
  </div>
</div>
