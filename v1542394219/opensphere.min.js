(function(){var g,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function da(){da=function(){};ba.Symbol||(ba.Symbol=aaa)}var aaa=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function fa(){da();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(this)}});fa=function(){}}function ha(a){var b=0;return baa(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function baa(a){fa();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a}function la(a){fa();var b=a[Symbol.iterator];return b?b.call(a):ha(a)}
function ma(a){if(!(a instanceof Array)){a=la(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function na(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,wA:f}}return{i:-1,wA:void 0}}function oa(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}
oa("Array.prototype.findIndex",function(a){return a?a:function(a,c){return na(this,a,c).i}});oa("Array.prototype.find",function(a){return a?a:function(a,c){return na(this,a,c).wA}});
oa("String.prototype.startsWith",function(a){return a?a:function(a,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.startsWith must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.startsWith must not be a regular expression");var b=this+"";a+="";var e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var h=0;h<f&&c<e;)if(b[c++]!=a[h++])return!1;return h>=f}});
oa("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){a=Number(a);return(b(a)+b(-a))/2}});oa("Number.EPSILON",function(){return Math.pow(2,-52)});oa("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});oa("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}});oa("Number.isFinite",function(a){return a?a:function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a}});
oa("Number.isInteger",function(a){return a?a:function(a){return Number.isFinite(a)?a===Math.floor(a):!1}});oa("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(a[f]=e[f])}return a}});var pa=pa||{},qa=this;function ra(a){return void 0!==a}function sa(a){return"string"==typeof a}function ta(a){return"number"==typeof a}
function ua(a){a=a.split(".");for(var b=qa,c=0;c<a.length;c++)if(b=b[a[c]],null==b)return null;return b}function va(){}function wa(a){a.wp=void 0;a.u=function(){return a.wp?a.wp:a.wp=new a}}
function xa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function q(a){return"array"==xa(a)}function ya(a){var b=xa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function za(a){return Aa(a)&&"function"==typeof a.getFullYear}function Ba(a){return"function"==xa(a)}function Aa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function Ca(a){return a[Da]||(a[Da]=++caa)}
function Ea(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(Da);try{delete a[Da]}catch(b){}}var Da="closure_uid_"+(1E9*Math.random()>>>0),caa=0;function daa(a,b,c){return a.call.apply(a.bind,arguments)}function eaa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function t(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t=daa:t=eaa;return t.apply(null,arguments)}function Fa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var Ha=Date.now||function(){return+new Date};
function Ia(a,b){a=a.split(".");var c=qa;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&ra(b)?c[d]=b:c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.C=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.FR=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function y(){0!=Ja&&(Ka[Ca(this)]=this);this.Ea=this.Ea;this.pa=this.pa}var Ja=0,Ka={};y.prototype.Ea=!1;y.prototype.Xa=function(){return this.Ea};y.prototype.dispose=function(){if(!this.Ea&&(this.Ea=!0,this.J(),0!=Ja)){var a=Ca(this);delete Ka[a]}};function La(a,b){a.Ea?ra(void 0)?b.call(void 0):b():(a.pa||(a.pa=[]),a.pa.push(ra(void 0)?t(b,void 0):b))}y.prototype.J=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};function Ma(a){a&&"function"==typeof a.dispose&&a.dispose()}
function Na(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ya(d)?Na.apply(null,d):Ma(d)}};function Pa(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function Qa(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function Ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Ra,Error);Ra.prototype.name="CustomError";var Sa;function Ua(a,b){this.l=a;this.o=b;this.j=0;this.g=null}Ua.prototype.get=function(){if(0<this.j){this.j--;var a=this.g;this.g=a.next;a.next=null}else a=this.l();return a};function Va(a,b){a.o(b);100>a.j&&(a.j++,b.next=a.g,a.g=b)};function Wa(){this.j=this.g=null}var Ya=new Ua(function(){return new Xa},function(a){a.reset()});Wa.prototype.add=function(a,b){var c=Ya.get();c.set(a,b);this.j?this.j.next=c:this.g=c;this.j=c};Wa.prototype.remove=function(){var a=null;this.g&&(a=this.g,this.g=this.g.next,this.g||(this.j=null),a.next=null);return a};function Xa(){this.next=this.scope=this.fn=null}Xa.prototype.set=function(a,b){this.fn=a;this.scope=b;this.next=null};Xa.prototype.reset=function(){this.next=this.scope=this.fn=null};function Za(a){return function(){return a}}var $a=Za(!1),ab=Za(!0);function bb(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(!b[a].apply(this,arguments))return!1;return!0}};var cb=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(sa(a))return sa(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},db=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=sa(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};
function faa(a,b){var c=a.length,d=sa(a)?a.split(""):a;for(--c;0<=c;--c)c in d&&b.call(void 0,d[c],c,a)}
var eb=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=sa(a)?a.split(""):a,k=0;k<d;k++)if(k in h){var l=h[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},fb=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=sa(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},gaa=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,
b,c)}:function(a,b,c){var d=c;db(a,function(c,f){d=b.call(void 0,d,c,f,a)});return d},gb=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=sa(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1},hb=Array.prototype.every?function(a,b,c){return Array.prototype.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=sa(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};
function ib(a,b,c){b=jb(a,b,c);return 0>b?null:sa(a)?a.charAt(b):a[b]}function jb(a,b,c){for(var d=a.length,e=sa(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function kb(a,b){return 0<=cb(a,b)}function lb(a){if(!q(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function mb(a,b){kb(a,b)||a.push(b)}function nb(a,b,c){ob(a,c,0,b)}function pb(a,b,c){Fa(ob,a,c,0).apply(null,b)}function qb(a,b){b=cb(a,b);var c;(c=0<=b)&&rb(a,b);return c}
function rb(a,b){return 1==Array.prototype.splice.call(a,b,1).length}function sb(a,b){b=jb(a,b,void 0);return 0<=b?(rb(a,b),!0):!1}function haa(a,b){var c=0;faa(a,function(d,e){b.call(void 0,d,e,a)&&rb(a,e)&&c++})}function tb(a){return Array.prototype.concat.apply([],arguments)}function ub(a){return Array.prototype.concat.apply([],arguments)}function vb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function wb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(ya(d)){var e=a.length||0,f=d.length||0;a.length=e+f;for(var h=0;h<f;h++)a[e+h]=d[h]}else a.push(d)}}function ob(a,b,c,d){return Array.prototype.splice.apply(a,xb(arguments,1))}function xb(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}
function yb(a,b,c){function d(a){return Aa(a)?"o"+Ca(a):(typeof a).charAt(0)+a}b=b||a;c=c||d;for(var e={},f=0,h=0;h<a.length;){var k=a[h++],l=c(k);Object.prototype.hasOwnProperty.call(e,l)||(e[l]=!0,b[f++]=k)}b.length=f}function iaa(a,b){return zb(a,b,!0,void 0,void 0)}function zb(a,b,c,d,e){for(var f=0,h=a.length,k;f<h;){var l=f+h>>1,m;c?m=b.call(e,a[l],l,a):m=b(d,a[l]);0<m?f=l+1:(h=l,k=!m)}return k?f:~f}function Ab(a,b){a.sort(b||Bb)}
function jaa(a,b){var c=Bb;Ab(a,function(a,e){return c(b(a),b(e))})}function kaa(a){jaa(a,function(a){return a.time})}function Cb(a,b,c){if(!ya(a)||!ya(b)||a.length!=b.length)return!1;var d=a.length;c=c||laa;for(var e=0;e<d;e++)if(!c(a[e],b[e]))return!1;return!0}function Bb(a,b){return a>b?1:a<b?-1:0}function laa(a,b){return a===b}function Db(a,b,c){c=zb(a,c||Bb,!1,b);0>c&&nb(a,b,-(c+1))}
function Eb(a,b){for(var c={},d=0;d<a.length;d++){var e=a[d],f=b.call(void 0,e,d,a);ra(f)&&(c[f]||(c[f]=[])).push(e)}return c}function Fb(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if(q(d))for(var e=0;e<d.length;e+=8192){var f=xb(d,e,e+8192);f=Fb.apply(null,f);for(var h=0;h<f.length;h++)b.push(f[h])}else b.push(d)}return b}function Gb(a,b){a.length&&(b%=a.length,0<b?Array.prototype.unshift.apply(a,a.splice(-b,b)):0>b&&Array.prototype.push.apply(a,a.splice(0,-b)))}
function Hb(a,b,c){b=Array.prototype.splice.call(a,b,1);Array.prototype.splice.call(a,c,0,b[0])};function Ib(a,b){return 0==a.lastIndexOf(b,0)}function Jb(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Kb(a,b){return a.toLowerCase()==b.toLowerCase()}function maa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Lb(a){return/^[\s\xa0]*$/.test(a)}function Mb(a){return!/[^0-9]/.test(a)}var Nb=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};
function Ob(a,b){a=String(a).toLowerCase();b=String(b).toLowerCase();return a<b?-1:a==b?0:1}function Pb(a,b){var c=/\d+|\.\d+|\D+/g;if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var d=a.toLowerCase().match(c),e=b.toLowerCase().match(c),f=Math.min(d.length,e.length),h=0;h<f;h++){c=d[h];var k=e[h];if(c!=k)return a=parseInt(c,10),!isNaN(a)&&(b=parseInt(k,10),!isNaN(b)&&a-b)?a-b:c<k?-1:1}return d.length!=e.length?d.length-e.length:a<b?-1:1}function Qb(a,b){return Pb(a,b)}
function Rb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function Sb(a){if(!naa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(oaa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(paa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(qaa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(raa,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(saa,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(taa,"&#0;"));return a}var oaa=/&/g,paa=/</g,qaa=/>/g,raa=/"/g,saa=/'/g,taa=/\x00/g,naa=/[\x00&<>"']/;
function uaa(a){var b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};var c=qa.document.createElement("div");return a.replace(vaa,function(a,e){var d=b[a];if(d)return d;"#"==e.charAt(0)&&(e=Number("0"+e.substr(1)),isNaN(e)||(d=String.fromCharCode(e)));d||(c.innerHTML=a+" ",d=c.firstChild.nodeValue.slice(0,-1));return b[a]=d})}
function waa(a){return a.replace(/&([^;]+);/g,function(a,c){switch(c){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:return"#"!=c.charAt(0)||(c=Number("0"+c.substr(1)),isNaN(c))?a:String.fromCharCode(c)}})}var vaa=/&([^;\s<&]+);?/g;function Tb(a,b){a.length>b&&(a=a.substring(0,b-3)+"...");return a}function Ub(a,b){return-1!=a.indexOf(b)}function Wb(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}
var xaa=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};function Xb(a,b,c){a=ra(c)?a.toFixed(c):String(a);c=a.indexOf(".");-1==c&&(c=a.length);return xaa("0",Math.max(0,b-c))+a}function Yb(a){return null==a?"":String(a)}function Zb(a){return Array.prototype.join.call(arguments,"")}function $b(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ha()).toString(36)}
function ac(a,b){return a<b?-1:a>b?1:0}function bc(a){for(var b=0,c=0;c<a.length;++c)b=31*b+a.charCodeAt(c)>>>0;return b}var yaa=2147483648*Math.random()|0;function cc(){return"goog_"+yaa++}function dc(a){var b=Number(a);return 0==b&&Lb(a)?NaN:b}function ec(a){var b=sa(void 0)?Wb(void 0):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var fc;a:{var gc=qa.navigator;if(gc){var hc=gc.userAgent;if(hc){fc=hc;break a}}fc=""}function ic(a){return Ub(fc,a)}function zaa(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function jc(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Aaa(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function kc(a){var b=0,c;for(c in a)b++;return b}function lc(a){for(var b in a)return a[b]}function mc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function nc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function oc(a,b){var c=ya(b),d=c?b:arguments;for(c=c?0:1;c<d.length;c++){if(null==a)return;a=a[d[c]]}return a}function pc(a,b){return null!==a&&b in a}
function qc(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function rc(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function sc(a,b){return(b=rc(a,b,void 0))&&a[b]}function uc(a){for(var b in a)return!1;return!0}function vc(a){for(var b in a)delete a[b]}function wc(a,b){b in a&&delete a[b]}function xc(a,b,c){if(null!==a&&b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function yc(a,b){return null!==a&&b in a?a[b]:void 0}
function Baa(a,b){for(var c in a)if(!(c in b)||a[c]!==b[c])return!1;for(c in b)if(!(c in a))return!1;return!0}function zc(a){var b={},c;for(c in a)b[c]=a[c];return b}function Ac(a){var b=xa(a);if("object"==b||"array"==b){if(Ba(a.clone))return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=Ac(a[c]);return b}return a}var Bc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Cc(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Bc.length;f++)c=Bc[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function Dc(a){var b=arguments.length;if(1==b&&q(arguments[0]))return Dc.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};function Ec(){return ic("Trident")||ic("MSIE")}function Fc(){return(ic("Chrome")||ic("CriOS"))&&!ic("Edge")}function Caa(){function a(a){a=ib(a,d);return c[a]||""}var b=fc;if(Ec())return Daa(b);b=zaa(b);var c={};db(b,function(a){c[a[0]]=a[1]});var d=Fa(pc,c);return ic("Opera")?a(["Version","Opera"]):ic("Edge")?a(["Edge"]):Fc()?a(["Chrome","CriOS"]):(b=b[2])&&b[1]||""}
function Daa(a){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])return b[1];b="";var c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];return b};function Gc(a){qa.setTimeout(function(){throw a;},0)}function Hc(a,b){var c=a;b&&(c=t(a,b));!Ba(qa.setImmediate)||qa.Window&&qa.Window.prototype&&!ic("Edge")&&qa.Window.prototype.setImmediate==qa.setImmediate?(Ic||(Ic=Eaa()),Ic(c)):qa.setImmediate(c)}var Ic;
function Eaa(){var a=qa.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!ic("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=t(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!Ec()){var b=new a,c={},d=c;b.port1.onmessage=function(){if(ra(c.next)){c=c.next;var a=c.zt;c.zt=null;a()}};return function(a){d.next={zt:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){qa.setTimeout(a,0)}};function Jc(a,b){Kc||Faa();Lc||(Kc(),Lc=!0);Mc.add(a,b)}var Kc;function Faa(){if(-1!=String(qa.Promise).indexOf("[native code]")){var a=qa.Promise.resolve(void 0);Kc=function(){a.then(Nc)}}else Kc=function(){Hc(Nc)}}var Lc=!1,Mc=new Wa;function Nc(){for(var a;a=Mc.remove();){try{a.fn.call(a.scope)}catch(b){Gc(b)}Va(Ya,a)}Lc=!1};function Oc(a,b){this.va=Pc;this.s=void 0;this.j=this.g=this.xa=null;this.l=this.o=!1;if(a!=va)try{var c=this;a.call(b,function(a){Qc(c,Rc,a)},function(a){Qc(c,Sc,a)})}catch(d){Qc(this,Sc,d)}}var Pc=0,Rc=2,Sc=3;function Tc(){this.next=this.context=this.j=this.o=this.g=null;this.l=!1}Tc.prototype.reset=function(){this.context=this.j=this.o=this.g=null;this.l=!1};var Uc=new Ua(function(){return new Tc},function(a){a.reset()});function Vc(a,b,c){var d=Uc.get();d.o=a;d.j=b;d.context=c;return d}
function Wc(a){if(a instanceof Oc)return a;var b=new Oc(va);Qc(b,Rc,a);return b}function Xc(a){return new Oc(function(b,c){c(a)})}function Gaa(a,b,c){Yc(a,b,c,null)||Jc(Fa(b,a))}function Zc(a){return new Oc(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,l;k<a.length;k++)l=a[k],Gaa(l,Fa(f,k),h);else b(e)})}Oc.prototype.then=function(a,b,c){return $c(this,Ba(a)?a:null,Ba(b)?b:null,c)};Pa(Oc);
function ad(a,b,c){b=Vc(b,b,c);b.l=!0;bd(a,b)}function cd(a,b){return $c(a,null,b,void 0)}Oc.prototype.cancel=function(a){this.va==Pc&&Jc(function(){var b=new dd(a);ed(this,b)},this)};function ed(a,b){if(a.va==Pc)if(a.xa){var c=a.xa;if(c.g){for(var d=0,e=null,f=null,h=c.g;h&&(h.l||(d++,h.g==a&&(e=h),!(e&&1<d)));h=h.next)e||(f=h);e&&(c.va==Pc&&1==d?ed(c,b):(f?(d=f,d.next==c.j&&(c.j=d),d.next=d.next.next):fd(c),gd(c,e,Sc,b)))}a.xa=null}else Qc(a,Sc,b)}
function bd(a,b){a.g||a.va!=Rc&&a.va!=Sc||hd(a);a.j?a.j.next=b:a.g=b;a.j=b}function $c(a,b,c,d){var e=Vc(null,null,null);e.g=new Oc(function(a,h){e.o=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){h(m)}}:a;e.j=c?function(b){try{var e=c.call(d,b);!ra(e)&&b instanceof dd?h(b):a(e)}catch(m){h(m)}}:h});e.g.xa=a;bd(a,e);return e.g}Oc.prototype.B=function(a){this.va=Pc;Qc(this,Rc,a)};Oc.prototype.G=function(a){this.va=Pc;Qc(this,Sc,a)};
function Qc(a,b,c){a.va==Pc&&(a===c&&(b=Sc,c=new TypeError("Promise cannot resolve to itself")),a.va=1,Yc(c,a.B,a.G,a)||(a.s=c,a.va=b,a.xa=null,hd(a),b!=Sc||c instanceof dd||Haa(a,c)))}function Yc(a,b,c,d){if(a instanceof Oc)return bd(a,Vc(b||va,c||null,d)),!0;if(Qa(a))return a.then(b,c,d),!0;if(Aa(a))try{var e=a.then;if(Ba(e))return Iaa(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1}
function Iaa(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(l){f(l)}}function hd(a){a.o||(a.o=!0,Jc(a.A,a))}function fd(a){var b=null;a.g&&(b=a.g,a.g=b.next,b.next=null);a.g||(a.j=null);return b}Oc.prototype.A=function(){for(var a;a=fd(this);)gd(this,a,this.va,this.s);this.o=!1};
function gd(a,b,c,d){if(c==Sc&&b.j&&!b.l)for(;a&&a.l;a=a.xa)a.l=!1;if(b.g)b.g.xa=null,id(b,c,d);else try{b.l?b.o.call(b.context):id(b,c,d)}catch(e){jd.call(null,e)}Va(Uc,b)}function id(a,b,c){b==Rc?a.o.call(a.context,c):a.j&&a.j.call(a.context,c)}function Haa(a,b){a.l=!0;Jc(function(){a.l&&jd.call(null,b)})}var jd=Gc;function dd(a){Ra.call(this,a)}w(dd,Ra);dd.prototype.name="cancel";function kd(){return ic("iPhone")&&!ic("iPod")&&!ic("iPad")}function ld(){return kd()||ic("iPad")||ic("iPod")};function md(a){md[" "](a);return a}md[" "]=va;function Jaa(a,b){var c=Kaa;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var nd=ic("Opera"),od=Ec(),pd=ic("Edge"),Laa=pd||od,qd=ic("Gecko")&&!(Ub(fc.toLowerCase(),"webkit")&&!ic("Edge"))&&!(ic("Trident")||ic("MSIE"))&&!ic("Edge"),rd=Ub(fc.toLowerCase(),"webkit")&&!ic("Edge");rd&&ic("Mobile");var sd=ic("Macintosh"),td=ic("Windows"),ud=ic("Linux")||ic("CrOS"),vd=qa.navigator||null;vd&&Ub(vd.appVersion||"","X11");var Maa=ic("Android"),Naa=kd(),Oaa=ic("iPad"),Paa=ic("iPod");ld();function wd(){var a=qa.document;return a?a.documentMode:void 0}var xd;
a:{var yd="",zd=function(){var a=fc;if(qd)return/rv:([^\);]+)(\)|;)/.exec(a);if(pd)return/Edge\/([\d\.]+)/.exec(a);if(od)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(rd)return/WebKit\/(\S+)/.exec(a);if(nd)return/(?:Version)[ \/]?(\S+)/.exec(a)}();zd&&(yd=zd?zd[1]:"");if(od){var Ad=wd();if(null!=Ad&&Ad>parseFloat(yd)){xd=String(Ad);break a}}xd=yd}var Kaa={};
function Bd(a){return Jaa(a,function(){for(var b=0,c=Nb(String(xd)).split("."),d=Nb(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=ac(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||ac(0==h[2].length,0==k[2].length)||ac(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})}
function Cd(){return 9<=Number(Qaa)}var Dd;var Ed=qa.document;Dd=Ed&&od?wd()||("CSS1Compat"==Ed.compatMode?parseInt(xd,10):5):void 0;var Qaa=Dd;function Fd(a){if("undefined"==typeof a)return"undefined";if(null==a)return"NULL";var b=[],c;for(c in a)if(!Ba(a[c])){var d=c+" = ";try{d+=a[c]}catch(e){d+="*** "+e+" ***"}b.push(d)}return b.join("\n")}
function Gd(a){function b(a,h){var f=h+"  ";try{if(ra(a))if(null===a)c.push("NULL");else if(sa(a))c.push('"'+a.replace(/\n/g,"\n"+h)+'"');else if(Ba(a))c.push(String(a).replace(/\n/g,"\n"+h));else if(Aa(a)){a[Da]||d.push(a);var l=Ca(a);if(e[l])c.push("*** reference loop detected (id="+l+") ***");else{e[l]=!0;c.push("{");for(var m in a)Ba(a[m])||(c.push("\n"),c.push(f),c.push(m+" = "),b(a[m],f));c.push("\n"+h+"}");delete e[l]}}else c.push(a);else c.push("undefined")}catch(n){c.push("*** "+n+" ***")}}
var c=[],d=[],e={};b(a,"");for(a=0;a<d.length;a++)Ea(d[a]);return c.join("")}function Hd(a){var b=Error();if(Error.captureStackTrace)Error.captureStackTrace(b,a||Hd),b=String(b.stack);else{try{throw b;}catch(c){b=c}b=(b=b.stack)?String(b):null}b||(b=Id(a||arguments.callee.caller,[]));return b}
function Id(a,b){var c=[];if(kb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Jd(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Jd(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Id(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Jd(a){if(Kd[a])return Kd[a];a=String(a);if(!Kd[a]){var b=/function ([^\(]+)/.exec(a);Kd[a]=b?b[1]:"[Anonymous]"}return Kd[a]}var Kd={};var Raa=!od||Cd(),Ld=!od||Cd(),Saa=od&&!Bd("9"),Taa=function(){if(!qa.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});qa.addEventListener("test",va,b);qa.removeEventListener("test",va,b);return a}();function z(a,b){this.type=a;this.A=this.target=b;this.defaultPrevented=this.B=!1;this.xz=!0}z.prototype.stopPropagation=function(){this.B=!0};z.prototype.preventDefault=function(){this.defaultPrevented=!0;this.xz=!1};function Md(a,b){z.call(this,a?a.type:"");this.relatedTarget=this.A=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.I=!1;this.pointerId=0;this.pointerType="";this.j=null;a&&this.init(a,b)}w(Md,z);var Uaa=[1,4,2],Vaa={2:"touch",3:"pen",4:"mouse"};
Md.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.A=b;if(b=a.relatedTarget){if(qd){a:{try{md(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.offsetX=rd||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=rd||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=
void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.I=sd?a.metaKey:a.ctrlKey;this.pointerId=a.pointerId||0;this.pointerType=sa(a.pointerType)?a.pointerType:
Vaa[a.pointerType]||"";this.state=a.state;this.j=a;a.defaultPrevented&&this.preventDefault()};function Nd(a,b){return Raa?a.j.button==b:"click"==a.type?0==b:!!(a.j.button&Uaa[b])}function Od(a){return Nd(a,0)&&!(rd&&sd&&a.ctrlKey)}Md.prototype.stopPropagation=function(){Md.C.stopPropagation.call(this);this.j.stopPropagation?this.j.stopPropagation():this.j.cancelBubble=!0};
Md.prototype.preventDefault=function(){Md.C.preventDefault.call(this);var a=this.j;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Saa)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Pd="closure_listenable_"+(1E6*Math.random()|0);function Qd(a){return!(!a||!a[Pd])}var Waa=0;function Xaa(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ya=e;this.key=++Waa;this.gj=this.callOnce=!1}function Rd(a){a.gj=!0;a.listener=null;a.proxy=null;a.src=null;a.ya=null};function Sd(a){this.src=a;this.g={};this.j=0}g=Sd.prototype;g.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.j++);var h=Td(a,b,d,e);-1<h?(b=a[h],c||(b.callOnce=!1)):(b=new Xaa(b,this.src,f,!!d,e),b.callOnce=c,a.push(b));return b};g.remove=function(a,b,c,d){a=a.toString();if(!(a in this.g))return!1;var e=this.g[a];b=Td(e,b,c,d);return-1<b?(Rd(e[b]),rb(e,b),0==e.length&&(delete this.g[a],this.j--),!0):!1};
function Ud(a,b){var c=b.type;c in a.g&&qb(a.g[c],b)&&(Rd(b),0==a.g[c].length&&(delete a.g[c],a.j--))}g.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,Rd(d[e]);delete this.g[c];this.j--}return b};g.Oj=function(a,b,c,d){a=this.g[a.toString()];var e=-1;a&&(e=Td(a,b,c,d));return-1<e?a[e]:null};
g.Sd=function(a,b){var c=ra(a),d=c?a.toString():"",e=ra(b);return Aaa(this.g,function(a){for(var f=0;f<a.length;++f)if(!(c&&a[f].type!=d||e&&a[f].capture!=b))return!0;return!1})};function Td(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.gj&&f.listener==b&&f.capture==!!c&&f.ya==d)return e}return-1};var Vd="closure_lm_"+(1E6*Math.random()|0),Wd={},Xd=0;function Yd(a,b,c,d,e){if(d&&d.once)return Zd(a,b,c,d,e);if(q(b)){for(var f=0;f<b.length;f++)Yd(a,b[f],c,d,e);return null}c=$d(c);return Qd(a)?a.H(b,c,Aa(d)?!!d.capture:!!d,e):ae(a,b,c,!1,d,e)}
function ae(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=Aa(e)?!!e.capture:!!e,k=be(a);k||(a[Vd]=k=new Sd(a));c=k.add(b,c,d,h,f);if(c.proxy)return c;d=Yaa();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)Taa||(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ce(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Xd++;return c}
function Yaa(){var a=Zaa,b=Ld?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Zd(a,b,c,d,e){if(q(b)){for(var f=0;f<b.length;f++)Zd(a,b[f],c,d,e);return null}c=$d(c);return Qd(a)?a.Ra(b,c,Aa(d)?!!d.capture:!!d,e):ae(a,b,c,!0,d,e)}function de(a,b,c,d,e){if(q(b))for(var f=0;f<b.length;f++)de(a,b[f],c,d,e);else d=Aa(d)?!!d.capture:!!d,c=$d(c),Qd(a)?a.M(b,c,d,e):a&&(a=be(a))&&(b=a.Oj(b,c,d,e))&&ee(b)}
function ee(a){if(!ta(a)&&a&&!a.gj){var b=a.src;if(Qd(b))Ud(b.bf,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ce(c),d):b.addListener&&b.removeListener&&b.removeListener(d);Xd--;(c=be(b))?(Ud(c,a),0==c.j&&(c.src=null,b[Vd]=null)):Rd(a)}}}function ce(a){return a in Wd?Wd[a]:Wd[a]="on"+a}
function fe(a,b,c,d){var e=!0;if(a=be(a))if(b=a.g[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.gj&&(f=ge(f,d),e=e&&!1!==f)}return e}function ge(a,b){var c=a.listener,d=a.ya||a.src;a.callOnce&&ee(a);return c.call(d,b)}
function Zaa(a,b){if(a.gj)return!0;if(!Ld){var c=b||ua("window.event");b=new Md(c,this);var d=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var e=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(h){e=!0}if(e||void 0==c.returnValue)c.returnValue=!0}c=[];for(e=b.A;e;e=e.parentNode)c.push(e);a=a.type;for(e=c.length-1;!b.B&&0<=e;e--){b.A=c[e];var f=fe(c[e],a,!0,b);d=d&&f}for(e=0;!b.B&&e<c.length;e++)b.A=c[e],f=fe(c[e],a,!1,b),d=d&&f}return d}return ge(a,new Md(b,this))}
function be(a){a=a[Vd];return a instanceof Sd?a:null}var he="__closure_events_fn_"+(1E9*Math.random()>>>0);function $d(a){if(Ba(a))return a;a[he]||(a[he]=function(b){return a.handleEvent(b)});return a[he]};function A(){y.call(this);this.bf=new Sd(this);this.BB=this;this.Ym=null}w(A,y);A.prototype[Pd]=!0;g=A.prototype;g.ms=function(a){this.Ym=a};g.addEventListener=function(a,b,c,d){Yd(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){de(this,a,b,c,d)};
g.dispatchEvent=function(a){var b,c=this.Ym;if(c)for(b=[];c;c=c.Ym)b.push(c);c=this.BB;var d=a.type||a;if(sa(a))a=new z(a,c);else if(a instanceof z)a.target=a.target||c;else{var e=a;a=new z(d,c);Cc(a,e)}e=!0;if(b)for(var f=b.length-1;!a.B&&0<=f;f--){var h=a.A=b[f];e=ie(h,d,!0,a)&&e}a.B||(h=a.A=c,e=ie(h,d,!0,a)&&e,a.B||(e=ie(h,d,!1,a)&&e));if(b)for(f=0;!a.B&&f<b.length;f++)h=a.A=b[f],e=ie(h,d,!1,a)&&e;return e};g.J=function(){A.C.J.call(this);this.removeAllListeners();this.Ym=null};
g.H=function(a,b,c,d){return this.bf.add(String(a),b,!1,c,d)};g.Ra=function(a,b,c,d){return this.bf.add(String(a),b,!0,c,d)};g.M=function(a,b,c,d){this.bf.remove(String(a),b,c,d)};g.removeAllListeners=function(a){return this.bf?this.bf.removeAll(a):0};function ie(a,b,c,d){b=a.bf.g[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.gj&&h.capture==c){var k=h.listener,l=h.ya||h.src;h.callOnce&&Ud(a.bf,h);e=!1!==k.call(l,d)&&e}}return e&&0!=d.xz}
g.Oj=function(a,b,c,d){return this.bf.Oj(String(a),b,c,d)};g.Sd=function(a,b){return this.bf.Sd(ra(a)?String(a):void 0,b)};function je(a,b){A.call(this);this.j=a||1;this.g=b||qa;this.l=t(this.lN,this);this.o=Ha()}w(je,A);g=je.prototype;g.enabled=!1;g.jf=null;g.lN=function(){if(this.enabled){var a=Ha()-this.o;0<a&&a<.8*this.j?this.jf=this.g.setTimeout(this.l,this.j-a):(this.jf&&(this.g.clearTimeout(this.jf),this.jf=null),this.dispatchEvent("tick"),this.enabled&&(this.jf=this.g.setTimeout(this.l,this.j),this.o=Ha()))}};g.start=function(){this.enabled=!0;this.jf||(this.jf=this.g.setTimeout(this.l,this.j),this.o=Ha())};
g.stop=function(){this.enabled=!1;this.jf&&(this.g.clearTimeout(this.jf),this.jf=null)};g.J=function(){je.C.J.call(this);this.stop();delete this.g};function ke(a,b,c){if(Ba(a))c&&(a=t(a,c));else if(a&&"function"==typeof a.handleEvent)a=t(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:qa.setTimeout(a,b||0)};function le(a,b,c){y.call(this);this.g=a;this.o=b||0;this.j=c;this.l=t(this.qu,this)}w(le,y);g=le.prototype;g.ma=0;g.J=function(){le.C.J.call(this);this.stop();delete this.g;delete this.j};g.start=function(a){this.stop();this.ma=ke(this.l,ra(a)?a:this.o)};g.stop=function(){this.isActive()&&qa.clearTimeout(this.ma);this.ma=0};function me(a){a.stop();a.qu()}g.isActive=function(){return 0!=this.ma};g.qu=function(){this.ma=0;this.g&&this.g.call(this.j)};function ne(a,b){y.call(this);this.l=this.j=0;this.s=a;this.o=b;this.g=new le(t(this.gJ,this),0,this)}w(ne,y);g=ne.prototype;g.J=function(){this.g.dispose();delete this.s;delete this.o;ne.C.J.call(this)};g.start=function(a,b){this.stop();b=b||0;this.j=Math.max(a||0,0);this.l=0>b?-1:Ha()+b;this.g.start(0>b?this.j:Math.min(this.j,b))};g.stop=function(){this.g.stop()};g.isActive=function(){return this.g.isActive()};g.qh=function(){};g.Ri=function(){};
g.gJ=function(){if(this.s.call(this.o))this.qh();else if(0>this.l)this.g.start(this.j);else{var a=this.l-Ha();0>=a?this.Ri():this.g.start(Math.min(this.j,a))}};var oe=ic("Firefox"),$aa=kd()||ic("iPod"),aba=ic("iPad"),bba=ic("Android")&&!(Fc()||ic("Firefox")||ic("Opera")||ic("Silk")),pe=Fc(),qe=ic("Safari")&&!(Fc()||ic("Coast")||ic("Opera")||ic("Edge")||ic("Silk")||ic("Android"))&&!ld();function re(a){return(a=a.exec(fc))?a[1]:""}var cba=function(){if(oe)return re(/Firefox\/([0-9.]+)/);if(od||pd||nd)return xd;if(pe)return ld()?re(/CriOS\/([0-9.]+)/):re(/Chrome\/([0-9.]+)/);if(qe&&!ld())return re(/Version\/([0-9.]+)/);if($aa||aba){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(fc);if(a)return a[1]+"."+a[2]}else if(bba)return(a=re(/Android\s+([0-9.]+)/))?a:re(/Version\/([0-9.]+)/);return""}();function se(){this.g="";this.j=te}se.prototype.nf=!0;se.prototype.ue=function(){return this.g};se.prototype.toString=function(){return"Const{"+this.g+"}"};function ue(a){return a instanceof se&&a.constructor===se&&a.j===te?a.g:"type_error:Const"}var te={};function ve(a){var b=new se;b.g=a;return b}ve("");function we(){this.Jr="";this.qB=xe}we.prototype.nf=!0;we.prototype.ue=function(){return this.Jr};we.prototype.rp=!0;we.prototype.si=function(){return 1};function ye(a){if(a instanceof we&&a.constructor===we&&a.qB===xe)return a.Jr;xa(a);return"type_error:TrustedResourceUrl"}var xe={};function ze(a){var b=new we;b.Jr=a;return b};var Ae,Be,dba,eba,fba;zc=function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};jc=function(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)};kc=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};nc=function(a){var b=[],c=0,d;for(d in a)a.hasOwnProperty(d)&&(b[c++]=d);return b};mc=function(a){var b=[],c=0,d;for(d in a)a.hasOwnProperty(d)&&(b[c++]=a[d]);return b};uc=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};
Ac=function(a){var b=xa(a);if("object"==b||"array"==b){if(a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)a.hasOwnProperty(c)&&(b[c]=Ac(a[c]));return b}return a};/*

 Copyright 2005-2015 OpenLayers Contributors. All rights reserved.

 Redistribution and use in source and binary forms, with or without modification,
 are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice, this
 list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright notice,
 this list of conditions and the following disclaimer in the documentation and/or
 other materials provided with the distribution.

 THIS SOFTWARE IS PROVIDED BY OPENLAYERS CONTRIBUTORS ``AS IS'' AND ANY EXPRESS
 OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
 SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

 The views and conclusions contained in the software and documentation are those
 of the authors and should not be interpreted as representing official policies,
 either expressed or implied, of OpenLayers Contributors.
*/
var C=new A,Ce=null;function De(){return/os\s?x/i.test(navigator.userAgent)}function Ee(a){a=a||window;try{return a.self!==a.top}catch(b){return!0}}var Fe=null;function Ge(a){if(a.Jc&&"function"==typeof a.Jc)return a.Jc();if(sa(a))return a.split("");if(ya(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return mc(a)}function He(a){if(a.Ub&&"function"==typeof a.Ub)return a.Ub();if(!a.Jc||"function"!=typeof a.Jc){if(ya(a)||sa(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return nc(a)}}
function Ie(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(ya(a)||sa(a))db(a,b,c);else for(var d=He(a),e=Ge(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)};function Je(a,b,c){return Math.min(Math.max(a,b),c)}function Ke(a,b,c){return Math.abs(a-b)<=(c||1E-6)}function Le(a){return a*Math.PI/180};var Me="StopIteration"in qa?qa.StopIteration:{message:"StopIteration",stack:""};function Ne(){}Ne.prototype.next=function(){throw Me;};Ne.prototype.pe=function(){return this};function Oe(a){if(a instanceof Ne)return a;if("function"==typeof a.pe)return a.pe(!1);if(ya(a)){var b=0,c=new Ne;c.next=function(){for(;;){if(b>=a.length)throw Me;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Pe(a,b){if(ya(a))try{db(a,b,void 0)}catch(c){if(c!==Me)throw c;}else{a=Oe(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Me)throw c;}}}function gba(a,b){var c=Oe(a);a=new Ne;a.next=function(){for(;;){var a=c.next();if(b.call(void 0,a,void 0,c))return a}};return a}function Qe(a){if(ya(a))return vb(a);a=Oe(a);var b=[];Pe(a,function(a){b.push(a)});return b}function hba(a){try{return Oe(a).next()}catch(b){if(b!=Me)throw b;return null}};function Re(a,b){this.ha={};this.g=[];this.l=this.j=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Re?(c=a.Ub(),d=a.Jc()):(c=nc(a),d=mc(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}g=Re.prototype;g.Jc=function(){Se(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.ha[this.g[b]]);return a};g.Ub=function(){Se(this);return this.g.concat()};
g.equals=function(a,b){if(this===a)return!0;if(this.j!=a.j)return!1;b=b||iba;Se(this);for(var c,d=0;c=this.g[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};function iba(a,b){return a===b}g.isEmpty=function(){return 0==this.j};g.clear=function(){this.ha={};this.l=this.j=this.g.length=0};g.remove=function(a){return Te(this.ha,a)?(delete this.ha[a],this.j--,this.l++,this.g.length>2*this.j&&Se(this),!0):!1};
function Se(a){if(a.j!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];Te(a.ha,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.j!=a.g.length){var e={};for(c=b=0;b<a.g.length;)d=a.g[b],Te(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}}g.get=function(a,b){return Te(this.ha,a)?this.ha[a]:b};g.set=function(a,b){Te(this.ha,a)||(this.j++,this.g.push(a),this.l++);this.ha[a]=b};g.forEach=function(a,b){for(var c=this.Ub(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new Re(this)};
g.pe=function(a){Se(this);var b=0,c=this.l,d=this,e=new Ne;e.next=function(){if(c!=d.l)throw Error("The map has changed since the iterator was created");if(b>=d.g.length)throw Me;var e=d.g[b++];return a?e:d.ha[e]};return e};function Te(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Ue=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jba(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}};function Ve(a,b){this.j=this.A=this.l="";this.o=null;this.s=this.G="";this.B=!1;var c;a instanceof Ve?(this.B=ra(b)?b:a.B,We(this,a.l),this.A=a.A,this.j=a.j,Xe(this,a.o),Ye(this,a.He()),Ze(this,a.g.clone()),this.s=a.s):a&&(c=String(a).match(Ue))?(this.B=!!b,We(this,c[1]||"",!0),this.A=$e(c[2]||""),this.j=$e(c[3]||"",!0),Xe(this,c[4]),Ye(this,c[5]||"",!0),Ze(this,c[6]||"",!0),this.s=$e(c[7]||"")):(this.B=!!b,this.g=new af(null,this.B))}
Ve.prototype.toString=function(){var a=[],b=this.l;b&&a.push(bf(b,cf,!0),":");var c=this.j;if(c||"file"==b)a.push("//"),(b=this.A)&&a.push(bf(b,cf,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.o,null!=c&&a.push(":",String(c));if(c=this.He())this.j&&"/"!=c.charAt(0)&&a.push("/"),a.push(bf(c,"/"==c.charAt(0)?kba:lba,!0));(c=this.g.toString())&&a.push("?",c);(c=this.s)&&a.push("#",bf(c,mba));return a.join("")};
Ve.prototype.resolve=function(a){var b=this.clone(),c=!!a.l;c?We(b,a.l):c=!!a.A;c?b.A=a.A:c=!!a.j;c?b.j=a.j:c=null!=a.o;var d=a.He();if(c)Xe(b,a.o);else if(c=!!a.G){if("/"!=d.charAt(0))if(this.j&&!this.G)d="/"+d;else{var e=b.He().lastIndexOf("/");-1!=e&&(d=b.He().substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(Ub(e,"./")||Ub(e,"/.")){d=Ib(e,"/");e=e.split("/");for(var f=[],h=0;h<e.length;){var k=e[h++];"."==k?d&&h==e.length&&f.push(""):".."==k?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),d&&
h==e.length&&f.push("")):(f.push(k),d=!0)}d=f.join("/")}else d=e}c?Ye(b,d):c=""!==a.g.toString();c?Ze(b,a.g.clone()):c=!!a.s;c&&(b.s=a.s);return b};Ve.prototype.clone=function(){return new Ve(this)};function We(a,b,c){a.l=c?$e(b,!0):b;a.l&&(a.l=a.l.replace(/:$/,""))}function Xe(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.o=b}else a.o=null}Ve.prototype.He=function(){return this.G};function Ye(a,b,c){a.G=c?$e(b,!0):b}
function Ze(a,b,c){b instanceof af?(a.g=b,df(a.g,a.B)):(c||(b=bf(b,nba)),a.g=new af(b,a.B))}function ef(a,b){return(!a.j&&!b.j||a.j==b.j)&&(null==a.o&&null==b.o||a.o==b.o)}function ff(a){return a instanceof Ve?a.clone():new Ve(a,void 0)}function gf(a,b){a instanceof Ve||(a=ff(a));b instanceof Ve||(b=ff(b));return a.resolve(b)}function $e(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}
function bf(a,b,c){return sa(a)?(a=encodeURI(a).replace(b,oba),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function oba(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var cf=/[#\/\?@]/g,lba=/[#\?:]/g,kba=/[#\?]/g,nba=/[#\?@]/g,mba=/#/g;function af(a,b){this.j=this.g=null;this.l=a||null;this.o=!!b}function hf(a){a.g||(a.g=new Re,a.j=0,a.l&&jba(a.l,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}g=af.prototype;
g.add=function(a,b){hf(this);this.l=null;a=jf(this,a);var c=this.g.get(a);c||this.g.set(a,c=[]);c.push(b);this.j+=1;return this};g.remove=function(a){hf(this);a=jf(this,a);return Te(this.g.ha,a)?(this.l=null,this.j-=this.g.get(a).length,this.g.remove(a)):!1};g.clear=function(){this.g=this.l=null;this.j=0};g.isEmpty=function(){hf(this);return 0==this.j};function kf(a,b){hf(a);b=jf(a,b);return Te(a.g.ha,b)}
g.forEach=function(a,b){hf(this);this.g.forEach(function(c,d){db(c,function(c){a.call(b,c,d,this)},this)},this)};g.Ub=function(){hf(this);for(var a=this.g.Jc(),b=this.g.Ub(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};g.Jc=function(a){hf(this);var b=[];if(sa(a))kf(this,a)&&(b=tb(b,this.g.get(jf(this,a))));else{a=this.g.Jc();for(var c=0;c<a.length;c++)b=tb(b,a[c])}return b};
g.set=function(a,b){hf(this);this.l=null;a=jf(this,a);kf(this,a)&&(this.j-=this.g.get(a).length);this.g.set(a,[b]);this.j+=1;return this};g.get=function(a,b){a=a?this.Jc(a):[];return 0<a.length?String(a[0]):b};function lf(a,b,c){a.remove(b);0<c.length&&(a.l=null,a.g.set(jf(a,b),vb(c)),a.j+=c.length)}
g.toString=function(){if(this.l)return this.l;if(!this.g)return"";for(var a=[],b=this.g.Ub(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.Jc(d);for(var f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}}return this.l=a.join("&")};g.clone=function(){var a=new af;a.l=this.l;this.g&&(a.g=this.g.clone(),a.j=this.j);return a};function jf(a,b){b=String(b);a.o&&(b=b.toLowerCase());return b}
function df(a,b){b&&!a.o&&(hf(a),a.l=null,a.g.forEach(function(a,b){var c=b.toLowerCase();b!=c&&(this.remove(b),lf(this,c,a))},a));a.o=b}g.extend=function(a){for(var b=0;b<arguments.length;b++)Ie(arguments[b],function(a,b){this.add(b,a)},this)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function mf(a,b){this.s=[];this.Z=a;this.N=b||null;this.l=this.g=!1;this.j=void 0;this.L=this.Ea=this.B=!1;this.A=0;this.xa=null;this.o=0}g=mf.prototype;g.cancel=function(a){if(this.g)this.j instanceof mf&&this.j.cancel();else{if(this.xa){var b=this.xa;delete this.xa;a?b.cancel(a):(b.o--,0>=b.o&&b.cancel())}this.Z?this.Z.call(this.N,this):this.L=!0;this.g||this.Eb(new nf(this))}};g.Jt=function(a,b){this.B=!1;of(this,a,b)};function of(a,b,c){a.g=!0;a.j=c;a.l=!b;pf(a)}
function qf(a){if(a.g){if(!a.L)throw new rf(a);a.L=!1}}g.callback=function(a){qf(this);of(this,!0,a)};g.Eb=function(a){qf(this);of(this,!1,a)};function sf(a,b,c){return tf(a,b,null,c)}function uf(a,b,c){tf(a,b,b,c)}function tf(a,b,c,d){a.s.push([b,c,d]);a.g&&pf(a);return a}g.then=function(a,b,c){var d,e,f=new Oc(function(a,b){d=a;e=b});tf(this,d,function(a){a instanceof nf?f.cancel():e(a)});return f.then(a,b,c)};Pa(mf);function vf(a,b){tf(a,b.callback,b.Eb,b)}
function wf(a,b){return b instanceof mf?sf(a,t(b.ka,b)):sf(a,function(){return b})}mf.prototype.ka=function(a){var b=new mf;vf(this,b);a&&(b.xa=this,this.o++);return b};function xf(a){return gb(a.s,function(a){return Ba(a[1])})}
function pf(a){if(a.A&&a.g&&xf(a)){var b=a.A,c=yf[b];c&&(qa.clearTimeout(c.ma),delete yf[b]);a.A=0}a.xa&&(a.xa.o--,delete a.xa);b=a.j;for(var d=c=!1;a.s.length&&!a.B;){var e=a.s.shift(),f=e[0],h=e[1];e=e[2];if(f=a.l?h:f)try{var k=f.call(e||a.N,b);ra(k)&&(a.l=a.l&&(k==b||k instanceof Error),a.j=b=k);if(Qa(b)||"function"===typeof qa.Promise&&b instanceof qa.Promise)d=!0,a.B=!0}catch(l){b=l,a.l=!0,xf(a)||(c=!0)}}a.j=b;d&&(k=t(a.Jt,a,!0),d=t(a.Jt,a,!1),b instanceof mf?(tf(b,k,d),b.Ea=!0):b.then(k,d));
c&&(b=new zf(b),yf[b.ma]=b,a.A=b.ma)}function Af(a){var b=new mf;b.callback(a);return b}function Bf(a){var b=new mf;b.Eb(a);return b}function rf(a){Ra.call(this);this.deferred=a}w(rf,Ra);rf.prototype.message="Deferred has already fired";rf.prototype.name="AlreadyCalledError";function nf(a){Ra.call(this);this.deferred=a}w(nf,Ra);nf.prototype.message="Deferred was canceled";nf.prototype.name="CanceledError";function zf(a){this.ma=qa.setTimeout(t(this.j,this),0);this.g=a}
zf.prototype.j=function(){delete yf[this.ma];throw this.g;};var yf={};var pba=!od||Cd(),qba=!qd&&!od||od&&Cd()||qd&&Bd("1.9.1");var rba={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function Cf(){this.g="";this.j=Df}Cf.prototype.nf=!0;Cf.prototype.ue=function(){return this.g};Cf.prototype.rp=!0;Cf.prototype.si=function(){return 1};function Ef(a){if(a instanceof Cf&&a.constructor===Cf&&a.j===Df)return a.g;xa(a);return"type_error:SafeUrl"}var Ff=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Gf(a){if(a instanceof Cf)return a;a=a.nf?a.ue():String(a);Ff.test(a)||(a="about:invalid#zClosurez");return Hf(a)}var Df={};function Hf(a){var b=new Cf;b.g=a;return b}Hf("about:blank");function If(){this.g="";this.j=Jf}If.prototype.nf=!0;var Jf={};If.prototype.ue=function(){return this.g};function Kf(a){var b=new If;b.g=a;return b}var sba=Kf("");function Lf(a){if(a instanceof Cf)a='url("'+Ef(a).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';else if(a instanceof se)a=ue(a);else{a=String(a);var b=a.replace(tba,"$1").replace(Mf,"url");if(b=uba.test(b)){for(var c=b=!0,d=0;d<a.length;d++){var e=a.charAt(d);"'"==e&&c?b=!b:'"'==e&&b&&(c=!c)}b=b&&c}a=b?vba(a):"zClosurez"}return a}
var uba=/^[-,."'%_!# a-zA-Z0-9]+$/,Mf=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,tba=/\b(hsl|hsla|rgb|rgba|(rotate|scale|translate)(X|Y|Z|3d)?)\([-0-9a-z.%, ]+\)/g;function vba(a){return a.replace(Mf,function(a,c,d,e){var b="";d=d.replace(/^(['"])(.*)\1$/,function(a,c,d){b=c;return d});a=Gf(d).ue();return c+b+a+b+e})};function Nf(){this.g="";this.j=Of}Nf.prototype.nf=!0;var Of={};function Pf(a){function b(a){q(a)?db(a,b):c+=Qf(a)}var c="";db(arguments,b);return Rf(c)}function Sf(a){a=ue(a);return 0===a.length?wba:Rf(a)}Nf.prototype.ue=function(){return this.g};function Qf(a){if(a instanceof Nf&&a.constructor===Nf&&a.j===Of)return a.g;xa(a);return"type_error:SafeStyleSheet"}function Rf(a){var b=new Nf;b.g=a;return b}var wba=Rf("");function Tf(){this.g="";this.l=Uf;this.j=null}Tf.prototype.rp=!0;Tf.prototype.si=function(){return this.j};Tf.prototype.nf=!0;Tf.prototype.ue=function(){return this.g};function Vf(a){if(a instanceof Tf&&a.constructor===Tf&&a.l===Uf)return a.g;xa(a);return"type_error:SafeHtml"}function Wf(a){if(a instanceof Tf)return a;var b=null;a.rp&&(b=a.si());a=Sb(a.nf?a.ue():String(a));return Xf(a,b)}
function Yf(a){if(a instanceof Tf)return a;a=Wf(a);var b=Vf(a);b=Rb(b.replace(/  /g," &#160;"),void 0);return Xf(b,a.si())}var Zf=/^[a-zA-Z0-9-]+$/,xba={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},yba={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0};
function $f(a,b,c){var d=String(a);if(!Zf.test(d))throw Error("Invalid tag name <"+d+">.");if(d.toUpperCase()in yba)throw Error("Tag name <"+d+"> is not allowed for SafeHtml.");return ag(String(a),b,c)}
function bg(a){var b={type:"text/css"},c={},d={},e;for(e in b)d[e]=b[e];for(e in c)d[e]=c[e];for(e in void 0){var f=e.toLowerCase();if(f in b)throw Error('Cannot override "'+f+'" attribute, got "'+e+'" with value "'+(void 0)[e]+'"');f in c&&delete d[f];d[e]=(void 0)[e]}b="";a=tb(a);for(c=0;c<a.length;c++)b+=Qf(a[c]);a=Xf(b,0);return ag("style",d,a)}function cg(a){function b(a){q(a)?db(a,b):(a=Wf(a),d+=Vf(a),a=a.si(),0==c?c=a:0!=a&&c!=a&&(c=null))}var c=0,d="";db(arguments,b);return Xf(d,c)}
var Uf={};function Xf(a,b){var c=new Tf;c.g=a;c.j=b;return c}
function ag(a,b,c){var d=null,e="";if(b)for(n in b){if(!Zf.test(n))throw Error('Invalid attribute name "'+n+'".');var f=b[n];if(null!=f){var h=a;var k=n;var l=f;if(l instanceof se)l=ue(l);else if("style"==k.toLowerCase()){f=void 0;h=l;if(!Aa(h))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof h+" given: "+h);if(!(h instanceof If)){l="";for(f in h){if(!/^[-_a-zA-Z0-9]+$/.test(f))throw Error("Name allows only [-_a-zA-Z0-9], got: "+f);var m=h[f];null!=
m&&(m=q(m)?fb(m,Lf).join(" "):Lf(m),l+=f+":"+m+";")}h=l?Kf(l):sba}h instanceof If&&h.constructor===If&&h.j===Jf?f=h.g:(xa(h),f="type_error:SafeStyle");l=f}else{if(/^on/i.test(k))throw Error('Attribute "'+k+'" requires goog.string.Const value, "'+l+'" given.');if(k.toLowerCase()in xba)if(l instanceof we)l=ye(l);else if(l instanceof Cf)l=Ef(l);else if(sa(l))l=Gf(l).ue();else throw Error('Attribute "'+k+'" on tag "'+h+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+l+'" given.');
}l.nf&&(l=l.ue());k=k+'="'+Sb(String(l))+'"';e+=" "+k}}var n="<"+a+e;null!=c?q(c)||(c=[c]):c=[];!0===rba[a.toLowerCase()]?n+=">":(d=cg(c),n+=">"+Vf(d)+"</"+a+">",d=d.si());(a=b&&b.dir)&&(/^(ltr|rtl|auto)$/i.test(a)?d=0:d=null);return Xf(n,d)}Xf("<!DOCTYPE html>",0);var dg=Xf("",0),eg=Xf("<br>",0);function fg(a,b){this.x=ra(a)?a:0;this.y=ra(b)?b:0}g=fg.prototype;g.clone=function(){return new fg(this.x,this.y)};g.equals=function(a){return a instanceof fg&&(this==a?!0:this&&a?this.x==a.x&&this.y==a.y:!1)};g.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};g.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};g.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
g.translate=function(a,b){a instanceof fg?(this.x+=a.x,this.y+=a.y):(this.x+=Number(a),ta(b)&&(this.y+=b));return this};g.scale=function(a,b){b=ta(b)?b:a;this.x*=a;this.y*=b;return this};function gg(a,b){this.width=a;this.height=b}function hg(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}g=gg.prototype;g.clone=function(){return new gg(this.width,this.height)};g.aspectRatio=function(){return this.width/this.height};g.isEmpty=function(){return!(this.width*this.height)};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};g.scale=function(a,b){b=ta(b)?b:a;this.width*=a;this.height*=b;return this};function ig(a){return a?new jg(kg(a)):Sa||(Sa=new jg)}function lg(a,b){return sa(b)?a.getElementById(b):b}
function ng(a,b){var c=b||document;if(c.getElementsByClassName)a=c.getElementsByClassName(a)[0];else{c=document;var d=b||c;if(d.querySelectorAll&&d.querySelector&&a)a=d.querySelector(""+(a?"."+a:""));else{b=b||c;if(b.querySelectorAll&&b.querySelector&&a)a=b.querySelectorAll(""+(a?"."+a:""));else if(a&&b.getElementsByClassName){var e=b.getElementsByClassName(a);a=e}else if(e=b.getElementsByTagName("*"),a){var f={};for(c=d=0;b=e[c];c++){var h=b.className;"function"==typeof h.split&&kb(h.split(/\s+/),
a)&&(f[d++]=b)}f.length=d;a=f}else a=e;a=a[0]||null}}return a||null}function og(a,b){jc(b,function(b,d){b&&b.nf&&(b=b.ue());"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:pg.hasOwnProperty(d)?a.setAttribute(pg[d],b):Ib(d,"aria-")||Ib(d,"data-")?a.setAttribute(d,b):a[d]=b})}
var pg={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function qg(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new gg(a.clientWidth,a.clientHeight)}
function rg(a){var b=a.scrollingElement?a.scrollingElement:rd||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement;a=a.parentWindow||a.defaultView;return od&&Bd("10")&&a.pageYOffset!=b.scrollTop?new fg(b.scrollLeft,b.scrollTop):new fg(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}function sg(a,b,c){return tg(document,arguments)}
function tg(a,b){var c=String(b[0]),d=b[1];if(!pba&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Sb(d.name),'"');if(d.type){c.push(' type="',Sb(d.type),'"');var e={};Cc(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(sa(d)?c.className=d:q(d)?c.className=d.join(" "):og(c,d));2<b.length&&ug(a,c,b,2);return c}
function ug(a,b,c,d){function e(c){c&&b.appendChild(sa(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];!ya(f)||Aa(f)&&0<f.nodeType?e(f):db(zba(f)?vb(f):f,e)}}function vg(a){var b=document,c=b.createElement("DIV");od?(a=cg(eg,a),c.innerHTML=Vf(a),c.removeChild(c.firstChild)):c.innerHTML=Vf(a);if(1==c.childNodes.length)c=c.removeChild(c.firstChild);else{for(b=b.createDocumentFragment();c.firstChild;)b.appendChild(c.firstChild);c=b}return c}function wg(a,b){ug(kg(a),a,arguments,1)}
function xg(a){for(var b;b=a.firstChild;)a.removeChild(b)}function yg(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function zg(a){return qba&&void 0!=a.children?a.children:eb(a.childNodes,function(a){return 1==a.nodeType})}function Ag(a){return ra(a.firstElementChild)?a.firstElementChild:Bg(a.firstChild)}function Bg(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Cg(a){return Aa(a)&&1==a.nodeType}
function Dg(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function kg(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Eg(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=String(b);else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else xg(a),a.appendChild(kg(a).createTextNode(String(b)))}function Fg(a){return od&&!Bd("9")?(a=a.getAttributeNode("tabindex"),null!=a&&a.specified):a.hasAttribute("tabindex")}function Gg(a){a=a.tabIndex;return ta(a)&&0<=a&&32768>a}
function zba(a){if(a&&"number"==typeof a.length){if(Aa(a))return"function"==typeof a.item||"string"==typeof a.item;if(Ba(a))return"function"==typeof a.item}return!1}function Hg(a,b){return b?Ig(a,function(a){return!b||sa(a.className)&&kb(a.className.split(/\s+/),b)},!0,void 0):null}function Ig(a,b,c,d){a&&!c&&(a=a.parentNode);for(c=0;a&&(null==d||c<=d);){if(b(a))return a;a=a.parentNode;c++}return null}function jg(a){this.g=a||qa.document||document}g=jg.prototype;
g.tb=function(a){return lg(this.g,a)};g.getElementsByTagName=function(a,b){return(b||this.g).getElementsByTagName(String(a))};g.qc=og;g.sh=function(a,b,c){return tg(this.g,arguments)};g.appendChild=function(a,b){a.appendChild(b)};g.append=wg;g.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
g.removeNode=yg;g.na=zg;g.isElement=Cg;g.isWindow=function(a){return Aa(a)&&a.window==a};g.contains=Dg;function Aba(a,b,c,d,e,f){if(!(od||pd||rd&&Bd("525")))return!0;if(sd&&e)return Jg(a);if(e&&!d)return!1;ta(b)&&(b=Kg(b));e=17==b||18==b||sd&&91==b;if((!c||sd)&&e||sd&&16==b&&(d||f))return!1;if((rd||pd)&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(od&&d&&b==a)return!1;switch(a){case 13:return!0;case 27:return!(rd||pd)}return Jg(a)}
function Jg(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||(rd||pd)&&0==a)return!0;switch(a){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Kg(a){if(qd)a=Bba(a);else if(sd&&rd)switch(a){case 93:a=91}return a}
function Bba(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Lg(a,b){A.call(this);a&&Mg(this,a,b)}w(Lg,A);g=Lg.prototype;g.K=null;g.gm=null;g.Bp=null;g.hm=null;g.le=-1;g.Gg=-1;g.bo=!1;
var Ng={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Og={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Cba=od||pd||rd&&Bd("525"),Pg=sd&&qd;g=Lg.prototype;
g.bE=function(a){if(rd||pd)if(17==this.le&&!a.ctrlKey||18==this.le&&!a.altKey||sd&&91==this.le&&!a.metaKey)this.Gg=this.le=-1;-1==this.le&&(a.ctrlKey&&17!=a.keyCode?this.le=17:a.altKey&&18!=a.keyCode?this.le=18:a.metaKey&&91!=a.keyCode&&(this.le=91));Cba&&!Aba(a.keyCode,this.le,a.shiftKey,a.ctrlKey,a.altKey,a.metaKey)?this.handleEvent(a):(this.Gg=Kg(a.keyCode),Pg&&(this.bo=a.altKey))};g.cE=function(a){this.Gg=this.le=-1;this.bo=a.altKey};
g.handleEvent=function(a){var b=a.j,c=b.altKey;if(od&&"keypress"==a.type){var d=this.Gg;var e=13!=d&&27!=d?b.keyCode:0}else(rd||pd)&&"keypress"==a.type?(d=this.Gg,e=0<=b.charCode&&63232>b.charCode&&Jg(d)?b.charCode:0):nd&&!rd?(d=this.Gg,e=Jg(d)?b.keyCode:0):(d=b.keyCode||this.Gg,e=b.charCode||0,Pg&&(c=this.bo),sd&&63==e&&224==d&&(d=191));var f=d=Kg(d);d?63232<=d&&d in Ng?f=Ng[d]:25==d&&a.shiftKey&&(f=9):b.keyIdentifier&&b.keyIdentifier in Og&&(f=Og[b.keyIdentifier]);a=f==this.le;this.le=f;b=new Qg(f,
e,a,b);b.altKey=c;this.dispatchEvent(b)};g.tb=function(){return this.K};function Mg(a,b,c){a.hm&&a.detach();a.K=b;a.gm=Yd(a.K,"keypress",a,c);a.Bp=Yd(a.K,"keydown",a.bE,c,a);a.hm=Yd(a.K,"keyup",a.cE,c,a)}g.detach=function(){this.gm&&(ee(this.gm),ee(this.Bp),ee(this.hm),this.hm=this.Bp=this.gm=null);this.K=null;this.Gg=this.le=-1};g.J=function(){Lg.C.J.call(this);this.detach()};function Qg(a,b,c,d){Md.call(this,d);this.type="key";this.keyCode=a;this.repeat=c}w(Qg,Md);var Rg,Sg;function Tg(a){A.call(this);this.j=a||window;this.l=Yd(this.j,"resize",this.o,!1,this);this.g=qg(this.j||window)}w(Tg,A);function Dba(a){return a.g?a.g.clone():null}Tg.prototype.J=function(){Tg.C.J.call(this);this.l&&(ee(this.l),this.l=null);this.g=this.j=null};Tg.prototype.o=function(){var a=qg(this.j||window);hg(a,this.g)||(this.g=a,this.dispatchEvent("resize"))};function Ug(a,b,c,d,e){this.reset(a,b,c,d,e)}Ug.prototype.g=null;var Eba=0;Ug.prototype.reset=function(a,b,c,d,e){"number"==typeof e||Eba++;this.j=d||Ha();this.o=a;this.s=b;this.l=c;delete this.g};function Vg(a){this.l=a;this.j=this.cb=this.g=this.xa=null}function Wg(a,b){this.name=a;this.value=b}Wg.prototype.toString=function(){return this.name};var Xg=new Wg("SHOUT",1200),Yg=new Wg("SEVERE",1E3),Zg=new Wg("WARNING",900),$g=new Wg("INFO",800),ah=new Wg("CONFIG",700),bh=new Wg("FINE",500),ch=[new Wg("OFF",Infinity),Xg,Yg,Zg,$g,ah,bh,new Wg("FINER",400),new Wg("FINEST",300),new Wg("ALL",0)],eh=null;
function fh(a){if(!eh){eh={};for(var b=0,c;c=ch[b];b++)eh[c.value]=c,eh[c.name]=c}return eh[a]||null}g=Vg.prototype;g.getName=function(){return this.l};g.ng=function(a){this.j||(this.j=[]);this.j.push(a)};g.qz=function(a){var b=this.j;return!!b&&qb(b,a)};g.getParent=function(){return this.xa};g.na=function(){this.cb||(this.cb={});return this.cb};function gh(a){return a.g?a.g:a.xa?gh(a.xa):null}
g.log=function(a,b,c){if(a.value>=gh(this).value)for(Ba(b)&&(b=b()),a=new Ug(a,String(b),this.l),c&&(a.g=c),c=this;c;){var d=c,e=a;if(d.j)for(var f=0;b=d.j[f];f++)b(e);c=c.getParent()}};g.ib=function(a,b){this.log(Zg,a,b)};g.info=function(a,b){this.log($g,a,b)};g.config=function(a,b){this.log(ah,a,b)};g.za=function(a,b){this.log(bh,a,b)};var hh={},ih=null;function jh(){ih||(ih=new Vg(""),hh[""]=ih,ih.g=ah)}
function kh(a){jh();var b;if(!(b=hh[a])){b=new Vg(a);var c=a.lastIndexOf("."),d=a.substr(c+1);c=kh(a.substr(0,c));c.na()[d]=b;b.xa=c;hh[a]=b}return b};var E={lg:!0,AQ:"",FP:Vg,DP:Wg};E.EP=Ug;E.V=function(a){return E.lg?kh(a):null};E.ng=function(a){E.lg&&a&&a.ng(void 0)};E.qz=function(a){return E.lg&&a?a.qz(void 0):!1};E.log=function(a,b,c,d){E.lg&&a&&a.log(b,c,d)};E.error=function(a,b,c){E.lg&&a&&a.log(Yg,b,c)};E.ib=function(a,b,c){E.lg&&a&&a.ib(b,c)};E.info=function(a,b,c){E.lg&&a&&a.info(b,c)};E.za=function(a,b){E.lg&&a&&a.za(b,void 0)};function G(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function lh(){}function H(a){return a.WF||(a.WF=++Fba)}var Fba=0;function mh(a){this.message="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}G(mh,Error);var nh="function"===typeof Object.assign?Object.assign:function(a,b){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])}return c};function oh(a){for(var b in a)delete a[b]}function ph(a){var b=[],c;for(c in a)b.push(a[c]);return b}function qh(a){for(var b in a)return!1;return!b};function Gba(a){function b(b){var c=a.listener,e=a.bindTo||a.target;a.callOnce&&rh(a);return c.call(e,b)}return a.boundListener=b}function sh(a,b,c,d){for(var e,f=0,h=a.length;f<h;++f)if(e=a[f],e.listener===b&&e.bindTo===c)return d&&(e.deleteIndex=f),e}function th(a,b){return(a=a.pm)?a[b]:void 0}function uh(a){var b=a.pm;b||(b=a.pm={});return b}
function vh(a,b){var c=th(a,b);if(c){for(var d=0,e=c.length;d<e;++d)a.removeEventListener(b,c[d].boundListener),oh(c[d]);c.length=0;if(c=a.pm)delete c[b],0===Object.keys(c).length&&delete a.pm}}function I(a,b,c,d,e){var f=uh(a),h=f[b];h||(h=f[b]=[]);(f=sh(h,c,d,!1))?e||(f.callOnce=!1):(f={bindTo:d,callOnce:!!e,listener:c,target:a,type:b},a.addEventListener(b,Gba(f)),h.push(f));return f}function wh(a,b,c,d){return I(a,b,c,d,!0)}function xh(a,b,c,d){(a=th(a,b))&&(c=sh(a,c,d,!0))&&rh(c)}
function rh(a){if(a&&a.target){a.target.removeEventListener(a.type,a.boundListener);var b=th(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);0===b.length&&vh(a.target,a.type)}oh(a)}}function yh(a){var b=uh(a),c;for(c in b)vh(a,c)};function zh(){}zh.prototype.Pr=!1;zh.prototype.dispose=function(){this.Pr||(this.Pr=!0,this.J())};zh.prototype.J=lh;function Ah(a){this.type=a;this.target=null}Ah.prototype.preventDefault=Ah.prototype.stopPropagation=function(){this.bz=!0};function Hba(a){a.stopPropagation()};function Bh(){this.yk={};this.hi={};this.wh={}}G(Bh,zh);g=Bh.prototype;g.addEventListener=function(a,b){var c=this.wh[a];c||(c=this.wh[a]=[]);-1===c.indexOf(b)&&c.push(b)};
g.dispatchEvent=function(a){var b="string"===typeof a?new Ah(a):a;a=b.type;b.target=this;var c=this.wh[a];if(c){a in this.hi||(this.hi[a]=0,this.yk[a]=0);++this.hi[a];for(var d=0,e=c.length;d<e;++d)if(!1===c[d].call(this,b)||b.bz){var f=!1;break}--this.hi[a];if(0===this.hi[a]){b=this.yk[a];for(delete this.yk[a];b--;)this.removeEventListener(a,lh);delete this.hi[a]}return f}};g.J=function(){yh(this)};g.Sd=function(a){return a?a in this.wh:0<Object.keys(this.wh).length};
g.removeEventListener=function(a,b){var c=this.wh[a];c&&(b=c.indexOf(b),a in this.yk?(c[b]=lh,++this.yk[a]):(c.splice(b,1),0===c.length&&delete this.wh[a]))};function Ch(){Bh.call(this);this.Yb=0}G(Ch,Bh);function Dh(a){if(Array.isArray(a))for(var b=0,c=a.length;b<c;++b)rh(a[b]);else rh(a)}Ch.prototype.ia=function(){++this.Yb;this.dispatchEvent("change")};Ch.prototype.on=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=I(this,a[f],b,c);return e}return I(this,a,b,c)};Ch.prototype.once=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=wh(this,a[f],b,c);return e}return wh(this,a,b,c)};
function Eh(a,b,c,d){if(Array.isArray(b))for(var e=0,f=b.length;e<f;++e)xh(a,b[e],c,d);else xh(a,b,c,d)};function Fh(a){Ch.call(this);H(this);this.la={};void 0!==a&&this.qc(a)}G(Fh,Ch);var Gh={};function Hh(a){return Gh.hasOwnProperty(a)?Gh[a]:Gh[a]="change:"+a}g=Fh.prototype;g.get=function(a){var b;this.la.hasOwnProperty(a)&&(b=this.la[a]);return b};g.Ub=function(){return Object.keys(this.la)};g.Vb=function(){return nh({},this.la)};g.Qp=function(a,b){var c=Hh(a);this.dispatchEvent(new Jh(c,a,b));this.dispatchEvent(new Jh("propertychange",a,b))};
g.set=function(a,b,c){c?this.la[a]=b:(c=this.la[a],this.la[a]=b,c!==b&&this.Qp(a,c))};g.qc=function(a,b){for(var c in a)this.set(c,a[c],b)};g.Ue=function(a,b){if(a in this.la){var c=this.la[a];delete this.la[a];b||this.Qp(a,c)}};function Jh(a,b,c){Ah.call(this,a);this.key=b;this.oldValue=c}G(Jh,Ah);function Kh(a,b){Fh.call(this);this.j=!!(b||{}).unique;this.g=a?a:[];if(this.j)for(a=0,b=this.g.length;a<b;++a)Lh(this,this.g[a],a);Mh(this)}G(Kh,Fh);g=Kh.prototype;g.clear=function(){for(;0<this.getLength();)this.pop()};g.extend=function(a){var b;var c=0;for(b=a.length;c<b;++c)this.push(a[c]);return this};g.forEach=function(a,b){a=b?a.bind(b):a;b=this.g;for(var c=0,d=b.length;c<d;++c)a(b[c],c,b)};g.item=function(a){return this.g[a]};g.getLength=function(){return this.get(Nh)};
function Oh(a,b,c){a.j&&Lh(a,c);a.g.splice(b,0,c);Mh(a);a.dispatchEvent(new Ph("add",c))}g.pop=function(){return Qh(this,this.getLength()-1)};g.push=function(a){this.j&&Lh(this,a);var b=this.getLength();Oh(this,b,a);return this.getLength()};g.remove=function(a){var b=this.g,c;var d=0;for(c=b.length;d<c;++d)if(b[d]===a)return Qh(this,d)};function Qh(a,b){var c=a.g[b];a.g.splice(b,1);Mh(a);a.dispatchEvent(new Ph("remove",c));return c}function Mh(a){a.set(Nh,a.g.length)}
function Lh(a,b,c){for(var d=0,e=a.g.length;d<e;++d)if(a.g[d]===b&&d!==c)throw new mh(58);}var Nh="length";function Ph(a,b){Ah.call(this,a);this.element=b}G(Ph,Ah);function Rh(a,b){if(!a)throw new mh(b);};function Sh(a){for(var b=Th(),c=0,d=a.length;c<d;++c)Uh(b,a[c]);return b}function Vh(a,b,c){return c?(c[0]=a[0]-b,c[1]=a[1]-b,c[2]=a[2]+b,c[3]=a[3]+b,c):[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}function Wh(a,b){return b?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):a.slice()}function Xh(a,b){var c=b[0];b=b[1];return a[0]<=c&&c<=a[2]&&a[1]<=b&&b<=a[3]}function Yh(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function Th(){return[Infinity,Infinity,-Infinity,-Infinity]}
function Zh(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function $h(a){return Zh(Infinity,Infinity,-Infinity,-Infinity,a)}function ai(a,b){var c=a[0];a=a[1];return Zh(c,a,c,a,b)}function bi(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}function ci(a,b){b[0]<a[0]&&(a[0]=b[0]);b[2]>a[2]&&(a[2]=b[2]);b[1]<a[1]&&(a[1]=b[1]);b[3]>a[3]&&(a[3]=b[3]);return a}function Uh(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}
function di(a,b,c,d,e){for(;c<d;c+=e){var f=a,h=b[c],k=b[c+1];f[0]=Math.min(f[0],h);f[1]=Math.min(f[1],k);f[2]=Math.max(f[2],h);f[3]=Math.max(f[3],k)}return a}function ei(a){var b=0;fi(a)||(b=gi(a)*hi(a));return b}function ii(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}
function ji(a,b,c,d,e){var f=b*d[0]/2;d=b*d[1]/2;b=Math.cos(c);var h=Math.sin(c);c=f*b;f*=h;b*=d;var k=d*h,l=a[0],m=a[1];a=l-c+k;d=l-c-k;h=l+c-k;c=l+c+k;k=m-f-b;l=m-f+b;var n=m+f+b;f=m+f-b;return Zh(Math.min(a,d,h,c),Math.min(k,l,n,f),Math.max(a,d,h,c),Math.max(k,l,n,f),e)}function hi(a){return a[3]-a[1]}function ki(a,b){var c=Th();li(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c}function gi(a){return a[2]-a[0]}
function li(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function fi(a){return a[2]<a[0]||a[3]<a[1]}function mi(a,b){var c=(a[2]-a[0])/2*(b-1);b=(a[3]-a[1])/2*(b-1);a[0]-=c;a[2]+=c;a[1]-=b;a[3]+=b};function ni(){return!0}function oi(){return!1};function pi(a,b,c,d,e,f){for(var h=f?f:[],k=0;b<c;b+=d){var l=a[b],m=a[b+1];h[k++]=e[0]*l+e[2]*m+e[4];h[k++]=e[1]*l+e[3]*m+e[5]}f&&h.length!=k&&(h.length=k);return h}function qi(a,b,c,d,e,f,h){for(var k=h?h:[],l=0,m;b<c;b+=d)for(k[l++]=a[b]+e,k[l++]=a[b+1]+f,m=b+2;m<b+d;++m)k[l++]=a[m];h&&k.length!=l&&(k.length=l);return k};function ri(a,b,c){return Math.min(Math.max(a,b),c)}var Iba=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();function Jba(a){Rh(0<a,29);return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function si(a){return a*Math.PI/180}function ti(a,b){a%=b;return 0>a*b?a+b:a};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function ui(a){this.radius=a}ui.prototype.offset=function(a,b,c){var d=si(a[1]);b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(si(a[0])+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};
function vi(a,b){var c=si(a[1]),d=si(b[1]),e=(d-c)/2;a=si(b[0]-a[0])/2;c=Math.sin(e)*Math.sin(e)+Math.sin(a)*Math.sin(a)*Math.cos(c)*Math.cos(d);return 2*Kba.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))};var wi={};wi.degrees=12741994*Math.PI/360;wi.ft=.3048;wi.m=1;wi["us-ft"]=1200/3937;function xi(a){this.Tb=a.code;this.o=a.units;this.l=void 0!==a.extent?a.extent:null;this.Sn=void 0!==a.worldExtent?a.worldExtent:null;this.fh=void 0!==a.axisOrientation?a.axisOrientation:"enu";this.j=void 0!==a.global?a.global:!1;this.g=!(!this.j||!this.l);this.B=a.getPointResolution;this.s=null;this.A=a.metersPerUnit;var b=a.code,c=window.proj4;"function"==typeof c&&(b=c.defs(b),void 0!==b&&(void 0!==b.axis&&void 0===a.axisOrientation&&(this.fh=b.axis),void 0===a.metersPerUnit&&(this.A=b.to_meter),
void 0===a.units&&(this.o=b.units)))}xi.prototype.aa=function(){return this.l};xi.prototype.Rc=function(){return this.o};function yi(a){return a.A||wi[a.o]}xi.prototype.uh=function(){return this.j};xi.prototype.Ac=function(a){this.l=a;this.g=!(!this.j||!a)};function zi(a){xi.call(this,{code:a,units:"m",extent:Lba,global:!0,worldExtent:Mba,getPointResolution:function(a,c){return a/Iba(c[1]/6378137)}})}G(zi,xi);var Ai=6378137*Math.PI,Lba=[-Ai,-Ai,Ai,Ai],Mba=[-180,-85,180,85],Bi=[new zi("EPSG:3857"),new zi("EPSG:102100"),new zi("EPSG:102113"),new zi("EPSG:900913"),new zi("urn:ogc:def:crs:EPSG:6.18:3:3857"),new zi("urn:ogc:def:crs:EPSG::3857"),new zi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ci(a,b){xi.call(this,{code:a,units:"degrees",extent:Di,axisOrientation:b,global:!0,metersPerUnit:Nba,worldExtent:Di})}G(Ci,xi);var Di=[-180,-90,180,90],Nba=6378137*Math.PI/180,Ei=[new Ci("CRS:84"),new Ci("EPSG:4326","neu"),new Ci("urn:ogc:def:crs:EPSG::4326","neu"),new Ci("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Ci("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ci("urn:ogc:def:crs:OGC:2:84"),new Ci("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ci("urn:x-ogc:def:crs:EPSG:4326","neu")];var Fi={};var Gi={};function Hi(a,b,c){a=a.Tb;b=b.Tb;a in Gi||(Gi[a]={});Gi[a][b]=c}function Ii(a,b){a=a.Tb;delete Gi[a][b.Tb];qh(Gi[a])&&delete Gi[a]}function Ji(a,b){var c;a in Gi&&b in Gi[a]&&(c=Gi[a][b]);return c};var Kba=new ui(6371008.8);function Ki(a,b,c,d){a=Li(a);var e=a.B;e?b=e(b,c):"degrees"==a.Rc()&&!d||"degrees"==d||(e=Mi(a,Li("EPSG:4326")),b=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],b=e(b,b,2),c=b.slice(0,2),e=b.slice(2,4),c=vi(c,e),e=b.slice(4,6),b=b.slice(6,8),b=(c+vi(e,b))/2,a=d?wi[d]:yi(a),void 0!==a&&(b/=a));return b}function Ni(a){a.forEach(Oi);a.forEach(function(b){a.forEach(function(a){b!==a&&Hi(b,a,Pi)})})}
function Qi(a,b,c,d){a.forEach(function(a){b.forEach(function(b){Hi(a,b,c);Hi(b,a,d)})})}function Oi(a){Fi[a.Tb]=a;Hi(a,a,Pi)}function Ri(a){return a?"string"===typeof a?Li(a):a:Li("EPSG:3857")}function Si(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f;for(f=0;f<e;f+=d){var h=a([b[f],b[f+1]]);c[f]=h[0];c[f+1]=h[1];for(h=d-1;2<=h;--h)c[f+h]=b[f+h]}return c}}function Ti(a,b){return Ui(a,"EPSG:4326",void 0!==b?b:"EPSG:3857")}
function Vi(a,b){a=Ui(a,void 0!==b?b:"EPSG:3857","EPSG:4326");b=a[0];if(-180>b||180<b)a[0]=ti(b+180,360)-180;return a}function Li(a){var b=null;if(a instanceof xi)b=a;else if("string"===typeof a&&(b=Fi[a]||null,!b)){var c=window.proj4;"function"==typeof c&&void 0!==c.defs(a)&&(b=new xi({code:a}),Oi(b))}return b}function Wi(a,b){if(a===b)return!0;var c=a.Rc()===b.Rc();return a.Tb===b.Tb?c:Mi(a,b)===Pi&&c}function Xi(a,b){a=Li(a);b=Li(b);return Mi(a,b)}
function Mi(a,b){var c=a.Tb,d=b.Tb,e=Ji(c,d);if(!e){var f=window.proj4;if("function"==typeof f){var h=f.defs(c),k=f.defs(d);void 0!==h&&void 0!==k&&(h===k?Ni([b,a]):(f=f(d,c),e=f.forward,f=f.inverse,b=Li(b),a=Li(a),Hi(b,a,Si(e)),Hi(a,b,Si(f))),e=Ji(c,d))}}e||(e=Yi);return e}function Yi(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}function Pi(a,b){if(void 0!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}else a=a.slice();return a}
function Ui(a,b,c){return Xi(b,c)(a,void 0,a.length)}function Zi(a,b,c){b=Xi(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,d);c=Math.max.apply(null,c);d=Math.max.apply(null,d);return Zh(a,b,c,d,void 0)}Ni(Bi);Ni(Ei);
Qi(Ei,Bi,function(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c){b[e]=Ai*a[e]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));f>Ai?f=Ai:f<-Ai&&(f=-Ai);b[e+1]=f}return b},function(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/Ai,b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b});var $i=Array(6);function aj(){return[1,0,0,1,0,0]}function bj(a){return cj(a,1,0,0,1,0,0)}function dj(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],k=a[5],l=b[0],m=b[1],n=b[2],p=b[3],r=b[4];b=b[5];a[0]=c*l+e*m;a[1]=d*l+f*m;a[2]=c*n+e*p;a[3]=d*n+f*p;a[4]=c*r+e*b+h;a[5]=d*r+f*b+k;return a}function cj(a,b,c,d,e,f,h){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=h;return a}function ej(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}
function fj(a,b){var c=b[0],d=b[1];b[0]=a[0]*c+a[2]*d+a[4];b[1]=a[1]*c+a[3]*d+a[5];return b}function gj(a,b){var c=Math.cos(b);b=Math.sin(b);dj(a,cj($i,c,b,-b,c,0,0))}function hj(a,b,c){return dj(a,cj($i,b,0,0,c,0,0))}function ij(a,b,c){dj(a,cj($i,1,0,0,1,b,c))}function jj(a,b,c,d,e,f,h,k){var l=Math.sin(f);f=Math.cos(f);a[0]=d*f;a[1]=e*l;a[2]=-d*l;a[3]=e*f;a[4]=h*d*f-k*d*l+b;a[5]=h*e*l+k*e*f+c;return a};function kj(){Fh.call(this);this.A=Th();this.I=-1;this.j={};this.s=this.l=0;this.U=aj()}G(kj,Fh);kj.prototype.aa=function(a){this.I!=this.Yb&&(this.A=this.rl(this.A),this.I=this.Yb);var b=this.A;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};kj.prototype.simplify=function(a){return this.Rl(a*a)};
kj.prototype.transform=function(a,b){var c=this.U;a=Li(a);var d="tile-pixels"==a.Rc()?function(d,f,h){var e=a.aa(),l=a.Sn;e=hi(l)/hi(e);jj(c,l[0],l[3],e,-e,0,0,0);pi(d,0,d.length,h,c,f);return Xi(a,b)(d,f,h)}:Xi(a,b);this.jl(d);return this};var Oba=/^#(?:[0-9a-f]{3,4}){1,2}$/i,Pba=/^([a-z]*)$/i;function lj(a){return Array.isArray(a)?a:Qba(a)}function mj(a){return"string"===typeof a?a:nj(a)}
var Qba=function(){var a={},b=0;return function(c){if(a.hasOwnProperty(c))var d=a[c];else{if(1024<=b){d=0;for(var e in a)0===(d++&3)&&(delete a[e],--b)}d=c;Pba.exec(d)&&(e=document.createElement("div"),e.style.color=d,document.body.appendChild(e),d=getComputedStyle(e).color,document.body.removeChild(e));if(Oba.exec(d)){e=d.length-1;var f=4>=e?1:2;var h=4===e||8===e;e=parseInt(d.substr(1+0*f,f),16);var k=parseInt(d.substr(1+1*f,f),16);var l=parseInt(d.substr(1+2*f,f),16);d=h?parseInt(d.substr(1+3*
f,f),16):255;1==f&&(e=(e<<4)+e,k=(k<<4)+k,l=(l<<4)+l,h&&(d=(d<<4)+d));f=[e,k,l,d/255]}else 0==d.indexOf("rgba(")?(d=d.slice(5,-1).split(",").map(Number),f=oj(d)):0==d.indexOf("rgb(")?(d=d.slice(4,-1).split(",").map(Number),d.push(1),f=oj(d)):Rh(!1,14);d=f;a[c]=d;++b}return d}}();function oj(a,b){b=b||[];b[0]=ri(a[0]+.5|0,0,255);b[1]=ri(a[1]+.5|0,0,255);b[2]=ri(a[2]+.5|0,0,255);b[3]=ri(a[3],0,1);return b}
function nj(a){var b=a[0];b!=(b|0)&&(b=b+.5|0);var c=a[1];c!=(c|0)&&(c=c+.5|0);var d=a[2];d!=(d|0)&&(d=d+.5|0);return"rgba("+b+","+c+","+d+","+(void 0===a[3]?1:a[3])+")"};function pj(a){return"string"===typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:mj(a)};function qj(a,b){var c=document.createElement("CANVAS");a&&(c.width=a);b&&(c.height=b);return c.getContext("2d")}function rj(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)}function sj(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function tj(a){for(;a.lastChild;)a.removeChild(a.lastChild)};var uj=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function vj(a,b){var c,d,e=uj.length;for(d=0;d<e;++d)try{if(c=a.getContext(uj[d],b))return c}catch(f){}return null};var wj,xj="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",Rba=-1!==xj.indexOf("firefox"),yj=-1!==xj.indexOf("safari")&&-1==xj.indexOf("chrom"),Sba=-1!==xj.indexOf("webkit")&&-1==xj.indexOf("edge"),zj=-1!==xj.indexOf("macintosh"),Aj=window.devicePixelRatio||1,Cj=!1;(function(){if(!("HTMLCanvasElement"in window))return!1;try{var a=document.createElement("CANVAS").getContext("2d");return a?(void 0!==a.setLineDash&&(Cj=!0),!0):!1}catch(b){return!1}})();
var Dj="ontouchstart"in window,Tba="PointerEvent"in window,Uba=!!navigator.msPointerEnabled,Ej=!1,Fj,Gj=[];if("WebGLRenderingContext"in window)try{var Hj=vj(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});Hj&&(Ej=!0,Fj=Hj.getParameter(Hj.MAX_TEXTURE_SIZE),Gj=Hj.getSupportedExtensions())}catch(a){}wj=Ej;Sg=Gj;Rg=Fj;var Vba=function(){var a,b={};return function(c){a||(a=document.createElement("div").style);if(!(c in b)){a.font=c;var d=a.fontFamily;a.font="";if(!d)return null;b[c]=d.split(/,\s?/)}return b[c]}}();function Ij(a){Bh.call(this);this.highWaterMark=void 0!==a?a:2048;this.l=0;this.o={};this.g=this.j=null}G(Ij,Bh);g=Ij.prototype;g.qg=function(){return this.l>this.highWaterMark};g.clear=function(){this.l=0;this.o={};this.g=this.j=null;this.dispatchEvent("clear")};function Jj(a,b){return a.o.hasOwnProperty(b)}g.forEach=function(a,b){for(var c=this.j;c;)a.call(b,c.value_,c.key_,this),c=c.newer};
g.get=function(a){a=this.o[a];Rh(void 0!==a,15);if(a===this.g)return a.value_;a===this.j?(this.j=this.j.newer,this.j.older=null):(a.newer.older=a.older,a.older.newer=a.newer);a.newer=null;a.older=this.g;this.g=this.g.newer=a;return a.value_};g.remove=function(a){var b=this.o[a];Rh(void 0!==b,15);if(b===this.g){if(this.g=b.older)this.g.newer=null}else if(b===this.j){if(this.j=b.newer)this.j.older=null}else b.newer.older=b.older,b.older.newer=b.newer;delete this.o[a];--this.l;return b.value_};
g.Ub=function(){var a=Array(this.l),b=0,c;for(c=this.g;c;c=c.older)a[b++]=c.key_;return a};g.Jc=function(){var a=Array(this.l),b=0,c;for(c=this.g;c;c=c.older)a[b++]=c.value_;return a};g.pop=function(){var a=this.j;delete this.o[a.key_];a.newer&&(a.newer.older=null);this.j=a.newer;this.j||(this.g=null);--this.l;return a.value_};g.replace=function(a,b){this.get(a);this.o[a].value_=b};
g.set=function(a,b){Rh(!(a in this.o),16);b={key_:a,newer:null,older:this.g,value_:b};this.g?this.g.newer=b:this.j=b;this.g=b;this.o[a]=b;++this.l};var Kj=[0,0,0,1],Lj=[],Mj=[0,0,0,1],Nj=[0,0,0,0],Oj=new Ij,Wba={},Pj=null,Qj={},Xba=function(){function a(a){var b=Rj();b.font="32px monospace";f=b.measureText("wmytzilWMYTZIL@#/&?$%10").width;var c=!0;"monospace"!=a&&(b.font="32px "+a+",monospace",c=b.measureText("wmytzilWMYTZIL@#/&?$%10").width!=f);return c}function b(){var b=!0,f;for(f in c)60>c[f]&&(a(f)?(c[f]=60,oh(Qj),Pj=null,d.clear()):(++c[f],b=!1));b&&(window.clearInterval(e),e=void 0)}var c=Wba,d=Oj,e,f;return function(d){if(d=Vba(d))for(var f=
0,h=d.length;f<h;++f){var m=d[f];m in c||(c[m]=60,a(m)||(c[m]=0,void 0===e&&(e=window.setInterval(b,32))))}}}();function Rj(){var a=Pj;a||(a=Pj=qj(1,1));return a}
var Yba=function(){var a;return function(b){var c=Qj[b];void 0==c&&(a||(a=document.createElement("span"),a.textContent="M",a.style.margin=a.style.padding="0 !important",a.style.position="absolute !important",a.style.left="-99999px !important"),a.style.font=b,document.body.appendChild(a),c=Qj[b]=a.offsetHeight,document.body.removeChild(a));return c}}();function Sj(a,b){var c=Rj();a!=c.font&&(c.font=a);return c.measureText(b).width}
function Tj(a,b,c,d){0!==b&&(a.translate(c,d),a.rotate(b),a.translate(-c,-d))}var Uj=aj();function Vj(a,b,c,d,e,f,h,k,l,m,n){if(1!=c){var p=a.globalAlpha;a.globalAlpha=p*c}b&&a.setTransform.apply(a,b);a.drawImage(d,e,f,h,k,l,m,h*n,k*n);p&&(a.globalAlpha=p);b&&a.setTransform.apply(a,Uj)};function Wj(a){this.ra=a.opacity;this.I=a.rotateWithView;this.o=a.rotation;this.L=a.scale;this.N=a.snapToPixel}Wj.prototype.Xb=function(){return this.ra};Wj.prototype.j=function(){return this.L};Wj.prototype.rd=function(a){this.ra=a};function Xj(a){this.P=this.G=this.l=null;this.tc=void 0!==a.fill?a.fill:null;this.Ea=[0,0];this.B=a.points;this.g=void 0!==a.radius?a.radius:a.radius1;this.s=a.radius2;this.A=void 0!==a.angle?a.angle:0;this.Dc=void 0!==a.stroke?a.stroke:null;this.Z=this.ka=this.pa=null;var b=this.U=a.atlasManager,c="",d="",e=0,f=null,h=0,k=0;if(this.Dc){var l=this.Dc.La();null===l&&(l=Mj);l=pj(l);k=this.Dc.g;void 0===k&&(k=1);f=this.Dc.j;h=this.Dc.o;Cj||(f=null,h=0);d=this.Dc.A;void 0===d&&(d="round");c=this.Dc.s;
void 0===c&&(c="round");e=this.Dc.B;void 0===e&&(e=10)}var m=2*(this.g+k)+1;c={strokeStyle:l,strokeWidth:k,size:m,lineCap:c,lineDash:f,lineDashOffset:h,lineJoin:d,miterLimit:e};if(void 0===b){var n=qj(m,m);this.G=n.canvas;b=m=this.G.width;this.Rt(c,n,0,0);this.tc?this.P=this.G:(n=qj(c.size,c.size),this.P=n.canvas,this.Qt(c,n,0,0))}else m=Math.round(m),(d=!this.tc)&&(n=this.Qt.bind(this,c)),this.Dc?(e=this.Dc,void 0===e.l&&(e.l="s",e.l=e.G?"string"===typeof e.G?e.l+e.G:e.l+H(e.G).toString():e.l+"-",
e.l+=","+(void 0!==e.s?e.s.toString():"-")+","+(e.j?e.j.toString():"-")+","+(void 0!==e.o?e.o:"-")+","+(void 0!==e.A?e.A:"-")+","+(void 0!==e.B?e.B.toString():"-")+","+(void 0!==e.g?e.g.toString():"-")),e=e.l):e="-",this.tc?(f=this.tc,void 0===f.j&&(f.j=f.g instanceof CanvasPattern||f.g instanceof CanvasGradient?H(f.g).toString():"f"+(f.g?mj(f.g):"-")),f=f.j):f="-",this.l&&e==this.l[1]&&f==this.l[2]&&this.g==this.l[3]&&this.s==this.l[4]&&this.A==this.l[5]&&this.B==this.l[6]||(this.l=["r"+e+f+(void 0!==
this.g?this.g.toString():"-")+(void 0!==this.s?this.s.toString():"-")+(void 0!==this.A?this.A.toString():"-")+(void 0!==this.B?this.B.toString():"-"),e,f,this.g,this.s,this.A,this.B]),n=b.add(this.l[0],m,m,this.Rt.bind(this,c),n),this.G=n.image,this.Ea=[n.offsetX,n.offsetY],b=n.image.width,this.P=d?n.hitImage:this.G;this.pa=[m/2,m/2];this.ka=[m,m];this.Z=[b,b];Wj.call(this,{opacity:1,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1,rotation:void 0!==a.rotation?a.rotation:0,scale:1,snapToPixel:void 0!==
a.snapToPixel?a.snapToPixel:!0})}G(Xj,Wj);g=Xj.prototype;g.clone=function(){var a=new Xj({fill:this.ob()?this.ob().clone():void 0,points:this.B,radius:this.g,radius2:this.s,angle:this.A,snapToPixel:this.N,stroke:this.kb()?this.kb().clone():void 0,rotation:this.o,rotateWithView:this.I,atlasManager:this.U});a.rd(this.Xb());var b=this.j();a.L=b;return a};g.ri=function(){return this.pa};g.ob=function(){return this.tc};g.Zp=function(){return this.P};g.Ua=function(){return this.G};g.Nl=function(){return this.Z};
g.sf=function(){return 2};g.hk=function(){return this.Ea};g.tf=function(){return this.ka};g.kb=function(){return this.Dc};g.Ji=function(){};g.load=function(){};g.Wk=function(){};
g.Rt=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();var e=this.B;if(Infinity===e)b.arc(a.size/2,a.size/2,this.g,0,2*Math.PI,!0);else{var f=void 0!==this.s?this.s:this.g;f!==this.g&&(e*=2);for(c=0;c<=e;c++){d=2*c*Math.PI/e-Math.PI/2+this.A;var h=0===c%2?this.g:f;b.lineTo(a.size/2+h*Math.cos(d),a.size/2+h*Math.sin(d))}}this.tc&&(c=this.tc.La(),null===c&&(c=Kj),b.fillStyle=pj(c),b.fill());this.Dc&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.lineDash&&(b.setLineDash(a.lineDash),
b.lineDashOffset=a.lineDashOffset),b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,b.stroke());b.closePath()};
g.Qt=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();c=this.B;if(Infinity===c)b.arc(a.size/2,a.size/2,this.g,0,2*Math.PI,!0);else{d=void 0!==this.s?this.s:this.g;d!==this.g&&(c*=2);var e;for(e=0;e<=c;e++){var f=2*e*Math.PI/c-Math.PI/2+this.A;var h=0===e%2?this.g:d;b.lineTo(a.size/2+h*Math.cos(f),a.size/2+h*Math.sin(f))}}b.fillStyle=Kj;b.fill();this.Dc&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.lineDash&&(b.setLineDash(a.lineDash),b.lineDashOffset=a.lineDashOffset),
b.stroke());b.closePath()};function Yj(a){a=a||{};Xj.call(this,{points:Infinity,fill:a.fill,radius:a.radius,snapToPixel:a.snapToPixel,stroke:a.stroke,atlasManager:a.atlasManager})}G(Yj,Xj);Yj.prototype.clone=function(){var a=new Yj({fill:this.ob()?this.ob().clone():void 0,stroke:this.kb()?this.kb().clone():void 0,radius:this.g,snapToPixel:this.N,atlasManager:this.U});a.rd(this.Xb());var b=this.j();a.L=b;return a};function Zj(a){a=a||{};this.g=void 0!==a.color?a.color:null;this.j=void 0}Zj.prototype.clone=function(){var a=this.La();return new Zj({color:a&&a.slice?a.slice():a||void 0})};Zj.prototype.La=function(){return this.g};function ak(a){a=a||{};this.G=void 0!==a.color?a.color:null;this.s=a.lineCap;this.j=void 0!==a.lineDash?a.lineDash:null;this.o=a.lineDashOffset;this.A=a.lineJoin;this.B=a.miterLimit;this.g=a.width;this.l=void 0}ak.prototype.clone=function(){var a=this.La();return new ak({color:a&&a.slice?a.slice():a||void 0,lineCap:this.s,lineDash:this.j?this.j.slice():void 0,lineDashOffset:this.o,lineJoin:this.A,miterLimit:this.B,width:this.g})};ak.prototype.La=function(){return this.G};
ak.prototype.setLineDash=function(a){this.j=a;this.l=void 0};function bk(a){a=a||{};this.Ed=null;this.ef=ck;void 0!==a.geometry&&this.sb(a.geometry);this.tc=void 0!==a.fill?a.fill:null;this.wa=void 0!==a.image?a.image:null;this.Yd=void 0!==a.renderer?a.renderer:null;this.Dc=void 0!==a.stroke?a.stroke:null;this.Mb=void 0!==a.text?a.text:null;this.Zh=a.zIndex}g=bk.prototype;
g.clone=function(){var a=this.X();a&&a.clone&&(a=a.clone());return new bk({geometry:a,fill:this.ob()?this.ob().clone():void 0,image:this.Ua()?this.Ua().clone():void 0,stroke:this.kb()?this.kb().clone():void 0,text:this.ub()?this.ub().clone():void 0,zIndex:this.xc()})};g.wi=function(){return this.Yd};g.X=function(){return this.Ed};g.ob=function(){return this.tc};g.Dz=function(a){this.tc=a};g.Ua=function(){return this.wa};g.setImage=function(a){this.wa=a};g.kb=function(){return this.Dc};
g.Iz=function(a){this.Dc=a};g.ub=function(){return this.Mb};g.ah=function(a){this.Mb=a};g.xc=function(){return this.Zh};g.sb=function(a){"function"===typeof a?this.ef=a:"string"===typeof a?this.ef=function(b){return b.get(a)}:a?void 0!==a&&(this.ef=function(){return a}):this.ef=ck;this.Ed=a};g.Cf=function(a){this.Zh=a};function Zba(a){if("function"!==typeof a){if(Array.isArray(a))var b=a;else Rh(a instanceof bk,41),b=[a];a=function(){return b}}return a}var dk=null;
function $ba(){if(!dk){var a=new Zj({color:"rgba(255,255,255,0.4)"}),b=new ak({color:"#3399CC",width:1.25});dk=[new bk({image:new Yj({fill:a,stroke:b,radius:5}),fill:a,stroke:b})]}return dk}function ck(a){return a.X()};function ek(a){Fh.call(this);this.ma=void 0;this.Ud="geometry";this.Mc=null;this.qj=void 0;this.j=null;I(this,Hh(this.Ud),this.Zl,this);void 0!==a&&(a instanceof kj||!a?this.sb(a):this.qc(a))}G(ek,Fh);g=ek.prototype;g.clone=function(){var a=new ek(this.Vb());fk(a,this.Ud);var b=this.X();b&&a.sb(b.clone());(b=this.Qb())&&a.yb(b);return a};g.X=function(){return this.get(this.Ud)};g.D=function(){return this.ma};g.Qb=function(){return this.Mc};g.ke=function(){return this.qj};g.aE=function(){this.ia()};
g.Zl=function(){this.j&&(rh(this.j),this.j=null);var a=this.X();a&&(this.j=I(a,"change",this.aE,this));this.ia()};g.sb=function(a){this.set(this.Ud,a)};g.yb=function(a){this.qj=(this.Mc=a)?aca(a):void 0;this.ia()};g.ga=function(a){this.ma=a;this.ia()};function fk(a,b){xh(a,Hh(a.Ud),a.Zl,a);a.Ud=b;I(a,Hh(a.Ud),a.Zl,a);a.Zl()}
function aca(a){var b;if("function"===typeof a)2==a.length?b=function(b){return a(this,b)}:b=a;else{if(Array.isArray(a))var c=a;else Rh(a instanceof bk,41),c=[a];b=function(){return c}}return b};function bca(a){return function(b){if(b)return[ri(b[0],a[0],a[2]),ri(b[1],a[1],a[3])]}}function cca(a){return a};function gk(a,b){return a>b?1:a<b?-1:0}function hk(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(0<c)for(c=1;c<d;++c){if(a[c]<b)return c-1}else if(0>c)for(c=1;c<d;++c){if(a[c]<=b)return c}else for(c=1;c<d;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function ik(a,b){var c=Array.isArray(b)?b:[b],d=c.length;for(b=0;b<d;b++)a[a.length]=c[b]}function dca(a,b){for(var c=a.length>>>0,d,e=0;e<c;e++)if(d=a[e],b(d,e,a))return d;return null}
function jk(a,b){var c=a.length;if(c!==b.length)return!1;for(var d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}function kk(a,b){var c=a.length,d=Array(a.length),e;for(e=0;e<c;e++)d[e]={index:e,value:a[e]};d.sort(function(a,c){return b(a.value,c.value)||a.index-c.index});for(e=0;e<a.length;e++)a[e]=d[e].value}function eca(a,b){var c=b||gk;return a.every(function(b,e){if(0===e)return!0;b=c(a[e-1],b);return!(0<b||0===b)})};function fca(a){return function(b,c,d){if(void 0!==b)return b=hk(a,b,d),b=ri(b+c,0,a.length-1),c=Math.floor(b),b!=c&&c<a.length-1?a[c]/Math.pow(a[c]/a[c+1],b-c):a[c]}}function lk(a,b,c){return function(d,e,f){if(void 0!==d)return d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(-f/2+.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};function mk(a){if(void 0!==a)return 0}function nk(a,b){if(void 0!==a)return a+b}function gca(a){var b=2*Math.PI/a;return function(a,d){if(void 0!==a)return a=Math.floor((a+d)/b+.5)*b}}function hca(){var a=si(5);return function(b,c){if(void 0!==b)return Math.abs(b+c)<=a?0:b+c}};function ok(a){a=""+a;var b=a.indexOf(".");b=-1===b?a.length:b;return 2<b?a:Array(3-b).join("0")+a};function pk(a,b){a[0]+=b[0];a[1]+=b[1]}function qk(a,b){var c=Math.cos(b);b=Math.sin(b);var d=a[1]*c+a[0]*b;a[0]=a[0]*c-a[1]*b;a[1]=d};function rk(a){return 1-Math.pow(1-a,3)}function ica(a){return 3*a*a-2*a*a*a}function sk(a){return a};function tk(){kj.call(this);this.layout="XY";this.stride=2;this.flatCoordinates=null}G(tk,kj);function uk(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}g=tk.prototype;g.rl=function(a){var b=this.flatCoordinates,c=this.flatCoordinates.length,d=this.stride;a=$h(a);return di(a,b,0,c,d)};function vk(a){return a.flatCoordinates.slice(0,a.stride)}
g.Rl=function(a){this.s!=this.Yb&&(oh(this.j),this.l=0,this.s=this.Yb);if(0>a||0!==this.l&&a<=this.l)return this;var b=a.toString();if(this.j.hasOwnProperty(b))return this.j[b];var c=this.yi(a);if(c.flatCoordinates.length<this.flatCoordinates.length)return this.j[b]=c;this.l=a;return this};g.yi=function(){return this};function wk(a,b,c){a.stride=uk(b);a.layout=b;a.flatCoordinates=c}
function xk(a,b,c,d){if(b)c=uk(b);else{for(b=0;b<d;++b){if(0===c.length){a.layout="XY";a.stride=2;return}c=c[0]}c=c.length;var e;2==c?e="XY":3==c?e="XYZ":4==c&&(e="XYZM");b=e}a.layout=b;a.stride=c}g.jl=function(a){this.flatCoordinates&&(a(this.flatCoordinates,this.flatCoordinates,this.stride),this.ia())};
g.rotate=function(a,b){var c=this.flatCoordinates;if(c){var d=c.length,e=this.stride,f=c?c:[],h=Math.cos(a);a=Math.sin(a);var k=b[0];b=b[1];for(var l=0,m=0;m<d;m+=e){var n=c[m]-k,p=c[m+1]-b;f[l++]=k+n*h-p*a;f[l++]=b+n*a+p*h;for(n=m+2;n<m+e;++n)f[l++]=c[n]}c&&f.length!=l&&(f.length=l);this.ia()}};
g.scale=function(a,b,c){var d=b;void 0===d&&(d=a);var e=c;e||(e=ii(this.aa()));if(c=this.flatCoordinates){b=c.length;var f=this.stride,h=c?c:[],k=e[0];e=e[1];for(var l=0,m=0;m<b;m+=f){var n=c[m]-k,p=c[m+1]-e;h[l++]=k+a*n;h[l++]=e+d*p;for(n=m+2;n<m+f;++n)h[l++]=c[n]}c&&h.length!=l&&(h.length=l);this.ia()}};g.translate=function(a,b){var c=this.flatCoordinates;c&&(qi(c,0,c.length,this.stride,a,b,c),this.ia())};function yk(a,b,c,d){for(var e=0,f=a[c-d],h=a[c-d+1];b<c;b+=d){var k=a[b],l=a[b+1];e+=h*k-f*l;f=k;h=l}return e/2}function zk(a,b,c,d){var e=0,f;var h=0;for(f=c.length;h<f;++h){var k=c[h];e+=yk(a,b,k,d);b=k}return e};function Ak(a,b){var c=0,d;var e=0;for(d=b.length;e<d;++e)a[c++]=b[e];return c}function Bk(a,b,c,d){var e;var f=0;for(e=c.length;f<e;++f){var h=c[f],k;for(k=0;k<d;++k)a[b++]=h[k]}return b}function Ck(a,b,c,d,e){e=e?e:[];var f=0,h;var k=0;for(h=c.length;k<h;++k)b=Bk(a,b,c[k],d),e[f++]=b;e.length=f;return e};function Dk(a,b,c,d,e){e=void 0!==e?e:[];for(var f=0;b<c;b+=d)e[f++]=a.slice(b,b+d);e.length=f;return e}function Ek(a,b,c,d,e){e=void 0!==e?e:[];var f=0,h;var k=0;for(h=c.length;k<h;++k){var l=c[k];e[f++]=Dk(a,b,l,d,e[f]);b=l}e.length=f;return e}function Fk(a,b,c,d,e){e=void 0!==e?e:[];var f=0,h;var k=0;for(h=c.length;k<h;++k){var l=c[k];e[f++]=Ek(a,b,l,d,e[f]);b=l[l.length-1]}e.length=f;return e};function Gk(a,b,c,d,e,f,h){var k=(c-b)/d;if(3>k){for(;b<c;b+=d)f[h++]=a[b],f[h++]=a[b+1];return h}var l=Array(k);l[0]=1;l[k-1]=1;c=[b,c-d];for(var m=0,n;0<c.length;){var p=c.pop(),r=c.pop(),u=0,v=a[r],x=a[r+1],B=a[p],F=a[p+1];for(n=r+d;n<p;n+=d){var D=a[n];var S=a[n+1];var ia=v,ea=x,ca=B-ia,Y=F-ea;if(0!==ca||0!==Y){var ja=((D-ia)*ca+(S-ea)*Y)/(ca*ca+Y*Y);1<ja?(ia=B,ea=F):0<ja&&(ia+=ca*ja,ea+=Y*ja)}D=ia-D;S=ea-S;S=D*D+S*S;S>u&&(m=n,u=S)}u>e&&(l[(m-b)/d]=1,r+d<m&&c.push(r,m),m+d<p&&c.push(m,p))}for(n=
0;n<k;++n)l[n]&&(f[h++]=a[b+n*d],f[h++]=a[b+n*d+1]);return h}
function Hk(a,b,c,d,e,f,h,k){var l;var m=0;for(l=c.length;m<l;++m){var n=c[m];a:{var p=a,r=n,u=d,v=e,x=f,B=h;if(b!=r){var F=v*Math.round(p[b]/v),D=v*Math.round(p[b+1]/v);b+=u;x[B++]=F;x[B++]=D;do{var S=v*Math.round(p[b]/v);h=v*Math.round(p[b+1]/v);b+=u;if(b==r){x[B++]=S;x[B++]=h;h=B;break a}}while(S==F&&h==D);for(;b<r;){var ia=v*Math.round(p[b]/v);var ea=v*Math.round(p[b+1]/v);b+=u;if(ia!=S||ea!=h){var ca=S-F,Y=h-D,ja=ia-F,Ga=ea-D;ca*Ga==Y*ja&&(0>ca&&ja<ca||ca==ja||0<ca&&ja>ca)&&(0>Y&&Ga<Y||Y==Ga||
0<Y&&Ga>Y)||(x[B++]=S,x[B++]=h,F=S,D=h);S=ia;h=ea}}x[B++]=S;x[B++]=h}h=B}k.push(h);b=n}return h};function Ik(a,b){tk.call(this);this.ic(a,b)}G(Ik,tk);g=Ik.prototype;g.clone=function(){var a=new Ik(null),b=this.flatCoordinates.slice();wk(a,this.layout,b);a.ia();return a};g.ee=function(){return yk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};g.getCoordinates=function(){return Dk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};
g.yi=function(a){var b=[];b.length=Gk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b,0);a=new Ik(null);wk(a,"XY",b);a.ia();return a};g.T=function(){return"LinearRing"};g.ic=function(a,b){a?(xk(this,b,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bk(this.flatCoordinates,0,a,this.stride)):wk(this,"XY",null);this.ia()};function Jk(a,b){tk.call(this);this.ic(a,b)}G(Jk,tk);g=Jk.prototype;g.clone=function(){var a=new Jk(null);Kk(a,this.layout,this.flatCoordinates.slice());return a};g.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]};g.rl=function(a){return ai(this.flatCoordinates,a)};g.T=function(){return"Point"};g.ic=function(a,b){a?(xk(this,b,a,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ak(this.flatCoordinates,a),this.ia()):Kk(this,"XY",null)};
function Kk(a,b,c){wk(a,b,c);a.ia()};function Lk(a,b,c,d,e,f){for(var h=0,k=a[c-d],l=a[c-d+1];b<c;b+=d){var m=a[b],n=a[b+1];l<=f?n>f&&0<(m-k)*(f-l)-(e-k)*(n-l)&&h++:n<=f&&0>(m-k)*(f-l)-(e-k)*(n-l)&&h--;k=m;l=n}return 0!==h};function Mk(a,b,c,d,e,f,h){for(var k,l,m,n,p,r=e[f+1],u=[],v=0,x=c.length;v<x;++v){var B=c[v];m=a[B-d];p=a[B-d+1];for(k=b;k<B;k+=d){n=a[k];l=a[k+1];if(r<=p&&l<=r||p<=r&&r<=l)m=(r-p)/(l-p)*(n-m)+m,u.push(m);m=n;p=l}}v=NaN;x=-Infinity;u.sort(gk);m=u[0];k=1;for(l=u.length;k<l;++k){n=u[k];B=Math.abs(n-m);if(B>x){m=(m+n)/2;a:if(0!==c.length&&Lk(a,b,c[0],d,m,r)){var F=1;for(p=c.length;F<p;++F)if(Lk(a,c[F-1],c[F],d,m,r)){p=!1;break a}p=!0}else p=!1;p&&(v=m,x=B)}m=n}isNaN(v)&&(v=e[f]);return h?(h.push(v,
r,x),h):[v,r,x]};function Nk(a,b,c,d){for(var e=0,f=a[c-d],h=a[c-d+1];b<c;b+=d){var k=a[b],l=a[b+1];e+=(k-f)*(l+h);f=k;h=l}return 0<e}function Ok(a,b,c,d){var e=0;d=void 0!==d?d:!1;var f;var h=0;for(f=b.length;h<f;++h){var k=b[h];e=Nk(a,e,k,c);if(0===h){if(d&&e||!d&&!e)return!1}else if(d&&!e||!d&&e)return!1;e=k}return!0}
function Pk(a,b,c,d,e){e=void 0!==e?e:!1;var f;var h=0;for(f=c.length;h<f;++h){var k=c[h],l=Nk(a,b,k,d);if(0===h?e&&l||!e&&!l:e&&!l||!e&&l){l=a;for(var m=k,n=d;b<m-n;){var p;for(p=0;p<n;++p){var r=l[b+p];l[b+p]=l[m-n+p];l[m-n+p]=r}b+=n;m-=n}}b=k}return b}function Qk(a,b,c,d){var e=0,f;var h=0;for(f=b.length;h<f;++h)e=Pk(a,e,b[h],c,d);return e};function Rk(a,b){tk.call(this);this.g=[];this.L=-1;this.N=null;this.P=-1;this.o=null;this.ic(a,b)}G(Rk,tk);g=Rk.prototype;g.clone=function(){var a=new Rk(null);Sk(a,this.layout,this.flatCoordinates.slice(),this.g.slice());return a};g.ee=function(){return zk(this.Gd(),0,this.g,this.stride)};g.getCoordinates=function(a){if(void 0!==a){var b=this.Gd().slice();Pk(b,0,this.g,this.stride,a)}else b=this.flatCoordinates;return Ek(b,0,this.g,this.stride)};g.Fd=function(){return this.g};
function Tk(a){if(a.L!=a.Yb){var b=ii(a.aa());a.N=Mk(a.Gd(),0,a.g,a.stride,b,0);a.L=a.Yb}return a.N}function Uk(a){var b=a.layout,c=a.flatCoordinates;a=a.g;var d=[],e=0,f;var h=0;for(f=a.length;h<f;++h){var k=a[h],l=new Ik(null),m=l;e=c.slice(e,k);wk(m,b,e);m.ia();d.push(l);e=k}return d}g.Gd=function(){if(this.P!=this.Yb){var a=this.flatCoordinates;Ok(a,this.g,this.stride)?this.o=a:(this.o=a.slice(),this.o.length=Pk(this.o,0,this.g,this.stride));this.P=this.Yb}return this.o};
g.yi=function(a){var b=[],c=[];b.length=Hk(this.flatCoordinates,0,this.g,this.stride,Math.sqrt(a),b,0,c);a=new Rk(null);Sk(a,"XY",b,c);return a};g.T=function(){return"Polygon"};g.ic=function(a,b){a?(xk(this,b,a,2),this.flatCoordinates||(this.flatCoordinates=[]),a=Ck(this.flatCoordinates,0,a,this.stride,this.g),this.flatCoordinates.length=0===a.length?0:a[a.length-1],this.ia()):Sk(this,"XY",null,this.g)};function Sk(a,b,c,d){wk(a,b,c);a.g=d;a.ia()}
function Vk(a){var b=a[0],c=a[1],d=a[2];a=a[3];b=[b,c,b,a,d,a,d,c,b,c];c=new Rk(null);Sk(c,"XY",b,[b.length]);return c}function jca(a){var b=a.stride,c=a.layout,d=new Rk(null,c);b*=65;for(var e=Array(b),f=0;f<b;f++)e[f]=0;Sk(d,c,e,[e.length]);c=Wk(a);a=Xk(a);b=d.flatCoordinates;e=d.layout;f=d.stride;for(var h=d.Fd(),k=b.length/f-1,l,m,n=0;n<=k;++n)m=n*f,l=0+2*ti(n,k)*Math.PI/k,b[m]=c[0]+a*Math.cos(l),b[m+1]=c[1]+a*Math.sin(l);Sk(d,e,b,h);return d};function Yk(a){Fh.call(this);a=nh({},a);this.g=[0,0];this.l=[];this.Ln=this.Ln.bind(this);this.qd=Ri(a.projection);var b={};b.center=void 0!==a.center?a.center:null;var c=void 0!==a.minZoom?a.minZoom:0;var d=void 0!==a.maxZoom?a.maxZoom:28;var e=void 0!==a.zoomFactor?a.zoomFactor:2;if(void 0!==a.resolutions){var f=a.resolutions;var h=f[c];var k=void 0!==f[d]?f[d]:f[f.length-1];d=fca(f)}else{k=Ri(a.projection);h=k.aa();f=(h?Math.max(gi(h),hi(h)):360*wi.degrees/yi(k))/256/Math.pow(2,0);var l=f/Math.pow(2,
28);h=a.maxResolution;void 0!==h?c=0:h=f/Math.pow(e,c);k=a.minResolution;void 0===k&&(k=void 0!==a.maxZoom?void 0!==a.maxResolution?h/Math.pow(e,d):f/Math.pow(e,d):l);d=c+Math.floor(Math.log(h/k)/Math.log(e));k=h/Math.pow(e,d-c);d=lk(e,h,d-c)}this.o=h;this.G=k;this.I=e;this.A=a.resolutions;this.s=c;(void 0!==a.enableRotation?a.enableRotation:1)?(e=a.constrainRotation,e=void 0===e||!0===e?hca():!1===e?nk:"number"===typeof e?gca(e):nk):e=mk;this.j={center:void 0!==a.extent?bca(a.extent):cca,resolution:d,
rotation:e};void 0!==a.resolution?b.resolution=a.resolution:void 0!==a.zoom&&(b.resolution=this.constrainResolution(this.o,a.zoom-this.s),this.A&&(b.resolution=ri(Number(this.ab()||b.resolution),this.G,this.o)));b.rotation=void 0!==a.rotation?a.rotation:0;this.qc(b)}G(Yk,Fh);g=Yk.prototype;
g.animate=function(a){var b=arguments.length;if(1<b&&"function"===typeof arguments[b-1]){var c=arguments[b-1];--b}if(Zk(this)){for(var d=Date.now(),e=$k(this).slice(),f=this.ab(),h=al(this),k=[],l=0;l<b;++l){var m=arguments[l],n={start:d,complete:!1,anchor:m.anchor,duration:void 0!==m.duration?m.duration:1E3,easing:m.easing||ica};m.center&&(n.sourceCenter=e,n.targetCenter=m.center,e=n.targetCenter);void 0!==m.zoom?(n.sourceResolution=f,n.targetResolution=this.constrainResolution(this.o,m.zoom-this.s,
0),f=n.targetResolution):m.resolution&&(n.sourceResolution=f,n.targetResolution=m.resolution,f=n.targetResolution);void 0!==m.rotation&&(n.sourceRotation=h,n.targetRotation=h+(ti(m.rotation-h+Math.PI,2*Math.PI)-Math.PI),h=n.targetRotation);n.callback=c;if(m=n.sourceCenter&&n.targetCenter){m=n.sourceCenter;for(var p=!0,r=m.length-1;0<=r;--r)if(m[r]!=n.targetCenter[r]){p=!1;break}m=!p}m||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation?d+=n.duration:n.complete=!0;k.push(n)}this.l.push(k);
bl(this,0,1);this.Ln()}else b=arguments[b-1],b.center&&cl(this,b.center),void 0!==b.zoom&&fl(this,this.constrainResolution(this.o,b.zoom-this.s,0)),void 0!==b.rotation&&gl(this,b.rotation),c&&c(!0)};function hl(a){bl(a,0,-a.g[0]);for(var b=0,c=a.l.length;b<c;++b){var d=a.l[b];d[0].callback&&d[0].callback(!1)}a.l.length=0}
g.Ln=function(){void 0!==this.B&&(cancelAnimationFrame(this.B),this.B=void 0);if(0<this.g[0]){for(var a=Date.now(),b=!1,c=this.l.length-1;0<=c;--c){for(var d=this.l[c],e=!0,f=0,h=d.length;f<h;++f){var k=d[f];if(!k.complete){b=a-k.start;b=0<k.duration?b/k.duration:1;1<=b?(k.complete=!0,b=1):e=!1;b=k.easing(b);if(k.sourceCenter){var l=k.sourceCenter[0],m=k.sourceCenter[1];this.set("center",[l+b*(k.targetCenter[0]-l),m+b*(k.targetCenter[1]-m)])}k.sourceResolution&&k.targetResolution&&(l=1===b?k.targetResolution:
k.sourceResolution+b*(k.targetResolution-k.sourceResolution),k.anchor&&this.set("center",il(this,l,k.anchor)),this.set("resolution",l));void 0!==k.sourceRotation&&void 0!==k.targetRotation&&(b=1===b?ti(k.targetRotation+Math.PI,2*Math.PI)-Math.PI:k.sourceRotation+b*(k.targetRotation-k.sourceRotation),k.anchor&&this.set("center",jl(this,b,k.anchor)),this.set("rotation",b));b=!0;if(!k.complete)break}}e&&(this.l[c]=null,bl(this,0,-1),(d=d[0].callback)&&d(!0))}this.l=this.l.filter(Boolean);b&&void 0===
this.B&&(this.B=requestAnimationFrame(this.Ln))}};function jl(a,b,c){var d=$k(a);if(void 0!==d){var e=[d[0]-c[0],d[1]-c[1]];qk(e,b-al(a));pk(e,c)}return e}function il(a,b,c){var d,e=$k(a);a=a.ab();void 0!==e&&void 0!==a&&(d=[c[0]-b*(c[0]-e[0])/a,c[1]-b*(c[1]-e[1])/a]);return d}function kl(a){var b=[100,100];a='.ol-viewport[data-view="'+H(a)+'"]';if(a=document.querySelector(a))a=getComputedStyle(a),b[0]=parseInt(a.width,10),b[1]=parseInt(a.height,10);return b}
g.constrainResolution=function(a,b,c){return this.j.resolution(a,b||0,c||0)};g.constrainRotation=function(a,b){return this.j.rotation(a,b||0)};function $k(a){return a.get("center")}function ll(a,b){return void 0!==b?(b[0]=a.g[0],b[1]=a.g[1],b):a.g.slice()}function ml(a,b){b=b||kl(a);var c=$k(a);Rh(c,1);var d=a.ab();Rh(void 0!==d,2);a=al(a);Rh(void 0!==a,3);return ji(c,d,a,b)}g.ge=function(){return this.o};g.he=function(){return this.G};g.Wa=function(){return this.qd};g.ab=function(){return this.get("resolution")};
g.Pf=function(){return this.A};function nl(a,b,c){a=c||kl(a);return Math.max(gi(b)/a[0],hi(b)/a[1])}function al(a){return a.get("rotation")}g.getState=function(){var a=$k(this),b=this.Wa(),c=this.ab(),d=al(this);return{center:a.slice(),projection:void 0!==b?b:null,resolution:c,rotation:d,zoom:this.Vl()}};g.Vl=function(){var a=this.ab();if(void 0!==a){var b=this.s||0;var c;if(this.A){b=c=hk(this.A,a,1);var d=this.A[c];c=c==this.A.length-1?2:d/this.A[c+1]}else d=this.o,c=this.I;b+=Math.log(d/a)/Math.log(c)}return b};
function pl(a,b,c){c=c||{};var d=c.size;d||(d=kl(a));if(b instanceof tk)if("Circle"===b.T()){b=b.aa();var e=Vk(b);e.rotate(al(a),ii(b))}else e=b;else Rh(Array.isArray(b),24),Rh(!fi(b),25),e=Vk(b);var f=void 0!==c.padding?c.padding:[0,0,0,0],h=void 0!==c.constrainResolution?c.constrainResolution:!0,k=void 0!==c.nearest?c.nearest:!1,l;void 0!==c.minResolution?l=c.minResolution:void 0!==c.maxZoom?l=a.constrainResolution(a.o,c.maxZoom-a.s,0):l=0;var m=e.flatCoordinates,n=al(a);b=Math.cos(-n);n=Math.sin(-n);
var p=Infinity,r=Infinity,u=-Infinity,v=-Infinity;e=e.stride;for(var x=0,B=m.length;x<B;x+=e){var F=m[x]*b-m[x+1]*n,D=m[x]*n+m[x+1]*b;p=Math.min(p,F);r=Math.min(r,D);u=Math.max(u,F);v=Math.max(v,D)}d=nl(a,[p,r,u,v],[d[0]-f[1]-f[3],d[1]-f[0]-f[2]]);d=isNaN(d)?l:Math.max(d,l);h&&(l=a.constrainResolution(d,0,0),!k&&l<d&&(l=a.constrainResolution(l,-1,0)),d=l);n=-n;l=(p+u)/2+(f[1]-f[3])/2*d;f=(r+v)/2+(f[0]-f[2])/2*d;b=[l*b-f*n,f*b+l*n];f=c.callback?c.callback:lh;void 0!==c.duration?a.animate({resolution:d,
center:b,duration:c.duration,easing:c.easing},f):(fl(a,d),cl(a,b),setTimeout(f.bind(void 0,!0),0))}function Zk(a){return!!$k(a)&&void 0!==a.ab()}g.rotate=function(a,b){void 0!==b&&(b=jl(this,a,b),cl(this,b));gl(this,a)};function cl(a,b){a.set("center",b);0<a.g[0]&&hl(a)}function bl(a,b,c){a.g[b]+=c;a.ia()}function fl(a,b){a.set("resolution",b);0<a.g[0]&&hl(a)}function gl(a,b){a.set("rotation",b);0<a.g[0]&&hl(a)};function ql(a){Fh.call(this);var b=nh({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;b.minResolution=void 0!==a.minResolution?a.minResolution:0;this.qc(b);this.va={layer:this,managed:!0}}G(ql,Fh);g=ql.prototype;g.T=function(){return this.type};
function rl(a){a.va.opacity=ri(a.Xb(),0,1);a.va.sourceState=a.Uo();a.va.visible=a.Hb();a.va.extent=a.aa();a.va.zIndex=a.xc();a.va.maxResolution=a.ge();a.va.minResolution=Math.max(a.he(),0);return a.va}g.aa=function(){return this.get("extent")};g.ge=function(){return this.get("maxResolution")};g.he=function(){return this.get("minResolution")};g.Xb=function(){return this.get("opacity")};g.Hb=function(){return this.get("visible")};g.xc=function(){return this.get("zIndex")};
g.Ac=function(a){this.set("extent",a)};g.kj=function(a){this.set("maxResolution",a)};g.lj=function(a){this.set("minResolution",a)};g.rd=function(a){this.set("opacity",a)};g.ec=function(a){this.set("visible",a)};g.Cf=function(a){this.set("zIndex",a)};function sl(a){var b=nh({},a);delete b.source;ql.call(this,b);this.Gn=this.Kg=this.Jg=null;a.map&&this.setMap(a.map);I(this,Hh("source"),this.vE,this);this.Bb(a.source?a.source:null)}G(sl,ql);function tl(a,b){return a.visible&&b>=a.minResolution&&b<a.maxResolution}g=sl.prototype;g.Ro=function(a){a=a?a:[];a.push(rl(this));return a};g.O=function(){return this.get("source")||null};g.Uo=function(){var a=this.O();return a?a.getState():"undefined"};g.uE=function(){this.ia()};
g.vE=function(){this.Gn&&(rh(this.Gn),this.Gn=null);var a=this.O();a&&(this.Gn=I(a,"change",this.uE,this));this.ia()};g.setMap=function(a){this.Jg&&(rh(this.Jg),this.Jg=null);a||this.ia();this.Kg&&(rh(this.Kg),this.Kg=null);a&&(this.Jg=I(a,"precompose",function(a){var b=rl(this);b.managed=!1;b.zIndex=Infinity;a.frameState.layerStatesArray.push(b);a.frameState.layerStates[H(this)]=b},this),this.Kg=I(this,"change",a.render,a),this.ia())};g.Bb=function(a){this.set("source",a)};function ul(a){a=a?a:{};var b=nh({},a);delete b.preload;delete b.useInterimTilesOnError;sl.call(this,b);this.set("preload",void 0!==a.preload?a.preload:0);this.set("useInterimTilesOnError",void 0!==a.useInterimTilesOnError?a.useInterimTilesOnError:!0);this.type="TILE"}G(ul,sl);function vl(a){return a.get("useInterimTilesOnError")};function wl(a){a=a?a:{};var b=nh({},a);delete b.style;delete b.renderBuffer;delete b.updateWhileAnimating;delete b.updateWhileInteracting;sl.call(this,b);this.vo=void 0!==a.declutter?a.declutter:!1;this.xe=void 0!==a.renderBuffer?a.renderBuffer:100;this.Mc=null;this.qj=void 0;this.yb(a.style);this.rA=void 0!==a.updateWhileAnimating?a.updateWhileAnimating:!1;this.sA=void 0!==a.updateWhileInteracting?a.updateWhileInteracting:!1;this.Hk=a.renderMode||"vector";this.type="VECTOR"}G(wl,sl);
wl.prototype.Qb=function(){return this.Mc};wl.prototype.ke=function(){return this.qj};wl.prototype.yb=function(a){this.Mc=void 0!==a?a:$ba;this.qj=null===a?void 0:Zba(this.Mc);this.ia()};var xl=document.implementation.createDocument("","",null);function yl(a,b){return xl.createElementNS(a,b)}function zl(a,b){return Al(a,b,[]).join("")}function Al(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)Al(a,b,c);return c}function Bl(a){return a instanceof Document}function Cl(a){return a instanceof Node}
function Dl(a){return(new DOMParser).parseFromString(a,"application/xml")}function El(a,b){return function(c,d){c=a.call(b,c,d);void 0!==c&&ik(d[d.length-1],c)}}function Fl(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&d[d.length-1].push(c)}}function Gl(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&(d[d.length-1]=c)}}
function Hl(a){return function(b,c){var d=a.call(this,b,c);if(void 0!==d){c=c[c.length-1];b=b.localName;var e;b in c?e=c[b]:e=c[b]=[];e.push(d)}}}function J(a,b){return function(c,d){var e=a.call(this,c,d);void 0!==e&&(d[d.length-1][void 0!==b?b:c.localName]=e)}}function K(a,b){return function(c,d,e){a.call(void 0!==b?b:this,c,d,e);e[e.length-1].node.appendChild(c)}}
function Il(a){var b,c;return function(d,e,f){if(void 0===b){b={};var h={};h[d.localName]=a;b[d.namespaceURI]=h;c=Jl(d.localName)}Kl(b,c,e,f)}}function Jl(a,b){return function(c,d,e){c=d[d.length-1].node;d=a;void 0===d&&(d=e);e=b;void 0===b&&(e=c.namespaceURI);return yl(e,d)}}var Ll=Jl();function Ml(a,b){for(var c=b.length,d=Array(c),e=0;e<c;++e)d[e]=a[b[e]];return d}function L(a,b,c){c=void 0!==c?c:{};var d;var e=0;for(d=a.length;e<d;++e)c[a[e]]=b;return c}
function Nl(a,b,c,d){for(b=b.firstElementChild;b;b=b.nextElementSibling){var e=a[b.namespaceURI];void 0!==e&&(e=e[b.localName],void 0!==e&&e.call(d,b,c))}}function Ol(a,b,c,d,e){d.push(a);Nl(b,c,d,e);return d.pop()}function Kl(a,b,c,d,e,f){for(var h=(void 0!==e?e:c).length,k,l,m=0;m<h;++m)k=c[m],void 0!==k&&(l=b.call(f,k,d,void 0!==e?e[m]:void 0),void 0!==l&&a[l.namespaceURI][l.localName].call(f,l,k,d))}function Pl(a,b,c,d,e,f,h){e.push(a);Kl(b,c,d,e,f,h);e.pop()};function kca(a,b,c){return function(d,e,f){var h=new XMLHttpRequest;h.open("GET","function"===typeof a?a(d,e,f):a,!0);"arraybuffer"==b.T()&&(h.responseType="arraybuffer");h.onload=function(){if(!h.status||200<=h.status&&300>h.status){var a=b.T();if("json"==a||"text"==a)var d=h.responseText;else"xml"==a?(d=h.responseXML)||(d=Dl(h.responseText)):"arraybuffer"==a&&(d=h.response);d&&c.call(this,b.cg(d,{featureProjection:f}),b.jn(d),null)}}.bind(this);h.onerror=function(){}.bind(this);h.send()}}
function lca(a,b){return kca(a,b,function(a){this.Nc(a)})};function mca(){return[[-Infinity,-Infinity,Infinity,Infinity]]};function Ql(a,b,c,d){this.minX=a;this.maxX=b;this.minY=c;this.maxY=d}function Rl(a,b,c,d,e){return void 0!==e?(e.minX=a,e.maxX=b,e.minY=c,e.maxY=d,e):new Ql(a,b,c,d)}Ql.prototype.contains=function(a){return Sl(this,a[1],a[2])};function Sl(a,b,c){return a.minX<=b&&b<=a.maxX&&a.minY<=c&&c<=a.maxY}Ql.prototype.equals=function(a){return this.minX==a.minX&&this.minY==a.minY&&this.maxX==a.maxX&&this.maxY==a.maxY};
Ql.prototype.extend=function(a){a.minX<this.minX&&(this.minX=a.minX);a.maxX>this.maxX&&(this.maxX=a.maxX);a.minY<this.minY&&(this.minY=a.minY);a.maxY>this.maxY&&(this.maxY=a.maxY)};function Tl(a,b,c){void 0===c&&(c=[0,0]);c[0]=a[0]*b+.5|0;c[1]=a[1]*b+.5|0;return c}function Ul(a,b){if(Array.isArray(a))return a;void 0===b?b=[a,a]:b[0]=b[1]=a;return b};function Vl(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.g=a.resolutions;Rh(eca(this.g,function(a,b){return b-a}),17);if(!a.origins)for(var b=0,c=this.g.length-1;b<c;++b)if(!d)var d=this.g[b]/this.g[b+1];else if(this.g[b]/this.g[b+1]!==d){d=void 0;break}this.A=d;this.maxZoom=this.g.length-1;this.j=void 0!==a.origin?a.origin:null;this.l=null;void 0!==a.origins&&(this.l=a.origins,Rh(this.l.length==this.g.length,20));d=a.extent;void 0===d||this.j||this.l||(this.j=[d[0],d[3]]);Rh(!this.j&&this.l||
this.j&&!this.l,18);this.o=null;void 0!==a.tileSizes&&(this.o=a.tileSizes,Rh(this.o.length==this.g.length,19));this.G=void 0!==a.tileSize?a.tileSize:this.o?null:256;Rh(!this.G&&this.o||this.G&&!this.o,22);this.I=void 0!==d?d:null;this.B=null;this.s=[0,0];void 0!==a.sizes?this.B=a.sizes.map(function(a){return new Ql(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):d&&nca(this,d)}var Wl=[0,0,0];
function Xl(a,b,c,d,e){var f=null,h=b[0]-1;if(2===a.A){var k=b[1];var l=b[2]}else f=Yl(a,b,e);for(;h>=a.minZoom;){2===a.A?(k=Math.floor(k/2),l=Math.floor(l/2),b=Rl(k,k,l,l,d)):b=Zl(a,f,h,d);if(c.call(null,h,b))return!0;--h}return!1}Vl.prototype.aa=function(){return this.I};function $l(a,b){return a.j?a.j:a.l[b]}Vl.prototype.ab=function(a){return this.g[a]};Vl.prototype.Pf=function(){return this.g};
function am(a,b,c,d){if(b[0]<a.maxZoom){if(2===a.A)return a=2*b[1],b=2*b[2],Rl(a,a+1,b,b+1,c);d=Yl(a,b,d);return Zl(a,d,b[0]+1,c)}return null}function oca(a,b,c){var d=$l(a,b),e=a.ab(b);a=Ul(bm(a,b),a.s);return Zh(d[0]+c.minX*a[0]*e,d[1]+c.minY*a[1]*e,d[0]+(c.maxX+1)*a[0]*e,d[1]+(c.maxY+1)*a[1]*e,void 0)}function Zl(a,b,c,d){cm(a,b[0],b[1],c,!1,Wl);var e=Wl[1],f=Wl[2];cm(a,b[2],b[3],c,!0,Wl);return Rl(e,Wl[1],f,Wl[2],d)}
function dm(a,b){var c=$l(a,b[0]),d=a.ab(b[0]);a=Ul(bm(a,b[0]),a.s);return[c[0]+(b[1]+.5)*a[0]*d,c[1]+(b[2]+.5)*a[1]*d]}function Yl(a,b,c){var d=$l(a,b[0]),e=a.ab(b[0]);a=Ul(bm(a,b[0]),a.s);var f=d[0]+b[1]*a[0]*e;b=d[1]+b[2]*a[1]*e;return Zh(f,b,f+a[0]*e,b+a[1]*e,c)}
function cm(a,b,c,d,e,f){var h=$l(a,d),k=a.ab(d);a=Ul(bm(a,d),a.s);b=Math.floor((b-h[0])/k+(e?.5:0))/a[0];c=Math.floor((c-h[1])/k+(e?0:.5))/a[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));e=b;void 0!==f?(f[0]=d,f[1]=e,f[2]=c,d=f):d=[d,e,c];return d}function bm(a,b){return a.G?a.G:a.o[b]}function em(a,b){return a.B?a.B[b]:null}function fm(a,b,c){return ri(hk(a.g,b,c||0),a.minZoom,a.maxZoom)}
function nca(a,b){for(var c=a.g.length,d=Array(c),e=a.minZoom;e<c;++e)d[e]=Zl(a,b,e);a.B=d};function gm(a){var b=a.s;b||(b=hm(a),a.s=b);return b}function im(a,b,c){b=void 0!==b?b:42;var d=hi(a);a=gi(a);c=Ul(void 0!==c?c:256);c=Math.max(a/c[0],d/c[1]);b+=1;d=Array(b);for(a=0;a<b;++a)d[a]=c/Math.pow(2,a);return d}function hm(a,b,c){a=jm(a);b=im(a,b,c);return new Vl({extent:a,origin:[a[0],a[3]],resolutions:b,tileSize:c})}function jm(a){a=Li(a);var b=a.aa();b||(a=180*wi.degrees/yi(a),b=Zh(-a,-a,a,a));return b};function km(a){this.qp=a.html};function lm(a){Fh.call(this);this.qd=Li(a.projection);this.vj=null;this.kl=mm(this,a.attributions);this.qF=a.logo;this.va=void 0!==a.state?a.state:"ready";this.Tn=void 0!==a.wrapX?a.wrapX:!1}G(lm,Fh);
function mm(a,b){if(!b)return null;if(b instanceof km)return a.vj=[b],function(){return[b.qp]};if(Array.isArray(b)){if(b[0]instanceof km){a.vj=b;var c=b.map(function(a){return a.qp});return function(){return c}}a.vj=b.map(function(a){return new km({html:a})});return function(){return b}}if("function"===typeof b)return b;a.vj=[new km({html:b})];return function(){return[b]}}g=lm.prototype;g.sc=lh;g.Wa=function(){return this.qd};g.getState=function(){return this.va};g.refresh=function(){this.ia()};
g.Ga=function(a){this.va=a;this.ia()};var nm={Kh:function(){}};
(function(a){function b(a,c){if(!(this instanceof b))return new b(a,c);this.Xn=Math.max(4,a||9);this.Zs=Math.max(2,Math.ceil(.4*this.Xn));c&&this.zB(c);this.clear()}function c(a,b){d(a,0,a.children.length,b,a)}function d(a,b,c,d,f){f||(f=p(null));f.minX=Infinity;f.minY=Infinity;f.maxX=-Infinity;f.maxY=-Infinity;for(var h;b<c;b++)h=a.children[b],e(f,a.nd?d(h):h);return f}function e(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,
b.maxY);return a}function f(a,b){return a.minX-b.minX}function h(a,b){return a.minY-b.minY}function k(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function l(a){return a.maxX-a.minX+(a.maxY-a.minY)}function m(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function n(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function p(a){return{children:a,height:1,nd:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function r(a,b,c,d,e){for(var f=
[b,c],h;f.length;)c=f.pop(),b=f.pop(),c-b<=d||(h=b+Math.ceil((c-b)/d/2)*d,v(a,h,b,c,e),f.push(b,h,h,c))}var u="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},v=function(a,b){return b={Ao:{}},a(b,b.Ao),b.Ao}(function(a){(function(b,c){a.Ao=c()})(u,function(){function a(c,d,e,f,h){for(;f>e;){if(600<f-e){var k=f-e+1,l=d-e+1,m=Math.log(k),n=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*n*(k-n)/k)*(0>l-k/2?-1:1);a(c,d,Math.max(e,Math.floor(d-l*n/k+m)),Math.min(f,
Math.floor(d+(k-l)*n/k+m)),h)}k=c[d];l=e;n=f;b(c,e,d);for(0<h(c[f],k)&&b(c,e,f);l<n;){b(c,l,n);l++;for(n--;0>h(c[l],k);)l++;for(;0<h(c[n],k);)n--}0===h(c[e],k)?b(c,e,n):(n++,b(c,n,f));n<=d&&(e=n+1);d<=n&&(f=n-1)}}function b(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function c(a,b){return a<b?-1:a>b?1:0}return function(b,d,e,f,h){a(b,d,e||0,f||b.length-1,h||c)}})});b.prototype={all:function(){return this.Vs(this.data,[])},search:function(a){var b=this.data,c=[],d=this.ce;if(!n(a,b))return c;for(var e=[],
f,h,k,l;b;){f=0;for(h=b.children.length;f<h;f++)k=b.children[f],l=b.nd?d(k):k,n(a,l)&&(b.nd?c.push(k):m(a,l)?this.Vs(k,c):e.push(k));b=e.pop()}return c},kC:function(a){var b=this.data,c=this.ce;if(!n(a,b))return!1;for(var d=[],e,f,h,k;b;){e=0;for(f=b.children.length;e<f;e++)if(h=b.children[e],k=b.nd?c(h):h,n(a,k)){if(b.nd||m(a,k))return!0;d.push(h)}b=d.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this.Zs){for(var b=0,c=a.length;b<c;b++)this.pf(a[b]);return this}a=this.Xs(a.slice(),
0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.bt(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.Ys(a,this.data.height-a.height-1,!0)):this.data=a;return this},pf:function(a){a&&this.Ys(a,this.data.height-1);return this},clear:function(){this.data=p([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,d=this.ce(a),e=[],f=[],h,k,l,n;c||e.length;){c||(c=e.pop(),k=e[e.length-1],h=f.pop(),n=!0);if(c.nd){a:{l=a;var p=c.children,
r=b;if(r){for(var u=0;u<p.length;u++)if(r(l,p[u])){l=u;break a}l=-1}else l=p.indexOf(l)}if(-1!==l){c.children.splice(l,1);e.push(c);this.yB(e);break}}n||c.nd||!m(c,d)?k?(h++,c=k.children[h],n=!1):c=null:(e.push(c),f.push(h),h=0,k=c,c=c.children[0])}return this},ce:function(a){return a},no:f,oo:h,toJSON:function(){return this.data},Vs:function(a,b){for(var c=[];a;)a.nd?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},Xs:function(a,b,d,e){var f=d-b+1,h=this.Xn;if(f<=h){var k=
p(a.slice(b,d+1));c(k,this.ce);return k}e||(e=Math.ceil(Math.log(f)/Math.log(h)),h=Math.ceil(f/Math.pow(h,e-1)));k=p([]);k.nd=!1;k.height=e;f=Math.ceil(f/h);h=f*Math.ceil(Math.sqrt(h));var l;for(r(a,b,d,h,this.no);b<=d;b+=h){var m=Math.min(b+h-1,d);r(a,b,m,f,this.oo);for(l=b;l<=m;l+=f){var n=Math.min(l+f-1,m);k.children.push(this.Xs(a,l,n,e-1))}}c(k,this.ce);return k},xB:function(a,b,c,d){for(var e,f,h,l,m,n,p,r;;){d.push(b);if(b.nd||d.length-1===c)break;p=r=Infinity;e=0;for(f=b.children.length;e<
f;e++)h=b.children[e],m=k(h),n=(Math.max(h.maxX,a.maxX)-Math.min(h.minX,a.minX))*(Math.max(h.maxY,a.maxY)-Math.min(h.minY,a.minY))-m,n<r?(r=n,p=m<p?m:p,l=h):n===r&&m<p&&(p=m,l=h);b=l||b.children[0]}return b},Ys:function(a,b,c){var d=this.ce;c=c?a:d(a);d=[];var f=this.xB(c,this.data,b,d);f.children.push(a);for(e(f,c);0<=b;)if(d[b].children.length>this.Xn)this.AB(d,b),b--;else break;this.uB(c,d,b)},AB:function(a,b){var d=a[b],e=d.children.length,f=this.Zs;this.vB(d,f,e);e=this.wB(d,f,e);e=p(d.children.splice(e,
d.children.length-e));e.height=d.height;e.nd=d.nd;c(d,this.ce);c(e,this.ce);b?a[b-1].children.push(e):this.bt(d,e)},bt:function(a,b){this.data=p([a,b]);this.data.height=a.height+1;this.data.nd=!1;c(this.data,this.ce)},wB:function(a,b,c){var e,f;var h=f=Infinity;for(e=b;e<=c-b;e++){var l=d(a,0,e,this.ce);var m=d(a,e,c,this.ce);var n=Math.max(0,Math.min(l.maxX,m.maxX)-Math.max(l.minX,m.minX))*Math.max(0,Math.min(l.maxY,m.maxY)-Math.max(l.minY,m.minY));l=k(l)+k(m);if(n<h){h=n;var p=e;f=l<f?l:f}else n===
h&&l<f&&(f=l,p=e)}return p},vB:function(a,b,c){var d=a.nd?this.no:f,e=a.nd?this.oo:h,k=this.Ws(a,b,c,d);b=this.Ws(a,b,c,e);k<b&&a.children.sort(d)},Ws:function(a,b,c,f){a.children.sort(f);f=this.ce;var h=d(a,0,b,f),k=d(a,c-b,c,f),m=l(h)+l(k),n;for(n=b;n<c-b;n++){var p=a.children[n];e(h,a.nd?f(p):p);m+=l(h)}for(n=c-b-1;n>=b;n--)p=a.children[n],e(k,a.nd?f(p):p),m+=l(k);return m},uB:function(a,b,c){for(;0<=c;c--)e(b[c],a)},yB:function(a){for(var b=a.length-1,d;0<=b;b--)0===a[b].children.length?0<b?(d=
a[b-1].children,d.splice(d.indexOf(a[b]),1)):this.clear():c(a[b],this.ce)},zB:function(a){var b=["return a"," - b",";"];this.no=new Function("a","b",b.join(a[0]));this.oo=new Function("a","b",b.join(a[1]));this.ce=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};a["default"]=b})(nm.Kh=nm.Kh||{});nm.Kh=nm.Kh.default;function om(){this.j=nm.Kh(void 0);this.g={}}g=om.prototype;g.pf=function(a,b){a={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:b};this.j.pf(a);this.g[H(b)]=a};g.load=function(a,b){for(var c=Array(b.length),d=0,e=b.length;d<e;d++){var f=a[d],h=b[d];f={minX:f[0],minY:f[1],maxX:f[2],maxY:f[3],value:h};c[d]=f;this.g[H(h)]=f}this.j.load(c)};g.remove=function(a){a=H(a);var b=this.g[a];delete this.g[a];return null!==this.j.remove(b)};
g.update=function(a,b){var c=this.g[H(b)];bi([c.minX,c.minY,c.maxX,c.maxY],a)||(this.remove(b),this.pf(a,b))};function pm(a){return a.j.all().map(function(a){return a.value})}function qm(a,b){return a.j.search({minX:b[0],minY:b[1],maxX:b[2],maxY:b[3]}).map(function(a){return a.value})}g.forEach=function(a,b){return rm(pm(this),a,b)};function sm(a,b,c,d){return rm(qm(a,b),c,d)}function rm(a,b,c){for(var d,e=0,f=a.length;e<f&&!(d=b.call(c,a[e]));e++);return d}g.isEmpty=function(){return qh(this.g)};
g.clear=function(){this.j.clear();this.g={}};g.aa=function(a){var b=this.j.data;return Zh(b.minX,b.minY,b.maxX,b.maxY,a)};g.concat=function(a){this.j.load(a.j.all());for(var b in a.g)this.g[b|0]=a.g[b|0]};function tm(a){a=a||{};lm.call(this,{attributions:a.attributions,logo:a.logo,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0});this.Jb=lh;this.Ic=a.format;this.Xm=void 0==a.overlaps?!0:a.overlaps;this.Za=a.url;void 0!==a.loader?this.Jb=a.loader:void 0!==this.Za&&(Rh(this.Ic,7),this.Jb=lca(this.Za,this.Ic));this.eN=void 0!==a.strategy?a.strategy:mca;var b=void 0!==a.useSpatialIndex?a.useSpatialIndex:!0;this.Ab=b?new om:null;this.Kp=new om;this.Uc={};this.Sc={};this.Te={};this.Kf=
{};this.de=null;if(a.features instanceof Kh){var c=a.features;var d=c.g}else Array.isArray(a.features)&&(d=a.features);b||void 0!==c||(c=new Kh(d));void 0!==d&&um(this,d);void 0!==c&&pca(this,c)}G(tm,lm);g=tm.prototype;g.ac=function(a){var b=H(a).toString();if(vm(this,b,a)){this.qs(b,a);var c=a.X();c?(b=c.aa(),this.Ab&&this.Ab.pf(b,a)):this.Uc[b]=a;this.dispatchEvent(new wm("addfeature",a))}this.ia()};g.qs=function(a,b){this.Kf[a]=[I(b,"change",this.ip,this),I(b,"propertychange",this.ip,this)]};
function vm(a,b,c){var d=!0,e=c.D();void 0!==e?e.toString()in a.Sc?d=!1:a.Sc[e.toString()]=c:(Rh(!(b in a.Te),30),a.Te[b]=c);return d}g.Nc=function(a){um(this,a);this.ia()};
function um(a,b){var c,d=[],e=[],f=[];var h=0;for(c=b.length;h<c;h++){var k=b[h];var l=H(k).toString();vm(a,l,k)&&e.push(k)}h=0;for(c=e.length;h<c;h++)k=e[h],l=H(k).toString(),a.qs(l,k),(b=k.X())?(l=b.aa(),d.push(l),f.push(k)):a.Uc[l]=k;a.Ab&&a.Ab.load(d,f);h=0;for(c=e.length;h<c;h++)a.dispatchEvent(new wm("addfeature",e[h]))}
function pca(a,b){var c=!1;I(a,"addfeature",function(a){c||(c=!0,b.push(a.feature),c=!1)});I(a,"removefeature",function(a){c||(c=!0,b.remove(a.feature),c=!1)});I(b,"add",function(a){c||(c=!0,this.ac(a.element),c=!1)},a);I(b,"remove",function(a){c||(c=!0,this.Fb(a.element),c=!1)},a);a.de=b}
g.clear=function(a){if(a){for(var b in this.Kf)this.Kf[b].forEach(rh);this.de||(this.Kf={},this.Sc={},this.Te={})}else if(this.Ab){this.Ab.forEach(this.Mh,this);for(var c in this.Uc)this.Mh(this.Uc[c])}this.de&&this.de.clear();this.Ab&&this.Ab.clear();this.Kp.clear();this.Uc={};this.dispatchEvent(new wm("clear"));this.ia()};g.Yt=function(a){this.Ab?this.Ab.forEach(a,void 0):this.de&&this.de.forEach(a,void 0)};function xm(a,b,c,d){a.Ab?sm(a.Ab,b,c,d):a.de&&a.de.forEach(c,d)}
g.Oa=function(){if(this.de)var a=this.de.g;else this.Ab&&(a=pm(this.Ab),qh(this.Uc)||ik(a,ph(this.Uc)));return a};g.Il=function(a){return qm(this.Ab,a)};g.aa=function(a){return this.Ab.aa(a)};function ym(a,b){a=a.Sc[b.toString()];return void 0!==a?a:null}g.Kj=function(){return this.Ic};g.Pf=function(){};g.Ka=function(){return this.Za};
g.ip=function(a){a=a.target;var b=H(a).toString(),c=a.X();c?(c=c.aa(),b in this.Uc?(delete this.Uc[b],this.Ab&&this.Ab.pf(c,a)):this.Ab&&this.Ab.update(c,a)):b in this.Uc||(this.Ab&&this.Ab.remove(a),this.Uc[b]=a);c=a.D();void 0!==c?(c=c.toString(),b in this.Te?(delete this.Te[b],this.Sc[c]=a):this.Sc[c]!==a&&(zm(this,a),this.Sc[c]=a)):b in this.Te||(zm(this,a),this.Te[b]=a);this.ia();this.dispatchEvent(new wm("changefeature",a))};g.isEmpty=function(){return this.Ab.isEmpty()&&qh(this.Uc)};
function Am(a,b,c,d){var e=a.Kp;b=a.eN(b,c);var f;var h=0;for(f=b.length;h<f;++h){var k=b[h];sm(e,k,function(a){return Yh(a.extent,k)})||(a.Jb.call(a,k,c,d),e.pf(k,{extent:k.slice()}))}}g.Fb=function(a){var b=H(a).toString();b in this.Uc?delete this.Uc[b]:this.Ab&&this.Ab.remove(a);this.Mh(a);this.ia()};g.Mh=function(a){var b=H(a).toString();this.Kf[b].forEach(rh);delete this.Kf[b];var c=a.D();void 0!==c?delete this.Sc[c.toString()]:delete this.Te[b];this.dispatchEvent(new wm("removefeature",a))};
function zm(a,b){for(var c in a.Sc)if(a.Sc[c]===b){delete a.Sc[c];break}}function wm(a,b){Ah.call(this,a);this.feature=b}G(wm,Ah);function Bm(a,b,c){Ah.call(this,a);this.map=b;this.frameState=void 0!==c?c:null}G(Bm,Ah);function Cm(a,b,c,d,e){Bm.call(this,a,b,e);this.originalEvent=c;this.pixel=Dm(b,c);this.coordinate=b.cd(this.pixel);this.dragging=void 0!==d?d:!1}G(Cm,Bm);Cm.prototype.preventDefault=function(){Bm.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};Cm.prototype.stopPropagation=function(){Bm.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};var Em={WQ:"singleclick",jO:"click",tO:"dblclick",bQ:"pointerdrag",eQ:"pointermove",aQ:"pointerdown",hQ:"pointerup",gQ:"pointerover",fQ:"pointerout",cQ:"pointerenter",dQ:"pointerleave",ZP:"pointercancel"};function Fm(a,b,c,d,e){Cm.call(this,a,b,c.originalEvent,d,e);this.g=c}G(Fm,Cm);function Gm(a,b){this.g=a;this.s=b};function Hm(a){Gm.call(this,a,{mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout});this.j=a.j;this.l=[]}G(Hm,Gm);function Im(a,b){a=a.l;var c=b.clientX;b=b.clientY;for(var d=0,e=a.length,f;d<e&&(f=a[d]);d++){var h=Math.abs(b-f[1]);if(25>=Math.abs(c-f[0])&&25>=h)return!0}return!1}
function Jm(a){var b=Km(a,a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}g=Hm.prototype;g.mousedown=function(a){if(!Im(this,a)){(1).toString()in this.j&&this.cancel(a);var b=Jm(a);this.j[(1).toString()]=a;this.g.fireEvent("pointerdown",b,a)}};g.mousemove=function(a){if(!Im(this,a)){var b=Jm(a);this.g.fireEvent("pointermove",b,a)}};
g.mouseup=function(a){if(!Im(this,a)){var b=this.j[(1).toString()];b&&b.button===a.button&&(b=Jm(a),this.g.fireEvent("pointerup",b,a),delete this.j[(1).toString()])}};g.mouseover=function(a){if(!Im(this,a)){var b=Jm(a);Lm(this.g,b,a)}};g.mouseout=function(a){if(!Im(this,a)){var b=Jm(a);Mm(this.g,b,a)}};g.cancel=function(a){var b=Jm(a);this.g.cancel(b,a);delete this.j[(1).toString()]};function Nm(a){Gm.call(this,a,{MSPointerDown:this.AF,MSPointerMove:this.BF,MSPointerUp:this.EF,MSPointerOut:this.CF,MSPointerOver:this.DF,MSPointerCancel:this.zF,MSGotPointerCapture:this.xF,MSLostPointerCapture:this.yF});this.j=a.j;this.l=["","unavailable","touch","pen","mouse"]}G(Nm,Gm);function Om(a,b){var c=b;"number"===typeof b.pointerType&&(c=Km(b,b),c.pointerType=a.l[b.pointerType]);return c}g=Nm.prototype;
g.AF=function(a){this.j[a.pointerId.toString()]=a;var b=Om(this,a);this.g.fireEvent("pointerdown",b,a)};g.BF=function(a){var b=Om(this,a);this.g.fireEvent("pointermove",b,a)};g.EF=function(a){var b=Om(this,a);this.g.fireEvent("pointerup",b,a);delete this.j[a.pointerId.toString()]};g.CF=function(a){var b=Om(this,a);Mm(this.g,b,a)};g.DF=function(a){var b=Om(this,a);Lm(this.g,b,a)};g.zF=function(a){var b=Om(this,a);this.g.cancel(b,a);delete this.j[a.pointerId.toString()]};
g.yF=function(a){this.g.dispatchEvent(new Pm("lostpointercapture",a,a))};g.xF=function(a){this.g.dispatchEvent(new Pm("gotpointercapture",a,a))};function Rm(a){Gm.call(this,a,{pointerdown:this.PL,pointermove:this.QL,pointerup:this.TL,pointerout:this.RL,pointerover:this.SL,pointercancel:this.OL,gotpointercapture:this.QD,lostpointercapture:this.rF})}G(Rm,Gm);g=Rm.prototype;g.PL=function(a){Tm(this.g,a)};g.QL=function(a){Tm(this.g,a)};g.TL=function(a){Tm(this.g,a)};g.RL=function(a){Tm(this.g,a)};g.SL=function(a){Tm(this.g,a)};g.OL=function(a){Tm(this.g,a)};g.rF=function(a){Tm(this.g,a)};g.QD=function(a){Tm(this.g,a)};function Pm(a,b,c){Ah.call(this,a);this.originalEvent=b;a=c?c:{};this.buttons=qca(a);this.pressure=rca(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.ctrlKey="ctrlKey"in a?a.ctrlKey:!1;this.altKey="altKey"in a?
a.altKey:!1;this.shiftKey="shiftKey"in a?a.shiftKey:!1;this.metaKey="metaKey"in a?a.metaKey:!1;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.tiltX="tiltX"in a?a.tiltX:0;this.tiltY="tiltY"in a?a.tiltY:0;this.pointerType="pointerType"in a?a.pointerType:"";this.isPrimary="isPrimary"in a?a.isPrimary:!1;b.preventDefault&&(this.preventDefault=
function(){b.preventDefault()})}G(Pm,Ah);function qca(a){if(a.buttons||Um)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function rca(a,b){var c=0;a.pressure?c=a.pressure:c=b?.5:0;return c}var Um=!1;try{Um=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function Vm(a,b){Gm.call(this,a,{touchstart:this.DN,touchmove:this.CN,touchend:this.BN,touchcancel:this.AN});this.j=a.j;this.B=b;this.l=void 0;this.A=0;this.o=void 0}G(Vm,Gm);g=Vm.prototype;g.uz=function(){this.A=0;this.o=void 0};
function sca(a,b,c){b=Km(b,c);b.pointerId=c.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.A;b.button=0;b.buttons=1;b.width=c.webkitRadiusX||c.radiusX||0;b.height=c.webkitRadiusY||c.radiusY||0;b.pressure=c.webkitForce||c.force||.5;b.isPrimary=a.l===c.identifier;b.pointerType="touch";b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;return b}
function Wm(a,b,c){function d(){b.preventDefault()}var e=Array.prototype.slice.call(b.changedTouches),f=e.length,h;for(h=0;h<f;++h){var k=sca(a,b,e[h]);k.preventDefault=d;c.call(a,b,k)}}
g.DN=function(a){var b=a.touches,c=Object.keys(this.j),d=c.length;if(d>=b.length){var e=[],f;for(f=0;f<d;++f){var h=c[f];var k=this.j[h];var l;if(!(l=1==h))a:{for(var m=b.length,n=0;n<m;n++)if(l=b[n],l.identifier===h-2){l=!0;break a}l=!1}l||e.push(k.out)}for(f=0;f<e.length;++f)this.ho(a,e[f])}b=a.changedTouches[0];c=Object.keys(this.j).length;if(0===c||1===c&&(1).toString()in this.j)this.l=b.identifier,void 0!==this.o&&clearTimeout(this.o);Xm(this,a);this.A++;Wm(this,a,this.kL)};
g.kL=function(a,b){this.j[b.pointerId]={target:b.target,out:b,Dy:b.target};this.g.Wm(b,a);this.g.enter(b,a);this.g.fireEvent("pointerdown",b,a)};g.CN=function(a){a.preventDefault();Wm(this,a,this.wF)};g.wF=function(a,b){var c=this.j[b.pointerId];if(c){var d=c.out,e=c.Dy;this.g.fireEvent("pointermove",b,a);d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(Mm(this.g,d,a),Lm(this.g,b,a)):(b.target=e,b.relatedTarget=null,this.ho(a,b)));c.out=b;c.Dy=b.target}};
g.BN=function(a){Xm(this,a);Wm(this,a,this.EN)};g.EN=function(a,b){this.g.fireEvent("pointerup",b,a);this.g.out(b,a);Ym(this.g,b,a);delete this.j[b.pointerId];b.isPrimary&&(this.l=void 0,this.o=setTimeout(this.uz.bind(this),200))};g.AN=function(a){Wm(this,a,this.ho)};g.ho=function(a,b){this.g.cancel(b,a);this.g.out(b,a);Ym(this.g,b,a);delete this.j[b.pointerId];b.isPrimary&&(this.l=void 0,this.o=setTimeout(this.uz.bind(this),200))};
function Xm(a,b){var c=a.B.l;b=b.changedTouches[0];if(a.l===b.identifier){var d=[b.clientX,b.clientY];c.push(d);setTimeout(function(){var a=c.indexOf(d);-1<a&&c.splice(a,1)},2500)}};function Zm(a){Bh.call(this);this.K=a;this.j={};this.l={};this.g=[];Tba?$m(this,new Rm(this)):Uba?$m(this,new Nm(this)):(a=new Hm(this),$m(this,a),Dj&&$m(this,new Vm(this,a)));a=this.g.length;for(var b,c=0;c<a;c++)b=this.g[c],tca(this,Object.keys(b.s))}G(Zm,Bh);function $m(a,b){var c=Object.keys(b.s);c&&(c.forEach(function(a){var c=b.s[a];c&&(this.l[a]=c.bind(b))},a),a.g.push(b))}g=Zm.prototype;g.zv=function(a){var b=this.l[a.type];b&&b(a)};
function tca(a,b){b.forEach(function(a){I(this.K,a,this.zv,this)},a)}function uca(a,b){b.forEach(function(a){xh(this.K,a,this.zv,this)},a)}function Km(a,b){for(var c={},d,e=0,f=an.length;e<f;e++)d=an[e][0],c[d]=a[d]||b[d]||an[e][1];return c}g.enter=function(a,b){a.bubbles=!1;this.fireEvent("pointerenter",a,b)};function Ym(a,b,c){b.bubbles=!1;a.fireEvent("pointerleave",b,c)}g.Wm=function(a,b){a.bubbles=!0;this.fireEvent("pointerover",a,b)};
g.out=function(a,b){a.bubbles=!0;this.fireEvent("pointerout",a,b)};g.cancel=function(a,b){this.fireEvent("pointercancel",a,b)};function Mm(a,b,c){a.out(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||Ym(a,b,c)}function Lm(a,b,c){a.Wm(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||a.enter(b,c)}g.fireEvent=function(a,b,c){this.dispatchEvent(new Pm(a,c,b))};function Tm(a,b){a.dispatchEvent(new Pm(b.type,b,b))}
g.J=function(){for(var a=this.g.length,b,c=0;c<a;c++)b=this.g[c],uca(this,Object.keys(b.s));Bh.prototype.J.call(this)};
var an=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function bn(a,b){Bh.call(this);this.ha=a;this.s=0;this.A=!1;this.l=[];this.N=b?b*Aj:Aj;this.j=null;a=this.ha.g;this.L=0;this.I={};this.o=new Zm(a);this.g=null;this.B=I(this.o,"pointerdown",this.nE,this);this.G=I(this.o,"pointermove",this.uM,this)}G(bn,Bh);
function vca(a,b){var c=new Fm("click",a.ha,b);a.dispatchEvent(c);0!==a.s?(clearTimeout(a.s),a.s=0,c=new Fm("dblclick",a.ha,b),a.dispatchEvent(c)):a.s=setTimeout(function(){this.s=0;var a=new Fm("singleclick",this.ha,b);this.dispatchEvent(a)}.bind(a),250)}function cn(a,b){"pointerup"==b.type||"pointercancel"==b.type?delete a.I[b.pointerId]:"pointerdown"==b.type&&(a.I[b.pointerId]=!0);a.L=Object.keys(a.I).length}g=bn.prototype;
g.Au=function(a){cn(this,a);var b=new Fm("pointerup",this.ha,a);this.dispatchEvent(b);b.bz||this.A||0!==a.button||vca(this,this.j);0===this.L&&(this.l.forEach(rh),this.l.length=0,this.A=!1,this.j=null,this.g.dispose(),this.g=null)};g.nE=function(a){cn(this,a);var b=new Fm("pointerdown",this.ha,a);this.dispatchEvent(b);this.j=a;0===this.l.length&&(this.g=new Zm(document),this.l.push(I(this.g,"pointermove",this.oE,this),I(this.g,"pointerup",this.Au,this),I(this.o,"pointercancel",this.Au,this)))};
g.oE=function(a){if(dn(this,a)){this.A=!0;var b=new Fm("pointerdrag",this.ha,a,this.A);this.dispatchEvent(b)}a.preventDefault()};g.uM=function(a){this.dispatchEvent(new Fm(a.type,this.ha,a,!(!this.j||!dn(this,a))))};function dn(a,b){return Math.abs(b.clientX-a.j.clientX)>a.N||Math.abs(b.clientY-a.j.clientY)>a.N}
g.J=function(){this.G&&(rh(this.G),this.G=null);this.B&&(rh(this.B),this.B=null);this.l.forEach(rh);this.l.length=0;this.g&&(this.g.dispose(),this.g=null);this.o&&(this.o.dispose(),this.o=null);Bh.prototype.J.call(this)};function en(a,b){this.I=a;this.o=b;this.g=[];this.l=[];this.j={}}en.prototype.clear=function(){this.g.length=0;this.l.length=0;oh(this.j)};en.prototype.dequeue=function(){var a=this.g,b=this.l,c=a[0];1==a.length?(a.length=0,b.length=0):(a[0]=a.pop(),b[0]=b.pop(),fn(this,0));a=this.o(c);delete this.j[a];return c};en.prototype.s=function(a){Rh(!(this.o(a)in this.j),31);var b=this.I(a);return Infinity!=b?(this.g.push(a),this.l.push(b),this.j[this.o(a)]=!0,gn(this,0,this.g.length-1),!0):!1};
en.prototype.isEmpty=function(){return 0===this.g.length};function fn(a,b){for(var c=a.g,d=a.l,e=c.length,f=c[b],h=d[b],k=b;b<e>>1;){var l=2*b+1,m=2*b+2;l=m<e&&d[m]<d[l]?m:l;c[b]=c[l];d[b]=d[l];b=l}c[b]=f;d[b]=h;gn(a,k,b)}function gn(a,b,c){var d=a.g;a=a.l;for(var e=d[c],f=a[c];c>b;){var h=c-1>>1;if(a[h]>f)d[c]=d[h],a[c]=a[h],c=h;else break}d[c]=e;a[c]=f}
function hn(a){var b=a.I,c=a.g,d=a.l,e=0,f=c.length,h;for(h=0;h<f;++h){var k=c[h];var l=b(k);Infinity==l?delete a.j[a.o(k)]:(d[e]=l,c[e++]=k)}c.length=e;d.length=e;for(b=(a.g.length>>1)-1;0<=b;b--)fn(a,b)};function jn(a,b){en.call(this,function(b){return a.apply(null,b)},function(a){return a[0].getKey()});this.L=b;this.B=0;this.A={}}G(jn,en);jn.prototype.s=function(a){var b=en.prototype.s.call(this,a);b&&I(a[0],"change",this.G,this);return b};jn.prototype.G=function(a){a=a.target;var b=a.getState();if(2===b||3===b||4===b||5===b)xh(a,"change",this.G,this),a=a.getKey(),a in this.A&&(delete this.A[a],--this.B),this.L()};function kn(a){var b=a||{};a=nh({},b);delete a.layers;b=b.layers;ql.call(this,a);this.o=[];this.g={};I(this,Hh(ln),this.gE,this);b?Array.isArray(b)?b=new Kh(b.slice(),{unique:!0}):Rh(b instanceof Kh,43):b=new Kh(void 0,{unique:!0});this.Vp(b)}G(kn,ql);g=kn.prototype;g.am=function(){this.ia()};
g.gE=function(){this.o.forEach(rh);this.o.length=0;var a=mn(this);this.o.push(I(a,"add",this.fE,this),I(a,"remove",this.hE,this));for(var b in this.g)this.g[b].forEach(rh);oh(this.g);a=a.g;var c;b=0;for(c=a.length;b<c;b++){var d=a[b];this.g[H(d).toString()]=[I(d,"propertychange",this.am,this),I(d,"change",this.am,this)]}this.ia()};g.fE=function(a){a=a.element;var b=H(a).toString();this.g[b]=[I(a,"propertychange",this.am,this),I(a,"change",this.am,this)];this.ia()};
g.hE=function(a){a=H(a.element).toString();this.g[a].forEach(rh);delete this.g[a];this.ia()};function mn(a){return a.get(ln)}g.Vp=function(a){this.set(ln,a)};
g.Ro=function(a){var b=void 0!==a?a:[],c=b.length;mn(this).forEach(function(a){a.Ro(b)});a=rl(this);var d;for(d=b.length;c<d;c++){var e=b[c];e.opacity*=a.opacity;e.visible=e.visible&&a.visible;e.maxResolution=Math.min(e.maxResolution,a.maxResolution);e.minResolution=Math.max(e.minResolution,a.minResolution);void 0!==a.extent&&(e.extent=void 0!==e.extent?ki(e.extent,a.extent):a.extent)}return b};g.Uo=function(){return"ready"};var ln="layers";var nn=[],on=[];function pn(a,b){switch(a){case "MAP_RENDERER":a=nn;a.push(b);break;case "LAYER_RENDERER":a=on;a.push(b);break;default:throw Error("Unsupported plugin type: "+a);}}function qn(a){for(var b=0,c=a.length;b<c;++b)pn("LAYER_RENDERER",a[b])};function rn(a){Fh.call(this);var b=wca(a);this.hb=void 0!==a.loadTilesWhileAnimating?a.loadTilesWhileAnimating:!1;this.jb=void 0!==a.loadTilesWhileInteracting?a.loadTilesWhileInteracting:!1;this.oa=void 0!==a.pixelRatio?a.pixelRatio:Aj;this.nb=b.logos;this.Z=function(){this.s=void 0;this.LF.call(this)}.bind(this);this.Ia=aj();this.zb=aj();this.bb=0;this.L=this.P=this.U=this.o=this.j=null;this.g=document.createElement("DIV");this.g.className="ol-viewport"+(Dj?" ol-touch":"");this.g.style.position=
"relative";this.g.style.overflow="hidden";this.g.style.width="100%";this.g.style.height="100%";this.g.style.msTouchAction="none";this.g.style.touchAction="none";this.B=document.createElement("DIV");this.B.className="ol-overlaycontainer";this.g.appendChild(this.B);this.A=document.createElement("DIV");this.A.className="ol-overlaycontainer-stopevent";for(var c="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" "),d=0,e=c.length;d<e;++d)I(this.A,c[d],Hba);this.g.appendChild(this.A);
this.ka=new bn(this,a.moveTolerance);for(var f in Em)I(this.ka,Em[f],this.xu,this);this.Ea=b.keyboardEventTarget;this.I=null;I(this.g,"wheel",this.Ag,this);I(this.g,"mousewheel",this.Ag,this);this.controls=b.controls||new Kh;this.interactions=b.interactions||new Kh;this.N=b.overlays;this.Ey={};this.Yd=b.mapRendererPlugin.create(this.g,this);this.pa=null;this.ra=[];this.Ca=new jn(this.DD.bind(this),this.xE.bind(this));this.G={};I(this,Hh("layergroup"),this.dE,this);I(this,Hh("view"),this.zE,this);
I(this,Hh("size"),this.tE,this);I(this,Hh("target"),this.wE,this);this.qc(b.values);this.controls.forEach(function(a){a.setMap(this)},this);I(this.controls,"add",function(a){a.element.setMap(this)},this);I(this.controls,"remove",function(a){a.element.setMap(null)},this);this.interactions.forEach(function(a){a.setMap(this)},this);I(this.interactions,"add",function(a){a.element.setMap(this)},this);I(this.interactions,"remove",function(a){a.element.setMap(null)},this);this.N.forEach(this.jt,this);I(this.N,
"add",function(a){this.jt(a.element)},this);I(this.N,"remove",function(a){var b=a.element.D();void 0!==b&&delete this.Ey[b.toString()];a.element.setMap(null)},this)}G(rn,Fh);function xca(a,b){a.Sj().push(b)}g=rn.prototype;g.jt=function(a){var b=a.D();void 0!==b&&(this.Ey[b.toString()]=a);a.setMap(this)};
g.J=function(){this.ka.dispose();xh(this.g,"wheel",this.Ag,this);xh(this.g,"mousewheel",this.Ag,this);void 0!==this.l&&(window.removeEventListener("resize",this.l,!1),this.l=void 0);this.s&&(cancelAnimationFrame(this.s),this.s=void 0);this.set("target",null);Fh.prototype.J.call(this)};g.zh=function(a,b,c){if(this.j)return a=this.cd(a),c=void 0!==c?c:{},this.Yd.sc(a,this.j,void 0!==c.hitTolerance?c.hitTolerance*this.j.pixelRatio:0,b,null,void 0!==c.layerFilter?c.layerFilter:ni,null)};
function Dm(a,b){a=a.g.getBoundingClientRect();b=b.changedTouches?b.changedTouches[0]:b;return[b.clientX-a.left,b.clientY-a.top]}function sn(a){a=a.get("target");return void 0!==a?"string"===typeof a?document.getElementById(a):a:null}g.cd=function(a){var b=this.j;return b?fj(b.pixelToCoordinateTransform,a.slice()):null};g.Sj=function(){return this.N};function tn(a){return a.get("layergroup")}function un(a){return mn(tn(a))}
g.Vd=function(a){var b=this.j;return b?fj(b.coordinateToPixelTransform,a.slice(0,2)):null};g.wi=function(){return this.Yd};function vn(a){return a.get("size")}function M(a){return a.get("view")}g.DD=function(a,b,c,d){var e=this.j;if(!(e&&b in e.wantedTiles&&e.wantedTiles[b][a.getKey()]))return Infinity;a=c[0]-e.focus[0];c=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(a*a+c*c)/d};g.Ag=function(a,b){a=new Cm(b||a.type,this,a);this.xu(a)};
g.xu=function(a){if(this.j){this.pa=a.coordinate;a.frameState=this.j;var b=this.interactions.g,c;if(!1!==this.dispatchEvent(a))for(c=b.length-1;0<=c;c--){var d=b[c];if(d.get("active")&&!d.handleEvent(a))break}}};
g.qE=function(){var a=this.j,b=this.Ca;if(!b.isEmpty()){var c=16,d=c;if(a){var e=a.viewHints;e[0]&&(c=this.hb?8:0,d=2);e[1]&&(c=this.jb?8:0,d=2)}if(b.B<c){hn(b);e=0;for(var f=!1,h,k,l;b.B<c&&e<d&&0<b.g.length;)k=b.dequeue()[0],l=k.getKey(),h=k.getState(),5===h?f=!0:0!==h||l in b.A||(b.A[l]=!0,++b.B,++e,k.load());0===e&&f&&b.L()}}b=this.ra;c=0;for(d=b.length;c<d;++c)b[c](this,a);b.length=0};g.tE=function(){this.render()};
g.wE=function(){var a;this.get("target")&&(a=sn(this));if(this.I){for(var b=0,c=this.I.length;b<c;++b)rh(this.I[b]);this.I=null}if(a){a.appendChild(this.g);var d=this.Ea?this.Ea:a;this.I=[I(d,"keydown",this.Ag,this),I(d,"keypress",this.Ag,this)];this.l||(this.l=this.Ve.bind(this),window.addEventListener("resize",this.l,!1))}else{a=this.Yd;for(d in a.o)wn(a,d).dispose();sj(this.g);void 0!==this.l&&(window.removeEventListener("resize",this.l,!1),this.l=void 0)}this.Ve()};g.xE=function(){this.render()};
g.Eu=function(){this.render()};g.zE=function(){this.U&&(rh(this.U),this.U=null);this.P&&(rh(this.P),this.P=null);var a=M(this);a&&(this.g.setAttribute("data-view",H(a)),this.U=I(a,"propertychange",this.Eu,this),this.P=I(a,"change",this.Eu,this));this.render()};g.dE=function(){this.L&&(this.L.forEach(rh),this.L=null);var a=tn(this);a&&(this.L=[I(a,"propertychange",this.render,this),I(a,"change",this.render,this)]);this.render()};function xn(a){a.s&&cancelAnimationFrame(a.s);a.Z()}
g.render=function(){void 0===this.s&&(this.s=requestAnimationFrame(this.Z))};g.pc=function(a){return mn(tn(this)).remove(a)};
g.LF=function(){var a=Date.now(),b,c=vn(this),d=M(this),e=Th(),f=this.j,h=null;if(void 0!==c&&0<c[0]&&0<c[1]&&d&&Zk(d)){h=ll(d,this.j?this.j.viewHints:void 0);var k=tn(this).Ro(),l={};var m=0;for(b=k.length;m<b;++m)l[H(k[m].layer)]=k[m];m=d.getState();d=m.center;b=m.resolution/this.oa;d[0]=Math.round(d[0]/b)*b;d[1]=Math.round(d[1]/b)*b;h={animate:!1,coordinateToPixelTransform:this.Ia,extent:e,focus:this.pa?this.pa:d,index:this.bb++,layerStates:l,layerStatesArray:k,logos:nh({},this.nb),pixelRatio:this.oa,
pixelToCoordinateTransform:this.zb,postRenderFunctions:[],size:c,skippedFeatureUids:this.G,tileQueue:this.Ca,time:a,usedTiles:{},viewState:m,viewHints:h,wantedTiles:{}}}h&&(h.extent=ji(m.center,m.resolution,m.rotation,h.size,e));this.j=h;this.Yd.Mi(h);h&&(h.animate&&this.render(),Array.prototype.push.apply(this.ra,h.postRenderFunctions),!f||this.o&&(fi(this.o)||bi(h.extent,this.o))||(this.dispatchEvent(new Bm("movestart",this,f)),this.o=$h(this.o)),!this.o||h.viewHints[0]||h.viewHints[1]||bi(h.extent,
this.o)||(this.dispatchEvent(new Bm("moveend",this,h)),Wh(h.extent,this.o)));this.dispatchEvent(new Bm("postrender",this,h));setTimeout(this.qE.bind(this),0)};g.setSize=function(a){this.set("size",a)};g.Tz=function(a){a=H(a).toString();this.G[a]=!0;this.render()};
g.Ve=function(){var a=sn(this);if(a){var b=getComputedStyle(a);this.setSize([a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.setSize(void 0)};g.mA=function(a){a=H(a).toString();delete this.G[a];this.render()};var yn=["canvas","webgl"];
function wca(a){var b=null;void 0!==a.keyboardEventTarget&&(b="string"===typeof a.keyboardEventTarget?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);var c={},d={};if(void 0===a.logo||"boolean"===typeof a.logo&&a.logo)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"https://openlayers.org/";else{var e=a.logo;"string"===typeof e?d[e]="":e instanceof HTMLElement?d[H(e).toString()]=e:e&&(Rh("string"==typeof e.href,44),Rh("string"==typeof e.src,45),d[e.src]=e.href)}e=a.layers instanceof kn?a.layers:new kn({layers:a.layers});c.layergroup=e;c.target=a.target;c.view=void 0!==a.view?a.view:new Yk;var f;void 0!==a.renderer?(Array.isArray(a.renderer)?f=a.renderer:"string"===typeof a.renderer?f=[a.renderer]:Rh(!1,46),0<=f.indexOf("dom")&&(f=f.concat(yn))):f=yn;e=0;var h=
f.length;a:for(;e<h;++e)for(var k=f[e],l=0,m=nn.length;l<m;++l){var n=nn[l];if(n.handles(k)){var p=n;break a}}if(!p)throw Error("Unable to create a map renderer for types: "+f.join(", "));if(void 0!==a.controls)if(Array.isArray(a.controls))var r=new Kh(a.controls.slice());else Rh(a.controls instanceof Kh,47),r=a.controls;if(void 0!==a.interactions)if(Array.isArray(a.interactions))var u=new Kh(a.interactions.slice());else Rh(a.interactions instanceof Kh,48),u=a.interactions;void 0!==a.overlays?Array.isArray(a.overlays)?
a=new Kh(a.overlays.slice()):(Rh(a.overlays instanceof Kh,49),a=a.overlays):a=new Kh;return{controls:r,interactions:u,keyboardEventTarget:b,logos:d,overlays:a,mapRendererPlugin:p,values:c}};function zn(a){Fh.call(this);this.element=a.element?a.element:null;this.ha=this.I=null;this.o=[];this.render=a.render?a.render:lh;a.target&&(a=a.target,this.I="string"===typeof a?document.getElementById(a):a)}G(zn,Fh);zn.prototype.J=function(){sj(this.element);Fh.prototype.J.call(this)};zn.prototype.Y=function(){return this.ha};
zn.prototype.setMap=function(a){this.ha&&sj(this.element);for(var b=0,c=this.o.length;b<c;++b)rh(this.o[b]);this.o.length=0;if(this.ha=a)(this.I?this.I:a.A).appendChild(this.element),this.render!==lh&&this.o.push(I(a,"postrender",this.render,this)),a.render()};function An(a){a=a?a:{};this.g=document.createElement("UL");this.s=document.createElement("LI");this.g.appendChild(this.s);this.s.style.display="none";this.l=void 0!==a.collapsed?a.collapsed:!0;this.G=void 0!==a.collapsible?a.collapsible:!0;this.G||(this.l=!1);var b=void 0!==a.className?a.className:"ol-attribution",c=void 0!==a.tipLabel?a.tipLabel:"Attributions",d=void 0!==a.collapseLabel?a.collapseLabel:"\u00bb";"string"===typeof d?(this.B=document.createElement("span"),this.B.textContent=d):this.B=
d;d=void 0!==a.label?a.label:"i";"string"===typeof d?(this.Rb=document.createElement("span"),this.Rb.textContent=d):this.Rb=d;var e=this.G&&!this.l?this.B:this.Rb;d=document.createElement("button");d.setAttribute("type","button");d.title=c;d.appendChild(e);I(d,"click",this.MF,this);c=document.createElement("div");c.className=b+" ol-unselectable ol-control"+(this.l&&this.G?" ol-collapsed":"")+(this.G?"":" ol-uncollapsible");c.appendChild(this.g);c.appendChild(d);zn.call(this,{element:c,render:a.render?
a.render:yca,target:a.target});this.A=[];this.j=!0;this.L={}}G(An,zn);g=An.prototype;g.To=function(a){for(var b={},c=[],d=a.layerStatesArray,e=a.viewState.resolution,f=0,h=d.length;f<h;++f){var k=d[f];if(tl(k,e)&&(k=k.layer.O())&&(k=k.kl)&&(k=k(a)))if(Array.isArray(k))for(var l=0,m=k.length;l<m;++l)k[l]in b||(c.push(k[l]),b[k[l]]=!0);else k in b||(c.push(k),b[k]=!0)}return c};function yca(a){this.qv(a.frameState)}
g.qv=function(a){if(a){var b=this.To(a);if(!jk(b,this.A)){for(;this.g.lastChild!==this.s;)this.g.removeChild(this.g.lastChild);for(var c=0,d=b.length;c<d;++c){var e=document.createElement("LI");e.innerHTML=b[c];this.g.appendChild(e)}0===b.length&&0<this.A.length?this.element.classList.add("ol-logo-only"):0===this.A.length&&0<b.length&&this.element.classList.remove("ol-logo-only");c=0<b.length||!qh(a.logos);this.j!=c&&(this.element.style.display=c?"":"none",this.j=c);this.A=b;this.Ou(a)}}else this.j&&
(this.element.style.display="none",this.j=!1)};g.Ou=function(a){a=a.logos;var b=this.L;for(e in b)e in a||(sj(b[e]),delete b[e]);var c;for(c in a){var d=a[c];d instanceof HTMLElement&&(this.s.appendChild(d),b[c]=d);if(!(c in b)){var e=new Image;e.src=c;if(""===d)var f=e;else f=document.createElement("a"),f.href=d,f.appendChild(e);this.s.appendChild(f);b[c]=f}}this.s.style.display=qh(a)?"none":""};g.MF=function(a){a.preventDefault();Bn(this)};
function Bn(a){a.element.classList.toggle("ol-collapsed");a.l?rj(a.B,a.Rb):rj(a.Rb,a.B);a.l=!a.l}g.zd=function(a){this.G&&this.l!==a&&Bn(this)};function Cn(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",c=void 0!==a.label?a.label:"\u21e7";this.Rb=null;"string"===typeof c?(this.Rb=document.createElement("span"),this.Rb.className="ol-compass",this.Rb.textContent=c):(this.Rb=c,this.Rb.classList.add("ol-compass"));var d=a.tipLabel?a.tipLabel:"Reset rotation";c=document.createElement("button");c.className=b+"-reset";c.setAttribute("type","button");c.title=d;c.appendChild(this.Rb);I(c,"click",Cn.prototype.B,this);d=document.createElement("div");
d.className=b+" ol-unselectable ol-control";d.appendChild(c);b=a.render?a.render:zca;this.s=a.resetNorth?a.resetNorth:void 0;zn.call(this,{element:d,render:b,target:a.target});this.A=void 0!==a.duration?a.duration:250;this.j=void 0!==a.autoHide?a.autoHide:!0;this.g=void 0;this.j&&this.element.classList.add("ol-hidden")}G(Cn,zn);Cn.prototype.B=function(a){a.preventDefault();void 0!==this.s?this.s():this.l()};
Cn.prototype.l=function(){var a=M(this.Y());a&&void 0!==al(a)&&(0<this.A?a.animate({rotation:0,duration:this.A,easing:rk}):gl(a,0))};function zca(a){if(a=a.frameState){a=a.viewState.rotation;if(a!=this.g){var b="rotate("+a+"rad)";if(this.j){var c=this.element.classList.contains("ol-hidden");c||0!==a?c&&0!==a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.Rb.style.msTransform=b;this.Rb.style.webkitTransform=b;this.Rb.style.transform=b}this.g=a}};function Dn(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",c=void 0!==a.delta?a.delta:1,d=void 0!==a.zoomInLabel?a.zoomInLabel:"+",e=void 0!==a.zoomOutLabel?a.zoomOutLabel:"\u2212",f=void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in",h=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",k=document.createElement("button");k.className=b+"-in";k.setAttribute("type","button");k.title=f;k.appendChild("string"===typeof d?document.createTextNode(d):d);I(k,"click",Dn.prototype.l.bind(this,
c));d=document.createElement("button");d.className=b+"-out";d.setAttribute("type","button");d.title=h;d.appendChild("string"===typeof e?document.createTextNode(e):e);I(d,"click",Dn.prototype.l.bind(this,-c));c=document.createElement("div");c.className=b+" ol-unselectable ol-control";c.appendChild(k);c.appendChild(d);zn.call(this,{element:c,target:a.target});this.j=void 0!==a.duration?a.duration:250}G(Dn,zn);Dn.prototype.l=function(a,b){b.preventDefault();this.g(a)};
Dn.prototype.g=function(a){var b=M(this.Y());if(b){var c=b.ab();c&&(a=b.constrainResolution(c,a),0<this.j?(0<b.g[0]&&hl(b),b.animate({resolution:a,duration:this.j,easing:rk})):fl(b,a))}};function En(){this.g=[];this.j=this.l=0}function Fn(a){a.g.length=0;a.l=0;a.j=0}En.prototype.update=function(a,b){this.g.push(a,b,Date.now())};En.prototype.end=function(){if(6>this.g.length)return!1;var a=Date.now()-100,b=this.g.length-3;if(this.g[b+2]<a)return!1;for(var c=b-3;0<c&&this.g[c+2]>a;)c-=3;a=this.g[b+2]-this.g[c+2];if(a<1E3/60)return!1;var d=this.g[b]-this.g[c];b=this.g[b+1]-this.g[c+1];this.l=Math.atan2(b,d);this.j=Math.sqrt(d*d+b*b)/a;return.05<this.j};function Gn(a){Fh.call(this);this.ha=null;this.setActive(!0);this.handleEvent=a.handleEvent}G(Gn,Fh);Gn.prototype.Y=function(){return this.ha};Gn.prototype.setActive=function(a){this.set("active",a)};Gn.prototype.setMap=function(a){this.ha=a};function Hn(a,b,c){var d=$k(a);d&&(b=a.j.center([d[0]+b[0],d[1]+b[1]]),c?a.animate({duration:c,easing:sk,center:b}):cl(a,b))}
function In(a,b,c,d){if(void 0!==b){var e=al(a),f=$k(a);void 0!==e&&f&&0<d?a.animate({rotation:b,anchor:c,duration:d,easing:rk}):a.rotate(b,c)}}function Jn(a,b,c,d){var e=a.ab();b=a.constrainResolution(e,b,0);if(void 0!==b){var f=a.Pf();b=ri(b,a.he()||f[f.length-1],a.ge()||f[0])}c&&void 0!==b&&b!==e&&(f=$k(a),c=il(a,b,c),c=a.j.center(c),c=[(b*f[0]-e*c[0])/(b-e),(b*f[1]-e*c[1])/(b-e)]);Kn(a,b,c,d)}
function Kn(a,b,c,d){if(b){var e=a.ab(),f=$k(a);void 0!==e&&f&&b!==e&&d?a.animate({resolution:b,anchor:c,duration:d,easing:rk}):(c&&(c=il(a,b,c),cl(a,c)),fl(a,b))}};function Ln(a){a=a?a:{};this.g=a.delta?a.delta:1;Gn.call(this,{handleEvent:Mn});this.j=void 0!==a.duration?a.duration:250}G(Ln,Gn);function Mn(a){var b=!1,c=a.originalEvent;if("dblclick"==a.type){b=a.coordinate;c=c.shiftKey?-this.g:this.g;var d=M(a.map);Jn(d,c,b,this.j);a.preventDefault();b=!0}return!b};function Aca(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Nn(a){a=a.originalEvent;return 0==a.button&&!(Sba&&zj&&a.ctrlKey)}function Bca(a){return"pointermove"==a.type}function Cca(a){return"singleclick"==a.type}function On(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function Dca(a){a=a.originalEvent;return!a.altKey&&(zj?a.metaKey:a.ctrlKey)&&!a.shiftKey}
function Pn(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Qn(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function Rn(a){Rh(a.g,56);return"mouse"==a.g.pointerType};function Sn(a){a=a?a:{};Gn.call(this,{handleEvent:a.handleEvent?a.handleEvent:Tn});this.Ea=a.handleDownEvent?a.handleDownEvent:oi;this.ka=a.handleDragEvent?a.handleDragEvent:lh;this.oa=a.handleMoveEvent?a.handleMoveEvent:lh;this.ra=a.handleUpEvent?a.handleUpEvent:oi;this.I=!1;this.U={};this.j=[]}G(Sn,Gn);function Un(a){for(var b=a.length,c=0,d=0,e=0;e<b;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}
function Tn(a){if(!(a instanceof Fm))return!0;var b=!1,c=a.type;if("pointerdown"===c||"pointerdrag"===c||"pointerup"===c){c=a.g;var d=c.pointerId.toString();"pointerup"==a.type?delete this.U[d]:"pointerdown"==a.type?this.U[d]=c:d in this.U&&(this.U[d]=c);this.j=ph(this.U)}this.I?"pointerdrag"==a.type?this.ka(a):"pointerup"==a.type&&(this.I=this.ra(a)&&0<this.j.length):"pointerdown"==a.type?(this.I=a=this.Ea(a),b=this.P(a)):"pointermove"==a.type&&this.oa(a);return!b}Sn.prototype.P=function(a){return a};function Vn(a){Sn.call(this,{handleDownEvent:Eca,handleDragEvent:Fca,handleUpEvent:Gca});a=a?a:{};this.g=a.kinetic;this.l=null;this.A=a.condition?a.condition:On;this.o=!1}G(Vn,Sn);
function Fca(a){var b=this.j,c=Un(b);if(b.length==this.s){if(this.g&&this.g.update(c[0],c[1]),this.l){var d=this.l[0]-c[0],e=c[1]-this.l[1];a=M(a.map);var f=a.getState();e=d=[d,e];var h=f.resolution;e[0]*=h;e[1]*=h;qk(d,f.rotation);pk(d,f.center);d=a.j.center(d);cl(a,d)}}else this.g&&Fn(this.g);this.l=c;this.s=b.length}
function Gca(a){var b=a.map;a=M(b);if(0===this.j.length){if(!this.o&&this.g&&this.g.end()){var c=(.05-this.g.j)/-.005;var d=this.g.l,e=$k(a);e=b.Vd(e);b=b.cd([e[0]-c*Math.cos(d),e[1]-c*Math.sin(d)]);a.animate({center:a.j.center(b),duration:500,easing:rk})}bl(a,1,-1);return!1}this.g&&Fn(this.g);this.l=null;return!0}
function Eca(a){if(0<this.j.length&&this.A(a)){var b=M(a.map);this.l=null;this.I||bl(b,1,1);0<b.g[0]&&cl(b,a.frameState.viewState.center);this.g&&Fn(this.g);this.o=1<this.j.length;return!0}return!1}Vn.prototype.P=oi;function Wn(a){a=a?a:{};Sn.call(this,{handleDownEvent:Hca,handleDragEvent:Ica,handleUpEvent:Jca});this.l=a.condition?a.condition:Aca;this.g=void 0;this.o=void 0!==a.duration?a.duration:250}G(Wn,Sn);function Ica(a){if(Rn(a)){var b=a.map,c=M(b);if(c.j.rotation!==mk){b=vn(b);a=a.pixel;a=Math.atan2(b[1]/2-a[1],a[0]-b[0]/2);if(void 0!==this.g){b=a-this.g;var d=al(c);In(c,d-b)}this.g=a}}}
function Jca(a){if(!Rn(a))return!0;a=M(a.map);bl(a,1,-1);var b=al(a),c=this.o;b=a.constrainRotation(b,0);In(a,b,void 0,c);return!1}function Hca(a){return Rn(a)&&Nn(a)&&this.l(a)?(bl(M(a.map),1,1),this.g=void 0,!0):!1}Wn.prototype.P=oi;function Xn(a){this.Ed=null;this.K=document.createElement("div");this.K.style.position="absolute";this.K.className="ol-box "+a;this.g=this.j=this.ha=null}G(Xn,zh);Xn.prototype.J=function(){this.setMap(null)};function Yn(a){var b=a.j,c=a.g;a=a.K.style;a.left=Math.min(b[0],c[0])+"px";a.top=Math.min(b[1],c[1])+"px";a.width=Math.abs(c[0]-b[0])+"px";a.height=Math.abs(c[1]-b[1])+"px"}
Xn.prototype.setMap=function(a){if(this.ha){this.ha.B.removeChild(this.K);var b=this.K.style;b.left=b.top=b.width=b.height="inherit"}(this.ha=a)&&this.ha.B.appendChild(this.K)};function Zn(a){var b=a.j,c=a.g;b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.ha.cd,a.ha);b[4]=b[0].slice();a.Ed?a.Ed.ic([b]):a.Ed=new Rk([b])}Xn.prototype.X=function(){return this.Ed};function $n(a){Sn.call(this,{handleDownEvent:Kca,handleDragEvent:Lca,handleUpEvent:Mca});a=a?a:{};this.g=new Xn(a.className||"ol-dragbox");this.A=void 0!==a.minArea?a.minArea:64;this.l=null;this.B=a.condition?a.condition:ni;this.s=a.boxEndCondition?a.boxEndCondition:Nca}G($n,Sn);function Nca(a,b,c){a=c[0]-b[0];b=c[1]-b[1];return a*a+b*b>=this.A}function Lca(a){if(Rn(a)){var b=this.g,c=a.pixel;b.j=this.l;b.g=c;Zn(b);Yn(b);this.dispatchEvent(new ao(Oca,a.coordinate,a))}}$n.prototype.X=function(){return this.g.X()};
$n.prototype.o=lh;function Mca(a){if(!Rn(a))return!0;this.g.setMap(null);this.s(a,this.l,a.pixel)&&(this.o(a),this.dispatchEvent(new ao(Pca,a.coordinate,a)));return!1}function Kca(a){if(Rn(a)&&Nn(a)&&this.B(a)){this.l=a.pixel;this.g.setMap(a.map);var b=this.g,c=this.l;b.j=this.l;b.g=c;Zn(b);Yn(b);this.dispatchEvent(new ao(Qca,a.coordinate,a));return!0}return!1}var Qca="boxstart",Oca="boxdrag",Pca="boxend";function ao(a,b,c){Ah.call(this,a);this.coordinate=b;this.mapBrowserEvent=c}G(ao,Ah);function bo(a){a=a?a:{};var b=a.condition?a.condition:Pn;this.G=void 0!==a.duration?a.duration:200;this.L=void 0!==a.out?a.out:!1;$n.call(this,{condition:b,className:a.className||"ol-dragzoom"})}G(bo,$n);
bo.prototype.o=function(){var a=this.Y(),b=M(a),c=vn(a),d=this.X().aa();if(this.L){var e=ml(b,c);d=[a.Vd([d[0],d[1]]),a.Vd([d[2],d[3]])];a=$h(void 0);var f;var h=0;for(f=d.length;h<f;++h)Uh(a,d[h]);d=nl(b,a,c);mi(e,1/d);d=e}c=b.constrainResolution(nl(b,d,c));e=ii(d);e=b.j.center(e);b.animate({resolution:c,center:e,duration:this.G,easing:rk})};function co(a){Gn.call(this,{handleEvent:eo});a=a||{};this.s=function(a){return On(a)&&Qn(a)};this.g=void 0!==a.condition?a.condition:this.s;this.j=void 0!==a.duration?a.duration:100;this.o=void 0!==a.pixelDelta?a.pixelDelta:128}G(co,Gn);
function eo(a){var b=!1;if("keydown"==a.type){var c=a.originalEvent.keyCode;if(this.g(a)&&(40==c||37==c||39==c||38==c)){b=M(a.map);var d=b.ab()*this.o,e=0,f=0;40==c?f=-d:37==c?e=-d:39==c?e=d:f=d;c=[e,f];qk(c,al(b));Hn(b,c,this.j);a.preventDefault();b=!0}}return!b};function fo(a){Gn.call(this,{handleEvent:go});a=a?a:{};this.g=a.condition?a.condition:Qn;this.j=a.delta?a.delta:1;this.l=void 0!==a.duration?a.duration:100}G(fo,Gn);function go(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var c=a.originalEvent.charCode;!this.g(a)||43!=c&&45!=c||(b=43==c?this.j:-this.j,c=M(a.map),Jn(c,b,void 0,this.l),a.preventDefault(),b=!0)}return!b};function ho(a){Gn.call(this,{handleEvent:Rca});a=a||{};this.j=0;this.G=void 0!==a.duration?a.duration:250;this.Ma=void 0!==a.timeout?a.timeout:80;this.P=void 0!==a.useAnchor?a.useAnchor:!0;this.N=a.constrainResolution||!1;this.g=null;this.s=this.o=this.B=this.l=void 0;this.I=300}G(ho,Gn);
function Rca(a){var b=a.type;if("wheel"!==b&&"mousewheel"!==b)return!0;a.preventDefault();b=a.map;var c=a.originalEvent;this.P&&(this.g=a.coordinate);if("wheel"==a.type){var d=c.deltaY;Rba&&c.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(d/=Aj);c.deltaMode===WheelEvent.DOM_DELTA_LINE&&(d*=40)}else"mousewheel"==a.type&&(d=-c.wheelDeltaY,yj&&(d/=3));if(0===d)return!1;a=Date.now();void 0===this.l&&(this.l=a);if(!this.o||400<a-this.l)this.o=4>Math.abs(d)?io:Sca;if(this.o===io){b=M(b);this.s?clearTimeout(this.s):
bl(b,1,1);this.s=setTimeout(this.L.bind(this),400);c=b.ab()*Math.pow(2,d/this.I);var e=b.he(),f=b.ge(),h=0;c<e?(c=Math.max(c,e/1.5),h=1):c>f&&(c=Math.min(c,1.5*f),h=-1);if(this.g){var k=il(b,c,this.g);cl(b,b.j.center(k))}fl(b,c);0===h&&this.N&&b.animate({resolution:b.constrainResolution(c,0<d?-1:1),easing:rk,anchor:this.g,duration:this.G});0<h?b.animate({resolution:e,easing:rk,anchor:this.g,duration:500}):0>h&&b.animate({resolution:f,easing:rk,anchor:this.g,duration:500});this.l=a;return!1}this.j+=
d;d=Math.max(this.Ma-(a-this.l),0);clearTimeout(this.B);this.B=setTimeout(this.A.bind(this,b),d);return!1}ho.prototype.L=function(){this.s=void 0;bl(M(this.Y()),1,-1)};ho.prototype.A=function(a){a=M(a);0<a.g[0]&&hl(a);Jn(a,-ri(this.j,-1,1),this.g,this.G);this.o=void 0;this.j=0;this.g=null;this.B=this.l=void 0};var io="trackpad",Sca="wheel";function jo(a){Sn.call(this,{handleDownEvent:Tca,handleDragEvent:Uca,handleUpEvent:Vca});a=a||{};this.l=null;this.o=void 0;this.g=!1;this.s=0;this.B=void 0!==a.threshold?a.threshold:.3;this.A=void 0!==a.duration?a.duration:250}G(jo,Sn);
function Uca(a){var b=0,c=this.j[0],d=this.j[1];c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.o&&(b=c-this.o,this.s+=b,!this.g&&Math.abs(this.s)>this.B&&(this.g=!0));this.o=c;a=a.map;c=M(a);if(c.j.rotation!==mk){d=a.g.getBoundingClientRect();var e=Un(this.j);e[0]-=d.left;e[1]-=d.top;this.l=a.cd(e);this.g&&(d=al(c),a.render(),In(c,d+b,this.l))}}
function Vca(a){if(2>this.j.length){a=M(a.map);bl(a,1,-1);if(this.g){var b=al(a),c=this.l,d=this.A;b=a.constrainRotation(b,0);In(a,b,c,d)}return!1}return!0}function Tca(a){return 2<=this.j.length?(a=a.map,this.l=null,this.o=void 0,this.g=!1,this.s=0,this.I||bl(M(a),1,1),!0):!1}jo.prototype.P=oi;function ko(a){Sn.call(this,{handleDownEvent:Wca,handleDragEvent:Xca,handleUpEvent:Yca});a=a?a:{};this.s=a.constrainResolution||!1;this.l=null;this.A=void 0!==a.duration?a.duration:400;this.g=void 0;this.o=1}G(ko,Sn);
function Xca(a){var b=1,c=this.j[0],d=this.j[1],e=c.clientX-d.clientX;c=c.clientY-d.clientY;e=Math.sqrt(e*e+c*c);void 0!==this.g&&(b=this.g/e);this.g=e;a=a.map;e=M(a);d=e.ab();var f=e.ge(),h=e.he();c=d*b;c>f?(b=f/d,c=f):c<h&&(b=h/d,c=h);1!=b&&(this.o=b);b=a.g.getBoundingClientRect();d=Un(this.j);d[0]-=b.left;d[1]-=b.top;this.l=a.cd(d);a.render();Kn(e,c,this.l)}
function Yca(a){if(2>this.j.length){a=M(a.map);bl(a,1,-1);var b=a.ab();if(this.s||b<a.he()||b>a.ge()){var c=this.l,d=this.A;b=a.constrainResolution(b,0,this.o-1);Kn(a,b,c,d)}return!1}return!0}function Wca(a){return 2<=this.j.length?(a=a.map,this.l=null,this.g=void 0,this.o=1,this.I||bl(M(a),1,1),!0):!1}ko.prototype.P=oi;function lo(a,b,c,d){Bh.call(this);this.extent=a;this.l=c;this.resolution=b;this.state=d}G(lo,Bh);lo.prototype.ia=function(){this.dispatchEvent("change")};lo.prototype.aa=function(){return this.extent};lo.prototype.ab=function(){return this.resolution};lo.prototype.getState=function(){return this.state};function mo(a,b,c,d,e){this.Jb=void 0!==e?e:null;lo.call(this,a,b,c,void 0!==e?0:2);this.o=d;this.g=null}G(mo,lo);mo.prototype.getError=function(){return this.g};mo.prototype.j=function(a){a?(this.g=a,this.state=3):this.state=2;this.ia()};mo.prototype.load=function(){0==this.state&&(this.state=1,this.ia(),this.Jb(this.j.bind(this)))};mo.prototype.Ua=function(){return this.o};function no(a,b,c,d,e){Ah.call(this,a);this.vectorContext=b;this.frameState=c;this.context=d;this.glContext=e}G(no,Ah);function oo(){}g=oo.prototype;g.Pt=function(){};g.kh=function(){};g.yb=function(){};g.Gf=function(){};g.jh=function(){};g.zl=function(){};g.Ng=function(){};g.tg=function(){};g.Og=function(){};g.Tf=function(){};g.Pg=function(){};g.Uf=function(){};g.Ze=function(){};g.Bc=function(){};g.Af=function(){};g.Ld=function(){};function po(a,b,c,d,e){this.l=a;this.A=b;this.o=c;this.P=d;this.hd=e;this.wa=this.g=this.j=this.Ca=this.ra=this.oa=null;this.bb=this.Ia=this.L=this.Z=this.pa=this.U=0;this.hb=!1;this.s=this.jb=0;this.nb=!1;this.Ea=0;this.Mb="";this.Nb=this.zb=0;this.gc=!1;this.I=this.Fc=0;this.ka=this.G=this.B=null;this.N=[];this.gd=aj()}G(po,oo);
function qo(a,b,c){if(a.wa){b=pi(b,0,c,2,a.P,a.N);c=a.l;var d=a.gd,e=c.globalAlpha;1!=a.L&&(c.globalAlpha=e*a.L);var f=a.jb;a.hb&&(f+=a.hd);var h;var k=0;for(h=b.length;k<h;k+=2){var l=b[k]-a.U,m=b[k+1]-a.pa;a.nb&&(l=Math.round(l),m=Math.round(m));if(0!==f||1!=a.s){var n=l+a.U,p=m+a.pa;jj(d,n,p,a.s,a.s,f,-n,-p);c.setTransform.apply(c,d)}c.drawImage(a.wa,a.Ia,a.bb,a.Ea,a.Z,l,m,a.Ea,a.Z)}0===f&&1==a.s||c.setTransform(1,0,0,1,0,0);1!=a.L&&(c.globalAlpha=e)}}
function ro(a,b,c,d){var e=0;if(a.ka&&""!==a.Mb){a.B&&so(a,a.B);a.G&&to(a,a.G);var f=a.ka,h=a.l,k=a.Ca,l=f.textAlign?f.textAlign:"center";k?(k.font!=f.font&&(k.font=h.font=f.font),k.textAlign!=l&&(k.textAlign=l),k.textBaseline!=f.textBaseline&&(k.textBaseline=h.textBaseline=f.textBaseline)):(h.font=f.font,h.textAlign=l,h.textBaseline=f.textBaseline,a.Ca={font:f.font,textAlign:l,textBaseline:f.textBaseline});b=pi(b,e,c,d,a.P,a.N);f=a.l;h=a.Fc;for(a.gc&&(h+=a.hd);e<c;e+=d){k=b[e]+a.zb;l=b[e+1]+a.Nb;
if(0!==h||1!=a.I){var m=jj(a.gd,k,l,a.I,a.I,h,-k,-l);f.setTransform.apply(f,m)}a.G&&f.strokeText(a.Mb,k,l);a.B&&f.fillText(a.Mb,k,l)}0===h&&1==a.I||f.setTransform(1,0,0,1,0,0)}}function uo(a,b,c,d,e,f){var h=a.l;a=pi(b,c,d,e,a.P,a.N);h.moveTo(a[0],a[1]);b=a.length;f&&(b-=2);for(c=2;c<b;c+=2)h.lineTo(a[c],a[c+1]);f&&h.closePath();return d}function vo(a,b,c,d,e){var f;var h=0;for(f=d.length;h<f;++h)c=uo(a,b,c,d[h],e,!0);return c}g=po.prototype;
g.Gf=function(a){if(li(this.o,a.aa())){if(this.j||this.g){this.j&&so(this,this.j);this.g&&to(this,this.g);var b=(b=a.flatCoordinates)?pi(b,0,b.length,a.stride,this.P,this.N):null;var c=b[2]-b[0],d=b[3]-b[1];c=Math.sqrt(c*c+d*d);d=this.l;d.beginPath();d.arc(b[0],b[1],c,0,2*Math.PI);this.j&&d.fill();this.g&&d.stroke()}""!==this.Mb&&ro(this,Wk(a),2,2)}};g.yb=function(a){this.Bc(a.ob(),a.kb());this.Af(a.Ua());this.Ld(a.ub())};
g.kh=function(a){switch(a.T()){case "Point":this.Pg(a);break;case "LineString":this.Ng(a);break;case "Polygon":this.Uf(a);break;case "MultiPoint":this.Og(a);break;case "MultiLineString":this.tg(a);break;case "MultiPolygon":this.Tf(a);break;case "GeometryCollection":this.zl(a);break;case "Circle":this.Gf(a)}};g.jh=function(a,b){(a=(0,b.ef)(a))&&li(this.o,a.aa())&&(this.yb(b),this.kh(a))};g.zl=function(a){a=a.g;var b;var c=0;for(b=a.length;c<b;++c)this.kh(a[c])};
g.Pg=function(a){var b=a.flatCoordinates;a=a.stride;this.wa&&qo(this,b,b.length);""!==this.Mb&&ro(this,b,b.length,a)};g.Og=function(a){var b=a.flatCoordinates;a=a.stride;this.wa&&qo(this,b,b.length);""!==this.Mb&&ro(this,b,b.length,a)};g.Ng=function(a){if(li(this.o,a.aa())){if(this.g){to(this,this.g);var b=this.l,c=a.flatCoordinates;b.beginPath();uo(this,c,0,c.length,a.stride,!1);b.stroke()}""!==this.Mb&&(a=wo(a),ro(this,a,2,2))}};
g.tg=function(a){var b=a.aa();if(li(this.o,b)){if(this.g){to(this,this.g);b=this.l;var c=a.flatCoordinates,d=0,e=a.Fd(),f=a.stride;b.beginPath();var h;var k=0;for(h=e.length;k<h;++k)d=uo(this,c,d,e[k],f,!1);b.stroke()}""!==this.Mb&&(a=xo(a),ro(this,a,a.length,2))}};
g.Uf=function(a){if(li(this.o,a.aa())){if(this.g||this.j){this.j&&so(this,this.j);this.g&&to(this,this.g);var b=this.l;b.beginPath();vo(this,a.Gd(),0,a.Fd(),a.stride);this.j&&b.fill();this.g&&b.stroke()}""!==this.Mb&&(a=Tk(a),ro(this,a,2,2))}};
g.Tf=function(a){if(li(this.o,a.aa())){if(this.g||this.j){this.j&&so(this,this.j);this.g&&to(this,this.g);var b=this.l,c=a.Gd(),d=0,e=a.Gc,f=a.stride,h;b.beginPath();var k=0;for(h=e.length;k<h;++k)d=vo(this,c,d,e[k],f);this.j&&b.fill();this.g&&b.stroke()}""!==this.Mb&&(a=yo(a),ro(this,a,a.length,2))}};function so(a,b){var c=a.l,d=a.oa;d?d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle):(c.fillStyle=b.fillStyle,a.oa={fillStyle:b.fillStyle})}
function to(a,b){var c=a.l,d=a.ra;d?(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),Cj&&(jk(d.lineDash,b.lineDash)||c.setLineDash(d.lineDash=b.lineDash),d.lineDashOffset!=b.lineDashOffset&&(d.lineDashOffset=c.lineDashOffset=b.lineDashOffset)),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=
b.strokeStyle)):(c.lineCap=b.lineCap,Cj&&(c.setLineDash(b.lineDash),c.lineDashOffset=b.lineDashOffset),c.lineJoin=b.lineJoin,c.lineWidth=b.lineWidth,c.miterLimit=b.miterLimit,c.strokeStyle=b.strokeStyle,a.ra={lineCap:b.lineCap,lineDash:b.lineDash,lineDashOffset:b.lineDashOffset,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}
g.Bc=function(a,b){a?(a=a.La(),this.j={fillStyle:pj(a?a:Kj)}):this.j=null;if(b){a=b.La();var c=b.s,d=b.j,e=b.o,f=b.A,h=b.g;b=b.B;this.g={lineCap:void 0!==c?c:"round",lineDash:d?d:Lj,lineDashOffset:e?e:0,lineJoin:void 0!==f?f:"round",lineWidth:this.A*(void 0!==h?h:1),miterLimit:void 0!==b?b:10,strokeStyle:pj(a?a:Mj)}}else this.g=null};
g.Af=function(a){if(a){var b=a.ri(),c=a.Ua(1),d=a.hk(),e=a.tf();this.U=b[0];this.pa=b[1];this.Z=e[1];this.wa=c;this.L=a.Xb();this.Ia=d[0];this.bb=d[1];this.hb=a.I;this.jb=a.o;this.s=a.j()*this.A;this.nb=a.N;this.Ea=e[0]}else this.wa=null};
g.Ld=function(a){if(a){var b=a.ob();b?(b=b.La(),this.B={fillStyle:pj(b?b:Kj)}):this.B=null;var c=a.kb();if(c){b=c.La();var d=c.s,e=c.j,f=c.o,h=c.A,k=c.g;c=c.B;this.G={lineCap:void 0!==d?d:"round",lineDash:e?e:Lj,lineDashOffset:f?f:0,lineJoin:void 0!==h?h:"round",lineWidth:void 0!==k?k:1,miterLimit:void 0!==c?c:10,strokeStyle:pj(b?b:Mj)}}else this.G=null;b=a.Ge();d=a.Vf;e=a.o;f=a.s;h=a.A;k=a.j;c=a.ub();var l=a.g;a=a.l;this.ka={font:void 0!==b?b:"10px sans-serif",textAlign:void 0!==l?l:"center",textBaseline:void 0!==
a?a:"middle"};this.Mb=void 0!==c?c:"";this.zb=void 0!==d?this.A*d:0;this.Nb=void 0!==e?this.A*e:0;this.gc=void 0!==f?f:!1;this.Fc=void 0!==h?h:0;this.I=this.A*(void 0!==k?k:1)}else this.Mb=""};function zo(a){Ch.call(this);this.ra=a}G(zo,Ch);zo.prototype.sc=lh;zo.prototype.A=function(a,b,c){return function(d,e){return Ao(a,b,d,e,function(a){c[d]||(c[d]={});c[d][a.fc.toString()]=a})}};zo.prototype.W=function(){return this.ra};zo.prototype.oa=function(a){2===a.target.getState()&&Bo(this)};function Co(a,b){var c=b.getState();2!=c&&3!=c&&I(b,"change",a.oa,a);0==c&&(b.load(),c=b.getState());return 2==c}function Bo(a){var b=a.W();b.Hb()&&"ready"==b.Uo()&&a.ia()}
function Do(a,b){b.qg()&&(b=function(a,b,e){b=H(a).toString();b in e.usedTiles&&a.ji(e.viewState.projection,e.usedTiles[b])}.bind(null,b),a.postRenderFunctions.push(b))}function Eo(a,b){b=b.qF;void 0!==b&&("string"===typeof b?a.logos[b]="":b&&(Rh("string"==typeof b.href,44),Rh("string"==typeof b.src,45),a.logos[b.src]=b.href))}function Fo(a,b,c,d){b=H(b).toString();c=c.toString();b in a?c in a[b]?a[b][c].extend(d):a[b][c]=d:(a[b]={},a[b][c]=d)}
function Go(a,b,c,d,e,f,h,k,l,m){var n=H(b).toString();n in a.wantedTiles||(a.wantedTiles[n]={});var p=a.wantedTiles[n];a=a.tileQueue;var r,u,v;for(v=c.minZoom;v<=h;++v){var x=Zl(c,f,v,x);var B=c.ab(v);for(r=x.minX;r<=x.maxX;++r)for(u=x.minY;u<=x.maxY;++u)if(h-v<=k){var F=Ho(b,v,r,u,d,e);0==F.getState()&&(p[F.getKey()]=!0,F.getKey()in a.j||a.s([F,n,dm(c,F.fc),B]));void 0!==l&&l.call(m,F)}else b.vA(v,r,u,e)}};function Io(a){zo.call(this,a);this.pa=aj()}G(Io,zo);function Jo(a,b,c){var d=b.pixelRatio,e=b.size[0]*d,f=b.size[1]*d,h=b.viewState.rotation,k=[c[0],c[3]],l=[c[2],c[3]],m=[c[2],c[1]];c=[c[0],c[1]];fj(b.coordinateToPixelTransform,k);fj(b.coordinateToPixelTransform,l);fj(b.coordinateToPixelTransform,m);fj(b.coordinateToPixelTransform,c);a.save();Tj(a,-h,e/2,f/2);a.beginPath();a.moveTo(k[0]*d,k[1]*d);a.lineTo(l[0]*d,l[1]*d);a.lineTo(m[0]*d,m[1]*d);a.lineTo(c[0]*d,c[1]*d);a.clip();Tj(a,h,e/2,f/2)}
function Ko(a,b,c,d,e){var f=a.W();if(f.Sd(b)){var h=d.size[0]*d.pixelRatio,k=d.size[1]*d.pixelRatio,l=d.viewState.rotation;Tj(c,-l,h/2,k/2);a=void 0!==e?e:Lo(a,d,0);f.dispatchEvent(new no(b,new po(c,d.pixelRatio,d.extent,a,d.viewState.rotation),d,c,null));Tj(c,l,h/2,k/2)}}Io.prototype.bn=function(a,b,c,d){Ko(this,"postcompose",a,b,d)};function Lo(a,b,c){var d=b.viewState,e=b.pixelRatio,f=e/d.resolution;return jj(a.pa,e*b.size[0]/2,e*b.size[1]/2,f,-f,-d.rotation,-d.center[0]+c,-d.center[1])};function Mo(a){Io.call(this,a);this.o=aj()}G(Mo,Io);Mo.prototype.Wp=function(a,b,c){Ko(this,"precompose",c,a,void 0);var d=this.Ua();if(d){var e=b.extent,f=void 0!==e&&!Yh(e,a.extent)&&li(e,a.extent);f&&Jo(c,a,e);e=this.s();var h=c.globalAlpha;c.globalAlpha=b.opacity;c.drawImage(d,0,0,+d.width,+d.height,Math.round(e[4]),Math.round(e[5]),Math.round(d.width*e[0]),Math.round(d.height*e[3]));c.globalAlpha=h;f&&c.restore()}this.bn(c,a,b)};
Mo.prototype.sc=function(a,b,c,d,e){var f=this.W();return f.O().sc(a,b.viewState.resolution,b.viewState.rotation,c,b.skippedFeatureUids,function(a){return d.call(e,a,f)})};function No(a){Mo.call(this,a);this.wa=null;this.j=aj();this.B=[];this.g=null}G(No,Mo);No.handles=function(a,b){return"canvas"===a&&("IMAGE"===b.T()||"VECTOR"===b.T()&&"image"===b.Hk)};No.create=function(a,b){var c=new No(b);if("VECTOR"===b.T())for(var d=0,e=on.length;d<e;++d){var f=on[d];f!==No&&f.handles("canvas",b)&&(f=f.create(a,b),c.g=f)}return c};No.prototype.Ua=function(){return this.wa?this.wa.Ua():null};No.prototype.s=function(){return this.j};
No.prototype.Ni=function(a,b){var c=a.pixelRatio,d=a.size,e=a.viewState,f=e.center,h=e.resolution,k=this.W().O(),l=a.viewHints,m=a.extent;void 0!==b.extent&&(m=ki(m,b.extent));if(!l[0]&&!l[1]&&!fi(m))if(l=e.projection,e=this.g){l=e.context;var n=nh({},a,{size:[gi(m)/h,hi(m)/h],viewState:nh({},a.viewState,{rotation:0})}),p=Object.keys(n.skippedFeatureUids).sort();!e.Ni(n,b)||!e.o&&jk(p,this.B)||(l.canvas.width=n.size[0]*c,l.canvas.height=n.size[1]*c,e.Wp(n,b,l),this.wa=new mo(m,h,c,l.canvas),this.B=
p)}else(e=k.Ua(m,h,c,l))&&Co(this,e)&&(this.wa=e);this.wa&&(e=this.wa,m=e.aa(),b=e.ab(),e=e.l,l=c*b/(h*e),m=jj(this.j,c*d[0]/2,c*d[1]/2,l,l,0,e*(m[0]-f[0])/b,e*(f[1]-m[3])/b),jj(this.o,c*d[0]/2-m[4],c*d[1]/2-m[5],c/h,-c/h,0,-f[0],-f[1]),Eo(a,k),this.l=b*c/e);return!!this.wa};No.prototype.sc=function(a,b,c,d,e){return this.g?this.g.sc(a,b,c,d,e):Mo.prototype.sc.call(this,a,b,c,d,e)};function Oo(){this.g={};this.j=0;this.l=32}Oo.prototype.clear=function(){this.g={};this.j=0};function Po(a){if(a.j>a.l){var b=0,c;for(c in a.g){var d=a.g[c];0!==(b++&3)||d.Sd()||(delete a.g[c],--a.j)}}}Oo.prototype.get=function(a,b,c){a=b+":"+a+":"+(c?mj(c):"null");return a in this.g?this.g[a]:null};Oo.prototype.set=function(a,b,c,d){this.g[b+":"+a+":"+(c?mj(c):"null")]=d;++this.j};Oo.prototype.setSize=function(a){this.l=a;Po(this)};var Qo=new Oo;function Ro(a,b){this.ha=b;this.o={};this.G={}}G(Ro,zh);function So(a){var b=a.viewState,c=a.coordinateToPixelTransform,d=a.pixelToCoordinateTransform;jj(c,a.size[0]/2,a.size[1]/2,1/b.resolution,-1/b.resolution,-b.rotation,-b.center[0],-b.center[1]);a=ej(d,c);b=a[0]*a[3]-a[1]*a[2];Rh(0!==b,32);c=a[0];d=a[1];var e=a[2],f=a[3],h=a[4],k=a[5];a[0]=f/b;a[1]=-d/b;a[2]=-e/b;a[3]=c/b;a[4]=(e*k-f*h)/b;a[5]=-(c*k-d*h)/b}function To(){Po(Qo)}g=Ro.prototype;
g.sc=function(a,b,c,d,e,f,h){function k(a,c){var f=H(a).toString(),h=b.layerStates[H(c)].managed;if(!(f in b.skippedFeatureUids)||h)return d.call(e,a,h?c:null)}var l,m=b.viewState,n=m.resolution,p=m.projection;m=a;if(p.g){p=p.aa();var r=gi(p),u=a[0];if(u<p[0]||u>p[2])m=[u+r*Math.ceil((p[0]-u)/r),a[1]]}p=b.layerStatesArray;for(r=p.length-1;0<=r;--r){var v=p[r];u=v.layer;if(tl(v,n)&&f.call(h,u)&&(v=Uo(this,u),u.O()&&(l=v.sc(u.O().Tn?m:a,b,c,k,e)),l))return l}};
function Uo(a,b){var c=H(b).toString();if(c in a.o)return a.o[c];for(var d,e=a.T(),f=0,h=on.length;f<h;++f){var k=on[f];if(k.handles(e,b)){d=k.create(a,b);break}}if(d)a.o[c]=d,a.G[c]=I(d,"change",a.eE,a);else throw Error("Unable to create renderer for layer: "+b.T());return d}g.Y=function(){return this.ha};g.eE=function(){this.ha.render()};function wn(a,b){var c=a.o[b];delete a.o[b];rh(a.G[b]);delete a.G[b];return c}g.Mi=lh;g.zM=function(a,b){for(var c in this.o)b&&c in b.layerStates||wn(this,c).dispose()};
function Vo(a,b){for(var c in a.o)if(!(c in b.layerStates)){b.postRenderFunctions.push(a.zM.bind(a));break}}function Wo(a,b){return a.zIndex-b.zIndex};function Xo(a,b){Ro.call(this,a,b);this.l=qj();this.g=this.l.canvas;this.g.style.width="100%";this.g.style.height="100%";this.g.style.display="block";this.g.className="ol-unselectable";a.insertBefore(this.g,a.childNodes[0]||null);this.j=!0;this.s=aj()}G(Xo,Ro);Xo.handles=function(a){return"canvas"===a};Xo.create=function(a,b){return new Xo(a,b)};
function Yo(a,b,c){var d=a.Y(),e=a.l;if(d.Sd(b)){var f=c.extent,h=c.pixelRatio,k=c.viewState.rotation,l=c.viewState,m=c.pixelRatio/l.resolution;a=jj(a.s,a.g.width/2,a.g.height/2,m,-m,-l.rotation,-l.center[0],-l.center[1]);d.dispatchEvent(new no(b,new po(e,h,f,a,k),c,e,null))}}Xo.prototype.T=function(){return"canvas"};
Xo.prototype.Mi=function(a){if(a){var b=this.l,c=a.pixelRatio,d=Math.round(a.size[0]*c),e=Math.round(a.size[1]*c);this.g.width!=d||this.g.height!=e?(this.g.width=d,this.g.height=e):b.clearRect(0,0,d,e);c=a.viewState.rotation;So(a);Yo(this,"precompose",a);var f=a.layerStatesArray;kk(f,Wo);c&&(b.save(),Tj(b,c,d/2,e/2));d=a.viewState.resolution;var h;e=0;for(h=f.length;e<h;++e){var k=f[e];var l=k.layer;l=Uo(this,l);tl(k,d)&&"ready"==k.sourceState&&l.Ni(a,k)&&l.Wp(a,k,b)}c&&b.restore();Yo(this,"postcompose",
a);this.j||(this.g.style.display="",this.j=!0);Vo(this,a);a.postRenderFunctions.push(To)}else this.j&&(this.g.style.display="none",this.j=!1)};function Zo(a){Mo.call(this,a);this.context=null===this.context?null:qj();this.g=null;this.j=[];this.P=Th();this.Ea=new Ql(0,0,0,0);this.B=aj();this.U=0}G(Zo,Mo);Zo.handles=function(a,b){return"canvas"===a&&"TILE"===b.T()};Zo.create=function(a,b){return new Zo(b)};function $o(a,b){b=b.getState();a=vl(a.W());return 2==b||4==b||3==b&&!a}
Zo.prototype.Ni=function(a,b){var c=a.pixelRatio,d=a.size,e=a.viewState,f=e.projection,h=e.resolution;e=e.center;var k=this.W(),l=k.O(),m=l.Yb,n=l.Rd(f),p=fm(n,h,this.U),r=n.ab(p),u=Math.round(h/r)||1,v=a.extent;void 0!==b.extent&&(v=ki(v,b.extent));if(fi(v))return!1;var x=Zl(n,v,p),B=oca(n,p,x),F=l.Ai(c),D={};D[p]={};var S=this.A(l,f,D),ia=this.P,ea=this.Ea,ca=!1,Y,ja;for(Y=x.minX;Y<=x.maxX;++Y)for(ja=x.minY;ja<=x.maxY;++ja){var Ga=Ho(l,p,Y,ja,c,f);3==Ga.getState()&&(vl(k)?0<k.get("preload")&&(ca=
!0):Ga.Ga(2));$o(this,Ga)||(Ga=ap(Ga));if($o(this,Ga)){var Oa=H(this);if(2==Ga.getState()){D[p][Ga.fc.toString()]=Ga;var tc=Ga.l?-1!==Ga.B[Oa]:!1;ca||!tc&&-1!==this.j.indexOf(Ga)||(ca=!0)}if(1===bp(Ga,Oa,a.time))continue}Oa=am(n,Ga.fc,ea,ia);tc=!1;Oa&&(tc=S(p+1,Oa));tc||Xl(n,Ga.fc,S,ea,ia)}Ga=r*c/F*u;Y=a.viewHints;Y=Y[0]||Y[1];if(!(this.l&&16<Date.now()-a.time&&Y||!ca&&this.g&&Yh(this.g,v)&&this.renderedRevision==m&&u==this.L&&(Y||Ga==this.l))){if(Ga=this.context)ja=cp(l,p,c,f),Y=Math.round((x.maxX-
x.minX+1)*ja[0]/u),ja=Math.round((x.maxY-x.minY+1)*ja[1]/u),ca=Ga.canvas,ca.width!=Y||ca.height!=ja?(this.L=u,ca.width=Y,ca.height=ja):(this.g&&!bi(B,this.g)&&Ga.clearRect(0,0,Y,ja),u=this.L);this.j.length=0;ca=Object.keys(D).map(Number);ca.sort(function(a,b){return a===p?1:b===p?-1:a>b?1:a<b?-1:0});Oa=0;for(tc=ca.length;Oa<tc;++Oa){ea=ca[Oa];S=cp(l,ea,c,f);Ga=n.ab(ea);var Ta=Ga/r;var ka=F*l.Ko(f);var Vb=D[ea];for(var Qm in Vb){Ga=Vb[Qm];ja=Yl(n,Ga.fc,ia);Y=(ja[0]-B[0])/r*F/u;ja=(B[3]-ja[3])/r*F/
u;var fs=S[0]*Ta/u;var Ih=S[1]*Ta/u;this.zo(Ga,a,b,Y,ja,fs,Ih,ka,p===ea);this.j.push(Ga)}}this.renderedRevision=m;this.l=r*c/F*u;this.g=B}b=this.l/h;b=jj(this.B,c*d[0]/2,c*d[1]/2,b,b,0,(this.g[0]-e[0])/this.l*c,(e[1]-this.g[3])/this.l*c);jj(this.o,c*d[0]/2-b[4],c*d[1]/2-b[5],c/h,-c/h,0,-e[0],-e[1]);Fo(a.usedTiles,l,p,x);Go(a,l,n,c,f,v,p,k.get("preload"));Do(a,l);Eo(a,l);return 0<this.j.length};
Zo.prototype.zo=function(a,b,c,d,e,f,h,k,l){if(c=a.Ua(this.W())){var m=H(this),n=l?bp(a,m,b.time):1;1!==n||this.W().O().Rj(b.viewState.projection)||this.context.clearRect(d,e,f,h);var p=n!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=n);this.context.drawImage(c,k,k,c.width-2*k,c.height-2*k,d,e,f,h);p&&this.context.restore();1!==n?b.animate=!0:l&&a.l&&(a.B[m]=-1)}};Zo.prototype.Ua=function(){var a=this.context;return a?a.canvas:null};Zo.prototype.s=function(){return this.B};function dp(){};function ep(a,b,c,d){var e=a[b],f=a[b+1],h=0;for(b+=d;b<c;b+=d){var k=a[b],l=a[b+1];h+=Math.sqrt((k-e)*(k-e)+(l-f)*(l-f));e=k;f=l}return h};var fp="Polygon Circle LineString Image Text Default".split(" "),gp={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};function hp(a,b,c,d,e,f){this.nb=f;this.Fc=Th();this.hd=a;this.gc=b;this.overlaps=e;this.pixelRatio=d;this.Ca=0;this.resolution=c;this.s=this.oa=this.ka=null;this.j=[];this.coordinates=[];this.Nb={};this.hb=aj();this.g=[];this.Ea=null;this.state={};this.bb=0;this.gd=aj()}G(hp,oo);function ip(a,b,c,d,e,f,h,k){b.beginPath();b.moveTo.apply(b,c);b.lineTo.apply(b,d);b.lineTo.apply(b,e);b.lineTo.apply(b,f);b.lineTo.apply(b,c);h&&(a.ra=h[2],a.tc(b));k&&(jp(b,k),b.stroke())}
function kp(a,b,c,d,e,f,h,k,l,m,n,p,r,u,v,x,B,F,D){var S=F||D,ia=a.gd;f*=u;h*=u;c-=f;d-=h;v&&(c=Math.round(c),d=Math.round(d));v=x+n>e.width?e.width-n:x;l=l+p>e.height?e.height-p:l;x=a.Fc;var ea=B[3]+v*u+B[1],ca=B[0]+l*u+B[2],Y=c-B[3],ja=d-B[0];if(S||0!==r){var Ga=[Y,ja];var Oa=[Y+ea,ja];var tc=[Y+ea,ja+ca];var Ta=[Y,ja+ca]}B=null;0!==r?(f=c+f,h=d+h,B=jj(ia,f,h,1,1,r,-f,-h),$h(x),Uh(x,fj(ia,Ga)),Uh(x,fj(ia,Oa)),Uh(x,fj(ia,tc)),Uh(x,fj(ia,Ta))):Zh(Y,ja,Y+ea,ja+ca,x);r=b.canvas;r=x[0]<=r.width&&0<=
x[2]&&x[1]<=r.height&&0<=x[3];if(k){if(r||1!=k[4])ci(k,x),(a=r?[b,B?B.slice(0):null,m,e,n,p,v,l,c,d,u]:null)&&S&&a.push(F,D,Ga,Oa,tc,Ta),k.push(a)}else r&&(S&&ip(a,b,Ga,Oa,tc,Ta,F,D),Vj(b,B,m,e,n,p,v,l,c,d,u))}function Zca(a,b){var c=a.pixelRatio;return 1==c?b:b.map(function(a){return a*c})}
function lp(a,b,c,d,e,f,h){var k=a.coordinates.length,l=op(a);h&&(c+=e);h=[b[c],b[c+1]];var m=[NaN,NaN],n=!0,p;for(p=c+e;p<d;p+=e){m[0]=b[p];m[1]=b[p+1];var r=l[1];var u=l[2],v=l[3],x=m[0],B=m[1],F=0;x<l[0]?F|=16:x>u&&(F|=4);B<r?F|=8:B>v&&(F|=2);0===F&&(F=1);r=F;r!==D?(n&&(a.coordinates[k++]=h[0],a.coordinates[k++]=h[1]),a.coordinates[k++]=m[0],a.coordinates[k++]=m[1],n=!1):1===r?(a.coordinates[k++]=m[0],a.coordinates[k++]=m[1],n=!1):n=!0;h[0]=m[0];h[1]=m[1];var D=r}if(f&&n||p===c+e)a.coordinates[k++]=
h[0],a.coordinates[k++]=h[1];return k}function pp(a,b,c,d,e,f){for(var h=0,k=d.length;h<k;++h){var l=d[h];c=lp(a,b,c,l,e,!1,!1);f.push(c);c=l}return c}g=hp.prototype;
g.Pt=function(a,b,c){qp(this,b);var d=a.T(),e=a.stride,f=this.coordinates.length,h;if("MultiPolygon"==d){d=a.Gd();var k=[];for(var l=a.Gc,m=h=0,n=l.length;m<n;++m){var p=[];h=pp(this,d,h,l[m],e,p);k.push(p)}this.j.push([4,f,k,a,c,Fk])}else"Polygon"==d||"MultiLineString"==d?(k=[],d="Polygon"==d?a.Gd():a.flatCoordinates,pp(this,d,0,a.Fd(),e,k),this.j.push([4,f,k,a,c,Ek])):"LineString"==d||"MultiPoint"==d?(d=a.flatCoordinates,e=lp(this,d,0,d.length,e,!1,!1),this.j.push([4,f,e,a,c,Dk])):"Point"==d&&(d=
a.flatCoordinates,this.coordinates.push(d[0],d[1]),e=this.coordinates.length,this.j.push([4,f,e,a,c]));rp(this,b)};function qp(a,b){a.ka=[0,b,0];a.j.push(a.ka);a.oa=[0,b,0];a.g.push(a.oa)}g.tc=function(a){if(this.ra){var b=fj(this.hb,this.ra.slice());a.translate(b[0],b[1]);a.rotate(this.bb)}a.fill();this.ra&&a.setTransform.apply(a,Uj)};function jp(a,b){a.strokeStyle=b[1];a.lineWidth=b[2];a.lineCap=b[3];a.lineJoin=b[4];a.miterLimit=b[5];Cj&&(a.lineDashOffset=b[7],a.setLineDash(b[6]))}
function sp(a,b,c){if(b&&5<b.length){var d=b[4];if(1==d||d==b.length-5){c={minX:b[0],minY:b[1],maxX:b[2],maxY:b[3],value:c};if(!a.nb.kC(c))for(a.nb.pf(c),c=5,d=b.length;c<d;++c){var e=b[c];e&&(11<e.length&&ip(a,e[0],e[13],e[14],e[15],e[16],e[11],e[12]),Vj.apply(void 0,e))}b.length=5;$h(b)}}}
function tp(a,b,c,d,e,f,h){if(a.Ea&&jk(c,a.hb))var k=a.Ea;else a.Ea||(a.Ea=[]),k=pi(a.coordinates,0,a.coordinates.length,2,c,a.Ea),ej(a.hb,c);for(var l=!qh(d),m=0,n=e.length,p=0,r,u,v,x,B,F,D,S,ia,ea=0,ca=0,Y=null,ja=null,Ga=a.Nb,Oa=a.bb,tc={context:b,pixelRatio:a.pixelRatio,resolution:a.resolution,rotation:Oa},Ta=a.j!=e||a.overlaps?0:200;m<n;){var ka=e[m];switch(ka[0]){case 0:var Vb=ka[1];l&&d[H(Vb).toString()]||!Vb.X()?m=ka[2]:void 0===h||li(h,Vb.X().aa())?++m:m=ka[2]+1;break;case 1:ea>Ta&&(a.tc(b),
ea=0);ca>Ta&&(b.stroke(),ca=0);ea||ca||(b.beginPath(),x=B=NaN);++m;break;case 2:p=ka[1];var Qm=k[p],fs=k[p+1],Ih=k[p+2]-Qm,dl=k[p+3]-fs,LA=Math.sqrt(Ih*Ih+dl*dl);b.moveTo(Qm+LA,fs);b.arc(Qm,fs,LA,0,2*Math.PI,!0);++m;break;case 3:b.closePath();++m;break;case 4:p=ka[1];r=ka[2];var Yv=ka[4],Zv=6==ka.length?ka[5]:void 0;tc.geometry=ka[3];tc.feature=Vb;m in Ga||(Ga[m]=[]);var hs=Ga[m];Zv?Zv(k,p,r,2,hs):(hs[0]=k[p],hs[1]=k[p+1],hs.length=2);Yv(hs,tc);++m;break;case 6:p=ka[1];r=ka[2];ia=ka[3];u=ka[4];v=
ka[5];S=f?null:ka[6];var mp=ka[7],toa=ka[8],uoa=ka[9],voa=ka[10],woa=ka[11],c4=ka[12],xoa=ka[13],yoa=ka[14],zoa=ka[15];if(16<ka.length){var d4=ka[16];var e4=ka[17];var f4=ka[18]}else d4=Nj,e4=f4=!1;for(woa&&(c4+=Oa);p<r;p+=2)kp(a,b,k[p],k[p+1],ia,u,v,S,mp,toa,uoa,voa,c4,xoa,yoa,zoa,d4,e4?Y:null,f4?ja:null);sp(a,S,Vb);++m;break;case 5:var g4=ka[1],h4=ka[2],zQ=ka[3];S=f?null:ka[4];var Aoa=ka[5],i4=ka[6],Boa=ka[7],j4=ka[8],k4=ka[9],l4=ka[10],m4=ka[11],n4=ka[12],AQ=ka[13],o4=ka[14],p4=ep(k,g4,h4,2),q4=
j4(n4);if(Aoa||q4<=p4){a:{var xH=void 0,r4=void 0,is=void 0,np=k,el=g4,s4=h4,t4=n4,Coa=j4,u4=(p4-q4)*gp[a.I[AQ].textAlign],Doa=Boa,BQ=[],MA=np[el]>np[s4-2],v4=t4.length,$v=np[el],aw=np[el+1];el+=2;for(var bw=np[el],cw=np[el+1],CQ=0,yH=Math.sqrt(Math.pow(bw-$v,2)+Math.pow(cw-aw,2)),js="",DQ=0,zH=0;zH<v4;++zH){r4=MA?v4-zH-1:zH;var EQ=t4.charAt(r4);js=MA?EQ+js:js+EQ;var dw=Coa(js)-DQ;DQ+=dw;for(var w4=u4+dw/2;el<s4-2&&CQ+yH<w4;)$v=bw,aw=cw,el+=2,bw=np[el],cw=np[el+1],CQ+=yH,yH=Math.sqrt(Math.pow(bw-
$v,2)+Math.pow(cw-aw,2));var Eoa=w4-CQ,ew=Math.atan2(cw-aw,bw-$v);MA&&(ew+=0<ew?-Math.PI:Math.PI);if(void 0!==xH){var AH=ew-xH;AH+=AH>Math.PI?-2*Math.PI:AH<-Math.PI?2*Math.PI:0;if(Math.abs(AH)>Doa){var fw=null;break a}}var x4=Eoa/yH,y4=$v+x4*(bw-$v),z4=aw+x4*(cw-aw);xH==ew?(MA&&(is[0]=y4,is[1]=z4,is[2]=dw/2),is[4]=js):(js=EQ,DQ=dw,is=[y4,z4,dw/2,ew,js],MA?BQ.unshift(is):BQ.push(is),xH=ew);u4+=dw}fw=BQ}if(fw){var BH;if(l4){var ks=0;for(BH=fw.length;ks<BH;++ks){var Bj=fw[ks];var FQ=Bj[4];var Sm=a.Ua(FQ,
AQ,"",l4);u=Bj[2]+m4;v=zQ*Sm.height+2*(.5-zQ)*m4-k4;kp(a,b,Bj[0],Bj[1],Sm,u,v,S,Sm.height,1,0,0,Bj[3],o4,!1,Sm.width,Nj,null,null)}}if(i4)for(ks=0,BH=fw.length;ks<BH;++ks)Bj=fw[ks],FQ=Bj[4],Sm=a.Ua(FQ,AQ,i4,""),u=Bj[2],v=zQ*Sm.height-k4,kp(a,b,Bj[0],Bj[1],Sm,u,v,S,Sm.height,1,0,0,Bj[3],o4,!1,Sm.width,Nj,null,null)}}sp(a,S,Vb);++m;break;case 7:if(void 0!==f){Vb=ka[1];var A4=f(Vb);if(A4)return A4}++m;break;case 8:Ta?ea++:a.tc(b);++m;break;case 9:p=ka[1];r=ka[2];var NA=k[p];var OA=k[p+1];F=NA+.5|0;D=
OA+.5|0;if(F!==x||D!==B)b.moveTo(NA,OA),x=F,B=D;for(p+=2;p<r;p+=2)if(NA=k[p],OA=k[p+1],F=NA+.5|0,D=OA+.5|0,p==r-2||F!==x||D!==B)b.lineTo(NA,OA),x=F,B=D;++m;break;case 10:Y=ka;a.ra=ka[2];ea&&(a.tc(b),ea=0,ca&&(b.stroke(),ca=0));b.fillStyle=ka[1];++m;break;case 11:ja=ka;ca&&(b.stroke(),ca=0);jp(b,ka);++m;break;case 12:Ta?ca++:b.stroke();++m;break;default:++m}}ea&&a.tc(b);ca&&b.stroke()}g.vc=function(a,b,c,d){this.bb=c;tp(this,a,b,d,this.j,void 0,void 0)};
function up(a){var b=a.g;b.reverse();var c,d=b.length,e=-1;for(c=0;c<d;++c){var f=b[c];var h=f[0];if(7==h)e=c;else if(0==h){f[2]=c;f=a.g;for(h=c;e<h;){var k=f[e];f[e]=f[h];f[h]=k;++e;--h}e=-1}}}
g.Bc=function(a,b){var c=this.state;a?(a=a.La(),c.fillStyle=pj(a?a:Kj)):c.fillStyle=void 0;b?(a=b.La(),c.strokeStyle=pj(a?a:Mj),a=b.s,c.lineCap=void 0!==a?a:"round",a=b.j,c.lineDash=a?a.slice():Lj,a=b.o,c.lineDashOffset=a?a:0,a=b.A,c.lineJoin=void 0!==a?a:"round",a=b.g,c.lineWidth=void 0!==a?a:1,b=b.B,c.miterLimit=void 0!==b?b:10,c.lineWidth>this.Ca&&(this.Ca=c.lineWidth,this.s=null)):(c.strokeStyle=void 0,c.lineCap=void 0,c.lineDash=null,c.lineDashOffset=void 0,c.lineJoin=void 0,c.lineWidth=void 0,
c.miterLimit=void 0)};g.nt=function(a,b){var c=a.fillStyle;a=[10,c];"string"!==typeof c&&(b=b.aa(),a.push([b[0],b[3]]));this.j.push(a)};g.ai=function(a){this.j.push([11,a.strokeStyle,a.lineWidth*this.pixelRatio,a.lineCap,a.lineJoin,a.miterLimit,Zca(this,a.lineDash),a.lineDashOffset*this.pixelRatio])};function vp(a,b,c,d){var e=b.fillStyle;if("string"!==typeof e||b.currentFillStyle!=e)c.call(a,b,d),b.currentFillStyle=e}
function wp(a,b,c){var d=b.strokeStyle,e=b.lineCap,f=b.lineDash,h=b.lineDashOffset,k=b.lineJoin,l=b.lineWidth,m=b.miterLimit;if(b.currentStrokeStyle!=d||b.currentLineCap!=e||f!=b.currentLineDash&&!jk(b.currentLineDash,f)||b.currentLineDashOffset!=h||b.currentLineJoin!=k||b.currentLineWidth!=l||b.currentMiterLimit!=m)c.call(a,b),b.currentStrokeStyle=d,b.currentLineCap=e,b.currentLineDash=f,b.currentLineDashOffset=h,b.currentLineJoin=k,b.currentLineWidth=l,b.currentMiterLimit=m}
function rp(a,b){a.ka[2]=a.j.length;a.ka=null;a.oa[2]=a.g.length;a.oa=null;b=[7,b];a.j.push(b);a.g.push(b)}g.finish=lh;function op(a){a.s||(a.s=Wh(a.gc),0<a.Ca&&Vh(a.s,a.resolution*(a.Ca+1)/2,a.s));return a.s};function xp(a,b,c,d,e,f){hp.call(this,a,b,c,d,e,f);this.wa=this.Ia=this.Z=null;this.P=this.N=this.L=this.I=this.G=this.pa=this.U=this.B=this.A=this.o=this.l=void 0}G(xp,hp);
xp.prototype.Pg=function(a,b){if(this.wa){qp(this,b);var c=a.flatCoordinates,d=this.coordinates.length;a=lp(this,c,0,c.length,a.stride,!1,!1);this.j.push([6,d,a,this.wa,this.l,this.o,this.Z,this.A,this.B,this.U,this.pa,this.G,this.I,this.L*this.pixelRatio,this.N,this.P]);this.g.push([6,d,a,this.Ia,this.l,this.o,this.Z,this.A,this.B,this.U,this.pa,this.G,this.I,this.L,this.N,this.P]);rp(this,b)}};
xp.prototype.Og=function(a,b){if(this.wa){qp(this,b);var c=a.flatCoordinates,d=this.coordinates.length;a=lp(this,c,0,c.length,a.stride,!1,!1);this.j.push([6,d,a,this.wa,this.l,this.o,this.Z,this.A,this.B,this.U,this.pa,this.G,this.I,this.L*this.pixelRatio,this.N,this.P]);this.g.push([6,d,a,this.Ia,this.l,this.o,this.Z,this.A,this.B,this.U,this.pa,this.G,this.I,this.L,this.N,this.P]);rp(this,b)}};
xp.prototype.finish=function(){up(this);this.o=this.l=void 0;this.wa=this.Ia=null;this.P=this.N=this.I=this.G=this.pa=this.U=this.B=this.L=this.A=void 0};xp.prototype.Af=function(a,b){var c=a.ri(),d=a.tf(),e=a.Zp(),f=a.Ua(1),h=a.hk();this.l=c[0];this.o=c[1];this.Z=b;this.Ia=e;this.wa=f;this.A=d[1];this.B=a.Xb();this.U=h[0];this.pa=h[1];this.G=a.I;this.I=a.o;this.L=a.j();this.N=a.N;this.P=d[0]};function yp(a,b,c,d,e,f){hp.call(this,a,b,c,d,e,f)}G(yp,hp);function zp(a,b,c,d,e){var f=a.coordinates.length;b=lp(a,b,c,d,e,!1,!1);f=[9,f,b];a.j.push(f);a.g.push(f);return d}yp.prototype.Ng=function(a,b){var c=this.state,d=c.lineWidth;void 0!==c.strokeStyle&&void 0!==d&&(wp(this,c,this.ai),qp(this,b),this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset],[1]),c=a.flatCoordinates,zp(this,c,0,c.length,a.stride),this.g.push([12]),rp(this,b))};
yp.prototype.tg=function(a,b){var c=this.state,d=c.lineWidth;if(void 0!==c.strokeStyle&&void 0!==d){wp(this,c,this.ai);qp(this,b);this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset],[1]);c=a.Fd();d=a.flatCoordinates;a=a.stride;var e=0,f;var h=0;for(f=c.length;h<f;++h)e=zp(this,d,e,c[h],a);this.g.push([12]);rp(this,b)}};
yp.prototype.finish=function(){var a=this.state;void 0!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&this.j.push([12]);up(this);this.state=null};yp.prototype.ai=function(a){void 0!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&(this.j.push([12]),a.lastStroke=this.coordinates.length);a.lastStroke=0;hp.prototype.ai.call(this,a);this.j.push([1])};function Ap(a,b,c,d,e,f){hp.call(this,a,b,c,d,e,f)}G(Ap,hp);function Bp(a,b,c,d,e){var f=a.state,h=void 0!==f.fillStyle;f=void 0!=f.strokeStyle;var k=d.length,l=[1];a.j.push(l);a.g.push(l);for(l=0;l<k;++l){var m=d[l],n=a.coordinates.length;c=lp(a,b,c,m,e,!0,!f);c=[9,n,c];a.j.push(c);a.g.push(c);f&&(c=[3],a.j.push(c),a.g.push(c));c=m}b=[8];a.g.push(b);h&&a.j.push(b);f&&(h=[12],a.j.push(h),a.g.push(h));return c}
Ap.prototype.Gf=function(a,b){var c=this.state,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Cp(this,a);qp(this,b);this.g.push([10,mj(Kj)]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);var e=a.flatCoordinates;d=this.coordinates.length;lp(this,e,0,e.length,a.stride,!1,!1);a=[1];d=[2,d];this.j.push(a,d);this.g.push(a,d);a=[8];this.g.push(a);void 0!==c.fillStyle&&this.j.push(a);void 0!==c.strokeStyle&&(c=[12],
this.j.push(c),this.g.push(c));rp(this,b)}};Ap.prototype.Uf=function(a,b){var c=this.state;Cp(this,a);qp(this,b);this.g.push([10,mj(Kj)]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.Fd();var d=a.Gd();Bp(this,d,0,c,a.stride);rp(this,b)};
Ap.prototype.Tf=function(a,b){var c=this.state,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Cp(this,a);qp(this,b);this.g.push([10,mj(Kj)]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.Gc;d=a.Gd();a=a.stride;var e=0,f;var h=0;for(f=c.length;h<f;++h)e=Bp(this,d,e,c[h],a);rp(this,b)}};
Ap.prototype.finish=function(){up(this);this.state=null;var a=this.hd;if(0!==a){var b=this.coordinates,c;var d=0;for(c=b.length;d<c;++d)b[d]=a*Math.round(b[d]/a)}};function Cp(a,b){var c=a.state;void 0!==c.fillStyle&&vp(a,c,a.nt,b);void 0!==c.strokeStyle&&wp(a,c,a.ai)};function Dp(a,b,c,d,e,f){hp.call(this,a,b,c,d,e,f);this.Mb="";this.G=this.U=0;this.pa=void 0;this.Z=0;this.o=null;this.N={};this.l=null;this.jb={};this.A={};this.I={};this.Ia=this.L=this.B="";for(this.zb={};Oj.qg();)Oj.pop()}G(Dp,hp);
Dp.prototype.Ze=function(a,b){var c=this.o,d=this.l,e=this.A;if(""!==this.Mb&&e&&(c||d)){c=this.coordinates.length;var f=a.T();d=null;var h=2,k=2;if("line"===e.placement){if(!li(op(this),a.aa()))return;d=a.flatCoordinates;k=a.stride;if("LineString"==f)var l=[d.length];else if("MultiLineString"==f)l=a.Fd();else if("Polygon"==f)l=a.Fd().slice(0,1);else if("MultiPolygon"==f)for(a=a.Gc,l=[],h=0,f=a.length;h<f;++h)l.push(a[h][0]);qp(this,b);a=e.textAlign;var m=0,n;f=0;for(var p=l.length;f<p;++f){if(void 0==
a){for(var r,u,v=void 0,x=void 0,B=h=u=r=void 0,F=n=m,D=0,S=0,ia=m;m<l[f];m+=k){var ea=d[m],ca=d[m+1];void 0!==u&&(u=ea-u,r=ca-r,h=Math.sqrt(u*u+r*r),void 0!==x&&(S+=B,v=Math.acos((x*u+v*r)/(B*h)),v>e.maxAngle&&(S>D&&(D=S,n=ia,F=m),S=0,ia=m-k)),B=h,x=u,v=r);u=ea;r=ca}h=S+h>D?[ia,m]:[n,F];m=h[0];n=h[1]}else n=l[f];for(h=m;h<n;h+=k)this.coordinates.push(d[h],d[h+1]);h=this.coordinates.length;m=l[f];$ca(this,c,h,this.P);c=h}}else{l=this.Ua(this.Mb,this.B,this.L,this.Ia);p=l.width/this.pixelRatio;switch(f){case "Point":case "MultiPoint":d=
a.flatCoordinates;h=d.length;break;case "LineString":d=wo(a);break;case "Circle":d=Wk(a);break;case "MultiLineString":d=xo(a);h=d.length;break;case "Polygon":d=Tk(a);if(!e.overflow&&d[2]/this.resolution<p)return;k=3;break;case "MultiPolygon":n=yo(a);d=[];h=0;for(f=n.length;h<f;h+=3)(e.overflow||n[h+2]/this.resolution>=p)&&d.push(n[h],n[h+1]);h=d.length;if(0==h)return}h=lp(this,d,0,h,k,!1,!1);qp(this,b);if(e.backgroundFill||e.backgroundStroke)this.Bc(e.backgroundFill,e.backgroundStroke),vp(this,this.state,
this.nt,a),wp(this,this.state,this.ai);ada(this,l,c,h)}rp(this,b)}};
Dp.prototype.Ua=function(a,b,c,d){var e=d+b+a+c+this.pixelRatio;if(!Jj(Oj,e)){var f=d?this.jb[d]||this.l:null,h=c?this.N[c]||this.o:null,k=this.I[b]||this.A,l=k.scale*this.pixelRatio,m=gp[k.textAlign||"center"];b=d&&f.lineWidth?f.lineWidth:0;a=a.split("\n");var n=a.length,p=[],r=k.font;var u=a.length;var v=0;var x;for(x=0;x<u;++x){var B=Sj(r,a[x]);v=Math.max(v,B);p.push(B)}u=v;r=Yba(k.font);u=qj(Math.ceil((u+b)*l),Math.ceil((r*n+b)*l));v=u.canvas;Oj.set(e,v);1!=l&&u.scale(l,l);u.font=k.font;d&&(u.strokeStyle=
f.strokeStyle,u.lineWidth=b*(yj?l:1),u.lineCap=f.lineCap,u.lineJoin=f.lineJoin,u.miterLimit=f.miterLimit,Cj&&f.lineDash.length&&(u.setLineDash(f.lineDash),u.lineDashOffset=f.lineDashOffset));c&&(u.fillStyle=h.fillStyle);u.textBaseline="middle";u.textAlign="center";f=.5-m;h=m*v.width/l+f*b;if(d)for(d=0;d<n;++d)u.strokeText(a[d],h+f*p[d],.5*(b+r)+d*r);if(c)for(d=0;d<n;++d)u.fillText(a[d],h+f*p[d],.5*(b+r)+d*r)}return Oj.get(e)};
function ada(a,b,c,d){var e=a.A,f=a.l,h=a.pixelRatio,k=gp[e.textAlign||"center"],l=gp[e.textBaseline];f=f&&f.lineWidth?f.lineWidth:0;k=k*b.width/h+2*(.5-k)*f;l=l*b.height/h+2*(.5-l)*f;a.j.push([6,c,d,b,(k-a.U)*h,(l-a.G)*h,a.P,b.height,1,0,0,a.pa,a.Z,1,!0,b.width,e.padding==Nj?Nj:e.padding.map(function(a){return a*h}),!!e.backgroundFill,!!e.backgroundStroke]);a.g.push([6,c,d,b,(k-a.U)*h,(l-a.G)*h,a.P,b.height,1,0,0,a.pa,a.Z,1/h,!0,b.width,e.padding,!!e.backgroundFill,!!e.backgroundStroke])}
function $ca(a,b,c,d){var e=a.l,f=a.A,h=a.o,k=a.Ia;e&&(k in a.jb||(a.jb[k]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));var l=a.B;a.B in a.I||(a.I[a.B]={font:f.font,textAlign:f.textAlign||"center",scale:f.scale});var m=a.L;h&&(m in a.N||(a.N[m]={fillStyle:h.fillStyle}));var n=a.pixelRatio;h=gp[f.textBaseline];var p=a.G*n,r=a.Mb,u=f.font,v=f.scale;e=e?e.lineWidth*v/2:0;var x=a.zb[u];
x||(a.zb[u]=x={});a.j.push([5,b,c,h,d,f.overflow,m,f.maxAngle,function(a){var b=x[a];b||(b=x[a]=Sj(u,a));return b*v*n},p,k,e*n,r,l,1]);a.g.push([5,b,c,h,d,f.overflow,m,f.maxAngle,function(a){var b=x[a];b||(b=x[a]=Sj(u,a));return b*v},p,k,e,r,l,1/n])}
Dp.prototype.Ld=function(a,b){var c,d;if(a){this.P=b;(d=a.ob())?(b=this.o,b||(b=this.o={}),b.fillStyle=pj(d.La()||Kj)):b=this.o=null;if(c=a.kb()){d=this.l;d||(d=this.l={});var e=c.j,f=c.o,h=c.g,k=c.B;d.lineCap=c.s||"round";d.lineDash=e?e.slice():Lj;d.lineDashOffset=void 0===f?0:f;d.lineJoin=c.A||"round";d.lineWidth=void 0===h?1:h;d.miterLimit=void 0===k?10:k;d.strokeStyle=pj(c.La()||Mj)}else d=this.l=null;c=this.A;e=a.Ge()||"10px sans-serif";Xba(e);f=a.j;c.overflow=a.I;c.font=e;c.maxAngle=a.G;c.placement=
a.L;c.textAlign=a.g;c.textBaseline=a.l||"middle";c.backgroundFill=a.N;c.backgroundStroke=a.P;c.padding=a.U||Nj;c.scale=void 0===f?1:f;e=a.Vf;f=a.o;h=a.s;k=a.A;this.Mb=a.ub()||"";this.U=void 0===e?0:e;this.G=void 0===f?0:f;this.pa=void 0===h?!1:h;this.Z=void 0===k?0:k;this.Ia=d?("string"==typeof d.strokeStyle?d.strokeStyle:H(d.strokeStyle))+d.lineCap+d.lineDashOffset+"|"+d.lineWidth+d.lineJoin+d.miterLimit+"["+d.lineDash.join()+"]":"";this.B=c.font+c.scale+(c.textAlign||"?");this.L=b?"string"==typeof b.fillStyle?
b.fillStyle:"|"+H(b.fillStyle):""}else this.Mb=""};function Ep(a,b,c,d,e,f,h){this.g=f;this.j=null;this.G=a;this.l=b;this.Xm=e;this.A=d;this.B=c;this.xe=h;this.we={};this.o=qj(1,1);this.s=aj()}G(Ep,dp);var Fp={0:[[!0]]};function Gp(a,b,c){var d,e=Math.floor(a.length/2);if(b>=e)for(d=e;d<b;d++)a[d][c]=!0;else if(b<e)for(d=b+1;d<e;d++)a[d][c]=!0}
function bda(a){if(void 0!==Fp[a])return Fp[a];for(var b=2*a+1,c=Array(b),d=0;d<b;d++)c[d]=Array(b);b=a;for(var e=d=0;b>=d;)Gp(c,a+b,a+d),Gp(c,a+d,a+b),Gp(c,a-d,a+b),Gp(c,a-b,a+d),Gp(c,a-b,a-d),Gp(c,a-d,a-b),Gp(c,a+d,a-b),Gp(c,a+b,a-d),d++,e+=1+2*d,0<2*(e-b)+1&&(--b,e+=1-2*b);return Fp[a]=c}g=Ep.prototype;g.We=function(a){var b=null;this.g&&(a?(b=this.j,b[4]++):(b=this.j=Th(),b.push(1)));return b};g.finish=function(){for(var a in this.we){var b=this.we[a],c;for(c in b)b[c].finish()}};
g.sc=function(a,b,c,d,e,f,h){d=Math.round(d);var k=2*d+1,l=jj(this.s,d+.5,d+.5,1/b,-1/b,-c,-a[0],-a[1]),m=this.o;m.canvas.width!==k||m.canvas.height!==k?(m.canvas.width=k,m.canvas.height=k):m.clearRect(0,0,k,k);if(void 0!==this.xe){var n=Th();Uh(n,a);Vh(n,b*(this.xe+d),n)}var p=bda(d),r;this.g&&(r=this.g.all().map(function(a){return a.value}));return cda(this,m,l,c,e,function(a){for(var b=m.getImageData(0,0,k,k).data,c=0;c<k;c++)for(var d=0;d<k;d++)if(p[c][d]&&0<b[4*(d*k+c)+3]){var e;r&&-1===r.indexOf(a)||
(e=f(a));if(e)return e;m.clearRect(0,0,k,k);return}},n,h)};function Hp(a,b){var c=a.l;a=c[0];var d=c[1],e=c[2];c=c[3];a=[a,d,a,c,e,c,e,d];pi(a,0,8,2,b,a);return a}g.nc=function(a,b){var c=void 0!==a?a.toString():"0";a=this.we[c];void 0===a&&(a={},this.we[c]=a);c=a[b];void 0===c&&(c=new dda[b](this.G,this.l,this.B,this.A,this.Xm,this.g),a[b]=c);return c};g.isEmpty=function(){return qh(this.we)};
g.vc=function(a,b,c,d,e,f){var h=Object.keys(this.we).map(Number);h.sort(gk);a.save();var k=Hp(this,b);a.beginPath();a.moveTo(k[0],k[1]);a.lineTo(k[2],k[3]);a.lineTo(k[4],k[5]);a.lineTo(k[6],k[7]);a.clip();e=e?e:fp;var l,m;k=0;for(l=h.length;k<l;++k){var n=h[k].toString();var p=this.we[n];var r=0;for(m=e.length;r<m;++r){var u=e[r];var v=p[u];void 0!==v&&(!f||"Image"!=u&&"Text"!=u?v.vc(a,b,c,d):(u=f[n])?u.push(v,b.slice(0)):f[n]=[v,b.slice(0)])}}a.restore()};
function cda(a,b,c,d,e,f,h,k){var l=Object.keys(a.we).map(Number);l.sort(gk);var m,n;for(m=l.length-1;0<=m;--m){var p=l[m].toString();var r=a.we[p];for(n=fp.length-1;0<=n;--n){var u=fp[n];var v=r[u];if(void 0!==v)if(!k||"Image"!=u&&"Text"!=u){u=b;var x=c,B=e,F=f,D=h;v.bb=d;if(v=tp(v,u,x,B,v.g,F,D))return v}else(u=k[p])?u.push(v,c.slice(0)):k[p]=[v,c.slice(0)]}}}var dda={Circle:Ap,Default:hp,Image:xp,LineString:yp,Polygon:Ap,Text:Dp};function Ip(a,b){return H(a)-H(b)}function Jp(a,b){a=.5*a/b;return a*a}function Kp(a,b,c,d,e,f){var h=!1,k;if(k=c.Ua()){var l=k.sf();2==l||3==l?k.Wk(e,f):(0==l&&k.load(),k.Ji(e,f),h=!0)}if(e=(0,c.ef)(b))if(d=e.Rl(d),c.wi())Lp(a,d,c,b);else(0,Mp[d.T()])(a,d,c,b);return h}function Lp(a,b,c,d){if("GeometryCollection"==b.T()){b=Np(b);for(var e=0,f=b.length;e<f;++e)Lp(a,b[e],c,d)}else a.nc(c.xc(),"Default").Pt(b,d,c.wi())}
var Mp={Point:function(a,b,c,d){var e=c.Ua();if(e){if(2!=e.sf())return;var f=a.nc(c.xc(),"Image");f.Af(e,a.We(!1));f.Pg(b,d)}if(f=c.ub())c=a.nc(c.xc(),"Text"),c.Ld(f,a.We(!!e)),c.Ze(b,d)},LineString:function(a,b,c,d){var e=c.kb();if(e){var f=a.nc(c.xc(),"LineString");f.Bc(null,e);f.Ng(b,d)}if(e=c.ub())c=a.nc(c.xc(),"Text"),c.Ld(e,a.We(!1)),c.Ze(b,d)},Polygon:function(a,b,c,d){var e=c.ob(),f=c.kb();if(e||f){var h=a.nc(c.xc(),"Polygon");h.Bc(e,f);h.Uf(b,d)}if(e=c.ub())c=a.nc(c.xc(),"Text"),c.Ld(e,a.We(!1)),
c.Ze(b,d)},MultiPoint:function(a,b,c,d){var e=c.Ua();if(e){if(2!=e.sf())return;var f=a.nc(c.xc(),"Image");f.Af(e,a.We(!1));f.Og(b,d)}if(f=c.ub())c=a.nc(c.xc(),"Text"),c.Ld(f,a.We(!!e)),c.Ze(b,d)},MultiLineString:function(a,b,c,d){var e=c.kb();if(e){var f=a.nc(c.xc(),"LineString");f.Bc(null,e);f.tg(b,d)}if(e=c.ub())c=a.nc(c.xc(),"Text"),c.Ld(e,a.We(!1)),c.Ze(b,d)},MultiPolygon:function(a,b,c,d){var e=c.ob(),f=c.kb();if(f||e){var h=a.nc(c.xc(),"Polygon");h.Bc(e,f);h.Tf(b,d)}if(e=c.ub())c=a.nc(c.xc(),
"Text"),c.Ld(e,a.We(!1)),c.Ze(b,d)},GeometryCollection:function(a,b,c,d){b=b.g;var e;var f=0;for(e=b.length;f<e;++f)(0,Mp[b[f].T()])(a,b[f],c,d)},Circle:function(a,b,c,d){var e=c.ob(),f=c.kb();if(e||f){var h=a.nc(c.xc(),"Circle");h.Bc(e,f);h.Gf(b,d)}if(e=c.ub())c=a.nc(c.xc(),"Text"),c.Ld(e,a.We(!1)),c.Ze(b,d)}};function Op(a){Io.call(this,a);this.l=a.vo?nm.Kh(9):null;this.j=!1;this.I=-1;this.G=NaN;this.s=Th();this.g=this.B=null;this.o=!0;this.context=qj();I(Oj,"clear",this.Av,this)}G(Op,Io);Op.handles=function(a,b){return"canvas"===a&&"VECTOR"===b.T()};Op.create=function(a,b){return new Op(b)};g=Op.prototype;g.J=function(){xh(Oj,"clear",this.Av,this);Io.prototype.J.call(this)};
g.Wp=function(a,b,c){var d=a.extent,e=a.pixelRatio,f=b.managed?a.skippedFeatureUids:{},h=a.viewState,k=h.projection,l=h.rotation,m=k.aa(),n=this.W().O(),p=Lo(this,a,0);Ko(this,"precompose",c,a,p);var r=b.extent;(h=void 0!==r)&&Jo(c,a,r);var u=this.g;if(u&&!u.isEmpty()){this.l&&this.l.clear();var v=this.W(),x=r=0,B=1!==b.opacity;v=v.Sd("render");if(B||v){var F=c.canvas.width;var D=c.canvas.height;if(l){var S=Math.round(Math.sqrt(F*F+D*D));r=(S-F)/2;x=(S-D)/2;F=D=S}this.context.canvas.width=F;this.context.canvas.height=
D;F=this.context}else F=c;D=F.globalAlpha;B||(F.globalAlpha=b.opacity);F!=c&&F.translate(r,x);S=a.size[0]*e;e*=a.size[1];Tj(F,-l,S/2,e/2);u.vc(F,p,l,f);if(n.Tn&&k.g&&!Yh(m,d)){k=d[0];n=gi(m);for(var ia=0;k<m[0];)--ia,p=n*ia,p=Lo(this,a,p),u.vc(F,p,l,f),k+=n;ia=0;for(k=d[2];k>m[2];)++ia,p=n*ia,p=Lo(this,a,p),u.vc(F,p,l,f),k-=n;p=Lo(this,a,0)}Tj(F,l,S/2,e/2);F!=c&&(v&&Ko(this,"render",F,a,p),B?(d=c.globalAlpha,c.globalAlpha=b.opacity,c.drawImage(F.canvas,-r,-x),c.globalAlpha=d):c.drawImage(F.canvas,
-r,-x),F.translate(-r,-x));B||(F.globalAlpha=D)}h&&c.restore();this.bn(c,a,b,p)};g.sc=function(a,b,c,d,e){if(this.g){var f=b.viewState.resolution;b=b.viewState.rotation;var h=this.W(),k={};return this.g.sc(a,f,b,c,{},function(a){var b=H(a).toString();if(!(b in k))return k[b]=!0,d.call(e,a,h)},null)}};g.Av=function(){var a=this.W();a.Hb()&&this.g&&a.ia()};g.Bv=function(){Bo(this)};
g.Ni=function(a){var b=this.W(),c=b.O();Eo(a,c);var d=a.viewHints[0],e=a.viewHints[1],f=b.rA,h=b.sA;if(!this.j&&!f&&d||!h&&e)return!0;f=a.extent;var k=a.viewState;h=k.projection;var l=k.resolution,m=a.pixelRatio;d=b.Yb;var n=b.xe;e=b.get("renderOrder");void 0===e&&(e=Ip);f=Vh(f,n*l);n=k.projection.aa();c.Tn&&k.projection.g&&!Yh(n,a.extent)&&(a=Math.max(gi(f)/2,gi(n)),f[0]=n[0]-a,f[2]=n[2]+a);if(!this.j&&this.G==l&&this.I==d&&this.B==e&&Yh(this.s,f))return this.o=!1,!0;this.g=null;this.j=!1;var p=
new Ep(.5*l/m,f,l,m,c.Xm,this.l,b.xe);Am(c,f,l,h);a=function(a){var c=a.ke();if(c)var d=c.call(a,l);else(c=b.ke())&&(d=c(a,l));if(d){if(d){c=!1;if(Array.isArray(d))for(var e=0,f=d.length;e<f;++e)c=Kp(p,a,d[e],Jp(l,m),this.Bv,this)||c;else c=Kp(p,a,d,Jp(l,m),this.Bv,this);a=c}else a=!1;this.j=this.j||a}}.bind(this);if(e){var r=[];xm(c,f,function(a){r.push(a)},this);r.sort(e);c=0;for(h=r.length;c<h;++c)a(r[c])}else xm(c,f,a,this);p.finish();this.G=l;this.I=d;this.B=e;this.s=f;this.g=p;return this.o=
!0};function Pp(a){this.context=null;Zo.call(this,a);this.G=a.vo?nm.Kh(9):null;this.I=!1;this.Z=aj();this.U="vector"==a.Hk?1:0;I(Oj,"clear",this.Cv,this)}G(Pp,Zo);Pp.handles=function(a,b){return"canvas"===a&&"VECTOR_TILE"===b.T()};Pp.create=function(a,b){return new Pp(b)};var eda={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"]},fda={image:["Default"],hybrid:["Image","Text","Default"],vector:fp};g=Pp.prototype;g.J=function(){xh(Oj,"clear",this.Cv,this);Zo.prototype.J.call(this)};
g.Ni=function(a,b){var c=this.W(),d=c.Yb;this.N!=d&&(this.j.length=0,c=c.Hk,this.context||"vector"==c||(this.context=qj()),this.context&&"vector"==c&&(this.context=null));this.N=d;return Zo.prototype.Ni.apply(this,arguments)};
g.zo=function(a,b,c,d,e,f,h,k,l){var m=a,n=b,p=this.W(),r=n.pixelRatio;n=n.viewState.projection;var u=p.Yb,v=p.get("renderOrder")||null,x=m.tD(p);if(x.dirty||x.renderedRevision!=u||x.renderedRenderOrder!=v){var B=p.O(),F=B.tileGrid,D=B.Rd(n),S=D.ab(m.fc[0]);D=Yl(D,m.Ns);for(var ia=0,ea=m.Th.length;ia<ea;++ia){var ca=Ho(m,m.Th[ia]);if(3!=ca.getState()){var Y=Yl(F,ca.fc),ja=ki(D,Y),Ga=bi(Y,ja)?null:Vh(ja,p.xe*S),Oa=ca.Wa(),tc=!1;Wi(n,Oa)||(tc=!0,ca.xn(n));x.dirty=!1;ja=new Ep(0,ja,S,r,B.Xm,this.G,p.xe);
var Ta=Jp(S,r),ka=ca.Oa();v&&v!==x.renderedRenderOrder&&ka.sort(v);for(var Vb,Qm=0,fs=ka.length;Qm<fs;++Qm)if(Vb=ka[Qm],tc&&("tile-pixels"==Oa.Rc()&&(Oa.Sn=Y,Oa.Ac(ca.aa())),Vb.X().transform(Oa,n)),!Ga||li(Ga,Vb.X().aa())){var Ih=void 0,dl=Vb.ke();dl?Ih=dl.call(Vb,S):(dl=p.ke())&&(Ih=dl(Vb,S));if(Ih){dl=Ta;var LA=ja;if(Ih){var Yv=!1;if(Array.isArray(Ih))for(var Zv=0,hs=Ih.length;Zv<hs;++Zv)Yv=Kp(LA,Vb,Ih[Zv],dl,this.Dv,this)||Yv;else Yv=Kp(LA,Vb,Ih,dl,this.Dv,this);Vb=Yv}else Vb=!1;this.I=this.I||
Vb;x.dirty=x.dirty||Vb}}ja.finish();for(var mp in ja.we);ca.WR(p,m.fc.toString(),ja)}}x.renderedRevision=u;x.renderedRenderOrder=v}if(this.context){v=b;p=this.W();mp=m.tD(p);n=p.Yb;if((r=eda[p.Hk])&&mp.renderedTileRevision!==n)for(mp.renderedTileRevision=n,x=m.Ns,F=x[0],mp=v.pixelRatio,S=p.O(),B=S.Rd(v.viewState.projection),n=B.ab(F),u=m.getContext(p),v=cp(S,F,mp,v.viewState.projection),u.canvas.width=v[0],u.canvas.height=v[1],v=Yl(B,x),x=0,B=m.Th.length;x<B;++x)F=Ho(m,m.Th[x]),3!=F.getState()&&(S=
mp/n,D=bj(this.Z),hj(D,S,-S),ij(D,-v[0],-v[3]),F.mu(p,m.fc.toString()).vc(u,D,0,{},r));Zo.prototype.zo.apply(this,arguments)}};
g.sc=function(a,b,c,d,e){var f=b.viewState.resolution,h=b.viewState.rotation;c=void 0==c?0:c;var k=this.W(),l={},m=this.j;b=k.O().Rd(b.viewState.projection);var n;var p=0;for(n=m.length;p<n;++p){var r=m[p];var u=r.Ns;u=Yl(b,u,this.P);var v=Vh(u,c*f,v);if(Xh(v,a)){u=0;for(var x=r.Th.length;u<x;++u){var B=Ho(r,r.Th[u]);if(3!=B.getState()){B=B.mu(k,r.fc.toString());var F=F||B.sc(a,f,h,c,{},function(a){var b=H(a).toString();if(!(b in l))return l[b]=!0,d.call(e,a,k)},null)}}}}return F};
g.Cv=function(){var a=this.W();a.Hb()&&void 0!==this.N&&a.ia()};g.Dv=function(){Bo(this)};
g.bn=function(a,b,c){var d=this.W(),e=d.vo?{}:null,f=d.O(),h=d.Hk,k=fda[h],l=b.pixelRatio,m=b.viewState.rotation,n=b.size;if(m){var p=Math.round(l*n[0]/2);var r=Math.round(l*n[1]/2);Tj(a,-m,p,r)}e&&this.G.clear();l=this.j;f=f.Rd(b.viewState.projection);n=[];for(var u=[],v=l.length-1;0<=v;--v){var x=l[v];if(5!=x.getState())for(var B=x.fc,F=Yl(f,B)[0]-Yl(f,x.Ns)[0],D=void 0,S=0,ia=x.Th.length;S<ia;++S){var ea=Ho(x,x.Th[S]);if(3!=ea.getState()){var ca=ea.mu(d,B.toString()),Y;if(!(Y="vector"==h))a:{Y=
void 0;for(Y in ca.we)for(var ja=ca.we[Y],Ga=0,Oa=k.length;Ga<Oa;++Ga)if(k[Ga]in ja){Y=!0;break a}Y=!1}if(Y){D||(D=Lo(this,b,F));ea=ea.fc[0];Y=Hp(ca,D);a.save();a.globalAlpha=c.opacity;ja=0;for(Ga=n.length;ja<Ga;++ja)Oa=n[ja],ea<u[ja]&&(a.beginPath(),a.moveTo(Y[0],Y[1]),a.lineTo(Y[2],Y[3]),a.lineTo(Y[4],Y[5]),a.lineTo(Y[6],Y[7]),a.moveTo(Oa[6],Oa[7]),a.lineTo(Oa[4],Oa[5]),a.lineTo(Oa[2],Oa[3]),a.lineTo(Oa[0],Oa[1]),a.clip());ca.vc(a,D,m,{},k,e);a.restore();n.push(Y);u.push(ea)}}}}if(e)for(d=a,h=Object.keys(e).map(Number).sort(gk),
k={},l=0,f=h.length;l<f;++l)for(n=e[h[l].toString()],u=0,v=n.length;u<v;)x=n[u++],B=n[u++],x.vc(d,B,m,k);m&&Tj(a,m,p,r);Zo.prototype.bn.apply(this,arguments)};function Qp(a){this.g=a}Qp.prototype.O=function(){return this.g};function Rp(a){this.g=a}G(Rp,Qp);Rp.prototype.T=function(){return 35632};function Sp(a){this.g=a}G(Sp,Qp);Sp.prototype.T=function(){return 35633};var gda=new Rp("precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n"),
hda=new Sp("varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n");function ida(a,b){this.l=a.getUniformLocation(b,"u_projectionMatrix");this.s=a.getUniformLocation(b,"u_offsetScaleMatrix");this.o=a.getUniformLocation(b,"u_offsetRotateMatrix");this.Ea=a.getUniformLocation(b,"u_lineWidth");this.ka=a.getUniformLocation(b,"u_pixelRatio");this.j=a.getUniformLocation(b,"u_opacity");this.pa=a.getUniformLocation(b,"u_fillColor");this.ra=a.getUniformLocation(b,"u_strokeColor");this.oa=a.getUniformLocation(b,"u_size");this.g=a.getAttribLocation(b,"a_position");this.B=a.getAttribLocation(b,
"a_instruction");this.P=a.getAttribLocation(b,"a_radius")};function Tp(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Up(a,b){a[0]=b[0];a[1]=b[1];a[4]=b[2];a[5]=b[3];a[12]=b[4];a[13]=b[5];return a};function Vp(a,b){this.origin=ii(b);this.Fc=aj();this.Nb=aj();this.gc=aj();this.Ia=Tp();this.g=[];this.A=null;this.l=[];this.o=[];this.j=[];this.G=null;this.s=void 0}G(Vp,oo);
Vp.prototype.vc=function(a,b,c,d,e,f,h,k,l,m,n){var p=a.g;if(this.s){var r=p.isEnabled(p.STENCIL_TEST);var u=p.getParameter(p.STENCIL_FUNC);var v=p.getParameter(p.STENCIL_VALUE_MASK);var x=p.getParameter(p.STENCIL_REF);var B=p.getParameter(p.STENCIL_WRITEMASK);var F=p.getParameter(p.STENCIL_FAIL);var D=p.getParameter(p.STENCIL_PASS_DEPTH_PASS);var S=p.getParameter(p.STENCIL_PASS_DEPTH_FAIL);p.enable(p.STENCIL_TEST);p.clear(p.STENCIL_BUFFER_BIT);p.stencilMask(255);p.stencilFunc(p.ALWAYS,1,255);p.stencilOp(p.KEEP,
p.KEEP,p.REPLACE);this.s.vc(a,b,c,d,e,f,h,k,l,m,n);p.stencilMask(0);p.stencilFunc(p.NOTEQUAL,1,255)}Wp(a,34962,this.G);Wp(a,34963,this.A);f=this.Bn(p,a,e,f);var ia=bj(this.Fc);hj(ia,2/(c*e[0]),2/(c*e[1]));gj(ia,-d);ij(ia,-(b[0]-this.origin[0]),-(b[1]-this.origin[1]));b=bj(this.gc);hj(b,2/e[0],2/e[1]);e=bj(this.Nb);0!==d&&gj(e,-d);p.uniformMatrix4fv(f.l,!1,Up(this.Ia,ia));p.uniformMatrix4fv(f.s,!1,Up(this.Ia,b));p.uniformMatrix4fv(f.o,!1,Up(this.Ia,e));p.uniform1f(f.j,h);if(void 0===l)this.Bj(p,a,
k,!1);else{m?a=this.Al(p,a,k,l,n):(p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),this.Bj(p,a,k,!0),a=(a=l(null))?a:void 0);var ea=a}this.En(p,f);this.s&&(r||p.disable(p.STENCIL_TEST),p.clear(p.STENCIL_BUFFER_BIT),p.stencilFunc(u,x,v),p.stencilMask(B),p.stencilOp(F,S,D));return ea};function Xp(a,b,c,d){a.drawElements(4,d-c,b.A?5125:5123,c*(b.A?4:2))};var Yp=[0,0,0,1],Zp=[],$p=[0,0,0,1];function aq(a,b,c,d,e,f){a=(c-a)*(f-b)-(e-a)*(d-b);return a<=bq&&a>=-bq?void 0:0<a}var bq=Number.EPSILON||2.220446049250313E-16;function cq(a){this.g=void 0!==a?a:[];this.j=jda}var jda=35044;function dq(a,b){Vp.call(this,a,b);this.I=null;this.B=[];this.L=[];this.N=0;this.va={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,ia:!1}}G(dq,Vp);g=dq.prototype;
g.Gf=function(a,b){var c=Xk(a),d=a.stride;if(c){this.l.push(this.g.length);this.o.push(b);this.va.ia&&(this.L.push(this.g.length),this.va.ia=!1);this.N=c;a=a.flatCoordinates;a=qi(a,0,2,d,-this.origin[0],-this.origin[1]);b=this.j.length;c=this.g.length;var e=b/4,f;for(f=0;2>f;f+=d)this.j[b++]=a[f],this.j[b++]=a[f+1],this.j[b++]=0,this.j[b++]=this.N,this.j[b++]=a[f],this.j[b++]=a[f+1],this.j[b++]=1,this.j[b++]=this.N,this.j[b++]=a[f],this.j[b++]=a[f+1],this.j[b++]=2,this.j[b++]=this.N,this.j[b++]=a[f],
this.j[b++]=a[f+1],this.j[b++]=3,this.j[b++]=this.N,this.g[c++]=e,this.g[c++]=e+1,this.g[c++]=e+2,this.g[c++]=e+2,this.g[c++]=e+3,this.g[c++]=e,e+=4}else this.va.ia&&(this.B.pop(),this.B.length&&(d=this.B[this.B.length-1],this.va.fillColor=d[0],this.va.strokeColor=d[1],this.va.lineWidth=d[2],this.va.ia=!1))};g.finish=function(){this.G=new cq(this.j);this.A=new cq(this.g);this.l.push(this.g.length);0===this.L.length&&0<this.B.length&&(this.B=[]);this.g=this.j=null};
g.me=function(a){var b=this.G,c=this.A;return function(){eq(a,b);eq(a,c)}};g.Bn=function(a,b,c,d){var e=fq(b,gda,hda);if(this.I)var f=this.I;else this.I=f=new ida(a,e);gq(b,e);a.enableVertexAttribArray(f.g);a.vertexAttribPointer(f.g,2,5126,!1,16,0);a.enableVertexAttribArray(f.B);a.vertexAttribPointer(f.B,1,5126,!1,16,8);a.enableVertexAttribArray(f.P);a.vertexAttribPointer(f.P,1,5126,!1,16,12);a.uniform2fv(f.oa,c);a.uniform1f(f.ka,d);return f};
g.En=function(a,b){a.disableVertexAttribArray(b.g);a.disableVertexAttribArray(b.B);a.disableVertexAttribArray(b.P)};
g.Bj=function(a,b,c){if(qh(c)){var d=this.l[this.l.length-1];for(c=this.L.length-1;0<=c;--c){var e=this.L[c];var f=this.B[c];a.uniform4fv(this.I.pa,f[0]);hq(this,a,f[1],f[2]);Xp(a,b,e,d);d=e}}else{var h=this.l.length-2;f=d=this.l[h+1];for(e=this.L.length-1;0<=e;--e){var k=this.B[e];a.uniform4fv(this.I.pa,k[0]);hq(this,a,k[1],k[2]);for(k=this.L[e];0<=h&&this.l[h]>=k;){var l=this.l[h];var m=this.o[h];m=H(m).toString();c[m]&&(d!==f&&Xp(a,b,d,f),f=l);h--;d=l}d!==f&&Xp(a,b,d,f);d=f=k}}};
g.Al=function(a,b,c,d,e){var f,h;var k=this.l.length-2;var l=this.l[k+1];for(f=this.L.length-1;0<=f;--f){var m=this.B[f];a.uniform4fv(this.I.pa,m[0]);hq(this,a,m[1],m[2]);for(h=this.L[f];0<=k&&this.l[k]>=h;){m=this.l[k];var n=this.o[k];var p=H(n).toString();if(void 0===c[p]&&n.X()&&(void 0===e||li(e,n.X().aa()))&&(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),Xp(a,b,m,l),l=d(n)))return l;k--;l=m}}};function hq(a,b,c,d){b.uniform4fv(a.I.ra,c);b.uniform1f(a.I.Ea,d)}
g.Bc=function(a,b){if(b){var c=b.j;this.va.lineDash=c?c:Zp;c=b.o;this.va.lineDashOffset=c?c:0;c=b.La();c instanceof CanvasGradient||c instanceof CanvasPattern?c=$p:c=lj(c).map(function(a,b){return 3!=b?a/255:a})||$p;b=b.g;b=void 0!==b?b:1}else c=[0,0,0,0],b=0;a=a?a.La():[0,0,0,0];a instanceof CanvasGradient||a instanceof CanvasPattern?a=Yp:a=lj(a).map(function(a,b){return 3!=b?a/255:a})||Yp;this.va.strokeColor&&jk(this.va.strokeColor,c)&&this.va.fillColor&&jk(this.va.fillColor,a)&&this.va.lineWidth===
b||(this.va.ia=!0,this.va.fillColor=a,this.va.strokeColor=c,this.va.lineWidth=b,this.B.push([a,c,b]))};var kda=new Rp("precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),lda=new Sp("varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n");function mda(a,b){this.l=a.getUniformLocation(b,"u_projectionMatrix");this.s=a.getUniformLocation(b,"u_offsetScaleMatrix");this.o=a.getUniformLocation(b,"u_offsetRotateMatrix");this.j=a.getUniformLocation(b,"u_opacity");this.g=a.getAttribLocation(b,"a_position");this.Z=a.getAttribLocation(b,"a_texCoord");this.L=a.getAttribLocation(b,"a_offsets");this.N=a.getAttribLocation(b,"a_opacity");this.U=a.getAttribLocation(b,"a_rotateWithView")};function iq(a,b){this.B=a;this.g=b;this.j={};this.o={};this.l={};this.I=this.L=this.s=this.G=null;(this.A=0<=Sg.indexOf("OES_element_index_uint"))&&b.getExtension("OES_element_index_uint");I(this.B,"webglcontextlost",this.N,this);I(this.B,"webglcontextrestored",this.P,this)}G(iq,zh);
function Wp(a,b,c){var d=a.g,e=c.g,f=String(H(c));if(f in a.j)d.bindBuffer(b,a.j[f].buffer);else{var h=d.createBuffer();d.bindBuffer(b,h);var k;34962==b?k=new Float32Array(e):34963==b&&(k=a.A?new Uint32Array(e):new Uint16Array(e));d.bufferData(b,k,c.j);a.j[f]={buf:c,buffer:h}}}function eq(a,b){var c=a.g;b=String(H(b));var d=a.j[b];c.isContextLost()||c.deleteBuffer(d.buffer);delete a.j[b]}
iq.prototype.J=function(){yh(this.B);var a=this.g;if(!a.isContextLost()){for(var b in this.j)a.deleteBuffer(this.j[b].buffer);for(b in this.l)a.deleteProgram(this.l[b]);for(b in this.o)a.deleteShader(this.o[b]);a.deleteFramebuffer(this.s);a.deleteRenderbuffer(this.I);a.deleteTexture(this.L)}};
function nda(a){if(!a.s){var b=a.g,c=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,c);var d=jq(b,1,1),e=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,e);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,1,1);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,d,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,e);b.bindTexture(b.TEXTURE_2D,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);a.s=
c;a.L=d;a.I=e}return a.s}function kq(a,b){var c=String(H(b));if(c in a.o)return a.o[c];var d=a.g,e=d.createShader(b.T());d.shaderSource(e,b.O());d.compileShader(e);return a.o[c]=e}function fq(a,b,c){var d=H(b)+"/"+H(c);if(d in a.l)return a.l[d];var e=a.g,f=e.createProgram();e.attachShader(f,kq(a,b));e.attachShader(f,kq(a,c));e.linkProgram(f);return a.l[d]=f}iq.prototype.N=function(){oh(this.j);oh(this.o);oh(this.l);this.I=this.L=this.s=this.G=null};iq.prototype.P=function(){};
function gq(a,b){if(b==a.G)return!1;a.g.useProgram(b);a.G=b;return!0}function lq(a,b,c){var d=a.createTexture();a.bindTexture(a.TEXTURE_2D,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);void 0!==b&&a.texParameteri(3553,10242,b);void 0!==c&&a.texParameteri(3553,10243,c);return d}function jq(a,b,c){var d=lq(a,void 0,void 0);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,a.UNSIGNED_BYTE,null);return d}
function mq(a,b){var c=lq(a,33071,33071);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);return c};function nq(a,b){Vp.call(this,a,b);this.U=this.P=void 0;this.L=[];this.N=[];this.Ea=this.Z=this.height=void 0;this.ra=null;this.width=this.scale=this.rotation=this.rotateWithView=this.oa=this.ka=this.opacity=void 0}G(nq,Vp);g=nq.prototype;g.me=function(a){var b=this.G,c=this.A,d=this.Wo(!0),e=a.g;return function(){if(!e.isContextLost()){var f;var h=0;for(f=d.length;h<f;++h)e.deleteTexture(d[h])}eq(a,b);eq(a,c)}};
function oq(a,b,c,d){var e=a.P,f=a.U,h=a.height,k=a.Z,l=a.Ea,m=a.opacity,n=a.ka,p=a.oa,r=a.rotateWithView?1:0,u=-a.rotation,v=a.scale,x=a.width,B=Math.cos(u);u=Math.sin(u);var F=a.g.length,D=a.j.length,S;for(S=0;S<c;S+=d){var ia=b[S]-a.origin[0];var ea=b[S+1]-a.origin[1];var ca=D/8;var Y=-v*e;var ja=-v*(h-f);a.j[D++]=ia;a.j[D++]=ea;a.j[D++]=Y*B-ja*u;a.j[D++]=Y*u+ja*B;a.j[D++]=n/l;a.j[D++]=(p+h)/k;a.j[D++]=m;a.j[D++]=r;Y=v*(x-e);ja=-v*(h-f);a.j[D++]=ia;a.j[D++]=ea;a.j[D++]=Y*B-ja*u;a.j[D++]=Y*u+ja*
B;a.j[D++]=(n+x)/l;a.j[D++]=(p+h)/k;a.j[D++]=m;a.j[D++]=r;Y=v*(x-e);ja=v*f;a.j[D++]=ia;a.j[D++]=ea;a.j[D++]=Y*B-ja*u;a.j[D++]=Y*u+ja*B;a.j[D++]=(n+x)/l;a.j[D++]=p/k;a.j[D++]=m;a.j[D++]=r;Y=-v*e;ja=v*f;a.j[D++]=ia;a.j[D++]=ea;a.j[D++]=Y*B-ja*u;a.j[D++]=Y*u+ja*B;a.j[D++]=n/l;a.j[D++]=p/k;a.j[D++]=m;a.j[D++]=r;a.g[F++]=ca;a.g[F++]=ca+1;a.g[F++]=ca+2;a.g[F++]=ca;a.g[F++]=ca+2;a.g[F++]=ca+3}}
function pq(a,b,c,d){var e,f=b.length;for(e=0;e<f;++e){var h=b[e];var k=H(h).toString();k in c?h=c[k]:(h=mq(d,h),c[k]=h);a[e]=h}}
g.Bn=function(a,b){var c=fq(b,kda,lda);if(this.ra)var d=this.ra;else this.ra=d=new mda(a,c);gq(b,c);a.enableVertexAttribArray(d.g);a.vertexAttribPointer(d.g,2,5126,!1,32,0);a.enableVertexAttribArray(d.L);a.vertexAttribPointer(d.L,2,5126,!1,32,8);a.enableVertexAttribArray(d.Z);a.vertexAttribPointer(d.Z,2,5126,!1,32,16);a.enableVertexAttribArray(d.N);a.vertexAttribPointer(d.N,1,5126,!1,32,24);a.enableVertexAttribArray(d.U);a.vertexAttribPointer(d.U,1,5126,!1,32,28);return d};
g.En=function(a,b){a.disableVertexAttribArray(b.g);a.disableVertexAttribArray(b.L);a.disableVertexAttribArray(b.Z);a.disableVertexAttribArray(b.N);a.disableVertexAttribArray(b.U)};
g.Bj=function(a,b,c,d){var e=d?this.Mo():this.Wo();d=d?this.N:this.L;if(qh(c)){var f;c=0;var h=e.length;for(f=0;c<h;++c){a.bindTexture(3553,e[c]);var k=d[c];Xp(a,b,f,k);f=k}}else for(f=h=0,k=e.length;f<k;++f){a.bindTexture(3553,e[f]);for(var l=0<f?d[f-1]:0,m=d[f],n=l;h<this.l.length&&this.l[h]<=m;){var p=H(this.o[h]).toString();void 0!==c[p]?(n!==l&&Xp(a,b,n,l),l=n=h===this.l.length-1?m:this.l[h+1]):l=h===this.l.length-1?m:this.l[h+1];h++}n!==l&&Xp(a,b,n,l)}};
g.Al=function(a,b,c,d,e){var f,h,k=this.l.length-1,l=this.Mo();for(f=l.length-1;0<=f;--f){a.bindTexture(3553,l[f]);var m=0<f?this.N[f-1]:0;for(h=this.N[f];0<=k&&this.l[k]>=m;){var n=this.l[k];var p=this.o[k];var r=H(p).toString();if(void 0===c[r]&&p.X()&&(void 0===e||li(e,p.X().aa()))&&(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),Xp(a,b,n,h),h=d(p)))return h;h=n;k--}}};
g.finish=function(){this.Ea=this.Z=this.height=this.U=this.P=void 0;this.g=null;this.scale=this.rotation=this.rotateWithView=this.oa=this.ka=this.opacity=void 0;this.j=null;this.width=void 0};function qq(a,b){nq.call(this,a,b);this.I=[];this.B=[];this.Ca=[];this.pa=[]}G(qq,nq);g=qq.prototype;g.Og=function(a,b){this.l.push(this.g.length);this.o.push(b);b=a.flatCoordinates;oq(this,b,b.length,a.stride)};g.Pg=function(a,b){this.l.push(this.g.length);this.o.push(b);b=a.flatCoordinates;oq(this,b,b.length,a.stride)};
g.finish=function(a){var b=a.g;this.L.push(this.g.length);this.N.push(this.g.length);this.G=new cq(this.j);this.A=new cq(this.g);var c={};pq(this.Ca,this.I,c,b);pq(this.pa,this.B,c,b);this.B=this.I=null;nq.prototype.finish.call(this,a)};
g.Af=function(a){var b=a.ri(),c=a.Ua(1),d=a.Nl(),e=a.Zp(),f=a.Xb(),h=a.hk(),k=a.I,l=a.o,m=a.tf();a=a.j();if(0===this.I.length)this.I.push(c);else{var n=this.I[this.I.length-1];H(n)!=H(c)&&(this.L.push(this.g.length),this.I.push(c))}0===this.B.length?this.B.push(e):(n=this.B[this.B.length-1],H(n)!=H(e)&&(this.N.push(this.g.length),this.B.push(e)));this.P=b[0];this.U=b[1];this.height=m[1];this.Z=d[1];this.Ea=d[0];this.opacity=f;this.ka=h[0];this.oa=h[1];this.rotation=l;this.rotateWithView=k;this.scale=
a;this.width=m[0]};g.Wo=function(a){return a?this.Ca.concat(this.pa):this.Ca};g.Mo=function(){return this.pa};function rq(a,b,c){var d=b-c;return a[0]===a[d]&&a[1]===a[d+1]&&3<(b-0)/c?!!yk(a,0,b,c):!1};var oda=new Rp("precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),
pda=new Sp("varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n");function qda(a,b){this.l=a.getUniformLocation(b,"u_projectionMatrix");this.s=a.getUniformLocation(b,"u_offsetScaleMatrix");this.o=a.getUniformLocation(b,"u_offsetRotateMatrix");this.Ea=a.getUniformLocation(b,"u_lineWidth");this.ra=a.getUniformLocation(b,"u_miterLimit");this.j=a.getUniformLocation(b,"u_opacity");this.pa=a.getUniformLocation(b,"u_color");this.oa=a.getUniformLocation(b,"u_size");this.ka=a.getUniformLocation(b,"u_pixelRatio");this.G=a.getAttribLocation(b,"a_lastPos");this.g=a.getAttribLocation(b,
"a_position");this.I=a.getAttribLocation(b,"a_nextPos");this.A=a.getAttribLocation(b,"a_direction")};function sq(a,b){Vp.call(this,a,b);this.I=null;this.L=[];this.B=[];this.va={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,ia:!1}}G(sq,Vp);
function tq(a,b,c,d){var e,f=a.j.length,h=a.g.length,k="bevel"===a.va.lineJoin?0:"miter"===a.va.lineJoin?1:2,l="butt"===a.va.lineCap?0:"square"===a.va.lineCap?1:2,m=rq(b,c,d),n=h,p=1;for(e=0;e<c;e+=d){var r=f/7;var u=v;var v=x||[b[e],b[e+1]];if(0===e){var x=[b[e+d],b[e+d+1]];if(c-0===2*d&&jk(v,x))break;if(m){u=[b[c-2*d],b[c-2*d+1]];var B=x}else{l&&(f=uq(a,[0,0],v,x,p*vq*l,f),f=uq(a,[0,0],v,x,-p*vq*l,f),a.g[h++]=r+2,a.g[h++]=r,a.g[h++]=r+1,a.g[h++]=r+1,a.g[h++]=r+3,a.g[h++]=r+2);f=uq(a,[0,0],v,x,p*
wq*(l||1),f);f=uq(a,[0,0],v,x,-p*wq*(l||1),f);n=f/7-1;continue}}else if(e===c-d){m?x=B:(u=u||[0,0],f=uq(a,u,v,[0,0],p*xq*(l||1),f),f=uq(a,u,v,[0,0],-p*xq*(l||1),f),a.g[h++]=r,a.g[h++]=n-1,a.g[h++]=n,a.g[h++]=n,a.g[h++]=r+1,a.g[h++]=r,l&&(f=uq(a,u,v,[0,0],p*yq*l,f),f=uq(a,u,v,[0,0],-p*yq*l,f),a.g[h++]=r+2,a.g[h++]=r,a.g[h++]=r+1,a.g[h++]=r+1,a.g[h++]=r+3,a.g[h++]=r+2));break}else x=[b[e+d],b[e+d+1]];var F=aq(u[0],u[1],v[0],v[1],x[0],x[1])?-1:1;f=uq(a,u,v,x,F*zq*(k||1),f);f=uq(a,u,v,x,F*rda*(k||1),
f);f=uq(a,u,v,x,-F*Aq*(k||1),f);0<e&&(a.g[h++]=r,a.g[h++]=n-1,a.g[h++]=n,a.g[h++]=r+2,a.g[h++]=r,a.g[h++]=0<p*F?n:n-1);a.g[h++]=r;a.g[h++]=r+2;a.g[h++]=r+1;n=r+2;p=F;k&&(f=uq(a,u,v,x,F*sda*k,f),a.g[h++]=r+1,a.g[h++]=r+3,a.g[h++]=r)}m&&(r=r||f/7,F=Nk([u[0],u[1],v[0],v[1],x[0],x[1]],0,6,2)?1:-1,f=uq(a,u,v,x,F*zq*(k||1),f),uq(a,u,v,x,-F*Aq*(k||1),f),a.g[h++]=r,a.g[h++]=n-1,a.g[h++]=n,a.g[h++]=r+1,a.g[h++]=r,a.g[h++]=0<p*F?n:n-1)}
function uq(a,b,c,d,e,f){a.j[f++]=b[0];a.j[f++]=b[1];a.j[f++]=c[0];a.j[f++]=c[1];a.j[f++]=d[0];a.j[f++]=d[1];a.j[f++]=e;return f}function Bq(a,b,c,d){c-=b;return c<2*d?!1:c===2*d?!jk([a[b],a[b+1]],[a[b+d],a[b+d+1]]):!0}g=sq.prototype;g.Ng=function(a,b){var c=a.flatCoordinates;a=a.stride;Bq(c,0,c.length,a)&&(c=qi(c,0,c.length,a,-this.origin[0],-this.origin[1]),this.va.ia&&(this.B.push(this.g.length),this.va.ia=!1),this.l.push(this.g.length),this.o.push(b),tq(this,c,c.length,a))};
g.tg=function(a,b){var c=this.g.length,d=a.Fd();d.unshift(0);var e=a.flatCoordinates;a=a.stride;var f;if(1<d.length){var h=1;for(f=d.length;h<f;++h)if(Bq(e,d[h-1],d[h],a)){var k=qi(e,d[h-1],d[h],a,-this.origin[0],-this.origin[1]);tq(this,k,k.length,a)}}this.g.length>c&&(this.l.push(c),this.o.push(b),this.va.ia&&(this.B.push(c),this.va.ia=!1))};
function Cq(a,b,c,d){rq(b,b.length,d)||(b.push(b[0]),b.push(b[1]));tq(a,b,b.length,d);if(c.length){var e;b=0;for(e=c.length;b<e;++b)rq(c[b],c[b].length,d)||(c[b].push(c[b][0]),c[b].push(c[b][1])),tq(a,c[b],c[b].length,d)}}function Dq(a,b,c){c=void 0===c?a.g.length:c;a.l.push(c);a.o.push(b);a.va.ia&&(a.B.push(c),a.va.ia=!1)}g.finish=function(){this.G=new cq(this.j);this.A=new cq(this.g);this.l.push(this.g.length);0===this.B.length&&0<this.L.length&&(this.L=[]);this.g=this.j=null};
g.me=function(a){var b=this.G,c=this.A;return function(){eq(a,b);eq(a,c)}};
g.Bn=function(a,b,c,d){var e=fq(b,oda,pda);if(this.I)var f=this.I;else this.I=f=new qda(a,e);gq(b,e);a.enableVertexAttribArray(f.G);a.vertexAttribPointer(f.G,2,5126,!1,28,0);a.enableVertexAttribArray(f.g);a.vertexAttribPointer(f.g,2,5126,!1,28,8);a.enableVertexAttribArray(f.I);a.vertexAttribPointer(f.I,2,5126,!1,28,16);a.enableVertexAttribArray(f.A);a.vertexAttribPointer(f.A,1,5126,!1,28,24);a.uniform2fv(f.oa,c);a.uniform1f(f.ka,d);return f};
g.En=function(a,b){a.disableVertexAttribArray(b.G);a.disableVertexAttribArray(b.g);a.disableVertexAttribArray(b.I);a.disableVertexAttribArray(b.A)};
g.Bj=function(a,b,c,d){var e=a.getParameter(a.DEPTH_FUNC),f=a.getParameter(a.DEPTH_WRITEMASK);d||(a.enable(a.DEPTH_TEST),a.depthMask(!0),a.depthFunc(a.NOTEQUAL));if(qh(c)){var h=this.l[this.l.length-1];for(c=this.B.length-1;0<=c;--c){var k=this.B[c];var l=this.L[c];Eq(this,a,l[0],l[1],l[2]);Xp(a,b,k,h);a.clear(a.DEPTH_BUFFER_BIT);h=k}}else{var m=this.l.length-2;l=h=this.l[m+1];for(k=this.B.length-1;0<=k;--k){var n=this.L[k];Eq(this,a,n[0],n[1],n[2]);for(n=this.B[k];0<=m&&this.l[m]>=n;){var p=this.l[m];
var r=this.o[m];r=H(r).toString();c[r]&&(h!==l&&(Xp(a,b,h,l),a.clear(a.DEPTH_BUFFER_BIT)),l=p);m--;h=p}h!==l&&(Xp(a,b,h,l),a.clear(a.DEPTH_BUFFER_BIT));h=l=n}}d||(a.disable(a.DEPTH_TEST),a.clear(a.DEPTH_BUFFER_BIT),a.depthMask(f),a.depthFunc(e))};
g.Al=function(a,b,c,d,e){var f,h;var k=this.l.length-2;var l=this.l[k+1];for(f=this.B.length-1;0<=f;--f){var m=this.L[f];Eq(this,a,m[0],m[1],m[2]);for(h=this.B[f];0<=k&&this.l[k]>=h;){m=this.l[k];var n=this.o[k];var p=H(n).toString();if(void 0===c[p]&&n.X()&&(void 0===e||li(e,n.X().aa()))&&(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),Xp(a,b,m,l),l=d(n)))return l;k--;l=m}}};function Eq(a,b,c,d,e){b.uniform4fv(a.I.pa,c);b.uniform1f(a.I.Ea,d);b.uniform1f(a.I.ra,e)}
g.Bc=function(a,b){a=b.s;this.va.lineCap=void 0!==a?a:"round";a=b.j;this.va.lineDash=a?a:Zp;a=b.o;this.va.lineDashOffset=a?a:0;a=b.A;this.va.lineJoin=void 0!==a?a:"round";a=b.La();a instanceof CanvasGradient||a instanceof CanvasPattern?a=$p:a=lj(a).map(function(a,b){return 3!=b?a/255:a})||$p;var c=b.g;c=void 0!==c?c:1;b=b.B;b=void 0!==b?b:10;this.va.strokeColor&&jk(this.va.strokeColor,a)&&this.va.lineWidth===c&&this.va.miterLimit===b||(this.va.ia=!0,this.va.strokeColor=a,this.va.lineWidth=c,this.va.miterLimit=
b,this.L.push([a,c,b]))};var wq=3,xq=5,vq=7,yq=11,zq=13,rda=17,Aq=19,sda=23;var tda=new Rp("precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),uda=new Sp("\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n");function vda(a,b){this.l=a.getUniformLocation(b,"u_projectionMatrix");this.s=a.getUniformLocation(b,"u_offsetScaleMatrix");this.o=a.getUniformLocation(b,"u_offsetRotateMatrix");this.pa=a.getUniformLocation(b,"u_color");this.j=a.getUniformLocation(b,"u_opacity");this.g=a.getAttribLocation(b,"a_position")};function Fq(){this.g=this.j=this.l=void 0;this.o=0}function Gq(a){var b=a.g;if(b){var c=b.next,d=b.prev;c&&(c.prev=d);d&&(d.next=c);a.g=c||d;a.l===a.j?(a.g=void 0,a.l=void 0,a.j=void 0):a.l===b?a.l=a.g:a.j===b&&(a.j=d?a.g.prev:a.g);a.o--}}function Hq(a){a.g=a.l;if(a.g)return a.g.data}function Iq(a){if(a.g&&a.g.next)return a.g=a.g.next,a.g.data}function Jq(a){if(a.g&&a.g.next)return a.g.next.data}function Kq(a){if(a.g&&a.g.prev)return a.g=a.g.prev,a.g.data}
function Lq(a){if(a.g&&a.g.prev)return a.g.prev.data}function Mq(a){if(a.g)return a.g.data}Fq.prototype.concat=function(a){if(a.g){if(this.g){var b=this.g.next;this.g.next=a.l;a.l.prev=this.g;b.prev=a.j;a.j.next=b;this.o+=a.o}else this.g=a.g,this.l=a.l,this.j=a.j,this.o=a.o;a.g=void 0;a.l=void 0;a.j=void 0;a.o=0}};Fq.prototype.getLength=function(){return this.o};function Nq(a,b){Vp.call(this,a,b);this.s=new sq(a,b);this.I=null;this.L=[];this.B=[];this.va={fillColor:null,ia:!1}}G(Nq,Vp);
function Oq(a,b,c,d){var e=new Fq,f=new om;Pq(a,b,d,e,f,!0);b=Qq(e);if(c.length){var h,k=[];var l=0;for(h=c.length;l<h;++l){var m={list:new Fq,Lg:void 0,Yr:new om};k.push(m);Pq(a,c[l],d,m.list,m.Yr,!1);Rq(m.list,m.Yr,!0);m.Lg=Qq(m.list)}k.sort(function(a,b){return b.Lg[0]===a.Lg[0]?a.Lg[1]-b.Lg[1]:b.Lg[0]-a.Lg[0]});for(l=0;l<k.length;++l){c=k[l].list;h=d=Hq(c);do{if(Sq(h,f).length){var n=!0;break}h=Iq(c)}while(d!==h);!n&&wda(c,k[l].Lg[0],e,b[0],f)&&(f.concat(k[l].Yr),Rq(e,f,!1))}}else Rq(e,f,!1);
Tq(a,e,f)}
function Pq(a,b,c,d,e,f){var h,k=a.j.length/2,l=[],m=[];if(f===Nk(b,0,b.length,c)){var n=f=Uq(a,b[0],b[1],k++);var p=c;for(h=b.length;p<h;p+=c){var r=Uq(a,b[p],b[p+1],k++);m.push(Vq(n,r,d));l.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.max(n.x,r.x),Math.max(n.y,r.y)]);n=r}}else for(p=b.length-c,n=f=Uq(a,b[p],b[p+1],k++),p-=c,h=0;p>=h;p-=c)r=Uq(a,b[p],b[p+1],k++),m.push(Vq(n,r,d)),l.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.max(n.x,r.x),Math.max(n.y,r.y)]),n=r;m.push(Vq(r,f,d));l.push([Math.min(n.x,r.x),
Math.min(n.y,r.y),Math.max(n.x,r.x),Math.max(n.y,r.y)]);e.load(l,m)}function Qq(a){var b=Hq(a),c=b,d=[c.p0.x,c.p0.y];do c=Iq(a),c.p0.x>d[0]&&(d=[c.p0.x,c.p0.y]);while(c!==b);return d}function Rq(a,b,c){var d=Hq(a),e=d,f=Iq(a),h=!1;do{var k=c?aq(f.p1.x,f.p1.y,e.p1.x,e.p1.y,e.p0.x,e.p0.y):aq(e.p0.x,e.p0.y,e.p1.x,e.p1.y,f.p1.x,f.p1.y);void 0===k?(Wq(e,f,a,b),h=!0,f===d&&(d=Jq(a)),f=e,Kq(a)):e.p1.reflex!==k&&(e.p1.reflex=k,h=!0);e=f;f=Iq(a)}while(e!==d);return h}
function wda(a,b,c,d,e){for(var f=Hq(a);f.p1.x!==b;)f=Iq(a);b=f.p1;d={x:d,y:b.y,i:-1};var h=Infinity,k;var l=Sq({p0:b,p1:d},e,!0);var m=0;for(k=l.length;m<k;++m){var n=l[m],p=Xq(b,d,n.p0,n.p1,!0),r=Math.abs(b.x-p[0]);if(r<h&&void 0!==aq(b.x,b.y,n.p0.x,n.p0.y,n.p1.x,n.p1.y)){h=r;var u={x:p[0],y:p[1],i:-1};f=n}}if(Infinity===h)return!1;l=f.p1;if(0<h&&(f=Yq(b,u,f.p1,e),f.length))for(u=Infinity,m=0,k=f.length;m<k;++m)if(h=f[m],n=Math.atan2(b.y-h.y,d.x-h.x),n<u||n===u&&h.x<l.x)u=n,l=h;for(f=Hq(c);f.p1.x!==
l.x||f.p1.y!==l.y;)f=Iq(c);d={x:b.x,y:b.y,i:b.i,reflex:void 0};m={x:f.p1.x,y:f.p1.y,i:f.p1.i,reflex:void 0};Jq(a).p0=d;Vq(b,f.p1,a,e);Vq(m,d,a,e);f.p1=m;a.g&&(a.l=a.g,a.j=a.g.prev);c.concat(a);return!0}
function Tq(a,b,c){for(var d=!1,e=Zq(b,c);3<b.getLength();)if(e){if(!$q(a,b,c,e,d)&&!Rq(b,c,d)&&!ar(a,b,c,!0))break}else if(!$q(a,b,c,e,d)&&!Rq(b,c,d)&&!ar(a,b,c))if(e=Zq(b,c)){d=b;var f=2*d.getLength(),h=Array(f),k=Hq(d),l=k,m=0;do h[m++]=l.p0.x,h[m++]=l.p0.y,l=Iq(d);while(l!==k);d=!Nk(h,0,f,2);Rq(b,c,d)}else{e=a;d=b;f=h=Hq(d);do{k=Sq(f,c);if(k.length){h=k[0];k=Xq(f.p0,f.p1,h.p0,h.p1);k=Uq(e,k[0],k[1],e.j.length/2);l=new Fq;m=new om;Vq(k,f.p1,l,m);f.p1=k;c.update([Math.min(f.p0.x,k.x),Math.min(f.p0.y,
k.y),Math.max(f.p0.x,k.x),Math.max(f.p0.y,k.y)],f);for(f=Iq(d);f!==h;)Vq(f.p0,f.p1,l,m),c.remove(f),Gq(d),f=Mq(d);Vq(h.p0,k,l,m);h.p0=k;c.update([Math.min(h.p1.x,k.x),Math.min(h.p1.y,k.y),Math.max(h.p1.x,k.x),Math.max(h.p1.y,k.y)],h);Rq(d,c,!1);Tq(e,d,c);Rq(l,m,!1);Tq(e,l,m);break}f=Iq(d)}while(f!==h);break}3===b.getLength()&&(e=a.g.length,a.g[e++]=Lq(b).p0.i,a.g[e++]=Mq(b).p0.i,a.g[e++]=Jq(b).p0.i)}
function $q(a,b,c,d,e){var f=a.g.length,h=Hq(b),k=Lq(b),l=h,m=Iq(b),n=Jq(b),p=!1;do{var r=l.p0;var u=l.p1;var v=m.p1;if(!1===u.reflex){var x=d?0===Yq(r,u,v,c,!0).length:e?br(n.p1,v,u,r,k.p0):br(k.p0,r,u,v,n.p1);!d&&0!==Sq({p0:r,p1:v},c).length||!x||!d&&!1!==r.reflex&&!1!==v.reflex&&Nk([k.p0.x,k.p0.y,r.x,r.y,u.x,u.y,v.x,v.y,n.p1.x,n.p1.y],0,10,2)!==!e||(a.g[f++]=r.i,a.g[f++]=u.i,a.g[f++]=v.i,Wq(l,m,b,c),m===h&&(h=n),p=!0)}k=Lq(b);l=Mq(b);m=Iq(b);n=Jq(b)}while(l!==h&&3<b.getLength());return p}
function ar(a,b,c,d){var e=Hq(b);Iq(b);var f=e,h=Iq(b),k=!1;do{var l=Xq(f.p0,f.p1,h.p0,h.p1,d);if(l){k=a.g.length;var m=a.j.length/2,n=Kq(b);Gq(b);c.remove(n);var p=n===e;d?(l[0]===f.p0.x&&l[1]===f.p0.y?(Kq(b),l=f.p0,h.p0=l,c.remove(f),p=p||f===e):(l=h.p1,f.p1=l,c.remove(h),p=p||h===e),Gq(b)):(l=Uq(a,l[0],l[1],m),f.p1=l,h.p0=l,c.update([Math.min(f.p0.x,f.p1.x),Math.min(f.p0.y,f.p1.y),Math.max(f.p0.x,f.p1.x),Math.max(f.p0.y,f.p1.y)],f),c.update([Math.min(h.p0.x,h.p1.x),Math.min(h.p0.y,h.p1.y),Math.max(h.p0.x,
h.p1.x),Math.max(h.p0.y,h.p1.y)],h));a.g[k++]=n.p0.i;a.g[k++]=n.p1.i;a.g[k++]=l.i;k=!0;if(p)break}f=Lq(b);h=Iq(b)}while(f!==e);return k}function Zq(a,b){var c=Hq(a),d=c;do{if(Sq(d,b).length)return!1;d=Iq(a)}while(d!==c);return!0}function Uq(a,b,c,d){var e=a.j.length;a.j[e++]=b;a.j[e++]=c;return{x:b,y:c,i:d,reflex:void 0}}
function Vq(a,b,c,d){var e={p0:a,p1:b},f={prev:void 0,next:void 0,data:e},h=c.g;if(h){var k=h.next;f.prev=h;f.next=k;h.next=f;k&&(k.prev=f);h===c.j&&(c.j=f)}else c.l=f,c.j=f,f.next=f,f.prev=f;c.g=f;c.o++;d&&d.pf([Math.min(a.x,b.x),Math.min(a.y,b.y),Math.max(a.x,b.x),Math.max(a.y,b.y)],e);return e}function Wq(a,b,c,d){Mq(c)===b&&(Gq(c),a.p1=b.p1,d.remove(b),d.update([Math.min(a.p0.x,a.p1.x),Math.min(a.p0.y,a.p1.y),Math.max(a.p0.x,a.p1.x),Math.max(a.p0.y,a.p1.y)],a))}
function Yq(a,b,c,d,e){var f,h,k=[],l=qm(d,[Math.min(a.x,b.x,c.x),Math.min(a.y,b.y,c.y),Math.max(a.x,b.x,c.x),Math.max(a.y,b.y,c.y)]);d=0;for(f=l.length;d<f;++d)for(h in l[d]){var m=l[d][h];"object"!==typeof m||e&&!m.reflex||m.x===a.x&&m.y===a.y||m.x===b.x&&m.y===b.y||m.x===c.x&&m.y===c.y||-1!==k.indexOf(m)||!Lk([a.x,a.y,b.x,b.y,c.x,c.y],0,6,2,m.x,m.y)||k.push(m)}return k}
function Sq(a,b,c){var d=a.p0,e=a.p1;b=qm(b,[Math.min(d.x,e.x),Math.min(d.y,e.y),Math.max(d.x,e.x),Math.max(d.y,e.y)]);var f=[],h;var k=0;for(h=b.length;k<h;++k){var l=b[k];a!==l&&(c||l.p0!==e||l.p1!==d)&&Xq(d,e,l.p0,l.p1,c)&&f.push(l)}return f}
function Xq(a,b,c,d,e){var f=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y);if(0!==f&&(d=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/f,c=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/f,!e&&d>bq&&d<1-bq&&c>bq&&c<1-bq||e&&0<=d&&1>=d&&0<=c&&1>=c))return[a.x+d*(b.x-a.x),a.y+d*(b.y-a.y)]}
function br(a,b,c,d,e){if(void 0===b.reflex||void 0===d.reflex)return!1;var f=(c.x-d.x)*(b.y-d.y)>(c.y-d.y)*(b.x-d.x);e=(e.x-d.x)*(b.y-d.y)<(e.y-d.y)*(b.x-d.x);a=(a.x-b.x)*(d.y-b.y)>(a.y-b.y)*(d.x-b.x);c=(c.x-b.x)*(d.y-b.y)<(c.y-b.y)*(d.x-b.x);b=b.reflex?c||a:c&&a;return(d.reflex?e||f:e&&f)&&b}g=Nq.prototype;
g.Tf=function(a,b){var c=a.Gc,d=a.stride,e=this.g.length,f=this.s.g.length;a=a.flatCoordinates;var h,k,l;var m=k=0;for(h=c.length;m<h;++m){var n=c[m];if(0<n.length){var p=qi(a,k,n[0],d,-this.origin[0],-this.origin[1]);if(p.length){var r=[];k=1;for(l=n.length;k<l;++k)if(n[k]!==n[k-1]){var u=qi(a,n[k-1],n[k],d,-this.origin[0],-this.origin[1]);r.push(u)}Cq(this.s,p,r,d);Oq(this,p,r,d)}}k=n[n.length-1]}this.g.length>e&&(this.l.push(e),this.o.push(b),this.va.ia&&(this.B.push(e),this.va.ia=!1));this.s.g.length>
f&&Dq(this.s,b,f)};g.Uf=function(a,b){var c=a.Fd(),d=a.stride;if(0<c.length){a=a.flatCoordinates.map(Number);var e=qi(a,0,c[0],d,-this.origin[0],-this.origin[1]);if(e.length){var f=[],h;var k=1;for(h=c.length;k<h;++k)if(c[k]!==c[k-1]){var l=qi(a,c[k-1],c[k],d,-this.origin[0],-this.origin[1]);f.push(l)}this.l.push(this.g.length);this.o.push(b);this.va.ia&&(this.B.push(this.g.length),this.va.ia=!1);Dq(this.s,b);Cq(this.s,e,f,d);Oq(this,e,f,d)}}};
g.finish=function(a){this.G=new cq(this.j);this.A=new cq(this.g);this.l.push(this.g.length);this.s.finish(a);0===this.B.length&&0<this.L.length&&(this.L=[]);this.g=this.j=null};g.me=function(a){var b=this.G,c=this.A,d=this.s.me(a);return function(){eq(a,b);eq(a,c);d()}};g.Bn=function(a,b){var c=fq(b,tda,uda);if(this.I)var d=this.I;else this.I=d=new vda(a,c);gq(b,c);a.enableVertexAttribArray(d.g);a.vertexAttribPointer(d.g,2,5126,!1,8,0);return d};g.En=function(a,b){a.disableVertexAttribArray(b.g)};
g.Bj=function(a,b,c,d){var e=a.getParameter(a.DEPTH_FUNC),f=a.getParameter(a.DEPTH_WRITEMASK);d||(a.enable(a.DEPTH_TEST),a.depthMask(!0),a.depthFunc(a.NOTEQUAL));if(qh(c)){var h=this.l[this.l.length-1];for(c=this.B.length-1;0<=c;--c){var k=this.B[c];var l=this.L[c];a.uniform4fv(this.I.pa,l);Xp(a,b,k,h);h=k}}else{var m=this.l.length-2;l=h=this.l[m+1];for(k=this.B.length-1;0<=k;--k){var n=this.L[k];a.uniform4fv(this.I.pa,n);for(n=this.B[k];0<=m&&this.l[m]>=n;){var p=this.l[m];var r=this.o[m];r=H(r).toString();
c[r]&&(h!==l&&(Xp(a,b,h,l),a.clear(a.DEPTH_BUFFER_BIT)),l=p);m--;h=p}h!==l&&(Xp(a,b,h,l),a.clear(a.DEPTH_BUFFER_BIT));h=l=n}}d||(a.disable(a.DEPTH_TEST),a.clear(a.DEPTH_BUFFER_BIT),a.depthMask(f),a.depthFunc(e))};
g.Al=function(a,b,c,d,e){var f,h;var k=this.l.length-2;var l=this.l[k+1];for(f=this.B.length-1;0<=f;--f){var m=this.L[f];a.uniform4fv(this.I.pa,m);for(h=this.B[f];0<=k&&this.l[k]>=h;){m=this.l[k];var n=this.o[k];var p=H(n).toString();if(void 0===c[p]&&n.X()&&(void 0===e||li(e,n.X().aa()))&&(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),Xp(a,b,m,l),l=d(n)))return l;k--;l=m}}};
g.Bc=function(a,b){a=a?a.La():[0,0,0,0];a instanceof CanvasGradient||a instanceof CanvasPattern?a=Yp:a=lj(a).map(function(a,b){return 3!=b?a/255:a})||Yp;this.va.fillColor&&jk(a,this.va.fillColor)||(this.va.fillColor=a,this.va.ia=!0,this.L.push(a));b?this.s.Bc(null,b):this.s.Bc(null,new ak({color:[0,0,0,0],lineWidth:0}))};function cr(a,b){this.g=b;this.j=[{x:0,y:0,width:a,height:a}];this.o={};this.l=qj(a,a);this.s=this.l.canvas}cr.prototype.get=function(a){return this.o[a]||null};
cr.prototype.add=function(a,b,c,d,e){var f;var h=0;for(f=this.j.length;h<f;++h){var k=this.j[h];if(k.width>=b+this.g&&k.height>=c+this.g)return f={offsetX:k.x+this.g,offsetY:k.y+this.g,image:this.s},this.o[a]=f,d.call(e,this.l,k.x+this.g,k.y+this.g),a=h,b+=this.g,d=c+this.g,k.width-b>k.height-d?(c={x:k.x+b,y:k.y,width:k.width-b,height:k.height},b={x:k.x,y:k.y+d,width:b,height:k.height-d},dr(this,a,c,b)):(c={x:k.x+b,y:k.y,width:k.width-b,height:d},b={x:k.x,y:k.y+d,width:k.width,height:k.height-d},
dr(this,a,c,b)),f}return null};function dr(a,b,c,d){b=[b,1];0<c.width&&0<c.height&&b.push(c);0<d.width&&0<d.height&&b.push(d);a.j.splice.apply(a.j,b)};function er(a){a=a||{};this.j=void 0!==a.initialSize?a.initialSize:256;this.l=void 0!==a.maxSize?a.maxSize:void 0!==Rg?Rg:2048;this.g=void 0!==a.space?a.space:1;this.A=[new cr(this.j,this.g)];this.o=this.j;this.s=[new cr(this.o,this.g)]}er.prototype.Oo=function(a){var b=fr(this.A,a);if(!b)return null;a=fr(this.s,a);return gr(b,a)};function fr(a,b){var c;var d=0;for(c=a.length;d<c;++d){var e=a[d];if(e=e.get(b))return e}return null}
function gr(a,b){return{offsetX:a.offsetX,offsetY:a.offsetY,image:a.image,hitImage:b.image}}er.prototype.add=function(a,b,c,d,e,f){if(b+this.g>this.l||c+this.g>this.l)return null;d=hr(this,!1,a,b,c,d,f);if(!d)return null;a=hr(this,!0,a,b,c,void 0!==e?e:lh,f);return gr(d,a)};
function hr(a,b,c,d,e,f,h){var k=b?a.s:a.A,l;var m=0;for(l=k.length;m<l;++m){var n=k[m];if(n=n.add(c,d,e,f,h))return n;n||m!==l-1||(b?(n=Math.min(2*a.o,a.l),a.o=n):(n=Math.min(2*a.j,a.l),a.j=n),n=new cr(n,a.g),k.push(n),++l)}return null};function ir(a,b){nq.call(this,a,b);this.B=[];this.nb=[];this.zb=qj(0,0).canvas;this.va={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0};this.Mb="";this.bb=this.Ca=this.jb=this.hb=void 0;this.pa={};this.I=void 0;this.opacity=this.scale=1}G(ir,nq);g=ir.prototype;
g.Ze=function(a,b){if(this.Mb){var c=null,d=2,e=2;switch(a.T()){case "Point":case "MultiPoint":c=a.flatCoordinates;d=c.length;e=a.stride;break;case "Circle":c=Wk(a);break;case "LineString":c=wo(a);break;case "MultiLineString":c=xo(a);d=c.length;break;case "Polygon":c=Tk(a);break;case "MultiPolygon":c=yo(a),d=c.length}this.l.push(this.g.length);this.o.push(b);a=this.I;b=this.Mb.split("\n");var f=xda(this,b),h,k,l,m=Math.round(f[0]*this.hb-this.Ca),n=Math.round(f[1]*this.jb-this.bb),p=this.va.lineWidth/
2*this.va.scale;f=0;for(h=b.length;f<h;++f){var r=0;var u=a.height*f;var v=b[f].split("");var x=0;for(k=v.length;x<k;++x){if(l=a.atlas.Oo(v[x])){var B=l.image;this.P=m-r;this.U=n-u;this.ka=0===x?l.offsetX-p:l.offsetX;this.oa=l.offsetY;this.height=a.height;this.width=0===x||x===v.length-1?a.width[v[x]]+p:a.width[v[x]];this.Z=B.height;this.Ea=B.width;0===this.B.length?this.B.push(B):(l=this.B[this.B.length-1],H(l)!=H(B)&&(this.L.push(this.g.length),this.B.push(B)));l=c;var F=d,D=e;for(B=0;B<F;B+=D)oq(this,
l,F,D)}r+=this.width}}}};function xda(a,b){var c=a.I,d=b.length*c.height;return[b.map(function(b){var d=0,e;var k=0;for(e=b.length;k<e;++k){var l=b[k];c.width[l]||yda(a,l);d+=c.width[l]?c.width[l]:0}return d}).reduce(function(a,b){return Math.max(a,b)}),d]}
function yda(a,b){if(1===b.length){var c=a.I,d=a.va;a=a.zb.getContext("2d");a.font=d.font;a=Math.ceil(a.measureText(b).width*d.scale);c.atlas.add(b,a,c.height,function(a,c,h){a.font=d.font;a.fillStyle=d.fillColor;a.strokeStyle=d.strokeColor;a.lineWidth=d.lineWidth;a.lineCap=d.lineCap;a.lineJoin=d.lineJoin;a.miterLimit=d.miterLimit;a.textAlign="left";a.textBaseline="top";Cj&&d.lineDash&&(a.setLineDash(d.lineDash),a.lineDashOffset=d.lineDashOffset);1!==d.scale&&a.setTransform(d.scale,0,0,d.scale,0,
0);d.strokeColor&&a.strokeText(b,c,h);d.fillColor&&a.fillText(b,c,h)})&&(c.width[b]=a)}}
g.finish=function(a){var b=a.g;this.L.push(this.g.length);this.N=this.L;this.G=new cq(this.j);this.A=new cq(this.g);pq(this.nb,this.B,{},b);this.va={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0};this.Mb="";this.bb=this.Ca=this.jb=this.hb=void 0;this.B=null;this.pa={};this.I=void 0;nq.prototype.finish.call(this,a)};
g.Ld=function(a){var b=this.va,c=a.ob(),d=a.kb();if(a&&a.ub()&&(c||d)){c?(c=c.La(),b.fillColor=pj(c?c:Yp)):b.fillColor=null;d?(c=d.La(),b.strokeColor=pj(c?c:$p),b.lineWidth=d.g||1,b.lineCap=d.s||"round",b.lineDashOffset=d.o||0,b.lineJoin=d.A||"round",b.miterLimit=d.B||10,d=d.j,b.lineDash=d?d.slice():Zp):(b.strokeColor=null,b.lineWidth=0);b.font=a.Ge()||"10px sans-serif";b.scale=a.j||1;this.Mb=a.ub();d=gp[a.g];c=gp[a.l];this.hb=void 0===d?.5:d;this.jb=void 0===c?.5:c;this.Ca=a.Vf||0;this.bb=a.o||0;
this.rotateWithView=!!a.s;this.rotation=a.A||0;a=[];for(var e in b)if(b[e]||0===b[e])Array.isArray(b[e])?a=a.concat(b[e]):a.push(b[e]);c="";e=0;for(d=a.length;e<d;++e)c+=a[e];e=c;this.pa[e]||(a=this.zb.getContext("2d"),a.font=b.font,a=Math.ceil((1.5*a.measureText("M").width+b.lineWidth/2)*b.scale),this.pa[e]={atlas:new er({space:b.lineWidth+1}),width:{},height:a});this.I=this.pa[e]}else this.Mb=""};g.Wo=function(){return this.nb};g.Mo=function(){return this.nb};function jr(a,b,c){this.j=b;this.l=a;this.xe=c;this.g={}}G(jr,dp);g=jr.prototype;g.We=function(){};function kr(a,b){var c=[],d;for(d in a.g){var e=a.g[d],f;for(f in e)c.push(e[f].me(b))}return function(){for(var a=c.length,b,d=0;d<a;d++)b=c[d].apply(this,arguments);return b}}g.finish=function(a){for(var b in this.g){var c=this.g[b],d;for(d in c)c[d].finish(a)}};
g.nc=function(a,b){var c=void 0!==a?a.toString():"0";a=this.g[c];void 0===a&&(a={},this.g[c]=a);c=a[b];void 0===c&&(c=new zda[b](this.l,this.j),a[b]=c);return c};g.isEmpty=function(){return qh(this.g)};g.vc=function(a,b,c,d,e,f,h,k){var l=Object.keys(this.g).map(Number);l.sort(gk);var m,n;var p=0;for(m=l.length;p<m;++p){var r=this.g[l[p].toString()];var u=0;for(n=fp.length;u<n;++u){var v=r[fp[u]];void 0!==v&&v.vc(a,b,c,d,e,f,h,k,void 0,!1)}}};
function Ada(a,b,c,d,e,f,h,k,l,m){var n=Bda,p=Object.keys(a.g).map(Number);p.sort(function(a,b){return b-a});var r,u;var v=0;for(r=p.length;v<r;++v){var x=a.g[p[v].toString()];for(u=fp.length-1;0<=u;--u){var B=x[fp[u]];if(void 0!==B&&(B=B.vc(b,c,d,e,n,f,h,k,l,!0,m)))return B}}}
g.sc=function(a,b,c,d,e,f,h,k,l,m){var n=b.g;n.bindFramebuffer(n.FRAMEBUFFER,nda(b));var p;void 0!==this.xe&&(p=Vh(ai(a),d*this.xe));return Ada(this,b,a,d,e,h,k,l,function(a){var b=new Uint8Array(4);n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,b);if(0<b[3]&&(a=m(a)))return a},p)};var Bda=[1,1],zda={Circle:dq,Image:qq,LineString:sq,Polygon:Nq,Text:ir};function lr(a,b,c,d,e,f,h){this.g=a;this.l=b;this.o=f;this.s=h;this.G=e;this.B=d;this.A=c;this.j=this.I=this.L=this.N=null}G(lr,oo);function mr(a,b,c){var d=a.g;b=b.nc(0,"Text");b.Ld(a.j);b.Ze(c,null);b.finish(d);b.vc(a.g,a.l,a.A,a.B,a.G,a.s,1,{},void 0,!1);b.me(d)()}g=lr.prototype;g.yb=function(a){this.Bc(a.ob(),a.kb());this.Af(a.Ua());this.Ld(a.ub())};
g.kh=function(a){switch(a.T()){case "Point":this.Pg(a,null);break;case "LineString":this.Ng(a,null);break;case "Polygon":this.Uf(a,null);break;case "MultiPoint":this.Og(a,null);break;case "MultiLineString":this.tg(a,null);break;case "MultiPolygon":this.Tf(a,null);break;case "GeometryCollection":this.zl(a);break;case "Circle":this.Gf(a,null)}};g.jh=function(a,b){(a=(0,b.ef)(a))&&li(this.o,a.aa())&&(this.yb(b),this.kh(a))};g.zl=function(a){a=a.g;var b;var c=0;for(b=a.length;c<b;++c)this.kh(a[c])};
g.Pg=function(a,b){var c=this.g,d=new jr(1,this.o),e=d.nc(0,"Image");e.Af(this.N);e.Pg(a,b);e.finish(c);e.vc(this.g,this.l,this.A,this.B,this.G,this.s,1,{},void 0,!1);e.me(c)();this.j&&mr(this,d,a)};g.Og=function(a,b){var c=this.g,d=new jr(1,this.o),e=d.nc(0,"Image");e.Af(this.N);e.Og(a,b);e.finish(c);e.vc(this.g,this.l,this.A,this.B,this.G,this.s,1,{},void 0,!1);e.me(c)();this.j&&mr(this,d,a)};
g.Ng=function(a,b){var c=this.g,d=new jr(1,this.o),e=d.nc(0,"LineString");e.Bc(null,this.I);e.Ng(a,b);e.finish(c);e.vc(this.g,this.l,this.A,this.B,this.G,this.s,1,{},void 0,!1);e.me(c)();this.j&&mr(this,d,a)};g.tg=function(a,b){var c=this.g,d=new jr(1,this.o),e=d.nc(0,"LineString");e.Bc(null,this.I);e.tg(a,b);e.finish(c);e.vc(this.g,this.l,this.A,this.B,this.G,this.s,1,{},void 0,!1);e.me(c)();this.j&&mr(this,d,a)};
g.Uf=function(a,b){var c=this.g,d=new jr(1,this.o),e=d.nc(0,"Polygon");e.Bc(this.L,this.I);e.Uf(a,b);e.finish(c);e.vc(this.g,this.l,this.A,this.B,this.G,this.s,1,{},void 0,!1);e.me(c)();this.j&&mr(this,d,a)};g.Tf=function(a,b){var c=this.g,d=new jr(1,this.o),e=d.nc(0,"Polygon");e.Bc(this.L,this.I);e.Tf(a,b);e.finish(c);e.vc(this.g,this.l,this.A,this.B,this.G,this.s,1,{},void 0,!1);e.me(c)();this.j&&mr(this,d,a)};
g.Gf=function(a,b){var c=this.g,d=new jr(1,this.o),e=d.nc(0,"Circle");e.Bc(this.L,this.I);e.Gf(a,b);e.finish(c);e.vc(this.g,this.l,this.A,this.B,this.G,this.s,1,{},void 0,!1);e.me(c)();this.j&&mr(this,d,a)};g.Af=function(a){this.N=a};g.Bc=function(a,b){this.L=a;this.I=b};g.Ld=function(a){this.j=a};var Cda=new Rp("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n"),Dda=new Sp("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n");function Eda(a,b){this.A=a.getUniformLocation(b,"u_texCoordMatrix");this.o=a.getUniformLocation(b,"u_projectionMatrix");this.l=a.getUniformLocation(b,"u_opacity");this.s=a.getUniformLocation(b,"u_texture");this.g=a.getAttribLocation(b,"a_position");this.j=a.getAttribLocation(b,"a_texCoord")};function nr(a,b){zo.call(this,b);this.g=a;this.ka=new cq([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.o=this.texture=null;this.s=void 0;this.N=aj();this.P=aj();this.U=Tp();this.G=null}G(nr,zo);
function Fda(a,b,c){var d=a.g.l;if(void 0===a.s||a.s!=c){var e=function(a,b,c){a.isContextLost()||(a.deleteFramebuffer(b),a.deleteTexture(c))}.bind(null,d,a.o,a.texture);b.postRenderFunctions.push(e);b=jq(d,c,c);e=d.createFramebuffer();d.bindFramebuffer(36160,e);d.framebufferTexture2D(36160,36064,3553,b,0);a.texture=b;a.o=e;a.s=c}else d.bindFramebuffer(36160,a.o)}
nr.prototype.Ev=function(a,b,c){or(this,"precompose",c,a);Wp(c,34962,this.ka);var d=c.g,e=fq(c,Cda,Dda);if(this.G)var f=this.G;else this.G=f=new Eda(d,e);gq(c,e)&&(d.enableVertexAttribArray(f.g),d.vertexAttribPointer(f.g,2,5126,!1,16,0),d.enableVertexAttribArray(f.j),d.vertexAttribPointer(f.j,2,5126,!1,16,8),d.uniform1i(f.s,0));d.uniformMatrix4fv(f.A,!1,Up(this.U,this.N));d.uniformMatrix4fv(f.o,!1,Up(this.U,this.P));d.uniform1f(f.l,b.opacity);d.bindTexture(3553,this.texture);d.drawArrays(5,0,4);or(this,
"postcompose",c,a)};function or(a,b,c,d){a=a.W();if(a.Sd(b)){var e=d.viewState;a.dispatchEvent(new no(b,new lr(c,e.center,e.resolution,e.rotation,d.size,d.extent,d.pixelRatio),d,null,c))}}nr.prototype.I=function(){this.o=this.texture=null;this.s=void 0};function pr(a,b){nr.call(this,a,b);this.wa=null}G(pr,nr);pr.handles=function(a,b){return"webgl"===a&&"IMAGE"===b.T()};pr.create=function(a,b){return new pr(a,b)};function Gda(a,b){b=b.Ua();return mq(a.g.l,b)}pr.prototype.sc=function(a,b,c,d,e){var f=this.W();return f.O().sc(a,b.viewState.resolution,b.viewState.rotation,c,b.skippedFeatureUids,function(a){return d.call(e,a,f)})};
pr.prototype.Xp=function(a,b){var c=this.g.l,d=a.pixelRatio,e=a.viewState,f=e.center,h=e.resolution,k=e.rotation,l=this.wa,m=this.texture,n=this.W().O(),p=a.viewHints,r=a.extent;void 0!==b.extent&&(r=ki(r,b.extent));p[0]||p[1]||fi(r)||(b=n.Ua(r,h,d,e.projection))&&Co(this,b)&&(l=b,m=Gda(this,b),this.texture&&(c=function(a,b){a.isContextLost()||a.deleteTexture(b)}.bind(null,c,this.texture),a.postRenderFunctions.push(c)));l&&(c=this.g.getContext().B,Hda(this,c.width,c.height,d,f,h,k,l.aa()),d=this.N,
bj(d),hj(d,1,-1),ij(d,0,-1),this.wa=l,this.texture=m,Eo(a,n));return!!l};function Hda(a,b,c,d,e,f,h,k){b*=f;c*=f;a=a.P;bj(a);hj(a,2*d/b,2*d/c);gj(a,-h);ij(a,k[0]-e[0],k[1]-e[1]);hj(a,(k[2]-k[0])/2,(k[3]-k[1])/2);ij(a,1,1)};function qr(a,b){Ro.call(this,a,b);this.g=document.createElement("CANVAS");this.g.style.width="100%";this.g.style.height="100%";this.g.style.display="block";this.g.className="ol-unselectable";a.insertBefore(this.g,a.childNodes[0]||null);this.N=this.P=0;this.U=qj();this.B=!0;this.l=vj(this.g,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0});this.I=new iq(this.g,this.l);I(this.g,"webglcontextlost",this.TF,this);I(this.g,"webglcontextrestored",this.UF,this);
this.j=new Ij;this.L=null;this.A=new en(function(a){var b=a[1];a=a[2];var c=b[0]-this.L[0];b=b[1]-this.L[1];return 65536*Math.log(a)+Math.sqrt(c*c+b*b)/a}.bind(this),function(a){return a[0].getKey()});this.pa=function(){if(!this.A.isEmpty()){hn(this.A);var a=this.A.dequeue();rr(this,a[0],a[3],a[4])}return!1}.bind(this);this.s=0;sr(this)}G(qr,Ro);qr.handles=function(a){return wj&&"webgl"===a};qr.create=function(a,b){return new qr(a,b)};
function rr(a,b,c,d){var e=a.l,f=b.getKey();if(Jj(a.j,f))a=a.j.get(f),e.bindTexture(3553,a.texture),9729!=a.magFilter&&(e.texParameteri(3553,10240,9729),a.magFilter=9729),9729!=a.minFilter&&(e.texParameteri(3553,10241,9729),a.minFilter=9729);else{var h=e.createTexture();e.bindTexture(3553,h);if(0<d){var k=a.U.canvas,l=a.U;a.P!==c[0]||a.N!==c[1]?(k.width=c[0],k.height=c[1],a.P=c[0],a.N=c[1]):l.clearRect(0,0,c[0],c[1]);l.drawImage(b.Ua(),d,d,c[0],c[1],0,0,c[0],c[1]);e.texImage2D(3553,0,6408,6408,5121,
k)}else e.texImage2D(3553,0,6408,6408,5121,b.Ua());e.texParameteri(3553,10240,9729);e.texParameteri(3553,10241,9729);e.texParameteri(3553,10242,33071);e.texParameteri(3553,10243,33071);a.j.set(f,{texture:h,magFilter:9729,minFilter:9729})}}function tr(a,b,c){var d=a.Y();if(d.Sd(b)){a=a.I;var e=c.viewState;d.dispatchEvent(new no(b,new lr(a,e.center,e.resolution,e.rotation,c.size,c.extent,c.pixelRatio),c,null,a))}}g=qr.prototype;
g.J=function(){var a=this.l;a.isContextLost()||this.j.forEach(function(b){b&&a.deleteTexture(b.texture)});this.I.dispose();Ro.prototype.J.call(this)};g.DC=function(a,b){a=this.l;for(var c;1024<this.j.l-this.s;){if(c=this.j.j.value_)a.deleteTexture(c.texture);else if(+this.j.j.key_==b.index)break;else--this.s;this.j.pop()}};g.getContext=function(){return this.I};g.T=function(){return"webgl"};g.TF=function(a){a.preventDefault();this.j.clear();this.s=0;a=this.o;for(var b in a)a[b].I()};
g.UF=function(){sr(this);this.Y().render()};function sr(a){a=a.l;a.activeTexture(33984);a.blendFuncSeparate(770,771,1,771);a.disable(2884);a.disable(2929);a.disable(3089);a.disable(2960)}
g.Mi=function(a){var b=this.getContext(),c=this.l;if(c.isContextLost())return!1;if(!a)return this.B&&(this.g.style.display="none",this.B=!1),!1;this.L=a.focus;this.j.set((-a.index).toString(),null);++this.s;tr(this,"precompose",a);var d=[],e=a.layerStatesArray;kk(e,Wo);var f=a.viewState.resolution,h;var k=0;for(h=e.length;k<h;++k){var l=e[k];if(tl(l,f)&&"ready"==l.sourceState){var m=Uo(this,l.layer);m.Xp(a,l,b)&&d.push(l)}}e=a.size[0]*a.pixelRatio;f=a.size[1]*a.pixelRatio;if(this.g.width!=e||this.g.height!=
f)this.g.width=e,this.g.height=f;c.bindFramebuffer(36160,null);c.clearColor(0,0,0,0);c.clear(16384);c.enable(3042);c.viewport(0,0,this.g.width,this.g.height);k=0;for(h=d.length;k<h;++k)l=d[k],m=Uo(this,l.layer),m.Ev(a,l,b);this.B||(this.g.style.display="",this.B=!0);So(a);1024<this.j.l-this.s&&a.postRenderFunctions.push(this.DC.bind(this));this.A.isEmpty()||(a.postRenderFunctions.push(this.pa),a.animate=!0);tr(this,"postcompose",a);Vo(this,a);a.postRenderFunctions.push(To)};
g.sc=function(a,b,c,d,e,f,h){if(this.l.isContextLost())return!1;var k=b.viewState,l=b.layerStatesArray,m;for(m=l.length-1;0<=m;--m){var n=l[m];var p=n.layer;if(tl(n,k.resolution)&&f.call(h,p)&&(n=Uo(this,p).sc(a,b,c,d,e)))return n}};var Ida=new Rp("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n"),Jda=new Sp("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n");function Kda(a,b){this.o=a.getUniformLocation(b,"u_tileOffset");this.l=a.getUniformLocation(b,"u_texture");this.g=a.getAttribLocation(b,"a_position");this.j=a.getAttribLocation(b,"a_texCoord")};function ur(a,b){nr.call(this,a,b);this.Z=Ida;this.Ca=Jda;this.j=null;this.pa=new cq([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.L=this.l=null;this.B=-1;this.Ea=[0,0]}G(ur,nr);ur.handles=function(a,b){return"webgl"===a&&"TILE"===b.T()};ur.create=function(a,b){return new ur(a,b)};ur.prototype.J=function(){eq(this.g.getContext(),this.pa);nr.prototype.J.call(this)};
ur.prototype.A=function(a,b,c){var d=this.g;return function(e,f){return Ao(a,b,e,f,function(a){var b=Jj(d.j,a.getKey());b&&(c[e]||(c[e]={}),c[e][a.fc.toString()]=a);return b})}};ur.prototype.I=function(){nr.prototype.I.call(this);this.j=null};
ur.prototype.Xp=function(a,b,c){var d=this.g,e=c.g,f=a.viewState,h=f.projection,k=this.W(),l=k.O(),m=l.Rd(h),n=fm(m,f.resolution),p=m.ab(n),r=cp(l,n,a.pixelRatio,h),u=r[0]/Ul(bm(m,n),this.Ea)[0],v=p/u,x=l.Ai(u)*l.Ko(h),B=f.center,F=a.extent,D=Zl(m,F,n);if(this.l&&this.l.equals(D)&&this.B==l.Yb)v=this.L;else{var S=[D.maxX-D.minX+1,D.maxY-D.minY+1],ia=Jba(Math.max(S[0]*r[0],S[1]*r[1]));S=v*ia;var ea=$l(m,n),ca=ea[0]+D.minX*r[0]*v;v=ea[1]+D.minY*r[1]*v;v=[ca,v,ca+S,v+S];Fda(this,a,ia);e.viewport(0,0,
ia,ia);e.clearColor(0,0,0,0);e.clear(16384);e.disable(3042);ia=fq(c,this.Z,this.Ca);gq(c,ia);this.j||(this.j=new Kda(e,ia));Wp(c,34962,this.pa);e.enableVertexAttribArray(this.j.g);e.vertexAttribPointer(this.j.g,2,5126,!1,16,0);e.enableVertexAttribArray(this.j.j);e.vertexAttribPointer(this.j.j,2,5126,!1,16,8);e.uniform1i(this.j.l,0);c={};c[n]={};var Y=this.A(l,h,c),ja=vl(k);ia=!0;ca=Th();var Ga=new Ql(0,0,0,0),Oa,tc;for(Oa=D.minX;Oa<=D.maxX;++Oa)for(tc=D.minY;tc<=D.maxY;++tc){ea=Ho(l,n,Oa,tc,u,h);
if(void 0!==b.extent){var Ta=Yl(m,ea.fc,ca);if(!li(Ta,b.extent))continue}Ta=ea.getState();(Ta=2==Ta||4==Ta||3==Ta&&!ja)||(ea=ap(ea));Ta=ea.getState();if(2==Ta){if(Jj(d.j,ea.getKey())){c[n][ea.fc.toString()]=ea;continue}}else if(4==Ta||3==Ta&&!ja)continue;ia=!1;Ta=Xl(m,ea.fc,Y,Ga,ca);Ta||(ea=am(m,ea.fc,Ga,ca))&&Y(n+1,ea)}b=Object.keys(c).map(Number);b.sort(gk);Y=new Float32Array(4);var ka;ja=0;for(Ga=b.length;ja<Ga;++ja)for(ka in Oa=c[b[ja]],Oa)ea=Oa[ka],Ta=Yl(m,ea.fc,ca),Y[0]=2*(Ta[2]-Ta[0])/S,Y[1]=
2*(Ta[3]-Ta[1])/S,Y[2]=2*(Ta[0]-v[0])/S-1,Y[3]=2*(Ta[1]-v[1])/S-1,e.uniform4fv(this.j.o,Y),rr(d,ea,r,x*u),e.drawArrays(5,0,4);ia?(this.l=D,this.L=v,this.B=l.Yb):(this.L=this.l=null,this.B=-1,a.animate=!0)}Fo(a.usedTiles,l,n,D);var Vb=d.A;Go(a,l,m,u,h,F,n,k.get("preload"),function(a){var b;(b=2!=a.getState()||Jj(d.j,a.getKey()))||(b=a.getKey()in Vb.j);b||Vb.s([a,dm(m,a.fc),m.ab(a.fc[0]),r,x*u])},this);Do(a,l);Eo(a,l);e=this.N;bj(e);ij(e,(Math.round(B[0]/p)*p-v[0])/(v[2]-v[0]),(Math.round(B[1]/p)*p-
v[1])/(v[3]-v[1]));0!==f.rotation&&gj(e,f.rotation);hj(e,a.size[0]*f.resolution/(v[2]-v[0]),a.size[1]*f.resolution/(v[3]-v[1]));ij(e,-.5,-.5);return!0};function vr(a,b){nr.call(this,a,b);this.l=!1;this.Ea=-1;this.Z=NaN;this.L=Th();this.B=this.j=this.pa=null}G(vr,nr);vr.handles=function(a,b){return"webgl"===a&&"VECTOR"===b.T()};vr.create=function(a,b){return new vr(a,b)};g=vr.prototype;g.Ev=function(a,b,c){this.B=b;var d=a.viewState,e=this.j,f=a.size,h=a.pixelRatio,k=this.g.l;e&&!e.isEmpty()&&(k.enable(k.SCISSOR_TEST),k.scissor(0,0,f[0]*h,f[1]*h),e.vc(c,d.center,d.resolution,d.rotation,f,h,b.opacity,b.managed?a.skippedFeatureUids:{}),k.disable(k.SCISSOR_TEST))};
g.J=function(){var a=this.j;if(a){var b=this.g.getContext();kr(a,b)();this.j=null}nr.prototype.J.call(this)};g.sc=function(a,b,c,d,e){if(this.j&&this.B){c=this.g.getContext();var f=b.viewState,h=this.W(),k={};return this.j.sc(a,c,f.center,f.resolution,f.rotation,b.size,b.pixelRatio,this.B.opacity,{},function(a){var b=H(a).toString();if(!(b in k))return k[b]=!0,d.call(e,a,h)})}};g.Fv=function(){Bo(this)};
g.Xp=function(a,b,c){function d(a){var b=a.ke();if(b)var c=b.call(a,m);else(b=e.ke())&&(c=b(a,m));if(c){if(c){b=!1;if(Array.isArray(c))for(var d=c.length-1;0<=d;--d)b=Kp(r,a,c[d],Jp(m,n),this.Fv,this)||b;else b=Kp(r,a,c,Jp(m,n),this.Fv,this)||b;a=b}else a=!1;this.l=this.l||a}}var e=this.W();b=e.O();Eo(a,b);var f=a.viewHints[0],h=a.viewHints[1],k=e.rA,l=e.sA;if(!this.l&&!k&&f||!l&&h)return!0;h=a.extent;k=a.viewState;f=k.projection;var m=k.resolution,n=a.pixelRatio;k=e.Yb;var p=e.xe;l=e.get("renderOrder");
void 0===l&&(l=Ip);h=Vh(h,p*m);if(!this.l&&this.Z==m&&this.Ea==k&&this.pa==l&&Yh(this.L,h))return!0;this.j&&a.postRenderFunctions.push(kr(this.j,c));this.l=!1;var r=new jr(.5*m/n,h,e.xe);Am(b,h,m,f);if(l){var u=[];xm(b,h,function(a){u.push(a)},this);u.sort(l);u.forEach(d,this)}else xm(b,h,d,this);r.finish(c);this.Z=m;this.Ea=k;this.pa=l;this.L=h;this.j=r;return!0};pn("MAP_RENDERER",Xo);qn([No,Zo,Op,Pp]);pn("MAP_RENDERER",qr);qn([pr,ur,vr]);
function wr(a){a=nh({},a);if(!a.controls){var b=a,c={},d=new Kh;(void 0!==c.zoom?c.zoom:1)&&d.push(new Dn(c.zoomOptions));(void 0!==c.rotate?c.rotate:1)&&d.push(new Cn(c.rotateOptions));(void 0!==c.attribution?c.attribution:1)&&d.push(new An(c.attributionOptions));b.controls=d}if(!a.interactions){b=a;c={};d=new Kh;var e=new En;(void 0!==c.altShiftDragRotate?c.altShiftDragRotate:1)&&d.push(new Wn);(void 0!==c.doubleClickZoom?c.doubleClickZoom:1)&&d.push(new Ln({delta:c.zoomDelta,duration:c.zoomDuration}));
(void 0!==c.dragPan?c.dragPan:1)&&d.push(new Vn({kinetic:e}));(void 0!==c.pinchRotate?c.pinchRotate:1)&&d.push(new jo);(void 0!==c.pinchZoom?c.pinchZoom:1)&&d.push(new ko({constrainResolution:c.constrainResolution,duration:c.zoomDuration}));if(void 0!==c.keyboard?c.keyboard:1)d.push(new co),d.push(new fo({delta:c.zoomDelta,duration:c.zoomDuration}));(void 0!==c.mouseWheelZoom?c.mouseWheelZoom:1)&&d.push(new ho({constrainResolution:c.constrainResolution,duration:c.zoomDuration}));(void 0!==c.shiftDragZoom?
c.shiftDragZoom:1)&&d.push(new bo({duration:c.zoomDuration}));b.interactions=d}rn.call(this,a)}G(wr,rn);function xr(a,b,c,d,e){var f=NaN,h=NaN,k=(c-b)/d;if(1===k)f=a[b],h=a[b+1];else if(2==k)f=.5*a[b]+.5*a[b+d],h=.5*a[b+1]+.5*a[b+d+1];else if(0!==k){h=a[b];k=a[b+1];var l=0;f=[0];var m;for(m=b+d;m<c;m+=d){var n=a[m],p=a[m+1];l+=Math.sqrt((n-h)*(n-h)+(p-k)*(p-k));f.push(l);h=n;k=p}c=.5*l;l=0;m=f.length;for(n=!1;l<m;)h=l+(m-l>>1),k=+gk(f[h],c),0>k?l=h+1:(m=h,n=!k);h=n?l:~l;0>h?(c=(c-f[-h-2])/(f[-h-1]-f[-h-2]),b+=(-h-2)*d,f=a[b],f+=c*(a[b+d]-f),h=a[b+1],h+=c*(a[b+d+1]-h)):(f=a[b+h*d],h=a[b+h*d+1])}return e?
(e[0]=f,e[1]=h,e):[f,h]};function yr(a,b){tk.call(this);this.g=null;this.o=-1;this.ic(a,b)}G(yr,tk);g=yr.prototype;g.clone=function(){var a=new yr(null);zr(a,this.layout,this.flatCoordinates.slice());return a};g.getCoordinates=function(){return Dk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};g.getLength=function(){return ep(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};
function wo(a){if(a.o!=a.Yb){var b=xr(a.flatCoordinates,0,a.flatCoordinates.length,a.stride,a.g);a.g=b;a.o=a.Yb}return a.g}g.yi=function(a){var b=[];b.length=Gk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b,0);a=new yr(null);zr(a,"XY",b);return a};g.T=function(){return"LineString"};g.ic=function(a,b){a?(xk(this,b,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bk(this.flatCoordinates,0,a,this.stride),this.ia()):zr(this,"XY",null)};
function zr(a,b,c){wk(a,b,c);a.ia()};function Ar(a,b){tk.call(this);this.g=[];this.ic(a,b)}G(Ar,tk);g=Ar.prototype;g.clone=function(){var a=new Ar(null);Br(a,this.layout,this.flatCoordinates.slice(),this.g.slice());return a};g.getCoordinates=function(){return Ek(this.flatCoordinates,0,this.g,this.stride)};g.Fd=function(){return this.g};function Cr(a){var b=a.flatCoordinates,c=a.g;a=a.layout;var d=[],e=0,f;var h=0;for(f=c.length;h<f;++h){var k=c[h],l=new yr(null);zr(l,a,b.slice(e,k));d.push(l);e=k}return d}
function xo(a){var b=[],c=a.flatCoordinates,d=0,e=a.g;a=a.stride;var f;var h=0;for(f=e.length;h<f;++h){var k=e[h];d=xr(c,d,k,a);ik(b,d);d=k}return b}g.yi=function(a){var b=[],c=[],d=this.flatCoordinates,e=this.g,f=this.stride,h=0,k=0,l;var m=0;for(l=e.length;m<l;++m){var n=e[m];k=Gk(d,h,n,f,a,b,k);c.push(k);h=n}b.length=k;a=new Ar(null);Br(a,"XY",b,c);return a};g.T=function(){return"MultiLineString"};
g.ic=function(a,b){a?(xk(this,b,a,2),this.flatCoordinates||(this.flatCoordinates=[]),a=Ck(this.flatCoordinates,0,a,this.stride,this.g),this.flatCoordinates.length=0===a.length?0:a[a.length-1],this.ia()):Br(this,"XY",null,this.g)};function Br(a,b,c,d){wk(a,b,c);a.g=d;a.ia()}function Dr(a,b){var c=a.layout,d=[],e=[],f;var h=0;for(f=b.length;h<f;++h){var k=b[h];0===h&&(c=k.layout);ik(d,k.flatCoordinates);e.push(d.length)}Br(a,c,d,e)};function Er(a,b){var c=[];b=b||function(){return Aa(h)?"o"+Ca(h):(typeof h).slice(0,2)+h};for(var d={},e=0,f=0;f<a.length;){var h=a[f++],k=b(h);Object.prototype.hasOwnProperty.call(d,k)?c[e++]=h:d[k]=!0}return c}function Lda(a,b){return-1*Bb(a.ul,b.ul)}
function Mda(a,b){var c=[];a=a.sort(Lda);a=a.reduce(function(a,c,d){return c.data.reduce(function(a,e){var f=c.PE(e,c.ul);if(c.ul){if(0<d)throw Error("Multiple cross product sets are not supported!");f in a||(a[f]=[]);a[f].push(e)}else if(void 0!==f&&null!==f){var h=a[f];h&&(a[f]=h.map(b.bind(null,e)))}return a},a||{})},null);for(var d in a)c=c.concat(a[d]);return c}
function Fr(a,b,c,d){var e=Bb;d=Je(d,0,c-1);for(var f=0,h=a.length,k;f<h;){var l=f+h>>1;l-=l%c;var m=e(b,a[l+d]);0<m?f=l+c:(h=l,k=!m)}return k?f:~f};function Gr(a){if(!a)return null;var b=N;"EPSG:4326"!==b.Tb&&(a=a.clone().toLonLat());var c=a.aa();if(a instanceof tk&&Hr(a)){var d=360,e=0,f=a.flatCoordinates;a=a.stride;for(var h=0,k=f.length;h<k;h+=a){var l=Ir(f[h],0,360);d=Math.min(d,l);e=Math.max(e,l)}c[0]=d;c[2]=e}180<c[2]-c[0]&&(d=c[0]+360,c[0]=c[2],c[2]=d);"EPSG:4326"!==b.Tb&&(c=Zi(c,"EPSG:4326",b));return c};function Jr(a,b,c){tk.call(this);b=b?b:0;if(a){xk(this,c,a,0);this.flatCoordinates||(this.flatCoordinates=[]);c=this.flatCoordinates;a=Ak(c,a);c[a++]=c[0]+b;var d;b=1;for(d=this.stride;b<d;++b)c[a++]=c[b];c.length=a}else wk(this,"XY",null);this.ia()}G(Jr,tk);g=Jr.prototype;g.clone=function(){var a=new Jr(null),b=this.flatCoordinates.slice();wk(a,this.layout,b);a.ia();return a};function Wk(a){return a.flatCoordinates.slice(0,a.stride)}
g.rl=function(a){var b=this.flatCoordinates,c=b[this.stride]-b[0];return Zh(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)};function Xk(a){var b=a.flatCoordinates[a.stride]-a.flatCoordinates[0];a=a.flatCoordinates[a.stride+1]-a.flatCoordinates[1];return Math.sqrt(b*b+a*a)}g.T=function(){return"Circle"};g.getCoordinates=function(){};g.ic=function(){};function Kr(a){kj.call(this);this.g=a?a:null;Lr(this)}G(Kr,kj);function Mr(a){var b=[],c;var d=0;for(c=a.length;d<c;++d)b.push(a[d].clone());return b}function Nr(a){var b;if(a.g){var c=0;for(b=a.g.length;c<b;++c)xh(a.g[c],"change",a.ia,a)}}function Lr(a){var b;if(a.g){var c=0;for(b=a.g.length;c<b;++c)I(a.g[c],"change",a.ia,a)}}g=Kr.prototype;g.clone=function(){var a=new Kr(null);Or(a,Mr(this.g));return a};g.rl=function(a){$h(a);for(var b=this.g,c=0,d=b.length;c<d;++c)ci(a,b[c].aa());return a};
function Np(a){return Mr(a.g)}g.Rl=function(a){this.s!=this.Yb&&(oh(this.j),this.l=0,this.s=this.Yb);if(0>a||0!==this.l&&a<this.l)return this;var b=a.toString();if(this.j.hasOwnProperty(b))return this.j[b];var c=[],d=this.g,e=!1,f;var h=0;for(f=d.length;h<f;++h){var k=d[h],l=k.Rl(a);c.push(l);l!==k&&(e=!0)}if(e)return a=new Kr(null),Or(a,c),this.j[b]=a;this.l=a;return this};g.T=function(){return"GeometryCollection"};g.isEmpty=function(){return 0===this.g.length};
g.rotate=function(a,b){for(var c=this.g,d=0,e=c.length;d<e;++d)c[d].rotate(a,b);this.ia()};g.scale=function(a,b,c){c||(c=ii(this.aa()));for(var d=this.g,e=0,f=d.length;e<f;++e)d[e].scale(a,b,c);this.ia()};function Or(a,b){Nr(a);a.g=b;Lr(a);a.ia()}g.jl=function(a){var b=this.g,c;var d=0;for(c=b.length;d<c;++d)b[d].jl(a);this.ia()};g.translate=function(a,b){var c=this.g,d;var e=0;for(d=c.length;e<d;++e)c[e].translate(a,b);this.ia()};g.J=function(){Nr(this);kj.prototype.J.call(this)};function Pr(a,b){tk.call(this);this.ic(a,b)}G(Pr,tk);Pr.prototype.clone=function(){var a=new Pr(null),b=this.flatCoordinates.slice();wk(a,this.layout,b);a.ia();return a};Pr.prototype.getCoordinates=function(){return Dk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};function Qr(a){var b=a.flatCoordinates,c=a.layout;a=a.stride;var d=[],e;var f=0;for(e=b.length;f<e;f+=a){var h=new Jk(null);Kk(h,c,b.slice(f,f+a));d.push(h)}return d}Pr.prototype.T=function(){return"MultiPoint"};
Pr.prototype.ic=function(a,b){a?(xk(this,b,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bk(this.flatCoordinates,0,a,this.stride)):wk(this,"XY",null);this.ia()};function Rr(a,b){tk.call(this);this.Gc=[];this.o=-1;this.B=null;this.G=-1;this.g=null;this.ic(a,b)}G(Rr,tk);g=Rr.prototype;g.clone=function(){for(var a=new Rr(null),b=this.Gc.length,c=Array(b),d=0;d<b;++d)c[d]=this.Gc[d].slice();Sr(a,this.layout,this.flatCoordinates.slice(),c);return a};g.ee=function(){var a=this.Gd(),b=this.Gc,c=0,d=0,e;var f=0;for(e=b.length;f<e;++f){var h=b[f];d+=zk(a,c,h,this.stride);c=h[h.length-1]}return d};
g.getCoordinates=function(a){if(void 0!==a){var b=this.Gd().slice();Qk(b,this.Gc,this.stride,a)}else b=this.flatCoordinates;return Fk(b,0,this.Gc,this.stride)};
function yo(a){if(a.o!=a.Yb){var b=a.flatCoordinates,c=a.Gc,d=a.stride,e=0,f=[],h;var k=0;for(h=c.length;k<h;++k){var l=c[k];var m=b;var n=l[0],p=d,r=$h(void 0);m=di(r,m,e,n,p);f.push((m[0]+m[2])/2,(m[1]+m[3])/2);e=l[l.length-1]}b=a.Gd();c=a.Gc;d=a.stride;k=0;h=[];l=0;for(m=c.length;l<m;++l)e=c[l],h=Mk(b,k,e,d,f,2*l,h),k=e[e.length-1];a.B=h;a.o=a.Yb}return a.B}
g.Gd=function(){if(this.G!=this.Yb){var a=this.flatCoordinates;a:{var b=this.Gc;var c;var d=0;for(c=b.length;d<c;++d)if(!Ok(a,b[d],this.stride,void 0)){b=!1;break a}b=!0}b?this.g=a:(this.g=a.slice(),this.g.length=Qk(this.g,this.Gc,this.stride));this.G=this.Yb}return this.g};
g.yi=function(a){var b=[],c=[],d=this.flatCoordinates,e=this.Gc,f=this.stride;a=Math.sqrt(a);var h=0,k=0,l;var m=0;for(l=e.length;m<l;++m){var n=e[m],p=[];k=Hk(d,h,n,f,a,b,k,p);c.push(p);h=n[n.length-1]}b.length=k;d=new Rr(null);Sr(d,"XY",b,c);return d};
function Tr(a){var b=a.layout,c=a.flatCoordinates;a=a.Gc;var d=[],e=0,f,h;var k=0;for(f=a.length;k<f;++k){var l=a[k].slice(),m=l[l.length-1];if(0!==e){var n=0;for(h=l.length;n<h;++n)l[n]-=e}n=new Rk(null);Sk(n,b,c.slice(e,m),l);d.push(n);e=m}return d}g.T=function(){return"MultiPolygon"};
g.ic=function(a,b){if(a){xk(this,b,a,3);this.flatCoordinates||(this.flatCoordinates=[]);b=this.flatCoordinates;var c=this.stride,d=this.Gc,e=0;d=d?d:[];var f=0,h;var k=0;for(h=a.length;k<h;++k)e=Ck(b,e,a[k],c,d[f]),d[f++]=e,e=e[e.length-1];d.length=f;0===d.length?this.flatCoordinates.length=0:(a=d[d.length-1],this.flatCoordinates.length=0===a.length?0:a[a.length-1]);this.ia()}else Sr(this,"XY",null,this.Gc)};function Sr(a,b,c,d){wk(a,b,c);a.Gc=d;a.ia()}
function Ur(a,b){var c=a.layout,d=[],e=[],f;var h=0;for(f=b.length;h<f;++h){var k=b[h];0===h&&(c=k.layout);var l=d.length;var m=k.Fd();var n;var p=0;for(n=m.length;p<n;++p)m[p]+=l;ik(d,k.flatCoordinates);e.push(m)}Sr(a,c,d,e)};zh.prototype.Xa=function(){return this.Pr};Ap.prototype.Uf=function(a,b){var c=this.state;Cp(this,a);qp(this,b);this.g.push([10,c.fillStyle?c.fillStyle:"rgba(0,0,0,0)"]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.Fd();var d=a.Gd();Bp(this,d,0,c,a.stride);rp(this,b)};
Ap.prototype.Tf=function(a,b){var c=this.state,d=c.fillStyle,e=c.strokeStyle;if(void 0!==d||void 0!==e){Cp(this,a);qp(this,b);this.g.push([10,d?d:"rgba(0,0,0,0)"]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.Gc;d=a.Gd();a=a.stride;e=0;var f;var h=0;for(f=c.length;h<f;++h)e=Bp(this,d,e,c[h],a);rp(this,b)}};
Ap.prototype.Gf=function(a,b){var c=this.state,d=c.fillStyle,e=c.strokeStyle;if(void 0!==d||void 0!==e)Cp(this,a),qp(this,b),this.g.push([10,d?d:"rgba(0,0,0,0)"]),void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]),e=a.flatCoordinates,d=this.coordinates.length,lp(this,e,0,e.length,a.stride,!1,!1),a=[1],d=[2,d],this.j.push(a,d),this.g.push(a,d),a=[8],this.g.push(a),void 0!==c.fillStyle&&this.j.push(a),void 0!==c.strokeStyle&&
(c=[12],this.j.push(c),this.g.push(c)),rp(this,b)};function Vr(a,b,c,d,e,f){mf.call(this,e,f);this.I=a;this.G=[];this.P=!!b;this.ra=!!c;this.oa=!!d;for(b=this.pa=0;b<a.length;b++)tf(a[b],t(this.U,this,b,!0),t(this.U,this,b,!1));0!=a.length||this.P||this.callback(this.G)}w(Vr,mf);Vr.prototype.U=function(a,b,c){this.pa++;this.G[a]=[b,c];this.g||(this.P&&b?this.callback([a,c]):this.ra&&!b?this.Eb(c):this.pa==this.I.length&&this.callback(this.G));this.oa&&!b&&(c=null);return c};Vr.prototype.Eb=function(a){Vr.C.Eb.call(this,a);for(a=0;a<this.I.length;a++)this.I[a].cancel()};function Nda(){};function Wr(){}w(Wr,Nda);Wr.prototype.clear=function(){var a=Qe(this.pe(!0)),b=this;db(a,function(a){b.remove(a)})};function Xr(a){this.g=a}w(Xr,Wr);g=Xr.prototype;g.set=function(a,b){try{this.g.setItem(a,b)}catch(c){if(0==this.g.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};g.get=function(a){a=this.g.getItem(a);if(!sa(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};g.remove=function(a){this.g.removeItem(a)};
g.pe=function(a){var b=0,c=this.g,d=new Ne;d.next=function(){if(b>=c.length)throw Me;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!sa(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};g.clear=function(){this.g.clear()};g.key=function(a){return this.g.key(a)};function Yr(){var a=null;try{a=window.localStorage||null}catch(b){}this.g=a}w(Yr,Xr);function Zr(a,b){this.j=a;this.g=null;if(od&&!Cd()){$r||($r=new Re);this.g=$r.get(a);this.g||(b?this.g=document.getElementById(b):(this.g=document.createElement("userdata"),this.g.addBehavior("#default#userData"),document.body.appendChild(this.g)),$r.set(a,this.g));try{this.g.load(this.j)}catch(c){this.g=null}}}w(Zr,Wr);var Oda={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},$r=null;
function as(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return Oda[a]})}g=Zr.prototype;g.set=function(a,b){this.g.setAttribute(as(a),b);bs(this)};g.get=function(a){a=this.g.getAttribute(as(a));if(!sa(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};g.remove=function(a){this.g.removeAttribute(as(a));bs(this)};
g.pe=function(a){var b=0,c=this.g.XMLDocument.documentElement.attributes,d=new Ne;d.next=function(){if(b>=c.length)throw Me;var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;if(!sa(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};g.clear=function(){for(var a=this.g.XMLDocument.documentElement,b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);bs(this)};
function bs(a){try{a.g.save(a.j)}catch(b){throw"Storage mechanism: Quota exceeded";}};function cs(a,b){this.j=a;this.g=b+"::"}w(cs,Wr);cs.prototype.set=function(a,b){this.j.set(this.g+a,b)};cs.prototype.get=function(a){return this.j.get(this.g+a)};cs.prototype.remove=function(a){this.j.remove(this.g+a)};cs.prototype.pe=function(a){var b=this.j.pe(!0),c=this,d=new Ne;d.next=function(){for(var d=b.next();d.substr(0,c.g.length)!=c.g;)d=b.next();return a?d.substr(c.g.length):c.j.get(d)};return d};var ds={LA:["BC","AD"],KA:["Before Christ","Anno Domini"],UA:"JFMAMJJASOND".split(""),hB:"JFMAMJJASOND".split(""),OA:"January February March April May June July August September October November December".split(" "),gB:"January February March April May June July August September October November December".split(" "),cB:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),jB:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),sB:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
lB:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),eB:"Sun Mon Tue Wed Thu Fri Sat".split(" "),kB:"Sun Mon Tue Wed Thu Fri Sat".split(" "),OP:"SMTWTFS".split(""),iB:"SMTWTFS".split(""),dB:["Q1","Q2","Q3","Q4"],YA:["1st quarter","2nd quarter","3rd quarter","4th quarter"],BA:["AM","PM"],pO:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],hR:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],qO:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],Rs:6,CR:[5,6],Ss:5},es=ds;
es=ds;function gs(a,b,c,d,e,f){sa(a)?(this.j=a==Pda?b:0,this.g=a==Qda?b:0,this.l=a==Rda?b:0,this.o=a==Sda?b:0,this.s=a==Tda?b:0,this.A=a==Uda?b:0):(this.j=a||0,this.g=b||0,this.l=c||0,this.o=d||0,this.s=e||0,this.A=f||0)}gs.prototype.equals=function(a){return a.j==this.j&&a.g==this.g&&a.l==this.l&&a.o==this.o&&a.s==this.s&&a.A==this.A};gs.prototype.clone=function(){return new gs(this.j,this.g,this.l,this.o,this.s,this.A)};var Pda="y",Qda="m",Rda="d",Sda="h",Tda="n",Uda="s";
gs.prototype.add=function(a){this.j+=a.j;this.g+=a.g;this.l+=a.l;this.o+=a.o;this.s+=a.s;this.A+=a.A};function ls(a,b,c){ta(a)?(this.g=ms(a,b||0,c||1),ns(this,c||1)):Aa(a)?(this.g=ms(a.getFullYear(),a.getMonth(),a.getDate()),ns(this,a.getDate())):(this.g=new Date(Ha()),a=this.g.getDate(),this.g.setHours(0),this.g.setMinutes(0),this.g.setSeconds(0),this.g.setMilliseconds(0),ns(this,a))}function ms(a,b,c){b=new Date(a,b,c);0<=a&&100>a&&b.setFullYear(b.getFullYear()-1900);return b}g=ls.prototype;
g.li=es.Rs;g.ni=es.Ss;g.clone=function(){var a=new ls(this.g);a.li=this.li;a.ni=this.ni;return a};g.getFullYear=function(){return this.g.getFullYear()};g.getMonth=function(){return this.g.getMonth()};g.getDate=function(){return this.g.getDate()};g.getTime=function(){return this.g.getTime()};g.getDay=function(){return this.g.getDay()};g.getUTCFullYear=function(){return this.g.getUTCFullYear()};g.getUTCMonth=function(){return this.g.getUTCMonth()};g.getUTCDate=function(){return this.g.getUTCDate()};
g.ru=function(){return this.g.getDay()};g.getUTCHours=function(){return this.g.getUTCHours()};g.getUTCMinutes=function(){return this.g.getUTCMinutes()};g.getTimezoneOffset=function(){return this.g.getTimezoneOffset()};g.set=function(a){this.g=new Date(a.getFullYear(),a.getMonth(),a.getDate())};g.setFullYear=function(a){this.g.setFullYear(a)};g.setMonth=function(a){this.g.setMonth(a)};g.setDate=function(a){this.g.setDate(a)};g.LD=function(a){this.g.setUTCFullYear(a)};g.MD=function(a){this.g.setUTCMonth(a)};
g.KD=function(a){this.g.setUTCDate(a)};
g.add=function(a){if(a.j||a.g){var b=this.getMonth()+a.g+12*a.j,c=this.getFullYear()+Math.floor(b/12);b%=12;0>b&&(b+=12);a:{switch(b){case 1:var d=0!=c%4||0==c%100&&0!=c%400?28:29;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.l&&(b=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12),a=new Date(b.getTime()+864E5*a.l),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),ns(this,a.getDate()))};g.Wl=function(a){return[this.getFullYear(),Xb(this.getMonth()+1,2),Xb(this.getDate(),2)].join(a?"-":"")+""};g.Vh=function(a,b){return[this.getUTCFullYear(),Xb(this.getUTCMonth()+1,2),Xb(this.getUTCDate(),2)].join(a?"-":"")+(b?"Z":"")};g.equals=function(a){return!(!a||this.getFullYear()!=a.getFullYear()||this.getMonth()!=a.getMonth()||this.getDate()!=a.getDate())};g.toString=function(){return this.Wl()};
function ns(a,b){a.getDate()!=b&&(b=a.getDate()<b?1:-1,a.g.setUTCHours(a.g.getUTCHours()+b))}g.valueOf=function(){return this.g.valueOf()};function ps(a,b,c,d,e,f,h){this.g=ta(a)?new Date(a,b||0,c||1,d||0,e||0,f||0,h||0):new Date(a&&a.getTime?a.getTime():Ha())}w(ps,ls);g=ps.prototype;g.getHours=function(){return this.g.getHours()};g.getMinutes=function(){return this.g.getMinutes()};g.getSeconds=function(){return this.g.getSeconds()};g.ru=function(){return this.g.getUTCDay()};g.getUTCHours=function(){return this.g.getUTCHours()};
g.getUTCMinutes=function(){return this.g.getUTCMinutes()};g.ap=function(){return this.g.getUTCSeconds()};g.add=function(a){ls.prototype.add.call(this,a);a.o&&this.g.setUTCHours(this.g.getUTCHours()+a.o);a.s&&this.g.setUTCMinutes(this.g.getUTCMinutes()+a.s);a.A&&this.g.setUTCSeconds(this.g.getUTCSeconds()+a.A)};
g.Wl=function(a){var b=ls.prototype.Wl.call(this,a);return a?b+" "+Xb(this.getHours(),2)+":"+Xb(this.getMinutes(),2)+":"+Xb(this.getSeconds(),2)+"":b+"T"+Xb(this.getHours(),2)+Xb(this.getMinutes(),2)+Xb(this.getSeconds(),2)+""};g.Vh=function(a,b){var c=ls.prototype.Vh.call(this,a);return a?c+" "+Xb(this.getUTCHours(),2)+":"+Xb(this.getUTCMinutes(),2)+":"+Xb(this.ap(),2)+(b?"Z":""):c+"T"+Xb(this.getUTCHours(),2)+Xb(this.getUTCMinutes(),2)+Xb(this.ap(),2)+(b?"Z":"")};
g.equals=function(a){return this.getTime()==a.getTime()};g.toString=function(){return this.Wl()};g.clone=function(){var a=new ps(this.g);a.li=this.li;a.ni=this.ni;return a};function qs(a,b){this.name=a;this.value=b}qs.prototype.toString=function(){return this.name};var rs=new qs("Error",400),ss=new qs("Warning",300),ts=new qs("Success",200),us=new qs("Info",100);function vs(a,b,c,d){z.call(this,"alert");this.j=a;this.P=new ps;this.N=c||5;this.L=d||null;this.s=b;this.id=Vda++}w(vs,z);var Vda=0;vs.prototype.getTime=function(){return this.P};var Wda={};function ws(a){return O.get("about.application",a)}function xs(a){return O.get("supportContact",a)};var Xda=String({});function ys(a){if(!a)return a;var b={},c;for(c in a)void 0!==a[c]&&(b[c]=a[c],a[c]=void 0);return b}function zs(a,b,c,d){null==c&&(c=!0);null==d&&(d=!0);for(var e in a){var f=a[e];if(e in b){var h=b[e];(null!==f&&void 0!==f||d)&&"__ignore__"!==f&&("__delete__"===f?c&&delete b[e]:As(f)||As(h)?c&&(b[e]=a[e]):zs(f,h,c,d))}else As(f)?b[e]=f:(b[e]={},zs(f,b[e],c,d))}}function As(a){return a&&"object"==xa(a)?(a=Object.getPrototypeOf(a),null==a||null!=Object.getPrototypeOf(a)):!0}
function Bs(a,b,c){var d=a,e=b.length-1;db(b,function(a,b){b===e?d[a]=c:(d[a]=Aa(d[a])?d[a]:{},d=d[a])})}function Cs(a,b,c){b=null!=b?b:"";c=null!=c?c:".";var d={};if(void 0!==a)if(As(a)||q(a))d[b]=a;else if(Aa(a))if(uc(a))d[b]=a;else for(var e in a){var f=Cs(a[e],b?b+c+e:e,c);Cc(d,f)}return d}function Ds(a){var b={},c;for(c in a)Bs(b,c.split("."),a[c]);return b}
function Es(a,b){"string"===xa(b)&&(b=b.split("."));if(0<b.length){var c=b[b.length-1];b=b.slice(0,b.length-1);var d=oc(a,b);"object"==xa(d)&&(delete d[c],0===kc(d)&&Es(a,b))}}function Fs(a,b){for(var c,d=1;d<arguments.length;d++){var e=arguments[d];if(e&&void 0!=e[a]){c=e[a];break}}return c}function Yda(){return function(a){return Ba(a.name)?a.name():a.name}}
function Gs(a){var b=xa(a);if("object"==b||"array"==b){if(a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)a.hasOwnProperty(c)&&(b[c]=Gs(a[c]));return b}return a};var Zda="consent areas filters favorite locationFormat mute search.recent storage.writeType storage.introLastSeen userSounds theme".split(" "),Hs=[],Is=null;function Js(){Is||(Is=[]);return Is}function Ks(a){if(a){var b=Js(),c=Cs(a);db(b,function(a){pc(c,a)&&(delete c[a],mb(Hs,a))});return Ds(c)}return null}function Ls(a){a=Cs(a);var b={};jc(a,function(a,d){b[Ms(d)]=a});return Ds(b)}function $da(a){a=Cs(a);var b=/^(core|opensphere)\./,c={};jc(a,function(a,e){c[e.replace(b,"")]=a});return Ds(c)}
function Ms(a){return[Ns(a)?"core":"opensphere",a].join(".")}function Os(a){if(a&&0<a.length){var b=Ns(a.join("."))?"core":"opensphere";var c=vb(a);c.unshift(b)}return c||[]}function Ns(a){return gb(Zda,function(b){return Ib(a,b)})};function P(a,b){if(null!=a){var c=xa(a);if("function"===c){var d;a.prototype.hasOwnProperty("os_impls")?d=a.prototype.os_impls:d=a.prototype.os_impls=[];d.push(b);return!0}if("object"===c){a:{for(a=Object.getPrototypeOf(a);a;){if(a.os_impls&&a.os_impls.length&&0<=a.os_impls.indexOf(b)){b=!0;break a}a=Object.getPrototypeOf(a)}b=!1}return b}}return!1};function Ps(a,b){z.call(this,a);this.url=b}w(Ps,z);var Qs=null;function Rs(a){var b=Qs;b||(b=Qs=[]);-1==b.indexOf(a)&&b.push(a)}function aea(a,b,c){var d=Qs,e=null;if(d)for(var f=0,h=d.length;f<h;f++){var k=new d[f];c&&k.setTimeout(c);k.handles(a,b)&&(e?e.push(k):e=[k])}e&&e.sort(function(a,b){return-1*Bb(a.jc(),b.jc())});return e};function Ss(a,b){this.ma=a;this.l=void 0!==b?b:0}Ss.prototype.D=function(){return this.ma};Ss.prototype.ga=function(a){this.ma=a};function Ts(){Ss.call(this,"urlReplace",-110)}w(Ts,Ss);var Us=[];function bea(){var a=O.get("urlReplace");Us.length=0;if(a)for(var b in a)Us.push({search:new RegExp(b),replace:a[b]})}
Ts.prototype.j=function(a){if(Us.length){for(var b=a.toString().replace(/[?#].*$/,""),c=a.g,d=c.Ub(),e=a.s,f=0,h=Us.length;f<h;f++)if(b=b.replace(Us[f].search,Us[f].replace),e=e.replace(Us[f].search,Us[f].replace),d)for(var k=0,l=d.length;k<l;k++){var m=d[k],n=c.get(m);if(n){var p=n.toString().replace(Us[f].search,Us[f].replace);p!=n&&c.set(m,p)}}b=new Ve(b+(d.length?"?"+c.toString():"")+(e?"#"+e:""));b.toString()!==a.toString()&&(We(a,b.l),a.j=b.j,Xe(a,b.o),Ye(a,b.He()),Ze(a,b.g.toString(),void 0),
a.s=b.s)}};function Vs(){Ss.call(this,"variables",-100)}w(Vs,Ss);var cea=E.V("os.net.VariableReplacer"),Ws={};function Xs(a,b){a in Ws&&E.ib(cea,'Overriding variable replacement function for "'+a+'"!');Ws[a]={BM:b,Db:new RegExp("{"+a+":?([^}]+)?}","g")}}Vs.prototype.j=function(a){var b=a.g,c=b.Ub(),d;for(d in Ws){var e=Ws[d].BM,f=Ws[d].Db;if(c)for(var h=0,k=c.length;h<k;h++){var l=c[h],m=b.get(l);if(m){var n=m.toString().replace(f,e);n!=m&&b.set(l,n)}}if(m=a.He())n=m.replace(f,e),n!=m&&Ye(a,n)}};function Ys(a,b,c){A.call(this);this.G=this.s=this.P=this.A=this.B=this.I=this.g=this.U=this.o=this.N=this.j=null;this.Z=!1;this.ka=this.L=this.l=null;this.Ma=c||0;a&&Zs(this,a);b&&(this.Tg=b);$s(this,new Vs);$s(this,new Ts)}w(Ys,A);var at=E.V("os.net.Request");g=Ys.prototype;g.J=function(){this.abort();bt(this);Ys.C.J.call(this)};function Zs(a,b){"string"==typeof b?a.j=new Ve(b):a.j=b}function ct(a,b){a.N||(a.N={});a.N.Accept=b}
function $s(a,b){if(null===a.o)a.o=[b];else{for(var c=0,d=a.o.length;c<d;c++)if(a.o[c].D()==b.D())throw Error('A modifier with the id "'+b.D()+'" already exists in the set!');Db(a.o,b,dt)}}function et(a,b){if(a.o)if("string"==typeof b)for(var c=0,d=a.o.length;c<d;c++){if(a.o[c].D()==b){a.o.splice(c,1);break}}else a=a.o,b=zb(a,dt||Bb,!1,b),0<=b&&rb(a,b)}function dt(a,b){var c=Bb(a.l,b.l);return 0===c?Bb(a.D(),b.D()):-c}g.Tg="GET";function bt(a){a.g=null;a.I=null}
g.abort=function(){this.l&&(ft(this,this.l),this.l.abort(),gt(this));this.dispatchEvent("abort")};function dea(a){var b=null;return cd(new Oc(function(c,d){b=function(e){b&&(a.M("success",b),a.M("error",b),a.M("abort",b));"success"===e.type?c(a.g):d(a.s)};a.H("success",b);a.H("error",b);a.H("abort",b);a.load()}),function(c){b&&c instanceof dd&&(a.M("success",b),a.M("error",b),a.M("abort",b),a.abort(),c=a.s);throw c;})}
g.load=function(a){var b=this.j;this.s=this.I=this.g=this.P=null;this.Z=!!a;if(b){a=b.clone();if(this.o){b=0;for(var c=this.o.length;b<c;b++)this.o[b].j(a)}this.P=a;C.dispatchEvent(new Ps("tryUrl",this.P.toString()));if((this.A=aea(this.Tg,a,this.Ma))&&this.A.length)E.info(at,(this.Z?"NOCACHE ":"")+this.Tg+" "+a),ht(this);else throw a="No handlers were found for URI: "+a,E.error(at,a),Error(a);}else throw a="No URI set for request!",E.error(at,a),Error(a);};
function ht(a){if(a.A&&a.A.length){a.l&&ft(a,a.l);a.l=a.A.shift();var b=a.l;b.H("success",a.gw,!1,a);b.H("error",a.hw,!1,a);a.l.Fa(a.Tg,a.P.clone(),a.N,a.U,a.Z,a.B)}}function ft(a,b){b.M("success",a.gw);b.M("error",a.hw)}g.gw=function(){this.g=this.l.Rq();this.I=this.l.Sq();this.ka=this.l.Lj();this.G||(this.G=[]);this.G.push(this.l.Vo());if(this.g&&this.L){var a=this.L(this.g,this.I["Content-Type"]);this.ht(a)}gt(this);a?(E.error(at,a),this.dispatchEvent("error")):this.dispatchEvent("success")};
g.ht=function(a){a&&(this.s||(this.s=[]),this.s.push(a))};g.hw=function(){this.g=this.l.Rq();this.I=this.l.Sq();this.G||(this.G=[]);var a=this.l.Fx();a&&a.forEach(this.ht,this);this.G.push(this.l.Vo());this.A&&this.A.length&&!this.l.Tu()?ht(this):(E.error(at,"Error! See fine log for more details. "+this.P),gt(this),this.dispatchEvent("error"))};function gt(a){a.l&&(ft(a,a.l),a.l.dispose());a.l=null;a.A=null}g.setTimeout=function(a){this.Ma=a};function it(a,b){this.g=a;this.name="file: "+a;this.j=!!b}P(it,"os.config.storage.ISettingsStorage");P(it,"os.config.storage.ISettingsReadableStorage");g=it.prototype;g.init=function(){return Af()};g.gx=function(){var a=new mf,b=new Ys;b.H("success",Fa(this.sH,a),!1,this);b.H("error",Fa(this.PJ,a),!1,this);Zs(b,this.g);b.load();return a};g.sH=function(a,b){b=b.target;var c=b.g;b.dispose();c=c.replace(/\/\*[\s\S]*\*\//mg,"");b=JSON.parse(c);b.user=Ls(b.user||{});a.callback(b)};
g.PJ=function(a,b){this.j?a.callback({}):a.Eb(b)};g.name="file";g.pg=!0;function jt(a){this.l=a;this.g=0;this.j={}}var kt=E.V("os.config.storage.SettingsStorageLoader");jt.prototype.init=function(){for(var a=[],b=0,c=this.l.g.length;b<c;b++)a.push((this.l.g[b]||null).init());return a.length?sf(new Vr(a),this.A,this):Bf("No settings storages registered.")};jt.prototype.A=function(a){db(a,function(a,c){a[0]||((this.l.g[c]||null).pg=!1)},this)};function lt(a){a.g=0;a.j={};a.j.user={};a.j.admin={};return mt(a)}
function mt(a){if(a.g<a.l.g.length){var b=(a.l.g[a.g]||null).gx(),c=sf(b,a.s,a);tf(c,null,a.o,a);return b}return Af(a.j)}
jt.prototype.s=function(a){var b=Gs(a);if(pc(b,"overrides")){var c=b.overrides;if(q(c)){b=0;for(var d=c.length;b<d;b++)nt(this.l,new it(c[b],!0),this.g+b+1)}}if(pc(a,"user")){c=Gs(a.user);var e=["core","opensphere"];b=0;for(d=e.length;b<d;b++){var f=e[b],h=Cs(c[f]),k={};jc(h,function(a,b){if(b){var c=oc(this.j,("user."+f+"."+b).split("."));q(c)&&q(a)&&(E.info(kt,"Merging settings arrays - existingVal: "+c+", value: "+a),pb(a,c,a.length),E.info(kt,"Result of merge: "+a));k[b]=a}},this);c[f]=Ds(k)}zs(c,
this.j.user)}pc(a,"admin")&&(a=Gs(a.admin),zs(a,this.j.admin));this.g+=1;return mt(this)};jt.prototype.o=function(){(this.l.g[this.g]||null).pg=!1;this.g+=1;return mt(this)};function ot(){this.g=[];this.l="local";this.j=null;this.o=!1}wa(ot);function nt(a,b,c){nb(a.g,b,void 0!==c?c:a.g.length);"remote"===b.zA&&(a.o=!0)}function pt(a){for(var b=null,c=a.g.length-1;0<=c;c--){var d=a.g[c];if(P(d,"os.config.storage.ISettingsWritableStorage")&&d.zA===a.l&&d.pg){b=d;break}}a.j=b;if(a.j){for(c=a.g.length-1;0<=c;c--)d=a.g[c],P(d,"os.config.storage.ISettingsWritableStorage")&&d!==a.j&&(d.mm=!0);a.j.mm=!1}}function qt(a){a.j&&a.j.pg||pt(a);return a.j}
function eea(a){return eb(a.g,function(a){return P(a,"os.config.storage.ISettingsWritableStorage")&&a.mm},a)};function rt(a,b,c,d){z.call(this,a,d);this.j=void 0!=b?b:null;this.s=void 0!=c?c:null}w(rt,z);function st(a){O.reset().then(Fa(fea,a),tt)}window.cls=st;function fea(a){window.localStorage.clear();localStorage.setItem("resetDate","opensphere "+(new Date).toISOString());C.Sd("reset")?(C.dispatchEvent("reset"),a||(a=new ne(gea),a.qh=ut,a.Ri=ut,a.start(100,5E3))):a||tt()}function vt(){wt--}var wt=0;function gea(){return 0>=wt}function ut(){O.save().then(tt,tt)}function tt(){O.A=!1;window.location.reload(!0)};Ia("os.xt.IMessageHandler",function(){});function xt(a){this.j=0;this.l=a||100;this.g=[]}g=xt.prototype;g.add=function(a){var b=this.g[this.j];this.g[this.j]=a;this.j=(this.j+1)%this.l;return b};g.get=function(a){a=yt(this,a);return this.g[a]};g.set=function(a,b){a=yt(this,a);this.g[a]=b};g.isEmpty=function(){return 0==this.g.length};g.clear=function(){this.j=this.g.length=0};g.Jc=function(){for(var a=this.g.length,b=[],c=this.g.length-this.g.length;c<a;c++)b.push(this.get(c));return b};
g.Ub=function(){for(var a=[],b=this.g.length,c=0;c<b;c++)a[c]=c;return a};function yt(a,b){if(b>=a.g.length)throw Error("Out of bounds exception");return a.g.length<a.l?b:(a.j+Number(b))%a.l};function zt(){A.call(this);this.g=new xt(1E4);this.l={};this.j=!1}w(zt,A);wa(zt);function At(a,b,c,d,e,f){c=c||rs;e=new vs(b,c,e,f);a.g.add(e);a.dispatchEvent(e);if(null!=d)switch(c){case rs:E.error(d,b);break;case ss:E.ib(d,b);break;default:E.info(d,b)}}zt.prototype.ih=function(){this.g.clear();this.dispatchEvent("clearAlerts")};function Bt(a,b,c,d){if(!a.j){var e=a.l[b]||0;e=xb(a.g.Jc(),0,a.g.g.length-e);db(e,c,d);a.l[b]=a.g.g.length;a.j=!0}}var Ct=zt.u();var hea=new A;function Dt(a){if(!a){if(!("localStorage"in window&&window.localStorage))throw Error("This browser does not support localStorage!");a=window.localStorage}this.g=a;this.I=!1;this.ma=$b();this.l="default";this.j=document.title;this.o=[];this.s=null;this.L=0;this.A=null;this.G=[];this.B=new le(this.Ea.bind(this));this.pa=!1;this.P=this.Z.bind(this);this.N=this.U.bind(this);Yd(window,"message",this.tJ,!1,this)}wa(Dt);var Et=E.V("os.xt.Peer");g=Dt.prototype;g.tJ=function(){};
function Ft(a){return"xt."+(a||"default")+".master"}function Gt(a,b,c){return(a=c.getItem("xt."+a+"."+b+".ping"))?parseInt(a,10):null}function Ht(a,b,c){for(var d=["xt",a,b].join("."),e=c.length-1;0<=e;e--){var f=c.key(e);0===f.indexOf(d)&&c.removeItem(f)}c.getItem("xt."+a+".master")===b&&c.removeItem("xt."+a+".master")}g.D=function(){return this.ma};g.ga=function(a){this.ma=a;this.sa()};g.S=function(){return this.j};g.Ta=function(a){this.j=a;this.sa()};
g.ng=function(a){-1==this.o.indexOf(a)&&this.o.push(a);this.sa()};function It(a){for(var b=[],c=0,d=a.o.length;c<d;c++)for(var e=a.o[c].Eh?a.o[c].Eh():a.o[c].getTypes(),f=0,h=e.length;f<h;f++)mb(b,e[f]);return b}g.sa=function(){this.I&&this.ma&&this.j&&this.l&&(this.g.setItem(["xt",this.l,this.ma,"title"].join("."),this.j),this.g.setItem(["xt",this.l,this.ma,"details"].join("."),""),this.g.setItem(["xt",this.l,this.ma,"types"].join("."),JSON.stringify(It(this))))};
g.init=function(){this.I||(this.I=!0,this.sa(),window.addEventListener("storage",this.P),window.addEventListener("unload",this.N),this.s=new je(1E4),this.s.H("tick",this.uq,!1,this),this.uq(),this.s.start(),E.za(Et,"Initialized peer "+this.l+"."+this.ma+' "'+this.j+'"'),iea(this))};
function iea(a){for(var b=["xt",a.l,a.ma,""].join("."),c=["xt",a.l,"public."].join("."),d=Jt.map(function(a){return b+a}),e=a.g,f=e.length;f--;){var h=e.key(f);h&&(h.startsWith(c)||h.startsWith(b)&&-1===d.indexOf(h))&&a.Z({key:h,newValue:e.getItem(h)})}}
function Kt(a,b,c){var d;if(a.I){d||(d="public");try{a.g.setItem(["xt",a.l,d,a.ma,Date.now()].join("."),JSON.stringify({type:b,data:c,time:Date.now()}))}catch(e){E.error(Et,"A cross-app communication event was unable to be sent. This usually happens because the data was too large or because the storage is corrupted.",e),a.pa||(a.pa=!0,At(zt.u(),"A cross-app communication event was unable to be sent. This usually happens because the data was too large or because the storage is corrupted. View the log for more details.",
rs))}}else E.ib(Et,"Peer.send() was called but the peer has not been initialized")}function Lt(a,b){b=b||a.ma;return b===a.ma?a.s?a.L:null:Gt(a.l,b,a.g)}function Mt(a,b){b=Lt(a,b);a=Lt(a);return null!=b&&15E3>a-b}
g.uq=function(){E.za(Et,"Updating ping for peer "+this.l+"."+this.ma);this.L=Date.now();this.g.setItem("xt."+this.l+"."+this.ma+".ping",String(this.L));var a=this.D();if(this.g.getItem(Ft(this.l))===a){a=Nt(this,void 0,!0);for(var b=0,c=a.length;b<c;b++)Mt(this,a[b])||Ht(this.l,a[b],this.g);a="xt."+this.l+".public.";for(b=this.g.length-1;0<=b;b--)if(c=this.g.key(b),0===c.indexOf(a)){var d=JSON.parse(this.g.getItem(c)||"");1E4<this.L-d.time&&this.g.removeItem(c)}}else a=this.g.getItem(Ft(this.l)),
a&&Mt(this,a)||(a&&Ht(this.l,a,this.g),Ot(this))};function Ot(a){a.A||(a.A=new le(a.xC,25,a),a.A.start())}g.xC=function(){if(Mt(this,this.D())){var a=Nt(this);a.push(this.D());Ab(a);a[0]===this.D()&&(a=Ft(this.l),this.g.getItem(a)||(this.g.setItem(a,this.ma),hea.dispatchEvent(new z(["os.xt.events.masterAppointed",this.l].join(".")))))}this.A.stop();this.A.dispose();this.A=null};
function Nt(a,b,c){c=c||!1;for(var d="xt."+a.l+".",e=[],f=a.g.length-1;0<=f;f--){var h=a.g.key(f);0===h.indexOf(d)&&(h=h.split("."),2<h.length&&"master"!==h[2]&&"public"!==h[2]&&h[2]!==a.ma&&-1===e.indexOf(h[2])&&(c||Mt(a,h[2]))&&(b?-1<JSON.parse(a.g.getItem(h.slice(0,3).join(".")+".types")||"[]").indexOf(b)&&e.push(h[2]):e.push(h[2])))}return e}var Jt=["ping","title","details","types"];
Dt.prototype.Z=function(a){var b=[];a.key&&(b=a.key.split("."));if(4<=b.length&&"xt"===b[0]&&b[1]===this.l&&(b[2]===this.ma||"public"==b[2])&&a.newValue){if(-1===Jt.indexOf(b[3])&&b[3]!==this.ma){a:{for(var c=b[3],d=JSON.parse(a.newValue),e=0,f=this.o.length;e<f;e++)if(-1<(this.o[e].Eh?this.o[e].Eh():this.o[e].getTypes()).indexOf(d.type)){E.za(Et,"Found handler for message with type "+d.type);try{this.o[e].Xc?this.o[e].Xc(d.data,d.type,c,d.time):this.o[e].process(d.data,d.type,c,d.time);var h=!0;
break a}catch(k){E.error(Et,"Error while handling message!",k)}}else E.za(Et,"Could not find handler for message with type "+d.type+" in "+It(this));h=!1}h&&"public"!==b[2]&&this.g.removeItem(a.key)}}else 4<=b.length&&"xt"===b[0]&&b[1]===this.l&&0<Jt.indexOf(b[3])&&this.Ea();a.key!==Ft(this.l)||a.newValue||Ot(this)};
Dt.prototype.U=function(){Ht(this.l,this.ma,this.g);this.s&&(this.s.stop(),this.s.M("tick",this.uq,!1,this),this.s.dispose(),this.s=null);this.B&&(this.B.stop(),this.B.dispose(),this.B=null);window.removeEventListener("storage",this.P);window.removeEventListener("unload",this.N)};Dt.prototype.destroy=function(){this.U()};
Dt.prototype.Ea=function(){var a=this.G,b=Date.now();for(this.G=[];0<a.length;){var c=a.shift(),d=c.messageType,e=jea(this.l,c.UR,this.g);e&&d&&(kb(e.g,d)||(e=null));e?c.deferred.callback(e):b>c.expiration?c.deferred.Eb():this.G.push(c)}this.G.length&&(b=Date.now(),a=gaa(this.G,function(a,b){return Math.min(a,b.expiration)},b+1E4),this.B.start(a-b))};function kea(a,b,c,d,e){this.group=a||"default";this.id=b||"";this.title=c||"";this.Ba=d||"";this.g=e||[]}
function jea(a,b,c){if(!a||!b||!Gt(a,b,c))return null;var d="xt."+a+"."+b+".",e=JSON.parse(c.getItem(d+"types")||"[]"),f=c.getItem(d+"title")||"";c=c.getItem(d+"details")||"";return new kea(a,b,f,c,e)};function Pt(){A.call(this);this.g=new ot;this.Z=new jt(this.g);this.o={};this.j={};this.j.user={};this.j.admin={};this.P={};this.l=this.U=!1;this.A=!0;this.ka=!1;this.oa=new je(6E4);this.oa.H("tick",function(){this.save()},!1,this);this.oa.start();this.G=!1;this.L=[];this.N=[];this.ra=new le(this.MJ,500,this);this.B={};this.I=new le(this.save,500,this);this.s=null}w(Pt,A);wa(Pt);var Qt=E.V("os.config.Settings");g=Pt.prototype;
g.init=function(){if(this.U)E.ib(Qt,"Settings already initialized!");else{E.za(Qt,"Initializing settings.");this.l=!1;this.s=new Dt;this.s.Ta("opensphereSettings");var a=this.s;a.l="settings";a.sa();this.s.ng(this);uf(this.Z.init(),this.LJ,this)}};g.LJ=function(){E.za(Qt,"Settings initialized.");this.U=!0;this.dispatchEvent(new z("initialized"))};g.load=function(){E.za(Qt,"Loading settings");this.l=!1;uf(lt(this.Z),this.ex,this)};
g.MJ=function(){E.za(Qt,"Reloading settings");uf(lt(this.Z),this.yI,this)};g.yI=function(a){this.o={};this.j={};this.ex(a);a=0;for(var b=this.N.length;a<b;a++){var c=this.N[a];Rt(this,c.keys,this.get(c.keys),c.oldValue,!0)}this.N=[]};
g.ex=function(a){E.za(Qt,"Settings loaded");if(a){this.j=a;if(pc(a,"user")){var b=$da(a.user);zs(b,this.o)}pc(a,"admin")&&zs(a.admin,this.o);this.j.user=Ks(this.j.user)}a=!0;b=0;for(var c=this.g.g.length;b<c;b++){var d=this.g.g[b]||null,e=d.pg;a=a&&e;e||E.error(Qt,"Settings failed to load from "+d.name)}a||At(zt.u(),"Settings failed to load from one or more sources.  This session will continue to run, but you may notice some of your previously saved preferences are not available.",ss);a=oc(this.o,
["storage","writeType"])||"local";this.l=this.U=!0;St(this,a);this.s.init();E.info(Qt,"Settings finished loading");this.dispatchEvent(new z("loaded"))};
function St(a,b){a.ka=!0;var c=a.g;c.l=b;pt(c);c.j?(E.za(Qt,"Updated setting write type to "+b),a.A=!0):(E.error(Qt,"Updated setting write type to '"+b+"', but there was no accessible, registered storage to match.  Peristence will be disabled."),lea(a),Tt(a,"Failed to save settings to the configured storage type"));c=qt(a.g);E.info(Qt,"Storage write location is now: "+(c?c.name:"not assigned"));a.set("storage.writeType",b,!0);window.localStorage.setItem("opensphere.config.storage.writeType",b)}
g.save=function(a){this.I&&this.I.stop();if(this.A&&this.l&&this.G){this.G=!1;var b=qt(this.g);if(b){this.dispatchEvent(new z("willSave"));var c=this.j.user;Ks(c);var d=!this.ka&&b.YB?this.P:c;this.P={};E.za(Qt,"Saving settings...");c=vb(Js());pb(c,Hs.slice());null!=a&&(d=a);return new Oc(function(a,c){tf(mea(b,d),function(){E.za(Qt,"Settings saved");this.ka=!1;Hs.length=0;lb(Js());var b=this.g.l;b&&Ut(this,b,!0);b=0;for(var c=this.L.length;b<c;b++){var d=this.L[b];Kt(this.s,d.namespace,d)}this.L=
[];nea(this);a()},function(a){var b=qt(this.g),d=this.g.l;E.error(Qt,"Failed to save settings to "+b.name+".  Attempting to find another suitable storage of type "+d);this.G=!0;Ut(this,d);b.pg=10>this.B[d];St(this,d);c(a)},this)},this)}if(!this.A)return Tt(this),E.ib(Qt,"Settings could not be saved, no accessible, writable storage was found in the registry."),this.dispatchEvent(new z("saved")),Xc("Settings could not be saved, no accessible, writable storage was found in the registry.")}return Wc()};
function Ut(a,b,c){a.B.hasOwnProperty(b)?a.B[b]=c?0:a.B[b]+1:a.B[b]=0}function nea(a){var b=eea(a.g);if(b.length){var c=[];b.forEach(function(a){E.za(Qt,"Clearing settings from "+a.name+" since it is not the designated write storage and all settings have been merged.");c.push(Vt(a,"core"));c.push(Vt(a,"opensphere"));a.mm=!1},a);uf(new Vr(c),a.rG,a)}}
g.rG=function(a){hb(a,function(a){return a[0]},this)||E.ib(Qt,"Failed to clear one or more of the setting storages after switching write location. If this storage becomes accessible in the future, the remnant settings may affect application preferences since they will be merged with the others upon session initialization.");this.dispatchEvent(new z("saved"))};g.update=function(){E.za(Qt,"Settings updated");this.dispatchEvent(new z("updated"))};
g.reset=function(a){var b=a||"opensphere";E.info(Qt,"Resetting settings for the application namespace: "+b);return new Oc(function(a,d){var c=this.get("storage.writeType",window.localStorage.getItem("opensphere.config.storage.writeType")||"local"),f=qt(this.g);f?Zc([Vt(f,"core"),Vt(f,b)]).then(function(){E.za(Qt,"Reset settings success");this.j.user={};"remote"!==c||this.g.o?this.set("storage.writeType",c,!0):this.set("storage.writeType","local",!0);Q(R.u(),oea,1);var e=R.u();e.j?(e.save(),(e.o?e.o:
new Wt).Ex()):E.ib(Xt,"Metrics were not published: "+(e.j?"storage not available":"not enabled"));localStorage.setItem("resetDate",b+" "+(new Date).toISOString());this.set("reset.last",Date());this.save().then(a,d)},function(a){a="Reset settings failed"+(a?": "+a:"");E.error(Qt,a);d(a)},this):d("Write storage not available.")},this)};
g.get=function(a,b){"string"==typeof a&&(a=a.split("."));if(this.l)return a=oc(this.o,a),q(a)?a=vb(a):Aa(a)&&(a=zc(a)),void 0!==a?a:b;throw Error("Attempted to get a value before settings were loaded!");};
g.set=function(a,b,c){if(this.l){"string"==typeof a&&(a=a.split("."));var d=this.get(a);"object"!==typeof b||b instanceof Object||b instanceof Array||(b=Gs(b));Bs(this.o,a,b);var e=void 0!==oc(this.j.admin,a),f=[];e||(f=Os(a),Bs(this.j.user,f,b));d!=b&&(e||(Bs(this.P,f,b),Yt(a,b,d)),Rt(this,a,b,d,c))}else throw Error("Attempted to set a value before settings were loaded!");};Pt.prototype.set=Pt.prototype.set;
function Rt(a,b,c,d,e){var f=b.join(".");a.dispatchEvent(new rt(f,c,d));e||(a.G=!0,d=Os(b),"storage.writeType"==f?Kt(a.s,d[0],{keys:b,newValue:c}):mb(a.L,{namespace:d[0],keys:b}),a.I&&a.I.start())}function Yt(a,b,c){if("object"===xa(c)){c=nc(Cs(c));var d=null!=b?nc(Cs(b)):[],e=a.join(".");db(c,function(a){kb(d,a)||mb(Hs,Ms(e+"."+a))})}}function Tt(a,b){E.error(Qt,b||"Failed to connect to user settings");a.A=!1}
function lea(a){setTimeout(t(function(){var a=new A;this.Ra("storage.writeType",function(){a.dispatchEvent(new z("dismissAlert"))},!1,this);At(zt.u(),"<strong>Settings are unavailable!</strong> This session will continue to run without any previously saved options, and any changes you make will not be remembered for the next session.",rs,void 0,1,a)},a),10)}Pt.prototype.Eh=function(){return["core","opensphere"]};
Pt.prototype.Xc=function(a){a.keys&&"storage.writeType"===a.keys.join(".")?St(this,a.newValue):(a.oldValue=this.get(a.keys),this.N.push(a),this.ra.start())};var O=Pt.u();var pea=E.V("os.proj");function Zt(a){var b=O.get("projections",[]);b=b.concat(O.get("userProjections",[]));if(a){a=[Li("EPSG:3857"),Li("EPSG:4326")];for(var c=0,d=a.length;c<d;c++){var e=a[c];b.unshift({code:e.Tb,title:0===c?"Web Mercator / Spherical Mercator":"Geographic / Equirectangular",extent:e.aa(),worldExtent:e.Sn,isGlobal:e.uh()})}}return b}
function qea(a){var b=N,c=a.projection,d=a.projections||[],e=["EPSG:4326","CRS:84","EPSG:3857","EPSG:900913"];c&&(e.unshift(c),d.unshift(c));if(!d.length)return b;e.unshift(b.Tb);d.sort(function(a,b){a=e.indexOf(a);b=e.indexOf(b);a=-1===a?e.length:a;b=-1===b?e.length:b;return a-b});c=0;for(var f=d.length;c<f;c++){var h=Li(d[c]);if(h)return Wi(h,b)?b:h}E.ib(pea,"A supported projection could not be found for layer "+a.id+". projections="+d.toString());return null};var $t=void 0,au=[0,0],N=Li("EPSG:4326");hm(N,42,[512,512]);var bu=[0,0,0,0];function cu(a,b,c){b=b.aa();a=Math.log((b[2]-b[0])/(256*a))/Math.LN2;null!=c&&(a=Number(a.toFixed(c)));return a}function du(a,b){b=b.aa();return(b[2]-b[0])/(256*Math.pow(2,a))}var eu=du(25,N),fu=du(2,N);function gu(a,b){var c=a[0]/a[1],d=si(45);return b*a[1]*yi(N)*Math.cos(Math.abs(0))/2/Math.tan((1>=c?d:2*Math.atan(Math.tan(.5*d)/c))/2)}
function hu(a,b,c){a=vn(a);if(!a||0>=a[0]||0>=a[1])return NaN;var d=a[0]/a[1],e=si(45);return 2*b*Math.tan((1>=d?e:2*Math.atan(Math.tan(.5*e)/d))/2)/yi(N)/Math.abs(Math.cos(c||0))/a[1]};var rea=E.V("ol.geom.Geometry");function iu(a,b){b=b||"EPSG:4326";var c=Li(b),d=N;if(!c)E.ib(rea,'"'+b+'" was not defined as a projection in the application!');else if(!Wi(c,d))return a.transform(c,d);return a}kj.prototype.toLonLat=function(){var a=N,b=Li("EPSG:4326");return Wi(a,b)?this:this.transform(a,b)};Kr.prototype.clone=function(){return new Kr(Np(this))};
[Jr,Kr,Ik,yr,Ar,Pr,Rr,Jk,Rk].forEach(function(a){a&&a.prototype&&a.prototype.clone&&(a.prototype.hC=a.prototype.clone,a.prototype.clone=function(){var a=this.hC();zs(this.la,a.la);return a})});var ju={ft:1/6076,yd:4.937458854509546E-4,mi:5280/6076,m:1/1852,km:1/1.852,nmi:1},ku=/^(([\d]{1,2}[C-X][A-Z]{2}([0-9][0-9]){0,5})|([ABYZ][A-Z]{2}([0-9][0-9]){0,5}))$/,lu=/(ele(v(a(t(i(o(n)?)?)?)?)?)|alt(i(t(u(d(e)?)?)?)?)?)\b/i,sea=/((ele(v(a(t(i(o(n)?)?)?)?)?)|alt(i(t(u(d(e)?)?)?)?)?))_units\b/i,tea=/(depth)\b/i,uea=/(depth)_units\b/i,vea=/^mgrs\s*(d(e(r(i(v(e(d?)?)?)?)?)?)?)?$/i,mu=/[^NEWSnews\d\s.\-,]/g;function nu(a,b){this.Db=a;this.coords=b}nu.prototype.Db=null;nu.prototype.coords=null;
var ou=[[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])],[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])]],pu=[[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])],[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])]],wea=[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,
dir:[5,8]}])],xea=[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])],qu=[[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:5,dir:[1,
7]},{ea:9,min:10,fa:12,dir:[8,14]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:5,
dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])],[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:12,dir:[8,14]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])]],ru=[[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:12,dir:[8,14]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:5,
dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])],[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:12,dir:[8,14]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:5,
dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])]],yea=[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])],zea=[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])],su=[[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,
min:8,fa:null,dir:[6,10]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])],[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,
min:8,fa:null,dir:[6,10]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])]],tu=[[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,
fa:null,dir:[5,8]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])],[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),
new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])]],Aea=[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,9]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,
dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,9]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])],Bea=[new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,
min:7,fa:null,dir:[5,8]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,9]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,9]}]),new nu(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,
dir:[5,9]}])],Cea=[ou[0].concat(su[0],qu[0],pu[0],tu[0],ru[0]),ou[1].concat(su[1],qu[1],pu[1],tu[1],ru[1])];
function uu(a,b,c){if(a){var d=NaN,e=NaN,f,h=vu(b?b:0,c);a=a.trim().toUpperCase();var k=null,l=null;var m=0;for(f=h.length;m<f&&!(l=h[m],k=l.Db.exec(a));m++);if(!k&&void 0===b)for(h=vu(1,c),m=0,f=h.length;m<f&&!(l=h[m],k=l.Db.exec(a));m++);if(k){d=k[l.coords[0].ea].indexOf(".");e=k[l.coords[0].ea].indexOf("-");e=-1==e?k[l.coords[0].ea].indexOf("+"):e;var n=k[l.coords[0].dir[0]]||k[l.coords[0].dir[1]],p=k[l.coords[1].dir[0]]||k[l.coords[1].dir[1]];"N"==p||"S"==p||"E"==n||"W"==n||""===n&&d>=(-1!=e?
4:3)||1==b?(d=wu(k[l.coords[0].ea],k[l.coords[0].min],k[l.coords[0].fa],n),e=wu(k[l.coords[1].ea],k[l.coords[1].min],k[l.coords[1].fa],p)):(e=wu(k[l.coords[0].ea],k[l.coords[0].min],k[l.coords[0].fa],n),d=wu(k[l.coords[1].ea],k[l.coords[1].min],k[l.coords[1].fa],p))}if(!isNaN(e)&&!isNaN(d))return void 0===b&&!n&&!p&&90<Math.abs(e)&&(b=e,e=d,d=b),{lat:e,lon:d}}return null}
function vu(a,b){if(void 0!==b)switch(b){case "DD":return wea.concat(xea);case "DDM":return Aea.concat(Bea);case "DMS":return yea.concat(zea)}return Cea[a]}
function xu(a,b){if(!a)return NaN;var c=Number(a);if(!isNaN(c))return c;var d=[];if(null!=b)switch(b){case "DD":d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*[^NSEW\d]*$/i,coords:{ea:2,min:null,fa:null,dir:[1,4]}});break;case "DDM":d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,5]}});d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,
fa:null,dir:[1,4]}});d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,4]}});break;case "DMS":d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:5,dir:[1,7]}}),d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:4,dir:[1,6]}})}else d=[{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,
coords:{ea:2,min:null,fa:null,dir:[1,4]}},{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,5]}},{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,4]}},{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:5,dir:[1,7]}},{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
coords:{ea:2,min:3,fa:4,dir:[1,6]}}];b=void 0;for(var e=0,f=d.length;e<f;e++){var h=d[e];if(b=h.Db.exec(a))break}b&&(c=wu(b[h.coords.ea],b[h.coords.min],b[h.coords.fa],b[h.coords.dir[0]]||b[h.coords.dir[1]]));return c}
function yu(a,b){if(!a)return NaN;var c=Number(a);if(!isNaN(c))return c;var d=[];if(null!=b)switch(b){case "DD":d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*[^NSEW\d]*$/i,coords:{ea:2,min:null,fa:null,dir:[1,4]}});break;case "DDM":d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,5]}});d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,
fa:null,dir:[1,4]}});d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,4]}});break;case "DMS":d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:5,dir:[1,7]}}),d.push({Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:4,dir:[1,6]}})}else d=[{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,
coords:{ea:2,min:null,fa:null,dir:[1,4]}},{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,5]}},{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,4]}},{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:5,dir:[1,7]}},{Db:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
coords:{ea:2,min:3,fa:4,dir:[1,6]}}];b=void 0;for(var e=0,f=d.length;e<f;e++){var h=d[e];if(b=h.Db.exec(a))break}b&&(c=wu(b[h.coords.ea],b[h.coords.min],b[h.coords.fa],b[h.coords.dir[0]]||b[h.coords.dir[1]]));return c}
function wu(a,b,c,d){if(!b&&!c){a.indexOf(".");var e=a.indexOf("."),f=a.indexOf("-");f=-1==f?a.indexOf("+"):f;if(-1==e||e>=(-1!=f?5:4))-1==e&&(e=a.length),f=a.substring(0,Math.min(-1==f?1===e%2?3:2:0===e%2?4:3,e)),a=a.substring(f.length),e-=f.length,c=b="00",2<=e&&(b=a.substring(0,2),a=a.substring(2),e-=2),2<=e&&(c=a),a=f}c&&2<c.length&&-1==c.indexOf(".")&&(c=c.substring(0,2)+"."+c.substring(2));a=parseFloat(a);b=parseFloat(b);c=parseFloat(c);e=Math.abs(a);isNaN(b)||(e+=b/60);isNaN(c)||(e+=c/60/60);
0>a&&(e*=-1);if("S"==d||"W"==d)e*=-1;return e}function zu(a,b,c,d){var e=2<a.length?a[2]:0;c=360<c?c%360:c;d=d||0;for(var f=c/20,h=[],k=0;20>=k;++k){var l=osasm.geodesicDirect(a,d-c/2+k*f,b);l.push(e);h.push(l)}return h}
function Au(a,b){var c=Math.PI/10/2,d=[[1,0]];d[10]=[0,1];d[20]=[-1,0];d[30]=[0,-1];for(var e=1;10>e;++e){var f=e*c,h=Math.cos(f);f=Math.sin(f);d[e]=[h,f];d[e+10]=[-f,h];d[e+20]=[-h,-f];d[e+30]=[f,-h]}d.push(d[0]);var k=[];db(d,function(c){k.push([a[0]+c[0]*b,a[1]+c[1]*b])});return k}
function Bu(a,b,c,d){var e=2<a.length?a[2]:0,f=Math.PI,h=1.2>Math.max(b,c)/Math.min(b,c)?Dea:Eea,k=Math.PI/2;d=Cu*(90-d);for(var l=[],m,n=void 0,p=0;2>p;p++){for(var r=0;32>r;r++)m=h(r,k,f,32),m=osasm.geodesicDirect(a,Du*(m-d),b*c/Math.sqrt(Math.pow(b*Math.cos(m),2)+Math.pow(c*Math.sin(m),2))),m.push(e),l.push(m),n||(n=m);k+=Math.PI}l.push(n);return l}function Eu(a){if(a&&0<a.length){var b=a[0];a=a[a.length-1];if(b&&a)return Fu(b,a)}return!1}
function Gu(a,b){var c=Eu(a);var d=Eu(a);d=null!=a&&(d&&3<a.length||!d&&2<a.length);if(a&&c&&d&&b){c=a.length;for(var e=d=!1,f=!1,h=!1;c--;)if(Fu(a[c],[b[0],b[1]]))f=!0;else if(Fu(a[c],[b[0],b[3]]))d=!0;else if(Fu(a[c],[b[2],b[1]]))h=!0;else if(Fu(a[c],[b[2],b[3]]))e=!0;else return!1;return e&&d&&h&&f}return!1}function Hu(a){return a?(a=a.T(),"Polygon"==a||"MultiPolygon"==a):!1}function Iu(a){var b;if(a&&0<a.length)for(var c=0;c<a.length;c+=1)if((b=a[c])&&2<b.length&&0!==b[2])return!0;return!1}
function Ju(a){var b=!1,c,d;switch(a.T()){case "Point":(c=a.getCoordinates())&&(b=c&&2<c.length&&0!==c[2]);break;case "LineString":b=a.getCoordinates();b=Iu(b);break;case "MultiPoint":b=a.getCoordinates();b=Iu(b);break;case "MultiLineString":if(a=a.getCoordinates())for(c=0;c<a.length;c+=1)if(Iu(a[c])){b=!0;break}break;case "Polygon":if(d=a.getCoordinates())for(c=0;c<d.length;c+=1)if(Iu(d[c])){b=!0;break}break;case "MultiPolygon":var e=a.getCoordinates();if(e)for(a=0;a<e.length;a+=1)for(d=e[a],c=0;c<
d.length;c+=1)if(Iu(d[c])){b=!0;a=e.length;break}break;case "GeometryCollection":if(a=Np(a))for(c=0;c<a.length;c+=1)if(Ju(a[c])){b=!0;break}break;case "Circle":c=vk(a);a=a.flatCoordinates.slice(a.flatCoordinates.length-a.stride);c&&a&&(b=c&&2<c.length&&0!==c[2]||a&&2<a.length&&0!==a[2]);break;default:b=!1}return null==b?!1:b}function Fu(a,b){return null==a||null==b||2==!a.length||2==!b.length?!1:1E-12>=Math.abs(a[0]-b[0])&&1E-12>=Math.abs(a[1]-b[1])}
function Ku(a,b,c){var d=0>a;a=Xb(Math.abs(a),void 0!==b&&b?3:2,c);return(d?"-":"")+a}function Lu(a,b,c){b=void 0!==b?b:!0;c=void 0!==c?c:!0;var d=0>a,e=0<a?Math.floor(a):Math.ceil(a),f=Math.abs(60*(e-a));a=Math.floor(f);f=60*(f-a);return Zb(Ku(Math.abs(e),b),c?"\u00b0 ":"",Ku(a),c?"' ":"",Ku(f,!1,2),c?'"':"",c?" ":"",b?d?"W":"E":d?"S":"N")}
function Mu(a,b,c){b=void 0!==b?b:!0;c=void 0!==c?c:!0;var d=0>a,e=0<a?Math.floor(a):Math.ceil(a);a=Math.abs(60*(e-a));return Zb(Ku(Math.abs(e),b),c?"\u00b0 ":"",Ku(a,!1,2),c?"'":"",c?" ":"",b?d?"W":"E":d?"S":"N")}function Nu(a){return 90<a?90:-90>a?-90:a}function Ir(a,b,c){if(void 0!==b&&void 0!==c){for(;a<b;)a+=360;for(;a>c;)a-=360;return a}return 180<a?(a+180)%360-180:-180>a?(a-180)%360+180:a}
function Hr(a){if(a){var b;a instanceof Array&&(b=a);if(a instanceof kj){if(a instanceof Jk)return!1;if(a instanceof yr){b=a.flatCoordinates;a=a.stride;for(var c=Ir(b[0]),d=!1,e=0;e<b.length-a;e+=a){var f=Ir(b[e+a]);if(180!=Math.abs(c)&&180!=Math.abs(f)&&180<Math.abs(f-c)){d=!0;break}180!=Math.abs(f)&&(c=f)}return d}if(a instanceof Ar)return Cr(a).some(Hr);b=a.aa()}if(a instanceof ek)return(b=a.X())?Hr(b):!1;if(b&&3<b.length)return a=Math.min(b[0],b[2]),b=Math.max(b[0],b[2]),!(-180>a&&-180>b||180<
a&&180<b||-180<a&&180>b)}return!1}function Ou(a,b){if(a&&0<a.length){b=null!=b?b:Ir(a[0][0]);for(var c=0;c<a.length;c++)a[c][0]=Ir(a[c][0],b-180,b+180),a[c][1]=Nu(a[c][1])}}function Pu(a,b){if(a)for(var c=0;c<a.length;c++)Ou(a[c],b)}
function Qu(a,b){if(a&&!a.get("_normalized")&&!Ru(a))switch(a.T()){case "Point":var c=a.getCoordinates();b=null!=b?b:0;c[0]=Ir(c[0],b-180,b+180);c[1]=Nu(c[1]);a.ic(c);break;case "LineString":case "MultiPoint":c=a.getCoordinates();Ou(c,b);a.ic(c);break;case "Polygon":case "MultiLineString":c=a.getCoordinates();Pu(c,b);a.ic(c);break;case "MultiPolygon":if(c=a.getCoordinates())for(var d=0;d<c.length;d++)Pu(c[d],b);a.ic(c);break;case "GeometryCollection":for(a=a.g,c=0;c<a.length;c++)Qu(a[c],b)}}
function Dea(a,b,c,d){return a/d*c+b}function Eea(a,b,c,d){a/=d/2;if(1>a)return c*Math.pow(2,10*(a-1))/2+b;a--;return c*(-Math.pow(2,-10*a)+2)/2+b}function Su(a){var b=0;if(a)for(var c=1;c<a.length;c++){var d=a[c][0]-a[c-1][0];180<d?d-=360:-180>d&&(d+=360);b+=d}return 1<Math.abs(b)}var Du=180/Math.PI,Cu=Math.PI/180;function Tu(a){if(a instanceof Kr){var b=a.g;if(1===b.length)return Tu(b[0])}return a}
function Uu(a){var b=a.T();if("LineString"!==b&&"MultiLineString"!==b||a.get("_normalized")||!Hr(a))return a;if(a instanceof yr){b=Vu(a);var c=Wu(b,a.layout)}else a instanceof Ar&&(b=Fea(a),c=Wu(b,a.layout));c instanceof kj&&Gr(c);c.set("_normalized",!0);return c}function Wu(a,b){return 1<a.length?new Ar(a,b):new yr(a[0],b)}
function Vu(a){a=a.getCoordinates();a.forEach(function(a){a[0]=Ir(a[0])});for(var b=0,c=[],d=0;d<a.length-1;d++){var e=a[d+1],f=e[0]-a[d][0];180<Math.abs(f)&&(b=a.slice(b,d+1),e=e.slice(),e[0]=0<f?e[0]-360:e[0]+360,b.push(e),c.push(b),b=d+1)}b!==a.length-1&&c.push(a.slice(b));return c}function Fea(a){return Cr(a).reduce(function(a,c){c=c?Vu(c):[];return a.concat(c)},[])};function Xu(a){wr.call(this,a)}w(Xu,wr);g=Xu.prototype;g.aa=function(){var a=T.u();if(a.Qa()&&(a=Yu(a))&&(a=a.aa()))return Zi(a,"EPSG:4326",N);a=vn(this);return ml(M(this),a||[0,0])};
g.cd=function(a){if(T.u().Qa()){var b=T.u().g;if(b)a:{if(b.Kb&&a&&2==a.length&&!isNaN(a[0])&&!isNaN(a[1])&&(a=new Cesium.Cartesian2(a[0],a[1]),a=(b=b.Kb.g)&&b.camera?b.camera.pickEllipsoid(a):void 0)){b=b.globe.ellipsoid.cartesianToCartographic(a);b=[Cesium.Math.toDegrees(b.longitude),Cesium.Math.toDegrees(b.latitude)];break a}b=null}else b=null;return b?Ti(b,N):null}b=Xu.C.cd.call(this,a);a=M(this).Wa().aa();return b&&(b[1]<a[1]||b[1]>a[3])?null:b};
g.Vd=function(a){if(T.u().Qa()&&a){a=Vi(a,N);var b=T.u().g;b?b.Kb&&a&&2<=a.length&&!isNaN(a[0])&&!isNaN(a[1])?(a=Zu(a),b=(a=Cesium.SceneTransforms.wgs84ToWindowCoordinates(b.Kb.g,a))?[a.x,a.y]:null):b=null:b=null;return b}return Xu.C.Vd.call(this,a)};function $u(a,b){return Xu.C.Vd.call(a,b)}
g.zh=function(a,b,c){if(T.u().Qa()){var d=T.u().g;if(d)a:{if(d.Kb){a=new Cesium.Cartesian2(a[0],a[1]);d=d.Kb.g;if(c&&c.drillPick)var e=d.drillPick(a);else{var f=d.pick(a);f&&(e=[f])}if(e&&0<e.length)for(d=0,a=e.length;d<a;d++){f=e[d];var h=f.primitive.olFeature;f=f.primitive.olLayer;if(h&&f){var k=c?c.layerFilter:void 0;if(!k||k(f))if(h=b(h,f)||null){b=h;break a}}}}b=null}else b=null;return b}return this.cd(a)?Xu.C.zh.call(this,a,b,c):null};
function av(a,b){a=T.u();a.Qa()&&(a=a.g)&&a.Kb&&(a=a.Kb.g)&&a.screenSpaceCameraController&&(a.screenSpaceCameraController.enableInputs=b)}g.Ag=function(a,b){if(!a.defaultPrevented){var c=a.target;c.tagName==="INPUT".toString()||c.tagName==="TEXTAREA".toString()||document.querySelector(".modal-backdrop,.window-modal-bg")||Xu.C.Ag.call(this,a,b)}};
g.Ve=function(){var a=sn(this);if(a){var b=getComputedStyle(a);if(b)if(!od||0!=a.offsetWidth&&0!=a.offsetHeight)this.setSize([a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)]);else{a=document.getElementsByClassName("navbar");for(var c=b=0;c<a.length;c++)b+=a[0].offsetHeight;a=document.documentElement.clientHeight-
b;this.setSize([document.documentElement.clientWidth,0<a?a:0])}else this.setSize(void 0)}else this.setSize(void 0)};var bv={};function cv(){y.call(this);this.Ba=null;this.lb=!1;this.state="ready";this.title=""}w(cv,y);cv.prototype.finish=function(a){this.detail=a||null;this.state="success";return!0};cv.prototype.Cb=function(){this.state="ready";this.Ba=null;return!0};function dv(a,b,c){cv.call(this);this.title="Fit Map to Extent";this.l=a;this.A=void 0;this.j=b||1.5;a=15;null!=c&&(a=0>c?25:Je(c,2,25));this.g=a}w(dv,cv);dv.prototype.Fa=function(){this.state="executing";var a=T.u();this.A=ev(a).slice();a.oi(this.l,this.j,this.g);return this.finish()};dv.prototype.Cb=function(){this.state="reverting";this.A&&T.u().oi(this.A);return dv.C.Cb.call(this)};var fv={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Gea(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(gv.test(c))return b.Di=hv(c),b.type="hex",b;a:{var d=a.match(Hea);if(d){c=Number(d[1]);var e=Number(d[2]);d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.Di=iv(c),b.type="rgb",b;if(fv&&(c=fv[a.toLowerCase()]))return b.Di=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Iea=/#(.)(.)(.)/;
function hv(a){if(!gv.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Iea,"#$1$1$2$2$3$3"));return a.toLowerCase()}function jv(a){a=hv(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}function kv(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(a!=(a&255)||b!=(b&255)||c!=(c&255))throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');a=lv(a.toString(16));b=lv(b.toString(16));c=lv(c.toString(16));return"#"+a+b+c}
function iv(a){return kv(a[0],a[1],a[2])}function mv(a,b,c){0>c?c+=1:1<c&&--c;return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function nv(a,b,c){a/=360;if(0==b)c=b=a=255*c;else{var d=.5>c?c*(1+b):c+b-b*c;var e=2*c-d;c=255*mv(e,d,a+1/3);b=255*mv(e,d,a);a=255*mv(e,d,a-1/3)}return[Math.round(c),Math.round(b),Math.round(a)]}var gv=/^#(?:[0-9a-f]{3}){1,2}$/i,Hea=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function lv(a){return 1==a.length?"0"+a:a}
function Jea(a){return iv(nv(a[0],a[1],a[2]))}function Kea(a){for(var b=[[0,0,0],[255,255,255]],c=[],d=0;d<b.length;d++)c.push({color:b[d],diff:Math.abs(ov(b[d])-ov(a))+Lea(b[d],a)});c.sort(function(a,b){return b.diff-a.diff});return c[0].color}function ov(a){return Math.round((299*a[0]+587*a[1]+114*a[2])/1E3)}function Lea(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])};function pv(a){if(a instanceof pv)this.j=a.toArray();else{var b;if(b=ya(a))a:{for(var c=b=0;c<a.length;c++){if(!ya(a[c])||0<b&&a[c].length!=b){b=!1;break a}for(var d=0;d<a[c].length;d++)if(!ta(a[c][d])){b=!1;break a}0==b&&(b=a[c].length)}b=0!=b}if(b)this.j=vb(a);else if(a instanceof gg){b=a.height;a=a.width;c=[];for(d=0;d<b;d++){c[d]=[];for(var e=0;e<a;e++)c[d][e]=0}this.j=c}else throw Error("Invalid argument(s) for Matrix contructor");}this.g=new gg(this.j[0].length,this.j.length)}
function Mea(a,b){for(var c=0;c<a.g.height;c++)for(var d=0;d<a.g.width;d++)b.call(void 0,a.j[c][d],c,d,a)}function Nea(a,b){var c=new pv(a.g);Mea(a,function(d,e,f){c.j[e][f]=b.call(void 0,d,e,f,a)});return c}pv.prototype.add=function(a){if(!hg(this.g,a.g))throw Error("Matrix summation is only supported on arrays of equal size");return Nea(this,function(b,c,d){return b+a.j[c][d]})};
pv.prototype.equals=function(a,b){if(this.g.width!=a.g.width||this.g.height!=a.g.height)return!1;b=b||0;for(var c=0;c<this.g.height;c++)for(var d=0;d<this.g.width;d++)if(!Ke(this.j[c][d],a.j[c][d],b))return!1;return!0};pv.prototype.toArray=function(){return this.j};var Oea=/^\s*(0x|#)?[0-9a-f]{2,6}\s*$/i,Pea=/rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*(,\s*\d?(\.\d+)?)?\s*\)/i,Qea=[{alpha:1,color:[255,136,0],ratio:0},{alpha:1,color:[255,255,0],ratio:43},{alpha:1,color:[0,255,0],ratio:85},{alpha:1,color:[0,255,255],ratio:128},{alpha:1,color:[0,0,255],ratio:170},{alpha:1,color:[136,0,255],ratio:213},{alpha:1,color:[255,0,255],ratio:255}],qv="#000000 #000066 #0d0073 #110077 #190073 #1e0578 #1d0479 #24047a #26037b #2a037e #2d057f #32057f #340482 #380685 #3b0586 #3f0587 #420589 #45068c #4a068c #4d058f #500591 #530693 #560694 #5a0595 #5d0597 #62079a #640699 #660699 #680699 #6a0699 #6d0599 #6f0599 #710599 #730599 #760499 #780499 #7a0499 #7c0499 #7f0399 #810399 #830399 #850399 #880299 #8a0299 #8c0299 #8e0299 #910199 #930199 #950199 #970199 #9a0199 #9b0198 #9c0197 #9e0297 #9f0296 #a10395 #a20395 #a40394 #a50493 #a70493 #a80592 #aa0591 #ab0591 #ad0690 #ae0690 #b0078f #b1078e #b3078e #b4088d #b6088c #b7098c #b9098b #ba098a #bc0a8a #bd0a89 #bf0b89 #c00c86 #c10d83 #c20e81 #c3107e #c4117c #c51279 #c61477 #c71574 #c81672 #c9186f #ca196d #cb1a6a #cc1c68 #cd1d65 #ce1e63 #cf2060 #d0215e #d1225b #d22459 #d32556 #d42654 #d52851 #d6294f #d72a4c #d92c4a #d92d47 #da2f45 #da3042 #db3240 #dc333e #dc353b #dd3639 #de3836 #de3a34 #df3b32 #e03d2f #e03e2d #e1402a #e14128 #e24326 #e34423 #e34621 #e4481e #e5491c #e54b1a #e64c17 #e74e15 #e74f12 #e85110 #e9530e #e9540d #e9560c #ea570c #ea590b #eb5a0b #eb5c0a #eb5d0a #ec5f09 #ec6108 #ed6208 #ed6407 #ed6507 #ee6706 #ee6806 #ef6a05 #ef6b05 #ef6d04 #f06f03 #f07003 #f17202 #f17302 #f17501 #f27601 #f27800 #f37a00 #f37b00 #f37d00 #f47f00 #f48000 #f48200 #f58400 #f58600 #f58700 #f68900 #f68b00 #f68c00 #f78e00 #f79000 #f89200 #f89300 #f89500 #f99700 #f99800 #f99a00 #fa9c00 #fa9e00 #fa9f00 #fba100 #fba300 #fca500 #fca600 #fca700 #fca900 #fcaa00 #fcac00 #fcad00 #fcaf00 #fcb000 #fcb100 #fcb300 #fcb400 #fcb600 #fcb700 #fcb900 #fcba00 #fcbc00 #fcbd00 #fcbe00 #fcc000 #fcc100 #fcc300 #fcc400 #fcc600 #fcc700 #fcc900 #fcca05 #fccb0a #fccc0f #fccd14 #fcce19 #fccf1e #fcd023 #fcd128 #fcd22d #fcd333 #fcd438 #fcd53d #fcd742 #fcd847 #fcd94c #fcda51 #fddb56 #fddc5b #fddd60 #fdde66 #fddf6b #fde070 #fde175 #fde27a #fde47f #fde584 #fde689 #fde78e #fde893 #fde999 #fdea9e #fdeba3 #fdeca8 #feedad #feeeb2 #feefb7 #fef0bc #fef2c1 #fef3c6 #fef4cc #fef5d1 #fef6d6 #fef7db #fef8e0 #fef9e5 #fefaea #fefbef #fefcf4 #fefdf9 #ffffff".split(" "),
Rea="#000000 #0000ff #0000ff #0000f6 #0000f9 #0000f5 #0000f7 #0000f8 #0000f5 #0000f6 #0000f5 #0000f6 #0000f7 #0000f5 #0000f6 #0000f5 #0000f5 #0000f6 #0000f5 #0000f6 #0000f5 #0000f5 #0000f6 #0000f4 #0000f5 #0000f6 #0006f6 #000cf6 #0013f6 #0019f6 #0020f6 #0026f6 #002cf6 #0033f6 #0039f6 #0040f6 #0046f6 #004cf6 #0053f6 #0059f6 #0060f6 #0066f6 #006cf6 #0073f6 #0079f6 #0080f6 #0086f6 #008cf6 #0093f6 #0099f6 #01a0f6 #00a3f5 #00a6f5 #00a9f4 #00acf4 #00aff4 #00b2f3 #00b5f3 #00b8f2 #00bbf2 #00bef2 #00c1f1 #00c4f1 #00c7f0 #00caf0 #00cdf0 #00d0ef #00d3ef #00d6ee #00d9ee #00dcee #00dfed #00e2ed #00e5ec #00e8ec #00ecec #00ece2 #00edd9 #00eecf #00efc6 #00efbc #00f0b3 #00f1a9 #00f2a0 #00f297 #00f38d #00f484 #00f57a #00f571 #00f667 #00f75e #00f854 #00f84b #00f942 #00fa38 #00fb2f #00fb25 #00fc1c #00fd12 #00fe09 #00ff00 #0aff00 #14ff00 #1eff00 #28ff00 #33ff00 #3dff00 #47ff00 #51ff00 #5bff00 #66ff00 #70ff00 #7aff00 #84ff00 #8eff00 #99ff00 #a3ff00 #adff00 #b7ff00 #c1ff00 #ccff00 #d6ff00 #e0ff00 #eaff00 #f4ff00 #ffff00 #fefc00 #fdf900 #fcf700 #fbf400 #faf200 #f9ef00 #f8ed00 #f7ea00 #f6e800 #f5e500 #f4e300 #f3e000 #f2de00 #f1db00 #f0d900 #efd600 #eed400 #edd100 #eccf00 #ebcc00 #eaca00 #e9c700 #e8c500 #e7c200 #e7c000 #e7be00 #e8bc00 #e9ba00 #eab800 #ebb600 #ecb400 #edb200 #eeb000 #efae00 #f0ac00 #f1aa00 #f2a800 #f3a700 #f4a500 #f5a300 #f6a100 #f79f00 #f89d00 #f99b00 #fa9900 #fb9700 #fc9500 #fd9300 #fe9100 #ff9000 #ff8a00 #ff8400 #ff7e00 #ff7800 #ff7300 #ff6d00 #ff6700 #ff6100 #ff5c00 #ff5600 #ff5000 #ff4a00 #ff4500 #ff3f00 #ff3900 #ff3300 #ff2e00 #ff2800 #ff2200 #ff1c00 #ff1700 #ff1100 #ff0b00 #ff0500 #ff0000 #ff0505 #ff0a0a #ff0f0f #ff1414 #ff1919 #ff1e1e #ff2323 #ff2828 #ff2d2d #ff3333 #ff3838 #ff3d3d #ff4242 #ff4747 #ff4c4c #ff5151 #ff5656 #ff5b5b #ff6060 #ff6666 #ff6b6b #ff7070 #ff7575 #ff7a7a #ff7f7f #ff8484 #ff8989 #ff8e8e #ff9393 #ff9999 #ff9e9e #ffa3a3 #ffa8a8 #ffadad #ffb2b2 #ffb7b7 #ffbcbc #ffc1c1 #ffc6c6 #ffcccc #ffd1d1 #ffd6d6 #ffdbdb #ffe0e0 #ffe5e5 #ffeaea #ffefef #fff4f4 #fff9f9 #ffffff".split(" ");
new pv([[.299,.587,.114],[.595716,-.274453,-.321263],[.211456,-.522591,.311135]]);new pv([[1,.9563,.621],[1,-.2721,-.6474],[1,-1.107,1.7046]]);function Sea(a){var b=Tea||Qea;if(a<=b[0].ratio)return b[0].color;if(a>=b[b.length-1].ratio)return b[b.length-1].color;for(var c=0,d=b.length-1;c<d;c++)if(a>=b[c].ratio&&a<b[c+1].ratio){d=b[c].color;var e=b[c+1].color;a-=b[c].ratio;b=b[c+1].ratio-b[c].ratio;return[rv(d[0],e[0],a,b),rv(d[1],e[1],a,b),rv(d[2],e[2],a,b)]}return[0,0,0]}
function sv(a,b){for(var c=[],d=Je(30,0,360),e=Je(330,d,360)-d,f=0,h=0;h<a;h++){var k=Math.round(h/a*e)+d,l=.5;b&&(70<=k&&50>=f?k=60:100<=k&&160>=k&&(l+=(k-130)/240));c.push(Jea([k,1,l]));f=k}return c}function rv(a,b,c,d){return a<b?Math.floor(c/d*(b-a)+a):Math.floor((a-b)*(1-c/d)+b)}
function tv(a){var b=uv,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0];if(0===a[0]&&0===a[1]&&0===a[2])return c;var d=Math.max(b[0],b[1],b[2]);b=d==b[0]?0:d==b[1]?1:2;var e=Math.max(a[0],a[1],a[2]);a=[a[0]/e,a[1]/e,a[2]/e];for(var f=0;3>f;f++)c[5*f+b]=a[f]*e/d;return c}function vv(a,b){b=b||"";a=a.trim().replace(/^(0x|#)/,"");if(!a||isNaN(Number("0x"+a)))return b+"ffffff";for(;6>a.length;)a="0"+a;return b+a}function wv(a){return"string"==typeof a&&Oea.test(a)||Pea.test(a)}
function xv(a){return iv("string"===typeof a?yv(a):a)}function zv(a){return xv(a).toUpperCase().replace(/^#/,"0x")}function yv(a){if("string"==typeof a){var b=a.indexOf(","),c;if(-1==b)a=a.replace(/0x/ig,""),a="#"+a.replace(/[^a-f0-9]/ig,""),a=jv(a);else{a=a.replace(/[^.,0-9]/g,"");var d=a.split(",");a=[];b=0;for(c=d.length;b<c;b++)a[b]=3==b?parseFloat(d[b]):parseInt(d[b],10)}}a&&3==a.length&&a.push(1);return a}function Av(a,b){if(a==b)return!0;q(a)||(a=yv(a));q(b)||(b=yv(b));return Cb(a,b)};var Bv,Cv,Dv,Uea={};function Ev(){this.g={};this.j={}}wa(Ev);var Fv=E.V("os.layer.config.LayerConfigManager");function Gv(a,b){var c={};b=b.toLowerCase();b in a.g&&(c=a.g[b]());return c}function Hv(a,b){var c=null;b=b.toLowerCase();b in a.j&&(c=new a.j[b]);return c}function Iv(a,b,c){b=b.toLowerCase();b in a.j&&E.ib(Fv,"Layer config is being overridden for: "+b);a.j[b]=c};function U(a,b,c,d){z.call(this,"propertychange",d);this.l=void 0!==a?a:null;this.o=void 0!==b?b:null;this.s=void 0!==c?c:null}w(U,z);U.prototype.G=function(){return this.l};function Jv(){A.call(this);this.j=crossfilter();this.dimensions={};this.filterFunction=null;this.l={}}w(Jv,A);var Kv=E.V("os.data.xf.DataModel");g=Jv.prototype;g.add=function(a){if(!this.Xa()){var b=Ha();q(a)||(a=[a]);this.j.add(a);E.za(Kv,"Added "+a.length+" items to the model in "+(Ha()-b)+"ms.")}};g.clear=function(){if(!this.Xa()){for(var a in this.dimensions)this.dimensions[a].filterAll();this.j.remove();for(a in this.l)void 0!=this.dimensions[a]&&void 0!=this.l[a]&&this.dimensions[a].filter(this.l[a])}};
g.J=function(){vc(this.l);this.clear();for(var a in this.dimensions)this.dimensions[a].dispose(),delete this.dimensions[a];this.j=null;Jv.C.J.call(this)};g.Iq=function(a,b,c){this.Xa()||(this.Gk(a),this.dimensions[a]=this.j.dimension(b,c),this.dispatchEvent(new U("xf:dimension",a)))};g.np=function(a){return null!=this.dimensions&&a in this.dimensions};
g.Gk=function(a){!this.Xa()&&a in this.dimensions&&(this.dimensions[a].dispose(),delete this.dimensions[a],delete this.l[a],this.dispatchEvent(new U("xf:dimension",a)))};g.pk=function(a,b){this.Xa()||(a in this.dimensions&&this.dimensions[a].filter(b),void 0!=b?this.l[a]=b:delete this.l[a])};g.hp=function(a,b,c,d,e){var f;this.Xa()||(a=this.dimensions[a])&&(f=Lv(a,b,c,d,e));return f||[]};function Lv(a,b,c,d,e){a=a.group(b);a.reduce(c,d,e);c=a.top(Infinity)||[];a.dispose();return c}
g.ie=function(a,b,c){if(!this.Xa()&&(b=b&&this.np(b)?this.dimensions[b]:lc(this.dimensions),a=a||Infinity,b))return a=c?b.bottom(a):b.top(a),this.filterFunction&&(a=eb(a,this.filterFunction,this)),a;E.error(Kv,"There are no dimensions for the model to filter on!");return[]};g.ux=function(){return this.j?this.j.size():0};g.isEmpty=function(){return!this.j||0>=this.j.size()};function Mv(a,b,c,d,e,f,h){a=ta(a)?Date.UTC(a,b||0,c||1,d||0,e||0,f||0,h||0):a?a.getTime():Ha();this.g=new Date(a)}w(Mv,ps);g=Mv.prototype;g.clone=function(){var a=new Mv(this.g);a.li=this.li;a.ni=this.ni;return a};g.add=function(a){(a.j||a.g)&&ls.prototype.add.call(this,new gs(a.j,a.g));a=1E3*(a.A+60*(a.s+60*(a.o+24*a.l)));this.g=new Date(this.g.getTime()+a)};g.getTimezoneOffset=function(){return 0};g.getFullYear=ps.prototype.getUTCFullYear;g.getMonth=ps.prototype.getUTCMonth;g.getDate=ps.prototype.getUTCDate;
g.getHours=ps.prototype.getUTCHours;g.getMinutes=ps.prototype.getUTCMinutes;g.getSeconds=ps.prototype.ap;g.getDay=ps.prototype.ru;g.setFullYear=ps.prototype.LD;g.setMonth=ps.prototype.MD;g.setDate=ps.prototype.KD;var Nv={};function Ov(a,b){if(null==window||null==a)return!1;try{a:{try{var c=window.opener||window.parent;if(c&&c.document){var d=c;break a}}catch(f){}d=window}if(b&&Nv[b]){if(d===window)return a instanceof Nv[b];if(d){var e=d.os;return a instanceof Nv[b]||null!=e&&null!=e.instanceOf&&e.instanceOf(a,b)}}}catch(f){}return!1}Ia("os.instanceOf",Ov);function Pv(a){this.start=0;void 0!=a&&this.setStart(a)}P(Pv,"os.time.ITime");Nv["os.time.TimeInstant"]=Pv;var Qv=moment.utc("1753-01-01T00:00:00Z").valueOf(),Rv=moment.utc("9999-12-31T23:59:59Z").valueOf();g=Pv.prototype;g.Pa=function(){return this.start};g.setStart=function(a){this.start=Sv(a)};g.Ya=function(){return this.start};g.Om=function(a){this.setStart(a)};g.Wi=function(a){if(a){if(!this.equals(a)){if(this.start<a.Pa())return-1;if(this.start>=a.Ya()||this.start!=a.Pa())return 1}return 0}return 1};
g.equals=function(a){return null!=a&&a.Pa()==this.Pa()&&a.Ya()==this.Ya()};g.toISOString=function(){return isNaN(this.start)?"Unbounded":Tv(this.start)};g.toString=function(){return this.toISOString()};function Sv(a){var b=0;if(null!=a)switch(typeof a){case "number":b=a;break;case "string":b=(new Date(a)).getTime();break;case "object":"function"==typeof a.getFullYear?b=a.getTime():"function"==typeof a.Pa&&(b=a.Pa())}return isNaN(b)?0:Math.min(Math.max(b,Qv),Rv)};function Uv(a,b){Pv.call(this,a);this.g=0;void 0!=b&&this.Om(b)}w(Uv,Pv);Nv["os.time.TimeRange"]=Uv;g=Uv.prototype;g.Pa=function(){return this.start<this.g?this.start:this.g};g.Ya=function(){return this.g>this.start?this.g:this.start};g.Om=function(a){this.g=Sv(a)};
g.Wi=function(a){if(a){if(!this.equals(a))if(a instanceof Uv){if(a.Ya()<=this.Pa())return 1;if(a.Pa()>=this.Ya())return-1;if(a.Pa()<this.Pa())return 1;if(a.Pa()>this.Pa())return-1;if(a.Ya()<this.Ya())return 1;if(a.Ya()>this.Ya())return-1}else return-1*a.Wi(this);return 0}return 1};g.toISOString=function(a){var b=new Mv,c=[];c.push(Vv(this,b));c.push(a||" to ");c.push(Wv(this,b));return c.join("")};function Vv(a,b){b=b||new Mv;a=a.Pa();return isNaN(a)||a===Qv?"Unbounded":Tv(a,b)}
function Wv(a,b){b=b||new Mv;a=a.Ya();return isNaN(a)||a===Rv?"Unbounded":Tv(a,b)};function Xv(a,b){Jv.call(this);this.P=a;this.I=this.j.dimension(this.Vz.bind(this,this.P));this.L=this.j.dimension(this.St.bind(this,this.P));this.s=crossfilter();this.U=crossfilter();this.A=(this.N=b||null)?this.U.dimension(this.Vz.bind(this,this.N)):null;this.G=this.N?this.U.dimension(this.St.bind(this,this.N)):null;this.g={};this.o=this.s.dimension(ab);this.Z=this.B=null}w(Xv,Jv);var Vea=E.V("os.time.xf.TimeModel"),gw=new Uv(NaN,NaN);g=Xv.prototype;
g.add=function(a){if(!this.Xa()){var b=Ha();q(a)||(a=[a]);for(var c=[],d=[],e=0,f=a.length;e<f;e++){var h=a[e],k=this.P(h);k&&P(k,"os.time.ITime")?c.push(h):d.push(h)}this.j.add(c);this.s.add(d);this.N&&!hw.u().s.isEmpty()&&this.U.add(d);iw(this);E.za(Vea,"Added "+a.length+" items to the model in "+(Ha()-b)+"ms.")}};
g.clear=function(){if(!this.Xa()){this.I.filterAll();this.L.filterAll();this.A&&this.A.filterAll();this.G&&this.G.filterAll();for(var a in this.g)this.g[a].filterAll();Xv.C.clear.call(this);this.s.remove();this.U.remove();for(a in this.l)void 0!=this.l[a]&&(void 0!=this.dimensions[a]&&this.dimensions[a].filter(this.l[a]),void 0!=this.g[a]&&this.g[a].filter(this.l[a]));iw(this)}};
g.J=function(){Xv.C.J.call(this);this.I.dispose();this.I=null;this.L.dispose();this.L=null;this.A&&(this.A.dispose(),this.A=null);this.G&&(this.G.dispose(),this.G=null);for(var a in this.g)this.g[a].dispose(),delete this.g[a];this.o&&(this.o.dispose(),this.o=null);this.s=null};g.Iq=function(a,b,c){this.Xa()||(this.Gk(a,!0),this.o&&(this.o.dispose(),this.o=null),this.dimensions[a]=this.j.dimension(b,c),this.g[a]=this.s.dimension(b,c),this.dispatchEvent(new U("xf:dimension",a)))};
g.hp=function(a,b,c,d,e){if(!this.Xa()){var f=Xv.C.hp.call(this,a,b,c,d,e);if(a=this.g[a])for(b=Lv(a,b,c,d,e),e=0,a=b.length;e<a;e++){var h=b[e],k=ib(f,function(a){return a.key==h.key});if(k){k=k.value;for(var l=h.value,m=l.getItems().slice(),n=0;n<m.length;n++){var p=m[n];d(l,p);c(k,p)}}else f.push(h)}}return f||[]};g.np=function(a){return Xv.C.np.call(this,a)||null!=this.g&&a in this.g};
g.Gk=function(a,b){this.Xa()||(a in this.g&&(this.g[a].dispose(),delete this.g[a]),b||!uc(this.g)||this.o||(this.o=this.s.dimension(ab)),Xv.C.Gk.call(this,a))};g.pk=function(a,b){this.Xa()||(a in this.g&&this.g[a].filter(b),Xv.C.pk.call(this,a,b))};function iw(a){a.B=null;if(!a.Xa()&&a.j&&0<a.j.size()){a.I.filterAll();a.L.filterAll();var b=a.I.bottom(1);b=0<b.length?a.P(b[0]).Pa():NaN;var c=a.L.top(1);c=0<c.length?a.P(c[0]).Ya():NaN;a.B=new Uv(b,c);a.Z&&jw(a,a.Z,!1,!1)}}
g.ux=function(){return(this.j?this.j.size():0)+(this.s?this.s.size():0)};function jw(a,b,c,d){if(!a.Xa()){var e=b.Pa(),f=b.Ya();e==f&&f++;a.I.filter([-Infinity,f]);a.L.filter([e,Infinity]);var h=a.I.top(Infinity);c&&(h=a.o?h.concat(a.o.top(Infinity)):h.concat(lc(a.g).top(Infinity)));!c&&d&&a.G&&a.A&&(a.A.filter([-Infinity,f]),a.G.filter([e,Infinity]),h=h.concat(a.A.top(Infinity)));a.filterFunction&&(h=eb(h,a.filterFunction,a));a.Z=b}return h||[]}
g.isEmpty=function(){return(!this.j||0>=this.j.size())&&(!this.s||0>=this.s.size())};g.Vz=function(a,b){var c=Qv;(a=a(b))&&(c=a.Pa());return c};g.St=function(a,b){var c=Rv;(a=a(b))&&(c=a.Ya());return c};var kw=E.V("os.layer");function lw(a){var b=a.type;if(!b)return E.error(kw,"Layer type missing!"),null;var c=Hv(Ev.u(),b);if(!c)return E.error(kw,"Unknown layer config type: "+b),null;c=c.Ye(a);if(!c)return E.error(kw,"Failed creating layer of type: "+b),null;c.Nk(a);return c}function mw(a){var b=0,c=a.Xb()||0,d=a.Ij(),e=new je(250);e.H("tick",function(){if(5<b)a.fg(d),a.rd(c),e.dispose();else{var f=b%2?1:0;1==f?a.fg(!0):a.fg(!1);a.rd(f);b++}});e.start()}
function nw(a){var b="";a=T.u().W(a);P(a,"os.layer.ILayer")&&(b=a.S())&&(a=a.Nf())&&(b+=" "+a);return b}function ow(a){for(var b=a=a.replace(/\s+\[\d+]$/,""),c=1;Wea(b);)b=a+" ["+c++ +"]";return b}function Wea(a){return pw(T.u()).some(function(b){try{return b.S()==a}catch(c){}return!1})}function qw(a){return a.ug()}function rw(a){return a.vg()}function Xea(a){return a.Ml()}function sw(a){return a.Xb()}function tw(a){return a.yg()}function uw(a){return a.D()};function Wt(){this.s=Yea;this.g=[];this.o=O.get(["metrics","baseUrl"]);this.A=O.get(["metrics","interval"],6E4);this.j=0;this.l=new je(this.A);this.l.H("tick",this.Ex,!1,this);this.l.start()}var Yea=E.V("os.metrics.GraphiteMetricsProvider");g=Wt.prototype;g.Lm=function(){return"application/json"};g.format=function(){return JSON.stringify(this.g)};
g.Ex=function(){if(this.o&&0<this.g.length){var a=new Ys;Zs(a,this.o);a.Tg="POST";a.U=this;ct(a,"application/json, text/plain, */*");a.H("success",this.bJ,!1,this);a.H("error",this.VJ,!1,this);a.load()}};g.bJ=function(){this.g=[];this.j=0};g.VJ=function(){E.error(this.s,"Failed to send metrics to server - "+this.o);this.j+=1;3<=this.j&&(E.error(this.s,"Metrics will not be sent to server, too many failures."),this.l.stop(),this.g=[])};var Zea={VN:"map.features.addFeature",WN:"map.features.addFeatures",XN:"map.features.addLabel",YN:"map.features.addLayer",cO:"map.features.setBackGroundColor",hO:"map.features.clearSelection",iO:"map.features.clearState",kO:"map.features.copyCoordinates",lO:"map.contextMenu.copyCoordinates",mO:"map.keyboard.copyCoordinates",yO:"map.feature.draw",IO:"map.features.flyTo",JO:"map.features.flyToExtent",KO:"map.keyboard.generalImport",WO:"map.features.importState",lP:"map.features.layerCount",pP:"map.features.loadFromArea",
qP:"map.features.loadFromCoordinates",rP:"map.features.loadFromCountry",GP:"map.feature.measureToolToggle",LP:"map.features.mapMode-2d",MP:"map.features.mapMode-3d",WP:"map.feature.openLayers",XP:"map.keyboard.openLayers",jQ:"map.features.queryWorld",kQ:"map.redo",mQ:"map.features.removeFeature",nQ:"map.features.removeFeatures",oQ:"map.features.removeLayer",qQ:"map.features.resetRoll",rQ:"map.keyboard.resetRoll",sQ:"map.features.resetRotation",tQ:"map.contextMenu.resetRotation",uQ:"map.keyboard.resetRotation",
vQ:"map.features.resetTilt",wQ:"map.keyboard.resetTilt",xQ:"map.features.resetView",yQ:"map.contextMenu.resetView",zQ:"map.keyboard.resetView",CQ:"map.features.saveState",DQ:"map.keyboard.saveState",JQ:"map.features.share",EQ:"map.features.screenCapture",FQ:"map.features.screenCapture",GQ:"map.keyboard.search",RQ:"map.features.layers",SQ:"map.keyboard.layers",TQ:"map.features.showLedgend",UQ:"map.features.showLedgendContext",jR:"map.features.toggleMode",lR:"map.undo",nR:"map.units.feet",oR:"map.units.imperial",
pR:"map.units.metric",qR:"map.units.mile",rR:"map.units.nautical",sR:"map.units.nauticalmile",tR:"map.units.yard",yR:"map.stats.error-webglInitFailed",zR:"map.stats.error-webglPerfCaveat",AR:"map.stats.error-webglUnsupported"},oea="settings.reset";function vw(a,b){ra(a.name)?(this.name=a.name,this.code=ww[a.name]):(this.code=a.code,this.name=$ea(a.code));Ra.call(this,maa("%s %s",this.name,b))}w(vw,Ra);function $ea(a){var b=rc(ww,function(b){return a==b});if(!ra(b))throw Error("Invalid code: "+a);return b}var ww={AbortError:3,EncodingError:5,InvalidModificationError:9,InvalidStateError:7,NotFoundError:1,NotReadableError:4,NoModificationAllowedError:6,PathExistsError:12,QuotaExceededError:10,SecurityError:2,SyntaxError:8,TypeMismatchError:11};function xw(a,b){z.call(this,a.type,b)}w(xw,z);function yw(){A.call(this);this.g=new FileReader;this.g.onloadstart=t(this.gi,this);this.g.onprogress=t(this.gi,this);this.g.onload=t(this.gi,this);this.g.onabort=t(this.gi,this);this.g.onerror=t(this.gi,this);this.g.onloadend=t(this.gi,this)}w(yw,A);g=yw.prototype;g.abort=function(){try{this.g.abort()}catch(a){throw new vw(a,"aborting read");}};g.xi=function(){return this.g.result};g.getError=function(){return this.g.error&&new vw(this.g.error,"reading file")};
g.gi=function(a){this.dispatchEvent(new xw(a,this))};g.J=function(){yw.C.J.call(this);delete this.g};function zw(a){var b=new yw,c=afa(b);b.g.readAsArrayBuffer(a);return c}function afa(a){var b=new mf;a.H("loadend",Fa(function(a,b){var c=b.xi(),d=b.getError();null==c||d?a.Eb(d):a.callback(c);b.dispose()},b,a));return b};function Aw(a,b){var c=b||{};b=c.document||document;var d=ye(a),e=document.createElement("SCRIPT"),f={Bz:e,Ma:void 0},h=new mf(bfa,f),k=null,l=null!=c.timeout?c.timeout:5E3;0<l&&(k=window.setTimeout(function(){Bw(e,!0);h.Eb(new Cw(cfa,"Timeout reached for loading script "+d))},l),f.Ma=k);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(Bw(e,c.HR||!1,k),h.callback(null))};e.onerror=function(){Bw(e,!0,k);h.Eb(new Cw(dfa,"Error while loading script "+
d))};f=c.attributes||{};Cc(f,{type:"text/javascript",charset:"UTF-8"});og(e,f);e.src=ye(a);efa(b).appendChild(e);return h}function efa(a){var b=(a||document).getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement}function bfa(){if(this&&this.Bz){var a=this.Bz;a&&"SCRIPT"==a.tagName&&Bw(a,!0,this.Ma)}}function Bw(a,b,c){null!=c&&qa.clearTimeout(c);a.onload=va;a.onerror=va;a.onreadystatechange=va;b&&window.setTimeout(function(){yg(a)},0)}var dfa=0,cfa=1;
function Cw(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);Ra.call(this,c);this.code=a}w(Cw,Ra);var Dw=E.V("os.file.mime"),Ew={type:"application/octet-stream",detect:function(){return Wc(!0)},priority:0};function Fw(a,b,c,d){var e=d?Gw(d):Ew;if(e){e.children||(e.children=[]);d=e.children.length;for(var f=0,h=e.children.length;f<h;f++)if(e.children[f].type===a){d=f;E.ib(Dw,'The mime type "'+a+'" was previously registered and will be replaced');break}e.children[d]={type:a,detect:b,priority:c||0};e.children.sort(ffa)}else E.error(Dw,'The parent type "'+d+'" could not be found.')}
function ffa(a,b){return a.priority-b.priority}function Gw(a,b){b=b||Ew;if(b.type===a)return b;if(b.children)for(var c=0,d=b.children.length;c<d;c++){var e=Gw(a,b.children[c]);if(e)return e}}function Hw(a,b,c,d){c=c||Ew;var e=c.detect(a,b,d);e instanceof Oc||console.warn(c.type,"is not using a promise");return e.then(function(e){if(e)return d=e,c.children?c.children.reduce(function(c,e){return c.then(function(c){return c?c:Hw(a,b,e,d)})},Wc()).then(function(a){return a?a:c.type}):c.type})}
function Iw(a,b,c){b=b||Ew;c=c||[];c.push(b.type);if(a===b.type)return c;if(b.children)for(var d=0,e=b.children.length;d<e;d++){var f=Iw(a,b.children[d],c);if(f)return f}c.pop()};function Jw(a){return a&&3<a.byteLength?1347093252==(new DataView(a.slice(0,4))).getUint32(0):!1}Fw("application/zip",function(a,b){return Jw(a)?window.zip?new Oc(function(c){var d=b&&b.o?new zip.BlobReader(b.o):new zip.ArrayBufferReader(a);try{zip.createReader(d,function(a){a.getEntries(function(a){c(a)})},function(){c(!0)})}catch(e){console.error(e)}}):Wc(!0):Wc()});
function Kw(a){return function(b,c,d){if(d&&Array.isArray(d))for(b=0,c=d.length;b<c;b++)if(a.test(d[b].filename)){var e=!0;break}return Wc(e)}};function Lw(){this.s=this.Za=this.A=this.o=this.j=this.l=this.g=null}var Mw=!1;g=Lw.prototype;g.Ob=function(){return this.g};function Nw(a){var b=a.Ob();b instanceof ArrayBuffer&&(b=Ow(b,a))&&(a.g=b)}g.getFileName=function(){return this.j};g.T=function(){return this.A};g.Sb=function(a){this.A=a};g.Ka=function(){return this.Za};g.Lb=function(a){this.Za=a};function gfa(a){var b=a.o;if(b){var c=new mf;vf(sf(zw(b),function(b){a.g=b;return null}),c);return c}}
g.sa=function(a){a=a||{};a.content=this.g;a.contentType=this.l;a.fileName=this.j;a.type=this.A;a.url=this.Za;a.encoding=this.s;return a};g.restore=function(a){this.g=a.content||null;this.l=a.contentType||null;this.j=a.fileName||null;this.A=a.type||null;this.Za=a.url||null;this.s=a.encoding||null};window.zip&&(Modernizr.webworkers?zip.workerScriptsPath="v1542394219/vendor/zip-js/":(zip.useWebWorkers=!1,Aw("v1542394219/vendor/zip-js/inflate.js"),Aw("v1542394219/vendor/zip-js/deflate.js")));
function Pw(a){var b=new mf;if(a.path&&Mw)b.callback(Qw(a.name,Rw(a.path),a,null));else if(104857600>a.size){var c=Sw(a.name);vf(sf(zw(a),Qw.bind(void 0,a.name,c,a)),b)}else b.Eb('File "'+a.name+'" exceeds the size limit ('+(Math.floor(104.8576)+"MB")+") and cannot be imported.");return b}function Qw(a,b,c,d){var e=new Lw;e.g=d;e.j=a;e.Lb(b);c&&(e.l=c.type,e.o=c);return e}function Rw(a){return td?"file:///"+a.replace(/\\/g,"/"):"file://"+a}function Sw(a){return"local://"+a}
function Tw(a){if(!a)return!1;a="string"===typeof a?a:a.Ka();return!!a&&Ib(a,"file://")}function Uw(a){if(!a)return!1;a="string"===typeof a?a:a.Ka();return!!a&&Ib(a,"local://")}function Vw(a){var b=null;a&&Aa(a)&&(b=new Lw,b.restore(a));return b}function Ww(a){return a?a.sa():void 0};function Xw(a){switch(a){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}};function Yw(){}Yw.prototype.g=null;function Zw(a){var b;(b=a.g)||(b={},$w(a)&&(b[0]=!0,b[1]=!0),b=a.g=b);return b};var ax;function bx(){}w(bx,Yw);function cx(a){return(a=$w(a))?new ActiveXObject(a):new XMLHttpRequest}function $w(a){if(!a.j&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.j=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.j}ax=new bx;function dx(a){A.call(this);this.headers=new Re;this.ka=a||null;this.l=!1;this.Z=this.g=null;this.Ca=this.P="";this.s=0;this.I="";this.o=this.ra=this.N=this.oa=!1;this.A=0;this.L=null;this.G=ex;this.U=this.B=!1}w(dx,A);var ex="";dx.prototype.j=E.V("goog.net.XhrIo");var hfa=/^https?$/i,ifa=["POST","PUT"];
function fx(a,b,c,d,e){if(a.g)throw Error("[goog.net.XhrIo] Object is active with another request="+a.P+"; newUri="+b);c=c?c.toUpperCase():"GET";a.P=b;a.I="";a.s=0;a.Ca=c;a.oa=!1;a.l=!0;a.g=a.ka?cx(a.ka):cx(ax);a.Z=a.ka?Zw(a.ka):Zw(ax);a.g.onreadystatechange=t(a.Cw,a);try{E.za(a.j,gx(a,"Opening Xhr")),a.ra=!0,a.g.open(c,String(b),!0),a.ra=!1}catch(h){E.za(a.j,gx(a,"Error opening Xhr: "+h.message));hx(a,h);return}b=d||"";var f=a.headers.clone();e&&Ie(e,function(a,b){f.set(b,a)});e=ib(f.Ub(),jfa);d=
qa.FormData&&b instanceof qa.FormData;!kb(ifa,c)||e||d||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");f.forEach(function(a,b){this.g.setRequestHeader(b,a)},a);a.G&&(a.g.responseType=a.G);"withCredentials"in a.g&&a.g.withCredentials!==a.B&&(a.g.withCredentials=a.B);try{ix(a),0<a.A&&(a.U=kfa(a.g),E.za(a.j,gx(a,"Will abort after "+a.A+"ms if incomplete, xhr2 "+a.U)),a.U?(a.g.timeout=a.A,a.g.ontimeout=t(a.Ma,a)):a.L=ke(a.Ma,a.A,a)),E.za(a.j,gx(a,"Sending request")),a.N=!0,a.g.send(b),
a.N=!1}catch(h){E.za(a.j,gx(a,"Send error: "+h.message)),hx(a,h)}}function kfa(a){return od&&Bd(9)&&ta(a.timeout)&&ra(a.ontimeout)}function jfa(a){return Kb("Content-Type",a)}g=dx.prototype;g.Ma=function(){"undefined"!=typeof pa&&this.g&&(this.I="Timed out after "+this.A+"ms, aborting",this.s=8,E.za(this.j,gx(this,this.I)),this.dispatchEvent("timeout"),this.abort(8))};function hx(a,b){a.l=!1;a.g&&(a.o=!0,a.g.abort(),a.o=!1);a.I=b;a.s=5;jx(a);kx(a)}
function jx(a){a.oa||(a.oa=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}g.abort=function(a){this.g&&this.l&&(E.za(this.j,gx(this,"Aborting")),this.l=!1,this.o=!0,this.g.abort(),this.o=!1,this.s=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),kx(this))};g.J=function(){this.g&&(this.l&&(this.l=!1,this.o=!0,this.g.abort(),this.o=!1),kx(this,!0));dx.C.J.call(this)};g.Cw=function(){this.Xa()||(this.ra||this.N||this.o?lx(this):this.rI())};g.rI=function(){lx(this)};
function lx(a){if(a.l&&"undefined"!=typeof pa)if(a.Z[1]&&4==mx(a)&&2==a.Ie())E.za(a.j,gx(a,"Local request error detected and ignored"));else if(a.N&&4==mx(a))ke(a.Cw,0,a);else if(a.dispatchEvent("readystatechange"),4==mx(a)){E.za(a.j,gx(a,"Request complete"));a.l=!1;try{var b=a.Ie();a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}var d;if(!(d=c)){var e;if(e=0===b){var f=String(a.P).match(Ue)[1]||null;if(!f&&qa.self&&qa.self.location){var h=
qa.self.location.protocol;f=h.substr(0,h.length-1)}e=!hfa.test(f?f.toLowerCase():"")}d=e}if(d)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.s=6;try{var k=2<mx(a)?a.g.statusText:""}catch(l){E.za(a.j,"Can not get status: "+l.message),k=""}a.I=k+" ["+a.Ie()+"]";jx(a)}}finally{kx(a)}}}
function kx(a,b){if(a.g){ix(a);var c=a.g,d=a.Z[0]?va:null;a.g=null;a.Z=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){E.error(a.j,"Problem encountered resetting onreadystatechange: "+e.message)}}}function ix(a){a.g&&a.U&&(a.g.ontimeout=null);a.L&&(qa.clearTimeout(a.L),a.L=null)}g.isActive=function(){return!!this.g};function mx(a){return a.g?a.g.readyState:0}g.Ie=function(){try{return 2<mx(this)?this.g.status:-1}catch(a){return-1}};
function lfa(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.G){case ex:case "text":return a.g.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}E.error(a.j,"Response type "+a.G+" is not supported on this browser");return null}catch(b){return E.za(a.j,"Can not get response: "+b.message),null}}function gx(a,b){return b+" ["+a.Ca+" "+a.P+" "+a.Ie()+"]"};function nx(){A.call(this);this.log=mfa;this.g=0;this.statusCode=-1;this.timeout=0}w(nx,A);var mfa=E.V("os.net.AbstractRequestHandler");g=nx.prototype;g.jc=function(){return this.g};g.Qq=null;g.handles=function(){return!1};g.Fx=function(){return this.Qq};g.Vo=function(){return this.statusCode};
g.ti=function(a){var b=a.s;if(6===b){this.statusCode=a=a.Ie();switch(!0){case 502===a:b="Bad gateway.";break;case 503===a:b="Service unavailable.";break;case 500<=a:b="The remote server experienced an error ("+a+").";break;case 400===a:b="Bad request.";break;case 401===a:b="You do not have proper authorization to perform this action.";break;case 403===a:b="You do not have proper authorization to perform this action.";break;case 404===a:b="The requested resource was not found.";break;case 400<=a:b=
"There was an issue accessing the resource ("+a+").";break;default:b=Xw(b)+"."}E.error(this.log,b+" Http Status code: "+a)}else b=Xw(b),E.error(this.log,b);return b};g.Lj=function(){return""};g.Tu=function(){return!!this.statusCode};g.setTimeout=function(a){this.timeout=a};function ox(){}ox.prototype.Lm=function(){return"application/x-www-form-urlencoded;charset=utf-8"};ox.prototype.format=function(a){var b=a.g.toString();a.g.clear();return b};function px(){nx.call(this);this.log=nfa}w(px,nx);var nfa=E.V("os.net.SameDomainHandler");g=px.prototype;g.J=function(){this.Lc&&this.Lc.dispose();px.C.J.call(this)};g.handles=function(a,b){if(window){if(!b.j)return!0;if("local"!=b.l)return ef(new Ve(window.location),b)}return!1};g.Lc=null;g.Rq=function(){return this.Lc?lfa(this.Lc):null};
g.Sq=function(){if(this.Lc){var a={};var b=this.Lc;b=(b.g&&4==mx(b)?b.g.getAllResponseHeaders():"").split("\r\n");for(var c=0;c<b.length;c++)if(!Lb(b[c])){var d=2;for(var e=b[c].split(": "),f=[];0<d&&e.length;)f.push(e.shift()),d--;e.length&&f.push(e.join(": "));d=f;a[d[0]]=a[d[0]]?a[d[0]]+(", "+d[1]):d[1]}}else a=null;return a};g.wt=function(){this.Lc=new dx;this.Lc.A=Math.max(0,this.timeout);this.Lc.H("success",this.vJ,!1,this);this.Lc.H("error",this.Tw,!1,this);this.Lc.H("timeout",this.Tw,!1,this)};
g.abort=function(){this.Lc&&this.Lc.abort()};g.Fa=function(a,b,c,d,e,f){this.Qq=null;this.Lc||this.wt();var h=null;"GET"!=a&&"HEAD"!=a&&"DELETE"!=a&&(d||(d=new ox),h=d.format(b),c||(c={}),d.Lm()&&(c["Content-Type"]=d.Lm()));e&&(d=Ha(),b.g.set("_cd",d));this.Lc.G=f||ex;fx(this.Lc,this.Op(b),a,h,c)};g.Op=function(a){return a};g.vJ=function(){this.statusCode=this.Lc.Ie();this.dispatchEvent("success")};g.Tw=function(){var a=this.ti(this.Lc);a&&(this.Qq=[a]);this.dispatchEvent("error")};g.Lj=function(){return"sameDomain"};function qx(){px.call(this);this.log=ofa}w(qx,px);var ofa=E.V("os.net.ExtDomainHandler"),rx=!1;qx.prototype.handles=function(a,b){if(window&&b.j&&"local"!=b.l){a=new Ve(window.location);var c=a.l.toLowerCase(),d=b.l.toLowerCase();return rx||c==d||"http"!=d?!ef(a,b):(E.ib(this.log,"Mixed content is not allowed: "+b.toString()),!1)}return!1};qx.prototype.Op=function(a){if(this.Lc){var b=sx(a)===tx;this.Lc.B=b}return a};qx.prototype.Lj=function(){return"extDomain"};function ux(a,b,c){if(ta(a))var d={name:vx(a)};else d=a,a=pfa(a.name);this.code=a;this.g=d;b="Error "+b+": "+this.getName();c&&(b+=", "+c);Ra.call(this,b)}w(ux,Ra);ux.prototype.getName=function(){return this.g.name||""};
var wx={rB:1,SP:2,NOT_FOUND_ERR:3,EA:4,HA:5,TP:6,pB:7,ABORT_ERR:8,aB:9,kR:10,oB:11,ZA:12,INVALID_ACCESS_ERR:13,INVALID_STATE_ERR:14},xx=(qa.mg||qa.dh||wx).rB,yx=(qa.mg||qa.dh||wx).NOT_FOUND_ERR,zx=(qa.mg||qa.dh||wx).EA,Ax=(qa.mg||qa.dh||wx).HA,Bx=(qa.mg||qa.dh||wx).pB,Cx=(qa.mg||qa.dh||wx).ABORT_ERR,Dx=(qa.mg||qa.dh||wx).aB,Ex=(qa.mg||qa.dh||wx).oB,Fx=(qa.mg||qa.dh||wx).ZA,Gx=(qa.DOMException||wx).INVALID_ACCESS_ERR,Hx=(qa.DOMException||wx).INVALID_STATE_ERR;
function pfa(a){switch(a){case "UnknownError":return xx;case "NotFoundError":return yx;case "ConstraintError":return zx;case "DataError":return Ax;case "TransactionInactiveError":return Bx;case "AbortError":return Cx;case "ReadOnlyError":return Dx;case "TimeoutError":return Ex;case "QuotaExceededError":return Fx;case "InvalidAccessError":return Gx;case "InvalidStateError":return Hx;default:return xx}}
function vx(a){switch(a){case xx:return"UnknownError";case yx:return"NotFoundError";case zx:return"ConstraintError";case Ax:return"DataError";case Bx:return"TransactionInactiveError";case Cx:return"AbortError";case Dx:return"ReadOnlyError";case Ex:return"TimeoutError";case Fx:return"QuotaExceededError";case Gx:return"InvalidAccessError";case Hx:return"InvalidStateError";default:return"UnknownError"}}function Ix(a,b){return"error"in a?new ux(a.error,b):new ux({name:"UnknownError"},b)}
function Jx(a,b){if("name"in a)return b=b+": "+a.message,new ux(a,b);if("code"in a){var c=vx(a.code);b=b+": "+a.message;return new ux({name:c},b)}return new ux({name:"UnknownError"},b)};function Kx(){y.call(this)}w(Kx,y);function Lx(a,b,c){if(!P(a,"os.storage.IMechanism"))throw Error("mechanism must implement os.storage.IMechanism");y.call(this);this.g=a;this.j=b||JSON.parse;this.serialize=c||JSON.stringify}w(Lx,Kx);var Mx=E.V("os.storage.AsyncStorageWrapper");g=Lx.prototype;g.init=function(){return Af()};g.get=function(a){var b;try{(b=this.g.get(a))&&(b=this.j(b))}catch(c){b=void 0}return Af(null!=b?b:void 0)};
g.Ox=function(){var a=[];try{a=this.g.Px();for(var b=0;b<a.length;b++){var c=a[b];c&&(a[b]=this.j(c))}}catch(d){a=[]}return Af(a)};
g.set=function(a,b,c){if(c||null==this.g.get(a)){try{b=this.serialize(b)}catch(d){b=void 0}if(b)try{this.g.set(a,b)}catch(d){a=ws("the application");b=xs("your system administrator");switch("string"==typeof d?d:""){case "Storage mechanism: Invalid value was encountered":c="Failed saving data to application storage due to an invalid value.";break;case "Storage mechanism: Quota exceeded":c="Application storage is full and data was not saved to the application.";break;case "Storage mechanism: Storage disabled":c=
"Application storage is disabled and data was not saved to the application.";break;default:c="Failed saving data to application storage: "+d.message+"."}c+=" Your work may be lost if you close/refresh "+a+". Please contact "+b+" for support.";At(zt.u(),c,rs,Mx)}else this.g.remove(a)}return Af(void 0)};g.remove=function(a){this.g.remove(a);return Af(void 0)};g.clear=function(){this.g instanceof Wr?this.g.clear():E.ib(Mx,"Clear is unsupported by storage mechanism");return Af(void 0)};function Nx(a){this.g=a}var qfa=qa.IDBKeyRange||qa.webkitIDBKeyRange;Nx.prototype.range=function(){return this.g};function Ox(){A.call(this)}w(Ox,A);g=Ox.prototype;g.rg=null;g.next=function(a){if(a)this.rg["continue"](a);else this.rg["continue"]()};g.update=function(a){var b="updating via cursor with value ",c=new mf;try{var d=this.rg.update(a)}catch(e){return b+=Gd(a),c.Eb(Jx(e,b)),c}d.onsuccess=function(){c.callback()};d.onerror=function(d){b+=Gd(a);c.Eb(Ix(d.target,b))};return c};
g.remove=function(){var a=new mf;try{var b=this.rg["delete"]()}catch(c){return a.Eb(Jx(c,"deleting via cursor")),a}b.onsuccess=function(){a.callback()};b.onerror=function(b){a.Eb(Ix(b.target,"deleting via cursor"))};return a};g.getValue=function(){return this.rg.value};g.getKey=function(){return this.rg.key};
function rfa(a,b,c){var d=new Ox;try{var e=b?b.range():null;var f=c?a.openCursor(e,c):a.openCursor(e)}catch(h){throw d.dispose(),Jx(h,a.name);}f.onsuccess=function(a){d.rg=a.target.result||null;d.rg?d.dispatchEvent(Px):d.dispatchEvent(Qx)};f.onerror=function(){d.dispatchEvent(Rx)};return d}var Qx="c",Rx="e",Px="n";function Sx(a){this.g=a}g=Sx.prototype;g.getName=function(){return this.g.name};function Tx(a,b,c,d,e){var f=new mf;try{var h=e?a.g[b](d,e):a.g[b](d)}catch(k){return c+=Gd(d),e&&(c+=", with key "+Gd(e)),f.Eb(Jx(k,c)),f}h.onsuccess=function(a){f.callback(a.target.result)};h.onerror=function(a){c+=Gd(d);e&&(c+=", with key "+Gd(e));f.Eb(Ix(a.target,c))};return f}g.add=function(a,b){return Tx(this,"add","adding into "+this.getName()+" with value ",a,b)};
g.remove=function(a){var b=new mf;try{var c=this.g["delete"](a instanceof Nx?a.range():a)}catch(e){return c="removing from "+this.getName()+" with key "+Gd(a),b.Eb(Jx(e,c)),b}c.onsuccess=function(){b.callback()};var d=this;c.onerror=function(c){var e="removing from "+d.getName()+" with key "+Gd(a);b.Eb(Ix(c.target,e))};return b};
g.get=function(a){var b=new mf;try{var c=this.g.get(a)}catch(e){return c="getting from "+this.getName()+" with key "+Gd(a),b.Eb(Jx(e,c)),b}c.onsuccess=function(a){b.callback(a.target.result)};var d=this;c.onerror=function(c){var e="getting from "+d.getName()+" with key "+Gd(a);b.Eb(Ix(c.target,e))};return b};
function sfa(a){var b=new mf;try{var c=Ux(a,void 0,void 0)}catch(e){return b.Eb(e),b}var d=[];Yd(c,Px,function(){d.push(c.getValue());c.next()});Zd(c,[Rx,Qx],function(a){c.dispose();a.type==Qx?b.callback(d):b.Eb()});return b}function Ux(a,b,c){return rfa(a.g,b,c)}g.clear=function(){var a="clearing store "+this.getName(),b=new mf;try{var c=this.g.clear()}catch(d){return b.Eb(Jx(d,a)),b}c.onsuccess=function(){b.callback()};c.onerror=function(c){b.Eb(Ix(c.target,a))};return b};
g.deleteIndex=function(a){try{this.g.deleteIndex(a)}catch(b){throw Jx(b,"deleting index "+a);}};g.count=function(a){var b=new mf;try{var c=a?a.range():null,d=this.g.count(c);d.onsuccess=function(a){b.callback(a.target.result)};var e=this;d.onerror=function(a){b.Eb(Ix(a.target,e.getName()))}}catch(f){b.Eb(Jx(f,this.getName()))}return b};function Vx(a){y.call(this);this.j=a;this.g={}}w(Vx,y);var Wx=[];g=Vx.prototype;g.H=function(a,b,c,d){q(b)||(b&&(Wx[0]=b.toString()),b=Wx);for(var e=0;e<b.length;e++){var f=Yd(a,b[e],c||this.handleEvent,d||!1,this.j||this);if(!f)break;this.g[f.key]=f}return this};g.Ra=function(a,b,c,d){return Xx(this,a,b,c,d)};function Xx(a,b,c,d,e,f){if(q(c))for(var h=0;h<c.length;h++)Xx(a,b,c[h],d,e,f);else{b=Zd(b,c,d||a.handleEvent,e,f||a.j||a);if(!b)return a;a.g[b.key]=b}return a}
g.M=function(a,b,c,d,e){if(q(b))for(var f=0;f<b.length;f++)this.M(a,b[f],c,d,e);else c=c||this.handleEvent,d=Aa(d)?!!d.capture:!!d,e=e||this.j||this,c=$d(c),d=!!d,b=Qd(a)?a.Oj(b,c,d,e):a?(a=be(a))?a.Oj(b,c,d,e):null:null,b&&(ee(b),delete this.g[b.key])};g.removeAll=function(){jc(this.g,function(a,b){this.g.hasOwnProperty(b)&&ee(a)},this);this.g={}};g.J=function(){Vx.C.J.call(this);this.removeAll()};g.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Yx(a,b){A.call(this);this.g=a;this.l=b;this.j=new Vx(this);this.j.H(this.g,"complete",t(this.dispatchEvent,this,Zx));this.j.H(this.g,"abort",t(this.dispatchEvent,this,$x));this.j.H(this.g,"error",this.o)}w(Yx,A);Yx.prototype.o=function(a){a.target instanceof ux?this.dispatchEvent({type:ay,target:a.target}):this.dispatchEvent({type:ay,target:Ix(a.target,"in transaction")})};var Zx="complete",$x="abort",ay="error";
Yx.prototype.objectStore=function(a){try{return new Sx(this.g.objectStore(a))}catch(b){throw Jx(b,"getting object store "+a);}};Yx.prototype.wait=function(){var a=new mf;Zd(this,Zx,t(a.callback,a));var b=Zd(this,$x,function(){ee(c);a.Eb(new ux(Cx,"waiting for transaction to complete"))});var c=Zd(this,ay,function(c){ee(b);a.Eb(c.target)});var d=this.l;return sf(a,function(){return d})};Yx.prototype.abort=function(){this.g.abort()};Yx.prototype.J=function(){Yx.C.J.call(this);this.j.dispose()};function by(a){A.call(this);this.g=a;this.j=new Vx(this);this.j.H(this.g,cy,t(this.dispatchEvent,this,cy));this.j.H(this.g,dy,this.ND);this.j.H(this.g,ey,this.uC);this.j.H(this.g,fy,t(this.dispatchEvent,this,fy))}w(by,A);g=by.prototype;g.bp=!0;g.ND=function(a){this.dispatchEvent({type:dy,errorCode:a.target.error.severity})};g.uC=function(a){this.dispatchEvent(new gy(a.oldVersion,a.newVersion))};g.close=function(){this.bp&&(this.g.close(),this.bp=!1)};g.getName=function(){return this.g.name};
function hy(a,b,c){try{var d=c?a.g.transaction(b,c):a.g.transaction(b);return new Yx(d,a)}catch(e){throw Jx(e,"creating transaction");}}g.J=function(){by.C.J.call(this);this.j.dispose()};var cy="abort",fy="close",dy="error",ey="versionchange";function gy(a,b){z.call(this,ey);this.oldVersion=a;this.newVersion=b}w(gy,z);var iy=qa.indexedDB||qa.mozIndexedDB||qa.webkitIndexedDB||qa.moz_indexedDB;function tfa(a,b,c,d){var e=new mf;b=b?iy.open(a,b):iy.open(a);b.onsuccess=function(a){a=new by(a.target.result);e.callback(a)};b.onerror=function(b){e.Eb(Ix(b.target,"opening database "+a))};b.onupgradeneeded=function(a){if(c){var b=new by(a.target.result);c(new gy(a.oldVersion,a.newVersion),b,new Yx(a.target.transaction,b))}};b.onblocked=function(a){d&&d(new gy(a.oldVersion,a.newVersion))};return e};function jy(a,b,c){y.call(this);this.j=null;this.A=b||"opensphere.shared";this.s=null!=c?c:1;this.l=a;this.g=null;this.o={};this.log=ufa}w(jy,Kx);var ufa=E.V("os.storage.IDBStorage");g=jy.prototype;g.J=function(){jy.C.J.call(this);this.g&&this.g.cancel();this.j&&this.j.bp&&this.j.close();this.j=null};g.init=function(){if(Modernizr.indexeddb)var a=this.g=tf(tfa(this.A,this.s,this.qJ.bind(this),this.kG.bind(this)),this.MG,this.LG,this);else a=new mf,a.Eb(this.ti("idb:unsupported"));return a};
g.MG=function(a){E.za(this.log,"Successfully opened database "+a.getName());this.j=a;this.g=null};g.LG=function(a){E.error(this.log,"Error opening database:",a);return a};g.kG=function(){E.error(this.log,"IDB store blocked from upgrading to version "+this.s+"!")};
g.qJ=function(a,b){E.za(this.log,"Upgrading database from "+a.oldVersion+" to "+a.newVersion);a=b.g.objectStoreNames;if(!a||!a.contains(this.l)){a=this.l;try{b.g.createObjectStore(a,void 0)}catch(c){throw Jx(c,"creating object store "+a);}}};g.get=function(a){return this.g?sf(this.g,Fa(this.ku,a),this):Modernizr.indexeddb?this.ku(a):ky(this,"idb:unsupported")};g.ku=function(a){return this.j?sf(hy(this.j,[this.l],"readonly").objectStore(this.l).get(a),this.vl,this):ky(this,"idb:unsupported")};
g.Ox=function(){return this.g?sf(this.g,this.bu,this):Modernizr.indexeddb?this.bu():ky(this,"idb:unsupported")};g.bu=function(){return this.j?sf(sfa(hy(this.j,[this.l],"readonly").objectStore(this.l)),this.rC,this):ky(this,"idb:unsupported")};g.set=function(a,b,c){return this.g?sf(this.g,Fa(this.Gz,a,b,c),this):Modernizr.indexeddb?this.Gz(a,b,c):ky(this,"idb:unsupported")};
g.Gz=function(a,b,c){if(!this.j&&(!this.g||this.g.g))return ky(this,"idb:unsupported");var d=hy(this.j,[this.l],"readwrite"),e=d.objectStore(this.l),f=Ux(e,new Nx(qfa.bound(a,a,void 0,void 0))),h=null,k=Yd(f,Px,function(){h||(h=this.vl(f.getValue()));f.next()},!1,this);Zd(f,Qx,function(){ee(k);if(h){if(c){var d=this.es(b);Tx(e,"put","putting into "+e.getName()+" with value",d,a)}}else sf(e.add(this.es(b),a),Fa(this.LH,a),this)},!1,this);return d.wait()};
g.remove=function(a){return this.g?sf(this.g,Fa(this.rz,a),this):Modernizr.indexeddb?this.rz(a):ky(this,"idb:unsupported")};g.rz=function(a){if(!this.j&&(!this.g||this.g.g))return ky(this,"idb:unknown");var b=hy(this.j,[this.l],"readwrite");sf(b.objectStore(this.l).remove(a),Fa(this.NH,a),this);return b.wait()};g.vl=function(a){return a};g.rC=function(a){var b=[];if(a&&0<a.length)for(var c=0,d=a.length;c<d;c++){var e=this.vl(a[c]);null!=e&&b.push(e)}return b};g.es=function(a){return a};
g.jI=function(){E.info(this.log,'Cleared object store "'+this.l+'".')};g.LH=function(a){E.info(this.log,'Added item "'+a+'" to the database.')};g.NH=function(a){E.info(this.log,'Removed item "'+a+'" from the database.')};g.clear=function(){return this.g?sf(this.g,this.At,this):Modernizr.indexeddb?this.At():ky(this,"idb:unsupported")};g.At=function(){return sf(hy(this.j,[this.l],"readwrite").objectStore(this.l).clear(),this.jI,this)};
function ky(a,b){var c=a.ti(b);b in a.o||(a.o[b]=new mf,a.o[b].Eb(c));At(zt.u(),c,rs);return a.o[b]}g.ti=function(a){switch(a){case "idb:unsupported":return"Uh oh! Your browser does not support storing data with an in-browser database. To use this feature, please upgrade to a modern browser (we recommend Chrome 28+, FF24+, or IE10+).";default:return'There has been an error accessing the in-browser database. For assistance, use the "Help" menu to contact support.'}};function ly(){this.g={}}w(ly,Wr);P(ly,"os.storage.IMechanism");g=ly.prototype;g.set=function(a,b){this.g[a]=b};g.get=function(a){return this.g[a]};g.Px=function(){return mc(this.g)};g.remove=function(a){delete this.g[a]};g.clear=function(){vc(this.g)};g.pe=function(a){var b=0,c=a?nc(this.g):mc(this.g);a=new Ne;a.next=function(){if(b>=c.length)throw Me;return c[b++]};return a};function my(a,b){y.call(this);this.log=vfa;this.j={};this.g=new jy("files",a||"opensphere.files",b||2);this.g.vl=Vw;this.g.es=Ww;tf(this.g.init(),this.aJ,this.Lw,this)}w(my,y);wa(my);var vfa=E.V("os.file.FileStorage");g=my.prototype;g.J=function(){my.C.J.call(this);Ma(this.g);this.g=null};g.aJ=function(){tf(this.g.Ox(),this.pH,this.Lw,this)};g.Lw=function(){Ma(this.g);this.g=new Lx(new ly,Vw,Ww)};g.pH=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b].Ka();d&&(this.j[d]=!0)}};
g.clear=function(){return sf(this.g.clear(),this.oH,this)};function ny(a,b){var c="string"==typeof b?b:b.Ka();c?sf(a.g.remove(c),Fa(a.kH,c),a):(a="string"==typeof b?"undefined":b.getFileName(),(new mf).Eb("Unable delete a file ("+a+") with a null/empty url!"))}function oy(a,b){b="string"==typeof b?b:b.Ka();return!!b&&null!=a.j[b]}function py(a,b){return a.g.get(b)}
function qy(a,b){var c=b.getFileName();if(c&&oy(a,b)){var d=c.slice(c.lastIndexOf("/")+1).replace(/\.+/g,".");var e=d.lastIndexOf(".");d=0>=e?"":d.substr(e+1);c=c.replace(new RegExp("."+d+"$"),"");e=1;do{var f=c+"-"+e++ +"."+d;b.j=f;b.Lb(Sw(f))}while(oy(a,b))}}function ry(a,b){var c=b.Ka();return c?sf(a.g.set(c,b,!0),Fa(a.lH,c),a):(a=new mf,a.Eb("Unable store a file ("+b.getFileName()+") with a null/empty url!"),a)}g.lH=function(a){a&&(this.j[a]=!0)};g.kH=function(a){a&&delete this.j[a]};
g.oH=function(){this.j={}};function sy(){A.call(this);this.j=this.g=null;this.statusCode=-1}w(sy,A);g=sy.prototype;g.Zi=null;g.Fx=function(){return this.Zi};g.jc=function(){return 0};g.handles=function(a,b){return"local"==b.l};g.wt=function(){};g.Rq=function(){return this.j?this.j.Ob():null};g.Sq=function(){return null};g.abort=function(){this.g&&this.g.cancel()};g.Fa=function(a,b){this.j=this.Zi=null;a=my.u();b=decodeURIComponent(b.toString());this.g=tf(py(a,b),this.YJ,this.XJ,this)};
g.YJ=function(a){this.g=null;a?(this.statusCode=200,this.j=a,this.dispatchEvent(new z("success"))):(this.statusCode=404,this.Zi=["File not found in local storage!"],this.dispatchEvent(new z("error")))};g.XJ=function(a){this.g=null;this.Zi=[];"string"===typeof a?(this.statusCode=400,this.Zi.push(a)):(this.statusCode=404,this.Zi.push("File not found in local storage!"));this.dispatchEvent(new z("error"))};g.Vo=function(){return this.statusCode};g.Lj=function(){return"local"};
g.Tu=function(){return this.statusCode&&0<=this.statusCode?!0:!1};g.setTimeout=function(){};function ty(){px.call(this);this.g=-10}w(ty,px);var uy=E.V("os.net.ProxyHandler"),vy="/proxy/{url}",wy=["http"],xy=["GET"],yy=!0;function wfa(){var a=O.get(["proxy"]);a&&(void 0!==a.schemes&&(wy=a.schemes),void 0!==a.methods&&(xy=a.methods),void 0!==a.encode&&(yy=a.encode),void 0!==a.url&&(vy=a.url))}
ty.prototype.handles=function(a,b){var c=vy;if(!c||-1==c.indexOf("{url}"))return E.ib(uy,"The proxy url is not set properly"),!1;c=xy;if(!c||-1==c.indexOf(a))return E.za(uy,"The "+a+" method is not supported by the proxy."),!1;c=wy;return c&&-1!=c.indexOf(b.l)?!ty.C.handles.call(this,a,b):(E.za(uy,"The "+b.l+" scheme is not supported by the proxy"),!1)};ty.prototype.Op=function(a){return zy(a)};function zy(a){a=yy?encodeURIComponent(a.toString()):a.toString();return vy.replace("{url}",a)}
ty.prototype.Lj=function(){return"proxy"};var tx="use-credentials",Ay={ZN:"anonymous",wR:tx,NONE:"none"},By=[],Cy=[],xfa=new Ve(window.location);function yfa(){By.length=0;var a=O.get("crossOrigin",{}),b;for(b in a){var c=a[b];Dy(c.pattern,c.value,c.priority,!0)}By.sort(Ey)}function Ey(a,b){return Bb(b.priority,a.priority)}
function sx(a){if(a){a="string"===typeof a?new Ve(a):a;a:{var b=a.toString();if(By)for(var c=0,d=By.length;c<d;c++)if(By[c].pattern.test(b)){b=By[c].crossOrigin;break a}b=void 0}if(b)return b;if(a.j&&!ef(a,xfa))return"anonymous"}return"none"}function Dy(a,b,c,d){By.push({pattern:"string"===typeof a?new RegExp(a):a,crossOrigin:b,priority:c||0});d||By.sort(Ey)}function zfa(){var a=O.get("trustedUris",{}),b=O.get("userTrustedUris",{});zs(b,a,!0);Cy.length=0;for(var c in a)Cy.push(new RegExp(c))}
function Fy(a){if(a&&Cy){var b="string"===typeof a?a:a.toString();return Cy.some(function(a){return a.test(b)})}return!1};function R(){A.call(this);this.l={};this.j=O.get("metrics.enabled",!1);this.s=this.o=null;this.j&&(window.addEventListener("beforeunload",this.WJ.bind(this)),this.o=this.o?this.o:new Wt,this.l=O.get("metrics.values")||{},this.save(),Yd(document.body,"click",this.oM))}w(R,A);wa(R);var Xt=E.V("os.metrics.Metrics");g=R.prototype;g.J=function(){Ma(this.g);this.g=null;Ma(this.s);this.s=null};g.isEnabled=function(){return this.j};g.WJ=function(){this.j&&this.save()};
g.save=function(){this.j?(O.set("metrics.values",this.l),E.info(Xt,"Metrics locally saved")):E.ib(Xt,"Metrics were not saved: "+(this.j?"storage not available":"not enabled"))};g.reset=function(){this.j?(this.l={},this.save(),this.dispatchEvent("metrics:reset"),E.info(Xt,"Metrics reset")):E.ib(Xt,"Metrics were not reset: "+(this.j?"storage not available":"not enabled"))};
function Gy(a,b){a=a.split(".");for(var c=a.pop().replace(Hy,""),d=0;d<a.length&&(b=b[a[d]],null!=b);d++);if(b)for(var e in b)if(b.hasOwnProperty(e)&&c==e.replace(Hy,""))return!0;return!1}
function Q(a,b,c){try{if(a.j&&!Lb(Yb(b))){if(a.o){var d=a.o;d.l.enabled&&d.g.push({name:"opensphere."+b,value:c})}var e=b.split("."),f=e[e.length-1],h=oc(a.l,e);null!=h&&(c=Afa.test(f)?Math.max(h,c):Bfa.test(f)?Math.min(h,c):h+c);if(c!=h){Bs(a.l,e,c);var k=e.join(".").replace(Hy,"");a.dispatchEvent(new rt(k,c))}}else E.za(Xt,"Metrics disabled or no key provided - skipped update")}catch(l){E.error(Xt,"updateMetric caused un-expected exception.",l)}}
g.oM=function(a){try{var b=a.target,c=b.attributes.getNamedItem("metric"),d=c?c.value:null;Lb(Yb(d))&&b.parentElement&&(d=(c=b.parentElement.attributes.getNamedItem("metric"))?c.value:null);Q(R.u(),d,1)}catch(e){E.error(Xt,"recordClickEvent caused un-expected exception.",e)}};var Tea=[{alpha:1,color:[187,187,187],ratio:0},{alpha:1,color:[220,150,75],ratio:38.25},{alpha:1,color:[255,150,0],ratio:63.75},{alpha:1,color:[255,255,0],ratio:127.5},{alpha:1,color:[0,255,0],ratio:255}],Hy=/#(.*)/;E.V("os.metrics");
var Afa=/^max-/,Bfa=/^min-/;function Iy(a){y.call(this);this.Ba=null;this.lb=!1;this.state="ready";this.title="Add/Remove Layer";this.g=a||null}w(Iy,y);Iy.prototype.J=function(){Iy.C.J.call(this);this.g=null};
function Jy(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):!a.g||uc(a.g)?(a.state="error",a.Ba="Layer configuration not provided.",!1):"id"in a.g?"type"in a.g?!0:(a.state="error",a.Ba='Field "type" must be provided in layer configuration.',!1):(a.state="error",a.Ba='Field "id" must be provided in layer configuration.',!1)}
Iy.prototype.add=function(a){if(!a)return this.state="error",this.Ba="Layer configuration not provided.",!1;a=lw(a);if(a instanceof sl){if(!T.u().W(a.D()))return Ky(T.u(),a),Q(R.u(),"addData.add-layer-command",1),!0;this.state="error";this.Ba="Layer already on the map: "+a.S();return!1}this.state="error";this.Ba="Unable to create layer.";return!1};
Iy.prototype.remove=function(a){if(!a||!a.id)return this.state="error",this.Ba="Layer configuration not provided.",!1;T.u().pc(a.id);Q(R.u(),"addData.remove-layer-command",1);return!0};function Ly(a){Iy.call(this,a);this.title="Remove Layer"}w(Ly,Iy);Ly.prototype.Fa=function(){return Jy(this)&&(this.state="executing",this.remove(this.g))?(this.state="success",!0):!1};Ly.prototype.Cb=function(){this.state="reverting";return this.add(this.g)?(this.state="ready",!0):!1};function My(){A.call(this);this.Ba=null;this.lb=!0;this.state="ready";this.title=""}w(My,A);My.prototype.finish=function(a){this.detail=a||null;this.state="success";this.dispatchEvent("executed");return!0};function Ny(a,b){var c="reverting"==a.state?"reverted":"executed";a.state="error";a.Ba=b;a.dispatchEvent(c)}My.prototype.Cb=function(){this.state="ready";this.Ba=null;this.dispatchEvent("reverted");return!0};function Oy(a,b){My.call(this);this.Ba=null;this.lb=!0;this.state="ready";this.title="Switch to "+(a?"3D":"2D")+" Mode";this.j=a;this.g=null!=b?b:!1}w(Oy,My);function Py(a,b){return!b&&!a.g&&(a=Qy(V),b=Ry("2d"),a>b)?!1:!0}Oy.prototype.Fa=function(){this.state="executing";var a=this.j;if(Py(this,a))return Sy(T.u(),a,this.g),this.finish();Ty().then(function(){Sy(T.u(),a,this.g);this.finish()},function(){Ny(this,this.title+" cancelled by user.")},this);return!0};
Oy.prototype.Cb=function(){this.state="reverting";var a=!this.j;if(Py(this,a))return Sy(T.u(),a,this.g),Oy.C.Cb.call(this);Ty().then(function(){Sy(T.u(),a,this.g);this.state="ready";this.Ba=null;this.dispatchEvent("reverted")},function(){Ny(this,this.title+" cancelled by user.")},this);return!0};var Uy=null;function Vy(a){if(a)try{return Bv=Bv||Uy.get("$sanitize"),Bv(a)}catch(b){void 0===Bv?console.error("$santize service unavailable!"):void 0===Uy&&console.error("os.ui.injector service never defined!")}return a}function Cfa(a){if(a){var b={"<":"&lt;",">":"&gt;"};return String(a).replace(/[<>]/g,function(a){return b[a]})}return a}var W=angular.module("os.ui",["ui.directives","ngAnimate","ngSanitize"]);
function Wy(a,b,c){var d=angular.element("#measureText");d&&0!==d.length||(d=$('<div id="measureText" class="u-offscreen"></div>').appendTo("body"));if(d&&0<d.length){var e="u-offscreen ";b&&(e+=b);d[0].setAttribute("class",e);d.css("font",c||"");d.html(a.replace(/\n/g,"<br>"));return new gg(d.width(),d.height())}return new gg(0,0)}function X(a,b){if(null!=b&&0<=b)setTimeout(function(){X(a)},b);else try{!a||a.$root&&a.$root.$$phase||a.$apply()}catch(c){}}
function Xy(a){if(Uy){var b=Uy.get("$browser");b&&b.notifyWhenNoOutstandingRequests(a)}}
(function(){if(void 0!==window.jQuery){var a=window.jQuery;if(a.fn&&a.fn.typeahead){a.extend(a.fn.typeahead.Constructor.prototype,{getSelectedValue:function(){return this.$menu.find(".active").attr("data-value")},setInputValue:function(a){if(!a)return null;this.$element.val(this.updater(a)).change();return this},expandInputValueToSelection:function(){var a=this.getSelectedValue();a||(this.next(),a=this.getSelectedValue());return this.setInputValue(a)},select:function(a){var b=this.getSelectedValue();
if(!b)return this;if(b){var c={"&lt;":"<","&gt;":">"},f;for(f in c)b=b.replace(RegExp(f,"g"),c[f])}this.setInputValue(b);(a||void 0==a)&&this.hide();return this},render:function(b){var c=this;b=a(b).map(function(b,d){d=Cfa(d);b=a(c.options.item).attr("data-value",d);b.find("a").html(c.highlighter(d));return b[0]});this.$menu.html(b);return this},next:function(){var b=this.$menu.find(".active").removeClass("active");b.find("a").removeClass("active");b=b.next();b.length||(b=a(this.$menu.find("li")[0]));
b.addClass("active");b.find("a").addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active");a.find("a").removeClass("active");a=a.prev();a.length||(a=this.$menu.find("li").last());a.addClass("active");a.find("a").addClass("active")},move:function(a){if(this.shown){switch(a.keyCode){case 27:a.preventDefault();break;case 13:if(!this.shown)return;this.select();return;case 38:a.preventDefault();this.prev();break;case 40:"keypress"!=a.type&&(a.preventDefault(),this.next())}a.stopPropagation()}},
keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,39,13,27]);this.move(b)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 39:if(!this.shown)return;this.expandInputValueToSelection().hide();break;case 13:case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation();a.preventDefault()},click:function(a){a.preventDefault();this.select()}});a.fn.typeahead.defaults.item='<li><a tabindex="-1" class="dropdown-item text-truncate" href=""></a></li>';
a.fn.typeahead.defaults.menu='<ul class="typeahead dropdown-menu mw-100"></ul>';od&&(a.fn.modal.Constructor.prototype.enforceFocus=va);var b=a.fn.typeahead.Constructor.prototype.enforceFocus;a.extend(a.fn.typeahead.Constructor.prototype,{enforceFocus:function(){a(document).on("focusin.modal",t(function(c){a(c.target).hasClass("select2-input")||b.call(this)},this))}})}}})();
(function(){if(void 0!==window.jQuery){var a=window.jQuery;a.datepicker&&a.extend(a.datepicker,{_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),h=b.input?b.input.outerWidth():0,k=b.input?b.input.outerHeight():0,l=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),m=document.documentElement.clientHeight+(d?0:a(document).scrollTop());c.left-=this._get(b,"isRTL")?e-h:0;c.left-=d&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=Ke(d&&c.top,
b.input.offset().top+k,1)?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+e>l&&l>e?Math.abs(c.left+e-l):0);c.top-=Math.min(c.top,c.top+f>m&&m>f?Math.abs(f+k):0);return c}})}})();W.directive("defaultsettingui",[function(){return{restrict:"AE",replace:!0,template:"<div></div>",controller:Dfa,controllerAs:"settingUi"}}]);function Dfa(){};function Yy(){A.call(this);this.ma="";this.ga(Zy.toString());Zy++;this.cb=this.xa=this.Rb=null;this.xj={}}w(Yy,A);var Zy=0;g=Yy.prototype;g.J=function(){Yy.C.J.call(this);if(this.cb){for(var a=0,b=this.cb.length;a<b;a++){var c=this.cb[a];this.wl(c);c.dispose()}this.cb=null}};g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.ba=function(){return this.Rb};g.Da=function(a){if(a!==this.Rb){var b=this.Rb;this.Rb=a;this.dispatchEvent(new U("label",a,b))}};g.na=function(){return this.cb};
g.zc=function(a,b){if(a!==this.cb){if(this.cb)for(var c=this.cb.length;c--;)this.removeChild(this.cb[c]);if(a){c=0;for(var d=a.length;c<d;c++)this.R(a[c],b)}this.dispatchEvent(new U("children",a,null))}};g.getParent=function(){return this.xa};g.Pe=function(a,b){this.xa!==a&&(this.xa=a)&&!b&&this.xa.R(this,!0,0)};g.Ha=function(){for(var a=this;a.getParent();)a=a.getParent();return a};
g.R=function(a,b,c){this.cb||(this.cb=[]);return this.mp(a)?null:(nb(this.cb,a,null!=c?c:this.cb.length),this.tp(a),b||a.Pe(this,!0),this.dispatchEvent(new U("children",this.cb)),a)};g.tj=function(a,b){if(a){for(var c=!1,d=0,e=a.length;d<e;d++)this.R(a[d],b)&&(c=!0);c&&this.dispatchEvent(new U("children",this.cb))}};g.mp=function(a){return a.D()in this.xj};g.Ke=function(){return null!=this.cb&&0<this.cb.length};g.index=function(a){this.xj[a.D()]=a};g.kA=function(a){delete this.xj[a.D()]};
g.removeChild=function(a){return this.cb&&(a=this.cb.indexOf(a),-1<a)?$y(this,a):null};g.pz=function(a){this.cb&&this.cb.length>a&&$y(this,a)};function $y(a,b){var c=a.cb[b];c.getParent()===a&&c.Pe(null);a.cb.splice(b,1);a.wl(c);0===a.cb.length&&(a.cb=null);a.dispatchEvent(new U("children",a.cb));return c}g.find=function(a,b){if(a in this&&this[a]==b)return this;var c;if(this.cb)for(var d=0,e=this.cb.length;d<e;d++)if(c=this.cb[d].find(a,b))return c;return null};
g.tp=function(a){this.index(a);a.H("propertychange",this.uf,!1,this)};g.wl=function(a){this.kA(a);a.M("propertychange",this.uf,!1,this)};g.uf=function(a){a=a.l;"children"!=a&&"label"!=a||this.dispatchEvent(new U(a))};g.clone=function(){var a=new this.constructor;a.lc(this);return a};g.lc=function(a){this.ga(a.D());this.Da(a.ba())};function az(a,b){return(a=a.getParent())&&a==b?!0:a?az(a,b):!1}
function bz(a){var b=a.na();if(b&&0<b.length){a=[];for(var c=0;c<b.length;c++){var d=b[c];d&&a.push(bz(d))}return Fb(a)}return a};function cz(){Yy.call(this);this.va="off";this.Ga("off");this.A={};this.A.on=0;this.A.off=0;this.A.both=0;this.N=!1;this.Z=!0;this.cf=!1}w(cz,Yy);g=cz.prototype;g.getState=function(){return this.va};
g.Ga=function(a){if(a!==this.va){var b=this.va;switch(a){case "off":case "on":case "both":this.va=a;if(this.Z&&!this.N){this.N=!0;if("both"!==this.getState()){var c=this.na(),d=this.getState();this.A.off=0;this.A.on=0;this.A.both=0;if(c){for(var e=c.length;e--;)this.nA(c[e],d);this.A[d]=c.length}}this.N=!1}this.dispatchEvent(new U("state",a,b))}}};g.tp=function(a){this.Z&&(this.A[a.getState()]++,dz(this));cz.C.tp.call(this,a)};
g.wl=function(a){this.Z&&(this.A[a.getState()]--,dz(this));cz.C.wl.call(this,a)};g.uf=function(a){this.Z&&"state"==a.l&&!this.N&&(this.A[a.s]--,this.A[a.o]++,dz(this));cz.C.uf.call(this,a)};function dz(a){var b=(a.na()||[]).length;a.N=!0;0<b?a.A.on>=b?a.Ga("on"):a.A.off>=b?a.Ga("off"):a.Ga("both"):a.Ga("off");a.N=!1}g.nA=function(a,b){a.Ga(b)};g.Eo=function(){return this.cf};g.lc=function(a){this.Ga(a.getState());cz.C.lc.call(this,a)};W.directive("nodeicons",[function(){return{restrict:"E",template:'<span class="js-node-icons align-text-bottom pr-1 c-node-icons"></span>',controller:ez,controllerAs:"nodeicons"}}]);function ez(a,b,c){this.v=a;this.K=b;this.g=c;"item"in this.v&&(b=this.v.item,"getIcons"in this.v.item&&(b.H("propertychange",this.j,!1,this),fz(this)));a.$on("$destroy",this.l.bind(this))}ez.$inject=["$scope","$element","$compile"];
ez.prototype.l=function(){this.v&&(this.v.item.M("propertychange",this.j,!1,this),this.g=this.K=this.v=null)};ez.prototype.j=function(a){"icons"==a.l&&fz(this)};function fz(a){if(a.v&&a.K){var b=a.K.find(".js-node-icons"),c=a.v.item.getIcons()||"&nbsp;";b.html(c);a.g(b.contents())(a.v)}};W.directive("nodespinner",[function(){return{restrict:"AE",replace:!0,template:'<span ng-show="item.isLoading()" class="ng-hide"><i class="fa fa-fw" ng-class="spinClass" title="Loading..."></i></span>',controller:gz,controllerAs:"spin"}}]);function gz(a){this.v=a;a.spinClass||(a.spinClass="fa-spin fa-spinner");"item"in this.v&&(a=this.v.item,"isLoading"in this.v.item&&a.H("propertychange",this.g,!1,this));this.v.$on("$destroy",this.j.bind(this))}gz.$inject=["$scope","$element"];
gz.prototype.j=function(){this.v&&(this.v.item.M("propertychange",this.g,!1,this),this.v=null)};gz.prototype.g=function(a){"loading"==a.l&&X(this.v)};function hz(){return{restrict:"AE",replace:!0,template:"<i class=\"js-node-toggle c-node-toggle fa fa-fw\" ng-class=\"{'fa-caret-right': item.collapsed, 'fa-caret-down': !item.collapsed}\"></i>",controller:iz,controllerAs:"toggle"}}W.directive("nodetoggle",[hz]);function iz(a,b){this.v=a;this.K=b;this.v.item instanceof jz&&(this.v.item.H("propertychange",this.g,!1,this),this.j());this.v.$on("$destroy",this.l.bind(this))}iz.$inject=["$scope","$element"];
iz.prototype.l=function(){this.v&&this.v.item.M("propertychange",this.g,!1,this);this.K=this.v=null};iz.prototype.g=function(a){"children"==a.l&&this.j()};iz.prototype.j=function(){var a=this.v.item.na();this.K.css("opacity",a&&0<a.length?"1":"0")};W.directive("tristatecheckbox",[function(){return{restrict:"AE",replace:!0,template:'<span ng-class="chkClass + \' \' + chkClass + \'-\' + item.state"ng-click="checkCtrl.toggle($event)" ng-dblclick="checkCtrl.onDblClick($event)" title="{{chkTooltip}}"><label></label></span>',controller:kz,controllerAs:"checkCtrl"}}]);function kz(a,b){this.v=a;this.K=b;lz(this,this.v.item)&&b.addClass("disabled");a.$on("$destroy",this.g.bind(this))}kz.$inject=["$scope","$element"];
kz.prototype.g=function(){this.K=this.v=null};kz.prototype.toggle=function(a){if(this.v){var b=this.v.item;lz(this,b)||(b.Ga("off"==b.getState()?"on":"off"),this.v&&(this.v.$emit("dirty"),X(this.v)));a.stopPropagation()}};kz.prototype.toggle=kz.prototype.toggle;kz.prototype.onDblClick=function(a){this.K.hasClass("disabled")||a.stopPropagation()};kz.prototype.onDblClick=kz.prototype.onDblClick;function lz(a,b){return!!b&&(b.Eo()||a.v.disableFolders&&b.Ke())};W.directive("windowlauncher",[function(){return{restrict:"AE",replace:!0,template:'<small><button ng-click="launchCtrl.click($event)" title="{{chkTooltip}}" class="btn btn-sm btn-info border"><i ng-class="winLauncherClass"></i></button></small>',controller:mz,controllerAs:"launchCtrl"}}]);function mz(a){this.v=a;a.$on("$destroy",this.g.bind(this))}mz.$inject=["$scope"];mz.prototype.g=function(){this.v=null};mz.prototype.click=function(){this.v&&this.v.item.Ja().setActive(!0)};mz.prototype.click=mz.prototype.click;function jz(){cz.call(this);this.qf=this.collapsed=!0;this.Xd=-1;this.depth=0;this.L=!1;this.j=this.mf="";this.bb=this.ka=!0;this.Ca=this.Hg=null;this.De=!1;this.hd=null;this.bold=!0}w(jz,cz);g=jz.prototype;g.Da=function(a){jz.C.Da.call(this,a);this.label=this.ba()};g.Ga=function(a){nz(this,a)};function nz(a,b){jz.C.Ga.call(a,b);a.state=a.getState()}g.Je=function(){return this.mf};function oz(a,b){a.mf=b||""}g.du=function(){return this.ka};g.Qd=function(){return this.j};g.Bf=function(a){this.j=a};
function pz(a,b){if(b!==a.ka){var c=a.ka;a.ka=b;a.dispatchEvent(new U("checkboxVisible",b,c))}}g.format=function(a,b,c){if(null==c)return"";a=qz(15*this.depth);a+="<nodetoggle></nodetoggle>";this.ka&&(a=a+"<tristatecheckbox></tristatecheckbox>"+qz());this.De&&(a=a+"<windowlauncher></windowlauncher>"+qz());a=a+'<nodespinner></nodespinner><nodeicons class="flex-shrink-0"></nodeicons>'+('<span class="text-truncate flex-fill">'+this.Gj(c)+"</span>");return a+=this.j};
function qz(a){var b;null==a&&(a=2);null==b&&(b="px");return'<span class="c-slick-tree-node__spacer" style="width:'+a+b+'"></span>'}g.Gj=function(a){var b='<span title="'+Vy(this.Je()).replace(/<.*?>/g,"").replace(/"/g,"'")+'">';this.bold&&-1==this.Xd&&(b+="<b>");b+=Vy(a);this.bold&&-1==this.Xd&&(b+="</b>");return b+"</span>"};g.td=function(){return this.Hc()};jz.prototype.getIcons=jz.prototype.td;g=jz.prototype;g.Hc=function(){return"&nbsp;"};g.ej=function(){};g.Jh=function(){};g.yy=function(){};
g.lc=function(a){this.collapsed=a.collapsed;oz(this,a.Je());pz(this,a.du());this.De=a.De;this.hd=a.hd;this.Ca=a.Ca;jz.C.lc.call(this,a)};g.yt=function(){return!1};g.zd=function(a,b){this.collapsed=a;this.dispatchEvent(new U("collapsed",a,!a));if(b&&(b=this.na()))for(var c=0;c<b.length;c++)b[c].zd(a,!0)};function rz(){jz.call(this);this.g=null}w(rz,jz);g=rz.prototype;g.J=function(){rz.C.J.call(this);this.g=null};g.je=function(){var a="";this.g&&(a+=this.g.ba(),a+=this.getTags()?" "+this.getTags().join(" "):"",a+=" "+this.g.j.join(" "));return a};g.getTags=function(){return this.g&&this.g.getTags()||null};g.du=function(){return!1};function sz(a,b){a.g=b;a.g&&(a.ga(a.g.D()),a.Da(a.g.ba()),a.Ga("on"),pz(a,!1),oz(a,a.g.qb()))}g.Hc=function(){var a=null;this.g&&(a=this.g.wg());return a?a:rz.C.Hc.call(this)};function tz(){this.g=null;this.label="Change Me!";this.j=[];this.description="";this.be=[];this.icon="";this.fd=null}w(tz,y);g=tz.prototype;g.J=function(){tz.C.J.call(this);Ma(this.g);this.g=null};g.D=function(){return((0<this.j.length?this.j.join(".")+".":"")+this.label).replace(" ","_").toLowerCase()};function uz(a){a.j=["Map"]}g.qb=function(){return this.description};g.fb=function(a){this.description=a};g.wg=function(){return this.icon||'<i class="fa fa-gear"></i>'};
g.wc=function(a){this.icon=Zb('<i class="',a,'"></i> ')};g.ba=function(){return this.label};g.Da=function(a){this.label=a};g.getTags=function(){return this.be};g.vb=function(a){this.be=a};g.zg=function(){return this.fd};function Efa(a,b){return a&&b?a.toFixed(5)+"\u00b0  "+b.toFixed(5)+"\u00b0":""}W.filter("deg",[function(){return Efa}]);function Ffa(a){return a+"\u00b0"}W.filter("deglat",[function(){return Ffa}]);function Gfa(a){return a+"\u00b0"}W.filter("deglon",[function(){return Gfa}]);function Hfa(a,b){return Mu(a,!1,!1)+" "+Mu(b,!0,!1)}W.filter("ddm",[function(){return Hfa}]);function Ifa(a){return Mu(a,!1,!1)}W.filter("ddmlat",[function(){return Ifa}]);function Jfa(a){return Mu(a,!0,!1)}
W.filter("ddmlon",[function(){return Jfa}]);function Kfa(a,b){return Lu(a,!1,!1)+" "+Lu(b,!0,!1)}W.filter("dms",[function(){return Kfa}]);function Lfa(a){return Lu(a,!1,!1)}W.filter("dmslat",[function(){return Lfa}]);function Mfa(a){return Lu(a,!0,!1)}W.filter("dmslon",[function(){return Mfa}]);function Nfa(a,b){return b&&a?osasm.toMGRS([b,a]):""}W.filter("mgrs",[function(){return Nfa}]);E.V("os.ui.location");var Ofa={wO:"deg",xO:"dms",uO:"ddm",IP:"mgrs"};function vz(){return O.get("locationFormat","deg")};function wz(a,b){this.v=a;this.l=b;this.location="";this.currentFormat=vz();this.g=new le(this.format,25,this);this.v.$on("$destroy",this.o.bind(this));this.v.$watch("latdeg",this.j.bind(this));this.v.$watch("londeg",this.j.bind(this));O.H("locationFormat",this.hv,!1,this)}wz.$inject=["$scope","$filter"];wz.prototype.o=function(){Ma(this.g);this.l=this.v=this.g=null};wz.prototype.j=function(){this.g&&this.g.start()};
wz.prototype.format=function(a){if(this.v&&void 0!=this.v.latdeg&&void 0!=this.v.londeg){this.currentFormat=a||vz();a=this.l(this.currentFormat);var b=this.v.latdeg,c=this.v.londeg;this.location="number"!==typeof b&&"string"!==typeof b||"number"!==typeof c&&"string"!==typeof c?"":a(this.v.latdeg,this.v.londeg).replace(/\u00b0/g,"&deg;");if(this.v.onchange)this.v.onchange();X(this.v)}};wz.prototype.format=wz.prototype.format;wz.prototype.hv=function(a){a.j&&this.format(a.j)};
wz.prototype.locationChanged=wz.prototype.hv;function xz(){return{restrict:"EA",replace:!0,template:xz.l,controller:wz,controllerAs:"simpleLocationCtrl",scope:{latdeg:"=",londeg:"=",onchange:"&"}}}xz.g="simpleLocation";W.directive(xz.g,[xz]);xz.l='<div><simple-location-controls format-default="simpleLocationCtrl.currentFormat" on-change="simpleLocationCtrl.format(opt_format)"></simple-location-controls><span ng-bind-html="simpleLocationCtrl.location"></span></div>';
function yz(a){this.v=a;this.g=this.v.change;this.format=vz();this.g({opt_format:this.format});this.v.$on("$destroy",this.j.bind(this));this.v.$watch("formatDefault",t(function(a){this.format=a},this));O.H("locationFormat",this.iv,!1,this)}yz.$inject=["$scope"];yz.prototype.au=function(a,b){this.g({opt_format:a});b&&b.target&&b.target.blur();O.set("locationFormat",a);X(this.v)};yz.prototype.formatChanged=yz.prototype.au;yz.prototype.iv=function(a){a.j&&this.au(a.j)};
yz.prototype.locationControlChanged=yz.prototype.iv;yz.prototype.j=function(){this.v=null};function zz(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/location/simplelocation.html",controller:yz,controllerAs:"simpleLocationControlsCtrl",scope:{formatDefault:"=",change:"&onChange",formatGroup:"&"}}}zz.g="simpleLocationControls";W.directive(zz.g,zz);var Pfa=/^mailto:/,Az=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Bz=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)[^\s'"]*[^\s.;,{}<>'"]/;function Qfa(a){var b={};a&&a.toString().split("&").forEach(function(a){a=a.split("=");2==a.length&&(b[a[0]]=decodeURIComponent(a[1]))});return b};var Cz=/^(true|false)$/i,Dz=/^(0x)?[0-9A-Fa-f]+$/,Ez=/^[+-]?\d+(\.\d*)?(E[+-]\d+)?$/;
function Fz(a,b,c,d,e){function f(a,f){l.push("<a ");c&&(l.push('class="'),l.push(c),l.push('" '));d&&(l.push('title="'),l.push(d),l.push('" '));b&&(l.push('target="'),l.push(b),l.push('" '));l.push('href="');l.push(a);l.push('">');h(e?e:f);l.push("</a>")}function h(a){a&&l.push(Vf(Wf(a)))}if(!a)return a;for(var k=a,l=[],m,n;a=k.match(Bz);)m=a[0],a[2]==a[3]&&(m="mailto:"+m),n=a.index,h(k.substr(0,n)),f(m,a[0].replace(Pfa,"")),k=k.substring(n+a[0].length);h(k);return l.join("")};function Gz(a){return function(b,c){return a(Fz(b,c))}}Gz.$inject=["$sanitize"];W.filter("osLinky",["$sanitize",Gz]);function Hz(){tz.call(this);this.Da("Display");uz(this);this.fb("Start application in 2D or 3D mode");this.vb(["2D","3D","Dimension"]);this.wc("fa fa-dashboard");this.fd="displaysettings"}w(Hz,tz);var Rfa={};function Iz(){var a=O.get("os.map.terrainOptions");return!(!a||!a.type)}W.directive("displaysettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/config/displaysettings.html",controller:Jz,controllerAs:"display"}}]);
function Jz(a){this.v=a;a.appName=ws("the application");this.help={fog:"Fog is displayed when tilting the globe to reduce rendered tiles and terrain near the horizon. Disabling fog or reducing density may degrade application performance.",sunlight:"Light the 3D scene with the Sun.",terrain:"Show terrain on the 3D globe."};this.g=!1;this.mapMode=O.get("os.map.mapMode","3d");this.v.$watch("display.mapMode",this.LN.bind(this));var b=O.get("os.map.cameraState");if(b)try{var c=JSON.parse(b)}catch(d){c=
void 0}this.cameraMode=O.get("os.map.cameraMode","default");this.v.$watch("display.cameraMode",this.GN.bind(this));this.cameraState=c||Kz(this);this.fogEnabled=O.get("os.map.fogEnabled",!0);b=O.get("os.map.fogDensity",.5);.001>b&&(b=.5);this.fogDensity=b;this.sunlightEnabled=O.get("os.map.enableLighting",!1);this.terrainEnabled=O.get("os.map.enableTerrain",!1);a.$watch("display.fogEnabled",this.Fs.bind(this));a.$watch("display.fogDensity",this.Fs.bind(this));O.H("os.map.cameraState",this.Nv,!1,this);
O.H("os.map.mapMode",this.bx,!1,this);O.H("os.map.enableLighting",this.j,!1,this);O.H("os.map.enableTerrain",this.l,!1,this);Lz(this);a.$on("$destroy",this.KJ.bind(this))}Jz.$inject=["$scope"];g=Jz.prototype;g.KJ=function(){O.M("os.map.cameraState",this.Nv,!1,this);O.M("os.map.mapMode",this.bx,!1,this);O.M("os.map.enableLighting",this.j,!1,this);O.M("os.map.enableTerrain",this.l,!1,this);this.v=null};function Mz(a,b,c){O&&(a.g=!0,O.set(b,c),a.g=!1)}
function Kz(a){var b=T.u(),c=Nz(b,3);b=vn(b.Y());return{mode:a.mapMode,center:[0,0],altitude:gu([b[0],b[1]],c),heading:0,roll:0,tilt:0}}function Lz(a){a.show3DSettings=T.u().yc();a.show3DSettings?(a.v.showIEHelp=!1,a.v.showFFHelp=!1,a.v.showGCHelp=!1):od&&11==xd?a.v.showIEHelp=!0:qd&&Bd(10)?a.v.showFFHelp=!0:rd&&Bd(28)&&(a.v.showGCHelp=!0)}g.Nv=function(a){if(!this.g&&a.j&&"string"==typeof a.j)try{this.cameraState=JSON.parse(a.j),X(this.v)}catch(b){}};
g.bx=function(a){!this.g&&a.j&&a.j!==this.mapMode&&(this.mapMode=a.j,Lz(this),X(this.v))};g.LN=function(a,b){a&&b&&a!==b&&Mz(this,"os.map.mapMode",a)};g.GN=function(a,b){if(a&&b&&a!==b)switch(Mz(this,"os.map.cameraMode",a),a){case "default":this.cameraState=Kz(this);O&&Mz(this,"os.map.cameraState","");break;case "last":this.uA()}};g.uA=function(){this.cameraState=Oz(T.u());O&&Mz(this,"os.map.cameraState",JSON.stringify(this.cameraState))};Jz.prototype.useCurrentPosition=Jz.prototype.uA;
Jz.prototype.Vl=function(){if(this.cameraState&&0<this.cameraState.altitude){var a=T.u();a=hu(a.Y(),this.cameraState.altitude);return Pz(T.u(),a).toFixed(1)}return(3).toFixed(1)};Jz.prototype.getZoom=Jz.prototype.Vl;Jz.prototype.Fs=function(){O.set("os.map.fogEnabled",this.fogEnabled);O.set("os.map.fogDensity",this.fogDensity)};Jz.prototype.updateFog=Jz.prototype.Fs;Jz.prototype.j=function(a){this.g||a.j===this.sunlightEnabled||(this.sunlightEnabled=a.j,X(this.v))};
Jz.prototype.l=function(a){this.g||a.j===this.terrainEnabled||(this.terrainEnabled=a.j,X(this.v))};Jz.prototype.iN=function(){return Iz()};Jz.prototype.supportsTerrain=Jz.prototype.iN;Jz.prototype.MN=function(){Mz(this,"os.map.enableLighting",this.sunlightEnabled)};Jz.prototype.updateSunlight=Jz.prototype.MN;Jz.prototype.NN=function(){Mz(this,"os.map.enableTerrain",this.terrainEnabled)};Jz.prototype.updateTerrain=Jz.prototype.NN;function Qz(){this.g=[];this.j={};this.l=[];this.Cg();for(var a=0;a<this.g.length;a++){this.j[this.g[a].getName()]=this.g[a];var b=this.g[a];this.j[b.j?b.j:b.l]=this.g[a]}Sfa(this)}g=Qz.prototype;g.S=function(){return null};g.Rf=function(){return null};g.hf=function(){return null};g.re=function(){return null};g.Lf=function(){return-1};g.ba=function(a){return a.getName().concat("")};g.format=function(a,b,c){c=c?c:-1;return(0<=c?a.toFixed(c):a.toString())+" "+this.ba(b)};g.iL=function(a){return a.o};
g.Cg=function(){};function Sfa(a){a.l=a.g.filter(a.iL);Ab(a.l,function(a,c){return a.g<c.g?1:-1})};function Rz(a,b,c,d,e){this.l=a;this.g=b;this.o=c?c:!1;this.j=d?d:null;this.s=e?e:1}Rz.prototype.getName=function(){return this.l};function Sz(){Qz.call(this)}w(Sz,Qz);g=Sz.prototype;g.S=function(){return"Imperial"};g.Rf=function(){return"distance"};g.hf=function(){return"imperial"};g.re=function(){return this.j.mi};g.Lf=function(){return 1/1609.344};g.Cg=function(){this.g.push(new Rz("in",1/63360,!1,"inches"));this.g.push(new Rz("ft",1/5280,!0,"feet"));this.g.push(new Rz("yd",1/1760,!0,"yards"));this.g.push(new Rz("mi",1,!0,"miles",.1))};function Tz(){Qz.call(this)}w(Tz,Qz);g=Tz.prototype;g.S=function(){return"Feet Only"};g.Rf=function(){return"distance"};g.hf=function(){return"feet"};g.re=function(){return this.j.ft};g.Lf=function(){return 3.28084};g.Cg=function(){this.g.push(new Rz("ft",1,!0,"feet"))};function Uz(){Qz.call(this)}w(Uz,Qz);g=Uz.prototype;g.S=function(){return"Metric"};g.Rf=function(){return"distance"};g.hf=function(){return"metric"};g.re=function(){return this.j.m};g.Lf=function(){return 1};
g.Cg=function(){this.g.push(new Rz("nm",1E-9,!1,"nanometers"));this.g.push(new Rz("um",1E-6,!1,"micrometers"));this.g.push(new Rz("mm",.001,!1,"millimeters"));this.g.push(new Rz("cm",.01,!0,"centimeters"));this.g.push(new Rz("dm",.1,!1,"decimeters"));this.g.push(new Rz("m",1,!0,"meters"));this.g.push(new Rz("dam",10,!1,"Decameters"));this.g.push(new Rz("hm",100,!1,"Hectometers"));this.g.push(new Rz("km",1E3,!0,"Kilometers"));this.g.push(new Rz("Mm",1E6,!1,"Megameters"));this.g.push(new Rz("Gm",1E9,
!1,"Gigameters"));this.g.push(new Rz("Tm",1E12,!1,"Terameters"))};function Vz(){Qz.call(this)}w(Vz,Qz);g=Vz.prototype;g.S=function(){return"Miles Only"};g.Rf=function(){return"distance"};g.hf=function(){return"mile"};g.re=function(){return this.j.mi};g.Lf=function(){return 1/1609.344};g.Cg=function(){this.g.push(new Rz("mi",1,!0,"miles",.1))};function Wz(){Qz.call(this)}w(Wz,Qz);g=Wz.prototype;g.S=function(){return"Nautical Miles Only"};g.Rf=function(){return"distance"};g.hf=function(){return"nauticalmile"};g.re=function(){return this.j.nmi};g.Lf=function(){return 1/1852};g.Cg=function(){this.g.push(new Rz("nmi",1,!0,"nautical miles"))};function Xz(){Qz.call(this)}w(Xz,Qz);g=Xz.prototype;g.S=function(){return"Nautical"};g.Rf=function(){return"distance"};g.hf=function(){return"nautical"};g.re=function(){return this.j.nmi};g.Lf=function(){return 1/1852};g.Cg=function(){this.g.push(new Rz("ft",1/6076,!0,"feet"));this.g.push(new Rz("nmi",1,!0,"nautical miles"))};function Yz(){Qz.call(this)}w(Yz,Qz);g=Yz.prototype;g.S=function(){return"Yards Only"};g.Rf=function(){return"distance"};g.hf=function(){return"yard"};g.re=function(){return this.j.yd};g.Lf=function(){return 1.09361};g.Cg=function(){this.g.push(new Rz("yd",1,!0,"yards"))};function Tfa(){this.g={};var a={};a.distance=new Sz;this.g.imperial=a;a={};a.distance=new Uz;this.g.metric=a;a={};a.distance=new Xz;this.g.nautical=a;a={};a.distance=new Wz;this.g.nauticalmile=a;a={};a.distance=new Vz;this.g.mile=a;a={};a.distance=new Yz;this.g.yard=a;a={};a.distance=new Tz;this.g.feet=a}function Zz(a,b,c){return(a=a.g[b])?a[c]:null};function $z(){A.call(this);this.j=new Tfa;this.g=O.get("os.map.units","metric");this.l=this.j.g;var a=this.j;this.o=Object.keys(a.g?a.g:{});Ab(this.o);O.H("os.map.units",this.s,!1,this)}w($z,A);wa($z);var Ufa=E.V("os.unit.UnitManager");function aA(a,b){var c=a.g;a.g=b;O.set("os.map.units",b);a.dispatchEvent(new U("unit:change",b,c))}
function bA(a,b,c,d,e,f){var h=Zz(a.j,"metric",b);d=h.j[d];d!==h.re()&&(c*=d.g);d=Zz(a.j,"metric",b);d!==h&&(c/=h.Lf());a=Zz(a.j,f,b);a!==d&&(c*=a.Lf());e=a.j[e];e!==a.re()&&(c/=e.g);return c}
function cA(a,b,c){var d=Zz(a.j,"metric","distance").re().getName();b=bA(a,"distance",b,"m",d,"metric");var e=Zz(a.j,a.g,"distance");var f=$z.u(),h=Zz(f.j,"metric",e.Rf());if(0==b)var k=h.re();else{var l=e.l.length;if(h){h=h.re().getName();for(var m=0;m<l;m++)if(Math.abs(bA(f,e.Rf(),b,h,e.l[m].getName(),e.hf()))>=e.l[m].s){k=e.l[m];break}}k=null!=k?k:0<l?e.l[l-1]:null}return e.format(bA(a,"distance",b,d,k.getName(),a.g),k,c?c:-1)}
$z.prototype.s=function(a){"string"===typeof a.j?aA(this,a.j):E.ib(Ufa,"Unrecognized units change value: "+a.j)};function dA(a){a=a||{};this.K=sg("DIV",{"class":(void 0!==a.className?a.className:"ol-zoom-level")+" ol-unselectable"});this.l=sg("SPAN",{"class":"altitude-text mr-1"});this.K.appendChild(this.l);var b=sg("SPAN",{"class":"separator mr-1"}),c=Wf("|");b.innerHTML=Vf(c);this.K.appendChild(b);this.A=sg("SPAN",{"class":"zoom-text mr-1"});this.K.appendChild(this.A);this.j=this.g=void 0;this.s=null;zn.call(this,{element:this.K,render:Vfa,target:a.target});a=$z.u();this.set(eA,a.g);a.H("propertychange",this.B,
!1,this)}w(dA,zn);dA.prototype.J=function(){dA.C.J.call(this);$z.u().M("propertychange",this.B,!1,this)};dA.prototype.reset=function(){this.j=this.g=void 0;fA(this);gA(this)};dA.prototype.B=function(a){a=a.o;"string"===typeof a&&a!=this.get(eA)&&(this.set(eA,a),this.reset())};function Vfa(a){a=a.frameState;null===a?this.s=null:this.s=a.viewState;fA(this);gA(this)}function hA(a){iA(a.l,!1);a.g=void 0}function jA(a){iA(a.A,!1);a.j=void 0}
function fA(a){var b,c=T.u();if(c.Qa()){var d=Yu(c);if(!d){hA(a);return}d=d.Qg();d!=a.g&&(a.g=b=d)}else{d=a.s;if(!d){hA(a);return}d.resolution!=a.g&&(a.g=d.resolution,b=vn(c.Y()),b=gu([b[0],b[1]],d.resolution))}null!=b&&(isNaN(b)&&hA(a),d=$z.u(),a.l&&(b=Wf("Altitude: "+cA(d,b,3)),a.l.innerHTML=Vf(b),iA(a.l,!0)))}
function gA(a){var b=a.s;if(b){var c=T.u();if(c.Qa()){c=Yu(c);if(!c){jA(a);return}var d=c.Qg();if(a.j!=d){a.j=d;var e=c.wj(d,0)}}else b.resolution!=a.j&&(e=a.j=b.resolution);null!=e&&(b=cu(e,b.projection),null==b||Infinity==b||isNaN(b)?jA(a):(b=Wf("Zoom: "+b.toFixed(1)),a.A.innerHTML=Vf(b),iA(a.A,!0)))}else jA(a)}var eA="units";dA.prototype.tb=function(){return this.K};var kA={UN:"addDescriptor",lQ:"removeDescriptor",uR:"updateDescriptor",vR:"userToggledDescriptor",TN:"descriptorActivated",vO:"descriptorDeactivated"};function lA(a,b){z.call(this,a);this.j=b||null}w(lA,z);function mA(a){A.call(this);this.lb=!0;this.title="Activate/Deactivate Descriptor";this.Ba=null;this.state="ready";this.id=a.D();this.log=Wfa}w(mA,A);var Wfa=E.V("os.data.AbstractDescriptor");mA.prototype.J=function(){mA.C.J.call(this);nA(this)};mA.prototype.Ja=function(){return this.id?V.Ja(this.id):null};function oA(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.Ja()?!0:(a.state="error",a.Ba="Descriptor unavailable.",!1)}
function pA(a){try{var b=a.Ja();b&&!b.isActive()?(b.Ra("descriptorActivated",a.g,!1,a),b.Ra("descriptorDeactivated",a.l,!1,a),b.setActive(!0),Q(R.u(),"addData.add-layer-command",1)):a.g()}catch(c){return E.error(a.log,"Unable to activate descriptor: "+c.message,c),nA(a),a.state="error",!1}return!0}function qA(a){var b=a.Ja();b&&b.isActive()?(b.Ra("descriptorDeactivated",a.j,!1,a),b.setActive(!1),Q(R.u(),"addData.remove-layer-command",1)):a.j();return!0}
function nA(a){var b=a.Ja();b&&(b.M("descriptorActivated",a.g,!1,a),b.M("descriptorDeactivated",a.j,!1,a),b.M("descriptorDeactivated",a.l,!1,a))}mA.prototype.l=function(){nA(this);this.state="error";this.dispatchEvent(new z("executed"))};function rA(a){mA.call(this,a);this.log=Xfa;var b=a.T();this.title="Remove "+(b?b+" ":"")+'"'+a.S()+'"'}w(rA,mA);var Xfa=E.V("os.data.DeactivateDescriptor");rA.prototype.Fa=function(){return oA(this)?(this.state="executing",qA(this)):!1};rA.prototype.Cb=function(){this.state="reverting";return pA(this)};rA.prototype.g=function(){nA(this);this.state="ready";this.dispatchEvent(new z("reverted"))};rA.prototype.j=function(){nA(this);this.state="success";this.dispatchEvent(new z("executed"))};function sA(){this.g=this.ha=null}wa(sA);sA.prototype.Y=function(){return this.ha?this.ha:T.u().Y()};sA.prototype.clear=function(){this.g=null;O.set(["map","z-order"],this.g)};function tA(a){if(!a.g&&(a.g=O.get(["map","z-order"])||{},a.g)){var b=Ha(),c;for(c in a.g)for(var d=a.g[c],e=d.length;e--;)2592E6<b-d[e].time&&d.splice(e,1)}}function uA(a,b){if(!a.g||!b)return null;for(var c in a.g)for(var d=a.g[c]||[],e=0,f=d.length;e<f;e++)if(d[e].id==b)return c;return null}
function vA(a){for(var b=un(a.Y()).g,c=0,d=b.length;c<d;c++){var e=b[c],f=e.Qc()||"",h=a.g[f]||[];e=mn(e).g;for(var k=0,l=e.length;k<l;k++){for(var m=e[k],n=!1,p=0,r=h.length;p<r;p++)if(h[p].id==m.D()){n=!0;h[p].time=Ha();break}n||h.push({id:m.D(),time:Ha()})}a.g[f]=h}}
sA.prototype.update=function(){tA(this);vA(this);for(var a=un(this.Y()).g,b=0,c=0,d=a.length;c<d;c++){var e=a[c],f=this.g[e.Qc()||""];if(f){var h=!1,k=mn(e).g;k.sort(function(a,b){for(var c=-1,d=-1,e=0,k=f.length;e<k&&!(f[e].id==a.D()&&(c=e),f[e].id==b.D()&&(d=e),-1<c&&-1<d);e++);a=Bb(c,d);h||(h=0<a);return a});for(var l=0;l<k.length;l++)k[l].Cf(b++);h&&(e.dispatchEvent("zOrderUpdate"),e.ia())}}};
function wA(a,b,c,d){if(a.g&&c)for(var e in a.g){for(var f=a.g[e],h=-1,k=-1,l=!1,m=0,n=f.length;m<n;m++)if(f[m].id==b&&(l=!0,h=m),f[m].id==c&&(k=m),-1<h&&-1<k){m=f.splice(h,1)[0];h<k&&k--;f.splice(k+(d?1:0),0,m);break}if(l)break}}sA.prototype.save=function(){tA(this);vA(this);O.set(["map","z-order"],this.g)};function xA(a){return function(b){a:{var c=b.target;for(var d=b.type,e=0,f=yA.length;e<f;e++)if(yA[e](c,d)){c=!0;break a}c=!1}if(!c)return a(b)}}var yA=[];function zA(a){a.preventDefault();a.stopPropagation()}function AA(a){2===a.button&&zA(a)}mb(yA,function(a){return a instanceof HTMLInputElement});function BA(a,b,c){z.call(this,a);this.layer=b;this.index=null!=c?c:-1}w(BA,z);function CA(a){return!!a}function DA(a,b){if(b instanceof sl){var c=b.aa();!c&&(b=b.O(),b instanceof tm||b instanceof EA)&&(c=b.aa());c&&ci(a,c)}return a}function Yfa(a,b){b&&(b=b instanceof kj?b:b.geometry)&&ci(a,Gr(b));return a}function Zfa(a){return a?a.O():void 0}function FA(a){return a?a.X():void 0}function GA(a){return a instanceof HA?a.W():void 0}function IA(a){if(!a)return[];q(a)||(a=[a]);return a.map(GA).filter(CA)};var JA=/^desc(ription)?$/i;for(var KA,PA=mc({ALPHA:"alpha",DA:"color",CO:"ellipse",MA:"geometry",zO:"_node",TO:"_htmlDescription",YO:"_interactive",mP:"lineOfBearing",nP:"lineOfBearingErrorHigh",oP:"lineOfBearingErrorLow",YQ:"sourceId",ZQ:"_sourceName",gR:"recordTime",xR:"visibleNonTimeline"}),QA=0,$fa=PA.length;QA<$fa;QA++)PA[QA]="("+PA[QA]+")";KA=new RegExp("^(_.*|"+PA.join("|")+")$");function RA(a,b,c,d){Rk.call(this,null);this.center=a;this.B=b;this.G=null!=c?c:b;this.orientation=d||0;a=Bu(this.center,this.B,this.G,this.orientation);this.ic([a]);iu(this)}w(RA,Rk);RA.prototype.clone=function(){return new RA(this.center,this.B,this.G,this.orientation)};function aga(){if(!od)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(a){return!1}}var SA=od&&aga();function TA(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b||"",a||"",null);if(SA){var c=UA();if(c)return a&&c.appendChild(c.createNode(1,a,b||"")),c}throw Error("Your browser does not support creating new documents");}
function VA(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if(SA){var b=UA();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");}function WA(a){var b=a.xml;if(b)return b;if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);throw Error("Your browser does not support serializing XML documents");}function XA(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setAttribute(c,b[c])}
function UA(){var a=new ActiveXObject("MSXML2.DOMDocument");a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",2048),a.setProperty("MaxElementDepth",256)}catch(b){}return a};function YA(a,b,c,d){z.call(this,a);this.id=b;this.j=c;this.s=d}w(YA,z);Nv["ol.Feature"]=ek;g=ek.prototype;g.set=function(a,b){void 0===b?delete this.la[a]:this.la[a]=b};g.Ue=function(a){delete this.la[a]};g.clone=function(){var a=new ek;a.qc(this.la,!0);fk(a,this.Ud);var b=this.X();null!=b&&a.sb(b.clone());a.ga(this.D());return a};g.yb=function(a){this.qj=(this.Mc=a)?this.AD:void 0};g.AD=function(a){return this.Mc instanceof bk?[this.Mc]:"function"==typeof this.Mc?(a=this.Mc(a))?a instanceof bk?[a]:a:[]:this.Mc};g.hc=!1;var ZA=0;
ek.prototype.ga=function(a){this.ma=a;null==this.id&&(this.id=ZA,ZA++);this.ia()};function $A(a,b){return Ov(a,"ol.Feature")?a.la[b]:a[b]}function aB(a,b,c){Ov(a,"ol.Feature")?void 0===c?a.Ue(b,!0):a.set(b,c,!0):void 0!==c?a[b]=c:delete a[b]}function bB(a,b,c){var d=void 0,e=Number.MAX_VALUE,f=Number.MAX_VALUE;a=Ov(a,"ol.Feature")?a.la:a;for(var h in a)(a=h.match(b))&&(a.index<f||a.index==f&&h.length<d.length)&&(d=h,f=a.index,h==c&&(e=f));if(null==d||f>e)d=c;return d}
function bga(a){for(var b=0,c=a.length;c--;){var d=a[c];b=Math.max(d.jc(),b)}for(c=a.length;c--;)d=a[c],d.jc()<b&&a.splice(c,1);return a}function cB(a){if(!a)return null;var b=/^(Column )(\d+)$/.exec(a);return b&&3==b.length?"COLUMN_"+(Number(b[2])+1):a}function dB(a){if(!a)return null;var b=/^(COLUMN_)(\d+)$/.exec(a);return b&&3==b.length?"Column "+(Number(b[2])-1):a};function eB(){this.g={}}wa(eB);var fB=E.V("os.im.mapping.MappingRegistry");function gB(a,b,c){a.g[b]?E.error(fB,"A mapping with key: "+b+" was already applied. Additional mappings with the same name are not allowed."):a.g[b]=c}eB.prototype.restore=function(a){var b=this.g[a.id];if(b)return b=new b,b.restore(a),b;E.error(fB,"There was no class associated with the configuration object.");return null};function hB(){this.g={};this.j=eB.u()}wa(hB);var iB=E.V("os.im.mapping.MappingManager");function jB(a,b){var c=b.D();c?a.g[c]=b:E.error(iB,'Unable to register mapping without an identifier! Mapping label is "'+b.ba()+'".')}hB.prototype.Nd=function(a){var b=[],c;for(c in this.g){var d=this.g[c].Nd(a);d&&b.push(d)}return cga(b)};function cga(a){var b=[];if(a){a=Eb(a,function(a){return a.Tj()||"default"});for(var c in a)b="default"==c?b.concat(a[c]):b.concat(bga(a[c]))}return b}
function kB(a,b){a={};for(var c=0,d=b.length;c<d;c++)a[c]=b[c].sa();return a}function lB(a,b){var c=[],d;for(d in b){var e=b[d];var f=null;if("id"in e){var h=e.id,k=a.g[h]||null;if(k)try{var l=k.clone();l.restore(e);f=l}catch(m){E.error(iB,m.message,m)}else E.error(iB,'Failed to restore mapping: no mapping registered with id "'+h+'".')}else E.error(iB,"Failed to restore mapping: persisted mapping does not have an id:\n"+Fd(e));(e=f)&&c.push(e)}return c}
hB.prototype.rc=function(a){for(var b=mB("mappings"),c=0,d=a.length;c<d;c++)try{var e=a[c];b.appendChild(e.rc())}catch(f){E.error(iB,"Failed to restore mapping from xml:\n"+Fd(e))}return b};hB.prototype.ad=function(a){var b=a.getAttribute("type");var c=this.j.g[b];c?b=new c:(E.error(fB,"There was no class associated with the key: "+b),b=null);if(b)return b.ad(a),b;E.error(iB,"There was no class associated with the configuration object.");return null};function nB(a){var b=Math.pow(10,12);return Math.round(a*b)/b}function oB(a){return"number"===typeof a?a:"string"===typeof a&&(a=a.trim())?Number(a):NaN};var pB={aP:"km",HP:"m",PP:"nmi",JP:"mi",HO:"ft"},qB={Kilometers:"km",Meters:"m","Nautical Miles":"nmi",Miles:"mi",Feet:"ft"},rB=3.28084/5280,sB=3.28084/6076;function tB(a,b,c){c=c||"m";if(c==b)return a;if("m"!=c)switch(c){case "km":a/=.001;break;case "nmi":a/=sB;break;case "mi":a/=rB;break;case "ft":a/=3.28084;break;default:return NaN}c=1;switch(b){case "m":break;case "km":c=.001;break;case "mi":c=rB;break;case "ft":c=3.28084;break;case "nmi":c=sB;break;default:return NaN}return a*c};for(var uB,vB=mc({aO:"arrowSize",bO:"arrowUnits",eO:"centerShape",DA:"color",FILL:"fill",UO:"icon",VO:"image",cP:"labels",dP:"labelColor",eP:"_labelGeometry",fP:"labelSize",kP:"_lastShowLabels",sP:"lobBearingColumn",tP:"lobBearingError",uP:"lobBearingErrorColumn",vP:"lobColumnLength",wP:"lobLength",BP:"lobLengthType",xP:"lobLengthColumn",CP:"lobLengthUnits",yP:"lobLengthError",zP:"lobLengthErrorColumn",AP:"lobLengthErrorUnits",VP:"opacity",pQ:"replaceStyle",IQ:"shape",KQ:"showArrow",LQ:"showEllipse",
NQ:"showError",MQ:"showEllipsoids",OQ:"showGroundRef",PQ:"showLabels",QQ:"showLabelColumns",VQ:"showRotation",BQ:"rotationColumn",fB:"size",XQ:"skipLayerStyle",bR:"stroke",cR:"styleUrl"}),wB=0,dga=vB.length;wB<dga;wB++)vB[wB]="("+vB[wB]+")";uB=new RegExp("^(_.*|"+vB.join("|")+")$");for(var xB,yB=mc({GO:"_style",HQ:"_selectStyle",NO:"_highlightStyle",nO:"_customHighlightStyle",bP:"_labelStyle"}),zB=0,ega=yB.length;zB<ega;zB++)yB[zB]="("+yB[zB]+")";xB=new RegExp("^("+yB.join("|")+")$");function AB(a){return JSON.stringify(String(a))}function BB(a){a=String(a).replace(/([-()\[\]{}+?$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08");return a=a.replace(new RegExp(Wb("*"),"g"),".*")};var fga=/^(name|title)$/i;function CB(a,b,c,d){var e=NaN;if(a){b&&(e=oB(a.la[b]));if(isNaN(e))c&&(e=oB(a.la[c]),d&&(f=a.la[d]));else var f="nmi";isNaN(e)||(f&&qc(pB,f)?a=tB(e,"m",f):(a=e,250>a&&(a*=1852)),e=a)}return isNaN(e)?void 0:e}
function DB(a,b){if(!b){var c=a.la.ellipse;if(c instanceof RA)return c}b=a?a.X():null;if(b instanceof Jk){var d=Vi(vk(b),N);if(d){var e=(e=CB(a,"SEMI_MAJOR (nmi)*","SEMI_MAJOR","SEMI_MAJ_UNITS"))?Math.abs(e):void 0;var f=(f=CB(a,"SEMI_MINOR (nmi)*","SEMI_MINOR","SEMI_MINOR_UNITS"))?Math.abs(f):void 0;var h=oB(a.get("ORIENTATION"));h=isNaN(h)?void 0:h;var k=(k=CB(a,void 0,"RADIUS","RADIUS_UNITS"))?Math.abs(k):void 0;e&&f&&null!=h?c=new RA(d,e,f,h):k&&(c=new RA(d,k))}}a.set("ellipse",c||b);return c}
function EB(a,b,c){return b?null!=a.la[b]&&(c=parseFloat(a.la[b]),c==a.la[b])?c:NaN:c?c:NaN}
function FB(a,b,c){if(!b){var d=a.la.lineOfBearing;if(d instanceof Ar)return}b=a?a.X():null;if(c&&b instanceof Jk){var e=Vi(vk(b),N),f=EB(a,c.rt),h="column"==c.Ip?EB(a,c.av,0):1;if(e&&null!=f&&!isNaN(f)&&h){f%=360;f+=0>=f?360:0;var k=[];3>e.length&&(e[2]=0);var l=Math.min(Math.abs(tB(h,"m",c.dv||"m")*(("column"==c.Ip?c.Ct:c.length)||1E3)),19E6),m=osasm.geodesicDirect(e,0>h?(f+180)%360:f,l);m[2]=e[2];h=osasm.geodesicInverse(e,m).finalBearing;d=new yr([e,m],"XYZM");d=Uu(d);d instanceof yr&&k.push(d.getCoordinates());
if(c.Oz){var n=Math.min(tB(c.pt||100,"m",c.qt||"m"),19E6),p=osasm.geodesicDirect(m,h+180-45,n);p.push(e[2]);p=new yr([m,p],"XYZM");p=Uu(p);p instanceof yr&&k.push(p.getCoordinates());n=osasm.geodesicDirect(m,h+225,n);n.push(e[2]);n=new yr([m,n],"XYZM");n=Uu(n);n instanceof yr&&k.push(n.getCoordinates())}0<k.length&&(d=new Ar(k,"XYZM"),d.set("_normalized",!0),iu(d));p=n=null;if(c.Qz){k=c.cv||"m";var r=Math.abs(EB(a,c.bv)),u=void 0!==c.Hp?c.Hp:1,v=Math.abs(EB(a,c.st)),x=void 0!==c.fo?c.fo:1;if(null===
v||isNaN(v))v=1;if(null===r||isNaN(r))r=1;k=tB(r,"m",k)*u;0<v&&0<x?(h=zu(e,l+k,Math.min(v*x*2,360),f),n=new yr(h,"XYZM"),n=Uu(n),n.set("_normalized",!0),iu(n),0<r&&0<u&&(e=zu(e,l-k,Math.min(v*x*2,360),f),p=new yr(e,"XYZM"),p=Uu(p),p.set("_normalized",!0),iu(p))):0<r&&0<u&&(l=osasm.geodesicDirect(m,h+180,-k),f=osasm.geodesicDirect(l,h+90,-k),f.push(e[2]),l=osasm.geodesicDirect(l,h-90,-k),l.push(e[2]),n=new yr([l,f],"XYZM"),n=Uu(n),n.set("_normalized",!0),iu(n),f=osasm.geodesicDirect(m,h+180,k),m=osasm.geodesicDirect(f,
h+90,k),m.push(e[2]),h=osasm.geodesicDirect(f,h-90,k),h.push(e[2]),p=new yr([h,m],"XYZM"),p=Uu(p),p.set("_normalized",!0),iu(p))}GB(d);a.set("lineOfBearingErrorHigh",n);a.set("lineOfBearingErrorLow",p)}c.Pz?DB(a):a.set("ellipse",null)}a.set("lineOfBearing",d||b)}
function HB(a,b,c){var d=!1;c=c||a.X();if(c instanceof Jk&&(c=c.flatCoordinates,1<c.length)){c=Vi(c,N);if(b||void 0==a.la.MGRS)a.la.MGRS=osasm.toMGRS(c),d=!0;if(b||void 0==a.la.LAT)a.la.LAT=c[1],d=!0;if(b||void 0==a.la.LON)a.la.LON=c[0],d=!0;(b||void 0==a.la.ALTITUDE)&&c[2]&&(a.la.ALTITUDE=c[2],d=!0);if(b||void 0==a.la.LAT_DMS)a.la.LAT_DMS=Lu(c[1],!1),d=!0;if(b||void 0==a.la.LON_DMS)a.la.LON_DMS=Lu(c[0],!0),d=!0;if(b||void 0==a.la.LAT_DDM)a.la.LAT_DDM=Mu(c[1],!1),d=!0;if(b||void 0==a.la.LON_DDM)a.la.LON_DDM=
Mu(c[0],!0),d=!0}d&&a.ia()}function IB(a,b){return a?a.get(b):void 0}function JB(a){if(a)for(var b in a.la)if(fga.test(b)){var c=a.la[b];if(c&&"string"===typeof c){var d=c;break}}return d}var gga="la";function hga(a,b){return a+"."+gga+"["+AB(b)+"]"}function KB(a){return KA.test(a)||xB.test(a)||uB.test(a)}function LB(a){var b=null;a&&(a=a.get("sourceId"))&&(b=T.u().W(a));return b}
function MB(a,b){var c=null;null!=b&&(b=b.O(),Ov(b,"os.source.Vector")&&(c=b));null==c&&null!=a&&(a=a.get("sourceId"))&&(c=NB.O(a));return c}function OB(a,b,c){if(a){var d=a.la.color;if(!d){var e=PB(a);e&&e.replaceStyle&&(d=QB(e,!1))}if(!d&&(e=a.la._style))if(Array.isArray(e))for(var f=0;!d&&f<e.length;f++)d=QB(e[f])||void 0;else d=QB(e)||void 0;if(d)return d;if(b)return b.La();if(null!==b&&(a=MB(a)))return a.La()}return void 0!==c?c:"rgba(255,255,255,1)"}
function RB(a,b,c){var d=a.la.shape;(!d||c)&&(a=b||MB(a))&&Ov(a,"os.source.Vector")&&(a=a.Dd,c||a!==SB)&&(d=a);return d}function TB(a,b,c){var d=a.la.centerShape;(!d||c)&&(a=b||MB(a))&&Ov(a,"os.source.Vector")&&(a=a.Ff,c||a!==SB)&&(d=a);return d}function UB(a){return a&&!1!==a.la.showLabels?(a.la.showLabels=!1,!0):!1}function VB(a){return a&&!0!==a.la.showLabels?a.la.showLabels=!0:!1}
function WB(a,b){b||(b=MB(a));!b&&XB(T.u(),a)&&(b=T.u().W("draw").O());var c=a.D();c&&b&&ym(b,c)&&(b.dispatchEvent(new wm("changefeature",a)),b.ia())}function YB(a,b,c){if(c=c||MB(a[0]))for(var d=0,e=a.length;d<e;d++){var f=a[d];if(f&&!(f instanceof ZB)){var h=PB(f,c),k=f.la._style||h||$B;aC(k,b);h=bC(f,k,h);f.yb(h)}}}function iga(a,b){b=b.la.recordTime;a=a.la.recordTime;b&&a?(b=b.Pa(),a=a.Pa(),a=b>a?1:b<a?-1:0):a=b?1:a?-1:0;return a}function cC(a,b){return a.ma>b.ma?1:a.ma<b.ma?-1:0};function dC(){}function eC(a){if("number"==typeof a){var b=new dC;b.s=a;var c=a;if(0==c)c="Etc/GMT";else{var d=["Etc/GMT",0>c?"-":"+"];c=Math.abs(c);d.push(Math.floor(c/60)%100);c%=60;0!=c&&d.push(":",Xb(c,2));c=d.join("")}b.l=c;c=a;0==c?c="UTC":(d=["UTC",0>c?"+":"-"],c=Math.abs(c),d.push(Math.floor(c/60)%100),c%=60,0!=c&&d.push(":",c),c=d.join(""));a=fC(a);b.o=[c,c];b.g={aR:a,Us:a};b.j=[];return b}b=new dC;b.l=a.id;b.s=-a.std_offset;b.o=a.names;b.g=a.names_ext;b.j=a.transitions;return b}
function fC(a){var b=["GMT"];b.push(0>=a?"+":"-");a=Math.abs(a);b.push(Xb(Math.floor(a/60)%100,2),":",Xb(a%60,2));return b.join("")}function gC(a,b){b=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes())/36E5;for(var c=0;c<a.j.length&&b>=a.j[c];)c+=2;return 0==c?0:a.j[c-1]}dC.prototype.cc=function(a){return this.s-gC(this,a)};function hC(){this.j=[];this.g=es;var a="mm:ss.SSS";for(jga&&(a=a.replace(/\u200f/g,""));a;){for(var b=a,c=0;c<iC.length;++c){var d=a.match(iC[c]);if(d){var e=d[0];a=a.substring(e.length);0==c&&("''"==e?e="'":(e=e.substring(1,"'"==d[1]?e.length-1:e.length),e=e.replace(/''/g,"'")));this.j.push({text:e,type:c});break}}if(b===a)throw Error("Malformed pattern part: "+a);}}var iC=[/^'(?:[^']|'')*('|$)/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|V+|w+|z+|Z+)/,/^[^'GyMkSEahKHcLQdmsvVwzZ]+/];
function jC(a){return a.getHours?a.getHours():0}hC.prototype.format=function(a,b){if(!a)throw Error("The date to format must be non-null.");var c=b?6E4*(a.getTimezoneOffset()-b.cc(a)):0,d=c?new Date(a.getTime()+c):a,e=d;b&&d.getTimezoneOffset()!=a.getTimezoneOffset()&&(e=6E4*(d.getTimezoneOffset()-a.getTimezoneOffset()),d=new Date(d.getTime()+e),c+=0<c?-864E5:864E5,e=new Date(a.getTime()+c));c=[];for(var f=0;f<this.j.length;++f){var h=this.j[f].text;1==this.j[f].type?c.push(kga(this,h,a,d,e,b)):c.push(h)}return c.join("")};
function kC(a,b){b=String(b);a=a.g||es;if(void 0!==a.tB){for(var c=[],d=0;d<b.length;d++){var e=b.charCodeAt(d);c.push(48<=e&&57>=e?String.fromCharCode(a.tB+e-48):b.charAt(d))}b=c.join("")}return b}var jga=!1;function lC(a){if(!(a.getHours&&a.getSeconds&&a.getMinutes))throw Error("The date to format has no time (probably a goog.date.Date). Use Date or goog.date.DateTime, or use a pattern without time fields.");}
function kga(a,b,c,d,e,f){var h=b.length;switch(b.charAt(0)){case "G":return c=0<d.getFullYear()?1:0,4<=h?a.g.KA[c]:a.g.LA[c];case "y":return c=d.getFullYear(),0>c&&(c=-c),2==h&&(c%=100),kC(a,Xb(c,h));case "M":a:switch(c=d.getMonth(),h){case 5:h=a.g.UA[c];break a;case 4:h=a.g.OA[c];break a;case 3:h=a.g.cB[c];break a;default:h=kC(a,Xb(c+1,h))}return h;case "k":return lC(e),c=jC(e)||24,kC(a,Xb(c,h));case "S":return c=e.getTime()%1E3/1E3,kC(a,c.toFixed(Math.min(3,h)).substr(2)+(3<h?Xb(0,h-3):""));case "E":return c=
d.getDay(),4<=h?a.g.sB[c]:a.g.eB[c];case "a":return lC(e),h=jC(e),a.g.BA[12<=h&&24>h?1:0];case "h":return lC(e),c=jC(e)%12||12,kC(a,Xb(c,h));case "K":return lC(e),c=jC(e)%12,kC(a,Xb(c,h));case "H":return lC(e),c=jC(e),kC(a,Xb(c,h));case "c":a:switch(c=d.getDay(),h){case 5:h=a.g.iB[c];break a;case 4:h=a.g.lB[c];break a;case 3:h=a.g.kB[c];break a;default:h=kC(a,Xb(c,1))}return h;case "L":a:switch(c=d.getMonth(),h){case 5:h=a.g.hB[c];break a;case 4:h=a.g.gB[c];break a;case 3:h=a.g.jB[c];break a;default:h=
kC(a,Xb(c+1,h))}return h;case "Q":return c=Math.floor(d.getMonth()/3),4>h?a.g.dB[c]:a.g.YA[c];case "d":return kC(a,Xb(d.getDate(),h));case "m":return lC(e),kC(a,Xb(e.getMinutes(),h));case "s":return lC(e),kC(a,Xb(e.getSeconds(),h));case "v":return h=f||eC(c.getTimezoneOffset()),h.l;case "V":return a=f||eC(c.getTimezoneOffset()),2>=h?a.l:0<gC(a,c)?ra(a.g.IA)?a.g.IA:a.g.DST_GENERIC_LOCATION:ra(a.g.Us)?a.g.Us:a.g.STD_GENERIC_LOCATION;case "w":return c=e.getFullYear(),b=e.getMonth(),d=e.getDate(),e=a.g.Ss,
c=new Date(c,b,d),e=ra(e)?e:3,b=a.g.Rs||0,d=((c.getDay()+6)%7-b+7)%7,c=c.valueOf()+864E5*((e-b+7)%7-d),e=(new Date((new Date(c)).getFullYear(),0,1)).valueOf(),kC(a,Xb(Math.floor(Math.round((c-e)/864E5)/7)+1,h));case "z":return a=f||eC(c.getTimezoneOffset()),4>h?a.o[0<gC(a,c)?2:0]:a.o[0<gC(a,c)?3:1];case "Z":return e=f||eC(c.getTimezoneOffset()),4>h?(h=-e.cc(c),a=[0>h?"-":"+"],h=Math.abs(h),a.push(Xb(Math.floor(h/60)%100,2),Xb(h%60,2)),h=a.join("")):h=kC(a,fC(e.cc(c))),h;default:return""}};Xs("time",function(a,b){a=b?b.split(/\s*,\s*/):[];b=new Date;var c=null;switch(a[1]){case "Timeline":b=hw.u();c=new Uv(new Date(b.g-b.G),new Date(b.g));break;case "Today":var d=mC(b,"day");var e=nC(b,"day");break;case "Yesterday":d=mC(b,"day");e=nC(b,"day");d.setUTCDate(d.getUTCDate()-1);e.setUTCDate(e.getUTCDate()-1);break;case "Last 24 Hours":e=b;d=oC(e,"hours",-24);break;case "Last 48 Hours":e=b;d=oC(e,"hours",-48);break;case "Last 72 Hours":e=b;d=oC(e,"hours",-72);break;case "Last 168 Hours (1 Week)":e=
b;d=oC(e,"hours",-168);break;case "This Week":d=mC(b,"week");e=nC(b,"week");break;case "Last Week":d=mC(b,"week");e=nC(b,"week");d.setUTCDate(d.getUTCDate()-7);e.setUTCDate(e.getUTCDate()-7);break;case "This Month":d=mC(b,"month");e=nC(b,"month");break;case "Last 30 Days":e=nC(b,"day");d=oC(e,"day",-30);break;case "Last 60 Days":e=nC(b,"day");d=oC(e,"day",-60);break;case "Last 90 Days":e=nC(b,"day");d=oC(e,"day",-90);break;case "This Year":d=mC(b,"year"),e=nC(b,"year")}!c&&d&&e&&(c=new Uv(d,e));d=
c;return pC(new Date("start"==a[0]?d.Pa():d.Ya()),a[2]||qC)});var rC="YYYY-MM-DD YYYY/MM/DD YYYYMMDD MM-DD-YYYY MM/DD/YYYY MMDDYYYY DD-MM-YYYY DD/MM/YYYY DDMMYYYY".split(" "),lga={instant:/((up|start|begin).*)?(day|date|doi)/i,start:/((up|start|begin).*)?(day|date|doi)/i,end:/(down|stop|end).*(day|date|doi)/i},sC="YYYY-MM-DDTHH:mm:ss.SSSZ;YYYY-MM-DDTHH:mm:ss.SSSZZ;YYYY-MM-DDTHH:mm:ss.SSS;YYYY-MM-DDTHH:mm:ss.SSSSZ;YYYY-MM-DDTHH:mm:ss.SSSSZZ;YYYY-MM-DDTHH:mm:ss.SSSS;YYYY-MM-DDTHH:mm:ssZ;YYYY-MM-DDTHH:mm:ssZZ;YYYY-MM-DDTHH:mm:ss;YYYY-MM-DDTHH:mmZ;YYYY-MM-DDTHH:mmZZ;YYYY-MM-DDTHH:mm;YYYY-MM-DD HH:mm:ss.SSSZ;YYYY-MM-DD HH:mm:ss.SSSZZ;YYYY-MM-DD HH:mm:ss.SSS;YYYY-MM-DD HH:mm:ss.SSSSZ;YYYY-MM-DD HH:mm:ss.SSSSZZ;YYYY-MM-DD HH:mm:ss.SSSS;YYYY-MM-DD HH:mm:ssZ;YYYY-MM-DD HH:mm:ssZZ;YYYY-MM-DD HH:mm:ss;YYYY-MM-DD HH:mmZ;YYYY-MM-DD HH:mmZZ;YYYY-MM-DD HH:mm;YYYY/MM/DD HH:mm:ss.SSSZ;YYYY/MM/DD HH:mm:ss.SSSZZ;YYYY/MM/DD HH:mm:ss.SSS;YYYY/MM/DD HH:mm:ss.SSSSZ;YYYY/MM/DD HH:mm:ss.SSSSZZ;YYYY/MM/DD HH:mm:ss.SSSS;YYYY/MM/DD HH:mm:ssZ;YYYY/MM/DD HH:mm:ssZZ;YYYY/MM/DD HH:mm:ss;YYYY/MM/DD HH:mmZ;YYYY/MM/DD HH:mmZZ;YYYY/MM/DD HH:mm;YYYY:MM:DD::HH:mm:ss.SSSZ;YYYY:MM:DD::HH:mm:ss.SSSZZ;YYYY:MM:DD::HH:mm:ss.SSS;YYYY:MM:DD::HH:mm:ss.SSSSZ;YYYY:MM:DD::HH:mm:ss.SSSSZZ;YYYY:MM:DD::HH:mm:ss.SSSS;YYYY:MM:DD::HH:mm:ssZ;YYYY:MM:DD::HH:mm:ssZZ;YYYY:MM:DD::HH:mm:ss;YYYY:MM:DD::HH:mmZ;YYYY:MM:DD::HH:mmZZ;YYYY:MM:DD::HH:mm;YYYYMMDDTHHmmssZ;YYYYMMDDTHHmmss;YYYYMMDDHHmmssZ;YYYYMMDDHHmmss;MM/DD/YYYY HH:mm:ssZ;MM/DD/YYYY HH:mm:ss;MM/DD/YYYY HH:mmZ;MM/DD/YYYY HH:mm;MM/DD/YY HH:mm:ssZ;MM/DD/YY HH:mm:ss;MM/DD/YY HH:mmZ;MM/DD/YY HH:mm".split(";"),
mga="YYYY-MM-DDTHH:mm:ss.SSS Z;YYYY-MM-DDTHH:mm:ss.SSSS Z;YYYY-MM-DDTHH:mm:ss.SS Z;YYYY-MM-DDTHH:mm:ss.S Z;YYYY-MM-DDTHH:mm:ss.SSSSZ;YYYY-MM-DDTHH:mm:ss.SSSZ;YYYY-MM-DDTHH:mm:ss.SSZ;YYYY-MM-DDTHH:mm:ss.SZ;YYYY-MM-DDTHH:mm:ss.SSSS;YYYY-MM-DDTHH:mm:ss.SSS;YYYY-MM-DDTHH:mm:ss.SS;YYYY-MM-DDTHH:mm:ss.S;YYYY-MM-DDTHH:mm:ss Z;YYYY-MM-DDTHH:mm Z;YYYY-MM-DD HH:mm:ss.SSS Z;YYYY-MM-DD HH:mm:ss.SSSS Z;YYYY-MM-DD HH:mm:ss.SS Z;YYYY-MM-DD HH:mm:ss.S Z;YYYY-MM-DD HH:mm:ss.SSSSZ;YYYY-MM-DD HH:mm:ss.SSSZ;YYYY-MM-DD HH:mm:ss.SSZ;YYYY-MM-DD HH:mm:ss.SZ;YYYY-MM-DD HH:mm:ss.SS;YYYY-MM-DD HH:mm:ss.S;YYYY-MM-DD HH:mm:ss Z;YYYY-MM-DD HH:mm Z;YYYY/MM/DD HH:mm:ss.SSS Z;YYYY/MM/DD HH:mm:ss.SSSS Z;YYYY/MM/DD HH:mm:ss.SS Z;YYYY/MM/DD HH:mm:ss.S Z;YYYY/MM/DD HH:mm:ss.SSSZ;YYYY/MM/DD HH:mm:ss.SSSSZ;YYYY/MM/DD HH:mm:ss.SSZ;YYYY/MM/DD HH:mm:ss.SZ;YYYY/MM/DD HH:mm:ss.SSSS;YYYY/MM/DD HH:mm:ss.SS;YYYY/MM/DD HH:mm:ss.S;YYYY/MM/DD HH:mm:ss Z;YYYY/MM/DD HH:mm Z;MM/DD/YYYY HH:mm:ss Z;MM/DD/YYYY HH:mm Z;MM/DD/YY HH:mm:ss Z;MM/DD/YY HH:mm Z;YYDDDHHmmss;YYYYMMDD HHmmss".split(";"),
nga={instant:/((up|start|begin).*)?(date|time)/i,start:/((up|start|begin).*)?(date|time)/i,end:/(down|stop|end).*(date|time)/i},tC="HH:mm:ssZ;HH:mm:ss;HH:mm:ss.SSSZ;HH:mm:ss.SSS;HH:mm:ss.SSSSZ;HH:mm:ss.SSSS;HH:mmZ;HH:mm;HHmmssZ;HHmmss;ZHHmmss;HHmmss.SSSZ;HHmmss.SSS;HHmmss.SSSSZ;HHmmss.SSSS;HHmmZ;ZHHmm;K*m*s a z".split(";"),oga="HH:mm:ss.SSS;HH:mm:ss.SSSS;HH:mm:ss.SS;HH:mm:ss.S;HHmmss.SSSS;HHmmss.SS;HHmmss.S;HH:mm:ss.SSSZ;HH:mm:ss.SSSSZ;HH:mm:ss.SSZ;HH:mm:ss.SZ;HHmmss.SSSSZ;HHmmss.SSSZ;HHmmss.SSZ;HHmmss.SZ;HH:mm:ss.SSS Z;HH:mm:ss.SSSS Z;HH:mm:ss.SS Z;HH:mm:ss.S Z;HHmmss.SSS Z;HHmmss.SSSS Z;HHmmss.SS Z;HHmmss.S Z;HH:mm:ss Z;HH:mm Z;HHmmss Z;HHmm Z".split(";"),
uC={instant:/((up|start|begin).*)?(time|toi)/i,start:/((up|start|begin).*)?(time|toi)/i,end:/(down|stop|end).*(time|toi)/i},vC=new Uv(-Infinity,Infinity),wC=0,xC="Z";function nC(a,b){return yC(a,b,!1)}function mC(a,b,c){return c?zC(yC(AC(a),b,void 0)):yC(a,b)}
function BC(a,b,c,d){b=(b||"").toLowerCase();a=a.toISOString();if("year"==b)return a.slice(0,4);if("month"==b)return a.slice(0,7);if("day"==b||"week"==b||c)return a.slice(0,10);a=a.replace(".000","");d||(a=a.replace("T"," "),a=a.replace("Z",""));return a}function CC(a){return(new hC).format(a)}function pC(a,b){return moment(a.toISOString()).utc().format(b)}
function oC(a,b,c,d){a=d?AC(a):new Date(a.getTime());switch(b){case "custom":case "hours":a.setUTCHours(a.getUTCHours()+c);break;case "day":a.setUTCDate(a.getUTCDate()+c);break;case "week":a.setUTCDate(a.getUTCDate()+7*c);break;case "month":a.setUTCMonth(a.getUTCMonth()+c);break;case "year":a.setUTCFullYear(a.getUTCFullYear()+c)}return d?zC(a):a}function DC(a,b,c){a=EC(a,b,c);return a.isValid()?pga(a._f):null}function FC(a,b,c){a=EC(a,b,c);return a.isValid()?a.toDate():null}
function EC(a,b,c){c=void 0!==c?c:!0;var d=[];if(q(b))for(var e=0,f=b.length;e<f;e++)d.push(GC(b[e]));else b?d.push(GC(b)):d=sC;return moment.utc(a,d,c)}function GC(a){return a.replace(/(M+|D+|H+|m+|s+)/g,function(a){return 2==a.length?a[0]:a})}function pga(a){return a.replace(/(M+|D+|H+|m+|s+)/g,function(a){return 1==a.length?a+a:a})}
function yC(a,b,c){var d=new Date(a.getTime());c=void 0===c||c;b=b.toLowerCase();switch(b){case "year":d.setUTCMonth(0,1);d.setUTCHours(0,0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCFullYear(d.getUTCFullYear()+1);break;case "month":d.setUTCDate(1);d.setUTCHours(0,0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCMonth(d.getUTCMonth()+1);break;case "week":d.setUTCDate(d.getUTCDate()-d.getUTCDay());d.setUTCHours(0,0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCDate(d.getUTCDate()+7);break;case "custom":case "day":d.setUTCHours(0,
0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCDate(d.getUTCDate()+1);break;case "hour":d.setUTCMinutes(0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCHours(d.getUTCHours()+1);break;case "min":d.setUTCSeconds(0,0);!c&&a.getTime()>d.getTime()&&d.setUTCMinutes(a.getUTCMinutes()+1);break;case "sec":d.setUTCMilliseconds(0),!c&&a.getTime()>d.getTime()&&d.setUTCSeconds(a.getUTCSeconds()+1)}return d}function zC(a){return new Date(a.getTime()+6E4*a.getTimezoneOffset())}
function AC(a){return new Date(a.getTime()-6E4*a.getTimezoneOffset())}function Tv(a,b){b||(b=new Mv);var c=wC,d=xC;if(c)return b.g.setTime(a+c),b.Vh(!0,!1)+" "+d;b.g.setTime(a);return b.Vh(!0,!0)}function HC(){wC=O.get(["time","offset"],0);xC=O.get(["time","offsetLabel"],"Z")}function qga(){HC()}var qC=sC[6].replace("Z","[Z]");
Xs("now",function(a,b){a=b?b.split(/\s*,\s*/):[];b=a[0]||0;var c=parseFloat(b);isNaN(c)||(b=c);b=moment.duration(b,void 0);b=new Date(Date.now()+b.asMilliseconds());return pC(b,a[1]||qC)});var IC=TA();function JC(a){"string"===typeof a&&(a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/'/g,"&#39;"),a=a.replace(/"/g,"&quot;"),a=a.replace(/\//g,"&#x2F;"));return a}function Z(a,b,c,d){a=mB(a,b.ownerDocument,c,d);b.appendChild(a);return a}function KC(a,b,c,d,e){a=LC(a,b,c.ownerDocument,d,e);c.appendChild(a);return a}function mB(a,b,c,d){b=b||IC;a=b.createElement(a);null!=d&&XA(a,d);null!=c&&a.appendChild(b.createTextNode(String(c)));return a}
function LC(a,b,c,d,e){c=c||IC;a=c.createElementNS(b,a);null!=e&&XA(a,e);null!=d&&a.appendChild(c.createTextNode(String(d)));return a}function MC(a,b){a=zg(a);return eb(a,function(a){return a.localName==b})}function NC(a){a=zl(a,!0).trim();a=new Date(a||void 0);return isNaN(a.getTime())?null:a}
function OC(a,b,c,d){if(3===a.nodeType)b.appendChild(b.ownerDocument.createTextNode(a.textContent));else if(4===a.nodeType)b.appendChild(b.ownerDocument.createCDATASection(a.textContent));else if(1===a.nodeType){if(a.hasAttributes()){var e={};for(var f=a.attributes,h=0,k=f.length;h<k;h++)"xmlns:ogc"!=f[h].name&&(e[f[h].name]=f[h].value)}b=c&&d?KC(c+":"+a.localName,d,b,void 0,e):Z(a.localName,b,void 0,e);if((a=a.childNodes)&&0<a.length)for(h=0,k=a.length;h<k;h++)OC(a[h],b,c,d);return b}return null}
function PC(a){return WA(a).replace(/ xmlns=""/g,"")}function QC(a,b){return a&&!Lb(Yb(a.textContent))?a.textContent:b}function RC(a,b){if(a=a.querySelector(b))if(a=Yb(a.textContent),!Lb(a))return a;return null}var rga=/xsi:.*?=".*?"/gm;function SC(){this.id=void 0;this.j="AbstractMapping"}g=SC.prototype;g.ja=void 0;g.fd=void 0;g.Nd=function(){return null};g.D=function(){return this.id};g.ba=function(){return null};g.jc=function(){return 0};g.Tj=function(){return"default"};g.Se=function(a){return null!=a};g.clone=function(){var a=new this.constructor;a.ja=this.ja;return a};g.sa=function(a){a=a||{};a.id=this.D();a.field=this.ja;return a};g.restore=function(a){this.ja=a.field};
g.rc=function(){var a=mB("mapping",void 0,void 0,{type:this.j});Z("field",a,cB(this.ja));return a};g.ad=function(a){this.j=a.getAttribute("type");this.ja=dB(TC(a,"field"))};function TC(a,b){return(a=a.getElementsByTagName(b))&&a[0]?a[0].innerHTML:null};function UC(){SC.call(this);this.g=void 0;this.A=!1}w(UC,SC);gB(eB.u(),"Rename",UC);g=UC.prototype;g.D=function(){return"Rename"};g.ba=function(){return"Rename "+this.ja+" to "+this.g};g.Fa=function(a){if(this.ja&&this.g&&this.g!=this.ja){var b=$A(a,this.ja);b&&(aB(a,this.g,b),this.A||aB(a,this.ja,void 0))}};g.clone=function(){var a=UC.C.clone.call(this);a.g=this.g;a.A=this.A;return a};g.sa=function(a){a=UC.C.sa.call(this,a);a.toField=this.g;a.keepOriginal=this.A;return a};
g.restore=function(a){UC.C.restore.call(this,a);this.g=a.toField;this.A=a.keepOriginal};g.rc=function(){var a=UC.C.rc.call(this);Z("toField",a,this.g);Z("keepOriginal",a,this.A||!1);return a};g.ad=function(a){UC.C.ad.call(this,a);var b=TC(a,"toField");null!=b?this.g=b:this.g=void 0;b=TC(a,"keepOriginal");this.A=null!=b?"true"===b?!0:!1:!1};function VC(){UC.call(this);this.ja="ALTITUDE";this.g="ALTITUDE (m)*";this.type=this.j="Altitude";this.P=this.o="ALTITUDE_UNITS";this.units="m";this.L=lu;this.s=sea;this.N=tea;this.I=uea;this.G=this.B=!1}w(VC,UC);gB(eB.u(),"Altitude",VC);g=VC.prototype;g.Rc=function(){return this.units};g.Zc=function(a){this.units=a;"m"!=this.units&&(this.G=!0)};g.D=function(){return this.j};g.ba=function(){return this.type};
g.Fa=function(a){if(a&&this.ja){var b=this.g||this.ja;if(a&&null!=a.la.GEOM_ALT)aB(a,b,Math.round(a.la.GEOM_ALT));else{var c=Number($A(a,this.ja));if(isNaN(c))c=0;else{"m"!==this.units&&(c=tB(c,"m",this.units));if(!this.G){var d=bB(a,this.B?this.I:this.s);d&&(this.o=d);var e=$A(a,this.o);e&&(d=null,e=ec(e.toLowerCase()),pc(qB,e)?d=oc(qB,e):qc(pB,e.toLowerCase())&&(d=e.toLowerCase()),e=d);e&&(c=tB(c,"m",e))}c=Math.round(c);this.B&&(c=-c)}aB(a,b,c);d=b||"ALTITUDE";b=a.X();b instanceof Jk&&(c=b.flatCoordinates,
3>c.length||0===c[2])&&(a=Number(a.get(d)||0),isNaN(a)&&(a=0),c[2]=a,Kk(b,"XYZ",c))}}};g.Se=function(){return!0};g.Nd=function(a){if(a)for(var b=a.length;b--;){var c=a[b],d=bB(c,this.L);if(d)this.B=!1;else if(d=bB(c,this.N))this.B=!0;if(d){a=new this.constructor;a.ja=d;a.B=this.B;if(c=bB(c,this.B?this.I:this.s))a.o=c;a.units=this.units;a.G=this.G;return a}}return null};g.clone=function(){var a=VC.C.clone.call(this);a.Zc(this.Rc());a.o=this.o;a.P=this.P;a.G=this.G;a.B=this.B;return a};function WC(){A.call(this)}w(WC,A);WC.prototype.uc=function(){this.dispatchEvent(new z("error"))};WC.prototype.Hh=function(){this.dispatchEvent(new z("complete"))};function XC(a){z.call(this,a)}w(XC,z);function YC(){z.call(this,"threadProgress")}w(YC,z);function ZC(a){A.call(this);this.j=a;this.g=new le(this.l,5,this)}w(ZC,A);var sga=E.V("os.thread.Thread");ZC.prototype.J=function(){ZC.C.J.call(this);this.j=null;this.g.dispose();this.g=null};ZC.prototype.start=function(){this.g.start();this.dispatchEvent(new XC("threadStart",this.j))};ZC.prototype.stop=function(){this.g.stop();this.dispatchEvent(new XC("threadStop",this.j))};
ZC.prototype.l=function(){this.g.stop();try{var a=this.j,b=Ha();E.za($C,"processing new chunk");for(var c=0,d=Ha();aD(a)&&250>d-b;){var e=a;try{var f=e.j.Wc(),h=f;if(h)if(q(h))for(var k=0,l=h.length;k<l;k++)h[k]&&e.gl(h[k]);else e.gl(h)}catch(p){E.error($C,"Error while parsing record",p)}d=Ha();c++}var m=Ha()-b;E.za($C,"finished processing chunk of "+c+" items in "+m+" ms.");a.dispatchEvent(new z("threadProgress"));var n=!aD(a);this.dispatchEvent(new YC(-1,-1));n?(this.g.stop(),this.dispatchEvent(new XC("threadComplete",
this.j))):this.g.start()}catch(p){this.Xa()||this.stop(),E.error(sga,"Thread execution error!",p),this.dispatchEvent(new XC("threadError",this.j))}};function bD(a){A.call(this);this.j=a;this.P=!1;this.o=this.s=null;a=hB.u().g;this.l=zc(a);this.U={};this.A=!1;this.Z=0;this.I=[]}w(bD,A);var $C=E.V("os.im.Importer");g=bD.prototype;g.J=function(){this.reset();this.j&&(this.j.oc(),Ma(this.j),this.j=null);bD.C.J.call(this)};function cD(a,b){if(b){var c=zc(a.l);a.l={};for(var d=0;d<b.length;d++){var e=b[d];pc(c,e)&&(a.l[e]=yc(c,e))}}a.A=!0}function dD(a,b){a.l={};b&&b.length&&(b.forEach(function(a){this.l[a.D()]=a},a),a.A=!0)}
function eD(a,b){b&&b.forEach(function(a){var b=a.D();this.U[b]=a;b in this.l&&wc(this.l,b);fD(this,a)},a)}function gD(a,b){try{C.dispatchEvent("importer:startImport"),a.j instanceof WC?(a.j.Ra("complete",a.Si,!1,a),a.j.Ra("error",a.ym,!1,a),a.j.Bb(b)):(a.j.Bb(b),a.Si())}catch(c){E.error($C,"Error while configuring parser.",c),a.ym()}}
g.Si=function(){this.j instanceof WC&&(this.j.M("complete",this.Si,!1,this),this.j.M("error",this.ym,!1,this));try{this.s||(this.P=!1,this.s=new ZC(this),this.s.Ra("threadComplete",this.jk,!1,this),this.s.start())}catch(a){E.error($C,"Error while importing data.",a),this.jk()}};g.ym=function(){this.j instanceof WC&&(this.j.M("complete",this.Si,!1,this),this.j.M("error",this.ym,!1,this));At(Ct,"Error while parsing data. Please see the log for more details.",rs,$C);this.jk()};
g.jk=function(){this.s&&(Ma(this.s),this.s=null);C.dispatchEvent("importer:stopImport");this.dispatchEvent(new z("complete"));this.j&&this.j.oc()};function aD(a){try{return!a.P&&a.j.vd()}catch(b){E.error($C,"Error while checking for next record",b)}return!1}g.gl=function(a){this.Gr(a);this.I.push(a)};g.getData=function(a){var b=this.I;if(null!=a?a:1)this.I=[];return b};
g.Gr=function(a){if(this.A){this.Z++;if(this.l)for(var b in this.l)if(!(b in this.U)){var c=this.l[b].Nd([a]);c&&(wc(this.l,b),fD(this,c))}100<=this.Z&&(this.A=!1)}if(a&&this.o)for(b=0,c=this.o.length;b<c;b++){var d=this.o[b];try{d.Fa(a)}catch(e){E.error($C,'Error applying mapping "'+d.ja+" > "+d.ba()+'"! ',e)}}};g.reset=function(){this.stop();this.j.oc();this.I=[]};g.stop=function(){this.P=!0};
function fD(a,b){if(a.o){var c=a.o.length-1;a.o[c]instanceof VC?a.o.splice(c,0,b):a.o.push(b)}else a.o=[b]};function tga(a,b){if(a instanceof ek&&!1!==a.get("_node")&&(b||(b=LB(a)),b))return{feature:a,layer:b}}function hD(a,b){T.u().Qa()?(a=a?.5:.9,b&&(a=1/a)):(a=a?1:.2,b&&(a=-a));return a}function uga(a){return a instanceof wl};var iD={method:"geodesic",distance:1E5},jD=null;function kD(){return{method:iD.method,distance:iD.distance}}function lD(a){a&&(iD.method=a.method||iD.method,iD.distance=a.distance||iD.YR)}var mD=null;function nD(a,b){mD={method:b||iD.method,distance:iD.distance};a&&(a=Li(a||N),oD={ro:Xi(a,"EPSG:4326"),Lp:Xi("EPSG:4326",a),Zu:a.Tb})}
function pD(a){if(1E3<iD.distance){var b=a.get("interpolationMethod")||null;if("none"===b){var c=a.X();c&&c.set("interpolationMethod","none",!0)}else{qD();if(c=a.get("_originalGeometry"))c=c.clone();else{c=a.X();if(!c)return;var d=c.T();if("Point"===d||"MultiPoint"===d)return;c&&a.set("_originalGeometry",c.clone())}c&&(jD=b,GB(c),jD=null,(b=mD)&&b.method!==iD.method&&a.set("interpolationMethod",b.method),a.sb(c),a.ia())}}}
function GB(a,b){b||qD();if("none"!==(a.get("interpolationMethod")||null))switch(a.T()){case "GeometryCollection":b=Np(a);b.forEach(vga);Or(a,Mr(b));break;case "MultiPolygon":b=a.getCoordinates();b.forEach(wga);a.ic(b);break;case "MultiLineString":b=a.getCoordinates();b.forEach(rD);a.ic(b);break;case "Polygon":b=a.getCoordinates();b.forEach(sD);a.ic(b);break;case "LineString":b=a.getCoordinates(),rD(b),a.ic(b)}}function vga(a){GB(a,!0)}var tD=null,oD=null;
function qD(){tD&&N.Tb===tD.Zu||(tD={ro:Xi(N,"EPSG:4326"),Lp:Xi("EPSG:4326",N),Zu:N.Tb})}function wga(a){a.forEach(sD)}function sD(a){rD(a);a.length&&(a[a.length-1]=a[0])}
function rD(a){var b=mD||iD,c=oD||tD,d=jD||b.method;if("geodesic"===d){var e=osasm.geodesicInterpolate;d=osasm.geodesicInverse}else if("rhumb"===d)e=osasm.rhumbInterpolate,d=osasm.rhumbInverse;else return;for(var f=a.length-2;0<=f;f--){var h=a[f],k=a[f+1],l=c.ro(h,void 0,h.length),m=c.ro(k,void 0,k.length);l.length=2;m.length=2;var n=d(l,m).distance,p=1+Math.ceil(n/b.distance);if(2<p){var r=Math.min(h.length,k.length);if(2<r){var u=[];for(n=2;n<r;n++)u.push(k[n]-h[n])}r=l[0]+180;var v=l[0]-180,x=
osasm._malloc(2*p*Float64Array.BYTES_PER_ELEMENT);e(l,m,x,p);l=new Float64Array(osasm.HEAPU8.buffer,x,2*p);var B=1;n=2;for(var F=l.length-2;n<F;n+=2){var D=[l[n],l[n+1]];D[0]=Ir(D[0],v,r);D=c.Lp(D);u&&u.forEach(function(a,b){D[b+2]=h[b+2]+a*B/(p-1)});a.splice(f+B,0,D);B++}osasm._free(x);m[0]=Ir(m[0],v,r);D=c.Lp(m,void 0,m.length);u&&u.forEach(function(a,b){D[b+2]=k[b+2]});a.splice(f+B,1,D)}}};function uD(){this.l=this.defaultDataProjection=null}function vD(a,b,c){var d;c&&(d={dataProjection:c.dataProjection?c.dataProjection:a.jn(b),featureProjection:c.featureProjection});return wD(a,d)}function wD(a,b){return nh({dataProjection:a.defaultDataProjection,featureProjection:a.l},b)}
function xD(a,b,c){var d=c?Li(c.featureProjection):null,e=c?Li(c.dataProjection):null,f;d&&e&&!Wi(d,e)?a instanceof kj?f=(b?a.clone():a).transform(b?d:e,b?e:d):f=Zi(a,e,d):f=a;if(b&&c&&void 0!==c.decimals){var h=Math.pow(10,c.decimals);f===a&&(f=f.clone());f.jl(function(a){for(var b=0,c=a.length;b<c;++b)a[b]=Math.round(a[b]*h)/h;return a})}return f};function yD(){uD.call(this)}G(yD,uD);function zD(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null}g=yD.prototype;g.T=function(){return"json"};g.Rr=function(a,b){return AD(this,zD(a),vD(this,a,b))};g.cg=function(a,b){var c=zD(a);a=vD(this,a,b);if("FeatureCollection"===c.type){b=[];c=c.features;var d;var e=0;for(d=c.length;e<d;++e)b.push(AD(this,c[e],a))}else b=[AD(this,c,a)];return b};g.Ck=function(a,b){var c=zD(a);a=vD(this,a,b);return BD(c,a)};
g.jn=function(a){a=zD(a).crs;var b;a?"name"==a.type?b=Li(a.properties.name):Rh(!1,36):b=this.defaultDataProjection;return b};g.Ps=function(a,b){return JSON.stringify(this.g(a,b))};g.Qs=function(a,b){return JSON.stringify(CD(this,a,b))};function DD(a){a=a?a:{};uD.call(this);this.defaultDataProjection=Li(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326");a.featureProjection&&(this.l=Li(a.featureProjection));this.j=a.geometryName;this.o=a.extractGeometryName}G(DD,yD);function BD(a,b){return a?xD((0,xga[a.type])(a),!1,b):null}function ED(a,b){return(0,yga[a.T()])(xD(a,!0,b),b)}
var xga={Point:function(a){return new Jk(a.coordinates)},LineString:function(a){return new yr(a.coordinates)},Polygon:function(a){return new Rk(a.coordinates)},MultiPoint:function(a){return new Pr(a.coordinates)},MultiLineString:function(a){return new Ar(a.coordinates)},MultiPolygon:function(a){return new Rr(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return BD(a,b)});return new Kr(a)}},yga={Point:function(a){return{type:"Point",coordinates:a.getCoordinates()}},
LineString:function(a){return{type:"LineString",coordinates:a.getCoordinates()}},Polygon:function(a,b){if(b)var c=b.rightHanded;return{type:"Polygon",coordinates:a.getCoordinates(c)}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.getCoordinates()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.getCoordinates()}},MultiPolygon:function(a,b){if(b)var c=b.rightHanded;return{type:"MultiPolygon",coordinates:a.getCoordinates(c)}},GeometryCollection:function(a,b){return{type:"GeometryCollection",
geometries:a.g.map(function(a){var c=nh({},b);delete c.featureProjection;return ED(a,c)})}},Circle:function(){return{type:"GeometryCollection",geometries:[]}}};function AD(a,b,c){b="Feature"===b.type?b:{type:"Feature",geometry:b};c=BD(b.geometry,c);var d=new ek;a.j?fk(d,a.j):a.o&&void 0!==b.geometry_name&&fk(d,b.geometry_name);d.sb(c);void 0!==b.id&&d.ga(b.id);b.properties&&d.qc(b.properties);return d}
DD.prototype.g=function(a,b){b=wD(this,b);var c={type:"Feature"},d=a.D();void 0!==d&&(c.id=d);(d=a.X())?c.geometry=ED(d,b):c.geometry=null;b=a.Vb();delete b[a.Ud];qh(b)?c.properties=null:c.properties=b;return c};function CD(a,b,c){c=wD(a,c);var d=[],e;var f=0;for(e=b.length;f<e;++f)d.push(a.g(b[f],c));return{type:"FeatureCollection",features:d}};function FD(){A.call(this);this.j=[];this.l={}}w(FD,A);g=FD.prototype;g.add=function(a){var b=this.eh(a);b&&this.dispatchEvent(new U("add",a));return b};g.eh=function(a){var b=this.D(a);return this.contains(a)?!1:(this.l[b]=a,this.j.push(a),!0)};g.D=function(a){return a.id};function GD(a,b){return b?"string"===typeof b?b:a.D(b):null}g.contains=function(a){return(a=GD(this,a))?a in this.l:!1};g.get=function(a){return(a=GD(this,a))&&this.contains(a)?this.l[a]:null};
function HD(a){return a.j.slice()}g.remove=function(a){var b=GD(this,a);a=this.get(b);if(b&&a){delete this.l[b];for(var c=b=this.j.length;b--;)this.j[b]===a&&this.j.splice(b,1);this.j.length!==c&&this.dispatchEvent(new U("remove",a))}return a};window.jsts&&(jsts.geom.LineString.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1),1E-12)});/*

 Copyright (c) 2011 by The Authors.
 Published under the LGPL 2.1 license.
 See /license-notice.txt for the full text of the license notice.
 See /license.txt for the full text of the license.
*/
var ID=E.V("os.geo.jsts");function JD(a){return a?[a.x,a.y,a.z||0]:null}function KD(a){return new jsts.geom.Coordinate(a[0],a[1],a[2])}function LD(a){if(null==window.jsts)throw Error("JSTS library is not loaded!");this.g=a||new jsts.geom.GeometryFactory}wa(LD);
function MD(a,b){if(b)switch(b.T()){case "Point":return ND(a,b);case "LineString":return OD(a,b);case "LinearRing":return a.g.createLinearRing(b.getCoordinates().map(KD));case "Polygon":return PD(a,b);case "MultiPoint":return zga(a,b);case "MultiLineString":return Aga(a,b);case "MultiPolygon":return Bga(a,b);case "GeometryCollection":return Cga(a,b)}return null}function ND(a,b){b=b.getCoordinates();return a.g.createPoint(KD(b))}
function OD(a,b){b=b.getCoordinates();if(!b||0==b.length)return null;1==b.length&&(b[1]=b[0]);return a.g.createLineString(b.map(KD))}function PD(a,b){b=Uk(b);for(var c=null,d=[],e=0;e<b.length;e++){var f=a.g.createLinearRing(b[e].getCoordinates().map(KD));0===e?c=f:d.push(f)}return a.g.createPolygon(c,d)}function zga(a,b){b=Qr(b).map(function(a){return ND(this,a)},a);return a.g.createMultiPoint(b)}
function Aga(a,b){b=Cr(b).map(function(a){return OD(this,a)},a);return a.g.createMultiLineString(b)}function Bga(a,b){b=Tr(b).map(function(a){return PD(this,a)},a);return a.g.createMultiPolygon(b)}function Cga(a,b){b=Np(b).map(function(a){return MD(this,a)},a);return a.g.createGeometryCollection(b)}
LD.prototype.write=function(a){var b=a.getGeometryType();if("Point"===b)a=a.getCoordinate(),a=new Jk(JD(a));else if("LineString"===b)a=QD(a);else if("LinearRing"===b)a=a?a.getCoordinates().map(JD):[],a=new Ik(a);else if("Polygon"===b)a=RD(a);else if("MultiPoint"===b)a=a?a.getCoordinates().map(JD):[],a=new Pr(a);else if("MultiLineString"===b){b=[];if(a)for(var c=a.getNumGeometries(),d=0;d<c;d++){var e=a.getGeometryN(d);e&&b.push(QD(e).getCoordinates())}a=new Ar(b)}else if("MultiPolygon"===b){b=[];
if(a)for(c=a.getNumGeometries(),d=0;d<c;d++)(e=a.getGeometryN(d))&&b.push(RD(e).getCoordinates());a=new Rr(b)}else if("GeometryCollection"===b){b=[];if(a)for(c=a.getNumGeometries(),d=0;d<c;d++)(e=a.getGeometryN(d))&&b.push(this.write(e));a=new Kr(b)}else a=null;return a};function QD(a){a=a?a.getCoordinates().map(JD):[];return new yr(a)}
function RD(a){var b=[];if(a){var c=a.getExteriorRing();if(c){b.push(c.getCoordinates().map(JD));c=a.getNumInteriorRing();for(var d=0;d<c;d++){var e=a.getInteriorRingN(d);e&&b.push(e.getCoordinates().map(JD))}}}return new Rk(b)}
function SD(a){var b=null;if(a)switch(a.T()){case "LineString":var c=a.getCoordinates();3<c.length&&Eu(c)&&(b=new Rk([c]));break;case "MultiLineString":c=a.getCoordinates();var d=[];for(a=0;a<c.length;a++)3<c[a].length&&Eu(c[a])&&d.push(c[a]);1==d.length?b=new Rk(d):1<d.length&&(b=new Rr([d]));break;case "Circle":b=jca(a);break;case "GeometryCollection":if(c=a.g){var e=[];for(a=0;a<c.length;a++)if(d=SD(c[a])){var f=d.T();"Polygon"==f?e.push(d):"MultiPolygon"==f&&Tr(d).forEach(function(a){e.push(a)})}1==
e.length?b=e[0]:1<e.length&&(b=new Rr(null),Ur(b,e))}break;case "Polygon":case "MultiPolygon":b=a}return b}function TD(a,b,c){var d=null;if(a&&b){var e=a.X();b=b.X();if(e&&b){d=LD.u();e=MD(d,e);b=MD(d,b);if(e.covers(b))throw Error("Result geometry is unchanged");e=e.union(b);if(e=d.write(e))e=UD(e),e.set("_normalized",!0);d=c?a:new ek;d.sb(e)}}return d}
function VD(a,b,c){var d=null;if(a&&b){var e=a.X(),f=b.X();if(e&&f){b=LD.u();e=MD(b,e);f=MD(b,f);d=c?a:new ek;if(f.covers(e))throw Error("Result geometry is empty");if(e.contains(f)||e.crosses(f)||e.overlaps(f))if((a=e.difference(f))&&!a.isEmpty()){if(a=b.write(a))a=UD(a),a.set("_normalized",!0);d.sb(a)}else throw Error("Result geometry is empty");else throw Error("Result geometry is unchanged");}}return d}
function WD(a){var b=null;if(a)try{var c=LD.u(),d=a.map(function(a){return a?MD(c,a):null}).filter(CA);if(1==d.length)var e=d[0];else if(1<d.length)try{e=new jsts.geom.GeometryCollection(d,new jsts.geom.GeometryFactory),e=e.union()}catch(f){e=new jsts.geom.MultiPolygon(d,new jsts.geom.GeometryFactory),e=e.buffer(0)}e&&(b=c.write(e))}catch(f){E.error(ID,"Failed merging geometries",f)}return b}
function XD(a){if(a&&(a=a.filter(CA),1<a.length)){for(var b=[0,0,0,0],c=0;c<a.length;c++){var d=a[c].aa();gi(d)>gi(b)&&(b=d)}b=(b[0]+b[2])/2;for(c=0;c<a.length;c++)a[c].Ue("_normalized",!0),Qu(a[c],b);c=WD(a);if(c instanceof Rk)return[c];if(c instanceof Rr)return Tr(c)}return a}
function YD(a,b,c){if(!a)return null;var d=a.T();if(0==b||"Point"!==d&&663469.9375<b)return null;var e=a.clone();c||e.toLonLat();a=null;switch(d){case "Point":a=Dga(e,Math.abs(b));break;case "LineString":case "MultiLineString":Qu(e);a=ZD(e,Math.abs(b));break;case "Polygon":d=e.getCoordinates();if(0<d.length&&Su(d[0]))a=Ega(e,b);else{d=e.aa();var f=$D(d,b);f?0<f&&(a=ZD(e,b)):a=aE(e,b,(d[0]+d[2])/2)}break;case "MultiPolygon":e=Tr(e);0>b&&(e=XD(e));e&&(a=e.map(function(a){return YD(a,b,!0)}).filter(CA),
0<b&&(a=XD(a)),a=WD(a));break;case "GeometryCollection":if(e=Np(e))a=e.map(function(a){return YD(a,b,!0)}).filter(CA),a=WD(a)}a&&(a=UD(a),a.set("_normalized",!0),a.set("interpolationMethod","none"));a&&!c&&iu(a);return a}function Dga(a,b){a=vk(a);b=Bu(a,b,b,0);return new Rk([b])}
function $D(a,b){if(a&&6<a[2]-a[0]){if(0>b){b=Math.abs(b);var c=osasm.geodesicDirect([0,Math.max(Math.abs(a[1]),Math.abs(a[3]))],180,b);b=6-osasm.rhumbDirect([0,c[1]],90,2.05*b)[0];return 0<b&&500>=(a[2]-a[0])/b?b:-1}return 6}return 0}
function ZD(a,b){var c=null,d=LD.u(),e=MD(d,a),f=a.aa();var h=$D(f,b);if(0<=h){var k=[];if(0<h)for(var l=LD.u(),m=f[0];m<f[2];m+=h){var n=Vk([m,f[1],m+6,f[3]]);k.push(MD(l,n))}}if((h=k)&&500>h.length){k=[];if(h.length)for(f=0;f<h.length;f++)l=e.intersection(h[f]),l.isEmpty()||k.push(d.write(l));else k.push(a);if(0<k.length){a=a.aa();a=(a[0]+a[2])/2;d=[];for(f=0;f<k.length;f++)(e=aE(k[f],b,a))&&d.push(e);0<d.length&&(c=WD(d))}}return c}
function aE(a,b,c){var d=null;if(a){d=ii(a.aa());proj4.defs("bufferCRS","+ellps=WGS84 +proj=tmerc +lat_0="+d[1]+" +lon_0="+d[0]+" +k=1 +x_0=0 +y_0=0");var e=new xi({code:"bufferCRS"});a.transform("EPSG:4326",e);d=bE(a,b,e,c);a=Li("EPSG:4326");Ii(a,e);Ii(e,a)}return d}function Ega(a,b){var c=null;if(a){var d;if(d=0<ii(a.aa())[1]?Li("EPSG:3413"):Li("EPSG:3031"))a.transform("EPSG:4326",d),c=bE(a,b,d)}return c}
function bE(a,b,c,d){var e=null,f=LD.u();if(a=MD(f,a))if(b=jsts.simplify.DouglasPeuckerSimplifier.simplify(a,Math.abs(.01*b)).buffer(b),!b.isEmpty()&&(f=e=f.write(b)))f.transform(c,"EPSG:4326"),Qu(f,d);return e}
function UD(a,b,c){if(a){var d=a.T();if("Polygon"==d||"MultiPolygon"==d)try{var e=LD.u(),f=MD(e,a);if(f.isEmpty())return c?void 0:a;if(f.isValid()){f.normalize();var h=f}else if(f instanceof jsts.geom.Polygon){var k=new jsts.operation.polygonize.Polygonizer;cE(f,k);h=dE(k.getPolygons(),f.getFactory())}else if(f instanceof jsts.geom.MultiPolygon){k=new jsts.operation.polygonize.Polygonizer;for(var l=f.getNumGeometries();0<l--;)cE(f.getGeometryN(l),k);h=dE(k.getPolygons(),f.getFactory())}if(h&&h.isValid()){var m=
f.getLength(),n=Math.abs(m-h.getLength());!b&&.005<n/m&&At(Ct,"Area was modified from the original due to invalid topology. Common reasons include polygons that cross or overlap themselves.",ss);var p=e.write(h);p.qc(a.Vb());return p}}catch(r){E.error(ID,"Geometry validation check failed",r)}return c?void 0:a}}function cE(a,b){eE(a.getExteriorRing(),b);for(var c=a.getNumInteriorRing();0<c--;)eE(a.getInteriorRingN(c),b)}
function eE(a,b){a instanceof jsts.geom.LinearRing&&(a=a.getFactory().createLineString(a.getCoordinates()));var c=a.getFactory().createPoint(a.getCoordinateN(0));a=a.union(c);b.add(a)}function dE(a){switch(a.size()){case 0:return null;case 1:return a.iterator().next();default:a=a.iterator();for(var b=a.next();a.hasNext();)b=b.union(a.next());return b}};var fE=new bk({stroke:new ak({color:"#888",lineCap:"square",width:3}),image:new Yj({radius:3,fill:new Zj({color:"#888"})})}),gE=new bk({stroke:new ak({color:"#ff0",lineCap:"square",width:3}),image:new Yj({radius:3,fill:new Zj({color:"#ff0"})})}),hE=new bk({stroke:new ak({color:"#f00",lineCap:"square",width:3}),image:new Yj({radius:3,fill:new Zj({color:"#f00"})})}),iE=new bk({stroke:new ak({color:"#fff",lineCap:"square",width:3}),image:new Yj({radius:3,fill:new Zj({color:"#fff"})})});function jE(a,b,c,d,e){z.call(this,a);this.id=b;this.value=c;this.params=d||null;this.qa=e||null}w(jE,z);function kE(a,b,c){z.call(this,"displayOnboarding");this.title=a;this.j=b;this.config=c||null}w(kE,z);function lE(a,b,c,d){z.call(this,a);this.j=b&&b instanceof Lw?b:null;this.url=b&&"string"===typeof b?b:null;this.config=d||null}w(lE,z);function mE(){y.call(this);this.g={};this.keys=[]}w(mE,y);g=mE.prototype;g.J=function(){this.keys.forEach(this.Cs);mE.C.J.call(this)};g.handle=function(a,b){if(this.handles(a))if(b){var c=[],d=this.g[a]||[];b=b.split(",");for(var e=0,f=b.length;e<f;e++){var h=decodeURIComponent(b[e]);h&&(-1==d.indexOf(h)&&this.j(a,h),c.push(h))}this.g[a]=c;b=0;for(e=d.length;b<e;b++)f=d[b],-1===c.indexOf(f)&&this.Ds(a,f)}else this.Cs(a)};g.Ub=function(){return this.keys};g.handles=function(a){return-1<this.keys.indexOf(a)};
g.Ds=function(){};g.Cs=function(a){if(a in this.g){for(var b=this.g[a],c=0,d=b.length;c<d;c++)this.Ds(a,b[c]);delete this.g[a]}};function nE(){mE.call(this);this.keys=["tips"]}w(nE,mE);nE.prototype.j=function(a,b){"tips"===a&&O.set("onboarding.showOnboarding","true"===b)};function oE(){mE.call(this);this.keys=["file"]}w(oE,mE);wa(oE);oE.prototype.j=function(a,b){if("file"===a){a:{a=pE(V);for(var c=0,d=a.length;c<d;c++)if(a[c].yh(b)){a=a[c];break a}a=null}a?a.isActive()||a.setActive(!0):C.dispatchEvent(new lE("importUrl",b))}};oE.prototype.Ds=function(a,b){if("file"===a){a=null;for(var c=pE(V),d=0,e=c.length;d<e;d++)if(c[d].yh(b)){a=c[d];break}a&&(a.setActive(!1),qE(V,a))}};function rE(a){return a.D()}function Fga(a,b){return b.getName()==a}function sE(a,b,c){if(void 0!==b&&void 0!==c){b*=c;if(b>a.length)return[];c=b+c;c>a.length&&(c=void 0);return a.slice(b,c)}return a};function tE(){this.A=Uy.get("$rootScope");this.s=Uy.get("$location");this.g=null;this.j={};this.o=!1}wa(tE);tE.prototype.l=function(){if(this.o){var a=this.g;if(this.g=Gga(this))for(var b in this.g){var c=this.j[b];c&&c.forEach(function(a){a.handle(b,this.g[b])},this)}if(a)for(b in a)this.g&&b in this.g||(c=this.j[b])&&c.forEach(function(a){a.Cs(b)})}};function uE(a,b){b.Ub().forEach(function(a){this.j[a]?this.j[a].push(b):this.j[a]=[b]},a);a.l()}
function Gga(a){if((a=a.s.search())&&!uc(a))return a;a=(new Ve(window.location)).g;hf(a);var b=a.g;Se(b);a={};for(var c=0;c<b.g.length;c++){var d=b.g[c];a[d]=b.ha[d]}b={};for(var e in a)b[e]=a[e].join(",");return b};function vE(){A.call(this);this.j={};this.g={};uE(tE.u(),new nE)}w(vE,A);wa(vE);var wE=E.V("os.ui.onboarding.OnboardingManager"),xE=["images/"],yE="v1542394219/";function zE(a,b){var c=O.get(["onboarding",b]);c=a.isEnabled()&&!c;var d=a.j[b];d?c&&Aa(d)&&AE(a,b,d):(a.j[b]=!0,b=new Ys(b),ct(b,"application/json, text/plain, */*"),b.Ra("success",Fa(a.o,c),!1,a),b.Ra("error",a.l,!1,a),b.load())}vE.prototype.isEnabled=function(){return O.get("onboarding.showOnboarding",!0)};
function AE(a,b,c){O.set(["onboarding",b],!0);a.dispatchEvent(new kE(c.title,c.steps,c.config||null))}vE.prototype.o=function(a,b){var c=b.target;b=c.g;for(var d=yE,e=0,f=xE.length;e<f;e++)b=b.replace(new RegExp(xE[e],"g"),d+xE[e]);b=JSON.parse(b);d=c.j.toString();c.dispose();if(b.title&&b.steps){c=b.steps;e=0;for(f=c.length;e<f;e++){var h=c[e],k=h.context;k&&(k in this.g?this.g[k].push(h):this.g[k]=[h])}this.j[d]=b;a&&AE(this,d,b)}else E.error(wE,'Onboarding configuration at "'+d+'" does not contain required information.')};
vE.prototype.l=function(a){a=a.target;var b=a.j.toString();a.dispose();E.ib(wE,"Unable to load onboarding with URI: "+b)};W.directive("contextOnboarding",[function(){return{restrict:"E",replace:!0,scope:{context:"@"},template:'<button title="Show help" class="btn btn-sm btn-outline-secondary border-0" ng-click="ctrl.show()"><i class="fa fa-fw fa-question"></i></button>',controller:BE,controllerAs:"ctrl"}}]);function BE(a){this.v=a;a.$on("$destroy",this.g.bind(this))}BE.$inject=["$scope"];BE.prototype.g=function(){this.v=null};
BE.prototype.show=function(){var a=vE.u(),b=this.v.context,c=a.g[b];c?a.dispatchEvent(new kE(c[0].title,c,{width:350})):E.za(wE,"No onboarding registered for "+b+".")};BE.prototype.show=BE.prototype.show;var CE={RP:".js-navtop",QP:".js-navbottom"},Hga=E.V("os.ui.window");
function DE(){return{restrict:"E",replace:!0,transclude:!0,scope:{id:"@",helpContext:"@",minWidth:"@",maxWidth:"@",minHeight:"@",maxHeight:"@",x:"@",y:"@",width:"@",headerClass:"@",height:"@",label:"@",icon:"@",iconHtml:"@",showClose:"=",showHide:"=",showCollapse:"=",noScroll:"@",overlay:"@",modal:"=",disableDrag:"@",windowContainer:"@",headerBtns:"=?"},templateUrl:"v1542394219/views/window/window.html",controller:EE,controllerAs:"windowCtrl"}}W.directive("window",[DE]);
function FE(a,b,c,d,e,f){c||(c="#js-window__container");-1==b.indexOf("<")&&(b="<"+b+"></"+b+">");var h="<"+("key"in a?"savedwindow":"window"),k;for(k in a){var l=a[k];"label"===k&&"string"===typeof l&&(l=l.replace(/"/g,"&quot;"));h+=" "+k+'="'+l+'"'}a=h+(">"+b+"</"+("key"in a?"savedwindow":"window")+">");c||(c="#js-window__container");-1==a.indexOf("<")&&(a="<"+a+"></"+a+">");(b=angular.element(c).injector())&&GE(a,c,d||$("[ng-view]").scope()||b.get("$rootScope"),e||b.get("$compile"),f)}
function GE(a,b,c,d,e){c=c.$new();null!=e&&Cc(c,e);d(a)(c).appendTo(b)}GE.$inject=["html","parent","$scope","$compile","opt_scopeOptions"];function HE(a){(a=IE(a))&&(a=a.children().first().scope())&&a.windowCtrl&&a.windowCtrl.ml()}
function JE(a){var b=null,c=a?IE(a):angular.element(".js-window:not(.ng-hide)");if(c){c.removeClass("d-flex");c.addClass("d-none");var d=angular.element(".modal-backdrop");d&&d.addClass("d-none");b=function(){c.removeClass("d-none");c.addClass("d-flex");d&&d.removeClass("d-none")}}return b}function KE(a){a&&(a=a.is(".js-window")?a.children().scope():a.parents(".js-window").children().scope())&&a.windowCtrl.close()}
function IE(a){var b=angular.element(".js-window#"+a);0==b.length&&(b=angular.element('[key="'+a+'"]'));0==b.length&&(b=null);return b}function Iga(a,b){(a=IE(a))&&(a=a.children().first().scope())&&a.windowCtrl&&a.windowCtrl.scope.$broadcast("os.ui.window.params",b)}
function Jga(a,b,c){var d=b.getBoundingClientRect();b=d.x+20;d=d.y+20;if(c){c=c.getBoundingClientRect();var e=a.getBoundingClientRect();b+e.width>c.x+c.width&&(b=c.x);d+e.height>c.y+c.height&&(d=c.y)}$(a).css("left",b+"px");$(a).css("top",d+"px")}
function Kga(a){for(var b=$.makeArray($(".js-window")).sort(LE),c=0;c<b.length;c++)if(b[c]===a){b.unshift(b.splice(c,1));break}a=Eb(b,function(a){return $($(a).children()[0]).scope().modal?"modal":"standard"});a.modal&&a.modal.forEach(function(a,b){b=String(1049-b);$(a).draggable("option","zIndex",b);$(a).css("zIndex",b)});a.standard&&a.standard.forEach(function(a,b){b=String(990-b);$(a).draggable("option","zIndex",b);$(a).css("zIndex",b)})}
function LE(a,b){a=$(a).css("zIndex")||0;b=$(b).css("zIndex")||0;return a>b?-1:a<b?1:0}
function EE(a,b,c){y.call(this);this.scope=a;this.element=b;a.windowContainer=a.windowContainer||"#js-window__container";var d=angular.element(a.windowContainer);a.id||(a.id=cc());b[0].id=a.id;"center"==a.x&&(a.x=(d.width()-a.width)/2);if("center"==a.y){var e=Math.min($(window).height(),d.height());if("auto"==a.height){b.css("top","-20000px");var f=function(){if(!ME(this)){var c=b.height();a.y=(e-c)/2;b.css("top",a.y+"px")}this.fi()}.bind(this);var h=c(function(){E.ib(Hga,'Window READY event was not fired for "'+
a.label+'"!');k();f()},1E3);var k=a.$on("window.ready",function(){c.cancel(h);f()})}else a.y=(e-a.height)/2}0>a.x&&(a.x=d.width()-Number(a.width)+Number(a.x));0>a.y&&(a.y=d.height()-Number(a.height)+Number(a.y));this.scope.modal&&NE(this);a.disableDrag||(d={containment:a.windowContainer,handle:a.overlay?".js-window__header, .js-window-overlay-content":".js-window__header",start:this.Xx.bind(this),stop:this.Yx.bind(this),scroll:!1},b.draggable(d));if(a.minWidth&&a.maxWidth&&a.minWidth!=a.maxWidth||
a.minHeight&&a.maxHeight&&a.minHeight!=a.maxHeight)d={containment:a.windowContainer,minWidth:Number(a.minWidth)||200,maxWidth:Number(a.maxWidth)||window.screen.availWidth,minHeight:Number(a.minHeight)||100,maxHeight:Number(a.maxHeight)||window.screen.availHeight,handles:"nw, ne, sw, se",start:this.Xx.bind(this),stop:this.Yx.bind(this)},Cc(d,a.resizeOptions||{}),b.resizable(d);b.css("width",a.width+"px");d=a.height;"auto"==a.height?b.css("bottom","auto"):d+="px";b.css("height",d);ME(this)||(b.css("left",
a.x+"px"),"center"==a.y&&"auto"==a.height||b.css("top",a.y+"px"));this.j=new Tg;this.j.H("resize",this.rK,!1,this);this.g=NaN;this.s=!1;Yd(b[0],"mousedown",this.tA,!0,this);Yd(window,"mousedown",this.A,!0,this);a.overlay&&(Yd(b[0],"mouseover",this.B,!0,this),Yd(b[0],"mouseout",this.l,!0,this),this.l());this.scope.$watch("modal",this.lJ.bind(this));this.scope.$on("windowReConstrain",this.fi.bind(this));this.scope.$on("$destroy",this.dispose.bind(this));this.scope.active=!0;"center"==a.y&&"auto"==a.height||
this.fi();this.element.focus();c(function(){this.ml()}.bind(this))}w(EE,y);EE.$inject=["$scope","$element","$timeout"];EE.prototype.J=function(){EE.C.J.call(this);this.s||this.close(!0);de(window,"mousedown",this.A,!0,this);de(this.element[0],"mousedown",this.tA,!0,this);this.scope.overlay&&(de(this.element[0],"mouseover",this.B,!0,this),de(this.element[0],"mouseout",this.l,!0,this));this.scope.modal&&OE(this);Ma(this.j);this.scope=this.element=this.j=null};
function NE(a){if(!a.o){var b=$("body");a.o=b.append('<div class="modal-backdrop show"></div>');b.addClass("modal-open")}}function OE(a){a.o&&($("body").removeClass("modal-open"),$(".modal-backdrop").first().remove(),a.o=null)}EE.prototype.ml=function(){this.element&&Kga(this.element[0])};EE.prototype.bringToFront=EE.prototype.ml;
function ME(a){if(a.scope&&a.element){var b=a.scope.id;if(b&&(b=$.makeArray($(".js-window#"+b)).sort(LE),b=dca(b,function(a){return a!==this.element[0]}.bind(a))))return Jga(a.element[0],b,document.querySelector(a.scope.windowContainer||"#js-window__container")),!0}return!1}EE.prototype.A=function(){this.scope.active=!1;X(this.scope)};
EE.prototype.B=function(){var a=this.element.find(".js-window__header"),b=this.element.find(".ui-resizable-se");a&&(b.css("visibility","visible"),a.css("visibility","visible"),this.element.removeClass("modal-borderless"))};EE.prototype.l=function(){var a=this.element.find(".js-window__header");this.element.toggleClass(".ui-resizable-se");var b=this.element.find(".ui-resizable-se");a&&(b.css("visibility","hidden"),a.css("visibility","hidden"),this.element.addClass("modal-borderless"))};
EE.prototype.close=function(a){this.s=!0;var b=this.element.scope()||this.scope;a&&b.$broadcast("windowCancel",this.element);b.$broadcast("windowClosing",this.element);b.$emit("windowClose",this.element);a=this.element;this.Xa()||this.scope.$parent.$destroy();a.remove()};EE.prototype.close=EE.prototype.close;
EE.prototype.toggle=function(){if(!this.scope.modal){var a=this.element.find(".js-window__wrapper");isNaN(this.g)?(this.element.resizable("option","disabled",!0),this.g=this.element.outerHeight(),a.toggle(),a=this.element.find(".js-window__header"),this.element.height(a.outerHeight()),this.scope.collapsed=!0,this.element.find(".js-window__header").addClass("collapsed")):(this.element.height(this.g),this.g=NaN,a.toggle(),this.element.resizable("option","disabled",!1),this.fi(),this.scope.collapsed=
!1,this.element.find(".js-window__header").removeClass("collapsed"))}};EE.prototype.toggle=EE.prototype.toggle;EE.prototype.hide=function(){this.scope.id&&(JE(this.scope.id),C.dispatchEvent(new jE("toggleUI",this.scope.id)))};EE.prototype.hide=EE.prototype.hide;g=EE.prototype;g.dd=function(){};g.Xx=function(){this.scope.$emit("windowDragStart");angular.element("iframe").addClass("u-pointer-events-none")};
g.Yx=function(a,b){this.dd(a,b);this.scope.$emit("windowDragStop");"auto"==this.scope.height&&this.element.css("height","auto");angular.element("iframe").removeClass("u-pointer-events-none");this.fi()};g.lJ=function(a,b){void 0!==a&&a!=b&&(a?NE(this):OE(this))};g.tA=function(){this.scope.modal||this.ml();this.scope.active||(this.scope.active=!0,X(this.scope))};g.rK=function(){this.fi()};
g.fi=function(){var a=parseFloat(this.element.css("left").replace("px","")),b=parseFloat(this.element.css("top").replace("px","")),c=parseFloat(this.element.css("width").replace("px","")),d=parseFloat(this.element.css("height").replace("px","")),e=$(this.scope.windowContainer).offset().top,f=Dba(this.j);c>f.width&&(c=Math.max(f.width,parseFloat(this.scope.minWidth||this.scope.width||0)),this.element.css("width",c+"px"));d>f.height&&(d=Math.max(f.height,parseFloat(this.scope.minHeight||this.scope.height||
0)),this.element.css("height",d+"px"));0>a?this.element.css("left","0px"):a+c>f.width&&(a=Math.max(f.width-c,0),this.element.css("left",a+"px"));b<e?this.element.css("top",e+"px"):b+d>f.height&&(b=Math.max(f.height-d,e),this.element.css("top",b+"px"));if("auto"==this.scope.height){var h=0;mc(CE).forEach(function(a){h+=$(a).outerHeight()});a=f.height-h;this.element.find(".modal-content").css("max-height",a)}};g.AH=function(a,b){a=$(a.target).parents(".js-window");b.onClick(a)};
EE.prototype.onHeaderBtnClick=EE.prototype.AH;function PE(){FD.call(this);this.log=Lga;this.s=!1;this.Y()&&this.Y().H("map:ready",this.Tm,!1,this);this.o=null;this.A=new le(this.save,100,this);this.load()}w(PE,FD);wa(PE);var Lga=E.V("os.ui.query.AreaManager"),QE=1;g=PE.prototype;g.Tm=function(){this.s=!0;for(var a=HD(this),b=0,c=a.length;b<c;b++){var d=a[b];iu(d.X(),this.o);var e=d.get("shown");this.toggle(d,void 0!==e?e:!0)}RE.u().H("propertychange",this.Js,!1,this);this.Js()};g.Y=function(){return this.ha};
g.setMap=function(a){this.Y()&&(this.Y().M("map:ready",this.Tm,!1,this),this.s=!1,RE.u().M("propertychange",this.Js,!1,this));this.ha=a;this.Y()&&(this.Tm(),this.Y().H("map:ready",this.Tm,!1,this))};g.D=function(a){return""+a.D()};function SE(a,b,c){var d=c||!1;db(b,function(a){a.D()||a.ga("area_"+$b());a.get("temp")||a.get("title")||(a.set("temp",!0),a.set("title","temp area "+QE++));a.set("shown",d);this.eh(a,!0)},a);a.dispatchEvent(new U("areas"))}
g.add=function(a){a.D()||a.ga("area_"+$b());!a.get("title")&&a.get("name")?(a.set("temp",!0),a.set("title",a.get("name"))):a.get("temp")||a.get("title")||(a.set("temp",!0),a.set("title","temp area "+QE++));var b=this.eh(a);this.dispatchEvent(new U("add/edit",a));this.A.start();return b};
function TE(a,b){var c=b.X(),d=b.get("_originalGeometry");if(!c)return!1;var e=!1,f=c.T();if("Polygon"==f||"MultiPolygon"==f)c=UD(c),f=null,d&&(f=UD(d)),e=!0,b.sb(c),b.set("_originalGeometry",f||c);else try{var h=SD(c);h&&(b.sb(h),e=!0)}catch(k){E.error(a.log,"Error converting "+f+" to polygon:",k),e=!1}e&&a.pv(b);return e}g.pv=function(a){Qu(a.X())};function Mga(a){var b=UE;return a?eb(a,function(a){return null!=a&&TE(this,a)},b):null}
g.eh=function(a,b){b=b||!1;if(null!=a&&TE(this,a)){if(a.Ue("_node",!0),PE.C.eh.call(this,a)){if(this.s){var c=a.get("shown");b?VE(this,a,void 0!==c?c:!0):this.toggle(a,void 0!==c?c:!0)}return!0}}else At(Ct,"Area is invalid and cannot be used. Common problems include polygons that cross themselves and multipolygons with overlapping elements.",ss);return!1};function VE(a,b,c){if(b=a.get(b))c=void 0!==c?c:!XB(a.Y(),b),b.set("shown",c),c?XB(a.Y(),b)||(a.Cz(b),a.Y().ac(b)):a.Y().Fb(b),a.A.start()}
g.toggle=function(a,b){VE(this,a,b);if(a=this.get(a))this.dispatchEvent(new U("toggle",a)),a.dispatchEvent("toggle")};g.remove=function(a){var b=PE.C.remove.call(this,a);b&&this.Y()&&(this.Kn(a),this.Y().Fb(b),this.A.start());return b};g.clear=function(){for(var a=WE,b=HD(this),c=[],d=0;d<b.length;d++){var e=b[d];this.remove(e);c.push(e);(e=e.D()?a.getEntries(null,e.D()):[])&&XE(a,e)}return c};g.save=function(){return Af()};g.load=function(){this.dispatchEvent(new U("areas"));return Af()};
function Nga(a){var b=O.get("areas");if(b){var c=new DD;a.o=N;if(a=c.cg(b,{featureProjection:a.o}))for(b=0;b<a.length;b++)(c=a[b]?a[b].X():void 0)&&c.set("_normalized",!0,!0);return a}return null}g.Cz=function(a){a.yb(fE)};g.Js=function(){for(var a=HD(this),b=!1,c=0,d=a.length;c<d;c++)this.qA(a[c],!0)&&(b=!0);b&&this.Y().W("draw").O().ia()};
g.qA=function(a,b){var c=!1,d=RE.u().getEntries(null,a.D()),e=fE,f=this.Y().W("draw").O();if(d&&0<d.length){var h=YE(WE);h=nc(h);if(h=1==h.length?h[0]:null)for(var k=0,l=d.length;k<l;k++){if(d[k].layerId==h){e=d[k].includeArea?gE:hE;break}}else e=d[0].includeArea?gE:hE}d=a.Qb();h=a.D();d!==e&&h&&(a.yb(e),ym(f,h)&&(f.dispatchEvent(new wm("changefeature",a)),c=!0));c&&!b&&f.ia();return c};g.Vr=function(a){var b=this.Y().W("draw").O(),c=a.D();c&&ym(b,c)&&b.dispatchEvent(new wm("changefeature",a));b.ia()};
g.Kn=function(a){if((a=this.get(a))&&XB(this.Y(),a)){var b=WE.getEntries(void 0,a.D());0< !b.length?a.yb(fE):b[0].includeArea?a.yb(gE):a.yb(hE)}};g.pp=function(a){if((a=this.get(a))&&XB(this.Y(),a)){var b=$("#map-container");a&&(a.yb(iE),b.css("cursor","pointer"))}};function Oga(a){return!a.get("temp")}
function ZE(a,b){b={feature:a,columns:b||void 0};a=!UE.get(a)||a.get("temp")?"Save Area...":"Edit Area Details...";FE({label:a,x:"center",y:"center",width:400,height:"auto","show-close":!0,modal:!0},"<editarea></editarea>",void 0,void 0,void 0,b)}var UE=null;function $E(a){y.call(this);this.g=a;var b=WE;this.entries=a.D()?b.getEntries(null,a.D()):[];this.j=1<aF(b,a);this.l=0!==aF(b,a)%2;this.append=!0}w($E,y);g=$E.prototype;g.lb=!1;g.title="Add/Remove Area";g.Ba=null;g.state="ready";g.dj=function(){return"ready"!==this.state?(this.Ba="Command not in ready state.",!1):this.g?!0:(this.Ba="No area provided.",!1)};function bF(a,b){$E.call(this,a);this.o=b;this.title="Toggle area "+(b?"on":"off")}w(bF,$E);bF.prototype.Fa=function(){return this.dj()?(this.state="executing",UE.toggle(this.g,this.o),this.state="success",!0):!1};bF.prototype.Cb=function(){this.state="reverting";UE.toggle(this.g,!this.o);this.state="ready";return!0};var Pga={};function cF(a){$E.call(this,a);this.title="Remove area";a&&(a=a.get("title"))&&(this.title+=' "'+a+'"')}w(cF,$E);cF.prototype.Fa=function(){if(this.dj()){this.state="executing";var a=UE,b=WE;this.entries&&XE(b,this.entries);a.remove(this.g);this.state="success";return!0}return!1};cF.prototype.Cb=function(){this.state="reverting";var a=WE;UE.add(this.g);dF(a,this.entries);this.state="ready";return!0};function eF(a,b){this.scope=a;this.j=b.parent();a.$on("$destroy",this.destroy.bind(this))}eF.$inject=["$scope","$element"];eF.prototype.destroy=function(){this.j=this.scope=null};eF.prototype.show=function(){return this.j.hasClass("hovered")||this.j.hasClass("selected")||this.j.parent().hasClass("selected")};eF.prototype.show=eF.prototype.show;W.directive("areanodeui",[function(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-click="nodeUi.edit()"><i class="fa fa-fw c-glyph" ng-class="nodeUi.getTemp() ? \'fa-save\' : \'fa-pencil\'" title="{{nodeUi.getTemp() ? \'Save\' : \'Edit\'}}"></i></span><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the area"></i></span></span>',controller:fF,controllerAs:"nodeUi"}}]);
function fF(a,b){eF.call(this,a,b)}w(fF,eF);fF.$inject=["$scope","$element"];fF.prototype.BD=function(){return this.scope.item.ee().get("temp")};fF.prototype.getTemp=fF.prototype.BD;fF.prototype.remove=function(){var a=this.scope.item.ee();a&&(a=new cF(a),gF(hF.u(),a))};fF.prototype.remove=fF.prototype.remove;fF.prototype.Pc=function(){var a=this.scope.item.ee();a&&ZE(a)};fF.prototype.edit=fF.prototype.Pc;function iF(a){var b=null;if(a){a=zg(a);b=[];for(var c=0,d=a.length;c<d;c++)b.push(zl(a[c],!0).trim())}return b};function jF(a){jz.call(this);this.g=null;a&&this.cj(a)}w(jF,jz);g=jF.prototype;g.J=function(){jF.C.J.call(this);this.cj(null)};g.ee=function(){return this.g};g.cj=function(a){this.g&&xh(this.g,"toggle",this.sm,this);this.g=a;kF(this);this.g&&I(this.g,"toggle",this.sm,this)};function kF(a){a.ga(a.D());a.Da(a.ba());a.g&&(oz(a,a.g.get("description")||""),a.Ga(a.g.get("shown")?"on":"off"))}
g.Ga=function(a){if("both"!==a){var b=this.getState();jF.C.Ga.call(this,a);a=this.getState();b!=a&&this.g&&(b="off"!==a,a=this.g.get("shown"),b!==a&&(this.g.set("shown",b),this.g.dispatchEvent("toggle")))}};g.sm=function(){this.Ga(this.g.get("shown")?"on":"off")};g.D=function(){return this.g?this.g.D():jF.C.D.call(this)};g.ba=function(){return this.g?this.g.get("title")||"":jF.C.ba.call(this)};
g.je=function(){var a="";this.g&&(a+=this.g.get("title")||"",a+=" "+(this.g.get("description")||""),a+=" "+(this.g.get("tags")||""));return a};g.getTags=function(){if(this.g){var a=this.g.get("tags");if(a)return a?Nb(a).split(/\s*,\s*/):null}return null};g.ej=function(){UE.Y()&&(this.g.yb(iE),UE.Y().ac(this.g))};g.Jh=function(){UE.Y()&&UE.Y().Fb(this.g)};g.mb=function(){return!1};jF.prototype.isLoading=jF.prototype.mb;jF.prototype.lc=function(a){this.cj(a.ee());jF.C.lc.call(this,a)};function lF(a){jF.call(this,a);WE.H("propertychange",this.jx,!1,this)}w(lF,jF);P(lF,"os.ui.menu.IMenuSupplier");g=lF.prototype;g.J=function(){lF.C.J.call(this);WE.M("propertychange",this.jx,!1,this)};g.ix=function(){return mF};g.cj=function(a){if(a!==this.g){this.g&&xh(this.g,"toggle",this.sm,this);var b=this.g;this.g=a;kF(this);this.g?(this.j="<areanodeui></areanodeui>",I(this.g,"toggle",this.sm,this)):this.j="";this.dispatchEvent(new U("area",a,b))}else kF(this)};g.jx=function(){this.dispatchEvent(new U("icons"))};
g.Ga=function(a){if("both"!==a){var b=this.getState();nz(this,a);a=this.getState();b!=a&&this.g&&(b="off"!==a,a=this.g.get("shown"),b!==a&&(b=new bF(this.g,b),gF(hF.u(),b)))}};g.ej=function(){UE.pp(this.g)};g.Jh=function(){UE.Kn(this.g)};
g.Hc=function(){var a=this.ee();a=aF(WE,a.D());if(1==a){a="fa-ban text-danger";var b="This area is an exclusion"}else 2==a?(a="fa-circle u-text-yellow",b="This area is querying features"):3==a?(a="fa-times-circle text-warning",b="This area is being used for queries and exclusions"):(a="fa-circle-o",b="This area is being displayed on the map");return a?' <i class="fa '+a+'" title="'+b+'"></i> ':lF.C.Hc.call(this)};function nF(){A.call(this)}w(nF,A);g=nF.prototype;g.J=function(){Na(this.Xe);nF.C.J.call(this)};g.Xe=null;g.Zb=function(a){if(this.Xe=a){this.lb=!1;var b;var c=0;for(b=a.length;c<b;c++)a[c].lb&&(this.lb=!0);if(!this.title){var d=[];db(a,function(a){a.title&&d.push(a.title)});this.title="[ "+d.join(", ")+" ]"}}};g.title=null;g.state="ready";g.lb=!1;g.Ba=null;function oF(){A.call(this)}w(oF,nF);g=oF.prototype;g.kc=-1;
g.Zb=function(a){oF.C.Zb.call(this,a);this.kc=-1;this.state="ready";var b=a.length;if(!(0>=b)){for(var c=0;c<b;c++){var d=a[c];if("ready"===d.state&&0>this.kc)this.kc=c;else if("success"===d.state||"error"===d.state){if(0<=this.kc&&c>=this.kc)throw Error("os.command.SequenceCommand: illegal state: the first ready sub-command must follow all executed sub-commands: first ready command ["+this.kc+"]:"+a[this.kc].title+" precedes "+d.state+"command ["+c+"]:"+a[c].title);"error"!==this.state&&(this.state=
d.state)}}0<=this.kc&&this.kc<a.length&&"error"!==this.state?this.state="ready":this.kc=a.length}};g.Fa=function(){if("ready"!==this.state)return!1;this.state="executing";return this.Zw()};g.Cb=function(){if("success"!==this.state)return!1;this.kc--;this.state="reverting";return this.ax()};
g.Zw=function(){for(var a=this.Xe,b=a.length;this.kc<b&&"executing"===this.state;){var c=a[this.kc],d=null;c.lb&&(d=c,d.Ra("executed",this.Vv,!1,this));var e=!1;try{(e=c.Fa())||pF(this)}catch(f){this.Ba="Error executing command "+c.title+": "+String(f)}if(!e)return d&&d.M("executed",this.Vv,!1,this),this.state="error",this.dispatchEvent(new z("executed")),!1;if(c.lb)return!0;this.kc++}this.state="success";this.Ba=null;this.dispatchEvent(new z("executed"));return!0};
g.Vv=function(){"executing"===this.state&&(pF(this),"success"!==this.Xe[this.kc].state?(this.state="error",this.dispatchEvent(new z("executed"))):(this.kc++,ke(this.Zw.bind(this))))};
g.ax=function(){for(;-1<this.kc&&"reverting"===this.state;){var a=this.Xe[this.kc];if(a.lb){var b=a;b.Ra("reverted",this.IJ,!1,this)}b=!1;try{(b=a.Cb())||pF(this)}catch(c){this.Ba="Error reverting command "+a.title+": "+String(c)}if(!b)return this.state="error",this.dispatchEvent(new z("reverted")),!1;if(a.lb)return!0;this.kc--}this.kc=0;this.state="ready";this.Ba=null;this.dispatchEvent(new z("reverted"));return!0};
g.IJ=function(){"reverting"===this.state&&(pF(this),"ready"!==this.Xe[this.kc].state?(this.state="error",this.dispatchEvent(new z("reverted"))):(this.kc--,ke(this.ax.bind(this))))};function pF(a){var b=a.Xe[a.kc];"executing"===a.state?a.Ba="error"===b.state?b.Ba||"Command "+(b.title||a.title+"["+a.kc+"]")+" failed":"Executing":"reverting"===a.state?a.Ba="error"===b.state?b.Ba||"Reverting command "+(b.title||a.title+"["+a.kc+"]")+" failed":"Reverting":a.Ba=null};var Qga={Point:Jk,LineString:yr,LinearRing:Ik,Polygon:Rk,MultiPoint:Pr,MultiLineString:Ar,MultiPolygon:Rr,Circle:Jr};function qF(a,b){var c=new ek,d=a.Ud;fk(c,d);var e=a.X();null!=e&&c.sb(rF(e));if(b){e=0;for(var f=b.length;e<f;e++){var h=b[e];null!=a.la[h]&&h!=d&&(c.la[h]=a.la[h])}}return c}function rF(a){var b=a.T();b=Qga[b];return!b||a instanceof b?a.clone():b.prototype.clone.call(a)};function sF(a,b,c,d,e){UE.get(a)||(a=qF(a,tF));$E.call(this,a);this.entries=a.D()?WE.getEntries(null,a.D(),null,null,!0):[];this.j=void 0!==b?b:this.j;this.l=void 0!==c?c:this.l;this.append=void 0!==d?d:this.append;this.title="Add "+(this.j?"query ":this.l?"exclusion ":"")+"area";a&&(a=a.get("title"))&&(this.title+=' "'+a+'"');this.s=void 0!==e?e:["*"];this.o=!1}w(sF,$E);
sF.prototype.Fa=function(){if(this.dj()){this.state="executing";var a=UE,b=WE;this.entries&&XE(b,this.entries);a.get(this.g)||(this.o=a.add(this.g));(this.j||this.l)&&db(this.s,function(a){uF(b,a,this.g.D(),"*",this.j)},this);this.state="success";return!0}return!1};sF.prototype.Cb=function(){this.state="reverting";var a=UE,b=WE;(this.j||this.l)&&vF(b,void 0,this.g.D());this.entries&&this.entries.length&&dF(b,this.entries);this.o&&a.remove(this.g);this.state="ready";return!0};function wF(a,b,c){z.call(this,a,c);this.j=b}w(wF,z);wF.prototype.j=null;function hF(){A.call(this);this.j=[];this.s=50;this.B=[];this.l=this.g=-1;this.G=[]}w(hF,A);wa(hF);var xF=E.V("os.command.CommandProcessor");function yF(a){return a.g!=a.l||gb(a.j,function(a){return"executing"===a.state})}function zF(a,b){if(yF(a))throw Error("Setting the max queue size while processing asynchronous commands is not allowed!. Consider having the command run a job instead.");a.s=b;AF(a);a.dispatchEvent(new z("history_limit_changed"))}
hF.prototype.jo=function(){var a=this.s;zF(this,0);zF(this,a)};function gF(a,b){if("error"===b.state)var c=!1;else{c=!0;for(var d=0,e=a.G.length;d<e&&c;d++)a.G[d](b)||(c=!1)}if(!c)return!1;if(yF(a))return E.za(xF,'Processing is under way. Added "'+b.title+'" command to temporary queue.'),a.B.push(b),!0;a.g<a.j.length&&(a.j.length=a.g+1);a.l++;"ready"===b.state?BF(a,b):a.o(null,b);return!0}
function AF(a){for(;a.j.length>a.s;){var b=a.j.shift();try{Ma(b)}catch(c){E.error(xF,'error disposing command "'+b.title+'": '+String(c))}-1<a.g&&a.g--}a.l=a.g}hF.prototype.Mk=function(a){yF(this)?this.l=Math.min(this.j.length-1,Math.max(-1,a)):(this.l=Math.min(this.j.length-1,Math.max(-1,a)),this.l<this.g?CF(this,this.j[this.g]):this.l>this.g&&BF(this,this.j[this.g+1]))};
function BF(a,b){E.info(xF,'executing "'+b.title+'" command');b.lb&&b.Ra("executed",a.o,!1,a);a.dispatchEvent(new wF("command_executing",b));var c=!1;try{c=b.Fa()}catch(d){c=!1,E.error(xF,'Error executing command "'+b.title,d)}c?b.lb||a.o(null,b):(b.lb&&b.M("executed",a.o,!1,a),b.state="error",a.o(null,b))}
function CF(a,b){a.dispatchEvent(new wF("command_reverting",b));E.info(xF,'reverting "'+b.title+'" command');b.lb&&b.Ra("reverted",a.A,!1,a);var c=!1;try{c=b.Cb()}catch(d){c=!1,E.error(xF,'Error reverting command "'+b.title,d)}c?b.lb||a.A(null,b):(b.lb&&b.M("reverted",a.A,!1,a),b.state="error",a.A(null,b))}function DF(a){0<a.B.length&&(a.j.length=a.g+1,gF(a,a.B.shift()))}
hF.prototype.o=function(a,b){a=b||a.target;this.dispatchEvent(new wF("command_executed",a));"success"===a.state?(this.g++,this.g==this.j.length&&(this.j.push(a),this.l>=this.g&&AF(this),E.info(xF,'Added "'+a.title+'" command to history.'),this.dispatchEvent(new wF("command_added",a)))):(this.l--,a===this.j[this.g+1]?(this.j.splice(this.g+1,1),E.error(xF,'Removed "'+a.title+'" ['+this.g+1+"] command from history after error.")):a.Ba&&E.error(xF,"Error running command "+a.title+" - "+a.Ba));this.g<
this.l?BF(this,this.j[this.g+1]):0<this.B.length?DF(this):this.g>this.l&&CF(this,this.j[this.g])};hF.prototype.A=function(a,b){a=b||a.target;this.g--;this.dispatchEvent(new wF("command_reverted",a));this.g>this.l?CF(this,this.j[this.g]):DF(this)};var EF=hF.u();function FF(a,b){this.id=a||"";this.name=a||"";this.field=b||a||"";this.type="string";this.internal=!1;this.sortable=this.resizable=!0;this.minWidth=30;this.maxWidth=Number.MAX_VALUE;this.width=0;this.rerenderOnResize=!1;this.cssClass=this.headerCssClass="";this.selectable=this.focusable=this.defaultSortAsc=!0;this.asyncPostRender=this.behavior=this.formatter=null;this.visible=!0;this.visprotected=this.temp=!1;this.derivedFrom=this.toolTip="";this.userModified=!1}
FF.prototype.sa=function(a){a||(a={});a.id=this.id;a.name=this.name;a.field=this.field;a.type=this.type;a.resizable=this.resizable;a.sortable=this.sortable;a.minWidth=this.minWidth;a.maxWidth=this.maxWidth;a.width=this.width;a.rerenderOnResize=this.rerenderOnResize;a.headerCssClass=this.headerCssClass;a.cssClass=this.cssClass;a.defaultSortAsc=this.defaultSortAsc;a.focusable=this.focusable;a.selectable=this.selectable;a.behavior=this.behavior;a.visible=this.visible;a.visprotected=this.visprotected;
a.toolTip=this.toolTip;a.derivedFrom=this.derivedFrom;a.userModified=this.userModified;a.formatter=null;a.asyncPostRender=null;return a};
FF.prototype.restore=function(a){this.id=a.id;this.name=a.name;this.field=a.field;this.type=a.type||"string";this.resizable=a.resizable;this.sortable=a.sortable;this.minWidth=a.minWidth;this.maxWidth=a.maxWidth;this.width=a.width;this.rerenderOnResize=a.rerenderOnResize;this.headerCssClass=a.headerCssClass;this.cssClass=a.cssClass;this.defaultSortAsc=a.defaultSortAsc;this.focusable=a.focusable;this.selectable=a.selectable;this.behavior=a.behavior;this.visible=a.visible;this.visprotected=a.visprotected;
this.toolTip=a.toolTip;this.derivedFrom=a.derivedFrom;this.userModified=a.userModified;this.asyncPostRender=this.formatter=null};FF.prototype.clone=function(){var a=new FF;this.sa(a);a.formatter=this.formatter;a.asyncPostRender=this.asyncPostRender;return a};function GF(a,b,c){z.call(this,a,c);this.j=b}w(GF,z);GF.prototype.getContext=function(){return this.j};var Rga=["group","submenu","separator"];function HF(a){this.type=a.type||"item";this.eventType=a.eventType;this.qa=a.qa;this.label=a.label;this.visible=null!=a.visible?a.visible:!0;this.enabled=null!=a.enabled?a.enabled:!0;this.selected=a.selected;this.da=a.da;this.tooltip=a.tooltip;this.ig=a.ig;this.sort=a.sort||0;this.lo=null!=a.lo?a.lo:!0;this.children=null!=a.children?a.children.map(function(a){return new HF(a)}):void 0;this.Aa=a.Aa;this.ya=a.ya}
HF.prototype.find=function(a){if(this.label===a||this.eventType===a)return this;var b=null;if(this.children)for(var c=0,d=this.children.length;c<d&&!(b=this.children[c].find(a));c++);return b};HF.prototype.R=function(a){var b=a instanceof HF?a:new HF(a);this.children||(this.children=[]);if(a=ib(this.children,function(a){return a.type==b.type&&a.eventType==b.eventType&&a.label==b.label&&a.qa==b.qa&&a.tooltip==b.tooltip&&a.sort==b.sort}))return a;this.children.push(b);return b};
HF.prototype.removeChild=function(a){var b=!1;this.children&&(b=sb(this.children,function(b){return b.eventType===a||b.label===a}),this.children.length||(this.children=void 0));return b};
HF.prototype.render=function(a,b){this.Aa&&this.Aa(a,b);var c=this.visible,d=this.enabled,e=null!=this.type?this.type:"item",f=null!=this.tooltip?this.tooltip:"",h="",k="";if(("root"===e||"submenu"===e||"group"===e)&&this.children){this.children.sort(Sga);for(var l=0,m=this.children.length;l<m;l++)k+=this.children[l].render(a,b)}if("root"===e)return k;k||"group"!==e&&"submenu"!==e||(c=!1);if(!c)return h;h+="<li";if("separator"===e)return h+">-</li>";a=[];b="submenu"!==e&&"group"!==e;"group"===e&&
(this.label?a.push("dropdown-header"):a.push("u-dropdown-header__empty"));d||a.push("disabled");b&&a.push("dropdown-item");0<a.length&&(h+=' class="'+a.join(", ")+'"');b&&(h+=' evt-type="'+(this.eventType||this.label)+'"');h=h+((f?' title="'+f+'"':"")+">")+"<div>";this.ig&&(h+='<span class="text-muted d-inline-block float-right pl-2">'+this.ig+"</span>");"check"===e&&(h+='<i class="fa fa-fw fa-'+(this.selected?"check-":"")+'square-o"></i>');"radio"===e&&(h+='<i class="fa fa-fw fa-'+(this.selected?
"dot-":"")+'circle-o"></i>');if(this.da)for(l=0,m=this.da.length;l<m;l++)h+=this.da[l];h+='<span class="text-truncate">'+this.label+"</span>";h=h+"</div>"+("submenu"===e?"<ul>":"</li>")+k;"submenu"===e&&(h+="</ul></li>");"group"===e&&(h+="<li>-</li>");return h};function Sga(a,b){return Bb(a.sort,b.sort)||Bb(a.label,b.label)};function IF(a){A.call(this);this.B=a;this.o=void 0;this.g={};this.s=void 0;this.A=new le(this.KK,25,this);this.l=!1}w(IF,A);g=IF.prototype;g.J=function(){IF.C.J.call(this);this.close();this.A.dispose()};g.Ha=function(){return this.B};
g.Sm=function(a){if(!$(a.target).closest("#menu").length){var b=this.g.of,c=this.g.of,d="string"===typeof b?b:"";try{var e=$(a.target).closest(b[0]).length||$(a.target).closest(c).length}catch(f){e=$(a.target).closest(d).length?!0:!1}e&&"#map-container"!=b&&".c-svg-timeline"!=b?this.close(!1,!0):this.close()}};
g.open=function(a,b,c,d){if(this.l)this.close(d);else if(this.close(d),this.o=a||void 0,this.g=b||{},this.s=c||this,a=this.Ha().render(this.o,this.s),a=('<ul id="menu" class="c-menu dropdown-menu show">'+a+"</ul>").replace(/<ul><li>-<\/li>/g,"<ul>"),a=a.replace(/<li>-<\/li><\/ul>/g,"</ul>"),/<li(\s|>)/.test(a)){this.j=$(a);this.g.collision=this.g.collision||"fit";$(document.body).append(this.j.menu({items:"> :not(.dropdown-header)",select:this.II.bind(this)}));if(a=Hg(this.g.of[0],"navbar"))a=eb(a.className.split(" "),
function(a){return-1!=a.indexOf("bg-")}),a.length&&this.j.wrap('<div id="js-menu__wrapper" class="'+a.join(" ")+'"></div>');this.j.position(this.g);this.A.start();(null!=d?d:1)&&this.dispatchEvent("menu:open");this.l=!0;X(Uy.get("$rootScope"))}};g.KK=function(){JF(this);var a=document;Yd(a,"mousedown",this.Sm,!0,this);Yd(a,"pointerdown",this.Sm,!0,this)};function JF(a){var b=document;de(b,"mousedown",a.Sm,!0,a);de(b,"pointerdown",a.Sm,!0,a)}
g.II=function(a,b){(b=b.item.attr("evt-type"))&&(a=this.Ha().find(b))&&a.enabled&&-1===Rga.indexOf(a.type)&&(b=new GF(b,this.o,this.s),a.ya?a.ya(b):this.dispatchEvent(b),a.qa&&Q(R.u(),a.qa,1),a.lo&&this.close())};g.close=function(a,b){this.j&&((null!=a?a:1)&&C&&C.dispatchEvent(KF),this.j.unwrap("#js-menu__wrapper"),this.j.remove(),this.j=null);this.o=void 0;this.g={};this.s=void 0;JF(this);this.l=b?this.l:!1;X(Uy.get("$rootScope"))};
g.dispatchEvent=function(a){var b=IF.C.dispatchEvent.call(this,a);a=a.defaultPrevented?!1:C.dispatchEvent(a);return b||a};function LF(){this.description="";this.g={}}LF.prototype.fb=function(a){this.description=a};LF.prototype.qb=function(){return this.description};function MF(){LF.call(this)}w(MF,LF);
MF.prototype.Fa=function(a){var b=NF(this,a);a={target:"_blank"};var c=window;var d=b instanceof Cf?b:Gf("undefined"!=typeof b.href?b.href:String(b));b=a.target||b.target;var e=[];for(f in a)switch(f){case "width":case "height":case "top":case "left":e.push(f+"="+a[f]);break;case "target":case "noopener":case "noreferrer":break;default:e.push(f+"="+(a[f]?1:0))}var f=e.join(",");ld()&&c.navigator&&c.navigator.standalone&&b&&"_self"!=b?(f=c.document.createElement("A"),d instanceof Cf||d instanceof Cf||
(d=d.nf?d.ue():String(d),Ff.test(d)||(d="about:invalid#zClosurez"),d=Hf(d)),f.href=Ef(d),f.setAttribute("target",b),a.noreferrer&&f.setAttribute("rel","noreferrer"),a=document.createEvent("MouseEvent"),a.initMouseEvent("click",!0,!0,c,1),f.dispatchEvent(a)):a.noreferrer?(c=c.open("",b,f),a=Ef(d),c&&(Laa&&Ub(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),c.opener=null,ve("b/12014412, meta tag with sanitized URL"),a='<META HTTP-EQUIV="refresh" content="0; url='+Sb(a)+'">',a=Xf(a,null),c.document.write(Vf(a)),
c.document.close())):(c=c.open(Ef(d),b,f))&&a.noopener&&(c.opener=null)};MF.prototype.matches=function(a,b,c){try{if(null!=a){var d=a.sourceId;var e=a.sourceUrl}if(this.Za&&this.qb()){var f=this.g.val,h=this.g.col,k=this.g.url,l=this.g.id;return d&&l&&!l.test(d)||e&&k&&!k.test(e)||b&&h&&!h.test(b.j())&&!h.test(b.S())||f&&!f.test(c?c.toString():"")?!1:!0}return!1}catch(m){return!1}};MF.prototype.Gl=function(a){return NF(this,a)};
function NF(a,b){var c=a.g.val;c&&(c=c.exec(b))&&c[0]&&(b=c[0]);c=a.g.search;var d=a.g.replace;b&&c&&null!==d&&(b=b.replace(c,d));return a.Za.replace("%s",b)};W.directive("columnactions",[function(){return{restrict:"E",transclude:!0,templateUrl:"v1542394219/views/columnactions/columnactionprompt.html",controller:OF,controllerAs:"columnActionPrompt"}}]);function OF(a,b){this.v=a;this.K=b;this.matched=this.v.matched;a.$on("$destroy",this.g.bind(this))}OF.$inject=["$scope","$element"];OF.prototype.g=function(){this.v=this.K=null};OF.prototype.AC=function(a,b){a.Fa(b)};OF.prototype.executeMatch=OF.prototype.AC;OF.prototype.qb=function(a){return a.qb()};
OF.prototype.getDescription=OF.prototype.qb;OF.prototype.close=function(){KE(this.K)};OF.prototype.close=OF.prototype.close;function PF(a,b,c){a={matched:a,colDef:c,value:b,doneText:"Close",doneIcon:"fa fa-check"};b={label:Zb("Select a Column Action for ",c.S()," = ",b),icon:"fa fa-action",x:"center",y:"center",width:"450",height:"350",modal:"true","show-close":"true","no-scroll":"true"};FE(b,'<columnactions class="d-flex flex-fill"></columnactions>',void 0,void 0,void 0,a)};function QF(){A.call(this);this.g={};var a=O.get("columnActions");if(a)for(var b in a){var c,d=c=void 0,e=a[b];if(e)switch(e.type){case "url":var f=d=new MF,h=e.regex;for(c in h)f.g[c]="replace"!=c?new RegExp(h[c]):h[c];d.fb(e.description);d.Za=e.action}(c=d)&&(this.g[b]=c)}}w(QF,A);wa(QF);QF.prototype.pi=function(a,b,c){var d=[],e;for(e in this.g){var f=this.g[e];f&&f.matches(a,b,c)&&d.push(f)}return d};function RF(a){if("object"!==typeof a){if(null!=a&&Bz.test(a)&&!Tga.test(a)){var b="",c=a.split(" "),d=1;1===c.length?Bz.test(a)&&(c=Vy(a),b=Fz(c,"_blank","slick-cell-link",c)):db(c,function(a){Bz.test(a)&&(a=Vy(String(a)),a=Fz(a,"_blank","slick-cell-link",a,"["+d+"]"),d++);b=b.concat(a)+" "});""!==b&&(a=b.trim())}}else a=Ov(a,"os.time.TimeInstant")?a.toString():"";return a};function SF(a,b){this.g=a;this.l=b}SF.prototype.S=function(){return this.l||this.g.name};SF.prototype.j=function(){return this.l||this.g.field};function Uga(a,b,c,d,e){b=$(b).find(".col-act-mult");0<b.length&&(c=b.data().colvalue,b.click(Fa(Vga,c,e,{sourceId:a.sourceId})))}function Vga(a,b,c,d){null==c&&(c={});b=new SF(b,d.value);c=QF.u().pi(c,b,a);PF(c,a,b)};function TF(a,b,c){return c?c:""}function Wga(a,b,c){return c?'<i class="fa fa-circle" style="color:'+c+'"></i>':'<i class="fa fa-adjust c-formatter__adjust" title="Multiple Colors Present"></i>'}var Tga=/<a /;function UF(a,b,c,d,e,f){c=RF(c);a=(f||Xga)(a,b,c,d,e,!0);return Zb(c,a)}
function Xga(a,b,c,d,e,f){a="";!0!==f&&(a=c);f=QF.u().pi(null,new SF(d),c);1===f.length?a=Zb(a," <div ",'class="col-act col-act-single d-inline-block" data-colvalue="',c,'">','<a class="os-colact-anchor" href="',f[0].Gl(c),'" target="_blank">','<i class="fa fa-external-link-square" title="',f[0].qb(),'"></i></a></div>'):1<f.length&&(a=Zb(a," <div ",'class="col-act col-act-mult d-inline-block" data-colvalue="',c,'">','<span title="Multiple Column Actions" ','class="fa-stack mult-colaction align-baseline">',
'<i class="fa fa-square-o fa-stack-1x c-formatter__column-action-square"></i>','<i class="fa fa-stack fa-external-link-square"></i></span></div>'),d.asyncPostRender=Fa(Uga,e));return a};var VF={TIME:{order:-95,width:Wy("0000-00-00 00:00:00Z","ui-widget").width+10},MGRS:{order:-90,width:Wy("00WWW0000000000","ui-widget").width+10},LAT_DMS:{order:-85,width:Wy("00\u00b0 00' 00.00\" N","ui-widget").width+10},LON_DMS:{order:-84,width:Wy("000\u00b0 00' 00.00\" W","ui-widget").width+10},LAT:{order:-83,width:Wy("-00.000000","ui-widget").width+10},LON:{order:-82,width:Wy("-000.000000","ui-widget").width+10},LAT_DDM:{order:-81,width:Wy("00\u00b0 00.00' N","ui-widget").width+10},LON_DDM:{order:-80,
width:Wy("000\u00b0 00.00' W","ui-widget").width+10},ALTITUDE:{order:-79,width:Wy("-000000.000","ui-widget").width+10},SEMI_MAJOR:{order:-78,width:Math.max(Wy("-000.000000","ui-widget").width,Wy("SEMI_MAJOR","ui-widget ui-state-default").width+20)},SEMI_MINOR:{order:-77,width:Math.max(Wy("-000.000000","ui-widget").width,Wy("SEMI_MINOR","ui-widget ui-state-default").width+20)},ORIENTATION:{order:-76,width:Math.max(Wy("-000.000000","ui-widget").width,Wy("ORIENTATION","ui-widget ui-state-default").width+
20)},Name:{order:-60}};function WF(a){var b=a.header?20:0;if(!a.width){var c=VF[a.name];a.width=c&&c.width?c.width+b:Math.max(80,Wy(a.name).width+b+20)}}function XF(a,b){WF(a);WF(b);var c=VF[a.name],d=VF[b.name];c||(c=VF[a.derivedFrom]);d||(d=VF[b.derivedFrom]);return Bb(c?c.order:0,d?d.order:0)}function YF(a,b){return Bb(a.name,b.name)}function ZF(a,b){return Pb(a.name,b.name)}function $F(a){this.visible=!!a&&!!a.qe}
function Yga(a){var b=this.visible=!1;if(a&&a.qe&&a.columns)for(var c=0;c<a.columns.length;c++)if(a.columns[c].visible)if(b){this.visible=!0;break}else b=!0}function aG(a,b){for(var c=null,d=0,e=a.length;d<e;d++)if(a[d].field==b||a[d].name==b){c=a[d];break}return c}function bG(a,b,c){return c[a]==b}function Zga(a,b,c){return b[a]==c[a]||b[a]>c[a]?1:-1}function cG(a){return a.userModified}
function $ga(a,b){var c={};a.forEach(function(a,b){c[a.name]={qe:a,index:b}});b.forEach(function(a){var b=c[a.name];b&&a.restore(b.qe)});b.sort(function(a,b){a=c[a.name];b=c[b.name];return a&&b?Bb(a.index,b.index):a?-1:b?1:0})};W.directive("validationMessage",[function(){return{restrict:"E",replace:!0,scope:{target:"="},templateUrl:"v1542394219/views/util/validationmessage.html",controller:dG,controllerAs:"ctrl"}}]);function dG(a){this.v=a}dG.$inject=["$scope","$element"];dG.prototype.th=function(){return this.v.target&&!uc(this.v.target.$error)&&this.v.target.$dirty};dG.prototype.hasError=dG.prototype.th;W.directive("basicinfo",[function(){return{restrict:"E",replace:!0,scope:{config:"=",columns:"=?",help:"=?"},templateUrl:"v1542394219/views/im/basicinfo.html",controller:eG,controllerAs:"info"}}]);function eG(a){this.scope=a;this.tagsSample=this.descSample=this.titleSample="";a.$watch("columns",this.g.bind(this))}eG.$inject=["$scope"];var aha=/(name|title)$/i,bha=/^desc(r(i(p(t(i(o(n)?)?)?)?)?)?)$/i;
eG.prototype.g=function(a){this.scope&&this.scope.config&&(a?(fG(this,"titleColumn",a,aha),fG(this,"descColumn",a,bha),fG(this,"tagsColumn",a)):(this.scope.config.titleColumn=null,this.scope.config.descColumn=null,this.scope.config.tagsColumn=null),this.oA())};
function fG(a,b,c,d){if(a.scope&&a.scope.config){if(a.scope.config[b]){var e=Fa(bG,"field",a.scope.config[b].field);c.some(e)||(a.scope.config[b]=null)}if(!a.scope.config[b]&&d)for(e=0;e<c.length;e++){var f=c[e];d.test(f.name)&&(!a.scope.config[b]||f.name.length<a.scope.config[b].name.length)&&(a.scope.config[b]=f)}}}
eG.prototype.oA=function(){this.scope&&this.scope.config&&(this.titleSample=gG(this,this.scope.config.titleColumn),this.descSample=gG(this,this.scope.config.descColumn),this.tagsSample=gG(this,this.scope.config.tagsColumn))};eG.prototype.updateSampleText=eG.prototype.oA;
function gG(a,b){if(b&&b.field&&a.scope.config){var c="<no data>";if((a=a.scope.config.features||a.scope.config.preview)&&0<a.length)for(var d=Math.min(a.length,100),e=0;e<d;e++){var f=$A(a[e],b.field);if(f){c=f;break}}return c}return""};function hG(){SC.call(this);this.value=null;this.replace=!0}w(hG,SC);g=hG.prototype;g.D=function(){return"Static"};g.ba=function(){return"Set "+this.ja+" to "+this.value};g.Fa=function(a){a&&this.ja&&(this.replace||null==$A(a,this.ja))&&aB(a,this.ja,this.value)};g.clone=function(){var a=hG.C.clone.call(this);a.value=this.value;a.replace=this.replace;return a};g.sa=function(a){a=hG.C.sa.call(this,a);a.value=this.value;a.replace=this.replace;return a};
g.restore=function(a){hG.C.restore.call(this,a);this.value=a.value;this.replace=a.replace};var iG={merge:"Combines all imported areas into a single area.",title:"Custom title given to all imported areas.",titleColumn:"Column used to apply titles to all imported areas. If an imported item doesn't have this field defined, a generic title will be given. You may also choose to apply a custom title to imported areas.",description:"Description applied to all imported areas.",descColumn:"Column used to apply descriptions to all imported areas. If an imported item doesn't have this field defined, the description will be left blank. You may also choose to apply a custom description to imported areas.",
tags:"Comma-delimited list of tags to apply to all imported areas. Tags can be used to group or search areas in the Areas tab of the Layers window.",tagsColumn:"Column used to apply tags to all imported areas. Tags can be used to group or search areas in the Areas tab of the Layers window.  If an imported item doesn't have this field defined, the tags will be left blank. You may also choose to provide your own custom tags."},tF="title name description tags geometry _originalGeometry interpolationMethod".split(" ");
function jG(a,b){b.forEach(function(b){b.Fa(a);b instanceof UC&&"title"==b.g&&!a.get("title")&&a.set("title","No "+b.ja)});a.get("title")&&a.set("name",void 0)}
function kG(a){var b=[];if(a){if(a.titleColumn&&a.titleColumn.field){var c=new UC;c.A=!0;c.g="title";c.ja=a.titleColumn.field;b.push(c)}else a.title&&(c=new hG,c.ja="title",c.value=a.title||"No Title Provided",b.push(c));a.descColumn&&a.descColumn.field?(c=new UC,c.A=!0,c.g="description",c.ja=a.descColumn.field,b.push(c)):a.description&&(c=new hG,c.ja="description",c.value=a.description,b.push(c));a.tagsColumn&&a.tagsColumn.field?(c=new UC,c.A=!0,c.g="tags",c.ja=a.tagsColumn.field,b.push(c)):a.tags&&
(c=new hG,c.ja="tags",c.value=a.tags,b.push(c))}return b};function lG(a,b,c){this.scope=a;this.element=b;this.config=a.config;this.loading=!1;this.help=iG;a.$on("$destroy",this.dispose.bind(this));c(function(){a.$emit("window.ready")})}w(lG,y);lG.$inject=["$scope","$element","$timeout"];lG.prototype.J=function(){lG.C.J.call(this);this.element=this.scope=null};lG.prototype.close=function(){KE(this.element)};lG.prototype.close=lG.prototype.close;lG.prototype.finish=function(){this.loading=!0};lG.prototype.finish=lG.prototype.finish;W.directive("editarea",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/query/editarea.html",controller:mG,controllerAs:"ctrl"}}]);
function mG(a,b,c){lG.call(this,a,b,c);this.config=a.config={title:null,description:null,tags:null};if(b=this.scope.feature)this.config.features=[b],b.get("title")?this.config.title=b.get("title"):this.config.title=b.get("name"),this.config.description=b.get("description"),this.config.tags=b.get("tags");c(function(){a.$emit("window.ready")})}w(mG,lG);mG.$inject=["$scope","$element","$timeout"];
mG.prototype.accept=function(){var a=this.scope.feature;if(a){var b=kG(this.config);jG(a,b);a.set("temp",void 0);b=PE.u();b.get(a)?b.add(a):(a=new sF(a),gF(hF.u(),a))}this.close()};mG.prototype.accept=mG.prototype.accept;W.directive("mergeareas",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/query/mergeareas.html",controller:nG,controllerAs:"ctrl"}}]);
function nG(a,b,c){mG.call(this,a,b,c);this.log=cha;this.help={title:"Title given to the merged area.",description:"Description applied to the merged area.",tags:"Comma-delimited list of tags to apply to the merged area. Tags can be used to group or search areas in the Areas tab of the Layers window.",replace:"If checked, selected areas will be removed from Areas and replaced with the merged area."};this.replace=!1;this.g=null;if(a=a.features)try{var d=a.map(FA).filter(CA),e=WD(d);e&&(this.g=T.u().ac(new ek(e),
oG))}catch(f){E.error(this.log,"Failed merging features:",f)}}w(nG,mG);nG.$inject=["$scope","$element","$timeout"];var cha=E.V("os.query.ui.MergeAreasCtrl");nG.prototype.J=function(){nG.C.J.call(this);this.g&&(T.u().Fb(this.g),this.g=null)};
nG.prototype.accept=function(){var a=this.scope.features;if(a&&0<a.length){var b=a.map(function(a){return a.X()}).filter(CA),c=WD(b);if(c){b=[];if(this.replace)for(var d=0;d<a.length;d++)b.push(new cF(a[d]));a=this.scope.feature=new ek(c);c=kG(this.config);jG(a,c);b.push(new sF(a));1<b.length?(a=new oF,a.Zb(b),a.title="Merge Areas into "+this.config.title,gF(hF.u(),a)):gF(hF.u(),b[0])}else At(Ct,"Merging areas failed! Please see the log for more details.",rs)}else At(Ct,"Merging areas failed! List of areas to merge is empty.",
rs);this.close()};nG.prototype.accept=nG.prototype.accept;function pG(a,b){$E.call(this,a);this.s=this.o=void 0;UE.get(a)&&(this.o=b,this.s=a.X());this.title="Modify area";a&&(a=a.get("title"))&&(this.title+=' "'+a+'"')}w(pG,$E);pG.prototype.Fa=function(){return this.dj()?(this.state="executing",this.g.set("_originalGeometry",void 0),this.g.sb(this.o),UE.remove(this.g),UE.add(this.g),this.state="success",!0):!1};
pG.prototype.Cb=function(){this.state="reverting";this.g.set("_originalGeometry",void 0);this.g.sb(this.s);UE.remove(this.g);UE.add(this.g);this.state="ready";return!0};pG.prototype.dj=function(){return this.s?this.o?pG.C.dj.call(this):(this.Ba="No new area provided.",!1):(this.Ba="Original area unknown.",!1)};function qG(){return{restrict:"E",replace:!0,scope:{area:"=",targetArea:"=?",op:"=?"},templateUrl:"v1542394219/views/query/modifyarea.html",controller:rG,controllerAs:"modarea"}}W.directive("modifyarea",[qG]);
function rG(a,b){this.scope=a;this.element=b;this.log=dha;this.l=void 0;this.o=null;this.help={area1:"The base area to be modified. A preview of the result will be shown on the map in blue, and this area can either be replaced or you can create a new area.",area2:"The area that will be used to modify the base area.",mapArea:"The area to add to/remove from the base area. This area was drawn/selected using the map. If you would like to choose a saved area, click Clear and select one from the dropdown.",
operation:"How the area should be modified.",addOp:"The selected area will be combined with the Area to Modify.",removeOp:"The selected area will be cut out of the Area to Modify.",intersectOp:"The new area will only include intersecting portions of the selected areas.",replace:"If checked, the Area to Modify will be replaced with the area indicated by the preview. Otherwise a new area will be created with the provided title.",title:"The title to give to the new area"};this.loading=!1;this.replace=
!0;this.title="New Area";a.op=a.op||sG;a.$watch("area",this.bq.bind(this));a.$watch("op",this.wb.bind(this));a.$watch("targetArea",this.Cq.bind(this));a.$on("$destroy",this.dispose.bind(this));a.$emit("window.ready")}w(rG,y);rG.$inject=["$scope","$element"];var dha=E.V("os.ui.query.ui.ModifyAreaCtrl");g=rG.prototype;g.J=function(){rG.C.J.call(this);this.wn(void 0);this.element=this.scope=null};
g.Wb=function(){this.error=null;if(this.scope)if(this.scope.area)if(this.scope.targetArea)if(this.scope.area==this.scope.targetArea)this.error="Please select two different areas.";else if(this.o)switch(this.o.message){case "Result geometry is empty":this.error=this.scope.op==tG?"Area to Remove cannot fully contain the Area to Modify, or the result will be empty.":this.scope.op==uG?"Areas do not have an intersection.":this.scope.op+" failed. Please check the log for details.";break;case "Result geometry is unchanged":this.error=
this.scope.op==tG?"Area to Remove will not remove anything from the Area to Modify.":"Area to Add will not add anything to the Area to Modify.";break;default:this.error=this.scope.op+" failed. Please check the log for details."}else this.l||(this.error=this.scope.op+" failed. Please check the log for details.");else this.error="Please choose an area to "+this.scope.op+".";else this.error="Please choose an area to modify."};
g.bq=function(){this.scope.fixArea=this.scope.area&&!UE.contains(this.scope.area);this.wb()};g.Cq=function(){this.scope.fixTargetArea=this.scope.targetArea&&!UE.contains(this.scope.targetArea);this.wb()};g.wb=function(){this.wn(vG(this));this.Wb()};g.wn=function(a){this.l=a};
function vG(a){a.o=null;if(a.scope.area&&a.scope.targetArea)try{switch(a.scope.op){case sG:var b=TD(a.scope.area,a.scope.targetArea);break;case tG:b=VD(a.scope.area,a.scope.targetArea);break;case uG:var c=a.scope.area,d=a.scope.targetArea,e=null;if(c&&d){var f=c.X(),h=d.X();if(f&&h){var k=LD.u(),l=MD(k,f),m=MD(k,h);e=new ek;if(m.intersects(l)){var n=l.intersection(m);if(n&&!n.isEmpty()){var p=k.write(n);p&&(p=UD(p),p.set("_normalized",!0));e.sb(p)}else throw Error("Result geometry is empty");}else throw Error("Result geometry is empty");
}}b=e;break;default:E.error(a.log,"Unsupported operation: "+a.scope.op)}}catch(r){a.o=r}b&&b.set("_node",!1);return b}g.cancel=function(){KE(this.element)};rG.prototype.cancel=rG.prototype.cancel;rG.prototype.confirm=function(){var a=vG(this),b=a?a.X():null;a&&b?(this.replace?a=new pG(this.scope.area,b):(a.set("title",this.title),a=new sF(a)),a&&gF(hF.u(),a)):At(Ct,"Failed modifying area! Please see the log for more details.",rs,this.log);KE(this.element)};rG.prototype.confirm=rG.prototype.confirm;
rG.prototype.qD=function(a){switch(a){case sG:return"Add Area";case tG:return"Remove Area";case uG:return"Area Intersection"}return"Area Help"};rG.prototype.getPopoverTitle=rG.prototype.qD;rG.prototype.pD=function(a){switch(a){case sG:return this.help.addOp;case tG:return this.help.removeOp;case uG:return this.help.intersectOp}return"Area Help"};rG.prototype.getPopoverContent=rG.prototype.pD;var sG="Add",tG="Remove",uG="Intersect";W.directive("osModifyarea",[function(){var a=qG();a.controller=wG;return a}]);function wG(a,b){rG.call(this,a,b);this.log=eha;this.j=this.g=null}w(wG,rG);wG.$inject=["$scope","$element"];var eha=E.V("os.query.ui.ModifyAreaCtrl");wG.prototype.J=function(){wG.C.J.call(this);this.g&&(T.u().Fb(this.g),this.g=null);this.j&&(T.u().Fb(this.j),this.j=null)};
wG.prototype.bq=function(a,b){this.g&&T.u().Fb(this.g);this.g=null;a instanceof ek&&a.X()&&(this.g=qF(a),this.g.set("_node",!1),T.u().ac(this.g));wG.C.bq.call(this,a,b)};wG.prototype.Cq=function(a,b){this.j&&T.u().Fb(this.j);this.j=null;a instanceof ek&&a.X()&&(this.j=qF(a),this.j.set("_node",!1),T.u().ac(this.j));wG.C.Cq.call(this,a,b)};wG.prototype.wn=function(a){this.l&&T.u().Fb(this.l);wG.C.wn.call(this,a);this.l&&this.l.X()&&T.u().ac(this.l,oG)};function xG(){return{replace:!0,restrict:"E",templateUrl:"v1542394219/views/file/exportdialog.html",controller:yG,controllerAs:"exportdialog"}}W.directive("exportdialog",[xG]);
function yG(a,b,c){this.scope=a;a.itemText="item";this.element=b;this.l=c;this.g=this.scope.options;this.exporters={};a.exporter=this.g.Fj;a.initialExporter=!!a.exporter;if(!a.exporter){var d=zG(AG);if(d&&0<d.length)for(a.exporter=d[0],b=0,c=d.length;b<c;b++)this.exporters[d[b].ba()]=d[b]}this.persisters={};a.persister=this.g.zk;a.initialPersister=!!a.persister;if(!a.persister&&(d=BG(AG))&&0<d.length)for(a.persister=d[0],b=0,c=d.length;b<c;b++)this.persisters[d[b].ba()]=d[b];b=this.element.find(".js-custom-ui");
(c=this.o())?(b.html(c),this.l(b.contents())(this.scope)):b.remove();a.$emit("window.ready");a.$watch("exporter",this.j.bind(this));a.$watch("persister",this.A.bind(this));a.$on("$destroy",this.destroy.bind(this))}yG.$inject=["$scope","$element","$compile"];yG.prototype.destroy=function(){this.l=this.element=this.scope=null};yG.prototype.dD=function(){return this.scope&&this.scope.exporter?this.scope.exporter.ba():null};yG.prototype.getExporterLabel=yG.prototype.dD;
yG.prototype.eD=function(){return this.scope&&this.scope.exporter?this.scope.exporter.zg():null};yG.prototype.getExporterUI=yG.prototype.eD;yG.prototype.o=function(){return null};yG.prototype.Ub=function(a){return null!=a?Object.keys(a):[]};yG.prototype.getKeys=yG.prototype.Ub;yG.prototype.j=function(a){if(a){this.g.Fj=a;var b=this.element.find(".js-export-ui__container");b.children().remove();(a=a.zg())&&this.scope&&(b.html(a),this.l(b.contents())(this.scope))}};
yG.prototype.A=function(a){a&&(this.g.zk=a)};yG.prototype.cancel=function(){KE(this.element)};yG.prototype.cancel=yG.prototype.cancel;yG.prototype.confirm=function(){CG(this.g.items,this.g.fields,this.g.title,this.g.Fj,this.g.zk);KE(this.element)};yG.prototype.confirm=yG.prototype.confirm;W.directive("areaexport",[function(){var a=xG();a.controller=DG;return a}]);function DG(a,b,c){yG.call(this,a,b,c);a.itemText="area";a.simple=!0;a.allowMultiple=!0;db(this.g.items,function(a){a.set("mapVisualizationType","ANNOTATION_REGIONS")})}w(DG,yG);DG.$inject=["$scope","$element","$compile"];
function EG(a){a||(a=[]);yb(a);var b=1==a.length?a[0].get("title"):null;FE({id:"areaExport",label:"Export Areas",icon:"fa fa-download",x:"center",y:"center",width:"400",height:"auto","show-close":"true",modal:"true"},"<areaexport></areaexport>",void 0,void 0,void 0,{options:{Fj:null,fields:[],items:a,zk:null,title:b}})}
DG.prototype.j=function(a,b){DG.C.j.call(this,a,b);this.g.fields.length=0;b=["name","title","description","tags","interpolationMethod"];a instanceof FG?(a.Ca=["title"],b.push("mapVisualizationType")):a instanceof GG&&this.element.find(".js-export-ui__wrapper").children().remove();b&&0<b.length&&(this.g.fields=this.g.fields.concat(b))};function HG(){A.call(this);this.o=this.ready=!1;this.l=void 0;this.g=[];this.j={}}w(HG,A);wa(HG);var IG=E.V("os.plugin.PluginManager");g=HG.prototype;g.J=function(){HG.C.J.call(this);this.g.forEach(function(a){a.dispose()});this.g.length=0};function JG(a,b){a.o?a.Wt(b)&&(a.g.push(b),a.Ju(b)):a.g.push(b)}
g.Ju=function(a){this.j[a.D()]=!1;E.za(IG,"Initializing plugin "+a.D());try{var b=a.init();b?ad(b.then(function(){E.za(IG,"Initialized plugin "+a.D())},function(){E.ib(IG,"Error loading plugin "+a.D()+": "+a.getError())},this),this.Np.bind(this,a)):this.Np(a)}catch(c){E.error(IG,"Error loading plugin "+a.D(),c),this.Np(a)}};
g.init=function(){E.info(IG,"Initializing plugins ...");this.o=!0;this.g=this.g.filter(this.Wt,this);if(0<this.g.length){var a=O.get("plugin.initTimeout",1E4);this.l=setTimeout(this.JH.bind(this),a);this.g.forEach(this.Ju,this)}else KG(this)};g.JH=function(){this.l=void 0;var a=[],b;for(b in this.j)this.j[b]||a.push(b);E.ib(IG,"Plugin initialization timed out for the following plugin(s): "+a.join(", "));KG(this)};
g.Wt=function(a){var b=a.D();b=O.get(["plugins",b],!0);return b||null===b?!0:(E.info(IG,"Plugin "+a.D()+" is disabled and will not be added."),a.dispose(),!1)};function KG(a){a.ready||(E.info(IG,"Finished loading plugins"),null!=a.l&&(clearTimeout(a.l),a.l=void 0),a.ready=!0,a.dispatchEvent("load"))}g.Np=function(a){this.j[a.D()]=!0;a=0;for(var b=this.g.length;a<b;a++)if(!this.j[this.g[a].D()])return;KG(this)};function LG(a,b){this.scope=a;this.element=b;this.scope&&this.scope.items&&0<this.scope.items.length&&this.g(null,this.scope.items[0].data);this.scope.$on("os.ui.feature.FeatureInfoCtrl.updateTabs",this.g.bind(this));this.scope.$on("$destroy",t(this.destroy,this))}LG.prototype.destroy=function(){this.element=this.scope=null};W.directive("descriptiontab",[function(){return{restrict:"E",scope:!1,replace:!0,templateUrl:"v1542394219/views/feature/tab/descriptiontab.html",controller:MG,controllerAs:"descctrl"}}]);function MG(a,b){LG.call(this,a,b)}w(MG,LG);MG.$inject=["$scope","$element"];
MG.prototype.g=function(a,b){b&&b&&(b=b.Vb(),(a=b._htmlDescription)||(a=sc(b,function(a,b){return JA.test(b)&&!Lb(Yb(a))})||""),null!=a&&""!=a&&(a=a.replace(/<a /g,'<a target="_blank" '),b=this.element.find("iframe")[0]))&&(b=b.contentWindow.document,b.open(),b.write(a),b.close())};function NG(a){this.g=a}NG.prototype.S=function(){return this.g};NG.prototype.j=function(){return this.g};var SB="Default",OG={Default:void 0,Point:{config:{image:{type:"circle"}}},Square:{config:{image:{type:"shape",subType:"square"}}},Triangle:{config:{image:{type:"shape",subType:"triangle"}}},Icon:{config:{image:{type:"icon"}}},Ellipse:{config:{geometry:"ellipse"}},"Ellipse with Center":{config:{geometries:["geometry","ellipse"]}},"Selected Ellipse":{selectedConfig:{geometry:"ellipse"}},"Selected Ellipse with Center":{selectedConfig:{geometries:["geometry","ellipse"]}},"Line of Bearing":{config:{geometries:["lineOfBearing",
"lineOfBearingErrorHigh","lineOfBearingErrorLow","ellipse"]}},"Line of Bearing with Center":{config:{geometries:["lineOfBearing","lineOfBearingErrorHigh","lineOfBearingErrorLow","ellipse","geometry"]}}},PG=/line of bearing/i,QG=/ellipse/i,RG=/center/i,fha=/selected/i,SG=/default/i,TG={},UG;for(UG in OG)TG[UG]=RG.test(UG);
var $B={image:{type:"circle",radius:3,fill:{color:"rgba(255,255,255,1)"}},stroke:{width:3,color:"rgba(255,255,255,1)"}},VG={image:{color:"rgba(255,0,0,1)",fill:{color:"rgba(255,0,0,1)"}},stroke:{color:"rgba(255,0,0,1)"},zIndex:100},gha={image:{color:"rgba(255,255,255,1)",fill:{color:"rgba(255,255,255,1)"},stroke:{color:"rgba(255,0,0,1)",width:1}},stroke:{color:"rgba(255,255,255,1)"},zIndex:101},WG={image:{color:"rgba(255,0,0,1)",fill:{color:"rgba(255,0,0,1)"},stroke:{color:"rgba(255,255,0,1)",width:1}},
stroke:{color:"rgba(255,0,0,1)"},zIndex:102},oG={fill:{color:"rgba(0,255,255,0.15)"},stroke:{width:3,color:"rgba(0,255,255,1)"}},XG=["image","fill","stroke"];function YG(a){a=lj(a);a=[255*(4==a.length?a[3]:1),a[2],a[1],a[0]];var b;for(b=0;4>b;++b){var c=parseInt(a[b],10).toString(16);a[b]=1==c.length?"0"+c:c}return a.join("")}function ZG(a){return mj("string"===typeof a?yv(a):a)}var $G=["image","fill","stroke"];
function QB(a,b){if(a){if(null!=a.color)return b?yv(a.color):a.color;for(var c=0;c<$G.length;c++){var d=$G[c];if(!As(a[d])&&(d=QB(a[d],b)))return d}}return null}function aH(a,b,c){if(a){var d=c||XG,e;for(e in a)-1!==d.indexOf(e)&&(a[e].color=b),As(a[e])||aH(a[e],b,c)}}function bH(a){var b=null;a&&(a=a.image)&&a.src&&(b={path:a.src});return b}function cH(a,b){b&&a&&(a=a.image)&&(a.src=b.path)}
function dH(a,b,c){var d=b.showRotation||!1;b=b.rotationColumn;c=Number(c.la["string"===typeof b?b:""]);c="number"!==typeof c||isNaN(c)?0:c;eH({image:{rotation:d?Le(c):0}},a)}function aC(a,b,c){if(a){var d,e;for(e in a)-1!==XG.indexOf(e)&&(d=yv(a[e].color))&&(d[3]=c?d[3]*b:b,a[e].color=ZG(d)),As(a[e])||aC(a[e],b,c)}}
function fH(a){if(a){if(void 0!=a.radius)return a.radius;if(void 0!=a.width)return a.width;if(void 0!=a.scale)return Math.round(3*a.scale);for(var b in a)if(!As(a[b])){var c=fH(a[b]);if(void 0!==c)return c}}}
function gH(a,b){if(a)for(var c in a)"radius"==c?a[c]=b:"scale"==c?a[c]=hH(Math.max(b,.01)):"width"==c?a[c]=Math.max(b,1):As(a[c])||("stroke"==c?a[c].width=Math.max(b,1):"image"==c?"icon"==a[c].type?(a[c].scale=hH(Math.max(b,.01)),a[c].radius=void 0):(a[c].radius=b,a[c].scale=void 0):gH(a[c],b))}function iH(a,b){b=fH(b);a=fH(a);return null!=b&&null!=a?Math.round(hH(b)*hH(a)*3):b||a||3}function hH(a){return Math.floor(a/3*100)/100}
function jH(a,b,c){c||(c=PB(a,b),c=bC(a,a.la._style||c||$B,c));a.yb(c);(b=b||MB(a))&&b.Sc[a.ma.toString()]&&kH(b,a)}function lH(a,b){if(0<a.length)for(var c=PB(a[0],b),d=0,e=a.length;d<e;d++){var f=a[d],h=bC(f,f.la._style||c||$B,c);jH(f,b,h)}}
function PB(a,b){var c=a.get("sourceId"),d=a.get("skipLayerStyle");if(c&&!d){var e={};c=mH(nH.u(),c)||$B;eH(c,e);(a=b||MB(a))&&Ov(a,"os.source.Vector")&&(c=(b=a.Dd)?OG[b]:void 0)&&((c.config&&eH(c.config,e),c.selectedConfig&&(e.selectedConfig=c.selectedConfig),"Icon"==b)?(a=e.image)&&a.radius&&(a.scale=hH(a.radius)):TG[b]&&(b=(a=a.Ff)?OG[a]:void 0)&&(b.config&&eH(b.config,e),"Icon"==a&&(a=e.image)&&a.radius&&(a.scale=hH(a.radius))))}return e}
function oH(a){return null!=a.image&&"icon"==a.image.type}
function pH(a,b,c){var d=a.la.color;if(c&&c.replaceStyle)return d&&aH(c,d),c;var e={};eH(b,e);!c&&a&&(c=PB(a));if((b=a.la._style)&&c){void 0!=b.length&&(b=b[0]);var f=e.image;if(f){var h=iH(b.image,c.image);f.radius=h;f.scale=Math.max(hH(h),.01)}else c.image&&(e.image={},eH(c.image,e.image));void 0!==e.showRotation&&void 0!==e.rotationColumn?dH(e,e,a):void 0!==a.la.showRotation&&void 0!==a.la.rotationColumn&&dH(e,a.la,a);(f=e.stroke)?(c=iH(b.stroke,c.stroke),f.width=Math.max(c,1)):c.stroke&&(e.stroke=
{},eH(c.stroke,e.stroke))}else c&&void 0!==c.showRotation&&void 0!==c.rotationColumn&&dH(e,c,a);d&&aH(e,d);a=a.get("opacity");null==a||isNaN(a)||aC(e,Number(a),!0);return e}
function qH(a,b,c){"lineOfBearing"==b.geometry||b.geometries&&-1!=b.geometries.indexOf("lineOfBearing")?c?FB(a,!0,{pt:c.arrowSize,qt:c.arrowUnits,rt:c.lobBearingColumn,fo:c.lobBearingError,st:c.lobBearingErrorColumn,Ct:c.lobColumnLength,length:c.lobLength,Ip:c.lobLengthType,av:c.lobLengthColumn,dv:c.lobLengthUnits,Hp:c.lobLengthError,bv:c.lobLengthErrorColumn,cv:c.lobLengthErrorUnits,Oz:c.showArrow,Pz:c.showEllipse,Qz:c.showError}):FB(a):("ellipse"==b.geometry||b.geometries&&-1!=b.geometries.indexOf("ellipse"))&&
DB(a)}
function bC(a,b,c){var d=[];if(!a)return d;if("number"===typeof b.length){for(var e=0,f=b.length;e<f;e++)d.push(bC(a,b[e],c));return Fb(d)}b=pH(a,b,c);var h=a.la.opacity;null==h||isNaN(h)?h=void 0:h=Number(h);e=null!=c&&!!c.replaceStyle;var k=RB(a,void 0,e),l=k?OG[k]:void 0;if(l){if(l.config){var m=l.config;qH(a,m,c);f=oH(b);var n=oH(m);k&&TG[k]&&(k=(k=TB(a,void 0,e))?OG[k]:void 0)&&k.config&&(eH(k.config,m),n=oH(k.config));f&&!n?(f=b.image,e=ZG(QB(b)||"rgba(255,255,255,1)"),b.image={radius:null!=f.scale?
Math.round(3*f.scale):3,fill:{color:e}},b.stroke=b.stroke||{},b.stroke.color=e):e&&f&&n&&(cH(b,bH(c)),dH(b,b,a));eH(m,b)}l.selectedConfig&&(b.selectedConfig=l.selectedConfig)}if(l=a.la._selectStyle)null!=h&&l.image&&(e=lj(l.image.fill.color),e[3]=h,aH(l,e)),eH(l,b),b.selectedConfig&&(l=b.selectedConfig,b.selectedConfig=void 0,qH(a,l,c),l.geometry&&!a.la[l.geometry]||eH(l,b));(m=a.la._highlightStyle)&&eH(m,b);if(b.geometries)for(e=0,f=b.geometries.length;e<f;e++)n=b.geometries[e],a.la[n]&&(b.geometry=
n,d.push(rH(nH.u(),b)));else d.push(rH(nH.u(),b));e=a.la._labelGeometry;if(!e||e==b.geometry){if(a.la._highlightStyle||!1!==a.la.showLabels)if(e=sH(b.labels,c?c.labels:[tH()]))if(n=uH(a,e),!Lb(Yb(n))){var p=a.get("_labelStyle");p||(p=nH.u().j.text,e={},eH(Fs("text",b,c)||{},e),p=p.g(e),p=new bk({geometry:vH,text:p}));p.Cf((b.zIndex||0)+500);e=b.labelColor||c&&c.labelColor;if(!e||a.la._highlightStyle||a.la._selectStyle)e=QB(b);k=e||"rgba(255,255,255,1)";e=Fs("labelSize",b,c);"string"==typeof e&&(e=
parseInt(e,10)||void 0);e||(e=14);var r=wH(e);f=p.ub();f.B=r;f.ah(hha(n));n=f.ob();n.g=k;n.j=void 0;k=lj(k);n=lj(f.kb().La());n[3]=k[3];k=f.kb();n=ZG(n);k.G=n;k.l=void 0;f.Vf=oH(b)?e:e/2;f.g="left";a.set("_labelStyle",p,!0)}if(a=p)null!=h&&(p=lj(a.Mb.Dc.G),p[3]*=h,a.Mb.Dc.G=nj(p),m||l||(e=c&&c.labelColor?lj(c.labelColor):lj(QB(b)),e[3]*=h,a.Mb.tc.g=nj(e))),d.push(a)}return d}
function eH(a,b){for(var c in a){var d=a[c];d&&"object"==typeof d&&"number"!=typeof d.length?(c in b||(b[c]={}),eH(d,b[c])):b[c]=d}}function CH(a,b,c){a.dispatchEvent(new U(c||DH,b));a.O().ia()}function EH(a){return!!a.labels};function FH(a){if(a.classList)return a.classList;a=a.className;return sa(a)&&a.match(/\S+/g)||[]}function GH(a,b){return a.classList?a.classList.contains(b):kb(FH(a),b)}function HH(a,b){a.classList?a.classList.add(b):GH(a,b)||(a.className+=0<a.className.length?" "+b:b)}function iha(a,b){if(a.classList)db(b,function(b){HH(a,b)});else{var c={};db(FH(a),function(a){c[a]=!0});db(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function IH(a,b){a.classList?a.classList.remove(b):GH(a,b)&&(a.className=eb(FH(a),function(a){return a!=b}).join(" "))}function jha(a,b){a.classList?db(b,function(b){IH(a,b)}):a.className=eb(FH(a),function(a){return!kb(b,a)}).join(" ")};W.directive("columnrow",[function(){return{restrict:"E",replace:!0,scope:{item:"="},templateUrl:"v1542394219/views/column/columnrow.html"}}]);W.directive("columnManager",[function(){return{restrict:"E",replace:!0,scope:{columns:"=",acceptCallback:"=",shownCallback:"="},templateUrl:"v1542394219/views/column/columnmanager.html",controller:JH,controllerAs:"columnManager"}}]);
function JH(a,b){this.v=a;this.K=b;this.g={};this.shownColumns=[];this.shownSelected=[];this.hiddenColumns=[];this.hiddenSelected=[];this.searchResults=[];this.searchIndex=0;this.term="";this.valid=!0;for(a=0;a<this.v.columns.length;a++)b=this.v.columns[a],b.visible?this.shownColumns.push(b.clone()):b.visprotected||this.hiddenColumns.push(b.clone()),this.g[b.id]=b;this.hiddenColumns.sort(ZF);this.tableOptions={fullWidthRows:!0,forceFitColumns:!0,multiSelect:!0,sortable:!0,multiColumnSort:!0,useRowRenderEvents:!0,
dataItemColumnValueExtractor:this.o};this.hiddenConfig=[{id:"hidden",name:"Hidden",field:"name",selectable:!0,formatter:TF}];this.shownConfig=[{id:"shown",name:"Shown",field:"name",selectable:!0,formatter:TF}];this.hideDblClick=this.hide.bind(this);this.showDblClick=this.show.bind(this);this.j=new Lg(document);this.v.$on("$destroy",this.s.bind(this));KH(this)}JH.$inject=["$scope","$element"];JH.prototype.s=function(){Ma(this.j);this.K=this.v=null};
JH.prototype.mF=function(a){a?this.j.H("key",this.l,!1,this):this.j.M("key",this.l,!1,this)};JH.prototype.listenForKeys=JH.prototype.mF;
JH.prototype.show=function(a){if(!0===a){for(a=0;a<this.hiddenColumns.length;a++)this.hiddenColumns[a].visible=!0,this.shownColumns.push(this.hiddenColumns[a]);this.hiddenColumns.length=0;this.v.$broadcast(LH)}else if(0<this.hiddenSelected.length){this.hiddenSelected.sort(ZF);for(a=0;a<this.hiddenSelected.length;a++){var b=this.hiddenSelected[a];b.visible=!0;qb(this.hiddenColumns,b);this.shownColumns.push(b)}this.shownSelected=this.hiddenSelected;this.hiddenSelected=[];this.v.$broadcast(LH);this.v.$broadcast(MH,
this.shownSelected[0],!0)}KH(this);this.find(this.searchIndex-1)};JH.prototype.show=JH.prototype.show;
JH.prototype.hide=function(a){if(!0===a){for(a=0;a<this.shownColumns.length;a++)this.shownColumns[a].visible=!1,this.hiddenColumns.push(this.shownColumns[a]);this.shownColumns.length=0}else if(0<this.shownSelected.length)for(a=0;a<this.shownSelected.length;a++){var b=this.shownSelected[a];b.visible=!1;qb(this.shownColumns,b);this.hiddenColumns.push(b)}this.hiddenColumns.sort(ZF);KH(this);this.v.$broadcast(LH);this.find(this.searchIndex-1)};JH.prototype.hide=JH.prototype.hide;
JH.prototype.accept=function(){for(var a=this.v.columns,b=this.shownColumns,c=0;c<this.hiddenColumns.length;c++){var d=this.hiddenColumns[c].id;this.g[d]&&(this.g[d].visible=!1)}for(c=0;c<this.shownColumns.length;c++)d=this.shownColumns[c].id,this.g[d]&&(this.g[d].visible=!0);for(d=c=0;c<b.length;c++,d++){for(;d<a.length&&!a[d].visible;)d++;if(b[c].id!=a[d].id){var e=jb(a,bG.bind(this,"id",b[c].id));-1<e&&Hb(a,e,d>e?d-1:d)}}this.v.acceptCallback&&this.v.acceptCallback();this.v.shownCallback&&this.v.shownCallback(this.shownColumns);
this.close()};JH.prototype.accept=JH.prototype.accept;JH.prototype.close=function(){KE(this.K)};JH.prototype.close=JH.prototype.close;function KH(a){a.valid=0<a.shownColumns.length}JH.prototype.o=function(){return'<columnrow item="item"></columnrow>'};function NH(a,b,c){var d=[];if(b&&(b=Nb(b).toUpperCase(),a[c]))for(var e=0;e<a[c].length;e++)-1<a[c][e].name.toUpperCase().indexOf(b)&&d.push({mo:a[c][e],list:c});return d}
JH.prototype.find=function(a){""!=this.term&&(this.searchResults=NH(this,this.term,"hiddenColumns").concat(NH(this,this.term,"shownColumns")),this.searchIndex=null!=a?a:-1,this.next())};JH.prototype.find=JH.prototype.find;JH.prototype.clear=function(){this.term="";this.searchResults=[];this.searchIndex=0};JH.prototype.clear=JH.prototype.clear;JH.prototype.next=function(){0<this.searchResults.length&&(this.searchIndex=(this.searchIndex+1)%this.searchResults.length,OH(this))};JH.prototype.next=JH.prototype.next;
JH.prototype.cn=function(){0<this.searchResults.length&&(this.searchIndex=0==this.searchIndex?this.searchResults.length-1:this.searchIndex-1,OH(this))};JH.prototype.previous=JH.prototype.cn;function OH(a){var b=a.searchResults[a.searchIndex];"hiddenColumns"==b.list?(a.shownSelected=[],a.hiddenSelected=[b.mo]):(a.hiddenSelected=[],a.shownSelected=[b.mo]);a.v.$broadcast(LH);a.v.$broadcast(MH,b.mo,!0)}
JH.prototype.l=function(a){13===a.keyCode&&(a.preventDefault(),a.stopPropagation(),a.shiftKey?this.cn():this.next())};function PH(a,b){this.menu=null;this.yo=a;this.order=null!=b?b:Number.MAX_VALUE};function kha(a){if(!Ba(a.j))return a.j;if(a.l)throw Error("illegal state: ActionManager.getActionArgs() infinite recursion");a.l=!0;var b=a.j.call(a);a.l=!1;return b}function lha(a){var b=kha(a),c=!1;0<a.s.length&&a.s.forEach(function(a){a(b)});a.A.forEach(function(a){a.isEnabled(b)?Te(this.g.ha.ha,a.ag)?(this.g.remove(a.ag),this.g.set(a.ag,a)):(this.g.set(a.ag,a),c=!0):c|=this.g.remove(a.ag)},a);c&&mha(a);a.g.Jc()}function mha(a){a.dispatchEvent(new z("enabledActionsChanged"))};function QH(a,b,c){this.o=a;this.l=b;this.Ug=c||new PH(null,Number.MAX_VALUE)}QH.prototype.getName=function(){return this.o};QH.prototype.getName=QH.prototype.getName;QH.prototype.qb=function(){return this.l};QH.prototype.getDescription=QH.prototype.qb;QH.prototype.j=function(){return this.Ug};function RH(a){QH.call(this,a.S(),a.qb(),a.Ug);this.g=a}w(RH,QH);RH.prototype.Gl=function(){return this.g};RH.prototype.getAction=RH.prototype.Gl;function SH(a,b){QH.call(this,a,null,b);this.g=[]}w(SH,QH);SH.prototype.getItems=function(){return this.g};SH.prototype.getItems=SH.prototype.getItems;function TH(){QH.call(this,"",null)}w(TH,QH);TH.prototype.YE=!0;TH.prototype.isSeparator=TH.prototype.YE;function UH(a){QH.call(this,a,null)}w(UH,QH);UH.prototype.ZE=!0;UH.prototype.isSeparatorHeader=UH.prototype.ZE;function VH(a,b,c){a.path="v1542394219/";a.isFlat="true"==a.flatten;a.menuLimit=25;a.isSubmenu=!1;this.scope=a;this.element=b;this.timeout=c;this.l=[];this.element&&this.element[0]&&(this.key=Yd(this.element[0],"contextmenu",this.A,!0,this));this.scope.titletext&&this.scope.titleselector&&(b=this.scope.titletext,$(this.scope.titleselector).children().prepend(b));b=this.scope.provider;"true"==a.visible&&b&&b.o()&&this.position();a.$on("$destroy",this.destroy.bind(this));this.l.push(a.$watch("provider",
this.Aw.bind(this)));this.l.push(a.$watch("position",this.oI.bind(this)))}VH.$inject=["$scope","$element","$timeout"];VH.prototype.destroy=function(){this.Aw(null,this.scope.provider);for(var a=0,b=this.l.length;a<b;a++)this.l[a]();this.key&&(ee(this.key),this.key=null);this.scope=this.Ma=this.element=null};VH.prototype.A=function(a){2===a.button&&(a.preventDefault(),a.stopPropagation())};
VH.prototype.invoke=function(a){var b=this.scope.provider;return a&&Ba(a.cD)?(Q(R.u(),a.g,1),b.invoke(a.ag),!0):!1};VH.prototype.invoke=VH.prototype.invoke;g=VH.prototype;g.oI=function(a,b){a!=b&&this.position()};g.Aw=function(a,b){b&&b.M("enabledActionsChanged",this.o,!1,this);a&&(this.o(),a.H("enabledActionsChanged",this.o,!1,this))};
function nha(a,b){if(!b)return[];var c={};db(b,function(a){var b=a.Ug;if(b)if(b=b.menu){b=b.split(".");var d=oc(c,b);d?d[a.S()]=a:(d={},d[a.S()]=a,Bs(c,b,d))}else c[a.S()]=a;else c[a.S()]=a},a);b=[];WH(a,c,b);return b}
function WH(a,b,c){db(nc(b),function(a){var d=b[a];if(d&&d.j&&d.S)Db(c,new RH(d),this.Uz);else if(Aa(d)){var e=a.split("/");if(1<e.length){a=e[1];var f=e[0]}a=new SH(a,new PH(f));f=a.getItems();Db(c,a,this.Uz);WH(this,d,f)}},a);a=void 0;for(var d=0;d<c.length;d++){var e=void 0;e=(e=c[d].Ug)&&e.yo;a!=e&&(0<d&&(nb(c,new TH,d),d++),null!=e&&(nb(c,new UH(e.replace(/^[0-9]*:/,"")),d),d++));a=e}}
g.Uz=function(a,b){var c=a.Ug.yo,d=b.Ug.yo;return c===d?(a=a.Ug.order,b=b.Ug.order,a===b?1:a>b?1:-1):null!=c?null!=d?c===d?1:c>d?1:-1:-1:1};
g.position=function(){var a=this.element,b=this.scope.position||a.position();this.timeout(function(){a.removeClass("right-menu");if(Aa(b)){var c=b.left||b.x,d=b.top||b.y,e=a.outerWidth(),f=a.outerHeight(),h=qg(window);c+e>h.width-5?(c=h.width-5-e,a.addClass("right-menu")):c+2*e>h.width-5&&a.addClass("right-menu");d=0>d?5:d;d+f>h.height-30&&(d=h.height-30-f);a.css("left",(0>c?5:c)+"px");a.css("top",d+"px")}else"right"==b&&a.addClass("right-menu");a.addClass("show")},25)};
g.UL=function(){this.timeout(t(function(){if(this.element&&!this.scope.isFlat){var a=this.element.find(".js-action-menu-item-list .js-dropdown-submenu").find(".js-action-menu-item-list");if(a&&0<a.length){var b=a.scope(),c=qg(window),d=a.find(".js-dropdown-item"),e=0;if(d&&0<d.length){e=d[0].offsetHeight;var f=d.length;d=a.outerHeight()-f*e;e=parseInt((c.height-d)/e-1,10)}e<f&&(a.scope().isMoreButton=!0);b.menuLimit=e;X(a.scope());b=a.offset();if(Aa(b)){d=b.top||b.y;e=a.outerHeight();b=qg(window);
c=this.element.outerWidth();var h=this.element.offset();d=0>d?5:d;f=a[0].parentElement;a=a.closest(".js-dropdown-submenu, .dropdown-item").offset();d=e>b.height-30?-1*h.top:d+e>b.height-30?b.height-e-30-this.element.offset().top:a.top-h.top;f.style.top=d+"px";a=h.left||h.x;a+c+f.offsetWidth>b.width&&f.offsetWidth<=a&&(f.style.left="auto",f.style.right="100%")}}}},this),50,!0)};VH.prototype.positionSubmenu=VH.prototype.UL;
VH.prototype.o=function(){this.scope.actions=nha(this,this.scope.provider.g.Jc());this.scope.menuLimit=100;this.scope.isMoreButton=!1;X(this.scope)};VH.prototype.jE=function(){this.scope.provider.TR(this.element);this.close()};VH.prototype.handleMoreResults=VH.prototype.jE;
function XH(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/menu/actionmenu.html",controller:VH,controllerAs:"actionMenu",scope:{provider:"=",position:"=",visible:"@",flatten:"@",titletext:"@",titleselector:"@",isSubmenu:"=?",isMoreButton:"=?"}}}W.directive("actionMenu",XH);var KF="menuclose";function YH(a,b,c){VH.call(this,a,b,c);this.element.removeClass("show");this.j=this.iK.bind(this);this.g=this.target=null;this.s=new le(this.hK,25,this)}w(YH,VH);YH.$inject=["$scope","$element","$timeout"];g=YH.prototype;g.destroy=function(){YH.C.destroy.call(this);this.s.dispose();this.s=null};
g.close=function(a){void 0===a&&(a=!0);this.g=this.target=null;this.element.hasClass("show")&&(a&&C&&C.dispatchEvent(KF),this.element.removeClass("show"),this.element.removeClass("right-menu"),this.element.blur());this.element.find("#js-global-menu__title").remove();a=document;a.removeEventListener("mousedown",this.j,!0);a.removeEventListener("pointerdown",this.j,!0);a.removeEventListener("scroll",this.Rx.bind(this),!0);X(this.scope)};g.open=function(){X(this.scope);this.s.start()};
g.hK=function(){var a=document;a.addEventListener("mousedown",this.j,!0);a.addEventListener("pointerdown",this.j,!0);a.addEventListener("scroll",this.Rx.bind(this),!0)};g.iK=function(a){$(a.target).closest("#js-global-menu").length||this.close()};g.invoke=function(a){return YH.C.invoke.call(this,a)?(this.close(),!0):!1};
g.position=function(){var a=this.element,b=this.scope.position||a.position();this.timeout(function(){if(Aa(b)){var c=b.left||b.right||b.x,d=b.top||b.bottom||b.y,e=a.outerWidth(),f=a.outerHeight(),h=qg(window);c+e>h.width-5?(c=h.width-5-e,a.addClass("right-menu")):c+2*e>h.width-5&&a.addClass("right-menu");c=0>c?5:c;d=0>d?5:d;d+f>h.height-50&&(d=h.height-50-f);a.css("top","");a.css("bottom","");a.css("left","");a.css("right","");a.css(void 0!==b.right?"right":"left",c+"px");a.css(void 0!==b.bottom?
"bottom":"top",d+"px")}else"right"==b&&a.addClass("right-menu");a.addClass("show")},5)};g.Rx=function(){if(this.g){var a=$(this.target).offset();this.g.left==a.left&&this.g.top==a.top||ZH()}};function oha(a,b,c){var d=angular.element("#js-global-menu").scope();d.provider=a;a=d.actionMenu;ZH();c&&(a.target=c,a.g=$(c).offset());(a=Uy.get("$timeout"))?a(Fa($H,b,c,void 0)):$H(b,c,void 0)}function ZH(){angular.element("#js-global-menu").scope().actionMenu.close()}
function $H(a,b,c){var d=angular.element("#js-global-menu"),e=d.scope(),f=e.actionMenu,h;"string"===typeof b?h=null!=c?c.find(b):angular.element(b):void 0!==b&&(h=b);b=a;null!=h&&(e=h.offset(),e.top&&(e.top-=$(document).scrollTop()),"string"===typeof a?(b=a.split(/\s+/),a=b[0],b=1<b.length?parseInt(b[1],10):2,"right"==a?(a=e.left-d.outerWidth()+h.outerWidth(),h=e.top+h.outerHeight()+b,b={x:a,y:h}):"bottom"==a?(h=e.top-b,b={x:e.left,bottom:d.parent().outerHeight()-h}):b={x:e.left,y:e.top+h.outerHeight()+
b}):(b.x+=e.left,b.y+=e.top));e=d.scope();e.position=b;f.open()}W.directive("globalMenu",function(){var a=XH();a.scope=!0;a.controller=YH;return a});W.directive("textprompt",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/window/textprompt.html",controller:aI,controllerAs:"textPrompt"}}]);function aI(a,b){this.K=b;a.$on("$destroy",this.pK.bind(this));this.j=new Lg(document);this.j.H("key",this.oK,!1,this);this.g=new le(this.NM,50,this);a.$emit("window.ready");a.$watch("value",this.rJ.bind(this))}aI.$inject=["$scope","$element"];g=aI.prototype;g.pK=function(){this.g.dispose();this.j.dispose();this.K=null};
g.rJ=function(a){a&&(this.g.stop(),this.g.start())};g.NM=function(){this.K.find(".js-text-prompt__main").select()};g.oK=function(a){27==a.keyCode&&this.close()};g.close=function(){KE(this.K)};aI.prototype.close=aI.prototype.close;function bI(a){if(a&&!Lb(Yb(a))){var b=document.createElement("textarea");b.style.top="-2000px";b.style.left="-2000px";b.style.width="2em";b.style.height="2em";b.value=a;document.body.appendChild(b);b.select();try{var c=document.execCommand("copy")}catch(d){}document.body.removeChild(b);c?(a=(20<a.length?"Value ":'"'+a+'" ')+" copied to clipboard",At(zt.u(),a,us)):FE({id:"copy",x:"center",y:"center",label:"Copy","show-close":!0,"no-scroll":!0,"min-width":200,"min-height":90,"max-width":1E3,"max-height":1E3,
modal:!0,width:300,height:"auto",icon:"fa fa-copy"},"textprompt",void 0,void 0,void 0,{text:"Use Ctrl+C to copy",value:a})}};var LH="slickgrid.invalidateRows",MH="slickgrid.scrollToItem";
function cI(){return{restrict:"AE",replace:!0,template:'<div class="slick-grid"></div>',scope:{data:"=",columns:"=",options:"=",contextMenu:"&",columnMenuEnabled:"@",dblClickEnabled:"@",dblClickHandler:"=?",dragEnabled:"@",resizeWith:"@",idField:"@",disableSelection:"@",selected:"=?",useAngular:"@",defaultSortColumn:"@",defaultSortOrder:"@",compare:"=?",getItemMetadata:"=?",rowScope:"=?",cellTooltips:"=?"},controller:dI,controllerAs:"gridCtrl"}}W.directive("slickgrid",[cI]);
function dI(a,b,c){try{Uy.get("$animate").enabled(b,!1)}catch(f){}this.scope=a;this.element=b;this.ka=c;this.A=[];this.L=!1;this.oa=this.resize.bind(this);this.Ia=new le(this.yC,50,this);this.A.push(a.$watch("data",this.vr.bind(this)));this.A.push(a.$watch("selected",this.JI.bind(this)));this.A.push(a.$watch("columns",this.tr.bind(this)));this.A.push(a.$watch("options",this.lI.bind(this)));this.A.push(a.$on("$destroy",this.dispose.bind(this)));var d=a.$watch("defaultSortColumn",t(function(b){b&&ib(a.columns,
function(a){return b==a.id})&&setTimeout(t(function(){d();this.ta&&(this.ta.setSortColumn(b,"desc"!==this.scope.defaultSortOrder),this.Bq())},this),100)},this));this.o=a.columnMenuEnabled&&"false"!==a.columnMenuEnabled?new IF(new HF({type:"root",children:[{label:"Column Order",type:"group",sort:0,children:[{label:"Manage Columns",eventType:"column:manageColumns",tooltip:"Display a window where you can manage your columns",da:['<i class="fa fa-fw fa-columns"></i>'],sort:0},{label:"First",eventType:"column:moveColumnToBeginning",
tooltip:"Move the column to the beginning",da:['<i class="fa fa-fw fa-angle-double-left"></i>'],Aa:$F,sort:1},{label:"Last",eventType:"column:moveColumnToEnd",tooltip:"Move the column to the end",da:['<i class="fa fa-fw fa-angle-double-right"></i>'],Aa:$F,sort:2}]},{label:"Edit Columns",type:"group",sort:1,children:[{label:"Hide Column",eventType:"column:removeColumn",tooltip:"Removes the column from the grid",da:['<i class="fa fa-fw fa-eye-slash"></i>'],Aa:Yga,sort:0},{label:"Reset Columns",eventType:"column:resetColumns",
tooltip:"Show all columns and reset their widths",da:['<i class="fa fa-fw fa-refresh"></i>'],sort:100}]}]})):null;this.Gb=new Slick.Data.DataView;void 0!==a.getItemMetadata&&(this.Gb.getItemMetadata=a.getItemMetadata);c=this.Ih();c.editable&&(this.element.addClass("editable"),this.scope.$on("slickgrid.commitEdit",this.BG.bind(this)));this.ta=new Slick.Grid(b,this.Gb,this.getColumns(),c);this.Gb.onRowCountChanged.subscribe(this.RK.bind(this));this.Gb.onRowsChanged.subscribe(this.CI.bind(this));this.ta.onClick.subscribe(this.pq.bind(this));
this.ta.onKeyDown.subscribe(this.Rw.bind(this));this.ta.onSelectedRowsChanged.subscribe(this.wH.bind(this));this.ta.onSort.subscribe(this.Bq.bind(this));this.ta.onColumnsReordered.subscribe(this.zG.bind(this));this.ta.onColumnsResized.subscribe(this.AG.bind(this));this.ta.onMouseEnter.subscribe(this.ty.bind(this));this.ta.onMouseLeave.subscribe(this.uy.bind(this));a.useAngular&&(this.ta.onRowRender.subscribe(this.wr.bind(this)),this.ta.onRowRemove.subscribe(this.vy.bind(this)),this.ta.onActiveCellChanged.subscribe(this.apply.bind(this)));
if(this.s=a.disableSelection?null:new Slick.RowSelectionModel)this.ta.setSelectionModel(this.s),this.Gb.syncGridSelection(this.ta,!1);a.$on(LH,this.sr.bind(this));a.$on("slickgrid.invalidateColumns",this.TE.bind(this));a.$on("slickgrid.copyRows",this.EG.bind(this));a.$on(MH,this.FI.bind(this));a.$on("slickgrid.scrollToCell",this.EI.bind(this));a.$on("slickgrid.sortSelected",this.TI.bind(this));a.$on("resize",this.oa);a.cellTooltips=void 0==a.cellTooltips?!0:a.cellTooltips;a.dblClickEnabled&&"false"!==
a.dblClickEnabled&&(null!=a.dblClickHandler?this.ta.onDblClick.subscribe(a.dblClickHandler.bind(this)):this.ta.onDblClick.subscribe(this.onDblClick.bind(this)));if(a.dragEnabled&&"false"!==a.dragEnabled){this.ta.onDragInit.subscribe(this.PK.bind(this));this.ta.onDragStart.subscribe(this.QK.bind(this));this.ta.onDrag.subscribe(this.sy.bind(this));this.ta.onDragEnd.subscribe(this.OK.bind(this));this.G=new je(20);this.Z=0;var e=this.element.find(".slick-viewport");this.G.H("tick",function(){e.scrollTop(e.scrollTop()-
this.Z)},!1,this);this.element.addClass("dragdrop")}this.I=null;a.resizeWith?(this.I=b.parents(a.resizeWith),this.I.resize(this.oa)):this.element.resize(this.oa);this.P=void 0;this.P=a.contextMenu&&a.contextMenu()||void 0;e=this.element.find(".slick-viewport");Yd(e[0],"contextmenu",this.ur,!1,this);Yd(e[0],"mousedown",AA,!0);Yd(e[0],"mouseup",AA,!0);this.scope.$on("contextmenu",this.ur.bind(this));this.o&&(this.o.H("column:removeColumn",this.xG,!1,this),this.o.H("column:resetColumns",this.yG,!1,this),
this.o.H("column:moveColumnToBeginning",this.uG,!1,this),this.o.H("column:moveColumnToEnd",this.vG,!1,this),this.o.H("column:manageColumns",this.Tv,!1,this),b=this.element.find(".slick-header"),Yd(b[0],"contextmenu",this.mq,!1,this),a.$on("column:manageColumns",this.Tv.bind(this)),a.$on("column:contextMenu",this.mq.bind(this)));this.U=this.j=!1}w(dI,y);dI.$inject=["$scope","$element","$compile"];var eI={multiColumnSort:!0};g=dI.prototype;
g.J=function(){dI.C.J.call(this);if(this.element){var a=this.element.find(".slick-header");de(a[0],"contextmenu",this.mq,!1,this);a=this.element.find(".slick-viewport");de(a[0],"contextmenu",this.ur,!1,this);de(a[0],"mousedown",AA,!0);de(a[0],"mouseup",AA,!0)}Ma(this.o);this.o=null;a=0;for(var b=this.A.length;a<b;a++)this.A[a]();this.A.length=0;Ma(this.Ia);this.I?(this.I.off("resize"),this.I=null):this.element.off("resize");this.s&&(this.s.destroy(),this.s=null);this.G&&this.G.dispose();this.Gb&&
this.Gb.setItems([]);this.ta&&(this.ta.invalidateAllRows(),this.ta.destroy());this.Gb=this.ta=null;this.P=void 0;this.element=null;this.scope=this.scope.data=null};g.Ih=function(){if(this.scope.options){var a=zc(eI);Cc(a,this.scope.options);return a}return eI};g.getColumns=function(){for(var a=fI(this).slice(),b=a.length,c=[];b--;)gI(a[b])||(c=a.splice(b,1).concat(c));return a};function fI(a){return a.scope.columns||[]}function gI(a){return!("visible"in a)||a.visible}
g.getData=function(){return this.scope.data||[]};function pha(a){var b=hI(a);if(b&&b.length){b=b.slice().sort(Bb);var c=b.map(function(a){return this.Gb.getItemByIdx(a)},a).filter(CA)}return c||[]}g.CI=function(a,b){this.Xa()||(this.ta.invalidateRows(b.rows),this.ta.render())};g.RK=function(){this.Xa()||(this.ta.updateRowCount(),this.hb?this.ta.render():this.hb=!0)};g.resize=function(){this.Ia.start()};
g.yC=function(){this.ta.resizeCanvas();var a=hI(this);a&&0<a.length&&this.ta.scrollRowIntoView(a[0],!1)};g.EG=function(a,b){if(Ba(b)){a=pha(this);0===a.length&&(a=this.Gb?this.Gb.getItems():[]);b=b||Yb;for(var c="",d=0;d<a.length;d++)if(c+=b(a[d])+"\n",1E5<c.length){At(Ct,"Data exceeds the maximum copy limit. Please reduce the selected/displayed data and try again.",ss);c=void 0;break}c&&bI(c.trim())}};
g.FI=function(a,b,c){a=this.jv(b);void 0!==a&&(c?this.ta.scrollRowToTop(a):this.ta.scrollRowIntoView(a,!1))};g.EI=function(a,b,c){a=b;b=this.Gb.getItems().length-1;a=Math.min(a||0,b||0);b=this.getColumns().length-1;c=Math.min(c||0,b||0);this.ta.scrollCellIntoView(a,c,!1)};g.pq=function(a,b){this.Rw(a,b)};g.Rw=function(a){a=a&&a.keyCode||0;16!=a&&18!=a&&17!=a&&(this.U=!0,this.scope.$emit("userInteraction"),Hc(function(){this.U=!1},this))};
g.Nn=function(a){this.ta.resetActiveCell();this.Gb.setItems(a,this.scope.idField||"id");this.ta.getSortColumns().length&&this.Bq()};g.vr=function(){this.Nn(this.getData())};g.tr=function(a){a&&this.getColumns()==a||(this.ta.setColumns(this.getColumns()),a=hI(this),null!=this.s&&this.ta.setSelectedRows(a))};g.Ch=function(a){a&&a.forEach(function(a){a.userModified=!0});this.tr()};
g.zG=function(){if(!this.j){this.j=!0;for(var a=this.ta.getColumns(),b=fI(this),c=[],d=0,e=0,f=a.length;d<f;d++,e++){for(;a[d].internal;)d++;for(;e<b.length&&!gI(b[e]);)e++;if(a[d].id!=b[e].id){var h=jb(b,bG.bind(this,"id",a[d].id));if(-1<h){var k=e>h?e-1:e;mb(c,b[h]);mb(c,b[k]);Hb(b,h,k)}}}0<c.length&&this.Ch(c);this.j=!1}};
g.AG=function(){if(!this.j){this.j=!0;for(var a=[],b=fI(this),c=this.element.find(".slick-header-column"),d=0,e=c.length;d<e;d++){var f=$(c[d]).outerWidth(),h=$(c[d]).data();0<f&&h&&h.column&&(h=jb(b,bG.bind(this,"id",h.column.id)),-1<h&&(b[h].width=f,a.push(b[h])))}0<a.length&&this.Ch(a);this.j=!1}};g.yG=function(a){(a=a.getContext())&&a.ta===this&&(fI(this).forEach(function(a){a.visible=!0;a.width=Math.max(80,Wy(a.name).width+20);a.userModified=!1}),this.Ch())};
g.xG=function(a){var b=a.getContext();b&&b.ta===this&&b.qe&&(a=fI(this),b=jb(a,bG.bind(this,"id",b.qe.id)),-1<b&&(a[b].visible=!1,this.Ch([a[b]])))};g.uG=function(a){var b=a.getContext();b&&b.ta===this&&b.qe&&(a=fI(this),b=jb(a,bG.bind(this,"id",b.qe.id)),-1<b&&(Hb(a,b,0),this.Ch([a[b]])))};g.vG=function(a){var b=a.getContext();b&&b.ta===this&&b.qe&&(a=fI(this),b=jb(a,bG.bind(this,"id",b.qe.id)),-1<b&&(Hb(a,b,a.length-1),this.Ch([a[b]])))};
g.Tv=function(){var a=fI(this);if(a){var b=this.Ch.bind(this);FE({label:"Column Manager",icon:"fa fa-columns",x:"center",y:"center",width:"600","min-width":"500","max-width":"700",height:"400","min-height":"350","max-height":"1000","show-close":!0,"no-scroll":!0,modal:!0},'<column-manager columns="columns" accept-callback="acceptCallback" ></column-manager>',void 0,void 0,void 0,{columns:a,acceptCallback:b})}};g.Fo=function(){return this.scope.selected};
g.ur=function(a,b){a.preventDefault();var c=null,d=0,e=0;a instanceof Md?(a.stopPropagation(),c=this.Fo(a),d=a.clientX,e=a.clientY):b&&2==b.length&&(c=this.Fo(),d=b[0],e=b[1]);a=this.scope.selected;b=null;if(a)for(var f=0,h=a.length;f<h;f++){var k=a[f];if(P(k,"os.ui.menu.IMenuSupplier"))if(k=k.ix(),!b)b=k;else{if(b.constructor!==k.constructor){b=null;break}}else{b=null;break}}a=b||this.P;null!=c&&a instanceof IF&&a.open(c,{my:"left top",at:"left+"+d+" top+"+e,of:"#js-window__container"},this)};
g.mq=function(a,b){a.preventDefault();if(a instanceof Md){a.stopPropagation();var c=a.target;var d=GH(c,"slick-header-column")?a.target:Hg(c,"slick-header-column");c={my:"left top",at:"left+"+a.clientX+" top+"+a.clientY,of:"#js-window__container"}}else Aa(b)&&(c=b);this.o&&c&&((a=d?$(d).data("column"):void 0)&&a.internal||this.o.open({columns:fI(this),qe:a,ta:this},c))};g.lI=function(){this.ta.setOptions(this.Ih())};
g.JI=function(a){this.j||(this.j=!0,a?(a=q(a)?a:[a],a=a.map(this.jv,this)):a=[],null!=this.s&&this.ta.setSelectedRows(a),this.U||this.ta.resetActiveCell(),this.j=!1)};g.tF=function(a){return this.ta.getDataItem(a)};g.jv=function(a){return this.Gb.getRowById(a[this.scope.idField||"id"])};
g.wH=function(a,b){if(!this.j){this.j=!0;if(a=b.rows)a=a.map(this.tF,this),a=this.ta.getOptions().multiSelect?a:a[0]||null,this.scope.selected=a,this.scope.$emit("slickgrid.selectionChange",a),this.apply();this.j=!1}};g.apply=function(){X(this.scope)};
g.Bq=function(){this.Gb.beginUpdate();for(var a=this.ta.getSortColumns(),b=this.ta.getColumns(),c=0,d=a.length;c<d;c++)for(var e=0,f=b.length;e<f;e++)if(b[e].id==a[c].columnId){a[c].column=b[e];break}b=this.scope.compare||this.ov.bind(this,this.ta.getSortColumns());this.Gb.sort(b);this.Gb.endUpdate();this.ta.resetActiveCell();this.scope.$emit("slickgrid.sortChanged",a)};
g.ov=function(a,b,c){for(var d=0,e=a.length;d<e;d++){var f=a[d].column.sortField||a[d].column.field,h=a[d].sortAsc?1:-1,k=null;this.scope.options&&(this.scope.options.dataItemColumnSortValueExtractor?k=this.scope.options.dataItemColumnSortValueExtractor:this.scope.options.dataItemColumnValueExtractor&&(k=this.scope.options.dataItemColumnValueExtractor));if(k){var l=k(b,f);f=k(c,f)}else l=b[f],f=c[f];k=typeof l;"string"===k&&((l=l.trim())||(l=null));var m=typeof f;"string"===m&&((f=f.trim())||(f=null));
if(null==l||null==f)return l==f?0:(null==l?1:-1)*h;var n=void 0;k!=m?"number"==k?(f=parseFloat(f),isNaN(f)&&(f=Number.MAX_VALUE*h)):"number"==m&&(l=parseFloat(l),isNaN(l)&&(f=Number.MAX_VALUE*h)):"function"==typeof l.Wi?n=l.Wi(f)*h:"number"!=k&&Ez.test(l)&&Ez.test(f)&&(l=parseFloat(l),f=parseFloat(f));void 0==n&&(n=(l>f?1:l<f?-1:0)*h);if(0!==n)return n}return 0};
g.TI=function(){this.Gb.beginUpdate();for(var a=this.ta.getSortColumns(),b=this.ta.getColumns(),c=0,d=a.length;c<d;c++)for(var e=0,f=b.length;e<f;e++)if(b[e].id==a[c].columnId){a[c].column=b[e];break}a=this.ta.getData();b=hI(this);a=a.mapRowsToIds(b);a=Dc(a);a=this.KM.bind(this,a,this.ta.getSortColumns());this.Gb.sort(a);this.Gb.endUpdate()};g.KM=function(a,b,c,d){var e=a[d.id];return a[c.id]===e?this.ov.call(this,b,c,d):e?1:-1};
g.wr=function(a,b){a=this.scope.$new();Aa(this.scope.rowScope)&&Cc(a,this.scope.rowScope);a.item=b.item;this.ka(b.node)(a)};g.vy=function(a,b){a=angular.element(b.node);b=a.scope();a.remove();b&&b.$destroy()};function hI(a){return null!=a.s?a.ta.getSelectedRows():[]}g.sr=function(){this.Xa()||(this.ta.invalidateAllRows(),this.ta.render(),this.Gb.refresh())};g.TE=function(){this.tr()};
g.onDblClick=function(a,b){this.j||(this.j=!0,a=angular.element(this.ta.getCellNode(b.row,b.cell)).text(),bI(a),this.j=!1)};g.PK=function(a){a.stopImmediatePropagation();this.scope.$emit("slickgrid.onDragInit")};
g.QK=function(a,b){var c=this.ta.getCellFromEvent(a);if(!c)return!1;var d=this.ta.getSelectedRows();if(0===d.length||-1===d.indexOf(c.row))d=[c.row];b.rows=d;if(!this.xt(d))return!1;this.L=!0;c=0;for(var e=d.length;c<e;c++)$(this.ta.getCellNode(d[c],0)).parent().addClass("slick-dragging");a.stopImmediatePropagation();b.insertBefore=-1;a=this.ta.getOptions().rowHeight;c=this.ta.getCanvasNode();b.rect=$("<div class='slick-reorder-proxy'/>").css("position","absolute").css("zIndex","99999").css("width",
$(c).innerWidth()).css("height",a*d.length).appendTo(c);b.guide=$("<div class='slick-reorder-guide'/>").css("position","absolute").css("zIndex","99998").css("width",$(c).innerWidth()).css("top",-1E3).appendTo(c);return!0};g.xt=function(){return!0};
function iI(a,b){var c=b.pageY-$(a.ta.getCanvasNode()).offset().top,d=a.element.find(".slick-viewport");b=b.pageY-d.offset().top;d=15>b;var e=15>a.element.height()-b;d?a.Z=2*Math.log(16-b):e&&(a.Z=-2*Math.log(16+b-a.element.height()));d||e?a.G.start():a.G.stop();return c}
g.sy=function(a,b){if(!this.L)return!1;a.stopImmediatePropagation();var c=iI(this,a);a=this.ta.getOptions().rowHeight;b.rect.css("top",c-5);c=Math.max(0,Math.min(Math.round(c/a),this.ta.getDataLength()));c!==b.insertBefore&&(this.ei(b.rows,c)?(b.guide.css("top",c*a),b.rect.css("background","blue"),b.canMove=!0):(b.guide.css("top",-1E3),b.rect.css("background","red"),b.canMove=!1),b.insertBefore=c);return!0};
g.ei=function(a,b){if(isNaN(b))return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]==b||a[c]==b-1)return!1;return!0};g.OK=function(a,b){this.G.stop();if(!this.L)return!1;this.L=!1;a.stopImmediatePropagation();b.guide.remove();b.rect.remove();a=b.rows;for(var c=0,d=a.length;c<d;c++)$(this.ta.getCellNode(a[c],0)).parent().removeClass("slick-dragging");b.canMove&&(this.xl(b.rows,b.insertBefore),this.scope.$emit("slickgrid.orderChange"));return!0};
g.xl=function(a,b){var c=[],d=this.getData(),e=d.slice(0,b),f=d.slice(b,d.length);a.sort(jI);for(var h=0,k=a.length;h<k;h++)c.push(d[a[h]]);a.reverse();h=0;for(k=a.length;h<k;h++)d=a[h],d<b?e.splice(d,1):f.splice(d-b,1);d=e.concat(c.concat(f));b=[];h=0;for(k=a.length;h<k;h++)b.push(e.length+h);this.scope.data=d;this.vr()};
g.ty=function(a){if(!this.j){this.j=!0;a=this.ta.getCellFromEvent(a);if(this.scope.cellTooltips){var b=$(this.ta.getCellNode(a.row,a.cell));b.attr("title",b.text())}a=this.ta.getDataItem(a.row);this.scope.$emit("slickgrid.highlightChange",a);this.j=!1}};g.uy=function(){this.j||(this.j=!0,this.scope.$emit("slickgrid.highlightChange",null),this.j=!1)};g.BG=function(){this.ta&&this.ta.getEditorLock().isActive()&&this.ta.getEditorLock().commitCurrentEdit()};function jI(a,b){return a-b};W.directive("propertyinfo",[function(){return{restrict:"E",replace:!0,scope:{feature:"="},templateUrl:"v1542394219/views/propertyinfo.html",controller:kI,controllerAs:"info"}}]);function kI(a){this.v=a;this.v.gridCols=qha;this.v.gridOptions={enableColumnReorder:!1,forceFitColumns:!0,multiColumnSort:!1,multiSelect:!1,defaultFormatter:UF,enableAsyncPostRender:!0};a.$watch("feature",this.j.bind(this));a.$on("$destroy",this.g.bind(this))}kI.$inject=["$scope"];
var qha=[{id:"field",field:"field",name:"Field",sortable:!0,width:40},{id:"value",field:"value",name:"Value",sortable:!0}];kI.prototype.g=function(){this.v=null};kI.prototype.j=function(a){this.v.lon=void 0;this.v.lat=void 0;this.v.description=void 0;this.v.properties=[];if(a){a=this.v.feature;for(var b in a)this.v.properties.push({id:b,field:b,value:a[b]})}};
function lI(a,b,c){var d="Property Info";c&&(d+=" for "+c);a=Zb("propertyInfo",a);IE(a)?HE(a):FE({id:a,label:d,icon:"fa fa-map-marker",x:"center",y:"center",width:"500","min-width":"200","max-width":"800",height:"400","min-height":"200","max-height":"600","show-close":"true"},'<propertyinfo feature="feature"></propertyinfo>',void 0,void 0,void 0,{feature:b})}Ia("os.ui.launchPropertyInfo",lI);
function rha(a,b,c,d){if(!c)return"";if("string"===typeof c)return c;d.asyncPostRender=sha;return'<div class="btn btn-link">Show Properties</div>'}function sha(a,b,c){if(c){var d=c.get("ID").toString(),e=c.get("PROPERTIES");if(e instanceof Object&&"string"===typeof d){b=$(a);a=a.ownerDocument;var f=a.defaultView||a.parentWindow;jc(e,tha);b.click(function(){Ee(f)?lI(d,e):f.os.ui.launchPropertyInfo(d,e)})}}}function tha(a,b,c){Aa(a)&&delete c[b]};W.directive("featureinfocell",[function(){return{restrict:"E",scope:{property:"="},replace:!0,templateUrl:"v1542394219/views/feature/featureinfocell.html",controller:mI,controllerAs:"cell"}}]);
function mI(a,b,c){this.v=a;this.K=b;this.j=c;this.g="";b=this.v.property;c=b.value;this.v.type="";c&&(this.v.ca=new NG(b.field),this.v.actions=QF.u().pi(null,this.v.ca,c),"PROPERTIES"==b.field&&"object"===typeof c?this.v.type="prop":0<this.v.actions.length?(this.v.type="ca",1==this.v.actions.length&&(this.v.action=this.v.actions[0].Gl(c),this.v.description=this.v.actions[0].qb())):JA.test(b.field)?this.v.type="desc":(this.g=this.v.property.value,this.v.property.value=this.j.trustAsHtml("<span>"+
RF(c)+"</span>"),this.K.parent().dblclick(this.l.bind(this))));a.$on("$destroy",this.o.bind(this))}mI.$inject=["$scope","$element","$sce"];mI.prototype.o=function(){this.j=this.K=this.v=null};mI.prototype.us=function(){this.v.$emit("os.ui.feature.FeatureInfoCtrl.showDescription")};mI.prototype.showDescription=mI.prototype.us;mI.prototype.RN=function(){var a=this.v.property.feature,b=a.get("PROPERTIES");a=a.get("ID");b instanceof Object&&"string"===typeof a&&lI(a,b)};mI.prototype.viewProperties=mI.prototype.RN;
mI.prototype.qL=function(){PF(this.v.actions,this.v.property.value,this.v.ca)};mI.prototype.pickColumnAction=mI.prototype.qL;mI.prototype.l=function(){bI(this.g)};W.directive("propertiestab",[function(){return{restrict:"E",replace:!0,scope:!1,templateUrl:"v1542394219/views/feature/tab/propertiestab.html",controller:nI,controllerAs:"propctrl"}}]);function nI(a,b){a.columnToOrder="field";a.reverse=!1;a.selected=null;LG.call(this,a,b)}w(nI,LG);nI.$inject=["$scope","$element"];
nI.prototype.g=function(a,b){if(b&&(this.scope.properties=[],b)){a=b.Vb();var c=b.get("recordTime");c&&(this.scope.properties.push({id:"TIME",field:"TIME",value:c}),delete a.TIME);for(var d in a)"GEOTAG"===d?this.scope.properties.push({id:"GEOTAG",field:"GEOTAG",value:a.sourceId,CX:!0}):"PROPERTIES"===d?this.scope.properties.push({id:d,field:d,value:a[d],feature:b}):!KB(d)&&As(a[d])&&this.scope.properties.push({id:d,field:d,value:a[d]})}this.order()};
nI.prototype.order=function(a){a&&(a===this.scope.columnToOrder?this.scope.reverse=!this.scope.reverse:this.scope.columnToOrder=a);var b=this.scope.columnToOrder,c=this.scope.reverse;this.scope.properties.sort(function(a,e){return Pb(a[b].toString(),e[b].toString())*(c?-1:1)})};nI.prototype.order=nI.prototype.order;nI.prototype.select=function(a,b){this.scope.selected=this.scope.selected==b&&a.ctrlKey?null:b};nI.prototype.select=nI.prototype.select;function oI(a,b,c,d,e){this.id=a;this.label=b;this.icon=c;this.template=d;this.data=e||null};function pI(a,b,c,d,e,f){oI.call(this,a,b,c,d,e);this.isShown=!0;this.enableFunc=f}w(pI,oI);function qI(){this.registeredTabs=uha}wa(qI);var uha=[new pI("props","Properties","fa-th","propertiestab"),new pI("desc","Description","fa-newspaper-o","descriptiontab",null,function(a){if(a){a=a.Vb();var b=a._htmlDescription;b||(b=sc(a,function(a,b){return JA.test(b)&&!Lb(Yb(a))})||"");if(null!=b&&""!=b)return!0}return!1})];function rI(){return{restrict:"AE",replace:!0,template:"<div></div>",scope:{items:"=",directiveFunction:"=",generic:"@",alwaysSwitch:"@"},controller:sI,controllerAs:"uiSwitch"}}W.directive("uiswitch",[rI]);
function sI(a,b,c){this.scope=a;this.K=b;this.B="true"===this.scope.alwaysSwitch;this.o=this.g=null;this.A=c;this.s=[];this.s.push(a.$watch("items",this.HG.bind(this)));a.$on("uiSwitch:update",this.er.bind(this));a.$on("$destroy",this.qK.bind(this));this.j=this.l=null;"MutationObserver"in window&&MutationObserver?(this.l=new MutationObserver(this.Wx.bind(this)),this.l.observe(this.K[0],{childList:!0})):this.j=new le(this.Wx,25,this);this.er()}sI.$inject=["$scope","$element","$compile"];var tI=E.V("os.ui.UISwitchCtrl");
g=sI.prototype;g.HG=function(){this.er()};
g.er=function(){var a=this.scope.items;a=q(a)?a:[a];var b=this.scope.directiveFunction,c=this.scope.generic||null,d=null;E.za(tI,"Checking UI ui: "+b+" items: "+a+" generic: "+c);if(a&&b)for(var e=0,f=a.length;e<f;e++){var h=b(a[e]);if(d&&d!=h){d=c;break}else d=h}E.za(tI,"The new UI is "+d);this.B||d!=this.o?(uI(this),d&&(b="<"+d+"></"+d+">",c=this.scope.$new(),c.items=a,this.lt(c),this.g=this.A(b)(c),this.K.append(this.g),this.j&&this.j.start())):this.g&&(c=this.g.scope(),c.items=a,X(c));this.o=
d};g.lt=function(){};g.Wx=function(){this.scope.$emit("controls.changed",this.K.outerWidth(),this.K.outerHeight())};function uI(a){if(a.g){a.scope.$emit("controls.changed",-a.K.outerWidth(),-a.K.outerHeight());var b=a.g.scope();a.g.remove();b&&b.$destroy();a.g=null;a.o=null}}g.qK=function(){for(var a=0,b=this.s.length;a<b;a++)this.s[a]();this.l&&(this.l.disconnect(),this.l=null);this.j&&(this.j.stop(),this.j.dispose(),this.j=null);uI(this);this.A=this.K=this.scope=null};W.directive("featureinfo",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/feature/featureinfo.html",controller:vI,controllerAs:"info"}}]);
function vI(a,b){y.call(this);this.scope=a;this.tabs=qI.u().registeredTabs;this.numTabsShown=1;this.getUi=t(this.j,this);this.element=b;this.g=null;wI(this);$z.u().H("propertychange",this.Zk,!1,this);C.H("feature:valueChange",this.gy,!1,this);a.$watch("items",this.wK.bind(this));a.$on("os.ui.feature.FeatureInfoCtrl.showDescription",this.us.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(vI,y);vI.$inject=["$scope","$element"];g=vI.prototype;
g.J=function(){vI.C.J.call(this);this.g&&(rh(this.g),this.g=null);$z.u().M("propertychange",this.Zk,!1,this);C.M("feature:valueChange",this.gy,!1,this);this.scope=this.element=null};g.gy=function(a){if(a&&this.scope){var b=this.scope.items[0];b&&b.id===a.id&&(this.Zk(),xI(this),X(this.scope))}};g.jH=function(){this.Zk();xI(this);X(this.scope)};g.wK=function(a){this.Xa()||(this.g&&(rh(this.g),this.g=null),this.Zk(),xI(this),a&&(a=a[0])&&(this.g=I(a,"change",this.jH,this)),X(this.scope))};
g.Zk=function(){if(this.scope){this.scope.lon=void 0;this.scope.lat=void 0;this.scope.alt=void 0;var a=this.scope.items[0];if(a&&(a=a.X(),a instanceof Jk&&(a=vk(a),(a=Vi(a,N))&&1<a.length&&(this.scope.lon=a[0],this.scope.lat=a[1],2<a.length)))){var b=$z.u();this.scope.alt=cA(b,a[2],2)}}};g.fs=function(a){this.scope.activeTab=a};vI.prototype.setActiveTab=vI.prototype.fs;function wI(a){0<a.tabs.length&&a.fs(a.tabs[0])}vI.prototype.j=function(a){a.data=this.scope.items[0];return a.template};
function xI(a){for(var b=0,c=a.scope.items[0],d=0;d<a.tabs.length;d++){var e=a.tabs[d];null!=e.enableFunc&&(e.isShown=e.enableFunc.call(e,c));e.isShown&&b++}a.numTabsShown=b;!1===a.scope.activeTab.isShown&&wI(a);a.scope.$broadcast("os.ui.feature.FeatureInfoCtrl.updateTabs",c)}vI.prototype.us=function(){var a=this.tabs.findIndex(function(a){return"desc"==a.id});-1<a&&this.fs(this.tabs[a])};function yI(a){IF.call(this,a)}w(yI,IF);yI.prototype.open=function(a,b,c){if(q(a)){var d=T.u();a=a.map(function(a){var b=null;a instanceof lF?b=a.ee():a instanceof zI&&(b=a.getFeature());return b?{feature:b,geometry:b.X(),layer:d.W(b.get("sourceId")),map:d.Y()}:a});a.length?1===a.length&&(a=a[0]):a=void 0}a&&yI.C.open.call(this,a,b,c)};var mF=void 0;function AI(a){return a&&(a=(q(a)?a:[a]).map(function(a){var b=a.geometry;b||(a=a.feature)&&(b=a.X());return b}).filter(CA),a.length)?a:[]}
function BI(a){return a&&(a=(q(a)?a:[a]).map(function(a){return a.feature}).filter(CA),a.length)?a:[]}function CI(a){if(!DI(a))return!1;a:if(a=BI(a),0<a.length){for(var b=0,c=a.length;b<c;b++){var d=a[b];if(!d||!UE.get(d)){a=!1;break a}}a=!0}else a=!1;return a}function DI(a){a=AI(a);if(a.length){for(var b=0;b<a.length;b++)if(!Hu(a[b]))return!1;return!0}return!1}function vha(a){this.visible=!!(a&&1<a.length)&&DI(a)}function EI(a){this.visible=DI(a)}function FI(a){this.visible=GI(a)}
function GI(a){if(Array.isArray(a)){for(var b=0,c=a.length;b<c;b++)if(!GI(a[b]))return!1;return!0}b=HI.u();return!!a&&!!a.feature&&!!a.layer&&!b.contains(a.feature)}function wha(a){a=a.getContext();Array.isArray(a)||(a=[a]);a.forEach(function(a){if(a.layer){var b=a.layer.O();b&&b.Fb(a.feature)}})}function xha(a){if(UE&&a&&(1===a.length||!q(a))&&DI(a)){var b=2;a=BI(a);a.length&&!UE.get(a[0])&&(b=1);this.visible=HD(UE).length>=b}else this.visible=!1}function II(a){this.visible=CI(a)}
function yha(a){this.visible=DI(a)&&!CI(a)}function zha(a){a=BI(a);if(a.length){for(var b=0,c=a.length;b<c;b++){var d=a[b];if(!UE.get(d)||!1===d.get("shown")){this.visible=!1;return}}this.visible=!0}else this.visible=!1}function Aha(a){a=BI(a);if(a.length){for(var b=0,c=a.length;b<c;b++){var d=a[b];if(!UE.get(d)||d.get("shown")){this.visible=!1;return}}this.visible=!0}else this.visible=!1}
function JI(a,b){var c=a.getContext();if(c){q(c)||(c=[c]);for(var d=[],e=[],f=0,h=c.length;f<h;f++){var k=c[f].feature,l=c[f].geometry;if(l){var m=UE,n=WE;k=k||new ek(l);switch(a.type){case "load":case "add":e.push(k);d.push(new sF(k,!0,!1,"add"===a.type,b));break;case "exclude":case "add_exclude":e.push(k);d.push(new sF(k,!1,!0,"add_exclude"===a.type,b));break;case "save":case "edit":if(l=MB(k)){var p=l.getColumns();k=k.clone();k.set("_sourceName",l.S(),!0)}ZE(k,p);break;case "enable":case "disable":d.push(new bF(k,
"enable"===a.type));break;case "removeArea":d.push(new cF(k));break;case "area:modify":l={ui:"os-modifyarea"};m.get(k)?l.area=k:(l.targetArea=k,l.op=sG);if(IE("modifyArea")){var r=$(".js-window#modifyArea .modal-body").scope();r&&(Cc(r,l),X(r));HE("modifyArea")}else r=l.ui||"modifyarea",FE({id:"modifyArea",label:"Modify Area...",icon:"fa fa-edit",x:"center",y:"center",width:400,height:"auto","show-close":!0,"no-scroll":!0},"<"+r+' area="area" target-area="targetArea" op="op"></'+r+">",void 0,void 0,
void 0,{area:l.area||null,op:l.op,targetArea:l.targetArea||null});break;case "area:merge":case "export":case "featureInfo":e.push(k)}}}}if(e.length){switch(a.type){case "load":case "add":case "exclude":case "add_exclude":f=0;for(h=e.length;f<h;f++)(b=m.get(e[f]))&&!b.get("shown")&&d.push(new bF(b,!0));break;case "featureInfo":f=(f=c[0].layer)?f.S():void 0,KI(e,f)}if("area:merge"===a.type)FE({label:"Merge Areas",x:"center",y:"center",width:400,height:"auto","show-close":!0,modal:!1},"<mergeareas></mergeareas>",
void 0,void 0,void 0,{features:e});else if("export"===a.type)a.preventDefault(),a.stopPropagation(),EG(e);else if("load"===a.type||"exclude"===a.type)for(m=HD(m),f=0,h=m.length;f<h;f++)(b=m[f])&&b.get("shown")&&(c=aF(n,b),"load"===a.type&&1<c&&-1===e.indexOf(b)&&d.push(new bF(b,!1)),"exclude"!==a.type||1!==c&&3!==c||b==k||d.push(new bF(b,!1)))}d.length&&(1===d.length?gF(hF.u(),d[0]):(a=new oF,a.Zb(d),a.title=d[d.length-1].title.replace("Add","Set"),gF(hF.u(),a)))}
function LI(a){var b=YE(WE),c=[],d=!0;void 0!==a&&(d=0<WE.getEntries("*",a,null).length)&&(a=void 0);for(var e in b){var f=T.u().W(e);try{f&&(void 0!==a&&(d=0<WE.getEntries(e,a,null).length),c.push({id:e,label:b[e],type:f.Nf()?f.Nf():"other",enabled:d}))}catch(h){}}c.sort(function(a,b){return Ob(a.label,b.label)});return c}
function Bha(a){var b=this.find("Query"),c=this.find("Exclude");if(b&&c){for(;b.removeChild("Choose Layers"););for(;c.removeChild("Choose Layers"););if(DI(a)){a=LI();for(var d={},e=0,f=0;f<a.length;f++){var h=a[f].type;d[h]||(d[h]=0,e++);d[h]++}0<e&&b&&c&&(MI(b,"add",d),MI(c,"add_exclude",d))}}}
function MI(a,b,c){var d=a.R({label:"Choose Layers",type:"submenu",sort:10}),e=d.R({type:"group",label:"By Layer Type",sort:0}),f=0,h;for(h in c){var k=ec(h);e.R({label:k+" ("+c[h]+")",eventType:b+":"+h,ya:NI,tooltip:a.label+" area for layes of type ("+k+")",sort:f++})}d.R({label:"Custom...",eventType:b+":custom",ya:NI,sort:f})}W.directive("layerchooser",[function(){return{restrict:"E",templateUrl:"v1542394219/views/action/layerchooser.html",controller:OI,controllerAs:"layerchooser"}}]);
function OI(a,b){this.v=a;this.K=b}OI.$inject=["$scope","$element"];OI.prototype.valid=function(){return!ib(this.v.layers,function(a){return a.enabled})};OI.prototype.valid=OI.prototype.valid;OI.prototype.accept=function(){this.v.event.type=this.v.action;var a=[];db(this.v.layers,function(b){b.enabled&&a.push(b.id)});JI(this.v.event,a);this.close()};OI.prototype.accept=OI.prototype.accept;OI.prototype.close=function(){KE(this.K)};OI.prototype.close=OI.prototype.close;
function NI(a){var b=a.type.split(":"),c=b[0],d=b[1];b=null;b=(b=a.getContext())&&b.feature?LI(b.feature.D()):LI();if("custom"==d)FE({id:"spatiallayerchooser",label:"Choose Layers",icon:"fa fa-align-justify",x:"center",y:"center",width:"350",height:"500","min-width":"300","max-width":"1000","min-height":"250","max-height":"1000",modal:"true","show-close":"true"},'<layerchooser class="flex-fill d-flex"></layerchooser>',void 0,void 0,void 0,{event:a,action:c,layers:b});else{var e=[];jc(b,function(a){a.type==
d&&e.push(a.id)});a.type=c;JI(a,e)}};W.directive("drawingfeaturenodeui",[function(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()"><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph"title="Remove the feature"></i></span></span>',controller:PI,controllerAs:"nodeUi"}}]);function PI(a,b){eF.call(this,a,b)}w(PI,eF);PI.$inject=["$scope","$element"];PI.prototype.remove=function(){var a=this.scope.item,b=a.getFeature();b&&(a.getParent().removeChild(a),T.u().Fb(b))};PI.prototype.remove=PI.prototype.remove;function zI(a){jz.call(this);this.j="<drawingfeaturenodeui></drawingfeaturenodeui>";this.g=null;this.l=!1;this.zf(a)}w(zI,jz);P(zI,"os.ui.menu.IMenuSupplier");g=zI.prototype;g.ix=function(){return mF};g.Ga=function(a){zI.C.Ga.call(this,a);this.g&&(a=LB(this.g).O(),"off"===this.getState()?(this.g.la.opacity=0,this.l&&this.g.Ue("_highlightStyle",!0),jH(this.g)):(this.g.la.opacity=void 0,this.l?jH(this.g):this.g.yb(this.g.get("_originalStyle"))),WB(this.g,a))};g.getFeature=function(){return this.g};
g.zf=function(a){this.g!==a&&(this.g=a,this.g.hc=!0,a.get("_style")||this.g.get("_originalStyle")||(a=this.g.Qb(),this.g.set("_originalStyle",q(a)?a:[a],!0)));if(a=this.g)this.l=!!a.get("_style"),this.Da(a.get("title")||a.get("label")||a.get("name")||String(a.D())),a=a.get("opacity"),this.Ga(0===a?"off":"on")};g.Hc=function(){return this.g?this.g.get("icons")||this.g.get("icon")||"":""};
g.ej=function(){if(this.g&&"off"!==this.getState()){if(this.l)this.g.set("_highlightStyle",WG,!0),jH(this.g);else{var a=this.g.get("_originalStyle").map(Cha);this.g.yb(a)}(a=LB(this.g))&&CH(a,[this.g])}};function Cha(a){if(a){a=a.clone();var b=[0,255,255,.5],c=[0,255,255,1],d;var e=a.Ua();if(e instanceof Yj||e instanceof Xj){if(d=e.ob())d.g=b,d.j=void 0;if(e=e.kb())e.G=c,e.l=void 0}if(e=a.kb())e.G=c,e.l=void 0;if(d=a.ob())c=d,c.g=b,c.j=void 0;return a}return null}
g.Jh=function(){if(this.g&&"off"!==this.getState()){this.l?(this.g.Ue("_highlightStyle",!0),jH(this.g)):this.g.yb(this.g.get("_originalStyle"));var a=LB(this.g);a&&CH(a,[this.g])}};function QI(a,b,c,d){z.call(this,a);this.j=b||null;this.message=d||null}w(QI,z);function RI(a,b,c,d){this.type=a.toLowerCase();this.g=b;this.title=c;this.j=d};var V=null;function SI(){jz.call(this);this.log=Dha;this.Ee=this.hb=!1;this.jm=!0;this.s="default"}w(SI,jz);var Dha=E.V("os.ui.data.BaseProvider");g=SI.prototype;g.bc=function(a){this.eb(a.enabled);this.Da(a.label)};g.load=function(){};g.mc=function(){return this.hb};g.eb=function(a){var b=this.hb!==a;this.hb=a;b&&this.dispatchEvent(new U("children",null,a))};g.getError=function(){return!1};g.Eo=function(){return!0};
function TI(a){for(var b=a.D()+"#"+$b(),c=!1;!c;)c=(c=a.na())?!gb(c,function(a){return a.D()==b}):!0,b=a.D()+"#"+$b();return b};function UI(){SI.call(this);this.url="";this.og=null;this.Ia=0;this.Nb=!1;this.oa=null;this.G=!1}w(UI,SI);g=UI.prototype;g.init=function(){this.Ga("off")};g.bc=function(a){UI.C.bc.call(this,a);this.Lb(a.url);this.init()};g.load=function(a){this.dispatchEvent(new QI("dataProviderLoading",this));this.Va(!0);this.G=a||!1;VI(this,!1)};g.rr=function(){return!0};g.finish=function(){this.Va(!1);this.dispatchEvent(new QI("dataProviderLoaded",this))};
g.Hc=function(){var a=UI.C.Hc.call(this);this.getError()&&(a+='<i class="fa fa-warning text-warning" title="Server failed to load. See the log/alerts window for details."></i>');return a};g.Ka=function(){return this.url};g.Lb=function(a){this.url=a};g.getError=function(){return this.Nb};function VI(a,b){a.Nb=b;a.Nb||WI(a,null);a.dispatchEvent(new U("icons"))}g.ti=function(){return this.oa};function WI(a,b){a.oa=b;a.oa&&VI(a,!0)}g.mb=function(){return this.df};UI.prototype.isLoading=UI.prototype.mb;
UI.prototype.Va=function(a){this.df!=a&&(this.df=a,this.dispatchEvent(new U("loading",a,!a)))};UI.prototype.uf=function(a){this.mb()||UI.C.uf.call(this,a)};function XI(){A.call(this);this.log=Eha;this.l={};this.s={};this.o=new jz;this.j={};this.I=new le(this.Hr,50,this);var a=window.localStorage.getItem(YI());a&&(a=JSON.parse(a),O.set(YI(),a),window.localStorage.removeItem(YI()))}w(XI,A);wa(XI);var Eha=E.V("os.data.DataManager");function ZI(a,b){b.type in a.l?E.ib(a.log,'The provider type "'+b.type+'" has already been registered with the data manager!'):a.l[b.type]=b}
function $I(a,b,c){b=b.toLowerCase();b in a.s?E.error(a.log,'The descriptor type "'+b+'" already exists!'):a.s[b]=c}function aJ(a,b){b=b.toLowerCase();if(b in a.s)return new a.s[b];E.za(a.log,'No descriptor exists for type "'+b+'".');return null}function bJ(a,b){if(b.D()){for(var c=b.mh(),d=0,e=c.length;d<e;d++)a.j[c[d]]=b;a.dispatchEvent(new lA("addDescriptor",b));a.I.start()}else E.error(a.log,"Could not add the descriptor because its ID was empty or null")}
function qE(a,b){if(b.D()){for(var c=b.mh(),d=0,e=c.length;d<e;d++)delete a.j[c[d]];a.dispatchEvent(new lA("removeDescriptor",b));a.I.start()}else E.error(a.log,"Could not remove the descriptor because its ID was empty or null")}g=XI.prototype;g.Ja=function(a){return a in this.j?this.j[a]:null};function pE(a,b){var c=[],d;for(d in a.j)if(!b||0===d.indexOf(b)){var e=a.j[d];-1===c.indexOf(e)&&c.push(e)}return c}
function cJ(a,b){if(a.rb(b.D()))throw Error('A provider with the ID "'+b.D()+'" already exists! Modify that one rather than replacing it.');a.o.R(b);b.H("propertychange",a.zw,!1,a);a.dispatchEvent(new QI("addDataProvider",b))}function dJ(a,b){if(b=a.rb(b))b.M("propertychange",a.zw,!1,a),a.o.removeChild(b),a.dispatchEvent(new QI("removeDataProvider",b)),b.dispose()}g.zw=function(a){var b=a.target;"loading"!=a.l||b.mb()||this.dispatchEvent(new QI("dataProviderLoaded",b))};
g.rb=function(a){a=a.replace(/#.*/,"");var b=b?b.replace(/#.*/,""):null;var c=this.o.na(),d=null;if(c)for(var e=0,f=c.length;e<f;e++)if(c[e].D()==a||b&&c[e]instanceof UI&&c[e].Ka()==b){d=c[e];break}return d};g.th=function(){var a=this.o.na();return a?gb(a,function(a){return a.mc()&&a.getError()}):!1};
g.Hr=function(){var a=[],b={},c=Date.now()-2592E6,d;for(d in this.j)if(!(d in b)){var e=this.j[d];if(e){for(var f=e.mh(),h=0,k=f.length;h<k;h++)b[f[h]]=!0;if(P(e,"os.data.IUrlDescriptor")&&(f=e.Ka(),!f||Uw(f)&&!(my.u().g instanceof jy)))continue;(e.isLocal()||e.od>c)&&a.push(e.sa())}}O.set(YI(),a)};function YI(){return"opensphere.descriptors"};function eJ(){A.call(this);this.ma=$b();this.j="New Filter";this.l=!1;this.type="";this.A=this.g=this.o=null;this.enabled=!1;this.xh=!0}w(eJ,A);g=eJ.prototype;g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.S=function(){return this.j};g.Ta=function(a){this.j=a};g.qb=function(){return this.o};g.fb=function(a){this.o=a};g.T=function(){return this.type};g.Sb=function(a){this.type=a};g.isEnabled=function(){return this.enabled};g.eb=function(a){this.enabled=a};g.pb=function(){return this.g};
g.Zf=function(a){var b=this.g;if(this.g=a)try{this.A=VA(this.g)}catch(c){}this.dispatchEvent(new U("filter",this.g,b))};function fJ(a){return a.A?Ag(a.A):null}
g.matches=function(a){var b=!1;if(a){b=!0;for(var c={},d=0;d<a.length;d++)c[a[d].name]=a[d].type;a=fJ(this).querySelectorAll("PropertyName");for(d=0;d<a.length;d++){var e=a[d];if(e.textContent in c){var f=c[e.textContent];if("decimal"==f){var h=e.nextElementSibling;h&&"Literal"===h.localName||(h=e.parentElement.querySelector("Literal"));if(h&&(e=h.textContent||null)&&isNaN(parseFloat(e))){b=!1;break}}if(Ib(f,"gml:")){b=!1;break}}else{b=!1;break}}}return b};
g.clone=function(){var a=this.sa(),b=new this.constructor;b.restore(a);return b};g.sa=function(a){a||(a={});a.id=this.ma;a.title=this.j;a.description=this.o;a.type=this.type;a.filter=this.g;a.enabled=this.enabled;a.match=this.xh;return a};g.restore=function(a){this.ma=a.id;this.j=a.title;this.o=a.description;this.type=a.type;this.Zf(a.filter);this.eb(a.enabled);this.xh=a.match};function gJ(a,b,c){z.call(this,a);this.key=b||null;this.g=c||null}w(gJ,z);W.directive("fbText",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/filter/text.html"}}]);var hJ={string:/.*/,decimal:/^\-?\d+((\.|,)\d+)?$/,integer:/^\-?\d+$/};function iJ(a,b,c,d){d.$parsers.unshift(function(c){var e=a.expr.column.type,h=hJ[e];if(h&&h.test(c))return d.$setValidity("type",!0),b.attr("title",""),c;d.$setValidity("type",!1);b.attr("title","Please enter a valid "+e)})}iJ.$inject=["$scope","$element","$attrs","$ctrl"];
W.directive("coltypecheck",[function(){return{require:"ngModel",link:iJ}}]);W.directive("fbBetween",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/filter/between.html",controller:jJ,controllerAs:"betweenCtrl"}}]);function jJ(a){this.v=a;this.min=0;this.max=1;if(null!=a.expr.literal){var b=a.expr.literal.split(/\s*,\s*/);2==b.length&&(this.min=parseFloat(b[0]),this.max=parseFloat(b[1]))}this.dd();a.$on("$destroy",this.g.bind(this))}jJ.$inject=["$scope"];jJ.prototype.g=function(){this.v=null};
jJ.prototype.dd=function(){var a=parseFloat(this.min),b=parseFloat(this.max),c="";isNaN(a)||(c+=a+", ");isNaN(b)||(c+=b);this.v.expr.literal=c};jJ.prototype.onChange=jJ.prototype.dd;function kJ(a,b,c,d,e,f,h,k){this.localName=a;this.j=b;this.s=c||b;this.o=d||null;this.l=e||"";this.A=h||"fb-text";this.hint=f||"";this.Bl=!0===k||!1}kJ.prototype.S=function(){return this.j};kJ.prototype.getTitle=kJ.prototype.S;kJ.prototype.Uj=function(){return this.s};kJ.prototype.getShortTitle=kJ.prototype.Uj;g=kJ.prototype;g.Hj=function(){return this.l};g.Qf=function(){return this.A};
g.pb=function(a,b){var c=null;a&&(c="<"+this.localName+(this.l?" "+this.l:"")+"><PropertyName>"+a+"</PropertyName>",b&&!this.Bl&&(c+="<Literal><![CDATA["+b.trim()+"]]\x3e</Literal>"),c+="</"+this.localName+">");return c};g.jd=function(){return""};g.Od=function(a){return a.find("*").filter(function(){return"PropertyName"==this.localName}).first().text()};g.oh=function(a){return this.Bl?null:a.find("*").filter(function(){return"Literal"==this.localName}).first().text()};
g.matches=function(a){return a&&a.length?a[0].localName==this.localName:!1};g.sk=function(a){return a&&this.o?-1<this.o.indexOf(a):a&&0===a.indexOf("gml:")?!1:!0};g.Wb=function(a,b){return this.Bl?!0:a?(b=hJ[b])&&b.test(a)?!0:!1:!1};function lJ(){kJ.call(this,"And","is between","between",["integer","decimal"],'hint="between"',void 0,"fb-between")}w(lJ,kJ);g=lJ.prototype;g.jd=function(a,b){return(b=mJ(b))&&2==b.length&&b[0]!==b[1]?"("+a+">="+b[0]+"&&"+a+"<="+b[1]+")":""};
g.pb=function(a,b){var c="";(b=mJ(b))&&2==b.length&&b[0]!==b[1]&&(c=this.Hj(),c="<"+this.localName+(c?" "+c:"")+">",c+="<PropertyIsGreaterThanOrEqualTo><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[0]+"]]\x3e</Literal></PropertyIsGreaterThanOrEqualTo><PropertyIsLessThanOrEqualTo><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[1]+"]]\x3e</Literal></PropertyIsLessThanOrEqualTo>",c+="</"+this.localName+">");return c};
function mJ(a){if(a){var b=a.trim().split(/\s*,\s*/);if(2==b.length&&(a=parseFloat(b[0]),b=parseFloat(b[1]),!isNaN(a)&&!isNaN(b)))return[Math.min(a,b),Math.max(a,b)]}return null}g.oh=function(a){var b=[];a.find("Literal").each(function(a,d){b.push($(d).text())});return b.join(", ")};g.matches=function(a){return a?"between"==a.attr("hint"):!1};g.Wb=function(a,b){if(a&&(a=a.trim().split(/\s*,\s*/),2==a.length)){var c=parseFloat(a[1]);b=hJ[b];return b.test(parseFloat(a[0]))&&b.test(c)}return!1};function nJ(){kJ.call(this,"PropertyIsEqualTo","is equal to","=")}w(nJ,kJ);nJ.prototype.jd=function(a,b){return null!=b?a+"=="+AB(b):""};function oJ(){kJ.call(this,"PropertyIsGreaterThan","is greater than",">")}w(oJ,kJ);oJ.prototype.jd=function(a,b){return Lb(Yb(b))?"":a+">"+AB(b)};function pJ(){kJ.call(this,"PropertyIsGreaterThanOrEqualTo","is greater than or equal to",">=")}w(pJ,kJ);pJ.prototype.jd=function(a,b){return Lb(Yb(b))?"":a+">="+AB(b)};function Fha(a){var b=null;a&&a.clipboardData?b=a.clipboardData.getData("text"):void 0!==window.clipboardData&&(b=window.clipboardData.getData("text"));return void 0!==b?b:null};W.directive("fbList",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/filter/list.html"}}]);function qJ(a,b){this.v=a;this.K=b;this.j=/[\n\r\t](?=[\S])/g;this.K.on("paste",this.g.bind(this));a.$on("$destroy",this.l.bind(this))}qJ.$inject=["$scope","$element"];qJ.prototype.g=function(a){if(null!=Fha(a.originalEvent)){var b=this;setTimeout(function(){b.v.expr.literal=b.v.expr.literal.replace(b.j,", ").replace(/[\n\r\t]\s*/g,"").trim();X(b.v)},10)}};
qJ.prototype.l=function(){this.K.off("paste");this.K=this.v=null};function rJ(a,b,c,d){d.$parsers.unshift(function(c){var e=a.expr.column.type,h=hJ[e],k=c?c.split(/\s*,\s*/):null;d.$setValidity("type",!0);b.attr("title","");if(k&&k.length)for(var l=0,m=k.length;l<m;l++){var n=k[l];if(h&&!n||!h.test(n)){d.$setValidity("type",!1);b.attr("title","Please enter a valid "+e+" for item "+(l+1));c=void 0;break}}else d.$setValidity("type",!1),b.attr("title","Please enter a value"),c=void 0;return c})}
rJ.$inject=["$scope","$element","$attrs","$ctrl"];W.directive("coltypelist",[function(){return{require:"ngModel",controller:qJ,link:rJ}}]);function sJ(a,b,c,d,e,f){kJ.call(this,"Or",a||"is in list",b||"in list",c||null,d||'hint="in list"',e||"e.g. A, B, ...",f||"fb-list");this.g="in list"}w(sJ,kJ);function tJ(a){var b=[];if(a&&(a=a.trim().split(/\s*,\s*/),0<a.length))for(var c=0;c<a.length;c++){var d=a[c].trim();d&&b.push(d)}return b}g=sJ.prototype;g.jd=function(a,b){b=tJ(b);return 0<b.length?(b=b.map(AB),"(["+b.join(",")+"]).indexOf(String("+a+"))!=-1"):""};
g.pb=function(a,b){var c="";b=tJ(b);if(0<b.length){c=this.Hj();c="<"+this.localName+(c?" "+c:"")+">";for(var d=0,e=b.length;d<e;d++)c+="<PropertyIsEqualTo><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[d].trim()+"]]\x3e</Literal></PropertyIsEqualTo>";c+="</"+this.localName+">"}return c};g.oh=function(a){var b=[];a.find("Literal").each(function(a,d){b.push($(d).text())});return b.join(", ")};g.matches=function(a){return a?a.attr("hint")==this.g:!1};
g.Wb=function(a,b){var c=!1;if(a){a=a.trim().split(/\s*,\s*/);b=hJ[b];c=!0;for(var d=0,e=a.length;d<e;d++)if(!b.test(a[d])){c=!1;break}}return c};function uJ(){kJ.call(this,"PropertyIsLike","is like","like",["string"],'wildCard="*" singleChar="." escape="\\"',"e.g. abc*")}w(uJ,kJ);uJ.prototype.jd=function(a,b){return Lb(Yb(b))?"":(b=BB(b),b=String(b).replace(/([\\"])/g,"\\$1"),"/^"+b+"$/i.test("+a+")")};W.directive("fbTextNoColCheck",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/filter/textnocolcheck.html",controller:vJ,controllerAs:"textNoColCheckCtrl"}}]);function vJ(a){this.v=a;this.start=void 0;null!=a.expr.literal&&(this.start=a.expr.literal);this.dd();a.$on("$destroy",this.g.bind(this))}vJ.$inject=["$scope"];vJ.prototype.g=function(){this.v=null};vJ.prototype.dd=function(){this.v.expr.literal=this.start};vJ.prototype.onChange=vJ.prototype.dd;function wJ(a,b,c,d,e,f){c=c||["integer","decimal"];kJ.call(this,"And",a||"is like",b||"like",c,d||'hint="is like numeric"',e||"e.g. 12.34*",f||"fb-text-no-col-check");this.g="is like numeric"}w(wJ,kJ);g=wJ.prototype;g.jd=function(a,b){return(b=xJ(b))&&2==b.length&&b[0]!==b[1]?"("+a+">="+b[0]+"&&"+a+"<"+b[1]+")":""};
g.pb=function(a,b){var c="";if((b=xJ(b))&&2==b.length){var d=this.Hj();c+="<"+this.localName+(d?" "+d:"")+">";c+="<PropertyIsGreaterThanOrEqualTo><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[0]+"]]\x3e</Literal></PropertyIsGreaterThanOrEqualTo><PropertyIsLessThan><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[1]+"]]\x3e</Literal></PropertyIsLessThan>";c+="</"+this.localName+">"}return c};
function xJ(a){if(a){var b=a.trim().split("*")[0];a=parseFloat(b);if(!isNaN(a)){b=b.split(".");var c=0;2==b.length&&(c=-b[1].length);return[a,(a+Math.pow(10,c)).toFixed(Math.abs(c))]}}return null}g.Wb=function(a,b){if(!a)return!1;a=Number(a.trim().split("*")[0]);return(b=hJ[b])&&b.test(a)?!0:!1};g.oh=function(a){return a.find("PropertyIsGreaterThanOrEqualTo Literal").text()+"*"};g.matches=function(a){return a?a.attr("hint")==this.g:!1};function yJ(){kJ.call(this,"PropertyIsNull","is empty","empty",void 0,void 0,void 0,"span",!0)}w(yJ,kJ);yJ.prototype.jd=function(a){return"("+a+"==null||"+a+'==="")'};function zJ(){kJ.call(this,"PropertyIsLessThan","is less than","<")}w(zJ,kJ);zJ.prototype.jd=function(a,b){return Lb(Yb(b))?"":a+"<"+AB(b)};function AJ(){kJ.call(this,"PropertyIsLessThanOrEqualTo","is less than or equal to","<=")}w(AJ,kJ);AJ.prototype.jd=function(a,b){return Lb(Yb(b))?"":a+"<="+AB(b)};function BJ(){sJ.call(this,"is like list","like list",["string"],'hint="like list"',"A, b*, ...","fb-list");this.g="like list"}w(BJ,sJ);BJ.prototype.jd=function(a,b){b=tJ(b);return 0<b.length?(b=b.map(function(a){a=BB(a);return String(a).replace(/([\\"])/g,"\\$1")}),"/^("+b.join("|")+")$/i.test("+a+")"):""};
BJ.prototype.pb=function(a,b){if(a=BJ.C.pb.call(this,a,b))a=a.replace(/<PropertyIsEqualTo/g,'<PropertyIsLike wildCard="*" singleChar="." escape="\\"'),a=a.replace(/<\/PropertyIsEqualTo/g,"</PropertyIsLike");return a};W.directive("fbListNoColCheck",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/filter/listnocolcheck.html"}}]);function CJ(){wJ.call(this,"is like list","like list",["decimal","integer"],"","eg. 12.45*, 3.568*, ...","fb-list-no-col-check");this.g="like list numeric"}w(CJ,wJ);function DJ(a){var b=[];if(a&&(a=a.trim().split(/\s*,\s*/),0<a.length))for(var c=0;c<a.length;c++){var d=a[c].trim();d&&b.push(d)}return b}g=CJ.prototype;g.jd=function(a,b){var c="";b=DJ(b);if(0<b.length){for(var d=[],e=0,f=b.length;e<f;e++){var h=CJ.C.jd.call(this,a,b[e]);h&&d.push(h)}0<d.length&&(c+="("+d.join("||")+")")}return c};
g.pb=function(a,b){var c="";b=DJ(b);if(0<b.length){c+='<Or hint="like list numeric">';for(var d=0,e=b.length;d<e;d++)c+=CJ.C.pb.call(this,a,b[d]);c+="</Or>"}return c};g.Wb=function(a,b){var c=!1;a=DJ(a);if(0<a.length){c=!0;for(var d=0,e=a.length;d<e;d++){var f=Number(a[d].trim().split("*")[0]),h=hJ[b];h&&h.test(f)||(c=!1)}}return c};g.matches=function(a){return a?a.attr("hint")==this.g:!1};
g.oh=function(a){var b=[];a.find("PropertyIsGreaterThanOrEqualTo Literal").each(function(a,d){b.push($(d).text()+"*")});return b.join(", ")};function EJ(a){this.g=a;kJ.call(this,"Not","not");this.hint=a.hint||""}w(EJ,kJ);EJ.prototype.S=function(){return this.g.S().replace("is","is not")};EJ.prototype.getTitle=EJ.prototype.S;EJ.prototype.Uj=function(){return"not "+this.g.Uj()};EJ.prototype.getShortTitle=EJ.prototype.Uj;g=EJ.prototype;g.Hj=function(){return this.g.Hj()};g.Qf=function(){return this.g.Qf()};g.jd=function(a,b){return(a=this.g.jd(a,b))?"!("+a+")":""};g.pb=function(a,b){return(a=this.g.pb(a,b))?"<Not>"+a+"</Not>":""};g.Od=function(a){return this.g.Od(a)};
g.oh=function(a){return this.g.oh(a)};g.matches=function(a){return EJ.C.matches.call(this,a)&&1==a.children().length&&this.g.matches(a.children().first())};g.sk=function(a){return this.g.sk(a)};g.Wb=function(a,b){return this.g.Wb(a,b)};function FJ(){EJ.call(this,new lJ)}w(FJ,EJ);function GJ(){kJ.call(this,"PropertyIsNotEqualTo","is not equal to","!=")}w(GJ,kJ);GJ.prototype.jd=function(a,b){return null!=b?a+"!="+AB(b):""};function HJ(){EJ.call(this,new uJ)}w(HJ,EJ);function IJ(){EJ.call(this,new yJ)}w(IJ,EJ);var JJ=["And","Or","Not"],KJ=[new nJ,new GJ,new zJ,new AJ,new oJ,new pJ,new uJ,new HJ,new lJ,new FJ,new yJ,new IJ,new sJ,new EJ(new sJ),new BJ,new EJ(new BJ),new wJ,new CJ],Gha=["Intersects","Disjoint","BBOX"];
function LJ(a,b,c){b=null!=b?b:-1;var d="";if(a&&-1==Gha.indexOf(a.localName)){var e=a.childNodes;a=MJ(a);for(var f=0;f<e.length;f++){var h=e[f];0<f&&a&&(d+=" "+a.toUpperCase()+" ");var k=MJ(h);if("Not"===k)d+=k.toUpperCase()+" ("+LJ(h,void 0,c)+")";else if(k)d+="("+LJ(h,void 0,c)+")";else if("PropertyIsNotEqualTo"===h.localName&&c)k=h.childNodes,h=NJ(k),k=OJ(k),d+="NOT ("+h+" = "+k+")";else{k=h;var l=c;h="";if(null!=k){if(k){var m=k.parentNode;m=null!=m&&!(null!=k&&null!=MJ(k))&&null!=m&&null!=MJ(m)}else m=
!1;if(m){var n=k.childNodes;if(n&&0<n.length)if(m=NJ(n),1<n.length){l=OJ(n,l);a:{if(k){n=0;for(var p=KJ.length;n<p;n++)if(KJ[n].localName==k.localName){k=KJ[n].Uj();break a}}k=null}h+=m+" "+k+" "+l}else 1==n.length&&(h=l?h+(m+" = '' or "+m+" is null"):h+(m+" is empty"))}else(k=MJ(k))&&(h+=k)}d+=null!=h?h:""}}}0<b&&d.length>b&&(d=d.substr(0,b-3)+"...");return d}function NJ(a){var b="";a&&a[0]&&(b=zl(a[0],!0).trim());return b}
function OJ(a,b){var c="";a&&a[1]&&(c=a[1].textContent||"",c=isNaN(c)?"'"+c+"'":c,b&&Ub(c,"*")&&(c=c.replace(/\*/g,"%")));return c}function MJ(a){return a&&(a=a instanceof Node?a.localName:"string"==typeof a?a:a?String(a):null)&&(a=JJ.indexOf(a),-1<a)?JJ[a]:null}function Hha(a){if(a){var b=angular.element(a);return ib(KJ,function(a){return a.matches(b)})}return null}function Iha(a){return(a=PJ.ld(a))?a.ff():null}
function Jha(a){for(var b=0,c=KJ.length;b<c;b++)if(KJ[b].sk(a.type))return!0;return!1}
function QJ(a){var b=[];if(!Lb(a)){var c=pE(V).filter(function(b){return P(b,"os.filter.IFilterable")?b.ff()===a:!1});if(c.length)b=c.reduce(function(a,b){return a=a.concat(b.Jl())},b);else{c=a.lastIndexOf("!!");var d=a.indexOf("#");-1!=c?(a=a.substring(c+2),-1!=a.lastIndexOf(":")&&(a=a.substring(a.lastIndexOf(":")+1))):-1!=d&&(a=a.substring(d+1),-1!=a.indexOf("#")&&(a=a.substring(0,a.lastIndexOf("#"))));b.push(a)}}return b};W.directive("opuiswitch",[function(){var a=rI();a.template="<span></span>";a.scope.expr="=";a.controller=RJ;return a}]);function RJ(a,b,c){sI.call(this,a,b,c)}w(RJ,sI);RJ.$inject=["$scope","$element","$compile"];RJ.prototype.lt=function(a){a.expr=this.scope.expr};W.directive("expression",[function(){return{restrict:"AE",replace:!0,scope:{expr:"=",columns:"="},templateUrl:"v1542394219/views/filter/expression.html",controller:SJ,controllerAs:"exprCtrl"}}]);function TJ(){this.literal=this.op=this.column=this.g=null}TJ.prototype.pb=function(){return this.op?this.op.pb(this.column.field||this.column.name,this.literal):null};
function UJ(a,b){if(b){b=angular.element(b);a.literal="";for(var c=0,d=KJ.length;c<d;c++)if(KJ[c].matches(b)){c=KJ[c];a.g=c.Od(b);a.literal=c.oh(b);a.op=c;break}}}TJ.prototype.Wb=function(a){return this.column&&this.op?this.op.Wb(a,this.column.type):!1};TJ.prototype.clone=function(){var a=new TJ;a.column=this.column;a.op=this.op;a.literal=this.literal;var b=this.pb();if(b)try{UJ(a,Ag($.parseXML(b)))}catch(c){}return a};
function SJ(a){this.scope=a;this.scope.ops=KJ;a.columns&&(a.columns=a.columns.filter(this.CK,this));var b=a.expr;b.g&&!b.column&&(b.column=aG(this.scope.columns,b.g));b.column=b.column||this.scope.columns[0];b.op=b.op||KJ[0];a.$watch("expr.column",this.Rv.bind(this));a.$watch("expr.op",this.zz.bind(this));this.Rv(b.column,null)}SJ.$inject=["$scope","$element"];g=SJ.prototype;
g.CK=function(a){if(!/datetime/i.test(a.type))for(var b=0,c=this.scope.ops.length;b<c;b++)if(this.scope.ops[b].sk(a.type))return!0;return!1};g.Rv=function(a,b){a!==b&&(this.scope.ops=KJ.filter(this.HC,this),a=this.scope.expr,a.op=-1<this.scope.ops.indexOf(a.op)?a.op:this.scope.ops[0],this.zz())};g.zz=function(){try{var a=this.scope.exprForm.literal;a.$viewValue&&(a.$setViewValue(a.$viewValue),a.$$parseAndValidate())}catch(b){}};
g.HC=function(a){return this.scope&&this.scope.expr&&this.scope.expr.column?a.sk(this.scope.expr.column.type):!1};g.Qf=function(a){return a?a.Qf():null};SJ.prototype.getUi=SJ.prototype.Qf;W.directive("expressionnodeui",[function(){return{restrict:"AE",replace:!0,template:'<span><span ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit the expression"></i></span><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the expression"></i></span></span>',controller:VJ,controllerAs:"nodeUi"}}]);function VJ(a){this.v=a}VJ.$inject=["$scope","$element"];VJ.prototype.remove=function(){this.v.$emit("filterbuilder.remove",this.v.item)};
VJ.prototype.remove=VJ.prototype.remove;VJ.prototype.Pc=function(){this.v.$emit("advancedfilterbuilder.editExpr",this.v.item)};VJ.prototype.edit=VJ.prototype.Pc;function WJ(a){jz.call(this);this.nodeType="expression";this.g=null;pz(this,!1);this.j=a?"<expressionnodeviewui></expressionnodeviewui>":"<expressionnodeui></expressionnodeui>";this.bb=!1}w(WJ,jz);WJ.prototype.getExpression=function(){return this.g};WJ.prototype.getExpression=WJ.prototype.getExpression;g=WJ.prototype;g.cl=function(){var a="";this.g&&(a=this.g.pb()||"");return a};
g.ba=function(){if(this.g&&this.g.column){var a=this.g.column.name,b=this.g.op.S();return a+" <b>"+b+"</b> "+(this.g.op.Bl?"":this.g.literal||"")}return WJ.C.ba.call(this)};g.Hc=function(){return'<i class="fa fa-fw fa-file mr-1"></i>'};g.lc=function(a){WJ.C.lc.call(this,a);this.g=a.getExpression()};g.format=function(){var a=qz(20*this.depth);a=a+"<nodetoggle></nodetoggle><nodeicons></nodeicons>"+('<span class="text-truncate flex-fill">'+this.ba()+"</span>");return a+=this.j};
function XJ(a,b,c){c=new WJ(c);var d=new TJ;c.g=d;UJ(d,a);d.g&&!d.column&&(d.column=aG(b,d.g));return c};W.directive("groupnodeui",[function(){return{restrict:"AE",replace:!0,template:'<span class="flex-fill form-inline"><span class="flex-fill"><select class="custom-select" ng-model="item.grouping" ng-options="key for (key, value) in groupUi.groups" title="Whether results can match any or all filters in the group"/></span><span><span ng-show="!groupUi.isRoot" ng-click="groupUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the expression"></i></span></span></span>',controller:YJ,controllerAs:"groupUi"}}]);
function YJ(a){this.v=a;a=this.v.item;this.groups=Kha;this.isRoot=!a.getParent()}YJ.$inject=["$scope","$element"];var Kha={"All (AND)":"And","Any (OR)":"Or",Not:"Not"};YJ.prototype.remove=function(){this.v.$emit("filterbuilder.remove",this.v.item)};YJ.prototype.remove=YJ.prototype.remove;W.directive("groupnodeviewui",[function(){return{restrict:"AE",replace:!0,template:"<span><span>{{groupUi.group}}</span></span>",controller:ZJ,controllerAs:"groupUi"}}]);function ZJ(a){this.v=a;this.group=Lha[this.v.item.vi()]}ZJ.$inject=["$scope","$element"];var Lha={And:"All (AND)",Or:"Any (OR)",Not:"Not"};W.directive("nodetogglefolder",[function(){var a=hz();a.template="<span>"+a.template+"<i class=\"fa fa-fw action\" ng-class=\"{'fa-folder': item.collapsed, 'fa-folder-open': !item.collapsed}\"></i></span>";a.controller=$J;return a}]);function $J(a,b){iz.call(this,a,b)}w($J,iz);$J.$inject=["$scope","$element"];$J.prototype.g=function(){};$J.prototype.j=function(){};function aK(a){jz.call(this);this.grouping="And";pz(this,!1);this.j=a?"<groupnodeviewui></groupnodeviewui>":"<groupnodeui></groupnodeui>";this.collapsed=!1}w(aK,jz);g=aK.prototype;g.vi=function(){return this.grouping};g.Xg=function(a){this.grouping=a};g.cl=function(a,b){var c=this.na(),d="";if(c){d=this.grouping;a&&(d+=' namehint="'+JC(a)+'"');b&&(d+=' description="'+JC(b)+'"');d="<"+d+">";a=0;for(b=c.length;a<b;a++)d+=c[a].cl();d+="</"+this.grouping+">"}return d};
g.lc=function(a){aK.C.lc.call(this,a);this.Xg(a.vi())};g.format=function(){var a=qz(19*this.depth);return a=a+"<nodetogglefolder></nodetogglefolder><nodeicons></nodeicons>"+this.j};W.directive("confirm",[function(){return{restrict:"E",replace:!0,transclude:!0,scope:!0,templateUrl:"v1542394219/views/window/confirm.html",controller:bK,controllerAs:"confirm"}}]);
function cK(a,b){a=a||{};b=b||{};b.confirmCallback=a.confirm||va;b.confirmValue=a.confirmValue||void 0;b.cancelCallback=a.cancel||va;b.yesText=a.yesText||"OK";b.yesIcon=a.yesIcon||"fa fa-check";b.yesButtonClass=a.yesButtonClass||"btn-primary";b.yesButtonTitle=a.yesButtonTitle||"";b.noText=void 0!==a.noText?a.noText:"Cancel";b.noIcon=void 0!==a.noIcon?a.noIcon:"fa fa-ban";b.noButtonTitle=a.noButtonTitle||"";b.noButtonClass=a.noButtonClass||"btn-secondary";b.formClass=a.formClass||"form-horizontal";
var c=a.windowOptions||{},d=c.height||140,e=c.width||325;FE({"header-class":c.headerClass||"",label:c.label||"Confirm",icon:c.icon||"",x:c.x||"center",y:c.y||"center",width:e,"min-width":c.minWidth||e,"max-width":c.maxWidth||e,height:d,"min-height":c.minHeight||d,"max-height":c.maxHeight||d,modal:null!=c.modal?c.modal:!0,"show-close":null!=c.showClose?c.showClose:!1,"no-scroll":null!=c.noScroll?c.noScroll:!0},"<confirm>"+(a.prompt||"Are you sure?")+"</confirm>",void 0,void 0,void 0,b)}
function bK(a,b,c){this.v=a;this.K=b;null==this.v.valid&&(this.v.valid=!0);this.g=new Lg(document);this.g.H("key",this.j,!1,this);c(function(){a.$emit("window.ready")});a.$on("$destroy",this.l.bind(this))}bK.$inject=["$scope","$element","$timeout"];bK.prototype.l=function(){Ma(this.g);this.v=this.K=null};bK.prototype.cancel=function(){this.v.cancelCallback&&this.v.cancelCallback();KE(this.K)};bK.prototype.cancel=bK.prototype.cancel;
bK.prototype.confirm=function(){if(this.v.confirmCallback){var a=this.v.confirmValue;null==a&&(a=this.K.find(".js-confirm-text").children().first().scope().confirmValue);this.v.confirmCallback(a)}KE(this.K)};bK.prototype.confirm=bK.prototype.confirm;bK.prototype.j=function(a){27==a.keyCode&&this.cancel()};W.directive("advancedfilterbuilder",[function(){return{restrict:"AE",replace:!0,scope:{root:"=",columns:"=",viewonly:"=?"},templateUrl:"v1542394219/views/filter/advancedfilterbuilder.html",controller:dK,controllerAs:"advCtrl"}}]);
function dK(a){this.v=a;this.l=new le(this.o,50,this);this.g=null;this.gridOptions={multiSelect:!1};this.tree=[];this.selected=null;this.editing=!1;eK(this);a.$on("tabChange",this.eJ.bind(this));a.$on("advancedfilterbuilder.editExpr",this.hH.bind(this));a.$on("$destroy",this.BK.bind(this))}dK.$inject=["$scope","$element"];var fK=E.V("os.ui.filter.AdvancedFilterBuilderCtrl");g=dK.prototype;g.BK=function(){this.v=null;Ma(this.l);this.l=null;gK()};g.eJ=function(){eK(this);this.j();gK()};
function eK(a){a.tree=[a.v.root];a.v.$broadcast(LH);a.l.start()}g.hH=function(a,b){this.Pc(b.getExpression(),b)};g.wC=function(a,b){this.j();this.v.viewonly||(b.g=a);eK(this)};function hK(a){var b=a.selected;q(b)&&(0<b.length?b=b[0]:b=null);b||(b=a.v.root);return b}g.vC=function(a){this.j();var b=hK(this);if(b){b=b instanceof aK?b:b.getParent();var c=new WJ;c.g=a;b.R(c,void 0,0);b.collapsed=!1;this.g=c;eK(this)}else E.error(fK,"Failed adding expression. Unable to determine parent.")};
g.DB=function(){this.j();var a=hK(this);if(a){a=a instanceof aK?a:a.getParent();var b=new aK;a.R(b,void 0,0);a.collapsed=!1;this.g=b;eK(this)}else E.error(fK,"Failed adding group. Unable to determine parent.")};dK.prototype.addGrouping=dK.prototype.DB;dK.prototype.CB=function(){this.Pc()};dK.prototype.addExpr=dK.prototype.CB;
dK.prototype.Pc=function(a,b){if(!IE("editExpr")){var c=!!a;this.editing=!0;a=a?a.clone():new TJ;var d={expr:a,columns:this.v.columns};d.columns&&d.columns.sort(Mha);cK({confirm:c&&b?this.wC.bind(this,a,b):this.vC.bind(this,a),cancel:this.j.bind(this),prompt:'<expression expr="expr" columns="columns"></expression>',windowOptions:{id:"editExpr",x:"center",y:"center",label:(c?"Edit":"Add")+" Expression","show-close":!1,"no-scroll":!0,width:750,"min-width":500,"max-widith":1E3,height:"auto",icon:"fa fa-file",
modal:"true"}},d)}};dK.prototype.edit=dK.prototype.Pc;dK.prototype.ol=function(){return this.selected&&this.selected!==this.v.root};dK.prototype.canRemove=dK.prototype.ol;dK.prototype.remove=function(){this.ol()&&this.v.$emit("filterbuilder.remove",this.selected)};dK.prototype.remove=dK.prototype.remove;dK.prototype.j=function(){this.editing=!1};dK.prototype.o=function(){this.g&&(this.selected=this.g,this.v.$broadcast(MH,this.g),this.g=null,X(this.v))};function Mha(a,b){return Ob(a.name,b.name)}
function gK(){var a=angular.element("#editExpr");a&&KE(a)};function iK(){return{restrict:"AE",replace:!0,template:'<div class="c-slick-tree"></div>',scope:{data:"=",selected:"=",contextMenu:"&",checkboxClass:"@",checkboxTooltip:"@",disableFolders:"@",disableSelection:"@",dragEnabled:"@",multiSelect:"@",resizeWith:"@",spinClass:"@",showRoot:"@",disposable:"@",dblClickHandler:"=?",winLauncherClass:"@",noRoot:"@"},controller:jK,controllerAs:"tree"}}W.directive("slicktree",[iK]);
function jK(a,b,c){a.dblClickEnabled=!0;this.Ca="true"==a.multiSelect;dI.call(this,a,b,c);this.bb=a.checkboxClass||"c-tristate";this.jb=a.spinClass||"fa-spin fa-spinner";this.nb=a.winLauncherClass||"fa fa-fw fa-plus";this.B=[];this.Gb.setFilter(this.iA.bind(this));a.multiSelect="true"==a.multiSelect;a.disableFolders=null!=a.disableFolders;a.showRoot=null!=a.showRoot;a.noRoot=null!=a.noRoot;a.noRoot&&(a.showRoot=!1);a.disposable=null!=a.disposable;this.ta.onRowRender.subscribe(this.wr.bind(this));
this.ta.onRowRemove.subscribe(this.vy.bind(this));this.ta.onActiveCellChanged.subscribe(this.apply.bind(this));this.g=null;this.N=new le(this.MC,10,this);this.l="sibling"}w(jK,dI);jK.$inject=["$scope","$element","$compile"];g=jK.prototype;g.J=function(){kK(this);this.B=this.ka=null;this.N&&(this.N.dispose(),jK.C.J.call(this));this.N=null};function kK(a){a.g&&(a.g.M("propertychange",a.wy,!1,a),a.ra&&(a.scope.disposable||a.g.zc(null),a.g.dispose()),a.g=null);a.ra=!1}
g.Ih=function(){return{enableCellNavigation:"true"!=this.scope.disableSelection,fullWidthRows:!0,forceFitColumns:!0,multiSelect:this.Ca,useRowRenderEvents:!0,headerRowHeight:0,rowHeight:21}};g.getColumns=function(){return[{id:"label",name:"Label",field:"label",sortable:!1,formatter:this.Bs.bind(this)}]};
g.Fo=function(a){var b;if(a)try{var c=Ig(a.target,this.aF.bind(this));c&&(b=angular.element(c).scope().item)}catch(d){}b&&(!this.scope.selected||!this.Ca&&this.scope.selected!=b||q(this.scope.selected)&&!kb(this.scope.selected,b))&&(this.scope.selected=[b]);return this.scope.selected};g.aF=function(a){return GH(a,"ng-scope")?(a=angular.element(a).scope(),null!=a&&"item"in a&&a.item instanceof jz):!1};g.vr=function(a){a&&lK(this,a)};
function lK(a,b){b!==a.g&&kK(a);q(b)||(b=[b]);a.scope.noRoot||1!=b.length?(a.g=new jz,a.ra=!0,a.g.zc(b,!0)):(a.g!==b[0]&&(a.g=b[0]),!a.scope.showRoot&&a.g.na()&&0<a.g.na().length&&(b=a.g.na()));!a.scope.noRoot&&a.g&&a.g.H("propertychange",a.wy,!1,a);a.B.length=0;mK(b,a.B);a.Nn(a.B);a.sr()}g.wy=function(a){var b=a.l;("children"==b||"label"==b&&this.g)&&this.N.start();"scrollRowIntoView"==b&&(a=a.o)&&(a=this.Gb.getRowById(a),this.ta.scrollRowIntoView(a,0))};g.MC=function(){lK(this,this.g)};
var Nha=0;function mK(a,b,c){c||(c=0);if(a)for(var d=b.length-1,e=0,f=a.length;e<f;e++){var h=a[e];h.id=h.id||Nha++;h.depth=c;h.Xd=0<c?d:-1;b.push(h);h.na()&&mK(h.na(),b,c+1)}}g=jK.prototype;g.pq=function(a,b){var c=this.Gb.getItem(b.row);c&&GH(a.target,"js-node-toggle")&&(c.zd(!c.collapsed),this.Gb.updateItem(c.id,c),this.scope.$emit("collapseChange"));jK.C.pq.call(this,a,b)};
g.onDblClick=function(a,b){(a=this.Gb.getItem(b.row))&&(b=a.na())&&0<b.length&&(a.zd(!a.collapsed),this.Gb.updateItem(a.id,a),this.scope.$emit("collapseChange"))};g.ty=function(a){if(!this.j){this.j=!0;a=this.ta.getCellFromEvent(a).row;var b=this.ta.getCellNode(a,0);b&&$(b).addClass("hovered");if(a=this.ta.getDataItem(a))try{a.ej()}catch(c){}this.apply();this.j=!1}};
g.uy=function(a){if(!this.j){this.j=!0;this.element.find(".hovered").removeClass("hovered");a=this.ta.getCellFromEvent(a).row;if(a=this.ta.getDataItem(a))try{a.Jh()}catch(b){}this.apply();this.j=!1}};g.iA=function(a){for(a=-1<a.Xd?this.B[a.Xd]:null;a;){if(a.collapsed)return!1;a=-1<a.Xd?this.B[a.Xd]:null}return!0};g.Bs=function(a,b,c,d,e){null==c&&(c="");return e.format(a,b,c)};g.wr=function(a,b){a=this.scope.$new();this.vp(a,b.row,b.node,b.item);this.ka(b.node)(a)};
g.vp=function(a,b,c,d){a.item=d;b=a.item;a.chkClass=b.Hg||this.bb;a.spinClass=this.jb;a.disableFolders=this.scope.disableFolders;a.chkTooltip=b.Ca||this.scope.checkboxTooltip;a.itemAction=this.KH.bind(this,d);a.winLauncherClass=b.hd||this.nb};g.KH=function(a,b){a instanceof jz&&a.yy(b)};g.getData=function(){var a=this.scope.data||[];q(a)||(a=[a]);return a};
function nK(a,b,c,d){var e=b.na(),f=jb(e,function(b){return b==a[d]});-1==f&&(f=0);var h=e.slice(0,f),k=e.slice(f,e.length);e=[];f=0;for(var l=c.length;f<l;f++){var m=a[c[f]];b.mp(m)&&e.push(m)}db(e,function(a){qb(h,a);qb(k,a)});return e=h.concat(e.concat(k))}
function Oha(a,b,c,d){var e=null;d instanceof jz?e=d:"number"==typeof d&&(a.scope.showRoot&&"reparentToRoot"==a.l?e=a.g:"reparentToRoot"!=a.l&&(e=b[d]||a.g));var f=b[c[0]],h=[];db(c,function(a){a=b[a];f.depth==a.depth&&h.push(a);var d=a.getParent();d&&(ib(c,function(a){return d===b[a]})||d.removeChild(a))});db(h,function(a){a.Pe(e)})}
g.ei=function(a,b){if(isNaN(b)||this.scope.showRoot&&0==b||!this.scope.showRoot&&b>this.Gb.getItems().length-1)return!1;var c=this.Gb.getItem(a[0]),d=this.Gb.getItem(b);if(!c||c==this.g)return!1;if(!d)return!0;for(var e=c.depth,f=0,h=a.length;f<h;f++)if(this.Gb.getItem(a[f]).depth<e||a[f]==b)return!1;return az(d,c)||d==c.getParent()&&"sibling"!=this.l||!this.scope.showRoot&&d==this.g||c.Xd==d.Xd&&"reparent"!=this.l&&(a=c.getParent(),a||(a=this.g),a=a.na(),b=jb(a,function(a){return a==c}),b<a.length-
1&&a[b+1]==d)?!1:"sibling"==this.l?!0:d.bb};
g.sy=function(a,b){if(!this.L)return!1;a.stopImmediatePropagation();var c=iI(this,a);a=this.ta.getOptions().rowHeight;var d=c/a,e=d%(Math.floor(d)||1),f=this.ta.getDataLength();b.rect.css("top",c-5);c=Math.max(0,Math.min(Math.round(d),f));this.l="sibling";b.rows.sort(jI);if(d<f&&.4<e&&.6>e)this.l="reparent",f=Math.floor(d),this.ei(b.rows,f)?(d=this.Gb.getItem(f),b.guide.css("top",(c+(0==Math.round(e)?.5:-.5))*a),b.guide.css("left",15*(d.depth+1)),b.rect.removeClass("bg-danger"),b.rect.addClass("bg-primary"),
b.canMove=!0):(b.guide.css("top",-1E3),b.rect.removeClass("bg-primary"),b.rect.addClass("bg-danger"),b.canMove=!1),b.insertBefore=f;else{if(this.ei(b.rows,c)){d=this.Gb.getItem(c);e=this.Gb.getItem(b.rows[0]);var h=d?d.depth:0;b.guide.css("top",c*a);b.guide.css("left",15*(h+1));b.rect.removeClass("bg-danger");b.rect.addClass("bg-primary");b.canMove=!0;d&&d.Xd!=e.Xd?this.l=-1==d.Xd?"reparentToRoot":"reparentLookupParent":c==f&&(this.l="reparentToRoot")}else b.guide.css("top",-1E3),b.guide.css("left",
0),b.rect.removeClass("bg-primary"),b.rect.addClass("bg-danger"),b.canMove=!1;b.insertBefore=c}return!0};
g.xl=function(a,b){var c=this.B?this.B.filter(this.iA.bind(this)):[],d=[];if("sibling"==this.l){var e=c[a[0]].getParent();e||(e=this.g);a=nK(c,e,a,b);e.zc(a,e==this.g&&!this.scope.showRoot);e==this.g?this.scope.showRoot?d=this.g:d=a:db(c,function(a){(!a.getParent()||this.scope.showRoot&&a===this.g)&&d.push(a)},this)}else{var f=b;if("reparentLookupParent"==this.l){var h=c[b].getParent();b=jb(c,function(a){return a.D()==h.D()});0>b&&(b=h)}Oha(this,c,a,b);if("reparentToRoot"==this.l){var k=c.slice(0,
b),l=c.slice(b,c.length);e=[];b=0;for(f=a.length;b<f;b++)e.push(c[a[b]]);db(e,function(a){qb(k,a);qb(l,a)});c=k.concat(e.concat(l))}else e=c[a[0]].getParent(),e.zc(nK(c,e,a,f),!1);db(c,function(a){(!a.getParent()||this.scope.showRoot&&a===this.g)&&d.push(a)},this)}this.scope.data=d;X(this.scope);this.sr();this.scope.$emit("slicktree.update",this.scope.data)};W.directive("basicfiltertree",[function(){var a=iK();a.controller=oK;a.template='<div class="c-slick-tree no-hover"></div>';return a}]);function oK(a,b,c){jK.call(this,a,b,c)}w(oK,jK);oK.$inject=["$scope","$element","$compile"];g=oK.prototype;g.Bs=function(a){return 1==a%2?'<div ng-bind="root.grouping"></div>':'<expression expr="item.getExpression()" columns="columns"></expression><span ng-if="hasMultipleFilters()"><button class="btn btn-danger btn-sm" tabindex="-1" ng-click="$emit(\'filterbuilder.remove\', item)" title="Remove this expression"><i class="fa fa-times"></i></button></span>'};
g.Ih=function(){var a=oK.C.Ih.call(this);a.rowHeight=26;return a};g.vp=function(a,b,c,d){a.columns=this.scope.$parent.columns;a.root=this.scope.$parent.root;a.hasMultipleFilters=this.EE.bind(this);oK.C.vp.call(this,a,b,c,d)};g.EE=function(){if(this.scope&&this.scope.$parent&&this.scope.$parent.root){var a=this.scope.$parent.root.na();return!!a&&1<a.length}return!1};g.Nn=function(a){for(var b=1,c=2*a.length-1;b<c;b+=2){var d=new jz;d.id="g."+b;a.splice(b,0,d)}oK.C.Nn.call(this,a)};W.directive("basicfilterbuilder",[function(){return{restrict:"AE",replace:!0,scope:{root:"=",columns:"=",isComplex:"="},templateUrl:"v1542394219/views/filter/basicfilterbuilder.html",controller:pK,controllerAs:"basicCtrl"}}]);function pK(a){this.v=a;this.j=new le(this.o,50,this);this.g=a.root;this.g.na()||this.add();a.$on("$destroy",this.l.bind(this))}pK.$inject=["$scope"];
pK.prototype.l=function(){this.v=null;for(var a=this.g.na().slice(),b=0;b<a.length;b++){var c=a[b];if(c instanceof WJ){var d=c.getExpression();d.Wb(d.literal)||c.getParent().removeChild(c)}}};pK.prototype.add=function(a){a=XJ(a||null,this.v.columns);this.g.R(a);this.j.start()};pK.prototype.add=pK.prototype.add;pK.prototype.o=function(){var a=this.g.na();a&&this.v.$broadcast(MH,a[a.length-1])};function qK(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/filter/editfilters.html",controller:rK,controllerAs:"filters"}}W.directive("editfilter",[qK]);
function rK(a,b){this.scope=a;this.element=b;this.g=a.entry;this.root=null;this.title=this.g.S();this.description=this.g.qb();this.isComplex=!1;this.root=new aK;if(b=fJ(this.g))this.root.Xg(b.localName),sK(this,b,this.root);tK(this);a.tab=this.isComplex?"advanced":"basic";a.$on("filterbuilder.remove",t(this.L,this));a.$on("$destroy",t(this.o,this));this.g.pb()?Q(R.u(),"filters.edit",1):Q(R.u(),"filters.new",1)}rK.$inject=["$scope","$element"];
rK.prototype.o=function(){var a=angular.element("#removeMultiple");a&&KE(a);this.element=this.scope=null};function tK(a){var b=a.root;a.isComplex=!1;if(b&&b.na()){var c=b.na();if("Not"==b.vi())a.isComplex=!0;else for(b=0;b<c.length;b++)if(c[b]instanceof aK){a.isComplex=!0;break}}}
function sK(a,b,c){b=Ag(b);for(var d;b;){var e=a;var f=b;d=c;for(var h=!1,k=0;k<KJ.length;k++)if(KJ[k].matches(angular.element(f))){h=!0;break}h?(f=XJ(f,e.scope.columns),d.R(f),d.collapsed=!1):(e=new aK,e.Xg(f.localName),d.R(e),f=e);d=ra(b.nextElementSibling)?b.nextElementSibling:Bg(b.nextSibling);f instanceof aK&&sK(a,b,f);b=d}}
rK.prototype.L=function(a,b){b.na()?IE("removeMultiple")||cK({confirm:this.A.bind(this,b),prompt:"Are you sure you want to remove multiple items from the filter?",yesText:"Yes",aS:"fa-trash",yesButtonClass:"btn-danger",noText:"No",noIcon:"fa fa-remove",windowOptions:{id:"removeMultiple",x:"center",y:"center",label:"Remove Items","show-close":!1,"no-scroll":!0,width:300,height:"auto",icon:"fa fa-warning",modal:"true",headerClass:"bg-danger u-bg-danger-text"}}):this.A(b)};rK.prototype.A=function(a){a.getParent().removeChild(a)};
rK.prototype.ns=function(a){tK(this);this.scope.tab=a;this.scope.$broadcast("tabChange",a)};rK.prototype.setTab=rK.prototype.ns;rK.prototype.fm=function(){return"basic"===this.scope.tab&&this.isComplex||uK(this,this.root)};rK.prototype.isInvalid=rK.prototype.fm;function uK(a,b){if(b instanceof aK){if((b=b.na())&&b.length){for(var c=0,d=b.length;c<d;c++)if(uK(a,b[c]))return!0;return!1}}else if(b instanceof WJ)return a=b.getExpression(),!a.Wb(a.literal);return!0}rK.prototype.cancel=function(){KE(this.element)};
rK.prototype.cancel=rK.prototype.cancel;rK.prototype.finish=function(){this.g.Ta(this.title);this.g.fb(this.description);var a=this.root.cl(this.title,this.description);this.g.Zf(a);this.scope.callback&&this.scope.callback(this.g);KE(this.element)};rK.prototype.finish=rK.prototype.finish;function vK(a,b,c,d){this.j=a;this.merge=void 0!==b?b:!1;this.g=c;this.o=void 0!==d?d:!1;this.l=Pha(this)}g=vK.prototype;g.lb=!1;g.title="Change query entries";g.Ba=null;g.state="ready";function Qha(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.j?a.l?a.merge&&0===a.j.length&&!a.g?(a.Ba="When merging an empty set, the layer hint must be supplied",!1):!0:(a.Ba="No old entries found.",!1):(a.Ba="No new entries provided.",!1)}
g.Fa=function(){return Qha(this)?(this.state="executing",wK(this,this.j),this.state="success",!0):!1};g.Cb=function(){this.state="reverting";wK(this,this.l);this.state="ready";return!0};function wK(a,b){var c=WE;if(a.merge){var d=xK(a),e;for(e in d)vF(c,e,void 0,void 0,!0)}else vF(c,void 0,void 0,void 0,!0);dF(c,b,a.o,a.g)}function Pha(a){var b=WE.getEntries(),c=xK(a);return a.merge?b.filter(function(a){return a.layerId in c}):b}
function xK(a){var b={};a.g&&(b[a.g]=!0);return b=a.j.reduce(function(a,b){a[b.layerId]=!0;return a},b)};function yK(a){this.filter=a;this.lb=!1;this.title="Add/Remove filter";this.Ba=null;this.state="ready";this.entries=WE.getEntries(null,null,this.filter.D())}function zK(a){return"ready"!==a.state?(a.Ba="Command not in ready state",!1):a.filter?a.filter.type?a.filter.pb()?!0:(a.Ba="Filter entry does not contain a filter",!1):(a.Ba="Filter type not set",!1):(a.Ba="Filter not provided",!1)}yK.prototype.add=function(){AK(BK.u(),this.filter);CK(this)};
yK.prototype.remove=function(){DK(this);EK(BK.u(),this.filter)};function CK(a){a.entries&&0<a.entries.length&&dF(WE,a.entries,!0,a.filter.T())}function DK(a){a.entries&&0<a.entries.length&&vF(WE,null,null,a.filter.D())};function FK(a){yK.call(this,a);this.filter&&(this.title='Add Filter "'+this.filter.S()+'"')}w(FK,yK);FK.prototype.Fa=function(){return zK(this)?(this.state="executing",this.add(),this.state="success",!0):!1};FK.prototype.Cb=function(){this.state="reverting";this.remove();this.state="ready";return!0};function GK(){this.filters=[];this.and=!0}GK.prototype.sa=function(a){a||(a={});for(var b=[],c=0,d=this.filters.length;c<d;c++)this.filters[c].l||(b[c]=this.filters[c].sa());a.filters=b;a.and=this.and;return a};GK.prototype.restore=function(a){this.and=a.and;if(a=a.filters)for(var b=0,c=a.length;b<c;b++){var d=new eJ;a[b]&&(d.restore(a[b]),this.filters.push(d))}};
function BK(){A.call(this);this.g={};var a=window.localStorage.getItem("filters");a&&(a=JSON.parse(a),O.set("filters",a),window.localStorage.removeItem("filters"));this.load();C.H("addFilter",this.Kv,!1,this)}w(BK,A);wa(BK);g=BK.prototype;g.J=function(){C.M("addFilter",this.Kv,!1,this)};g.save=function(){};g.load=function(){this.dispatchEvent(new U("filters"))};g.clear=function(){vc(this.g);this.save()};
function HK(a,b){var c=[],d;for(d in a.g)c=c.concat(a.g[d].filters);return b?b in a.g?a.g[b].filters:null:0<c.length?c:null}g.ld=function(a){return V.Ja(a)};g.pb=function(a){var b=HK(this);if(b)for(var c=0,d=b.length;c<d;c++)if(b[c].D()==a)return b[c];return null};function IK(a,b){var c=HK(a,b);if(c)for(var d=0,e=c.length;d<e;d++)if(a.isEnabled(c[d],b))return!0;return!1}g.isEnabled=function(a){return a.isEnabled()};
function AK(a,b){b&&b.type&&b.pb()&&(b.type in a.g||(a.g[b.type]=new GK),a.g[b.type].filters.push(b),a.dispatchEvent(new gJ("filtersRefresh")),a.save())}function EK(a,b){b&&b.type in a.g&&(qb(a.g[b.type].filters,b),a.dispatchEvent(new gJ("filtersRefresh")),a.save())}g.vi=function(a){return a in this.g?this.g[a].and:!0};g.Xg=function(a,b){if(a in this.g){var c=this.g[a];c.and!==b&&(c.and=b,b=new gJ("filterGroupingChanged"),b.key=a,this.dispatchEvent(b),this.save())}};
g.toggle=function(a,b){if(a=a instanceof eJ?a.D():a)a=this.pb(a),b=void 0!==b?b:!a.isEnabled(),a.eb(b),this.save(),a&&(this.dispatchEvent(new U("toggle",a)),a.dispatchEvent(new U("enabled",a)))};g.Kv=function(a){if((a=a.g)&&!(a instanceof eJ))try{var b=new eJ;b.restore(a.sa());b instanceof eJ&&(a=b)}catch(c){a=null}(b=a)?(b=new FK(b),gF(EF,b)):At(Ct,"Unrecognized filter.",rs)};
function JK(a,b,c,d){var e=!1;d&&(e=!0);var f={id:"editfilter",x:"center",y:"center",label:(e?"Edit":"Add")+" Filter","show-close":!0,"no-scroll":!1,"min-width":300,"min-height":300,"max-width":1E3,"max-height":1E3,modal:!0,width:850,height:425,icon:"fa fa-filter"};d=d?d.clone():new eJ;e||d.eb(!0);d.T()||d.Sb(a);FE(f,"editfilter",void 0,void 0,void 0,{entry:d,columns:b,callback:c})}
function Rha(a,b,c,d){d=d?d.clone():new eJ;d.T()||d.Sb(a);FE({id:"editfilter",x:"center",y:"center",label:"View Filter","show-close":!0,"no-scroll":!1,"min-width":300,"min-height":300,"max-width":1E3,"max-height":1E3,modal:!0,width:850,height:425,icon:"fa fa-filter"},"viewfilter",void 0,void 0,void 0,{entry:d,columns:b,viewonly:!0})}
function KK(a,b){var c={id:"copyfilter",x:"center",y:"center",label:"Copy "+a.S()+" to Layers","show-close":!0,"no-scroll":!1,modal:!0,width:500,height:"auto",icon:"fa fa-copy"};FE(c,'<copyfilter filter-entry="filterEntry" layer-id="layerId"></copyfilter>',void 0,void 0,void 0,{filterEntry:a,layerId:b})}var PJ=null;function LK(){BK.call(this)}w(LK,BK);wa(LK);Cc(BK,{u:function(){return LK.u()}});g=LK.prototype;g.load=function(){var a=O.get("filters");if(a){for(var b in a){var c=new GK;c.restore(a[b]);this.g[b]=c}this.dispatchEvent(new gJ("filtersRefresh"))}};g.save=function(){var a={},b;for(b in this.g){var c=HK(this,b);c&&0<c.length&&(a[b]=this.g[b].sa())}O.set("filters",a)};g.isEnabled=function(a,b){var c=WE;return a?(a=c.getEntries(b,null,a.D()),!!a&&!!a.length):!1};
g.ld=function(a){var b=T.u().W(a);return b instanceof MK?b:LK.C.ld.call(this,a)};
g.open=function(a,b){if(!(0<$("#filter"+(a?"-"+bc(a):"")).length)){var c={id:"filter"+(a?"-"+bc(a):""),x:"center",y:"center",label:"Filters","show-close":!0,"no-scroll":!0,"min-width":300,"min-height":300,"max-width":1E3,"max-height":1E3,width:400,height:500,icon:"filter-icon fa fa-filter"},d={};if(a){var e=T.u().W(a);if(e){if(b)d.columns=b;else try{e.Eg()&&e.Hi();return}catch(f){}c.label=e.S()+" Filters"}d.type=a}FE(c,"filters",void 0,void 0,void 0,d)}};function NK(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canFavorite()"><favorite ng-show="nodeUi.show()" type="descriptor" key="{{nodeUi.descId}}" value="{{nodeUi.layerLabel}}"></favorite></span><span ng-if="nodeUi.filtersEnabled" ng-click="nodeUi.filter()"><i class="fa fa-filter fa-fw c-glyph" title="Manage filters"ng-class="{\'text-success\': nodeUi.filtered, \'c-glyph__off\': !nodeUi.filtered}"></i></span><span ng-if="nodeUi.isRemovable()" ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the layer"></i></span></span>',
controller:OK,controllerAs:"nodeUi"}}W.directive("defaultlayernodeui",[NK]);function OK(a,b){eF.call(this,a,b);WE.H("propertychange",this.l,!1,this);this.l();a=this.scope.item;this.layerLabel=a.ba();(a=V.Ja(a.D()))&&(this.descId=a.D())}w(OK,eF);OK.$inject=["$scope","$element"];OK.prototype.destroy=function(){OK.C.destroy.call(this);WE.M("propertychange",this.l,!1,this)};OK.prototype.W=function(){return this.scope&&this.scope.item instanceof HA?this.scope.item.W():null};
OK.prototype.O=function(){var a=this.W();return a instanceof sl?a.O():null};OK.prototype.ve=function(){var a=this.scope.item;if(a&&a instanceof HA){var b=a.W();if(a&&b&&P(b,"os.layer.ILayer"))return b.ve()}return!1};OK.prototype.isRemovable=OK.prototype.ve;OK.prototype.remove=function(){var a=this.scope.item;if(a.W()instanceof PK){if((a=a.na().slice())&&0<a.length)for(var b=a.length;b--;)QK(a[b])}else QK(a)};OK.prototype.remove=OK.prototype.remove;
function QK(a){a=new BA("removeLayer",a.D());C.dispatchEvent(a)}OK.prototype.WB=function(){var a=RK(this);return a?(a=V.Ja(a),!!(a&&a instanceof SK)):!1};OK.prototype.canFavorite=OK.prototype.WB;OK.prototype.filter=function(){var a=RK(this);if(a){a=V.Ja(a);var b=this.W();a=[a,b];b=0;for(var c=a.length;b<c;b++){var d=a[b];if(P(d,"os.filter.IFilterable")&&d.Eg()){d.Hi();break}}}};OK.prototype.filter=OK.prototype.filter;
OK.prototype.l=function(){var a=this.scope.item;(this.filtered=IK(LK.u(),a.D()))?this.j.addClass("font-italic"):this.j.removeClass("font-italic");a=this.W();P(a,"os.filter.IFilterable")?this.filtersEnabled=a.Eg():this.filtersEnabled=!1};function RK(a){return a.scope.item.D()};function PK(){A.call(this);this.ma=$b();this.g=[];this.o=null;this.A=!1;this.I=this.B=null;this.G=!0;this.s="defaultlayerui";this.l=!1}w(PK,A);P(PK,"os.layer.ILayer");g=PK.prototype;g.J=function(){this.g.length=0};g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.O=function(){return null};g.mb=function(){for(var a=0,b=this.g.length;a<b;a++)try{if(this.g[a].mb())return!0}catch(c){}return this.A};g.Va=function(a){this.A=a};g.S=function(){return this.j};g.Ta=function(a){this.j=a};g.td=function(){return""};
g.Qc=function(){return 0<this.g.length?this.g[0].Qc():"group"};g.Zd=function(){};g.Nf=function(){return""};g.ye=function(){};g.rb=function(){return 0<this.g.length?this.g[0].rb():this.B};g.Cc=function(a){this.B=a};g.ug=function(){for(var a=0,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].ug())}catch(d){}return Je(a,0,1)};g.ij=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].ij(a)}catch(d){}};
g.vg=function(){for(var a=0,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].vg())}catch(d){}return Je(a,0,1)};g.jj=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].jj(a)}catch(d){}};g.Ml=function(){for(var a=-180,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].Ml())}catch(d){}return Je(a,-180,180)};g.ls=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].ls(a)}catch(d){}};
g.Xb=function(){for(var a=0,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].Xb())}catch(d){}return Je(a,0,1)};g.rd=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].rd(a)}catch(d){}};g.yg=function(){for(var a=0,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].yg())}catch(d){}return Je(a,0,1)};g.mj=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].mj(a)}catch(d){}};g.bd=function(){for(var a=0,b=this.g.length;a<b;a++)try{if(this.g[a].bd())return!0}catch(c){}return!1};
g.Bd=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].Bd(a)}catch(d){}};g.fg=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].fg(a)}catch(d){}};g.Ij=function(){for(var a=0,b=this.g.length;a<b;a++)try{if(this.g[a].Ij())return!0}catch(c){}return!1};g.getTags=function(){return this.I};g.vb=function(a){this.I=a};g.Sa=function(){return this.o};g.Nk=function(a){this.o=a};g.ve=function(){for(var a=0,b=this.g.length;a<b;a++)try{if(!this.g[a].ve())return!1}catch(c){}return this.G};
g.hg=function(a){this.G=a};g.Qd=function(){for(var a={},b=0,c=null,d=0,e=this.g.length;d<e;d++){var f=this.g[d].Ll();f&&(f in a?a[f]++:a[f]=1,a[f]>b&&(b=a[f],c=f))}return c?"<"+c+"></"+c+">":"<defaultlayernodeui></defaultlayernodeui>"};g.Bf=void 0;g.Nj=function(){return this.s};g.gg=function(a){this.s=a};g.Ll=function(){return null};g.pc=function(a){qb(this.g,a)};g.di=function(){};g.Uk=function(){return!1};g.Tl=function(){return null};g.Pk=function(){};g.Mj=function(){return this.l};
g.vn=function(a){this.l=a};g.sa=function(a){return a||{}};g.restore=function(){};function TK(a,b){z.call(this,a);this.j=b}w(TK,z);var DH="style";function UK(a){var b={pixelRatio:1},c=a.canvas,d=b?b:{};b=d.pixelRatio||Aj;if(d=d.size)c.width=d[0]*b,c.height=d[1]*b,c.style.width=d[0]+"px",c.style.height=d[1]+"px";c=[0,0,c.width,c.height];d=hj(aj(),b,b);return new po(a,b,c,d,0)};function VK(a){a=a||{};this.B=a.font;this.A=a.rotation;this.s=a.rotateWithView;this.j=a.scale;this.Mb=a.text;this.g=a.textAlign;this.l=a.textBaseline;this.tc=void 0!==a.fill?a.fill:new Zj({color:"#333"});this.G=void 0!==a.maxAngle?a.maxAngle:Math.PI/4;this.L=void 0!==a.placement?a.placement:"point";var b=void 0===a.overflow?a.exceedLength:a.overflow;this.I=void 0!==b?b:!1;this.Dc=void 0!==a.stroke?a.stroke:null;this.Vf=void 0!==a.offsetX?a.offsetX:0;this.o=void 0!==a.offsetY?a.offsetY:0;this.N=a.backgroundFill?
a.backgroundFill:null;this.P=a.backgroundStroke?a.backgroundStroke:null;this.U=void 0===a.padding?null:a.padding}g=VK.prototype;g.clone=function(){return new VK({font:this.Ge(),placement:this.L,maxAngle:this.G,overflow:this.I,rotation:this.A,rotateWithView:this.s,scale:this.j,text:this.ub(),textAlign:this.g,textBaseline:this.l,fill:this.ob()?this.ob().clone():void 0,stroke:this.kb()?this.kb().clone():void 0,offsetX:this.Vf,offsetY:this.o})};g.Ge=function(){return this.B};g.ob=function(){return this.tc};
g.kb=function(){return this.Dc};g.ub=function(){return this.Mb};g.Dz=function(a){this.tc=a};g.Iz=function(a){this.Dc=a};g.ah=function(a){this.Mb=a};function WK(a,b){this.start=a<b?a:b;this.end=a<b?b:a}function XK(a){return new WK(a[0],a[1])}WK.prototype.clone=function(){return new WK(this.start,this.end)};WK.prototype.getLength=function(){return this.end-this.start};function YK(a,b){return a==b?!0:a&&b?a.start==b.start&&a.end==b.end:!1}function ZK(a,b){var c=Math.max(a.start,b.start);a=Math.min(a.end,b.end);return c<=a?new WK(c,a):null};function $K(){this.g=[]}function aL(a,b){return a==b||!!(a&&b&&Cb(a.g,b.g,YK))}g=$K.prototype;g.clone=function(){for(var a=new $K,b=this.g.length;b--;)a.g[b]=this.g[b].clone();return a};g.add=function(a){if(!(a.end<=a.start)){a=a.clone();for(var b=0,c;c=this.g[b];b++)if(a.start<=c.end){a.start=Math.min(a.start,c.start);break}for(var d=b;(c=this.g[b])&&!(a.end<c.start);b++)a.end=Math.max(a.end,c.end);this.g.splice(d,b-d,a)}};
g.remove=function(a){if(!(a.end<=a.start)){for(var b=0,c;(c=this.g[b])&&!(a.start<c.end);b++);if(c&&!(a.end<c.start)){var d=b;a.start>c.start&&(d++,a.end<c.end&&nb(this.g,new WK(a.end,c.end),d),c.end=a.start);for(b=d;(c=this.g[b])&&!(c.start=Math.max(a.end,c.start),a.end<c.end);b++);this.g.splice(d,b-d)}}};g.contains=function(a){if(a.end<=a.start)return!1;for(var b=0,c;c=this.g[b];b++)if(a.start<c.end){if(a.end>=c.start)return c.start<=a.start&&c.end>=a.end;break}return!1};
function bL(a,b){for(var c=0,d;d=a.g[c];c++)if(b<d.end){if(b>=d.start)return!0;break}return!1}g.union=function(a){a=a.clone();for(var b=0,c;c=this.g[b];b++)a.add(c);return a};g.difference=function(a){for(var b=this.clone(),c=0,d;d=a.g[c];c++)b.remove(d);return b};g.slice=function(a){var b=new $K;if(a.start>=a.end)return b;for(var c=0,d;d=this.g[c];c++)if(!(d.end<=a.start)){if(d.start>a.end)break;b.add(new WK(Math.max(a.start,d.start),Math.min(a.end,d.end)))}return b};
g.inverse=function(a){var b=new $K;b.add(a);for(var c=0,d;d=this.g[c];c++)if(!(a.start>=d.end)){if(a.end<d.start)break;b.remove(d)}return b};function cL(a){if(a.g.length){var b=a.g;a=new WK(a.g[0].start,b[b.length-1].end)}else a=null;return a}g.isEmpty=function(){return 0==this.g.length};g.clear=function(){this.g.length=0};g.pe=function(){var a=0,b=this.g,c=new Ne;c.next=function(){if(a>=b.length)throw Me;return b[a++].clone()};return c};function dL(){this.Rb=this.key_="";this.children=null;this.items=[];this.id=""}g=dL.prototype;g.Kq=function(a){this.items.push(a)};g.Lq=function(a){a=this.items.indexOf(a);-1<a&&this.items.splice(a,1)};g.clear=function(){this.items.length=0};g.getItems=function(){return this.items};g.getKey=function(){return this.key_};g.Yg=function(a){this.key_=a};g.ba=function(){return this.Rb};g.Da=function(a){this.id=this.Rb=a};g.na=function(){return this.children};g.zc=function(a){this.children=a};g.D=function(){return this.id};function eL(){this.ja="";this.type="Unique";this.Df=null;this.g=!1}g=eL.prototype;g.getValue=function(a){a=this.Df?this.Df(a,this.ja):a[this.ja];if(null!=a){a=a.toString();if(a===Xda)return"Invalid Value";if(0<a.length)return a}return"No "+this.ja};g.kd=function(){return this.ja};g.Do=function(a){return a.toString()};g.Qo=function(a){return 1E18===Number(a)?"No "+this.ja:a.toString()};g.sa=function(a){a||(a={});a.type=this.type;a.field=this.kd();a.arrayKeys=this.g;return a};
g.restore=function(a){var b=a.field;"string"===typeof b&&(this.ja=b);a=a.arrayKeys;"boolean"!==typeof a&&"string"!==typeof a||fL(this,a)};g.clone=function(){var a=new this.constructor;a.restore(this.sa());a.Df=this.Df;return a};g.vx=function(a){return Sha.bind(this,a)};function fL(a,b){"string"===typeof b&&(b=!!b);a.g=b}function Sha(a,b){return!!a&&0<=a.indexOf(b)};function gL(){eL.call(this);this.type="Numeric";this.width=10;this.l=this.offset=0}w(gL,eL);g=gL.prototype;g.getValue=function(a){a=this.Df?this.Df(a,this.ja):a[this.ja];var b=NaN,c=typeof a;null==a?b=1E18:"number"==c?b=a:a instanceof Date?b=a.getTime():a instanceof Pv?b=a.Pa():"string"==c&&(b=(a=a.trim())?dc(a):1E18);return isNaN(b)?9999999998:b};g.cc=function(){return this.offset};
g.Do=function(a){"string"==typeof a&&(a=(a=a.trim())?dc(a):1E18);return 1E18===a||9999999998===a?a:a===hL(this,1E18)?1E18:a!==hL(this,9999999998)&&"number"===typeof a?hL(this,a):9999999998};g.Qo=function(a){var b=this.width,c=this.l;return 1E18===a?"No "+this.ja:9999999998===a||"number"!=typeof a?"Not a Number":a.toFixed(c)+" to "+(a+b).toFixed(c)};function hL(a,b){var c=a.width;a=a.cc();return Math.floor((b-a)/c)*c+a}
function iL(a){a=a.toFixed(14);var b=a.indexOf(".");return-1<b?(a=a.substring(b+1),a=a.replace(/0+$/,""),a.length):0}g.sa=function(a){a=gL.C.sa.call(this,a)||{};a.width=this.width;a.offset=this.cc();return a};g.restore=function(a){gL.C.restore.call(this,a);var b=a.width;null==b||isNaN(b)||(this.width=Number(b),this.l=Math.max(iL(this.width),iL(this.cc())));a=a.offset;null==a||isNaN(a)||(this.offset=Number(a),this.l=Math.max(iL(this.width),iL(this.cc())))};g.vx=function(a){return Tha.bind(this,a)};
function Tha(a,b){for(var c=0;c<a.length;c++)if(b>=a[c]&&b<=a[c]+this.width)return!0;return!1};function jL(a,b,c){var d;c=!!c;b/=25;b=Bu([a[0]/1E6,a[1]/1E6],b,.66*b,-45);for(var e=0;e<b.length-1;e++)b[e][0]*=1E6,b[e][1]*=1E6;b=new Rk([b]);c?d=new Kr([b,new Jk(a)]):d=b;return d};var kL={bgColor:"#333333",bold:!0,fontSize:16,showVector:!0,showVectorType:!0,showCount:!1,showTile:!0,showBackground:!0,opacity:1,version:0},Uha=new bk({stroke:new ak({color:"#111",lineJoin:"bevel",width:3})}),Vha=new bk({fill:new Zj({color:"#fff"}),stroke:new ak({color:"#000",width:1})}),Wha=new Zj({color:"#fff"}),Xha=new ak({color:"#000",width:2}),lL=/^([\d.+-]+) to [\d.+-]+$/,mL=[];
function nL(a){a.priority=a.priority||0;mL.push(a);mL.sort(Yha);if(a.defaultSettings){var b=oL(),c;for(c in a.defaultSettings)null==b[c]&&(b[c]=a.defaultSettings[c]);O.set("os.legend.options",b)}}function Yha(a,b){return-Bb(a.priority||0,b.priority||0)}function oL(){var a=O.get("os.legend.options");a&&0==a.version||(a=kL,O.set("os.legend.options",a));return Gs(a)}function Zha(a){return P(a,"os.legend.ILegendRenderer")&&a.yf!==va}
function $ha(a){var b=a.fontSize+"px";a.font=(a.bold?"bold ":"")+b+"/"+b+" sans-serif";a.Aj=[];a.maxRowWidth=0;a.offsetX=0;a.offsetY=0}
function aia(a,b,c){var d=oL();d.maxHeight=b||Infinity;d.maxWidth=c||Infinity;d.showCount=null==d.showCount?kL.showCount:d.showCount;d.ts=null==d.ts?kL.ts:d.ts;d.showVectorType=null==d.showVectorType?kL.showVectorType:d.showVectorType;if(a){var e=a.getContext("2d");if(e){$ha(d);bia(d);var f=d.maxRowWidth;c=pw(T.u());c=c.filter(Zha);for(b=0;b<c.length;b++){var h=c[b];h.yf(d);mL.forEach(function(a){null!=a.render&&a.render(h,d)})}1==d.Aj.length&&cia(d);d.Wz&&dia(d);0<d.maxRowWidth&&(a.width=Math.min(d.maxWidth,
d.maxRowWidth+25),a.height=d.offsetY-Math.round(d.fontSize/2));e.globalAlpha=d.opacity||kL.opacity;c=UK(e);if(null!=d.showBackground?d.showBackground:kL.showBackground)e.fillStyle=d.bgColor||kL.bgColor,e.fillRect(2,2,a.width-4,a.height-4),b=new ek(Vk([2,2,a.width-2,a.height-2])),c.jh(b,Uha);d.Aj[0].Dp.Mb.Vf=a.width/2-f/2;for(b=0;b<d.Aj.length;b++){a=d.Aj[b];if(a.feature&&a.style){f=a.style.Ua();if(f instanceof pL&&(e=f.sf(),2>e)){0==e&&f.load();f.Ji(qL,f);continue}c.jh(a.feature,a.style)}(a.Yu||a.feature)&&
a.Dp&&c.jh(a.Yu||a.feature,a.Dp)}}}}function qL(){this.Wk(qL,this);3>this.sf()&&C.dispatchEvent("legend:update")}function bia(a){a.offsetX=2+Math.floor(a.fontSize/10);a.offsetY=5+a.fontSize/2;var b=new ek(new Jk([a.offsetX,a.offsetY])),c=rL("Legend",a);sL(a,void 0,void 0,b,c);a.offsetX=10+Math.round(a.fontSize/4)}function dia(a){a.offsetX=2+Math.floor(a.fontSize/10);var b=new ek(new Jk([a.offsetX,a.offsetY])),c=rL("- Too many legend items -",a);sL(a,void 0,void 0,b,c)}
function cia(a){var b=new ek(new Jk([a.offsetX,a.offsetY])),c=rL("Nothing to Display",a,void 0,0);sL(a,void 0,void 0,b,c)}function tL(a){return!a.Wz&&!(a.Wz=a.maxHeight<a.offsetY+a.fontSize+5)}function sL(a,b,c,d,e){var f=0,h=d||b;h&&(h=ii(h.X().aa()),f+=h[0]+a.fontSize);if(e){var k=e.ub();k&&(h=k.Ge(),k=k.ub(),h&&k&&(h=Wy(k,"feature-label",h),f+=h.width))}a.maxRowWidth=Math.max(f,a.maxRowWidth);a.Aj.push({feature:b,style:c,Yu:d,Dp:e});a.offsetY+=a.fontSize+5}
function uL(a){return a instanceof vL&&a.Hb()&&0<a.Z}function eia(a,b){a=a.match(lL);b=b.match(lL);if(a||b){if(!a)return 1;if(!b)return-1}else return 0;a=Number(a[1]);b=Number(b[1]);return a>b?1:a<b?-1:0}
function wL(a,b,c,d,e){if(tL(b)){c=rL(c,b);d=[b.offsetX+d,b.offsetY];if(e){var f=b.fontSize/3;e=f/3;d=Vk([d[0]-f,d[1]-e,d[0]+f,d[1]+e]);f=Vha}else QG.test(a.shape)?(e=TG[a.shape],d=jL(d,b.fontSize,e),e&&(a.image.type="circle"),a.image.radius=Je(b.fontSize/12,1.5,4),a.stroke.width=Je(b.fontSize/8,1.5,4)):(d=new Jk(d),oH(a)&&(a.image.scale=b.fontSize/24,a.image.anchor=[.5,.5]));f||(f=rH(nH.u(),a));a=new ek(d);sL(b,a,f,void 0,c)}}
function xL(a,b){var c=mH(nH.u(),a.D())||$B;c=Gs(c);Bs(c,["image","radius"],Math.round(b.fontSize/3));b=a.Dd;c.shape=b;var d=OG[b];d&&d.config&&d.config.image&&eH(d.config,c);TG[b]&&(a=OG[a.Ff])&&a.config&&a.config.image&&eH(a.config,c);return c}function rL(a,b,c,d){return new bk({text:new VK({text:a,font:null!=c?c:b.font,textAlign:"left",textBaseline:"middle",fill:Wha,offsetX:null!=d?d:b.offsetX,stroke:Xha})})};var yL={};function fia(a){var b=a.g;if(b&&!T.u().Qa()){var c=0,d=b.Oa().splice(0,b.Oa().length);if(d&&0<d.length){var e=new je(250);e.H("tick",function(){5<c?(zL(b,d),e.dispose()):(zL(b,c%2?d:null),c++)});e.start()}}else(a=T.u().W(a.D()))&&mw(a)}function gia(a){var b=null;a&&((b=a.getColumns())&&0<b.length&&(b=b.filter(function(a){return"recordTime"!==a.field}),b.sort(ZF)),b||(a=BK.u().ld(a.D()))&&(b=a.Fe().map(hia)));return b}function hia(a){var b=new FF(a.name);b.type=a.type;return b}
function iia(a,b){a=a.get("zIndex")||0;b=b.get("zIndex")||0;return Bb(b,a)}function jia(a){if(a instanceof ek){a=a.get("recordTime");var b=hw.u();if(P(a,"os.time.ITime")&&!AL(b,a))return a}return null}function kia(a){if(a instanceof ek){a=a.get("recordTime");var b=hw.u();if(P(a,"os.time.ITime")&&AL(b,a))return a}return null}
function BL(a,b){var c=null;if(a&&(a=a.getColumns())&&0<a.length){c=[];for(var d=0;d<a.length;d++){var e=a[d],f=e.field;!e.visible||Lb(Yb(f))||kb(c,f)||!b&&KB(f)||c.push(f)}}return c}
var lia=function(a,b,c){var d;return function(){var e=this,f=arguments;c&&!d&&a.apply(e,f);clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b)}}(function(a){C.dispatchEvent(CL);a="The maximum feature count for the application has been reached ("+a+"). Further features will not be added until some are removed. Consider narrowing your time range, applying filters, shrinking your query areas, or removing some feature layers.";var b=T.u();!b.Qa()&&b.yc()&&(a+=" Switching to 3D mode will also allow more data to be loaded. To enable 3D mode, right-click the map and choose Toggle 2D/3D Mode.");
At(zt.u(),a,ss)},5E3,!0);var CL="maxFeatures";function DL(a,b,c,d){z.call(this,a);this.source=b;this.filter=c||null;this.items=d||null}w(DL,z);function EL(){XI.call(this);this.log=mia;this.g={};this.A=!0;FL(this,O.get("dataManager.filterTime",!0));var a=T.u();a.H("addLayer",this.B,!1,this);a.H("removeLayer",this.G,!1,this)}w(EL,XI);wa(EL);Cc(XI,{u:function(){return EL.u()}});var mia=E.V("os.data.OSDataManager");EL.prototype.J=function(){EL.C.J.call(this);var a=T.u();a.M("addLayer",this.B,!1,this);a.M("removeLayer",this.G,!1,this)};EL.prototype.O=function(a){return this.g[a]||null};
function GL(a){var b=[],c;for(c in a.g)b.push(a.g[c]);return b}function Qy(a){var b=0;a=GL(a);for(var c=0,d=a.length;c<d;c++)b+=a[c].Z;return b}function FL(a,b){if(a.A!=b){a.A=b;for(var c in a.g)HL(a.g[c],b);O.set("dataManager.filterTime",b);a.dispatchEvent(new U("timeFilterEnabled",b))}}EL.prototype.B=function(a){a.layer instanceof MK&&(a=a.layer,a.O()instanceof vL&&(a=a.O(),a.D()in this.g||(this.g[a.D()]=a,HL(a,this.A),this.dispatchEvent(new DL("dataSourceAdded",a)))))};
EL.prototype.G=function(a){a.layer instanceof MK&&(a=a.layer,a.O()instanceof vL&&(a=a.O(),a.D()in this.g&&(delete this.g[a.D()],this.dispatchEvent(new DL("dataSourceRemoved",a)))))};function IL(a,b){if(a=a.Ja(b))if(a=a.Of(),0<a&&a<Rv)return JL(hw.u(),a),!0;return!1}var NB=null;W.directive("confirmtext",[function(){return{restrict:"E",templateUrl:"v1542394219/views/window/confirmtext.html",controller:KL,controllerAs:"confirmtext"}}]);function KL(a,b){a.$parent.select&&setTimeout(function(){b.find('[name="title"]').select()},10);a.$watch("confirmValue",function(b,d){b!=d&&(a.$parent.confirmValue=b)});a.$emit("window.ready")}KL.$inject=["$scope","$element"];
function LL(a){a=a||{};var b=a.windowOptions||{};FE({label:b.label||"Enter Text",icon:b.icon||"",x:b.x||"center",y:b.y||"center",width:b.width||325,height:b.height||"auto",modal:null!=b.modal?b.modal:"true","show-close":null!=b.showClose?b.showClose:"false","no-scroll":null!=b.noScroll?b.noScroll:"true"},"<confirm><confirmtext></confirmtext></confirm>",void 0,void 0,void 0,{confirmCallback:a.confirm||va,cancelCallback:a.cancel||va,confirmValue:a.defaultValue,yesText:a.yesText||"OK",yesIcon:a.yesIcon||
"fa fa-check",yesButtonClass:a.yesButtonClass||"btn-primary",noText:a.noText||"Cancel",noIcon:a.noIcon||"fa fa-ban",noButtonClass:a.noButtonClass||"btn-secondary",select:!!a.select,limit:a.SR||200,formLabel:a.formLabel,prompt:a.prompt})};var nia={mR:"Unique",KP:"Minute",OO:"Hour",PO:"Hour of Day",RO:"Hour of Week",QO:"Hour of Month",SO:"Hour of Year",rO:"Day",sO:"Day of Week",BR:"Week",NP:"Month",DR:"Year"},ML={"Hour of Day":!0,"Hour of Week":!0,"Hour of Month":!0,"Hour of Year":!0,"Day of Week":!0,Unique:!1,Hour:!1,Day:!1,Week:!1,Month:!1,Year:!1};function NL(){eL.call(this);this.type="Date";this.j="Hour of Day"}w(NL,eL);var OL=moment.utc("0867-05-03T09:00:00Z").valueOf();g=NL.prototype;
g.getValue=function(a){var b=OL;a=this.Df?this.Df(a,this.ja):a[this.ja];if(null!=a)if("object"==typeof a)try{b=a.Pa();var c=a.Ya();c=c&&c!==b?c:void 0}catch(f){try{b=a.getTime()}catch(h){}}else"string"===typeof a&&(a=moment(a).valueOf(),isNaN(a)||(b=a));if(b!==OL){a=new Date(b+wC);var d=null;c&&this.g&&(d=new Date(c+wC));switch(this.j){case "Hour of Day":b=a.getUTCHours();if(!d)return this.g?[b]:b;c=d.getUTCHours();return PL(this,b,c,23);case "Hour of Week":b=24*a.getUTCDay()+a.getUTCHours();if(!d)return this.g?
[b]:b;c=24*d.getUTCDay()+d.getUTCHours();return PL(this,b,c,167);case "Hour of Month":b=24*a.getUTCDate()+a.getUTCHours();if(!d)return this.g?[b]:b;c=24*d.getUTCDate()+d.getUTCHours();a=23+24*(new Date(a.getUTCFullYear(),a.getMonth()+1,0)).getDate();return PL(this,b,c,a);case "Hour of Year":var e=new Date(a.getUTCFullYear(),0);b=24*Math.floor((a-e)/864E5)+a.getUTCHours();if(!d)return this.g?[b]:b;c=24*Math.floor((a-e)/864E5)+d.getUTCHours();a=(new Date(a.getUTCFullYear()+1,0)-e)/864E5*24;return PL(this,
b,c,a);case "Day of Week":b=a.getUTCDay();if(!d)return this.g?[b]:b;c=d.getUTCDay();return PL(this,b,c,6);case "Minute":return mC(a,"min").getTime();case "Hour":return mC(a,"hour").getTime();case "Day":return mC(a,"day").getTime();case "Week":return mC(a,"week").getTime();case "Month":return mC(a,"month").getTime();case "Year":return mC(a,"year").getTime()}}return b};
function PL(a,b,c,d){if(b==c)return a.g?[b]:b;if(b<c){a=Array(c-b);var e=0;for(d=c-b;e<=d;e++)a[e]=b+e}else{a=Array(d-b+(c+1));e=c;for(d=d-b+c;e<=d;e++)a[e+1]=b+e-c;for(b=0;b<=c;b++)a[b]=b}return a}g.Do=function(a){return Array.isArray(a)?a:Number(a)};
g.Qo=function(a){if(void 0!==a&&a!=OL)switch(this.j){case "Hour of Day":return Xb(a,2)+"00";case "Day of Week":return moment().isoWeekday(a).format("dddd");case "Minute":return moment.utc(a).format("YYYY-MM-DD HH:mm");case "Hour":return moment.utc(a).format("YYYY-MM-DD HH");case "Day":return moment.utc(a).format("YYYY-MM-DD");case "Week":return moment.utc(a).day(0).format("YYYY-MM-DD");case "Month":return moment.utc(a).format("YYYY-MM");case "Year":return moment.utc(a).format("YYYY");case "Hour of Week":case "Hour of Month":case "Hour of Year":return a.toString();
default:return Tv(a)}return"Invalid Date"};g.sa=function(a){a=NL.C.sa.call(this,a)||{};a.binType=this.j;return a};g.restore=function(a){NL.C.restore.call(this,a);(a=a.binType)&&qc(nia,a)&&(this.j=a)};var QL={Unique:eL,Date:NL,Numeric:gL};function oia(a){return sv(a,!0)}function RL(a){A.call(this);this.g=null;this.o=0;this.l={};this.j={};this.A={};this.G=a||oia}w(RL,A);RL.prototype.J=function(){this.Oh(-1);RL.C.J.call(this);SL(this,null)};function SL(a,b){if(a.g){a.g.M("change",a.s,!1,a);a.g.M("histo:binChange",a.B,!1,a);var c=a.g;c.j--;0>=c.j&&c.dispose()}a.g=b;a.g&&(a.g.H("change",a.s,!1,a),a.g.H("histo:binChange",a.B,!1,a),a.g.j++)}RL.prototype.B=function(){this.l={}};RL.prototype.ie=function(){return this.g?this.g.ie():[]};
RL.prototype.Oh=function(a,b,c){1!==a&&(this.j={});a!=this.o&&(this.l={});if(1==a&&q(b)&&c)for(var d=0,e=b.length;d<e;d++){var f=b[d].ba();this.l[f]=c;this.j[f]=c}this.o=1===a?this.o:a;this.s()};RL.prototype.setColorMethod=RL.prototype.Oh;
RL.prototype.s=function(){var a=this.A;this.A={};switch(this.o){case -1:this.o=0;if(this.g){(a=this.g.O())&&TL(this,a.Oa(),void 0);try{var b=this.g.s}catch(k){b=!1}b&&(a=this.g,a.s=!0,a.g&&"Date"==a.g.type&&ML[a.g.j]&&fL(a.g,!0),UL(a),a.update(),a.dispatchEvent("change"))}break;case 2:pia(this);VL(this,a);break;case 3:this.l={};if((b=this.ie())&&0<b.length){for(var c=0,d=0,e=b.length;d<e;d++)c=Math.max(c,b[d].items.length);var f=sv(101);d=0;for(e=b.length;d<e;d++){var h=ZG(f[Math.floor(b[d].items.length/
c*100)]);this.l[b[d].ba()]=h;TL(this,b[d].getItems(),h)}}VL(this,a)}if(!uc(this.j))for(a=this.ie(),b=0,c=a.length;b<c;b++)d=a[b].ba(),d in this.j&&(d=this.j[d],this.l[a[b].ba()]=d,TL(this,a[b].getItems(),d));this.dispatchEvent(new U("style"))};function pia(a){a.l={};var b=a.ie();!uc(a.j)&&(b=eb(b,function(a){return!this.j[a.ba()]},a));if(b&&0<b.length)for(var c=a.G(b.length),d=0,e=b.length;d<e;d++){var f=ZG(c[d]);a.l[b[d].ba()]=f;TL(a,b[d].getItems(),f)}}
function VL(a,b){var c=[],d;for(d in b)d in a.A||c.push(b[d]);TL(a,c,void 0)}function TL(a,b,c){if(b&&0<b.length){for(var d=0,e=b.length;d<e;d++){var f=OB(b[d],null,null);if(f!=c){b[d].la.color=c;var h=OB(b[d],null,null)||void 0;C.dispatchEvent(new YA("feature:color",b[d].id,h,f))}c&&(a.A[b[d].id]=b[d])}lH(b)}}RL.prototype.sa=function(a){a=a||{};a.colorMethod=this.o;a.manualColors=zc(this.j);if(this.g){var b=this.g.g;b&&(a.binMethod=b.sa())}return a};
RL.prototype.restore=function(a){if(this.g&&a.binMethod){var b=a.binMethod;if(b){var c=b.type;if(c&&(c=QL[c])){var d=new c;d.restore(b)}}if(b=d)b.Df=IB,this.g.gs(b)}this.Oh(a.colorMethod);a.manualColors&&(a=zc(a.manualColors),Ea(a),this.j=a,this.s())};function WL(a){dL.call(this);this.j=xv(a);this.g={}}w(WL,dL);WL.prototype.La=function(){for(var a in this.g)return this.g[a]==this.items.length?a:"";return this.j};WL.prototype.Kq=function(a){WL.C.Kq.call(this,a);XL(this,OB(a)||void 0)};WL.prototype.Lq=function(a){WL.C.Lq.call(this,a);YL(this,OB(a)||void 0)};function YL(a,b){(b=b?xv(b):a.j)&&b in a.g&&(a.g[b]--,0==a.g[b]&&delete a.g[b])}function XL(a,b){(b=b?xv(b):a.j)&&(b in a.g?a.g[b]++:a.g[b]=1)};function ZL(a,b){A.call(this);this.ma="sourcehisto"+qia++;this.log=ria;this.j=0;this.g=null;this.source=a;this.A=[];this.xa=null;this.o=a.l;this.s=!1;this.B=new le(this.pJ,25,this);this.l={};C.H("feature:color",this.dw,!1,this);this.Pe(b||null);this.update()}w(ZL,A);var ria=E.V("os.data.histo.SourceHistogram"),qia=0;g=ZL.prototype;
g.dispose=function(){this.j--;0>=this.j?(E.za(this.log,"Disposing histogram "+this.ma+"."),ZL.C.dispose.call(this)):E.za(this.log,"Skipping histogram dispose for id = "+this.ma+" (ref count = "+this.j+")")};g.J=function(){ZL.C.J.call(this);C.M("feature:color",this.dw,!1,this);this.Pe(null);this.source=null;this.B.dispose();this.B=null;this.gs(null);this.A.length=0};g.D=function(){return this.ma};g.getParent=function(){return this.xa};
g.Pe=function(a){if(this.xa){this.xa.M("change",this.update,!1,this);this.xa.M("histo:cascadeChange",this.update,!1,this);var b=this.xa;b.j--;0>=b.j&&b.dispose()}else xh(this.source,"propertychange",this.qx,this);this.xa=a;this.Xa()||(this.xa?(this.xa.H("change",this.update,!1,this),this.xa.H("histo:cascadeChange",this.update,!1,this),this.xa.j++):I(this.source,"propertychange",this.qx,this))};
g.gs=function(a){var b=null;a&&a.type in QL&&(b=new QL[a.type],b.restore(a.sa()));if(this.g=b)this.g.Df=IB,this.s=this.g.g||!1;UL(this);this.update();this.dispatchEvent("histo:binChange")};ZL.prototype.setBinMethod=ZL.prototype.gs;function UL(a){if(a.o&&(a.o.Gk(a.ma),a.g)){var b=a.g.getValue.bind(a.g),c="Date"==a.g.type?ML[a.g.j]:!1;c=a.s?c:!1;a.o.Iq(a.ma,b,c)}}
function sia(a){for(a=a.getParent();a;){var b=a.g,c=a.D();if(b){var d=d||{};d[c]=b.vx([])}else{d={};d[c]=void 0;break}a=a.getParent()}return d}ZL.prototype.ie=function(){return this.A};ZL.prototype.getResults=ZL.prototype.ie;
function tia(a){var b=[];if(a.o&&a.g){a.source&&a.source.fe();var c=sia(a);if(c)for(var d in c)if(null!=c[d])a.o.pk(d,c[d]);else{a.A=[];return}b=a.o.hp(a.ma,a.g.Do.bind(a.g),a.qM.bind(a),a.sM.bind(a),a.rM.bind(a));if(c)for(d in c)a.o.pk(d,void 0);b=b.map(a.map,a).filter(function(a){return void 0!=a})}a.A=b}ZL.prototype.map=function(a){var b=a.value,c=b.getItems();if(!c||!c.length)return null;b.Yg(a.key);b.Da(this.g.Qo(a.key));return b};
ZL.prototype.Oh=function(a,b,c){if(this.source){var d=this.source.G;if(0<a){var e={};d&&(e=d.l);if(!d||d.g!=this){d=this.source.so(this);$L(this.source,d);var f=d;Ea(e);f.j=e;f.s()}d.Oh(a,b,c)}else null!=d&&d.Oh(a,b,c),$L(this.source,null)}};ZL.prototype.setColorMethod=ZL.prototype.Oh;g=ZL.prototype;g.O=function(){return this.source};
g.qx=function(a){a=a.l;"color"===a||"features"===a||"replaceStyle"===a||"timeEnabled"===a?this.update():"featureVisibility"===a?this.update(100):"timeFilter"===a?(this.source.fe(),this.update()):"data"===a&&(UL(this),this.update())};g.update=function(a){this.B&&this.B.start(a)};g.pJ=function(){for(var a in this.l){var b=this.l[a];b&&b.clear()}this.l={};tia(this);this.dispatchEvent("change")};g.qM=function(a,b){this.l[b.id]=a;a.Kq(b);return a};g.sM=function(a,b){this.l[b.id]=void 0;a.Lq(b);return a};
g.rM=function(){return new WL(this.source.La())};g.dw=function(a){a.id&&this.l[a.id]&&(YL(this.l[a.id],a.s),XL(this.l[a.id],a.j))};function ZB(a,b,c,d){ek.call(this,a);this.l=b||va;this.g=c||va;this.o=d||va}w(ZB,ek);ZB.prototype.clone=function(){var a=new ZB(void 0,this.l,this.g,this.o);a.qc(this.la,!0);fk(a,this.Ud);var b=this.X();null!=b&&a.sb(b.clone());a.ga(this.D());return a};function aM(){this.s="#ffffff";this.j=this.o=this.ma=void 0;this.A=!1;this.l=null}g=aM.prototype;g.La=function(){return this.s};g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.S=function(){return this.j};g.Ta=function(a){this.j=a};g.Hb=function(){return this.A};g.ec=function(a){this.A=a};g.ae=function(a){this.l=a};function bM(){aM.call(this);this.g={}}w(bM,aM);function cM(a){a=void 0!==a?a:{};this.j=[];this.l=new tm({features:this.j,useSpatialIndex:!1});this.g=new dM({renderOrder:null,source:this.l,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:a.zIndex});null!=a.opacity&&this.rd(a.opacity);null!=a.style&&this.yb(a.style);null!=a.features&&q(a.features)&&zL(this,vb(a.features));null!=a.map&&this.setMap(a.map)}w(cM,y);g=cM.prototype;
g.J=function(){cM.C.J.call(this);this.setMap(null);this.j.length=0;this.l.dispose();this.l=null;this.g.dispose();this.g=null};g.ia=function(){this.l&&!T.u().Qa()&&this.l.ia()};g.Oa=function(){return this.j};function zL(a,b){a.j.length=0;if(b&&0<b.length){a.j.length=b.length;for(var c=0,d=b.length;c<d;c++)a.j[c]=b[c]}a.ia()}g.setMap=function(a){this.g&&this.g.setMap(a)};g.yb=function(a){this.g&&this.g.yb(a)};g.rd=function(a){this.g&&this.g.rd(a)};g.Cf=function(a){this.g&&this.g.Cf(a)};
function dM(a){wl.call(this,a)}w(dM,wl);dM.prototype.setMap=function(a){this.Jg&&(rh(this.Jg),this.Jg=null);a||this.ia();this.Kg&&(rh(this.Kg),this.Kg=null);a&&(this.Jg=I(a,"precompose",function(a){var b=rl(this);b.managed=!1;b.zIndex+=1E5;a.frameState.layerStatesArray.push(b);a.frameState.layerStates[H(this)]=b},this),this.Kg=I(this,"change",a.render,a),this.ia())};function eM(a){z.call(this,a)}w(eM,z);function fM(a,b){this.id=a;this.start=Ha();this.count=0;this.title=b||null}fM.prototype.S=function(){return this.title};fM.prototype.Ta=function(a){this.title=a};function gM(){A.call(this);this.log=uia;this.g={}}w(gM,A);wa(gM);var uia=E.V("os.load.LoadingManager");var hM={label:"Default",data:""},via=/(density)|(foreground color)/i;function iM(a,b){try{if(b&&Ub(b,"/xml")||!b){var c=("string"===typeof a?VA(a):a).querySelector("ExceptionText, ServiceException");if(c)return c.textContent}}catch(d){}return null}function wia(){var a=new af;df(a,!0);a.set("service","WFS");a.set("version","1.1.0");a.set("request","GetFeature");a.set("srsname","EPSG:4326");a.set("outputformat","application/json");return a}function Ry(a){return O.get(a||"maxFeatures",5E4)};function jM(){UC.call(this);this.g="RADIUS";this.j="Radius";this.o="RADIUS_UNITS";this.s=xia;this.Db=yia;this.units="nmi"}w(jM,UC);gB(eB.u(),"Radius",jM);var yia=/(^|[^A-Za-z0-9]+)(cep|radius)($|[^A-Za-z0-9]+)/i,xia=/(^|[^A-Za-z0-9]+)(cep|radius)(_units)($|[^A-Za-z0-9]+)/i;g=jM.prototype;g.Rc=function(){return this.units};g.Zc=function(a){this.units=a};g.D=function(){return this.j};g.ba=function(){return this.g||null};
g.Fa=function(a){if(this.ja&&this.g){var b=oB($A(a,this.ja));isNaN(b)||(this.units&&(b*=ju[this.units]),aB(a,this.g,b),this.units&&this.o&&aB(a,this.o,this.units))}};g.Nd=function(a){if(a)for(var b=a.length;b--;){var c=a[b],d=bB(c,this.Db);if(d)return a=new this.constructor,a.ja=d,this.s&&(d=bB(c,this.s))&&(c=$A(c,d),"string"==typeof c&&(c=c.toLowerCase(),c in ju&&a.Zc(c))),a}return null};g.clone=function(){var a=jM.C.clone.call(this);a.Zc(this.Rc());return a};
g.sa=function(a){a=jM.C.sa.call(this,a);a.units=this.Rc();return a};g.restore=function(a){jM.C.restore.call(this,a);this.Zc(a.units)};g.rc=function(){var a=jM.C.rc.call(this);Z("units",a,this.Rc());return a};g.ad=function(a){jM.C.ad.call(this,a);this.Zc(TC(a,"units"))};function kM(){jM.call(this);this.g="SEMI_MAJOR (nmi)*";this.o="SEMI_MAJ_UNITS";this.s=zia;this.Db=Aia;this.j="SemiMajor"}w(kM,jM);gB(eB.u(),"SemiMajor",kM);var Aia=/s(e(m(i)?)?)?[\W_]*maj(o(r)?)?/i,zia=/s(e(m(i)?)?)?[\W_]*maj(o(r)?)?_units/i;function lM(){jM.call(this);this.g="SEMI_MINOR (nmi)*";this.o="SEMI_MINOR_UNITS";this.s=Bia;this.Db=Cia;this.j="SemiMinor"}w(lM,jM);gB(eB.u(),"SemiMinor",lM);var Cia=/s(e(m(i)?)?)?[\W_]*min(o(r)?)?/i,Bia=/s(e(m(i)?)?)?[\W_]*min(o(r)?)?_units/i;W.directive("descriptioninfo",[function(){return{restrict:"E",replace:!0,scope:{description:"="},templateUrl:"v1542394219/views/descriptioninfo.html",controller:mM,controllerAs:"info"}}]);function mM(a,b){this.v=a;this.K=b;b=Vy(this.v.description||"");if(!Lb(Yb(b))){b=b.replace(/<a /g,'<a target="_blank" ');var c=this.K.find("iframe")[0];c&&(c=c.contentWindow.document,c.open(),c.write(b),c.close())}a.$on("$destroy",this.g.bind(this))}mM.$inject=["$scope","$element"];
mM.prototype.g=function(){this.K=this.v=null};function Dia(a,b,c){var d="Description";c&&(d+=" for "+c);a=Zb("descriptionInfo",a);IE(a)?HE(a):FE({id:a,label:d,icon:"fa fa-newspaper-o",x:"center",y:"center",width:"800","min-width":"800","max-width":"800",height:"600","min-height":"600","max-height":"600","show-close":"true"},'<descriptioninfo description="description"></descriptioninfo>',void 0,void 0,void 0,{description:b})}Ia("os.ui.launchDescriptionInfo",Dia);
function Eia(a,b,c,d){if(!c||"string"!==typeof c)return"";d.asyncPostRender=Fia;return'<div class="location-properties-link">Show</div>'}function Fia(a,b,c){if(c){var d=String(c.D()).replace(/[\W]/g,"_"),e=c.get("DESCRIPTION");e||(e=c.get("description"));if(null!=e&&"string"===typeof d){b=$(a);a=a.ownerDocument;var f=a.defaultView||a.parentWindow;b.click(function(){Ee(f)?Dia(d,e):f.os.ui.launchDescriptionInfo(d,e)})}}};function Gia(a,b,c){a=new FF(b||a,a);a.sortable=!0;a.temp=c||!1;WF(a);return a}function Hia(a){return"string"===typeof a?Gia(a):a}
function Iia(a){var b=!1,c=!1,d=!1,e=!1,f=!1,h=!1,k=!1,l=!1,m=!1,n=!1,p=!1,r=!1,u=!1;a.getColumns().forEach(function(a){var v=a.name;v&&(b|=Kb(v,"ID"),f|=Kb(v,"LAT_DDM"),h|=Kb(v,"LON_DDM"),k|=Kb(v,"LAT_DMS"),l|=Kb(v,"LON_DMS"),d|=Kb(v,"LAT"),e|=Kb(v,"LON"),c|=vea.test(v),m|=Kb(v,"recordTime"));if(a=a.field)n|=lu.test(a),p|=yia.test(a),r|=Aia.test(a),u|=Cia.test(a)});!c&&d&&e&&nM(a,"MGRS");!k&&d&&nM(a,"LAT_DMS");!l&&e&&nM(a,"LON_DMS");!f&&d&&nM(a,"LAT_DDM");!h&&e&&nM(a,"LON_DDM");!m&&a.Md&&nM(a,"recordTime",
"TIME");n&&(nM(a,"ALTITUDE (m)*"),nM(a,"ALTITUDE_UNITS"));p&&nM(a,"RADIUS");r&&nM(a,"SEMI_MAJOR (nmi)*");u&&nM(a,"SEMI_MINOR (nmi)*");b||nM(a,"ID")};function oM(){this.j={};this.cache={}}oM.prototype.yn=function(a){this.j=a};oM.prototype.l=function(){};function pM(){oM.call(this)}w(pM,oM);pM.prototype.g=function(a){var b=void 0!==a.radius?a.radius:3,c=1+b,d=a.fill;if(d){var e=this.j.fill.g(d);c+=e.id}if(a=a.stroke){var f=this.j.stroke.g(a);c+=f.id}this.cache[c]||(this.cache[c]=new Yj({radius:b,fill:e,stroke:f}),this.cache[c].id=c);return this.cache[c]};pM.prototype.l=function(a,b){if(a instanceof Yj){b.type="circle";b.radius=a.g;var c=a.ob();c&&this.j.fill.l(c,b);(a=a.kb())&&this.j.stroke.l(a,b)}};function qM(){oM.call(this)}w(qM,oM);qM.prototype.g=function(a){a=a.color||"rgba(255,255,255,1)";a=mj(a);var b=1+bc(a);this.cache[b]||(this.cache[b]=new Zj({color:a}),this.cache[b].id=b);return this.cache[b]};qM.prototype.l=function(a,b){if(a instanceof Zj&&(a=a.La(),void 0!==a&&null!==a)){var c={};b.fill=c;c.color=mj(a)}};function rM(a,b,c,d,e,f){Bh.call(this);this.G=null;this.wa=a?a:new Image;null!==d&&(this.wa.crossOrigin=d);this.A=f?document.createElement("CANVAS"):null;this.o=f;this.B=null;this.g=e;this.j=c;this.l=b;this.L=!1;2==this.g&&Jia(this)}G(rM,Bh);function Kia(a,b,c,d,e,f){var h=Qo.get(b,d,f);h||(h=new rM(a,b,c,d,e,f),Qo.set(b,d,f,h));return h}function Jia(a){var b=qj(1,1);try{b.drawImage(a.wa,0,0),b.getImageData(0,0,1,1)}catch(c){a.L=!0}}
rM.prototype.I=function(){this.g=3;this.B.forEach(rh);this.B=null;this.dispatchEvent("change")};
rM.prototype.N=function(){this.g=2;this.j&&(this.wa.width=this.j[0],this.wa.height=this.j[1]);this.j=[this.wa.width,this.wa.height];this.B.forEach(rh);this.B=null;Jia(this);if(!this.L&&null!==this.o){this.A.width=this.wa.width;this.A.height=this.wa.height;var a=this.A.getContext("2d");a.drawImage(this.wa,0,0);for(var b=a.getImageData(0,0,this.wa.width,this.wa.height),c=b.data,d=this.o[0]/255,e=this.o[1]/255,f=this.o[2]/255,h=0,k=c.length;h<k;h+=4)c[h]*=d,c[h+1]*=e,c[h+2]*=f;a.putImageData(b,0,0)}this.dispatchEvent("change")};
rM.prototype.Ua=function(){return this.A?this.A:this.wa};rM.prototype.load=function(){if(0==this.g){this.g=1;this.B=[wh(this.wa,"error",this.I,this),wh(this.wa,"load",this.N,this)];try{this.wa.src=this.l}catch(a){this.I()}}};function pL(a){a=a||{};this.A=void 0!==a.anchor?a.anchor:[.5,.5];this.U=null;this.l=void 0!==a.anchorOrigin?a.anchorOrigin:"top-left";this.G=void 0!==a.anchorXUnits?a.anchorXUnits:"fraction";this.P=void 0!==a.anchorYUnits?a.anchorYUnits:"fraction";this.oa=void 0!==a.crossOrigin?a.crossOrigin:null;var b=void 0!==a.img?a.img:null,c=void 0!==a.imgSize?a.imgSize:null,d=a.src;Rh(!(void 0!==d&&b),4);Rh(!b||b&&c,5);void 0!==d&&0!==d.length||!b||(d=b.src||H(b).toString());Rh(void 0!==d&&0<d.length,6);var e=
void 0!==a.src?0:2;this.B=void 0!==a.color?lj(a.color):null;this.g=Kia(b,d,c,this.oa,e,this.B);this.ka=void 0!==a.offset?a.offset:[0,0];this.s=void 0!==a.offsetOrigin?a.offsetOrigin:"top-left";this.pa=null;this.Z=void 0!==a.size?a.size:null;Wj.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1})}G(pL,Wj);g=pL.prototype;
g.clone=function(){return new pL({anchor:this.A.slice(),anchorOrigin:this.l,anchorXUnits:this.G,anchorYUnits:this.P,crossOrigin:this.oa,color:this.B&&this.B.slice?this.B.slice():this.B||void 0,src:this.g.l,offset:this.ka.slice(),offsetOrigin:this.s,size:null!==this.Z?this.Z.slice():void 0,opacity:this.Xb(),scale:this.j(),snapToPixel:this.N,rotation:this.o,rotateWithView:this.I})};
g.ri=function(){if(this.U)return this.U;var a=this.A,b=this.tf();if("fraction"==this.G||"fraction"==this.P){if(!b)return null;a=this.A.slice();"fraction"==this.G&&(a[0]*=b[0]);"fraction"==this.P&&(a[1]*=b[1])}if("top-left"!=this.l){if(!b)return null;a===this.A&&(a=this.A.slice());if("top-right"==this.l||"bottom-right"==this.l)a[0]=-a[0]+b[0];if("bottom-left"==this.l||"bottom-right"==this.l)a[1]=-a[1]+b[1]}return this.U=a};g.La=function(){return this.B};g.Ua=function(a){return this.g.Ua(a)};g.Nl=function(){return this.g.j};
g.sf=function(){return this.g.g};g.Zp=function(){var a=this.g;if(!a.G)if(a.L){var b=a.j[0],c=a.j[1],d=qj(b,c);d.fillRect(0,0,b,c);a.G=d.canvas}else a.G=a.wa;return a.G};g.hk=function(){if(this.pa)return this.pa;var a=this.ka;if("top-left"!=this.s){var b=this.tf(),c=this.g.j;if(!b||!c)return null;a=a.slice();if("top-right"==this.s||"bottom-right"==this.s)a[0]=c[0]-b[0]-a[0];if("bottom-left"==this.s||"bottom-right"==this.s)a[1]=c[1]-b[1]-a[1]}return this.pa=a};g.tf=function(){return this.Z?this.Z:this.g.j};
g.Ji=function(a,b){return I(this.g,"change",a,b)};g.load=function(){this.g.load()};g.Wk=function(a,b){xh(this.g,"change",a,b)};function sM(a,b,c,d,e,f){rM.call(this,a,b,c,d,e,f);this.P=b;this.s=0;this.log=Lia}w(sM,rM);var Lia=E.V("os.style.FallbackIconImage"),Mia=/^data/i;
sM.prototype.I=function(){this.s++;var a=this.P;if(1===this.s){if(a&&Mia.test(a)&&this.crossOrigin){E.za(this.log,"attempting to retry data URL "+a+" with an empty crossOrigin value");this.g=0;this.crossOrigin=null;this.load();return}this.s++}if(2===this.s){var b=new Ve(a),c=new ty;if(a&&c.handles("GET",b)){E.za(this.log,"attempting to retry URL "+a+" through the proxy");this.g=0;this.l=zy(a);this.load();return}this.s++}3===this.s?(E.za(this.log,"falling back to default icon"),this.g=0,this.l=tM,
this.load()):(E.error(this.log,"Unknown error accessing icon!"),sM.C.I.call(this))};Kia=function(a,b,c,d,e,f){var h=Qo.get(b,d,f);h||(h=new sM(a,b,c,d,e,f),Qo.set(b,d,f,h));return h};function uM(a){a=a||{};if(null==a.opacity&&null!=a.color){var b=yv(a.color);b&&"number"==typeof b[3]&&!isNaN(b[3])&&(a.opacity=b[3])}pL.call(this,a);this.Ea=0;this.Ji(this.Ca,this)}w(uM,pL);uM.prototype.j=function(){if(this.Ea)return this.Ea;var a=this.tf(),b=uM.C.j.call(this);a&&(this.Ea=b=32*b/Math.min(a[0],a[1]));return b};uM.prototype.Ca=function(){var a=this.g.g;2<=a&&this.Wk(this.Ca,this);2===a&&this.g.l==tM&&(this.L=1,this.o=0)};var Nia={fO:"onChange",FO:"onExpire",ZO:"onInterval"},vM={href:"http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png",scale:1},wM=/https?:\/\/maps\.google\.com\/mapfiles\/kml\//i;function xM(){return{path:"http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png"}}function yM(a){return a?a.replace(wM,"v1542394219/images/icons/kml/"):""}
var zM=[{title:"Yellow Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"},{title:"Blue Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/blue-pushpin.png"},{title:"Green Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/grn-pushpin.png"},{title:"Light Blue Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/ltblu-pushpin.png"},{title:"Pink Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/pink-pushpin.png"},{title:"Purple Push Pin",
path:"http://maps.google.com/mapfiles/kml/pushpin/purple-pushpin.png"},{title:"Red Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/red-pushpin.png"},{title:"White Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/wht-pushpin.png"},{title:"Letter A",path:"http://maps.google.com/mapfiles/kml/paddle/a.png"},{title:"Letter B",path:"http://maps.google.com/mapfiles/kml/paddle/b.png"},{title:"Letter C",path:"http://maps.google.com/mapfiles/kml/paddle/c.png"},{title:"Letter D",path:"http://maps.google.com/mapfiles/kml/paddle/d.png"},
{title:"Letter E",path:"http://maps.google.com/mapfiles/kml/paddle/e.png"},{title:"Letter F",path:"http://maps.google.com/mapfiles/kml/paddle/f.png"},{title:"Letter G",path:"http://maps.google.com/mapfiles/kml/paddle/g.png"},{title:"Letter H",path:"http://maps.google.com/mapfiles/kml/paddle/h.png"},{title:"Letter I",path:"http://maps.google.com/mapfiles/kml/paddle/i.png"},{title:"Letter J",path:"http://maps.google.com/mapfiles/kml/paddle/j.png"},{title:"Letter K",path:"http://maps.google.com/mapfiles/kml/paddle/k.png"},
{title:"Letter L",path:"http://maps.google.com/mapfiles/kml/paddle/l.png"},{title:"Letter M",path:"http://maps.google.com/mapfiles/kml/paddle/m.png"},{title:"Letter N",path:"http://maps.google.com/mapfiles/kml/paddle/n.png"},{title:"Letter O",path:"http://maps.google.com/mapfiles/kml/paddle/o.png"},{title:"Letter P",path:"http://maps.google.com/mapfiles/kml/paddle/p.png"},{title:"Letter Q",path:"http://maps.google.com/mapfiles/kml/paddle/q.png"},{title:"Letter R",path:"http://maps.google.com/mapfiles/kml/paddle/r.png"},
{title:"Letter S",path:"http://maps.google.com/mapfiles/kml/paddle/s.png"},{title:"Letter T",path:"http://maps.google.com/mapfiles/kml/paddle/t.png"},{title:"Letter U",path:"http://maps.google.com/mapfiles/kml/paddle/u.png"},{title:"Letter V",path:"http://maps.google.com/mapfiles/kml/paddle/v.png"},{title:"Letter W",path:"http://maps.google.com/mapfiles/kml/paddle/w.png"},{title:"Letter X",path:"http://maps.google.com/mapfiles/kml/paddle/x.png"},{title:"Letter Y",path:"http://maps.google.com/mapfiles/kml/paddle/y.png"},
{title:"Letter Z",path:"http://maps.google.com/mapfiles/kml/paddle/z.png"},{title:"Number 1",path:"http://maps.google.com/mapfiles/kml/paddle/1.png"},{title:"Number 2",path:"http://maps.google.com/mapfiles/kml/paddle/2.png"},{title:"Number 3",path:"http://maps.google.com/mapfiles/kml/paddle/3.png"},{title:"Number 4",path:"http://maps.google.com/mapfiles/kml/paddle/4.png"},{title:"Number 5",path:"http://maps.google.com/mapfiles/kml/paddle/5.png"},{title:"Number 6",path:"http://maps.google.com/mapfiles/kml/paddle/6.png"},
{title:"Number 7",path:"http://maps.google.com/mapfiles/kml/paddle/7.png"},{title:"Number 8",path:"http://maps.google.com/mapfiles/kml/paddle/8.png"},{title:"Number 9",path:"http://maps.google.com/mapfiles/kml/paddle/9.png"},{title:"Number 10",path:"http://maps.google.com/mapfiles/kml/paddle/10.png"},{title:"Blue Blank",path:"http://maps.google.com/mapfiles/kml/paddle/blu-blank.png"},{title:"Blue Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png"},{title:"Blue Circle",path:"http://maps.google.com/mapfiles/kml/paddle/blu-circle.png"},
{title:"Blue Square",path:"http://maps.google.com/mapfiles/kml/paddle/blu-square.png"},{title:"Blue Stars",path:"http://maps.google.com/mapfiles/kml/paddle/blu-stars.png"},{title:"Green Blank",path:"http://maps.google.com/mapfiles/kml/paddle/grn-blank.png"},{title:"Green Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/grn-diamond.png"},{title:"Green Circle",path:"http://maps.google.com/mapfiles/kml/paddle/grn-circle.png"},{title:"Green Square",path:"http://maps.google.com/mapfiles/kml/paddle/grn-square.png"},
{title:"Green Stars",path:"http://maps.google.com/mapfiles/kml/paddle/grn-stars.png"},{title:"Light Blue Blank",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-blank.png"},{title:"Light Blue Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-diamond.png"},{title:"Light Blue Circle",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-circle.png"},{title:"Light Blue Square",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-square.png"},{title:"Light Blue Stars",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-stars.png"},
{title:"Pink Blank",path:"http://maps.google.com/mapfiles/kml/paddle/pink-blank.png"},{title:"Pink Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/pink-diamond.png"},{title:"Pink Circle",path:"http://maps.google.com/mapfiles/kml/paddle/pink-circle.png"},{title:"Pink Square",path:"http://maps.google.com/mapfiles/kml/paddle/pink-square.png"},{title:"Pink Stars",path:"http://maps.google.com/mapfiles/kml/paddle/pink-stars.png"},{title:"Yellow Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/ylw-diamond.png"},
{title:"Yellow Circle",path:"http://maps.google.com/mapfiles/kml/paddle/ylw-circle.png"},{title:"Yellow Square",path:"http://maps.google.com/mapfiles/kml/paddle/ylw-square.png"},{title:"Yellow Stars",path:"http://maps.google.com/mapfiles/kml/paddle/ylw-stars.png"},{title:"White Blank",path:"http://maps.google.com/mapfiles/kml/paddle/wht-blank.png"},{title:"White Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/wht-diamond.png"},{title:"White Circle",path:"http://maps.google.com/mapfiles/kml/paddle/wht-circle.png"},
{title:"White Square",path:"http://maps.google.com/mapfiles/kml/paddle/wht-square.png"},{title:"White Stars",path:"http://maps.google.com/mapfiles/kml/paddle/wht-stars.png"},{title:"Red Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/red-diamond.png"},{title:"Red Circle",path:"http://maps.google.com/mapfiles/kml/paddle/red-circle.png"},{title:"Red Square",path:"http://maps.google.com/mapfiles/kml/paddle/red-square.png"},{title:"Red Stars",path:"http://maps.google.com/mapfiles/kml/paddle/red-stars.png"},
{title:"Purple Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/purple-diamond.png"},{title:"Purple Circle",path:"http://maps.google.com/mapfiles/kml/paddle/purple-circle.png"},{title:"Purple Square",path:"http://maps.google.com/mapfiles/kml/paddle/purple-square.png"},{title:"Purple Stars",path:"http://maps.google.com/mapfiles/kml/paddle/purple-stars.png"},{title:"Arrow Reverse",path:"http://maps.google.com/mapfiles/kml/shapes/arrow-reverse.png"},{title:"Arrow",path:"http://maps.google.com/mapfiles/kml/shapes/arrow.png"},
{title:"Donut",path:"http://maps.google.com/mapfiles/kml/shapes/donut.png"},{title:"Forbidden",path:"http://maps.google.com/mapfiles/kml/shapes/forbidden.png"},{title:"Info I",path:"http://maps.google.com/mapfiles/kml/shapes/info-i.png"},{title:"Polygon",path:"http://maps.google.com/mapfiles/kml/shapes/polygon.png"},{title:"Diamond",path:"http://maps.google.com/mapfiles/kml/shapes/open-diamond.png"},{title:"Square",path:"http://maps.google.com/mapfiles/kml/shapes/square.png"},{title:"Star",path:"http://maps.google.com/mapfiles/kml/shapes/star.png"},
{title:"Target",path:"http://maps.google.com/mapfiles/kml/shapes/target.png"},{title:"Triangle",path:"http://maps.google.com/mapfiles/kml/shapes/triangle.png"},{title:"Crosshairs",path:"http://maps.google.com/mapfiles/kml/shapes/cross-hairs.png"},{title:"Square",path:"http://maps.google.com/mapfiles/kml/shapes/placemark_square.png"},{title:"Circle",path:"http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png"},{title:"Shaded Dot",path:"http://maps.google.com/mapfiles/kml/shapes/shaded_dot.png"},
{title:"Dining",path:"http://maps.google.com/mapfiles/kml/shapes/dining.png"},{title:"Coffee",path:"http://maps.google.com/mapfiles/kml/shapes/coffee.png"},{title:"Bars",path:"http://maps.google.com/mapfiles/kml/shapes/bars.png"},{title:"Snack Bar",path:"http://maps.google.com/mapfiles/kml/shapes/snack_bar.png"},{title:"Man",path:"http://maps.google.com/mapfiles/kml/shapes/man.png"},{title:"Woman",path:"http://maps.google.com/mapfiles/kml/shapes/woman.png"},{title:"Wheel Chair Accessible",path:"http://maps.google.com/mapfiles/kml/shapes/wheel_chair_accessible.png"},
{title:"Parking Lot",path:"http://maps.google.com/mapfiles/kml/shapes/parking_lot.png"},{title:"Cabs",path:"http://maps.google.com/mapfiles/kml/shapes/cabs.png"},{title:"Bus",path:"http://maps.google.com/mapfiles/kml/shapes/bus.png"},{title:"Truck",path:"http://maps.google.com/mapfiles/kml/shapes/truck.png"},{title:"Rail",path:"http://maps.google.com/mapfiles/kml/shapes/rail.png"},{title:"Airports",path:"http://maps.google.com/mapfiles/kml/shapes/airports.png"},{title:"Ferry",path:"http://maps.google.com/mapfiles/kml/shapes/ferry.png"},
{title:"Heliport",path:"http://maps.google.com/mapfiles/kml/shapes/heliport.png"},{title:"Subway",path:"http://maps.google.com/mapfiles/kml/shapes/subway.png"},{title:"Tram",path:"http://maps.google.com/mapfiles/kml/shapes/tram.png"},{title:"Info",path:"http://maps.google.com/mapfiles/kml/shapes/info.png"},{title:"Circle",path:"http://maps.google.com/mapfiles/kml/shapes/info_circle.png"},{title:"Flag",path:"http://maps.google.com/mapfiles/kml/shapes/flag.png"},{title:"Rainy",path:"http://maps.google.com/mapfiles/kml/shapes/rainy.png"},
{title:"Water",path:"http://maps.google.com/mapfiles/kml/shapes/water.png"},{title:"Snowflake Simple",path:"http://maps.google.com/mapfiles/kml/shapes/snowflake_simple.png"},{title:"Marina",path:"http://maps.google.com/mapfiles/kml/shapes/marina.png"},{title:"Fishing",path:"http://maps.google.com/mapfiles/kml/shapes/fishing.png"},{title:"Sailing",path:"http://maps.google.com/mapfiles/kml/shapes/sailing.png"},{title:"Swimming",path:"http://maps.google.com/mapfiles/kml/shapes/swimming.png"},{title:"Ski",
path:"http://maps.google.com/mapfiles/kml/shapes/ski.png"},{title:"Parks",path:"http://maps.google.com/mapfiles/kml/shapes/parks.png"},{title:"Campfire",path:"http://maps.google.com/mapfiles/kml/shapes/campfire.png"},{title:"Picnic",path:"http://maps.google.com/mapfiles/kml/shapes/picnic.png"},{title:"Campground",path:"http://maps.google.com/mapfiles/kml/shapes/campground.png"},{title:"Ranger Station",path:"http://maps.google.com/mapfiles/kml/shapes/ranger_station.png"},{title:"Toilets",path:"http://maps.google.com/mapfiles/kml/shapes/toilets.png"},
{title:"Poi",path:"http://maps.google.com/mapfiles/kml/shapes/poi.png"},{title:"Hiker",path:"http://maps.google.com/mapfiles/kml/shapes/hiker.png"},{title:"Cycling",path:"http://maps.google.com/mapfiles/kml/shapes/cycling.png"},{title:"Motorcycling",path:"http://maps.google.com/mapfiles/kml/shapes/motorcycling.png"},{title:"Horseback Riding",path:"http://maps.google.com/mapfiles/kml/shapes/horsebackriding.png"},{title:"Play",path:"http://maps.google.com/mapfiles/kml/shapes/play.png"},{title:"Golf",
path:"http://maps.google.com/mapfiles/kml/shapes/golf.png"},{title:"Trail",path:"http://maps.google.com/mapfiles/kml/shapes/trail.png"},{title:"Shopping",path:"http://maps.google.com/mapfiles/kml/shapes/shopping.png"},{title:"Movies",path:"http://maps.google.com/mapfiles/kml/shapes/movies.png"},{title:"Convenience",path:"http://maps.google.com/mapfiles/kml/shapes/convenience.png"},{title:"Grocery",path:"http://maps.google.com/mapfiles/kml/shapes/grocery.png"},{title:"Arts",path:"http://maps.google.com/mapfiles/kml/shapes/arts.png"},
{title:"Home Garden Business",path:"http://maps.google.com/mapfiles/kml/shapes/homegardenbusiness.png"},{title:"Electronics",path:"http://maps.google.com/mapfiles/kml/shapes/electronics.png"},{title:"Mechanic",path:"http://maps.google.com/mapfiles/kml/shapes/mechanic.png"},{title:"Gas Stations",path:"http://maps.google.com/mapfiles/kml/shapes/gas_stations.png"},{title:"Real Estate",path:"http://maps.google.com/mapfiles/kml/shapes/realestate.png"},{title:"Salon",path:"http://maps.google.com/mapfiles/kml/shapes/salon.png"},
{title:"Dollar",path:"http://maps.google.com/mapfiles/kml/shapes/dollar.png"},{title:"Euro",path:"http://maps.google.com/mapfiles/kml/shapes/euro.png"},{title:"Yen",path:"http://maps.google.com/mapfiles/kml/shapes/yen.png"},{title:"Firedept",path:"http://maps.google.com/mapfiles/kml/shapes/firedept.png"},{title:"Hospitals",path:"http://maps.google.com/mapfiles/kml/shapes/hospitals.png"},{title:"Lodging",path:"http://maps.google.com/mapfiles/kml/shapes/lodging.png"},{title:"Phone",path:"http://maps.google.com/mapfiles/kml/shapes/phone.png"},
{title:"Caution",path:"http://maps.google.com/mapfiles/kml/shapes/caution.png"},{title:"Earthquake",path:"http://maps.google.com/mapfiles/kml/shapes/earthquake.png"},{title:"Falling Rocks",path:"http://maps.google.com/mapfiles/kml/shapes/falling_rocks.png"},{title:"Post Office",path:"http://maps.google.com/mapfiles/kml/shapes/post_office.png"},{title:"Police",path:"http://maps.google.com/mapfiles/kml/shapes/police.png"},{title:"Sunny",path:"http://maps.google.com/mapfiles/kml/shapes/sunny.png"},{title:"Partly Cloudy",
path:"http://maps.google.com/mapfiles/kml/shapes/partly_cloudy.png"},{title:"Volcano",path:"http://maps.google.com/mapfiles/kml/shapes/volcano.png"},{title:"Camera",path:"http://maps.google.com/mapfiles/kml/shapes/camera.png"},{title:"Webcam",path:"http://maps.google.com/mapfiles/kml/shapes/webcam.png"}];function AM(){oM.call(this)}w(AM,oM);
AM.prototype.g=function(a){a.src||(a.src=tM);var b=a.src;b&&wM.test(b)&&(a.src=yM(b),!a.anchor&&-1<b.indexOf("/pushpin/")&&(a.anchor=[.33,.07],a.anchorOrigin="bottom-left",a.anchorXUnits="fraction",a.anchorYUnits="fraction"),!a.anchor&&-1<b.indexOf("/paddle/")&&(-1<b.indexOf("-lv")?a.scale=.5:(a.anchor=[.5,.07],a.anchorOrigin="bottom-left",a.anchorXUnits="fraction",a.anchorYUnits="fraction")));a.fill&&a.fill.color&&(a.color=a.fill.color);b=1;for(var c in a)void 0!==a[c]&&(b+=bc(a[c].toString()));
this.cache[b]||(a={anchor:a.anchor,anchorOrigin:a.anchorOrigin,anchorXUnits:a.anchorXUnits,anchorYUnits:a.anchorYUnits,color:a.color,offset:a.offset,offsetOrigin:a.offsetOrigin,rotation:a.rotation,scale:a.scale,size:a.size,src:a.src},c=new Ve(a.src),a.crossOrigin=sx(c),od&&"none"===a.crossOrigin&&(a.crossOrigin=void 0),this.cache[b]=new uM(a),this.cache[b].id=b);return this.cache[b]};
AM.prototype.l=function(a,b){if(a instanceof pL){b.type="icon";var c=a.A;c&&.5!=c[0]&&.5!=c[1]&&(b.anchor=c);(c=a.l)&&"top-left"!=c&&(b.anchorOrigin=c);(c=a.G)&&"fraction"!=c&&(b.anchorXUnits=c);(c=a.P)&&"fraction"!=c&&(b.anchorYUnits=c);a.g&&a.g.o&&(b.color=mj(a.g.o));(c=a.ka)&&0!==c[0]&&0!==c[1]&&(b.offset=c);(c=a.s)&&"top-left"!=c&&(b.offsetOrigin=c);c=a.o;void 0!==c&&0!==c&&(b.rotation=c);c=a.L;void 0!==c&&1!==c&&(b.scale=c);(c=a.tf())&&(b.size=c);(a=a.g.l)&&(b.src=a)}};var tM=yM("http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png");function BM(){oM.call(this)}w(BM,oM);BM.prototype.g=function(a){return this.j[a.type||"circle"].g(a)};BM.prototype.l=function(a,b){if(a instanceof Wj){var c={};b.image=c;for(var d in this.j)this.j[d].l(a,c)}};BM.prototype.yn=function(a){a&&(a=zc(a),delete a.image);BM.C.yn.call(this,a)};var Oia={point:{points:1},triangle:{points:3},square:{angle:Le(45),points:4}};function CM(){oM.call(this)}w(CM,oM);
CM.prototype.g=function(a){var b,c=a.subType||"point",d=1+bc(c);var e=a.radius;null==e&&(e=3);e=Math.round(1.33*e);d+=e;var f=a.fill;if(f){var h=this.j.fill.g(f);d+=h.id}if(a=a.stroke){var k=this.j.stroke.g(a);d+=k.id}this.cache[d]||((c=Oia[c])&&void 0!==c.radius2&&(b=e+c.radius2),this.cache[d]=new Xj({angle:c.angle,fill:h,points:c.points,radius:e,radius2:b,snapToPixel:c.snapToPixel,stroke:k}),this.cache[d].id=d);return this.cache[d]};function DM(){oM.call(this)}w(DM,oM);DM.prototype.g=function(a){var b=a.width||3,c=a.color||"rgba(255,255,255,1)";c=mj(c);a=1+b+bc(c);this.cache[a]||(this.cache[a]=new ak({width:b,color:c}),this.cache[a].id=a);return this.cache[a]};DM.prototype.l=function(a,b){if(a instanceof ak){var c=a.La(),d={};b.stroke=d;null!==c&&void 0!==c&&(d.color=mj(c));a=a.g;null!==a&&void 0!==a&&(d.width=a)}};function EM(){oM.call(this)}w(EM,oM);EM.prototype.g=function(a){var b,c=[];var d=a.zIndex||0;var e=1+d;(b=a.geometry)&&(e+=bc(b));c.push(e);if(e=a.image){var f=this.j.image.g(e);c.push(f.id)}else c.push(0);if(e=a.fill){var h=this.j.fill.g(e);c.push(h.id)}else c.push(0);if(a=a.stroke){var k=this.j.stroke.g(a);c.push(k.id)}else c.push(0);c=c.join("-");this.cache[c]||(this.cache[c]=new bk({geometry:b,image:f,fill:h,stroke:k,zIndex:d}),this.cache[c].id=c);return this.cache[c]};
EM.prototype.l=function(a,b){if(a instanceof bk){var c=a.X();c&&(b.geometry=c);c=a.xc();void 0!==c&&0!==c&&(b.zIndex=c);(c=a.Ua())&&this.j.image.l(c,b);(c=a.ob())&&this.j.fill.l(c,b);(a=a.kb())&&this.j.stroke.l(a,b)}};var Pia=E.V("os.style.label"),Qia={column:null,showColumn:!1};function sH(a,b){if(a)b=a;else{if(a=b){a:{a=0;for(var c=b.length;a<c;a++)if(b[a].column!==Qia.column){a=!1;break a}a=!0}a=!a}b=a?b:[tH()]}return b}function tH(a){a=a||Qia;return{column:a.column,showColumn:a.showColumn}}function FM(a){return a?a.filter(function(a){return null!=a&&!!a.column}):[]}
var Sia=new ne(function(){var a=T.u();if(a.Y()&&M(a.Y()))var b=M(a.Y());else return!1;b=b.ab();if(void 0===b)return!1;var c=ev(a);if(bi(c,bu))return!1;var d=Vk(c),e=Th();c=Ha();var f=[],h=[],k={},l={},m=GL(V);m.sort(iia);for(var n=0,p=m.length;n<p;n++){var r=m[n];if(r instanceof vL&&r.Hb()){var u=r.D(),v=mH(nH.u(),u);v&&v.showLabels&&(l[u]=v.labels,k[u]=[],f.push(r),v=r.fe(!1),h=h.concat(Ria(r,d,v)))}}d={};n=0;for(p=h.length;n<p;n++)if(m=h[n],!(m.id in d)){d[m.id]=!0;v=m.la._style;r=m.la.sourceId;
var x=uH(m,sH(v?v.labels:null,l[r])),B=vH(m);if(B instanceof tk&&x)for(v=mH(nH.u(),r),x=Wy(x,"feature-label",wH(v.labelSize)),v=(x.width+5)*b,x=(x.height+5)*b,VB(m)&&k[r].push(m),m=ii(B.aa()),ai(m,e),e[0]-=v,e[1]-=x,e[2]+=v,e[3]+=x,m=0,r=f.length;m<r;m++)if(B=f[m],v=B.D(),B=B.Il(e)){x=0;for(var F=B.length;x<F;x++){var D=B[x];if(!(D.id in d)){var S=D.X();if(S&&"Point"!=S.T()&&(S=ii(S.aa()),!Xh(e,S)))continue;d[D.id]=!0;UB(D)&&k[v].push(D)}}}}for(u in k)0<k[u].length&&(lH(k[u]),(b=a.W(u))&&CH(b,k[u],
"labelVisibility"));a="Label visibility computed in "+(Ha()-c)+"ms.";E.za(Pia,a);return!0});function GM(){Sia.isActive()||Sia.start(100,5E3)}function hha(a){try{var b=(new DOMParser).parseFromString(a,"text/html").body.textContent}catch(c){b=a}b=b.trim();return b=b.split("\n").map(function(a){return Tb(a.trim(),50)}).join("\n")}
function uH(a,b){return b.map(function(b){var c=b.column;switch(c){case "TIME":c=a.la.recordTime||"";break;default:c=a.la[c]}(c=null!=c?c.toString():"")&&b.showColumn&&(c=b.column+": "+c);return c}).filter(CA).join("\n")}function wH(a){a=Je(a||14,8,24)+"px";return"bold "+a+"/"+a+" Arial"}function vH(a){var b,c=a.get("_labelGeometry");c&&(b=a.get(c));b||(b=a.X());b instanceof Kr&&(b=(a=b.g)&&a[0]||null);return b};function HM(){oM.call(this)}w(HM,oM);HM.prototype.g=function(a){return new VK({text:a.text,textAlign:a.textAlign||"center",textBaseline:a.textBaseline||"middle",font:a.font||wH(),fill:new Zj({color:a.fillColor||"rgba(255,255,255,1)"}),stroke:new ak({color:a.strokeColor||"rgba(0,0,0,1)",width:void 0!==a.strokeWidth?a.strokeWidth:2}),offsetX:void 0!==a.offsetX?a.offsetX:0,offsetY:void 0!==a.offsetY?a.offsetY:0})};function nH(){this.l=new EM;this.j={circle:new pM,fill:new qM,icon:new AM,image:new BM,shape:new CM,stroke:new DM,text:new HM};this.l.yn(this.j);for(var a in this.j)this.j[a].yn(this.j);this.g={}}wa(nH);function rH(a,b){return a.l.g(b)}function mH(a,b){return b in a.g?a.g[b]:null}function Tia(a,b){if(b in a.g)a=a.g[b];else{var c=Gs($B);a=a.g[b]=c}return a};function IM(a){z.call(this,a);this.j=null}w(IM,z);IM.prototype.toString=function(){return this.j?this.j.toISOString():IM.C.toString.call(this)};function JM(a,b){b=void 0!==b?b:"auto";var c=KM(a);"auto"==b?24174E5<=c?LM(a,6048E5,"week"):4302E5<=c?LM(a,864E5,"day"):(MM(a,c),NM(a,"day")):"week"==b||"month"==b?LM(a,6048E5,"week"):"day"==b&&LM(a,864E5,"day");a.Ad(OM(a).start+a.cc())}function MM(a,b){if(a){var c=b/24-b/24%1E3;0==c&&(c=b/24);var d=cL(a.j).getLength();c<d/24&&(c=Math.min(b/2,d/24));PM(a,c);QM(a,c/2)}}function LM(a,b,c){PM(a,b);QM(a,b);NM(a,c)};function hw(){A.call(this);this.U=O.get(["tlc","fps"],2);this.g=0;this.L="day";this.B=this.N=!1;this.A=this.G=1E3;this.oa=Number.MAX_VALUE;this.Z=!1;this.ka=null;this.I=new je(1E3/this.U);this.I.H("tick",this.Mv,!1,this);this.Ia=new le(this.cK,50,this);this.j=new $K;RM(this,new WK(0,0));this.P=new $K;this.o=new $K;this.l=new $K;this.s=new $K;this.ra=null;this.Ca=!1;var a=AC(new Date);a=mC(a,"day");var b=oC(a,"day",1);this.Z=!0;this.ae(SM(a.getTime(),b.getTime()));NM(this,"day");PM(this,KM(this));
TM(this,!1);UM(this,!1);this.Ad(b.getTime());this.Z=!1;MM(this,KM(this))}w(hw,A);wa(hw);g=hw.prototype;g.ud=function(){return null!=this.I&&this.I.enabled};g.Ad=function(a){this.g!==a&&(this.oa=this.g,this.g=a,VM(this))};function NM(a,b){a.L!=b&&(a.L=b,WM(a),Uia(a),a.dispatchEvent("timeline.durationChange"))}g.Ya=function(){return cL(this.j).end};function TM(a,b){a.N=b;a.dispatchEvent("timeline.fadeToggle")}function UM(a,b){a.B=b;a.dispatchEvent("timeline.lockToggle")}
function XM(a,b){var c=a.ud();a.I&&a.I.dispose();a.U=b;a.I=new je(1E3/a.U);a.I.H("tick",a.Mv,!1,a);c&&a.I.start();O.set(["tlc","fps"],b);a.dispatchEvent("timeline.fpsChange")}function KM(a){a=a.l.isEmpty()?YM(a):a.l;var b=[];Pe(a.pe(!1),function(a){b.push(a.getLength())});Ab(b);return b[0]}g.cc=function(){return this.G};function PM(a,b){var c=a.G;a.G=Math.max(b,0);c!=a.G&&VM(a)}
function JL(a,b){b=mC(new Date(b),a.L).getTime();var c=oC(new Date(b),a.L,1).getTime();a.Z=!0;a.ae(SM(b,c));a.Z=!1;a.Ad(c)}function SM(a,b){return new WK(a,b)}g.ae=function(a){1==Qe(this.j).length&&Via(this.j,a)||(Wia(this),RM(this,a))};function Xia(a,b,c){var d=new WK(0,0);b+=c*a.A;a=b-a.cc();d.start=Math.min(b,a);d.end=Math.max(b,a);return d}function Yia(a){var b=new WK(0,0),c=a.g-a.cc();b.start=Math.min(a.g,c);b.end=Math.max(a.g,c);return b}function QM(a,b){a.A=Math.max(b,-1)}g.Pa=function(){return cL(this.j).start};
function OM(a){if(a.l.isEmpty()){var b=YM(a);return b.isEmpty()?cL(a.j):cL(b)}return cL(a.l)}function ZM(a){var b=OM(a);if(a.g>b.end&&a.oa>=b.end||a.oa<=b.start+a.G&&a.g<=b.start||a.B&&0===a.G)0<a.g-a.oa?a.first():a.last()}g.play=function(){this.I&&!this.I.enabled&&(this.I.start(),this.dispatchEvent("timeline.play"))};g.stop=function(){this.I&&this.I.enabled&&(this.I.stop(),this.dispatchEvent("timeline.stop"))};g.first=function(){var a=OM(this);this.B&&PM(this,this.A);this.Ad(a.start+this.G)};
g.last=function(){var a=OM(this);this.B&&PM(this,a.getLength());this.Ad(a.end)};function Zia(a){if(a.Ca)return a.Ca=!1;var b=OM(a),c=Xia(a,a.g,1);c.start<b.end&&c.end>=b.end&&(a.Ca=!0);return c.start<b.end}g.next=function(){$M(this,1);ZM(this)};g.prev=function(){$M(this,-1);ZM(this)};g.Mv=function(){$M(this,1);ZM(this)};g.cK=function(){this.dispatchEvent(new IM("timeline.reset"))};
function VM(a){if(!a.Z){var b=new IM("timeline.show"),c=a.g,d=a.g-a.G;b.N=a.N;b.j=new Uv(d,c);a.dispatchEvent(b);a.ka=b}}function aN(a){a.Ia.start()}function bN(a,b,c){var d=null,e;try{var f=Qe(a);if(0>b)for(e=f.length-1;0<=e;--e){var h=f[e];if(h.end<=c){d=h;break}}else for(e=0;e<f.length;e+=1)if(h=f[e],h.start>=c){d=h;break}return d}catch(k){throw Error("findNextNearestRange_ exception:"+k.message);}}
function $M(a,b){var c=a.g,d=Xia(a,a.g,b);d=0<b&&!a.B?d.start:d.end;if(a.l.isEmpty()){var e=YM(a);e.isEmpty()||bL(e,d)||(f=bN(e,b,a.g)||cL(e),YK(a.ra,f)&&(f=bN(e,b,d)||cL(e)),a.g=0<b?a.B?f.start:f.start+(a.G-a.A):f.end+a.A,e=Yia(a),e.start<=f.start&&e.end>=f.end&&(a.g=0<b?f.start:f.end),a.ra=f,a.B&&(cL(a.j).end===f.end&&0<a.A+d-f.end?a.g=c:PM(a,a.g-d+a.G+a.A*b)))}else if(!bL(a.l,d)){var f=bN(a.l,b,a.g)||cL(a.j);YK(a.ra,f)&&(f=bN(a.l,b,d)||cL(a.j));a.g=0<b?a.B?f.start-a.A:f.start+(a.G-a.A):f.end+a.A;
e=Yia(a);e.start<=f.start&&e.end>=f.end&&(a.g=0<b?f.start:f.end);a.ra=f;a.B&&(cL(a.j).end===f.end&&0<a.A+d-f.end?a.g=c:PM(a,a.g-d+a.G+a.A*b))}a.B?(c=a.G+b*a.A,a.Ad(a.g+b*a.A),PM(a,c)):a.Ad(a.g+b*a.A)}g.sa=function(a){a=a||{};a.start=this.Pa();a.end=this.Ya();a.duration=this.L;a.current=this.g;a.offset=this.cc();a.fade=this.N;a.lock=this.B;a.skip=this.A;a.playing=this.ud();a.sliceRanges=this.o.clone();a.loadRanges=this.j.clone();a.animateRanges=this.l.clone();a.holdRanges=this.s.clone();return a};
g.restore=function(a){this.ae(SM(a.start,a.end));NM(this,a.duration);PM(this,a.offset);TM(this,a.fade);UM(this,a.lock);QM(this,a.skip);this.Ad(a.current);cN(this,a.sliceRanges);$ia(this,a.loadRanges);dN(this,a.animateRanges);eN(this,a.holdRanges);MM(this,KM(this));a.playing?this.play():this.stop()};
function aja(a,b){var c=new WK(0,1);c.start=b.start;c.end=b.end;if(b=fN(c))c=a.o.clone(),b.start>b.end&&(a.o.add(new WK(0,b.end)),b=new WK(b.start,864E5)),a.o.add(b.clone()),aL(c,a.o)||(a.P.clear(),a.dispatchEvent("timeline.slice.rangeChanged"),a.dispatchEvent("timleline.rangeChanged"),c.isEmpty()&&!a.o.isEmpty()&&a.dispatchEvent("timeline.refreshLoad"),VM(a),aN(a))}
function fN(a){if(864E5<=a.end-a.start)return At(zt.u(),"Slice size must be less than a day, setting to largest allowable",us),new WK(0,864E5);var b=new WK(0,1);b.start=a.start;b.end=a.end;864E5<a.start&&(b.start=a.start%864E5);864E5<a.end&&(b.end=a.end%864E5);return b}
function cN(a,b){if(b){var c=a.o.clone();a.o=b.clone();a.P.clear();a.dispatchEvent("timeline.slice.rangeChanged");a.dispatchEvent("timleline.rangeChanged");(!c.isEmpty()&&a.o.isEmpty()||c.isEmpty()&&!a.o.isEmpty())&&a.dispatchEvent("timeline.refreshLoad");VM(a);aN(a)}}
function YM(a){var b=a.j.clone();if(!a.o.isEmpty()){if(a.P.isEmpty()){b=new $K;for(var c=Qe(a.o),d=Qe(a.j),e=0;e<d.length;e++){var f=Math.ceil((d[e].end-d[e].start)/864E5);d[e].end%864E5<d[e].start%864E5+1&&f++;for(var h=d[e].start-d[e].start%864E5,k=0;k<f;k++)for(var l=h+864E5*k,m=ZK(SM(l,l+864E5-1E3),d[e]),n=0;n<c.length;n++){var p=ZK(SM(l+c[n].start,l+c[n].end),m);p&&b.add(p)}}a.P=b}b=a.P.clone()}return b}function Wia(a){a.j.isEmpty()||(a.j.clear(),a.P.clear())}
function RM(a,b){var c=a.j.clone();a.j.add(b.clone());aL(c,a.j)||(a.P.clear(),a.dispatchEvent("timeline.slice.rangeChanged"),a.dispatchEvent("timleline.rangeChanged"),b=Qe(c).length,c=Qe(a.j).length,(1===b&&1<c||1===c)&&a.dispatchEvent("timeline.refreshLoad"),VM(a),aN(a))}function Via(a,b){return hba(gba(a,function(a){return a.start===b.start&&a.end===b.end}))}
function $ia(a,b){if(b){var c=Qe(a.j).length,d=Qe(b).length;(1===c&&1!=d||1<c&&1===d)&&a.dispatchEvent("timeline.refreshLoad");a.j=b.clone();a.P.clear();a.dispatchEvent("timeline.slice.rangeChanged");a.dispatchEvent("timleline.rangeChanged");VM(a);aN(a)}}function WM(a){a.l.isEmpty()||(a.l.clear(),a.dispatchEvent("timeline.animate.rangeChanged"),VM(a))}function gN(a,b){var c=a.l.clone();a.l.add(b.clone());aL(c,a.l)||(a.dispatchEvent("timeline.animate.rangeChanged"),VM(a))}
function bja(a,b){var c=a.l.clone();a.l.remove(b);aL(c,a.l)||(a.dispatchEvent("timeline.animate.rangeChanged"),VM(a))}function dN(a,b){b&&(a.l=b.clone(),a.dispatchEvent("timeline.animate.rangeChanged"),VM(a))}function eN(a,b){b&&(a.s=b.clone(),a.dispatchEvent("timeline.animate.holdRangeChanged"),VM(a))}function cja(a,b){var c=a.s.clone();a.s.remove(b);aL(c,a.s)||(a.dispatchEvent("timeline.animate.holdRangeChanged"),VM(a))}
function Uia(a){a.s.isEmpty()||(a.s.clear(),a.dispatchEvent("timeline.animate.holdRangeChanged"),VM(a))}function dja(a,b){var c=a.s.clone();a.s.add(b.clone());aL(c,a.s)||(a.dispatchEvent("timeline.animate.holdRangeChanged"),VM(a))}function AL(a,b){return b&&!a.s.isEmpty()?b.Pa()===b.Ya()?bL(a.s,b.Pa()):a.s.contains(new WK(b.Pa(),b.Ya())):!1};function eja(){try{var a=document.createElement("canvas");if(vj(a,{failIfMajorPerformanceCaveat:!0}))return!1;if(vj(a))return!0}catch(b){}return null};function vL(a){a=a?zc(a):{};delete a.url;this.log=fja;this.Ca=this.ra=!1;this.columns=[];this.ma="";this.ck=!1;this.Dd=SB;this.Ff="Point";this.Pp=0;this.N=this.af=!1;this.cf=this.df=0;this.j="";this.oa={};this.oa.goTo=!0;this.oa.identify=!0;this.oa.bufferSelected=!0;this.oa["export"]=!0;this.oa.clearSelection=!0;this.Md=!1;this.l=new Xv(jia,kia);this.G=null;this.visible=!0;this.Ei=null;this.Wd=[];this.gc={};this.ka={};this.xA=!1;this.jb=[];this.U=new le(this.qI,250,this);this.rf=[];this.zb=new le(this.oJ,
250,this);this.s=hw.u();this.g=null;this.pa={};this.hb={};this.Ia={};this.mf=this.L=vC;this.hd=!0;this.Z=0;this.De=a.hoverHandler||void 0;this.Nr=!1;this.Nb="absolute";this.Ea=0;this.A=null;this.Zr=!1;this.Fc=this.qf=null;this.bb={};this.cA=!1;a.disableAreaSelection||(C.H("select",this.wf,!1,this),C.H("selectExclusive",this.wf,!1,this),C.H("deselect",this.wf,!1,this),C.H("spatial:removeFeature",this.wf,!1,this),C.H("spatial:removeFeatures",this.wf,!1,this));this.s.H("timeline.fadeToggle",this.Vt,
!1,this);this.s.H("timeline.animate.holdRangeChanged",this.mn,!1,this);tm.call(this,a)}w(vL,tm);P(vL,"os.hist.IHistogramProvider");P(vL,"os.source.ISource");Nv["os.source.Vector"]=vL;var fja=E.V("os.source.Vector");g=vL.prototype;
g.J=function(){vL.C.J.call(this);this.A&&(this.A.M("tick",this.qk,!1,this),this.A=null);C.M("select",this.wf,!1,this);C.M("deselect",this.wf,!1,this);C.M("selectExclusive",this.wf,!1,this);C.M("spatial:removeFeature",this.wf,!1,this);C.M("spatial:removeFeatures",this.wf,!1,this);this.s.M("timeline.show",this.lk,!1,this);this.s.M("timeline.fadeToggle",this.Vt,!1,this);this.s.M("timeline.animate.holdRangeChanged",this.mn,!1,this);this.s=null;gja(this);Ma(this.U);this.U=null;this.jb.length=0;Ma(this.zb);
this.zb=null;this.rf.length=0;this.l&&(this.l.dispose(),this.l=null);this.G&&(this.G.dispose(),this.G=null);this.Zg(!1);this.clear()};g.ia=function(){this.Ca||(vL.C.ia.call(this),this.g&&this.g.ia())};g.qs=function(a,b){this.Kf[a]=[I(b,"change",this.ip,this)]};
g.clear=function(){if(!this.N){hN(this);this.ka={};this.cf=this.df=0;this.l&&this.l.clear();if(this.Ab){this.Ab.forEach(this.Mh,this);for(var a in this.Uc)this.Mh(this.Uc[a])}this.de&&this.de.clear();this.Ab&&this.Ab.clear();this.Kp.clear();this.Uc={};this.dispatchEvent(new wm("clear"));this.ia();iN(this);this.U&&this.jb&&(this.U.stop(),this.jb.length=0);jN(this);this.dispatchEvent(new U("cleared"))}};g.clearQueue=function(){this.qf&&(this.dg(this.qf),this.qf=null)};g.refresh=va;g.Fg=function(){return this.Zr};
g.xg=function(){return this.Ea};g.Qe=function(a){this.Ea!=a&&(this.Ea=a,this.A&&(this.A.M("tick",this.qk,!1,this),this.A.Sd()||this.A.stop()),this.A=null,0<this.Ea&&(this.A=yL[a],this.A||(this.A=new je(1E3*a),yL[a]=this.A),this.A.H("tick",this.qk,!1,this),this.A.start()),this.dispatchEvent(new U("refreshInterval")))};g.qk=function(){this.Fg()&&!this.mb()&&this.refresh()};g.getColumns=function(){return this.columns};
g.setColumns=function(a){this.ck=!0;this.columns=a.map(Hia);Iia(this);hja(this,this.Dd);ija(this)};vL.prototype.setColumns=vL.prototype.setColumns;function nM(a,b,c,d,e){kN(a,b)||(b=Gia(b,c,d),a.columns.push(b),e&&a.dispatchEvent(new U("columnAdded",b)))}
function ija(a){if(a.columns){yb(a.columns,a.columns,Yda());var b=V.Ja(a.D());if(b){var c=b.getColumns();c&&$ga(c,a.columns)}a.columns.forEach(function(a){var b=a.field;"SEMI_MAJOR (nmi)*"==b?(a.toolTip="Derived Column",a.derivedFrom="SEMI_MAJOR"):"SEMI_MINOR (nmi)*"==b?(a.toolTip="Derived Column",a.derivedFrom="SEMI_MINOR"):"ALTITUDE (m)*"==b&&(a.toolTip="Derived Column",a.derivedFrom="ALTITUDE");if(b=a.field)-1<b.indexOf("PROPERTIES")&&(a.formatter=rha),JA.test(b)&&(a.formatter=Eia);if(!uc(this.bb)&&
(b=this.bb[a.name]))if(wc(b,"empty"),1==kc(b)){a:{for(c in b)break a;var c=void 0}a.type=c}else 2==kc(b)&&pc(b,"integer")&&pc(b,"decimal")&&(a.type="decimal")},a);b&&b.setColumns(a.columns);a.columns.some(cG)||(a.columns.sort(XF),a.columns.forEach(function(a){var b=a.field;if("ALTITUDE_UNITS"==b||"SEMI_MINOR_UNITS"==b||"SEMI_MAJ_UNITS"==b||"BEARING"==b||"BEARING"==b||"ALTITUDE"==b||"SEMI_MINOR"==b||"SEMI_MAJOR"==b)a.visible=!1}));kN(a,"BEARING")&&(b=mH(nH.u(),a.D()))&&!b.rotationColumn&&(b.rotationColumn=
"BEARING");a.dispatchEvent(new U("columns",a.columns))}}function kN(a,b){var c=null;"string"===typeof b?c=b:Aa(b)&&(c=b.field);if(c)for(b=a.columns.length;b--;)if(a.columns[b].field==c)return!0;return!1}
function jja(a,b){var c=a.Dd;a.Dd=b;hja(a,b);var d=QG.test(b);b=PG.test(b);c=QG.test(c)||PG.test(c);if(d||b||c){c=a.Oa();var e=mH(nH.u(),a.D());e={pt:e.arrowSize,qt:e.arrowUnits,rt:e.lobBearingColumn,fo:e.lobBearingError,st:e.lobBearingErrorColumn,Ct:e.lobColumnLength,length:e.lobLength,Ip:e.lobLengthType,av:e.lobLengthColumn,dv:e.lobLengthUnits,Hp:e.lobLengthError,bv:e.lobLengthErrorColumn,cv:e.lobLengthErrorUnits,Oz:e.showArrow,Pz:e.showEllipse,Qz:e.showError};for(var f=0,h=c.length;f<h;f++){var k=
[c[f].X()];d&&(DB(c[f]),k.push(c[f].get("ellipse")));b&&FB(c[f],!0,e);kH(a,c[f])}}}var lN=Th();function kH(a,b){if(b){var c=b.Qb();c=Array.isArray(c)?c:[c];lN[0]=Infinity;lN[1]=Infinity;lN[2]=-Infinity;lN[3]=-Infinity;for(var d=0,e=c.length;d<e;d++){var f=(0,c[d].ef)(b);f&&(f=Gr(f))&&ci(lN,f)}fi(lN)||(H(b)in a.Ab.g?a.Ab.update(lN,b):a.Ab.pf(lN,b))}}g=vL.prototype;
g.Zz=function(a){return!QG.test(a)||kN(this,"RADIUS")||kN(this,"SEMI_MAJOR")&&kN(this,"SEMI_MINOR")||kN(this,"SEMI_MAJOR (nmi)*")&&kN(this,"SEMI_MINOR (nmi)*")?!0:!1};g.Uu=function(a){return!QG.test(a)&&!SG.test(a)&&!PG.test(a)};
function hja(a,b){var c=zt.u(),d=Ha();0<a.columns.length&&QG.test(b)&&(kN(a,"SEMI_MAJOR (nmi)*")&&kN(a,"SEMI_MINOR (nmi)*")||kN(a,"RADIUS")?!(0==a.Pp||3E5<d-a.Pp)||kN(a,"SEMI_MAJ_UNITS")&&kN(a,"SEMI_MINOR_UNITS")||kN(a,"RADIUS")||(At(c,"The "+b+" style assumes that the SEMI_MAJOR, SEMI_MINOR or RADIUS/CEP fields are in nautical miles. If the values are greater than or equal to 250, they are assumed to be in meters.",us,a.log,1),a.Pp=d):At(c,"The "+b+" style assumes that the SEMI_MAJOR & SEMI_MINOR fields or RADIUS/CEP exist. If not, a point will be shown instead.",
ss,a.log,1))}g.D=function(){return this.ma};g.ga=function(a){if(this.ma!==a){var b=this.ma;this.ma=a;this.dispatchEvent(new U("id",a,b))}};g.mb=function(){return this.af};
g.Va=function(a){if(this.af!==a){var b=this.af;this.af=a;this.dispatchEvent(new U("loading",a,b));b=gM.u();if(a){var c=this.D(),d=this.S(),e=!uc(b.g);b.g[c]?(E.za(b.log,"Incrementing load count for task ID: "+c),b.g[c].count++):(E.za(b.log,"Adding new loading task with ID: "+c),d=new fM(c,d),d.count++,b.g[c]=d,b.dispatchEvent(new eM("load:add",d)));e||e===!uc(b.g)||b.dispatchEvent(new U("loadingManager:loading",!0,!1))}else if(c=this.D(),e=b.g[c])E.za(b.log,"Decrementing load count for task ID: "+
c),e.count--,0>=e.count&&(E.za(b.log,"Removing load task with ID: "+c),delete b.g[c],b.dispatchEvent(new eM("load:remove",e))),!uc(b.g)||b.dispatchEvent(new U("loadingManager:loading",!1,!0));!a&&this.U&&(this.U.start(),this.dispatchEvent("load"))}};g.La=function(){var a=mH(nH.u(),this.D());return QB(a)||"rgba(255,255,255,1)"};function kja(a,b){var c=a.Nb;a.Nb=b;a.dispatchEvent(new U("altitude",b,c))}g.Gi=function(){return this.Nr};
g.Zg=function(a){var b=this.N;this.N=a;this.dispatchEvent(new U("lock",a,b))};g.Qj=function(){return this.df};g.Of=function(){return this.cf};g.S=function(a){var b=T.u().W(this.D());return(a=!a&&b?b.Nf():"")?this.j+" "+a:this.j};g.Ta=function(a){if(this.j!==a){var b=this.j;this.j=a;this.dispatchEvent(new U("title",a,b))}};g.tn=function(a){this.ra!==a&&(this.ra=a,lja(this),this.dispatchEvent(new U("featureVisibility")))};
function mN(a,b){(a.Ca=b)||a.ia();a.g&&(b?(a.g.setMap(null),Hc(function(){nN(this,void 0,this.g.Oa())},a)):(nN(a,a.g.Oa()),a.g.setMap(T.u().Y()),a.g.ia()))}function oN(a,b){a.Md!==b&&(a.Md=b,lja(a),pN(a),a.dispatchEvent(new U("timeEnabled",b,!b)))}function qN(a,b,c){(b=b||vC)&&a.L!=b&&(a.L=b,(null!=c?c:1)&&a.l&&jw(a.l,b,!1,!1))}function HL(a,b){a.hd!=b&&(a.hd=b,a.dispatchEvent(new U("timeFilter",b,!b)))}g.Ap=function(){return!1};
function lja(a){if(a.ra&&a.Md){var b=a.s.ka;qN(a,b?b.j:vC,!1);if(!a.g){var c=T.u().W(a.D());b=c.Xb();c=c.xc();a.g=new cM({map:a.Ca?null:T.u().Y(),opacity:b,zIndex:c});a.dispatchEvent(new U("animationEnabled",!0));for(var d in a.pa)if(b=a.pa[d])b.l(b),mja(a,b)}a.s.H("timeline.show",a.lk,!1,a);a.s.H("timeline.play",a.Am,!1,a);a.s.H("timeline.stop",a.Am,!1,a)}else qN(a,vC),a.s.M("timeline.show",a.lk,!1,a),a.s.M("timeline.play",a.Am,!1,a),a.s.M("timeline.stop",a.Am,!1,a),gja(a)}
g.Kt=function(a){return new ZL(this,a)};vL.prototype.createHistogram=vL.prototype.Kt;vL.prototype.so=function(a,b){b=new RL(b);SL(b,a||this.Kt());return b};vL.prototype.createColorModel=vL.prototype.so;vL.prototype.VC=function(){return this.G};vL.prototype.getColorModel=vL.prototype.VC;function $L(a,b){b!==a.G&&(a.G&&(a.G.dispose(),a.G=null),a.G=b,a.G&&a.G.H("propertychange",a.sG,!1,a),a.dispatchEvent(new U("colorModel")))}g=vL.prototype;
g.sG=function(a){"style"===a.l&&(this.dispatchEvent(new U("style")),this.ia())};g.mn=function(){this.l&&(this.Ia={},this.l.clear(),this.l.add(this.Oa()),pN(this),this.dispatchEvent(new U("timeModel")))};g.fe=function(a){if(this.Hb()){var b=!this.hd||this.s.ud(),c=(a=null!=a?a:b)?vC:this.L,d=jw(this.l,c,!0);a!=b&&(c=b?vC:this.L,jw(this.l,c,!0));return d}return[]};g.Fi=function(a){return!this.ka["string"==typeof a?a:a.ma]};g.Hb=function(){return this.visible};
g.ec=function(a){a!==this.visible&&(this.visible=a,pN(this),jN(this),this.dispatchEvent(new U("visible",a,!a)))};g.ac=function(a){this.Nc([a])};
g.Nc=function(a){this.clearQueue();if(a&&0<a.length){iN(this);var b=Qy(XI.u()),c=Ry();b+a.length>=c&&(a.length=Math.max(c-b,0),lia(c));this.Z+=a.length;this.bb={};b=0;for(c=a.length;b<c;b++)a[b].hc=!1,this.Mr(a[b]),a[b].hc=!0;this.dispatchEvent(new U("preprocessFeatures",a));this.U&&(this.jb=this.jb.concat(a),this.Ca&&this.mb()||this.U.start());b=this.Ab;this.Ab=null;vL.C.Nc.call(this,a);this.Ab=b}};
g.Fb=function(a,b){var c=H(a).toString();c in this.Uc?delete this.Uc[c]:!b&&this.Ab&&this.Ab.remove(a);this.Mh(a);this.ia()};g.dg=function(a){for(var b=1E4<a.length,c=0,d=a.length;c<d;c++)try{this.Fb(a[c],b)}catch(k){}if(b&&this.Ab){d=[];var e=[],f=[],h=this.Oa();c=0;for(b=h.length;c<b;c++)a=h[c],void 0!==this.Sc[a.ma.toString()]&&e.push(a);c=0;for(b=e.length;c<b;c++)if(a=e[c],h=a.X())h=h.aa(),d.push(h),f.push(a);this.Ab.clear();this.Ab.load(d,f)}};
g.Mh=function(a){if(a){this.U&&this.U.isActive()&&me(this.U);this.Z=Math.max(this.Z-1,0);a.hc=!1;var b=a.ma;this.ka[b]=void 0;a instanceof ZB&&(nja(this,a),a.g(a,!0),this.pa[b]=void 0);a.hc=!0;this.zb&&(this.rf.push(a),b=this.zb,b.isActive()||b.start(void 0));b=H(a).toString();this.Kf[b].forEach(rh);this.Kf[b]=void 0;void 0!==a.ma?this.Sc[a.ma.toString()]=void 0:this.Te[b]=void 0}};
g.Mr=function(a){void 0===a.ma&&a.ga(H(a));var b=a.ma;this.ka[b]=!0;a.la.sourceId=this.D();var c=a.X();if(c){c.aa().some(isNaN)&&a.sb(null);var d=c.T();"Point"===d?(QG.test(this.Dd)&&DB(a),HB(a)):"LineString"===d||"MultiLineString"===d?(c.toLonLat(),c=Uu(c),iu(c),a.sb(c)):c.get("_normalized")||(c.toLonLat(),Qu(c),iu(c))}pD(a);null==a.la.ID&&(a.la.ID=b);null==a.la.showLabels&&(a.la.showLabels=!1);a instanceof ZB&&(this.pa[b]=a,this.g&&(a.l(a),mja(this,a)));jH(a,this);kH(this,a);this.cA&&oja(this,a)};
function oja(a,b){b.Ub().forEach(function(a){var c=b.la[a],e=typeof c;""===c?e="empty":"number"===e?e=Math.floor(c)===c?"integer":"decimal":"string"===e&&Ez.test(String(c))&&(c=parseFloat(c),e=Math.floor(c)===c?"integer":"decimal",b.la[a]=c);a in this.bb||(this.bb[a]={});e in this.bb[a]||(this.bb[a][e]=0);this.bb[a][e]++},a)}g.qI=function(){var a=this.jb;this.jb=[];a&&0<a.length&&this.Kr(a)};
g.Kr=function(a){E.za(this.log,this.S()+" processing "+a.length+" new features.");if(!this.ck&&0<a.length){for(var b=!1,c,d=0;d<a.length;d++){c=a[d];c=c.la;for(var e in c)kN(this,e)||KB(e)?"recordTime"!==e||kN(this,"recordTime")||kN(this,"TIME")||(nM(this,"recordTime","TIME"),b=!0):(nM(this,e),b=!0)}b&&ija(this)}this.l&&(this.l.add(a),b=this.l.B||gw,this.df=b.Pa(),this.cf=b.Ya());this.Ia={};jN(this);this.dispatchEvent(new U("features",a));this.g&&this.s.ka&&this.lk(this.s.ka);(a=vE.u())&&zE(a,"v1542394219/onboarding/features.json")};
g.oJ=function(){var a=this.rf;this.rf=[];if(a&&0<a.length){E.za(this.log,this.S()+" unprocessing "+a.length+" features.");this.Ia={};this.ka=ys(this.ka);this.Sc=ys(this.Sc);this.Te=ys(this.Te);this.pa=ys(this.pa);this.hb=ys(this.hb);rN(this,a,!0);if(this.l){var b=this.l,c=this.Oa();b.clear();b.add(c);b=this.l.B||gw;this.df=b.Pa();this.cf=b.Ya()}jN(this);this.g&&this.s.ka&&this.lk(this.s.ka);this.dispatchEvent(new U("features",void 0,a))}};function iN(a){a.zb&&a.zb.isActive()&&me(a.zb)}
g.lk=function(a){this.ra&&(this.mf=this.L,qN(this,a.j,!1),pN(this),jN(this),!this.s.ud()&&this.hd&&this.dispatchEvent(new U("featureVisibility")))};g.Am=function(){this.hd&&this.dispatchEvent(new U("featureVisibility"))};g.Vt=function(){if(!this.s.N&&this.xA&&this.g){var a=this.g.Oa();YB(a,1,this);this.Ca&&nN(this,void 0,this.g.Oa())}this.xA=this.s.N};
function pN(a){if(a.g)if(a.visible){var b,c;var d=c=b=vC;var e=a.L.Pa(),f=a.L.Ya();var h=.25*(f-e);var k=!1;a.s.N&&a.mf!=vC&&(a.mf.Ya()<a.L.Ya()?(b=new Uv(a.L.Pa()-h,a.L.Pa()),c=new Uv(b.Pa()-h,b.Pa()),d=new Uv(c.Pa()-h,c.Pa()),e=d.Pa(),k=!0):a.mf.Pa()>a.L.Pa()&&(b=new Uv(a.L.Ya(),a.L.Ya()+h),c=new Uv(b.Ya(),b.Ya()+h),d=new Uv(c.Ya(),c.Ya()+h),f=d.Ya(),k=!0));a.s.ud()?(h=a.L.toISOString(),h in a.Ia||(a.Ia[h]=jw(a.l,a.L,!0)),h=a.Ia[h]):h=jw(a.l,a.L,!0);k&&(k=a.g.Oa(),YB(k,1,a),b=jw(a.l,b),c=jw(a.l,
c),d=jw(a.l,d),YB(b,.75,a),YB(c,.5,a),YB(d,.25,a),h=h.concat(b,c,d));d=!1;for(var l in a.pa)if(c=a.pa[l])d=!0,(b=c.get("recordTime"))&&(b.Pa()>f||b.Ya()<e)&&!a.Fi(c)&&h.push(c);a.Ca&&(nN(a,void 0,a.g.Oa()),nN(a,a.g.Oa(),h));zL(a.g,h);for(l in a.pa)(c=a.pa[l])&&c.o(c,e,f);d&&a.dispatchEvent(new U("data"))}else zL(a.g,void 0),a.Ca&&nN(a,a.Oa(),[])}
function nN(a,b,c){var d={};if(b)for(var e=0,f=b.length;e<f;e++)d[b[e].ma]=!1;if(c)for(e=0,f=c.length;e<f;e++)b=c[e].ma,b in d&&!a.s.N?delete d[b]:d[b]=!0;a.dispatchEvent(new U("animationFrame",d))}function gja(a){if(a.g){var b=!1,c;for(c in a.pa){var d=a.pa[c];d&&(b=!0,nja(a,d),d.g(d,void 0))}a.hb={};b&&a.dispatchEvent(new U("data"));a.s&&a.s.N&&(b=a.Oa(),YB(b,1,a),a.Ca&&nN(a,void 0,a.g.Oa()));a.g.dispose();a.g=null;a.Ia={};a.dispatchEvent(new U("animationEnabled",!1))}}
function mja(a,b){var c=b.ma;if(b.X()){var d=a.hb[c];d&&rh(d);a.hb[c]=I(b,"propertychange",a.XG,a)}}function nja(a,b){b=b.ma;var c=a.hb[b];c&&(rh(c),a.hb[b]=void 0)}g.XG=function(a){a instanceof U&&"change:originalGeometry"===a.l&&(a=a.target)&&(a.g(a,!0),pN(this))};
function sN(a,b){if(b!==a.Ei){var c=a.Ei;if(c){for(var d=0,e=c.length;d<e;d++)c[d].set("_highlightStyle",null);lH(c,a)}if(a.Ei=b){var f=!1;0<b.length&&(f=(d=PB(b[0],a))?d.replaceStyle:!1);d=0;for(e=b.length;d<e;d++){var h=b[d].get("_customHighlightStyle");b[d].set("_highlightStyle",f?WG:h||WG)}lH(b,a)}a.dispatchEvent(new U("highlightedItems",b,c,a));a.ia()}}
g.wf=function(a){var b=a.getContext();if(b&&bv){b=q(b)?b:[b];for(var c=[],d=0,e=b.length;d<e;d++)if("spatial:removeFeature"==a.type){var f=b[d].feature;f&&this.Sc[f.ma]&&c.push(f)}else(f=b[d].geometry)&&(c=c.concat(Ria(this,f)));if(0<c.length)switch(a.type){case "select":tN(this,c);break;case "selectExclusive":uN(this,c);break;case "deselect":rN(this,c);break;case "spatial:removeFeature":case "spatial:removeFeatures":c&&this.dg(c)}}};g.Il=function(a){return this.Hb()?vL.C.Il.call(this,a):[]};
function Ria(a,b,c){var d=b.aa(),e=!1;if(!c)if(a.ra&&a.Md)c=a.fe(!1);else switch(c=a.Il(d),b.T()){case "LineString":e=b.getCoordinates();e=Gu(e,d);break;case "Polygon":e=b.getCoordinates(),e=1==e.length&&Gu(e[0],d)}var f=[];if((b=MD(LD.u(),b))&&0<c.length){var h=b.getCoordinates().length;if(100<h){var k=c.length;d=Math.max(gi(d),hi(d))*(1E5<k?.01:5E4<k?.005:1E4<k?.0025:0);0<d&&(E.za(a.log,"Simplifying geometry with "+h+" vertices and threshold "+d),b=jsts.simplify.DouglasPeuckerSimplifier.simplify(b,
d),E.za(a.log,"New geometry: "+b.getCoordinates().length+" vertices"))}h=[];if("MultiPolygon"==b.getGeometryType())for(k=b.getNumGeometries(),d=0;d<k;d++){var l=b.getGeometryN(d);l&&h.push(l)}else h.push(b);d=0;for(k=h.length;d<k;d++){l=h[d].getCoordinates();h[d].nVert=l.length;h[d].vertX=[];h[d].vertY=[];for(var m=0;m<h[d].nVert;m++)h[d].vertX.push(l[m].x),h[d].vertY.push(l[m].y)}d=0;for(k=c.length;d<k;d++)(h=c[d].X())&&vN(a,b,h,e)&&f.push(c[d])}return f}
function vN(a,b,c,d){var e=!1;switch(c.T()){case "GeometryCollection":if(d=c.g){c=0;for(var f=d.length;c<f;c++){var h=d[c];if(h&&vN(a,b,h,!1)){e=!0;break}}}break;case "MultiPoint":if(d=Qr(c))for(c=0,f=d.length;c<f;c++)if((h=d[c])&&vN(a,b,h,!1)){e=!0;break}break;case "MultiPolygon":if(d=Tr(c))for(c=0,f=d.length;c<f;c++)if((h=d[c])&&vN(a,b,h,!1)){e=!0;break}break;case "LineString":case "LinearRing":case "Polygon":case "Circle":case "MultiLineString":c=MD(LD.u(),c);e=null!=c&&(b.contains(c)||b.crosses(c)||
b.overlaps(c));break;case "Point":a=c.flatCoordinates[0];h=c.flatCoordinates[1];var k=[];if("MultiPolygon"==b.getGeometryType())for(f=b.getNumGeometries(),c=0;c<f;c++){var l=b.getGeometryN(c);l&&k.push(l)}else k.push(b);c=0;for(f=k.length;c<f;c++){if(!(b=d)){b=k[c].vertX;e=k[c].vertY;l=k[c].nVert;for(var m=!1,n=0,p=l-1;n<l;p=n++)e[n]>h!=e[p]>h&&a<(b[p]-b[n])*(h-e[n])/(e[p]-e[n])+b[n]&&(m=!m);b=m}if(b){e=!0;break}e=!1}}return e}g.zp=function(a){return("object"==typeof a?a.id:a)in this.gc};
g.Yt=function(a){this.Oa().forEach(a,void 0)};function uN(a,b){q(b)||(b=[b]);if(a.Wd!==b){var c=a.Wd.slice();a.Wd.length=0;for(var d=c.length;d--;)pja(a,c[d]);if(b&&0<b.length)for(d=b.length;d--;)a.select(b[d]);lH(c,a);lH(a.Wd,a);a.dispatchEvent(new U("selectedItemsChanged",a.Wd,c));a.ia()}}function tN(a,b){q(b)||(b=[b]);if(b&&0<b.length){for(var c=[],d=0,e=b.length;d<e;d++){var f=b[d];a.select(f)&&c.push(f)}0<c.length&&(lH(c,a),a.dispatchEvent(new U("selectedItemsAdded",c)),a.ia())}}
function rN(a,b,c){q(b)||(b=[b]);if(b&&0<b.length){for(var d=[],e=0,f=b.length;e<f;e++){var h=b[e];pja(a,h)&&d.push(h)}0<d.length&&(!0!==c&&lH(d,a),a.dispatchEvent(new U("selectedItemsRemoved",d)),a.ia())}}g.selectAll=function(){for(var a=[],b=this.fe(),c=0,d=b.length;c<d;c++)this.select(b[c])&&a.push(b[c]);0<a.length&&(lH(a,this),this.dispatchEvent(new U("selectedItemsAdded",a)),this.ia())};
function hN(a){var b=a.Wd.length;if(0<b){var c=a.Wd.slice();a.Wd.length=0;for(a.gc={};b--;)c[b].set("_selectStyle",null);lH(c,a);a.dispatchEvent(new U("selectedItemsRemoved",c));a.ia()}}g.select=function(a){if(a){var b=a.id;if(null!=b&&!this.gc[b]&&null!=a.ma&&this.Sc[a.ma]&&this.ka[a.ma])return Db(this.Wd,a,cC),this.gc[b]=!0,a.set("_selectStyle",VG),!0}return!1};
function pja(a,b){if(b){var c=b.id;if(null!=c&&a.gc[c]){var d=a.Wd,e=zb(d,cC||Bb,!1,b);0<=e&&rb(d,e);delete a.gc[c];b.set("_selectStyle",null);return!0}}return!1}function wN(a,b){q(b)||(b=[b]);a.On(b,!1)}g.Sk=function(a){q(a)||(a=[a]);this.On(a,!0)};function qja(a){var b=a.ka;return a.Oa().filter(function(a){return a&&!b[a.ma]})}function rja(a){return a.fe().filter(function(a){return a&&!this.zp(a)},a)}
g.On=function(a,b){for(var c=[],d=[],e=b,f=0,h=a.length;f<h;f++){var k=a[f],l=k.ma;null!=l&&b!=this.ka[l]&&(this.ka[l]=b,b?k.la._lastShowLabels&&(VB(k),k.la._lastShowLabels=void 0,e=!0):(UB(k)&&(e=k.la._lastShowLabels=!0),d.push(k)),c.push(k))}0<d.length&&rN(this,d);0<c.length&&(this.l&&(this.l.Iq("hidden",this.Fi.bind(this)),this.l.pk("hidden",!1),this.Ia={},pN(this)),e&&jN(this),this.dispatchEvent(new U("featureVisibility",c)))};
function jN(a){(a=mH(nH.u(),a.D()))&&a.labels&&a.showLabels&&GM()}function sja(a,b){var c=a.Fc;a.Fc=b;a.dispatchEvent(new U("uniqueId",b,c))}g.sa=function(a){a=a||{};a.shapeName=this.Dd;a.centerShapeName=this.Ff;a.timeEnabled=this.Md;a.altitudeMode=this.Nb;a.refreshInterval=this.Ea;this.Fc&&(a.uniqueId=this.Fc.sa());this.G&&(a.colorModel=this.G.sa());return a};
g.restore=function(a){a.shapeName&&jja(this,a.shapeName);a.centerShapeName&&(this.Ff=a.centerShapeName);void 0!=a.timeEnabled&&oN(this,a.timeEnabled);void 0!=a.altitudeMode&&kja(this,a.altitudeMode);a.refreshInterval&&this.Qe(a.refreshInterval);if(a.colorModel){var b=this.so();b.restore(a.colorModel);$L(this,b)}a.uniqueId&&(b=new FF,b.restore(a.uniqueId),sja(this,b));a.detectColumnTypes&&(this.cA=a.detectColumnTypes)};function xN(a){vL.call(this,a);this.log=tja;this.Zr=!0;this.o=this.B=null;this.Li=0;this.Cr=!1;C.H(CL,this.Nx,!1,this)}w(xN,vL);P(xN,"os.source.IImportSource");Nv["os.source.Request"]=xN;var tja=E.V("os.source.Request");g=xN.prototype;g.clear=function(){this.aj();this.B&&this.B.reset();xN.C.clear.call(this)};g.J=function(){xN.C.J.call(this);C.M(CL,this.Nx,!1,this);yN(this,null);this.Ph(null)};g.Nx=function(){this.aj()};g.aj=function(){this.mb()&&(this.Va(!1),this.o&&this.o.abort())};
function zN(a){if(a.o&&!a.N){5E4<a.Z?a.clear():a.qf=a.Oa().slice();a.aj();a.Li=Ha();a.Va(!0);try{a.o.load(!1),a.Cr&&a.Zg(!0)}catch(b){AN(a,"There was an error loading the request. Please see the log for more details.")}}}g.Zg=function(a){var b=this.N;xN.C.Zg.call(this,a);b&&!a&&this.refresh();this.Cr=!1};g.refresh=function(){this.N||(this.B&&this.B.reset(),this.o&&zN(this))};g.Uq=function(){return this.B};
g.Ph=function(a){a!==this.B&&(this.B&&(this.B.M("threadProgress",this.Nm,!1,this),this.B.M("complete",this.Mm,!1,this),this.B.reset()),this.B=a)&&(this.B.H("threadProgress",this.Nm,!1,this),this.B.H("complete",this.Mm,!1,this))};function yN(a,b){b!==a.o&&(a.o&&(a.o.M("success",a.wq,!1,a),a.o.M("error",a.Ew,!1,a),a.mb()&&a.Va(!1),a.o.dispose()),a.o=b,a.o&&(a.o.H("success",a.wq,!1,a),a.o.H("error",a.Ew,!1,a)))}
g.wq=function(a){var b="Request complete for "+this.S()+uja(this)+vja(this);E.info(this.log,b);a=a.target;b=a.g;bt(a);wja(this,b)};g.Ew=function(){AN(this,"There was an error loading the data source: "+this.o.s.join(" "))};function AN(a,b){At(zt.u(),b,rs);E.error(a.log,b,void 0);a.Va(!1)}function wja(a,b){a.B?(a.Va(!0),gD(a.B,b)):(b='No importer set on source "'+a.S()+'"!',AN(a,b))}g.Nm=function(){this.B&&this.Nc(this.B.getData())};
g.Mm=function(a){this.Nm(a);this.Va(!1);a="Import complete for "+this.S()+uja(this)+vja(this);E.info(this.log,a)};function vja(a){var b=Ha(),c=" in "+CC(new Date(b-a.Li));a.Li=b;return c}function uja(a){var b="";a.o&&a.o.j&&(b+=" ("+a.o.j.toString()+")");return b};function xja(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);255<e&&(b[c++]=e&255,e>>=8);b[c++]=e}return b};function yja(a){var b=0,c=a.length,d={a:-1640531527,b:-1640531527,c:314159265},e;for(e=c;12<=e;e-=12,b+=12)d.a+=BN(a,b),d.b+=BN(a,b+4),d.c+=BN(a,b+8),zja(d);d.c+=c;switch(e){case 11:d.c+=a[b+10]<<24;case 10:d.c+=(a[b+9]&255)<<16;case 9:d.c+=(a[b+8]&255)<<8;case 8:d.b+=BN(a,b+4);d.a+=BN(a,b);break;case 7:d.b+=(a[b+6]&255)<<16;case 6:d.b+=(a[b+5]&255)<<8;case 5:d.b+=a[b+4]&255;case 4:d.a+=BN(a,b);break;case 3:d.a+=(a[b+2]&255)<<16;case 2:d.a+=(a[b+1]&255)<<8;case 1:d.a+=a[b+0]&255}return zja(d)}
function zja(a){var b=a.a,c=a.b,d=a.c;b=b-c-d^d>>>13;c=c-d-b^b<<8;d-=b;d=d-c^c>>>13;b-=c;b-=d;b^=d>>>12;c=c-d-b^b<<16;d-=b;d=d-c^c>>>5;b-=c;b-=d;b^=d>>>3;c=c-d-b^b<<10;d-=b;d=d-c^c>>>15;a.a=b;a.b=c;return a.c=d}function BN(a,b){return CN(a[b+0])+(CN(a[b+1])<<8)+(CN(a[b+2])<<16)+(CN(a[b+3])<<24)}function CN(a){return 127<a?a-256:a};var uv=[255,255,255];
function DN(a,b,c,d){var e="";a=String(yja(xja(a)));if(b&&0<b.length){var f="string"===typeof d?yv(d):d;f=tv(f||uv);e+='<svg width="'+16*b.length+'px" height="16px" class="align-middle" xmlns="http://www.w3.org/2000/svg" filter="url(#filter_'+a+')">';e+=b.join("");EN=0;e=e.replace(/x="(\d+)"/g,Aja);e=e+('<filter id="filter_'+a+'">')+('<feColorMatrix id="matrix_'+a+'" values="'+f.join(" ")+'"/>');e+="</filter></svg>"}if(c&&0<c.length)for(b=xv(d),d=0,f=c.length;d<f;d++){var h=c[d].replace('class="','class="layer-icon-'+
a+" ");h=h.replace(">",' style="color:'+b+'">');e+=h}return e}var EN=0;function Aja(a,b){var c=16*EN;EN++;return a.replace(b,c.toString())}function Bja(a,b){"string"===typeof b&&(b=yv(b));var c=tv(b||uv);a=String(yja(xja(a)));angular.element("#matrix_"+a).attr("values",c.join(" "));b=xv(b||uv);angular.element("i.fa.layer-icon-"+a).css("color",b)};W.directive("multifeatureinfo",[function(){return{restrict:"E",replace:!0,scope:{features:"="},templateUrl:"v1542394219/views/feature/multifeatureinfo.html",controller:FN,controllerAs:"multiCtrl"}}]);
function FN(a,b){y.call(this);this.scope=a;this.element=b;this.g=new le(this.o,250,this);this.term=null;b=new FF("Time","recordTime");var c=new FF;c.id="_color";c.field="COLOR";c.internal=!0;c.focusable=!1;c.cssClass="color";c.formatter=Wga;c.resizable=!1;c.selectable=!1;c.sortable=!1;c.visible=!0;c.width=20;c.minWidth=20;c.maxWidth=20;this.columns=[c,b];this.options={dataItemColumnValueExtractor:this.l.bind(this),multiColumnSort:!0,multiSelect:!1,defaultFormatter:UF,enableAsyncPostRender:!0,forceFitColumns:!0};
this.getUi=this.j.bind(this);a.selected=null;a.features&&(a.features.sort(iga),a.selected=a.features[0],a.filteredFeatures=a.features.slice());a.$on("$destroy",this.dispose.bind(this))}w(FN,y);FN.$inject=["$scope","$element"];FN.prototype.J=function(){FN.C.J.call(this);Ma(this.g);this.scope=this.element=null};FN.prototype.j=function(){if(this.scope.selected){var a=LB(this.scope.selected);if(a&&a instanceof MK)return a.nb||"featureinfo"}return"featureinfo"};FN.prototype.search=function(){this.g.start()};
FN.prototype.search=FN.prototype.search;FN.prototype.o=function(){var a=[];a=this.term?this.scope.features.filter(function(a){for(var b in a.la){var d=a.la[b];if(d)try{var e=String(d);if("string"===typeof e&&Ub(e.toLowerCase(),this.term.toLowerCase()))return!0}catch(f){}}},this):this.scope.features.slice();this.scope.filteredFeatures=a;X(this.scope)};FN.prototype.l=function(a,b){return"_color"==b.id?((a=OB(a,this.source))&&(a=xv(a)),a||"#ffffff"):a.la[b.field||b]||"No time"};
function KI(a,b){a=q(a)?a:[a];FE({id:"featureInfo",label:b||"Feature Info",icon:"fa fa-map-marker",key:"featureinfo",x:"center",y:"center",width:600,"min-width":500,"max-width":0,height:350,"min-height":200,"max-height":0,"show-close":!0},'<multifeatureinfo features="features"></multifeatureinfo>',void 0,void 0,void 0,{features:a})};function GN(a,b,c){this.lb=!1;this.title="Change Style";this.Ba=null;this.state="ready";this.Na=a;this.oldValue=null!=c?c:this.j();this.value=b;this.qa=null}g=GN.prototype;g.Fa=function(){return Cja(this)?(this.state="executing",this.Hm(this.value),this.qa&&Q(R.u(),this.qa,1),this.state="success",!0):!1};g.Cb=function(){this.state="reverting";this.Hm(this.oldValue);this.state="ready";return!0};
function Cja(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.Na?void 0===a.value?(a.state="error",a.Ba="Value not provided",!1):!0:(a.state="error",a.Ba="Layer ID not provided.",!1)}g.finish=function(){};g.Sg=function(a){return a instanceof HN?a.Sa():a instanceof MK?mH(nH.u(),a.D()):null};g.Hm=function(a){var b=this.W();b=this.Sg(b);this.g(b,a);this.finish(b)};g.W=function(){return T.u().W(this.Na)};function IN(a,b,c){GN.call(this,a,b,c)}w(IN,GN);IN.prototype.Sg=function(a){return a?mH(nH.u(),a.D()):null};IN.prototype.g=function(){var a=NB.O(this.Na);lH(a.Oa());a.s.N&&pN(a)};IN.prototype.finish=function(){var a=T.u().W(this.Na);CH(a)};function JN(a,b,c){GN.call(this,a,b,c);this.title="Change Center Style";this.qa="layers.features.changeVectorCenterShape#"+(b?b.replace(/ /g,"_"):"Unknown")}w(JN,IN);JN.prototype.j=function(){var a,b=NB.O(this.Na);b&&(a=b.Ff);return a||"Point"};JN.prototype.g=function(a,b){var c=NB.O(this.Na);c&&b&&(c.Ff=b,"Icon"!=b||bH(a)||cH(a,xM()));JN.C.g.call(this,a,b)};JN.prototype.finish=function(a){NB.O(this.Na).dispatchEvent(new U("geometryCenterShape",this.value,this.oldValue));JN.C.finish.call(this,a)};function KN(a,b,c){GN.call(this,a,b,c);this.title="Change Color";this.qa="layers.features.changeVectorColor";!b&&(a=T.u().W(this.Na))&&(b=(b=a.Sa())&&b.baseColor||"rgba(255,255,255,1)");this.value=ZG(b)}w(KN,IN);KN.prototype.j=function(){var a=mH(nH.u(),this.Na);return a?QB(a):"rgba(255,255,255,1)"};KN.prototype.g=function(a,b){var c=ZG(b);aH(a,c);Bja(this.Na,c);KN.C.g.call(this,a,b)};
KN.prototype.finish=function(a){var b=NB.O(this.Na);b.dispatchEvent(new U("color",this.value));b instanceof vL&&$L(b,null);KN.C.finish.call(this,a)};function LN(a,b,c){GN.call(this,a,b,c);this.title="Change Icon";this.qa="layers.features.changeVectorIcon"}w(LN,IN);LN.prototype.j=function(){var a=mH(nH.u(),this.Na);return bH(a)||xM()};LN.prototype.g=function(a,b){b&&cH(a,b);LN.C.g.call(this,a,b)};LN.prototype.finish=function(a){var b=NB.O(this.Na);b&&b.dispatchEvent(new U("geometryShape"));LN.C.finish.call(this,a)};function MN(a,b,c){GN.call(this,a,b,c);this.title="Change Label";this.qa="layers.features.labelColumnSelect";this.value=b||[tH()]}w(MN,IN);MN.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.labels||[tH()]};MN.prototype.g=function(a,b){a.labels=b;MN.C.g.call(this,a,b)};MN.prototype.finish=function(a){NB.O(this.Na).dispatchEvent(new U("label",this.value));GM();MN.C.finish.call(this,a)};function NN(a,b,c){GN.call(this,a,b,c);this.title="Change Label Color";this.qa="layers.features.changeLabelColor";""!=b&&(this.value=ZG(b))}w(NN,IN);NN.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.labelColor||""};NN.prototype.g=function(a,b){a.labelColor=b;NN.C.g.call(this,a,b)};function ON(a,b,c){GN.call(this,a,b,c);this.title="Change Label Size";this.qa="layers.features.changeLabelSize"}w(ON,IN);ON.prototype.j=function(){var a=mH(nH.u(),this.Na);return a?a.labelSize:void 0};ON.prototype.g=function(a,b){a.labelSize=b;ON.C.g.call(this,a,b)};ON.prototype.finish=function(a){GM();ON.C.finish.call(this,a)};function PN(a,b){GN.call(this,a,b,void 0);this.title="Force Layer Color";this.qa="layers.features.forceLayerColor"}w(PN,IN);PN.prototype.j=function(){var a=mH(nH.u(),this.Na);return a?!!a.replaceStyle:!1};PN.prototype.g=function(a,b){a.replaceStyle=b;PN.C.g.call(this,a,b);a=NB.O(this.Na);sN(a,a.Ei)};PN.prototype.finish=function(a){NB.O(this.Na).dispatchEvent(new U("replaceStyle",this.value));PN.C.finish.call(this,a)};function QN(a,b,c){GN.call(this,a,b,c)}w(QN,IN);QN.prototype.g=function(a,b){var c=NB.O(this.Na);if(c){c=c.Oa();for(var d=0,e=c.length;d<e;d++)c[d].la.lineOfBearing=null,c[d].la.lineOfBearingErrorHigh=null,c[d].la.lineOfBearingErrorLow=null,c[d].la.ellipse=null}QN.C.g.call(this,a,b)};QN.prototype.finish=function(a){var b=NB.O(this.Na);b&&b.dispatchEvent(new U("geometryShape",b.Dd));QN.C.finish.call(this,a)};function RN(a,b,c){GN.call(this,a,b,c);this.title="Change icon rotation column";this.value=b||"";this.qa="layers.features.changeVectorRotationColumn"}w(RN,QN);RN.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.rotationColumn||""};RN.prototype.g=function(a,b){a.rotationColumn=b;RN.C.g.call(this,a,b)};function SN(a,b,c){GN.call(this,a,b,c);this.title="Change Style";this.qa="layers.features.changeVectorShape#"+(b?b.replace(/ /g,"_"):"Unknown")}w(SN,IN);SN.prototype.j=function(){var a,b=NB.O(this.Na);b&&(a=b.Dd);return a||SB};SN.prototype.g=function(a,b){var c=NB.O(this.Na);c&&b&&(jja(c,b),"Icon"!=b||bH(a)||cH(a,xM()));SN.C.g.call(this,a,b)};SN.prototype.finish=function(a){NB.O(this.Na).dispatchEvent(new U("geometryShape",this.value,this.oldValue));SN.C.finish.call(this,a)};function TN(a,b,c){GN.call(this,a,b,c);this.qa="layers.features.changeLabelToggle";this.value=b||!1;this.title=b?"Show Labels":"Hide Labels"}w(TN,IN);TN.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.showLabels||!1};TN.prototype.g=function(a,b){a.showLabels=b;if(!b){var c=NB.O(this.Na),d=[];c.Yt(function(a){UB(a)&&d.push(a)});0<d.length&&(lH(d),c.dispatchEvent(new U("style",d)))}TN.C.g.call(this,a,b)};TN.prototype.finish=function(a){GM();TN.C.finish.call(this,a)};function UN(a,b,c){GN.call(this,a,b,c);this.qa="layers.features.changeVectorShowRotation";this.value=!!b;this.title=b?"Enable Icon Rotation":"Disable Icon Rotation"}w(UN,QN);UN.prototype.j=function(){var a=mH(nH.u(),this.Na);return null!=a&&a.showRotation||!1};UN.prototype.g=function(a,b){a.showRotation=b;UN.C.g.call(this,a,b)};function VN(a,b,c){GN.call(this,a,b,c);this.title="Change Size";this.qa="layers.features.changeVectorSize"}w(VN,IN);VN.prototype.j=function(){var a=mH(nH.u(),this.Na);return fH(a)};VN.prototype.g=function(a,b){gH(a,b);VN.C.g.call(this,a,b)};function WN(a,b,c){GN.call(this,a,b,c);this.title="Change Unique ID";this.qa="layers.features.labelColumnSelect";this.value=b}w(WN,IN);WN.prototype.j=function(){return this.W().O().Fc};WN.prototype.Hm=function(a){var b=this.W();b=this.Sg(b);this.g(b,a);this.finish(b)};WN.prototype.g=function(a,b){sja(this.W().O(),b)};function XN(){FD.call(this);this.add({id:"google_icons",name:"Google Icons",html:'<iconpalette accept-callback="acceptCallback" selected="selected" icon-set="iconSet" icon-src="iconSrc"></iconpalette>'})}w(XN,FD);wa(XN);W.directive("iconpalette",[function(){return{restrict:"E",scope:{selected:"=",acceptCallback:"=",iconSet:"=",iconSrc:"=?"},replace:!0,templateUrl:"v1542394219/views/icon/iconpalette.html",controller:YN,controllerAs:"palette"}}]);function YN(a){this.v=a;var b=this.v.iconSet?this.v.iconSet:[];if(this.v.selected&&b){var c=this.v.selected;if(c&&c.path)for(var d=0;d<b.length;d++)if(b[d].path==c.path){this.pick(b[d].path);break}}a.$on("$destroy",this.g.bind(this))}YN.$inject=["$scope"];
YN.prototype.g=function(){this.v=null};YN.prototype.kD=function(a){return this.v&&this.v.iconSrc?this.v.iconSrc(a):a};YN.prototype.getIconSrc=YN.prototype.kD;YN.prototype.pick=function(a){this.v.selected.path=a;X(this.scope)};YN.prototype.pick=YN.prototype.pick;var ZN={},$N=new A;function aO(a,b,c){a in ZN||(ZN[a]=[]);ZN[a].push({kv:b,priority:c||0});ZN[a].sort(Dja);$N.dispatchEvent(new U(a))}function Dja(a,b){return a.priority-b.priority}function Eja(a){var b=null,c=ZN["js-nav-icon__selectors"];c&&(b=ib(c,function(b){return b.kv==a}));return!!b}W.directive("list",[function(){return{restrict:"A",controller:bO,link:Fja}}]);function Fja(a,b,c,d){b=c.listId;d.id=b;if(a=ZN[b]||a.$eval(c.listItems))d.items=a;d.j=c.listPrefix;d.l=c.listSuffix;Gja(d)}
function bO(a,b,c){this.scope=a;this.K=b;this.g=c;this.id=null;this.items=[];this.l=this.j="";$N.H("propertychange",this.dd,!1,this);a.$on("$destroy",this.o.bind(this))}bO.$inject=["$scope","$element","$compile"];bO.prototype.o=function(){$N.M("propertychange",this.dd,!1,this);this.g=this.K=this.scope=null;this.items.forEach(function(a){a.element=void 0})};bO.prototype.dd=function(a){var b=a.s,c=a.o;a.l===this.id&&(b&&!c?(yg(b.element[0]),this.scope.$emit("list:change")):Gja(this))};
function Gja(a){var b=ZN[a.id||""]||a.items,c=a.j||"",d=a.l||"";if(b){for(var e=0,f=b.length;e<f;e++){var h=b[e];if(!h.element){var k=h.kv;-1===k.indexOf("<")&&(k="<"+k+"></"+k+">");k=c+k+d;if(a.scope){var l=a.scope.$new();h.element=a.g(k)(l);h.scope=l}}h.element&&a.K.append(h.element)}a.scope.$emit("list:change")}};W.directive("iconselector",[function(){return{restrict:"E",scope:{selected:"=",acceptCallback:"=",iconSet:"=",iconSrc:"=?"},replace:!0,templateUrl:"v1542394219/views/icon/iconselector.html",controller:cO,controllerAs:"selector"}}]);
function cO(a,b){this.v=a;this.K=b;this.v.tabs=HD(XN.u());this.v.showtabs=1===this.v.tabs.length?!1:!0;this.v.activeTab=0<this.v.tabs.length?this.v.tabs[0].name:"";for(b=0;b<this.v.tabs.length;b++){var c='<div class="d-flex flex-fill" ng-if="activeTab == \''+this.v.tabs[b].name+"'\">"+this.v.tabs[b].html+"</div>";Eja(c)||aO("js-nav-icon__selectors",c,201)}this.v.$emit("window.ready");a.$on("$destroy",this.g.bind(this))}w(cO,A);cO.$inject=["$scope","$element"];
cO.prototype.g=function(){this.K=this.v=null};cO.prototype.isValid=function(){return this.v.selected&&!!this.v.selected.path};cO.prototype.isValid=cO.prototype.isValid;cO.prototype.cancel=function(){KE(this.K)};cO.prototype.cancel=cO.prototype.cancel;cO.prototype.GF=function(){this.v.acceptCallback&&this.v.acceptCallback(this.v.selected);KE(this.K)};cO.prototype.okay=cO.prototype.GF;cO.prototype.ns=function(a){this.v.activeTab=a};cO.prototype.setTab=cO.prototype.ns;
cO.prototype.He=function(a){return wM.test(a)?yM(a):a};cO.prototype.getPath=cO.prototype.He;W.directive("iconpicker",[function(){return{restrict:"AE",replace:!0,scope:{disabled:"=",ngModel:"=",iconSet:"=",iconSrc:"=?"},templateUrl:"v1542394219/views/icon/iconpicker.html",controller:dO,controllerAs:"iconPicker"}}]);function dO(a){this.scope=a;this.disabled=this.scope.disabled||!this.scope.iconSet}dO.$inject=["$scope"];dO.prototype.g=function(a){this.scope&&(this.scope.ngModel=a,this.scope.$emit("icon:change",a))};
dO.prototype.show=function(){var a={acceptCallback:this.g.bind(this),icon:Gs(this.scope.ngModel),iconSet:this.scope.iconSet,iconSrc:this.scope.iconSrc};IE("iconselector")?HE("iconselector"):FE({id:"iconselector",label:"Choose an Icon",icon:"fa fa-flag",x:"center",y:"center",width:"600","min-width":"400","max-width":"1200",height:"600","min-height":"400","max-height":"1200","show-close":"true",modal:"true"},'<iconselector class="d-flex flex-fill" accept-callback="acceptCallback" selected="icon" icon-set="iconSet" icon-src="iconSrc"> </iconselector>',
void 0,void 0,void 0,a)};dO.prototype.He=function(a){return wM.test(a)?yM(a):a};dO.prototype.getPath=dO.prototype.He;var Hja=[{label:"-- None --",interval:0},{label:"15 seconds",interval:15},{label:"30 seconds",interval:30},{label:"1 minute",interval:60},{label:"5 minutes",interval:300},{label:"10 minutes",interval:600},{label:"15 minutes",interval:900},{label:"30 minutes",interval:1800},{label:"1 hour",interval:3600},{label:"2 hours",interval:7200},{label:"3 hours",interval:10800},{label:"6 hours",interval:21600},{label:"12 hours",interval:43200},{label:"1 day",interval:86400}];
function Ija(a){return(a=mH(nH.u(),a.D()))&&a.labels||[tH()]}function Jja(a){return(a=mH(nH.u(),a.D()))&&a.showLabels||!1}function Kja(a){return(a=mH(nH.u(),a.D()))&&a.labelColor||QB(a)}function Lja(a){return(a=mH(nH.u(),a.D()))&&a.labelSize||!1}function eO(a){return(a=a.O())&&Ov(a,"os.source.Vector")?Mja(a):null}function Mja(a){a=a.getColumns().slice();a.sort(YF);return a}function Nja(a){return a.B}function Oja(a){a=a.Qb();return Aa(a)?a:null}function Pja(a){return fO(a)}
function Qja(a){var b=null;(a=a.O())&&Ov(a,"os.source.Vector")&&(b=a.Fc);return b};function gO(a,b){this.lb=!1;this.title="Change Layer Auto Refresh";this.Ba=null;this.state="ready";this.Na=a;this.g=0;this.interval=b}gO.prototype.O=function(){var a=T.u().W(this.Na);if(!a)return this.state="error",this.Ba='Unable to locate layer with id "'+this.Na+'".',null;a=a.O();return(a instanceof vL||a instanceof EA)&&a.Fg()?a:(this.state="error",this.Ba='Source for layer with id "'+this.Na+'" does not support refresh.',null)};
gO.prototype.Fa=function(){this.state="executing";var a=this.O();return a?(this.g=a.xg(),a.Qe(this.interval),Q(R.u(),"layers.features.changeVectorAutoRefresh",1),this.state="success",!0):!1};gO.prototype.Cb=function(){this.state="reverting";var a=this.O();return a?(a.Qe(this.g),this.state="ready",!0):!1};function hO(a,b,c,d){GN.call(this,a,c,d);this.callback=b}w(hO,GN);hO.prototype.j=function(){var a=T.u().W(this.Na);return P(a,"os.layer.ILayer")?a.Xb():null};hO.prototype.g=function(a,b){a=T.u().W(this.Na);P(a,"os.layer.ILayer")&&this.callback(a,b)};hO.prototype.finish=function(){var a=T.u().W(this.Na);a instanceof MK&&CH(a)};hO.prototype.Hm=function(a){var b=T.u().W(this.Na);b=this.Sg(b)||{};this.g(b,a);this.finish(b)};function iO(){A.call(this)}w(iO,nF);g=iO.prototype;g.Gq=0;g.ii="executed";g.Fa=function(){this.ii="executed";return Rja(this)};g.Cb=function(){this.ii="reverted";return Rja(this)};function Rja(a){var b;a.Gq=0;var c=a.Xe;var d=0;for(b=c.length;d<b;d++){c[d].lb&&c[d].Ra(a.ii,a.Yw,!1,a);var e=!1;try{e="executed"==a.ii?c[d].Fa():c[d].Cb()}catch(f){}if(!e)return a.state="error",a.dispatchEvent(new z("executed")),!1;c[d].lb||a.Yw(null)}a.state="executed"===a.ii?"success":"ready";return!0}
g.Yw=function(){this.Gq++;this.Gq==this.Xe.length&&this.dispatchEvent(new z(this.ii))};function jO(a,b){y.call(this);this.scope=a;this.element=b;this.g=new le(this.IH,25,this);this.j=[DH];this.l=[];this.is3DEnabled=T.u().Qa();T.u().H("propertychange",this.ky,!1,this);a.$watch("items",this.OH.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(jO,y);jO.$inject=["$scope","$element"];g=jO.prototype;g.J=function(){jO.C.J.call(this);this.l.forEach(rh);this.l.length=0;T.u().M("propertychange",this.ky,!1,this);Ma(this.g);this.element=this.scope=this.g=null};
g.getValue=function(a,b){b=void 0!==b?b:1;for(var c=kO(this),d=0,e=c.length;d<e;d++)try{var f=c[d].W();if(f){var h=a(f);return void 0!==h?h:b}}catch(k){}return 1};g.xb=function(a){for(var b=[],c=kO(this),d=0,e=c.length;d<e;d++)try{var f=c[d].W();if(f){var h=a(f);h&&b.push(h)}}catch(k){}h=null;1<b.length?(h=new iO,h.Zb(b),h.title=b[0].title+" ("+b.length+" layers)"):0<b.length&&(h=b[0]);h&&gF(hF.u(),h)};
function kO(a){var b=[];a=a.scope.items||[];a=a.filter(Sja);for(var c=0;c<a.length;c++){var d=a[c];d.W()instanceof PK?(d=d.na())&&(b=b.concat(d)):b.push(d)}return b}g.md=function(){Hc(Fa(X,this.scope))};g.IH=function(){this.Xa()||this.md()};g.OH=function(a){if(!this.Xa()&&(this.l.forEach(rh),this.l.length=0,this.md(),a)){a=a.filter(Sja);for(var b=0,c=a.length;b<c;b++){var d=a[b].W();d&&this.l.push(I(d,"propertychange",this.TH,this))}}};
g.TH=function(a){this.Xa()||(a instanceof Jh&&null!=this.scope[a.key]?!this.Xa()&&this.g&&this.g.start():a instanceof U&&(a=a.l)&&-1!=this.j.indexOf(a)&&!this.Xa()&&this.g&&this.g.start())};g.ky=function(a){"map:change:view3d"==a.l&&(this.is3DEnabled=T.u().Qa(),X(this.scope))};function Sja(a){return a instanceof HA};W.directive("defaultlayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/layer/default.html",controller:lO,controllerAs:"defaultCtrl"}}]);
function lO(a,b,c){jO.call(this,a,b);this.j.push("refreshInterval");this.refresh=null;this.refreshOptions=Hja;this.showBasicColor=this.showHue=this.showColorReset=this.showColorPicker=this.showRefresh=!1;this.defaults={brightness:0,contrast:1,hue:0,opacity:1,saturation:1};this.o="colorControl:none";this.s={};for(var d in mO)b=mO[d],a.$on(d+".slide",this.HK.bind(this,b)),a.$on(d+".slidestart",this.SI.bind(this)),a.$on(d+".slidestop",this.Iw.bind(this,b,d));this.md();nO(this);c(t(function(){if(this.element){var a=
O.get("layercontrols","");a&&(a=this.element.find(a))&&$(a).collapse("show")}},this))}w(lO,jO);lO.$inject=["$scope","$element","$timeout"];var mO={opacity:function(a,b){a.rd(b)},brightness:function(a,b){a.ij(b)},contrast:function(a,b){a.jj(b)},hue:function(a,b){a.ls(b)},saturation:function(a,b){a.mj(b)}};g=lO.prototype;
g.md=function(){lO.C.md.call(this);if(!this.Xa()){this.scope.brightness=this.getValue(qw,0);this.scope.contrast=this.getValue(rw);this.scope.hue=this.getValue(Xea,0);this.scope.opacity=this.getValue(sw);this.scope.saturation=this.getValue(tw);Tja(this);this.showHue=this.showBasicColor=this.showColorReset=this.showColorPicker=!1;var a=kO(this);if(a&&0<a.length)try{for(var b,c=0,d=a.length;c<d;c++){var e=a[c].W();if(null==b){if(b=Uja(this,e),"colorControl:none"==b)break}else if(Uja(this,e)!==b){b="colorControl:none";
break}}switch(b){case "colorControl:pickerReset":this.showBasicColor=this.showColorReset=this.showColorPicker=!0;break;case "colorControl:picker":this.showColorPicker=!0;this.showColorReset=this.showBasicColor=!1;break;case "colorControl:basic":this.showBasicColor=!0;this.showColorReset=this.showColorPicker=!1;break;default:this.showColorReset=this.showColorPicker=this.showBasicColor=!1}}catch(f){}}};
function Tja(a){a.showRefresh=!1;a.refresh=null;var b=kO(a);if(b&&0<b.length){var c;a.showRefresh=hb(b,function(a){a=a.W();return a instanceof sl&&(a=a.O(),a instanceof vL||a instanceof EA&&a.Fg())?(null==c&&(c=a.xg()),!0):!1});null!=c&&(a.refresh=ib(a.refreshOptions,function(a){return a.interval==c}))}}function Uja(a,b){return b&&(b=b.Sa())&&b.colorControl?b.colorControl:a.o}
function nO(a){for(var b=kO(a),c=0,d=b.length;c<d;c++)try{var e=b[c].W();if(e){var f=e.D(),h={},k=sw(e);h.opacity=null!=k?k:0;var l=qw(e);h.brightness=null!=l?l:0;var m=rw(e);h.contrast=null!=m?m:0;var n=tw(e);h.saturation=null!=n?n:0;a.s[f]=h}}catch(p){}}g.HK=function(a,b,c){b=kO(this);for(var d=0,e=b.length;d<e;d++)a(b[d].W(),c)};g.SI=function(){nO(this)};
g.Iw=function(a,b,c,d){this.xb(function(c){var e=this.s[c.D()],h=1;e&&void 0!==e[b]&&(h=e[b]);if(c=h!==d?new hO(c.D(),a,d,h):null)c.title="Change "+b;return c}.bind(this));nO(this)};g.xI=function(){var a=kO(this);if(a&&0<a.length){var b=(a=this.refresh)?a.interval:0;this.xb(function(a){return new gO(a.D(),b)})}};lO.prototype.onRefreshChange=lO.prototype.xI;lO.prototype.reset=function(a){var b=this.defaults[a];null!=b&&this.Iw(mO[a],a,null,b)};lO.prototype.reset=lO.prototype.reset;
lO.prototype.QM=function(a){O.set("layercontrols",a)};lO.prototype.setOpenSection=lO.prototype.QM;function oO(a,b,c){GN.call(this,a,b,c);this.qa="layers.features.changeVectorEllipsoid";this.value=!!b;this.title=b?"Enable Ellipsoids":"Disable Ellipsoids"}w(oO,IN);oO.prototype.j=function(){var a=mH(nH.u(),this.Na);return null!=a&&a.showEllipsoids||!1};oO.prototype.g=function(a,b){a.showEllipsoids=b;oO.C.g.call(this,a,b)};oO.prototype.finish=function(a){var b=NB.O(this.Na);b&&b.dispatchEvent(new U("geometryShape",b.Dd));oO.C.finish.call(this,a)};function pO(a,b,c){GN.call(this,a,b,c);this.qa="layers.features.changeVectorGroundReference";this.value=!!b;this.title=b?"Enable Ground Reference":"Disable Ground Reference"}w(pO,QN);pO.prototype.j=function(){var a=mH(nH.u(),this.Na);return null!=a&&a.showGroundRef||!1};pO.prototype.g=function(a,b){a.showGroundRef=b;pO.C.g.call(this,a,b)};W.directive("ellipseoptions",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/layer/ellipseoptions.html",controller:qO,controllerAs:"ctrl"}}]);function qO(a,b){jO.call(this,a,b);this.showGroundReference=this.showEllipsoids=!1}w(qO,jO);qO.$inject=["$scope","$element"];qO.prototype.J=function(){qO.C.J.call(this);this.element=this.scope=null};
qO.prototype.md=function(){qO.C.md.call(this);if(!this.Xa()){var a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=!!a.showEllipsoids;break a}a=!1}this.showEllipsoids=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=!!a.showGroundRef;break a}a=!1}this.showGroundReference=a}};qO.prototype.OI=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showEllipsoids;this.xb(function(a){return new oO(a.D(),b)})}};qO.prototype.onShowEllipsoidsChange=qO.prototype.OI;
qO.prototype.RI=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showGroundReference;this.xb(function(a){return new pO(a.D(),b)})}};qO.prototype.onShowGroundReferenceChange=qO.prototype.RI;W.directive("iconstylecontrols",[function(){return{restrict:"E",replace:!0,scope:{columns:"=",showRotation:"=?",rotationColumn:"=?"},templateUrl:"v1542394219/views/layer/iconstylecontrols.html",controller:rO,controllerAs:"ctrl"}}]);function rO(a){y.call(this);this.scope=a;null==this.scope.showRotation&&(this.scope.showRotation=!0);null==this.scope.rotationColumn&&(this.scope.rotationColumn="");a.$on("$destroy",t(this.dispose,this))}w(rO,y);rO.$inject=["$scope"];
rO.prototype.J=function(){this.scope=null};rO.prototype.yN=function(){this.scope&&this.scope.$emit(sO,this.scope.showRotation)};rO.prototype.toggleShowRotation=rO.prototype.yN;rO.prototype.xq=function(){this.scope&&this.scope.$emit(tO,this.scope.rotationColumn)};rO.prototype.onRotationColumnChange=rO.prototype.xq;W.directive("labelcontrols",[function(){return{restrict:"E",replace:!0,scope:{labels:"=",columns:"=",labelColor:"=",labelSize:"=",showLabels:"=?",required:"=?",alwaysShowLabels:"@"},templateUrl:"v1542394219/views/layer/labelcontrols.html",controller:uO,controllerAs:"labelCtrl"}}]);
function uO(a,b,c){y.call(this);this.scope=a;this.element=b;this.g=-1;this.maxSize=24;this.minSize=8;this.labelLimit=O.get(["maxLabels"],5);this.element.find(".js-label-container").sortable({items:"tr",handle:".js-handle",axis:"y",containment:"parent",snap:!0,tolerance:"pointer",start:this.o.bind(this),stop:this.l.bind(this)});c(this.j.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(uO,y);uO.$inject=["$scope","$element","$timeout"];
uO.prototype.J=function(){uO.C.J.call(this);this.element=this.scope=null};uO.prototype.Qi=function(){if(this.scope){if(this.scope&&this.scope.labels){for(var a=this.scope.labels,b=a.length;b--;)null==a[b].column&&a.push(a.splice(b,1)[0]);X(this.scope)}this.j();this.scope.$emit("labelcontrols:columnChange")}};uO.prototype.onColumnChange=uO.prototype.Qi;uO.prototype.zq=function(){this.scope&&this.scope.$emit("labelcontrols:showLabelsChange",this.scope.showLabels)};uO.prototype.onShowLabelsChange=uO.prototype.zq;
uO.prototype.Zn=function(){this.scope.labels.push(tH());this.Qi();Q(R.u(),"layers.features.labelColumnAdd",1)};uO.prototype.addLabel=uO.prototype.Zn;uO.prototype.wM=function(a){qb(this.scope.labels,a);this.Qi();Q(R.u(),"layers.features.labelColumnRemove",1)};uO.prototype.removeLabel=uO.prototype.wM;
uO.prototype.j=function(){if(this.scope&&this.scope.labels){var a=this.scope.labelForm;a&&(this.scope.required?a.$setValidity("columnRequired",this.scope.labels.some(function(a){return!!a.column})):a.$setValidity("columnRequired",!0));X(this.scope)}};
uO.prototype.o=function(a,b){(a=this.element.find(".c-labelcontainer").sortable("instance"))&&a.containment&&(a.containment[3]+=3);b.helper&&b.placeholder&&b.placeholder.height(b.helper.height());b.item&&(b.item.find(".handle").addClass("moving"),this.g=b.item.index())};uO.prototype.l=function(a,b){b.item&&(b.item.find(".handle").removeClass("moving"),a=b.item.index(),this.g!=a&&(Hb(this.scope.labels,this.g,a),X(this.scope),this.Qi()))};function vO(a,b,c){GN.call(this,a,b,c);this.title="Change Line of Bearing arrow size";this.value=b;this.qa="layers.features.changeVectorArrowSize"}w(vO,QN);vO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a?a.arrowSize:100};vO.prototype.g=function(a,b){a.arrowSize=b;vO.C.g.call(this,a,b)};function wO(a,b,c){GN.call(this,a,b,c);this.title="Change arrow units";this.value=b||"m";this.qa="layers.features.changeVectorArrowUnits"}w(wO,QN);wO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.arrowUnits||"m"};wO.prototype.g=function(a,b){a.arrowUnits=b;wO.C.g.call(this,a,b)};function xO(a,b,c){GN.call(this,a,b,c);this.title="Change bearing column";this.value=b||"";this.qa="layers.features.changeVectorLineOfBearingBearingColumn"}w(xO,QN);xO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.lobBearingColumn||""};xO.prototype.g=function(a,b){a.lobBearingColumn=b;xO.C.g.call(this,a,b)};function yO(a,b,c){GN.call(this,a,b,c);this.title="Change Line of Bearing error multiplier";this.value=b;this.qa="layers.features.changeVectorLineOfBearingBearingError"}w(yO,QN);yO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a?a.lobBearingError:1};yO.prototype.g=function(a,b){a.lobBearingError=b;yO.C.g.call(this,a,b)};function zO(a,b,c){GN.call(this,a,b,c);this.title="Change bearing error column";this.value=b||"";this.qa="layers.features.changeVectorLineOfBearingBearingErrorColumn"}w(zO,QN);zO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.lobBearingErrorColumn||""};zO.prototype.g=function(a,b){a.lobBearingErrorColumn=b;zO.C.g.call(this,a,b)};function AO(a,b,c){GN.call(this,a,b,c);this.title="Change Line of Bearing column length";this.value=b;this.qa="layers.features.changeVectorLineOfBearingColumnLength"}w(AO,QN);AO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a?a.lobColumnLength:1E3};AO.prototype.g=function(a,b){a.lobColumnLength=b;AO.C.g.call(this,a,b)};function BO(a,b,c){GN.call(this,a,b,c);this.title="Change Line of Bearing bearing error column";this.value=b||"";this.qa="layers.features.changeVectorLineOfBearingLengthErrorColumn"}w(BO,QN);BO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.lobLengthErrorColumn||""};BO.prototype.g=function(a,b){a.lobLengthErrorColumn=b;BO.C.g.call(this,a,b)};function CO(a,b,c){GN.call(this,a,b,c);this.title="Change Line of Bearing length";this.value=b;this.qa="layers.features.changeVectorLineOfBearingLength"}w(CO,QN);CO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a?a.lobLength:1E3};CO.prototype.g=function(a,b){a.lobLength=b;CO.C.g.call(this,a,b)};function DO(a,b,c){GN.call(this,a,b,c);this.title="Change Line of Bearing length error column multiplier";this.value=b;this.qa="layers.features.changeVectorLineOfBearingLengthError"}w(DO,QN);DO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a?a.lobLengthError:1};DO.prototype.g=function(a,b){a.lobLengthError=b;DO.C.g.call(this,a,b)};function EO(a,b,c){GN.call(this,a,b,c);this.title="Change length error units";this.value=b||"m";this.qa="layers.features.changeVectorLineOfBearingLengthErrorUnits"}w(EO,QN);EO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.lobLengthErrorUnits||"m"};EO.prototype.g=function(a,b){a.lobLengthErrorUnits=b;EO.C.g.call(this,a,b)};function FO(a,b,c){GN.call(this,a,b,c);this.title="Change length units";this.value=b||"m";this.qa="layers.features.changeVectorLineOfBearingLengthUnits"}w(FO,QN);FO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.lobLengthUnits||"m"};FO.prototype.g=function(a,b){a.lobLengthUnits=b;FO.C.g.call(this,a,b)};function GO(a,b,c){GN.call(this,a,b,c);this.title="Change Line of Bearing length column";this.value=b||"";this.qa="layers.features.changeVectorLineOfBearingLengthColumn"}w(GO,QN);GO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.lobLengthColumn||""};GO.prototype.g=function(a,b){a.lobLengthColumn=b;GO.C.g.call(this,a,b)};function HO(a,b,c){GN.call(this,a,b,c);this.title="Change Line of Bearing length type (manual or column)";this.value=b||"manual";this.qa="layers.features.changeVectorLineOfBearingLengthType"}w(HO,QN);HO.prototype.j=function(){var a=mH(nH.u(),this.Na);return a&&a.lobLengthType||"manual"};HO.prototype.g=function(a,b){a.lobLengthType=b;HO.C.g.call(this,a,b)};function IO(a,b,c){GN.call(this,a,b,c);this.qa="layers.features.changeVectorShowArrow";this.value=!!b;this.title=b?"Enable Arrow":"Disable Arrow"}w(IO,QN);IO.prototype.j=function(){var a=mH(nH.u(),this.Na);return null!=a&&a.showArrow||!1};IO.prototype.g=function(a,b){a.showArrow=b;IO.C.g.call(this,a,b)};function JO(a,b,c){GN.call(this,a,b,c);this.qa="layers.features.changeVectorShowEllipse";this.value=!!b;this.title=b?"Enable Show Ellipse":"Disable Show Ellipse"}w(JO,QN);JO.prototype.j=function(){var a=mH(nH.u(),this.Na);return null!=a&&a.showEllipse||!1};JO.prototype.g=function(a,b){a.showEllipse=b;JO.C.g.call(this,a,b)};function KO(a,b,c){GN.call(this,a,b,c);this.qa="layers.features.changeVectorShowError";this.value=!!b;this.title=b?"Enable Show Error":"Disable Show Error"}w(KO,QN);KO.prototype.j=function(){var a=mH(nH.u(),this.Na);return null!=a&&a.showError||!1};KO.prototype.g=function(a,b){a.showError=b;KO.C.g.call(this,a,b)};W.directive("slider",[function(){return{restrict:"AE",replace:!0,scope:{live:"&",min:"=",max:"=",name:"@",value:"=",step:"=",disabled:"=?"},template:'<div class="slider-container"></div>',controller:LO}}]);
function LO(a,b){var c={min:a.min,max:a.max,value:a.value,disabled:void 0!==a.disabled?a.disabled:!1};void 0!==a.step&&(c.step=a.step);var d=!0;void 0!==a.live&&void 0!==a.live()&&(d=a.live());d?(d=this.j.bind(this),c.slide=this.g.bind(this),c.start=d,c.stop=d):c.stop=this.g.bind(this);a.$on("$destroy",this.o.bind(this));this.v=a;this.K=b;this.K.slider(c);b=this.l.bind(this);a.$watch("disabled",b);a.$watch("value",b);a.$watch("min",b);a.$watch("max",b);a.$watch("step",b)}LO.$inject=["$scope","$element"];
LO.prototype.o=function(){this.K=this.v=null};LO.prototype.l=function(a,b){if(a!==b){a=["min","max","step","value","disabled"];b=0;for(var c=a.length;b<c;b++){var d=a[b];d in this.v&&this.K.slider("option",d,this.v[d])}}};LO.prototype.g=function(a,b){if("values"in b){var c=b.values;b=c[0];c=c[1];b=[Math.min(b,c),Math.max(b,c)]}else b=[b.value];b&&(b=1===b.length?b[0]:b,this.v.value=b,this.v.$emit(this.v.name+"."+a.type,b),X(this.v))};
LO.prototype.j=function(a){this.v.$emit(this.v.name+"."+a.type,this.v.value)};W.directive("loboptions",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/layer/loboptions.html",controller:MO,controllerAs:"ctrl"}}]);
function MO(a,b){jO.call(this,a,b);this.showEllipse=this.showError=this.showArrow=!1;this.lengthType="manual";this.bearingErrorColumn=this.bearingColumn=this.lengthErrorColumn=this.lengthColumn="";this.lengthErrorUnits=this.arrowUnits=this.lengthUnits="m";this.units=[];this.scope.maxSize={};this.scope.maxSliderSize={};for(var c in pB)this.units.push(pB[c]),this.scope.maxSize[pB[c]]=tB(19E6,pB[c],"m"),this.scope.maxSliderSize[pB[c]]=tB(1E3,pB[c],"nmi");this.scope.columnLength=1E3;this.scope.length=
1E3;this.scope.size=100;this.scope.lengthErrorMultiplier=1;this.scope.bearingErrorMultiplier=1;this.s=new le(this.G,1E3,this);this.A=new le(this.I,1E3,this);this.o=new le(this.B,1E3,this);this.N=new le(this.L,1E3,this);this.helpText='<div><p>Line of Bearing Error allows you to show a +/- error range on the line length and orientation with arcs. Absence of bearing error shows lines instead of arcs. Absence of length error shows a single arc. Note that the bearing error is not accurate for line lengths greater than 10,000km!</p><img class="c-loboptions-popover__image" src="v1542394219//images/loberror.png"></img></div>';
a.$on("length.slidestop",this.qw.bind(this))}w(MO,jO);MO.$inject=["$scope","$element"];
MO.prototype.md=function(){MO.C.md.call(this);if(!this.Xa()){this.columns=this.getValue(eO);var a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=!!a.showArrow;break a}a=!1}this.showArrow=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=!!a.showError;break a}a=!1}this.showError=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=!!a.showEllipse;break a}a=!1}this.showEllipse=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=
a.lobLengthType;break a}a="manual"}this.lengthType=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=a.lobLengthColumn;break a}a=""}this.lengthColumn=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=a.lobLengthUnits;break a}a="m"}this.lengthUnits=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=a.arrowUnits;break a}a="m"}this.arrowUnits=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=a.lobLengthErrorColumn;break a}a=""}this.lengthErrorColumn=
a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=a.lobLengthErrorUnits;break a}a="m"}this.lengthErrorUnits=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=a.lobBearingColumn;break a}a=""}this.bearingColumn=a;a:{if((a=this.scope.items)&&0<a.length&&(a=mH(nH.u(),a[0].D()))){a=a.lobBearingErrorColumn;break a}a=""}this.bearingErrorColumn=a;a=this.scope;var b;a:{if((b=this.scope.items)&&0<b.length&&(b=mH(nH.u(),b[0].D()))){b=b.lobLength;break a}b=1E3}a.length=b;
a=this.scope;a:{if((b=this.scope.items)&&0<b.length&&(b=mH(nH.u(),b[0].D()))){b=b.lobColumnLength;break a}b=1E3}a.columnLength=b;a=this.scope;a:{if((b=this.scope.items)&&0<b.length&&(b=mH(nH.u(),b[0].D()))){b=b.arrowSize;break a}b=100}a.size=b;a=this.scope;a:{if((b=this.scope.items[0].W())&&(b=b.O())&&Ov(b,"os.source.Vector")){b=kN(b,"RADIUS")||kN(b,"SEMI_MAJOR")&&kN(b,"SEMI_MINOR")||kN(b,"SEMI_MAJOR (nmi)*")&&kN(b,"SEMI_MINOR (nmi)*")?!0:!1;break a}b=!1}a.ellipseSupport=b;a=this.scope;a:{if((b=this.scope.items)&&
0<b.length&&(b=mH(nH.u(),b[0].D()))){b=b.lobLengthError;break a}b=1}a.lengthErrorMultiplier=b;a=this.scope;a:{if((b=this.scope.items)&&0<b.length&&(b=mH(nH.u(),b[0].D()))){b=b.lobBearingError;break a}b=1}a.bearingErrorMultiplier=b}};MO.prototype.MI=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showArrow;this.xb(function(a){return new IO(a.D(),b)})}};MO.prototype.onShowArrowChange=MO.prototype.MI;
MO.prototype.QI=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showError;this.xb(function(a){return new KO(a.D(),b)})}};MO.prototype.onShowErrorChange=MO.prototype.QI;MO.prototype.NI=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showEllipse;this.xb(function(a){return new JO(a.D(),b)})}};MO.prototype.onShowEllipseChange=MO.prototype.NI;MO.prototype.Xf=function(){this.Xa()||this.N.start()};MO.prototype.onSizeChange=MO.prototype.Xf;
MO.prototype.L=function(){var a=t(function(a){return new vO(a.D(),this.scope.size)},this);this.xb(a)};MO.prototype.qw=function(a,b){a&&a.stopPropagation();a=void 0!==b?b:this.scope.length;this.scope.length=0==a?1:a;a=t(function(a){return new CO(a.D(),this.scope.length)},this);this.xb(a)};MO.prototype.onLengthChange=MO.prototype.qw;MO.prototype.wG=function(){this.Xa()||this.s.start()};MO.prototype.onColumnLengthChange=MO.prototype.wG;
MO.prototype.G=function(){var a=t(function(a){return new AO(a.D(),this.scope.columnLength)},this);this.xb(a)};MO.prototype.iG=function(){this.Xa()||this.o.start()};MO.prototype.onBearingErrorChange=MO.prototype.iG;MO.prototype.B=function(){var a=t(function(a){return new yO(a.D(),this.scope.bearingErrorMultiplier)},this);this.xb(a)};MO.prototype.WH=function(){this.Xa()||this.A.start()};MO.prototype.onLengthErrorChange=MO.prototype.WH;
MO.prototype.I=function(){var a=t(function(a){return new DO(a.D(),this.scope.lengthErrorMultiplier)},this);this.xb(a)};MO.prototype.VH=function(){var a=t(function(a){return new GO(a.D(),this.lengthColumn)},this);this.xb(a)};MO.prototype.onLengthColumnChange=MO.prototype.VH;MO.prototype.XH=function(){var a=t(function(a){return new BO(a.D(),this.lengthErrorColumn)},this);this.xb(a)};MO.prototype.onLengthErrorColumnChange=MO.prototype.XH;
MO.prototype.ZH=function(){var a=t(function(a){return new HO(a.D(),this.lengthType)},this);this.xb(a)};MO.prototype.onLengthTypeChange=MO.prototype.ZH;MO.prototype.hG=function(){var a=t(function(a){return new xO(a.D(),this.bearingColumn)},this);this.xb(a)};MO.prototype.onBearingColumnChange=MO.prototype.hG;MO.prototype.jG=function(){var a=t(function(a){return new zO(a.D(),this.bearingErrorColumn)},this);this.xb(a)};MO.prototype.onBearingErrorColumnChange=MO.prototype.jG;
MO.prototype.aI=function(){var a=t(function(a){return new FO(a.D(),this.lengthUnits)},this);this.xb(a)};MO.prototype.onLengthUnitChange=MO.prototype.aI;MO.prototype.eG=function(){var a=t(function(a){return new wO(a.D(),this.arrowUnits)},this);this.xb(a)};MO.prototype.onArrowUnitChange=MO.prototype.eG;MO.prototype.YH=function(){var a=t(function(a){return new EO(a.D(),this.lengthErrorUnits)},this);this.xb(a)};MO.prototype.onLengthErrorUnitChange=MO.prototype.YH;MO.prototype.ZC=function(){return"ellipseoptions"};
MO.prototype.getEllipseUI=MO.prototype.ZC;var sO="vector:showRotationChange",tO="vector:rotationColumnChange";W.directive("vectorstylecontrols",[function(){return{restrict:"E",replace:!0,scope:{color:"=",opacity:"=",icon:"=?",centerIcon:"=?",iconSet:"=?",iconSrc:"=?",showIcon:"=?",showCenterIcon:"=?",size:"=",shape:"=",shapes:"=",centerShape:"=?",centerShapes:"=?",showColorReset:"=?"},templateUrl:"v1542394219/views/layer/vectorstylecontrols.html",controller:NO,controllerAs:"ctrl"}}]);
function NO(a){y.call(this);this.scope=a;null==this.scope.showIcon&&(this.scope.showIcon=!0);null==this.scope.showCenterIcon&&(this.scope.showCenterIcon=!0);a.$on("$destroy",t(this.dispose,this))}w(NO,y);NO.$inject=["$scope"];NO.prototype.J=function(){this.scope=null};NO.prototype.Ui=function(){this.scope&&this.scope.$emit("vector:shapeChange",this.scope.shape)};NO.prototype.onShapeChange=NO.prototype.Ui;NO.prototype.BE=function(){return this.scope&&this.scope.shape?TG[this.scope.shape]:!1};
NO.prototype.hasCenter=NO.prototype.BE;NO.prototype.Pi=function(a){this.scope&&(this.scope.$emit("vector:centerShapeChange",a),this.scope.centerShape=a)};NO.prototype.onCenterShapeChange=NO.prototype.Pi;W.directive("vectorlayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/layer/vector.html",controller:OO,controllerAs:"vector"}}]);
function OO(a,b,c){this.iconSet=zM;this.iconSrc=yM;this.replaceStyle=this.showReplaceStyle=!1;this.getShapeUI=this.B.bind(this);this.showRotation=!1;this.rotationColumn="";this.altitudeModes=[];this.showAltitudeModes=!1;lO.call(this,a,b,c);this.o="colorControl:picker";this.j.push("lock");$t.H("propertychange",this.tw,!1,this);a.$on("size.slidestop",this.Xf.bind(this));a.$on("color.change",this.A.bind(this));a.$on("color.reset",this.G.bind(this));a.$on("icon:change",this.Wf.bind(this));a.$on("vector:shapeChange",
this.Ui.bind(this));a.$on("vector:centerShapeChange",this.Pi.bind(this));a.$on("labelColor.change",this.nw.bind(this));a.$on("labelColor.reset",this.IK.bind(this));a.$on("labelSize.spinstop",this.RH.bind(this));a.$on("labelcontrols:columnChange",this.QH.bind(this));a.$on("labelcontrols:showLabelsChange",this.zq.bind(this));a.$on(sO,this.JK.bind(this));a.$on(tO,this.xq.bind(this))}w(OO,lO);OO.$inject=["$scope","$element","$timeout"];
OO.prototype.md=function(){OO.C.md.call(this);if(this.scope){this.scope.color=Vja(this);var a=this.scope,b=this.scope.items,c;if(b)for(var d=0,e=b.length;d<e;d++)try{if(b[d].W()){var f=mH(nH.u(),b[0].D());f&&(c=fH(f))}}catch(S){}a.size=c||3;a=this.scope;b=this.scope.items;c=null;if(b&&0<b.length)try{var h=XI.u().O(b[0].D());if(h&&"Icon"==h.Dd){var k=mH(nH.u(),b[0].D());c=bH(k)||xM()}}catch(S){}a.icon=c;h=this.scope;k=this.scope.items;a=null;if(k&&0<k.length)try{var l=XI.u().O(k[0].D());if(l&&"Icon"==
l.Ff){var m=mH(nH.u(),k[0].D());a=bH(m)||xM()}}catch(S){}h.centerIcon=a;l=this.scope;m=this.scope.items;var n;if(m&&0<m.length)try{var p=NB.O(m[0].D());p&&(n=p.Dd)}catch(S){}l.shape=n||SB;n=this.scope;p=this.scope.items;l=nc(OG);if(p&&0<p.length)for(m=0,h=p.length;m<h;m++)try{var r=NB.O(p[m].D());r&&r instanceof vL&&(l=eb(l,r.Zz,r))}catch(S){}n.shapes=l;r=this.scope;n=this.scope.items;var u;if(n&&0<n.length)try{var v=NB.O(n[0].D());if(v){var x=v.Ff;QG.test(x)||SG.test(x)||(u=x)}}catch(S){}r.centerShape=
u||"Point";u=this.scope;v=this.scope.items;x=nc(OG);if(v&&0<v.length)for(r=0,n=v.length;r<n;r++)try{var B=NB.O(v[r].D());B&&B instanceof vL&&(x=eb(x,B.Uu,B))}catch(S){}u.centerShapes=x;B=this.scope;this.lock=!1;u=!0;if((v=this.scope.items)&&0<v.length)for(x=0,r=v.length;x<r;x++)try{var F=NB.O(v[x].D());if(F&&F instanceof vL&&!F.Gi()){u=!1;break}else this.lock=F.N}catch(S){u=!1}B.lockable=u;F="absolute";if((B=this.scope.items)&&0<B.length)for(u=0,v=B.length;u<v;u++)try{var D=NB.O(B[u].D());if(D&&D instanceof
vL){F=D.Nb;break}}catch(S){}this.altitudeMode=F;this.columns=this.getValue(eO);a:{if((D=this.scope.items)&&0<D.length&&(D=mH(nH.u(),D[0].D()))){D=!!D.showRotation;break a}D=!1}this.showRotation=D;a:{if((D=this.scope.items)&&0<D.length&&(D=mH(nH.u(),D[0].D()))){D=D.rotationColumn;break a}D=""}this.rotationColumn=D;Wja(this);if(this.scope.items&&1==this.scope.items.length){if(this.scope.columns=this.getValue(eO),this.uniqueId=this.getValue(Qja),Xja(this),this.scope.showLabels!==this.getValue(Jja)&&
(this.scope.showLabels=this.getValue(Jja)),this.scope.labelColor!==this.getValue(Kja)&&(this.scope.labelColor=this.getValue(Kja)),this.scope.labelSize!==this.getValue(Lja)||14!==this.scope.labelSize)this.scope.labelSize=this.getValue(Lja)||14}else this.scope.columns=null,this.scope.column=null,this.scope.showLabels=!1,this.scope.labelColor="",this.scope.labelSize=0;if(D=$t.g)this.altitudeModes=D.cu(),this.showAltitudeModes=0<this.altitudeModes.length&&$t.Qa();this.scope.$broadcast("uiSwitch:update")}};
OO.prototype.B=function(){if(null!=this.scope){var a=this.scope.shape||"";if(QG.test(a))return"ellipseoptions";if(PG.test(a))return"loboptions"}};OO.prototype.xs=function(){if(null!=this.scope){var a=this.scope.shape||"",b=this.scope.centerShape||"";return"Icon"==a||RG.test(a)&&"Icon"==b}return!1};OO.prototype.showRotationOption=OO.prototype.xs;function Xja(a){var b=a.getValue(Ija,[]),c=[];db(b,function(a){c.push(tH(a))},a);0===c.length&&c.push(tH());a.scope.labels=c}
OO.prototype.A=function(a,b){a.stopPropagation();this.xb(function(a){return new KN(a.D(),b)})};OO.prototype.G=function(a){a.stopPropagation();this.A(a,"");this.scope.color=Vja(this)};OO.prototype.Xf=function(a,b){a.stopPropagation();this.xb(function(a){return new VN(a.D(),b)})};OO.prototype.Wf=function(a,b){a.stopPropagation();b&&this.xb(function(a){return new LN(a.D(),b)})};OO.prototype.onIconChange=OO.prototype.Wf;
OO.prototype.Ui=function(a,b){a.stopPropagation();b&&this.xb(function(a){return new SN(a.D(),b)})};OO.prototype.onShapeChange=OO.prototype.Ui;OO.prototype.Pi=function(a,b){a.stopPropagation();b&&this.xb(function(a){return new JN(a.D(),b)})};OO.prototype.onCenterShapeChange=OO.prototype.Pi;g=OO.prototype;g.nw=function(a,b){a.stopPropagation();this.xb(function(a){return new NN(a.D(),b)})};
g.IK=function(a){a.stopPropagation();var b=this.scope.items;b&&0<b.length&&(b=b[0].W())&&(b=mH(nH.u(),b.D()),this.scope.labelColor=QB(b));this.nw(a,"")};g.RH=function(a,b){a.stopPropagation();this.xb(function(a){return new ON(a.D(),b)})};g.QH=function(a){a.stopPropagation();(a=this.scope.items)&&1===a.length&&(a=t(function(a){return new MN(a.D(),this.scope.labels)},this),this.xb(a))};
g.zq=function(a,b){a.stopPropagation();(a=this.scope.items)&&1===a.length&&this.xb(function(a){return new TN(a.D(),b)})};function Vja(a){if(a=a.scope.items)for(var b=0,c=a.length;b<c;b++)try{if(a[b].W()){var d=mH(nH.u(),a[0].D());if(d){var e=QB(d,!0);return e?iv(e):e}}}catch(f){}return null}g.bI=function(){var a=this.scope.items;if(a&&0<a.length)for(var b=0,c=a.length;b<c;b++)try{var d=NB.O(a[b].D());d&&d instanceof vL&&d.Gi()&&d.Zg(this.lock)}catch(e){}};OO.prototype.onLockChange=OO.prototype.bI;
function Wja(a){a.showReplaceStyle=!1;a.replaceStyle=!1;var b=kO(a);if(b&&0<b.length){var c;a.showReplaceStyle=hb(b,function(a){a=a.W();if(P(a,"os.layer.ILayer")){var b=a.Sa();if(b&&b.showForceColor)return null==c&&(a=mH(nH.u(),a.D()))&&(c=!!a.replaceStyle),!0}return!1});null!=c&&(a.replaceStyle=c)}}OO.prototype.AI=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.replaceStyle;this.xb(function(a){return new PN(a.D(),b)})}};OO.prototype.onReplaceStyleChange=OO.prototype.AI;
OO.prototype.bG=function(){var a=this.scope.items;if(a&&0<a.length)for(var b=0,c=a.length;b<c;b++)try{var d=NB.O(a[b].D());d&&d instanceof vL&&kja(d,this.altitudeMode)}catch(e){}};OO.prototype.onAltitudeModeChange=OO.prototype.bG;OO.prototype.nJ=function(){var a=kO(this);if(a&&0<a.length){var b=this.uniqueId;this.xb(function(a){return new WN(a.D(),b)})}};OO.prototype.onUniqueIdChange=OO.prototype.nJ;g=OO.prototype;
g.JK=function(a,b){(a=this.scope.items)&&0<a.length&&this.xb(function(a){return new UN(a.D(),b)})};g.xq=function(a,b){(a=this.scope.items)&&0<a.length&&(a=t(function(a){return new RN(a.D(),b)},this),this.xb(a))};g.tw=function(a){"map:change:view3d"==a.l&&(this.showAltitudeModes=a.o&&0<this.altitudeModes.length,X(this.scope))};g.J=function(){$t.M("propertychange",this.tw,!1,this);OO.C.J.call(this)};
g.sF=function(a){switch(a){case "absolute":return"Absolute";case "clampToGround":return"Clamp to Ground";case "relativeToGround":return"Relative to Ground";case "clampToSeaFloor":return"Clamp to Sea Floor";case "relativeToSeaFloor":return"Relative to Sea Floor";default:return""}};OO.prototype.mapAltitudeModeToName=OO.prototype.sF;function PO(a){this.l=a;this.state="ready"}PO.prototype.O=function(){return NB.O(this.l)};PO.prototype.lb=!1;PO.prototype.title="Source";PO.prototype.Ba=null;function Yja(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.O()?!0:(a.state="error",a.Ba='Data source "'+a.l+'" does not exist',!1)};W.directive("combonodeui",[function(){return{restrict:"AE",replace:!0,template:'<span class="form-inline"><span ng-if="nodeUi.isGroup()" title="Whether to pass all filters (AND) or any filter (OR)"><span><select class="custom-select" ng-model="nodeUi.activeGroup" ng-change="nodeUi.toggleGroup()"ng-options="item as item for item in nodeUi.groups"/></span></span><span class="ml-2"><span ng-if="nodeUi.isArea() && nodeUi.isEnabled()" ng-click="nodeUi.toggleQuery()" title="Toggles between querying and excluding the area"><i class="fa fa-fw c-glyph" ng-class="{\'fa-ban text-danger\': !nodeUi.include, \'fa-circle u-text-yellow\': nodeUi.include}"></i></span><span ng-if="nodeUi.isFilter() && nodeUi.showCopy()" ng-click="nodeUi.copy()"><i class="fa fa-copy fa-fw c-glyph" title="Copy"></i></span><span ng-if="nodeUi.isFilter() || nodeUi.isArea()" ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit"></i></span><span ng-if="nodeUi.isFilter() || nodeUi.isArea()" ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove"></i></span></span></span>',
controller:QO,controllerAs:"nodeUi"}}]);function QO(a){this.v=a;this.g=a.item;var b;if((b=this.g.na())&&b.length){for(var c=!0,d=0;d<b.length;d++){var e=b[d].gb();e&&void 0!==e.filterGroup&&!e.filterGroup&&(c=!1)}b=c}else b=!0;this.activeGroup=(this.group=b)?RO[0]:RO[1];(b=this.g.gb())&&b.areaId?(b=b.includeArea,b=void 0!==b?b:!0):b=!0;this.include=b;(b=this.gb())&&void 0===b.filterGroup&&(b.filterGroup=this.group);this.groups=RO;a.$on("$destroy",this.j.bind(this))}QO.$inject=["$scope","$element"];
var RO=["All (AND)","Any (OR)"];QO.prototype.j=function(){this.v=null};QO.prototype.As=function(){this.group=!this.group;this.gb().filterGroup=this.group;var a=this.g.na();if(a)for(var b=0,c=a.length;b<c;b++){var d=a[b];d&&(d=d.gb())&&d.filterId&&(d.filterGroup=this.group)}this.v.$emit("dirty")};QO.prototype.toggleGroup=QO.prototype.As;QO.prototype.WE=function(){var a=this.g.na();return a&&a.length?(a=a[0].gb(),!!a&&!!a.filterId&&"*"!==a.filterId):!1};QO.prototype.isGroup=QO.prototype.WE;
QO.prototype.gb=function(){return this.g.gb()};QO.prototype.vN=function(){this.include=!this.include;var a=this.gb();a&&(a.includeArea=this.include);Q(R.u(),"filters.advanced.areaIncludeToggle",1);this.v.$emit("dirty")};QO.prototype.toggleQuery=QO.prototype.vN;QO.prototype.UE=function(){var a=this.gb();return!!a&&!!a.areaId&&"*"!==a.areaId};QO.prototype.isArea=QO.prototype.UE;QO.prototype.isEnabled=function(){return"off"!==this.g.getState()};QO.prototype.isEnabled=QO.prototype.isEnabled;
QO.prototype.em=function(){var a=this.gb();return!!a&&!!a.filterId&&"*"!==a.filterId};QO.prototype.isFilter=QO.prototype.em;QO.prototype.Pc=function(){this.v.$emit("edit",this.em(),this.gb());Q(R.u(),"filters.advanced.areaEdit",1)};QO.prototype.edit=QO.prototype.Pc;QO.prototype.view=function(){this.v.$emit("view",this.em(),this.gb())};QO.prototype.view=QO.prototype.view;QO.prototype.WM=function(){var a=V.Ja(this.gb().layerId),b=YE(WE);return 0<kc(b)&&!!a};QO.prototype.showCopy=QO.prototype.WM;
QO.prototype.copy=function(){this.v.$emit("copy",this.gb());Q(R.u(),"filters.advanced.areaCopy",1)};QO.prototype.copy=QO.prototype.copy;QO.prototype.remove=function(){this.v.$emit("remove",this.em(),this.gb());this.v.$emit("dirty");Q(R.u(),"filters.advanced.areaRemove",1)};QO.prototype.remove=QO.prototype.remove;function SO(a){jz.call(this);this.g=null;this.collapsed=!1;a=a||"combonodeui";this.j="<"+a+"></"+a+">"}w(SO,jz);g=SO.prototype;g.gb=function(){return this.g};function TO(a,b){a.g=b;b="";if(a.g&&a.g.filterId){var c=PJ.pb(a.g.filterId);c&&(b=LJ(fJ(c),1E3))}oz(a,b)}g.Hc=function(){var a=null;this.g&&this.g.layerId&&!this.g.filterId&&!this.g.areaId&&(a=(a=V.Ja(this.g.layerId))?a.td():"");return a?a:SO.C.Hc.call(this)};g.lc=function(a){TO(this,a.gb());SO.C.lc.call(this,a)};
g.ej=function(){if(this.g){var a=this.g.areaId;a&&"*"!==a&&UE.pp(a)}};g.Jh=function(){if(this.g){var a=this.g.areaId;a&&"*"!==a&&UE.Kn(a)}};function UO(a){a=a.ba();var b=/^No (layers|filters|areas)$/;return!!a&&b.test(a)}g.getState=function(){var a=SO.C.getState.call(this);return"both"==a?"on":a};
g.Ga=function(a){var b=UO(this),c=this.getParent();if(c){var d=c.gb();this.g&&d&&void 0!==d.filterGroup&&(this.g.filterGroup=d.filterGroup);if("off"!==a&&!this.na()){var e=c.na();if(e){d=0;for(var f=e.length;d<f;d++){var h=e[d];h!==this&&(b||UO(h))&&h.Ga("off")}}if(d=c.getParent())for(b=UO(c),e=d.na(),d=0,f=e.length;d<f;d++)if(h=e[d],h!==c){var k=h.na();if(k)for(var l=0,m=k.length;l<m;l++){var n=k[l];n.D()===this.D()&&(b||UO(h))&&n.Ga("off")}}}}SO.C.Ga.call(this,a)};function RE(){A.call(this);this.entries=[];this.o=[];this.j=[];this.g={};this.s=new le(this.qy,20,this);this.l=new le(this.Qw,20,this);UE.H("propertychange",this.dG,!1,this);PJ.H("propertychange",this.rH,!1,this);this.load()}w(RE,A);wa(RE);var VO=E.V("os.ui.query.QueryManager");g=RE.prototype;g.save=function(){};g.load=function(){};
g.getEntries=function(a,b,c,d,e){d=d?this.o:this.entries;e=!!e;return a||b||c?d.filter(function(d){return(e||!("negate"in d))&&(!a||a==d.layerId)&&(!b||b==d.areaId)&&(!c||c==d.filterId)}):d.slice()};function Zja(a,b,c){for(var d=0;d<c.length;d++)-1==jb(b,function(a){return Baa(a,c[d])})&&a.isActive(c[d].areaId)&&(a.g[c[d].layerId]=!0)}g.Qw=function(){var a=$ja(this);Zja(this,this.o,a);this.o=a;this.qy();this.save()};
function uF(a,b,c,d,e,f,h){var k=a.getEntries(b,c,d);if(0===k.length||k[0].includeArea!==e||k[0].filterGroup!==f)vF(a,b,c,d),c={layerId:b,areaId:c,filterId:d,includeArea:void 0!==e?e:!0,filterGroup:void 0!==f?f:!0},h&&(c.temp=!0),a.entries.push(c),a.g[b]=!0;a.l.start()}function dF(a,b,c,d){(d=d?"all"===d?"*":d:void 0)&&(a.g[d]=!0);for(var e=0,f=b.length;e<f;e++)a.entries.push(b[e]),!d&&a.isActive(b[e].areaId)&&(a.g[b[e].layerId]=!0);c?a.Qw():a.l.start()}
function WO(a){var b=WE,c=YE(b),d=UE,e=PJ;return(a?b.o:b.entries).filter(function(a){var b=a.layerId,f=a.areaId;a=a.filterId;if(b&&"*"!==b&&!(b in c))return!1;b=d.get(f);if(f&&"*"!==f&&(!b||!b.get("shown")))return!1;f=e.pb(a);return!a||"*"===a||f&&f.isEnabled()?!0:!1})}
function vF(a,b,c,d,e){if(b||c||d){e=a.entries.length;for(var f=0;e--;){var h=a.entries[e];b&&b!=h.layerId||c&&c!=h.areaId||d&&d!=h.filterId||(a.entries.splice(e,1),"negate"in h||(a.g[h.layerId]=!0),f++)}0<f&&(E.za(VO,"Removed "+f+" entries matching layer: "+b+" area: "+c+" filter: "+d),a.l.start())}else E.za(VO,"Clearing all query entries"),a.entries.length=0,a.o.length=0,e||(a.g["*"]=!0,a.l.start())}
function XE(a,b){for(var c=a.entries.length,d=0;c--;){var e=a.entries[c];-1<b.indexOf(e)&&("negate"in e||!a.isActive(e.areaId)||(a.g[e.layerId]=!0),a.entries.splice(c,1),d++)}0<d&&(E.za(VO,"Removed "+d+" entries."),a.l.start())}function aF(a,b){var c=typeof b;b="string"==c||"number"==c?b:b.D();c=UE;for(var d=!1,e=!1,f=0,h=a.entries.length;f<h;f++){var k=a.entries[f],l=k.areaId;l===b&&(l=c.get(l))&&l.get("shown")&&(k.includeArea?d=!0:e=!0)}return d&&e?3:d?2:e?1:0}
function XO(a,b){var c=typeof b;b="string"==c||"number"==c?b:b.D();c=PJ;for(var d=0,e=a.entries.length;d<e;d++){var f=a.entries[d].filterId;if(f===b&&(f=c.pb(f))&&f.isEnabled())return!0}return!1}g.qy=function(){E.za(VO,"Refreshing layers");this.dispatchEvent(new U("queries",this.g));this.g={}};g.isActive=function(a){return 0<aF(this,a)};
function aka(a,b){for(var c=UE,d=0,e=a.entries.length;d<e;d++){var f=a.entries[d],h=f.areaId,k=c.get(h);if(f.layerId===b&&h&&f.includeArea&&k&&k.get("shown"))return!0}return!1}function YE(a){for(var b={},c=0,d=a.j.length;c<d;c++){var e=a.j[c].l,f=a.j[c].py();e&&(b[e]=f)}return b}function bka(a,b){a.l.start();for(var c={},d=0,e=b.length;d<e;d++)c[b[d].layerId]=!0;if("*"in c)a.g["*"]=!0,a.s.start();else for(var f in c)b=a,b.g[f]=!0,b.s.start()}
g.dG=function(a){"toggle"===a.l&&(a=a.o.D(),bka(this,this.getEntries(null,a)))};g.rH=function(a){"toggle"===a.l&&(a=a.o.D(),bka(this,this.getEntries(null,null,a)))};function YO(a){var b=[a.layerId,a.areaId,a.filterId,a.includeArea,a.filterGroup];"negate"in a&&b.push(a.negate);return b.join("|")}
function $ja(a,b){var c=b||a.entries;b={};for(var d,e=[],f=0,h=c.length;f<h;f++){var k=c[f];"*"===k.layerId||"*"===k.areaId||"*"===k.filterId?e.push(k):(d=YO(k),b[d]=k)}if(!e.length)return a.entries.slice();c=[];var l={};f=0;for(h=a.j.length;f<h;f++){var m=a.j[f].l;!m||m in l||(c.push({layerId:m}),l[m]=!0)}a={"*|*":[]};l={};m={};for(f=e.length;f--;){k=e[f];var n=k.areaId,p=k.layerId;h=k.filterId;var r=k.includeArea,u=k.filterGroup,v=k.negate;n&&"*"!==n&&(k=p+"|"+h,v||(k in a||(a[k]=[]),a[k].push({areaId:n,
includeArea:r})),v||"*"!==p)&&(n in l||(l[n]={}),l[n][p]=!0);h&&"*"!==h&&(p in m||(m[p]=[]),m[p].push({filterId:h,filterGroup:u}));v&&e.splice(f,1)}if("*"in m){r=m["*"];f=0;for(h=r.length;f<h;f++)for(var x=0,B=c.length;x<B;x++)u=zc(r[f]),k=c[x],k in m||(m[k]=[]),m[k].push(u);delete m["*"]}r=["layerId","areaId","filterId"];u=0;for(v=r.length;u<v;u++){var F=r[u],D=[];f=0;for(h=e.length;f<h;f++)if(k=e[f],"*"===k[F]){p=k.layerId;x=null;if(0===u){if(n=k.areaId,x=c,n&&"*"!==n){var S=l[n];S&&(x=c.filter(function(a){return!(a.layerId in
S)}))}}else if(1===u){var ia=a[p+"|*"],ea=a["*|*"];ia=ia?ia.slice():[];ea=ea?ea.slice():[];for(x=ea.length;x--;){n=ea[x].areaId;var ca=!1;B=ia.length;var Y=l[n];Y&&p in Y&&(ca=!0);if(!ca)for(Y=0;Y<B;Y++)if(ia[Y].areaId===n){ca=!0;break}ca&&ea.splice(x,1)}x=ia.concat(ea)}else x=m[p];if(x&&x.length)for(n=0,p=x.length;n<p;n++){B=zc(k);ia=x[n];for(d in ia)B[d]=ia[d];ia=!1;ea=0;for(ca=r.length;ea<ca;ea++)if("*"===B[r[ea]]){ia=!0;break}ia?D.push(B):(d=YO(B),b[d]=B)}else k.includeArea&&m[p]?D.push(k):(d=
YO(k),b[d]=k)}else D.push(k);e=D}return mc(b).concat(D)}
function ZO(a,b,c,d,e,f,h){c=void 0!==c?c:0;b=b||["layer","area","filter"];if(c>=b.length)return null;d||(d=new SO(h),d.ga("root"));var k=b[c].toLowerCase();c++;for(var l=null,m=null,n,p=d;p;){if(n=p.gb()){var r=n.filterId;l||"*"===r||(l=r);n=n.layerId;m||"*"===n||(m=n)}p=p.getParent()}p=PJ;if(e&&2==c&&"*"!==d.D()){for(l=c-1;l<b.length;l++)k=b[l].toLowerCase(),r=b[l===c-1?c:l].toLowerCase(),p=new SO(h),p.ga([m,k,"*"].join("|")),p.Da(k.charAt(0).toUpperCase()+k.substring(1)+"s"),n={},n[r+"Id"]="*",
TO(p,n),d.R(p),ZO(a,[k],0,p,e,f,h);return d}switch(k){case "layer":m=null;l?(p=p.pb(l))&&(m=[p.type]):f?(l=f.label,r=f.id,p=new SO(h),p.ga(r),p.Da((e?"":"Layer: ")+l),TO(p,{layerId:r}),d.R(p),ZO(a,b,c,p,e,f,h)):m=nc(YE(a));if(m)for(r=YE(a),l=0,n=m.length;l<n;l++){var u=r[m[l]];u&&(p=new SO(h),p.ga(m[l]),p.Da((e?"":"Layer: ")+u),TO(p,{layerId:m[l]}),d.R(p),ZO(a,b,c,p,e,f,h))}break;case "area":m=HD(UE);l=0;for(n=m.length;l<n;l++)m[l].get("shown")&&(p=new SO(h),r=m[l].D(),p.ga(r),p.Da((e?"":"Area: ")+
m[l].get("title")),TO(p,{areaId:r}),d.R(p),ZO(a,b,c,p,e,f,h));break;case "filter":if((r=HK(p,m))&&r.length)for(l=0,n=r.length;l<n;l++)r[l].isEnabled()&&(p=new SO(h),p.ga(r[l].D()),p.Da((e?"":"Filter: ")+r[l].S()),TO(p,{filterId:r[l].D(),layerId:m}),d.R(p),ZO(a,b,c,p,e,f,h));e||(p=new SO(h),p.Da("No filters"),p.ga("nofilters"),d.R(p),ZO(a,b,c,p,e,f,h))}p=d.na();e||p&&p.length?p&&p.sort(function(a,b){a=a.ba();b=b.ba();return"string"===typeof a&&"string"===typeof b?Ob(a,b):Bb(a,b)}):(p=new SO(h),p.Da("No "+
k+"s"),d.R(p),ZO(a,b,c,p,e,f,h));return d}var WE=null;function $O(){V.H("dataSourceRemoved",this.A,!1,this);RE.call(this)}w($O,RE);wa($O);Cc(RE,{u:function(){return $O.u()}});var cka=E.V("os.query.QueryManager");$O.prototype.A=function(a){if(a.source){a=a.source.D();for(var b=this.j.length;b--;)if(this.j[b].l===a){var c=this.j.splice(b,1);c&&c.forEach(function(a){Ma(a)})}E.info(cka,"Removed all query handlers for "+a)}};
$O.prototype.load=function(){this.entries=(this.entries=O.get(["query","entries"],[]))||[];var a=UE,b=PJ;this.entries=this.entries.filter(function(c){var d=c.areaId;c=c.filterId;return d&&"*"!==d&&!a.get(d)||c&&"*"!==c&&!b.pb(c)?!1:!0});this.l.start()};$O.prototype.save=function(){var a=this.entries.filter(function(a){return!a.temp});O.set(["query","entries"],a)};function aP(a,b,c){this.j=a;this.l=b;this.g=c;this.Ba=this.title="Rename layer from "+this.g+" to "+this.l;this.lb=!1;this.state="ready"}aP.prototype.Fa=function(){return"ready"===this.state?(this.state="executing",bP(this,this.l),this.state="success",!0):!1};aP.prototype.Cb=function(){this.state="reverting";bP(this,this.g);this.state="success";return this.j?(bP(this,this.g),this.state="ready",!0):!1};
function bP(a,b){a.j.Ta(b);a=a.j.O();P(a,"os.source.ISource")&&(a.Ta(b),T.u().dispatchEvent(new z("renameLayer")))};function cP(a){a&&LL({confirm:Fa(dka,a),defaultValue:a.S(),prompt:"Please choose a layer name:",select:!0,windowOptions:{icon:"fa fa-i-cursor",label:"Rename Layer"}})}function dka(a,b){a=new aP(a,b,a.S());gF(hF.u(),a)};function MK(a){wl.call(this,a);this.ma=$b();this.pa="Feature Layers";this.Ea="Features";this.j="New Layer";this.L=!1;this.jb=this.Ia=null;this.bb=!0;this.oa=null;this.Ca="<defaultlayernodeui></defaultlayernodeui>";this.ra="vectorlayerui";this.A=!0;this.U=this.Z=!1;eka.bind(this);this.I=this.o=null;this.P=!1;this.hb="vector";this.ka=!1;this.set("renderOrder",null);T.u().H("propertychange",this.Dx,!1,this)}w(MK,wl);P(MK,"os.layer.ILayer");P(MK,"os.filter.IFilterable");P(MK,"os.legend.ILegendRenderer");
Nv["os.layer.Vector"]=MK;g=MK.prototype;g.J=function(){MK.C.J.call(this);T.u().M("propertychange",this.Dx,!1,this);this.Va(!1);var a=this.O();a&&a.dispose();a=nH.u();var b=this.D();b in a.g&&delete a.g[b]};g.Bb=function(a){var b=this.O();b&&b instanceof vL&&(xh(b,"propertychange",this.Jw,this),mN(b,!1));MK.C.Bb.call(this,a);a&&a instanceof vL&&(I(a,"propertychange",this.Jw,this),mN(a,T.u().Qa()))};g.Dx=function(a){if("map:change:view3d"==a.l){a=a.o;fka(this);var b=this.O();b instanceof vL&&mN(b,a)}};
g.Jw=function(a){var b=a.l;switch(b){case "featureVisibility":b=this.O();if(a=a.o)for(var c=0,d=a.length;c<d;c++){var e=a[c],f=T.u(),h=e;f.ha&&(b.Fi(e)?f.ha.Tz(h):f.ha.mA(h))}break;case "loading":this.Va(a.o);break;case "visible":this.Bd(a.o);break;case "animationEnabled":this.Z=a.o;fka(this);break;case "timeEnabled":b=new U("timeEnabled",a.o,a.s);this.dispatchEvent(b);break;case "style":b=new U(DH,a.o,a.s);this.dispatchEvent(b);break;case "lock":b=new U("lock",a.o,a.s);this.dispatchEvent(b);break;
case "refreshInterval":b=new U("refreshInterval",a.o,a.s);this.dispatchEvent(b);break;case "colorModel":b=new U("colorModel",a.o,a.s);this.dispatchEvent(b);break;case "columns":case "columnAdded":this.dispatchEvent(new U(b));break;case "altitude":b=new U("altitude",a.o,a.s),this.dispatchEvent(b)}};function fka(a){a.Z&&!T.u().Qa()?(a.U=!0,0!=a.Hb()&&a.ec(!1)):(a.U=!1,a.Hb()!=a.A&&a.ec(a.A))}g.D=function(){return this.ma};g.ga=function(a){this.ma=a};
g.td=function(){var a=mH(nH.u(),this.D());if(a){a=QB(a,!0);var b=this.D(),c=['<image xlink:href="v1542394219/images/features-base.png" x="0" y="0" width="16px" height="16px"><title>Feature layer</title></image>'],d=this.O();d instanceof vL&&(d.Md&&c.push('<image class="time-icon" xlink:href="v1542394219/images/time-base.png" x="0" y="0" width="16px" height="16px"><title>This layer supports animation over time</title></image>'),d.N&&c.push('<image xlink:href="v1542394219/images/lock_tiny_white.png" x="0" y="0" width="16px" height="16px"><title>This layer is locked.</title></image>'));
d=[];var e=this.O();e instanceof vL&&e.G&&d.push('<i class="fa fa-tint" title="This layer has auto/manual coloring rules applied"></i>');return DN(b,c,d,a)}a=['<img src="v1542394219/images/features-base.png" title="Feature layer"/>'];b=this.O();b instanceof vL&&(b.Md&&a.push('<img class="time-icon" src="v1542394219/images/time-base.png" title="This layer supports animation over time"/>'),b.N&&a.push('<i class="fa fa-lock" title="This layer is locked."></i>'),b.G&&a.push('<i class="fa fa-tint" title="This layer has auto/manual coloring rules applied"></i>'));
return a.join("")};g.Sa=function(){return this.oa};g.Nk=function(a){this.oa=a};g.mb=function(){return this.L};g.Va=function(a){if(this.L!==a){var b=this.L;this.L=a;this.dispatchEvent(new U("loading",a,b))}};g.rb=function(){return this.Ia};g.Cc=function(a){this.Ia=a};g.ve=function(){return this.bb};g.hg=function(a){this.bb=a};g.getTags=function(){return this.jb};g.vb=function(a){this.jb=a};g.S=function(){return this.j};
g.Ta=function(a){if(this.j!==a){var b=this.j;this.j=a;this.dispatchEvent(new U("title",a,b))}};g.Qc=function(){return this.pa};g.Zd=function(a){this.pa=a};g.Nf=function(){return this.Ea};g.ye=function(a){this.Ea=a};g.bd=function(){return this.A};g.Bd=function(a){a=!!a;if(a!=this.A){this.A=a;this.U||this.ec(a);this.dispatchEvent(new U("visible",a,!a));var b=this.O();b instanceof vL&&b.ec(a)}};g.fg=function(a){this.ec(a)};g.Ij=function(){return this.Hb()};g.Qd=function(){return this.Ca};
g.Bf=function(a){this.Ca=a};g.rd=function(a){var b=this.O();b instanceof vL&&(b.g&&b.g.rd(a),b.set("opacity",a,!0));MK.C.rd.call(this,a)};g.Cf=function(a){var b=this.O();b instanceof vL&&(b.g&&b.g.Cf(a),b.set("zIndex",a,!0));MK.C.Cf.call(this,a);GM()};function gka(a){var b=a.O();b instanceof vL?fia(b):mw(a)}
g.di=function(a){var b=this.O();if(bv)switch(a){case "identify":gka(this);break;case "clearSelection":b instanceof vL&&hN(b);break;case "layer:disableTime":b instanceof vL&&oN(b,!1);break;case "layer:enableTime":b instanceof vL&&oN(b,!0);break;case "mostRecent":!IL(V,this.D())&&b instanceof vL&&(a=b.l)&&(a=(a.B||gw).Ya(),0<a&&a<Rv&&JL(hw.u(),a));break;case "refresh":b instanceof xN&&b.refresh();break;case "layer:lock":case "layer:unlock":b instanceof vL&&b.Gi()&&b.Zg("layer:lock"==a);break;case "layer:remove":a=
new BA("removeLayer",this.D());C.dispatchEvent(a);break;case "rename":cP(this);break;case "resetColor":b instanceof vL&&$L(b,null)}};g.Nj=function(){return this.ra};g.gg=function(a){this.ra=a};g.Ll=function(){return null};g.Eg=function(){return null!=this.o};g.ff=function(){var a=this.Sa(),b=V.Ja(a.id);if(P(b,"os.filter.IFilterable"))return b.ff();b=a.url;a=(a=a.params)?a.get("typename"):null;return b&&a?b+"!!"+a:null};g.Jl=function(){return[this.D()]};g.Hi=function(){null!=this.o&&this.o(this)};
g.Fe=function(){return null!=this.I?this.I(this):null};
g.Uk=function(a,b){var c=this.O(),d=c instanceof vL;if(bv)switch(a){case "goTo":case "identify":case "showDescription":return!0;case "rename":return!!b&&ya(b)&&1===b.length;case "bufferSelected":case "export":case "clearSelection":return d&&c.oa[a];case "layer:disableTime":return d&&c.Md;case "layer:enableTime":return d&&!c.Md;case "mostRecent":return a=NaN,d&&(d=V.Ja(this.D()),null!=d&&(a=d.Of()),(isNaN(a)||0>=a)&&(c=c.l)&&(a=(c.B||gw).Ya())),0<a&&a<Rv;case "layer:remove":return this.ve();case "refresh":return"Reference Layers"!==
this.pa&&d&&c.Fg();case "layer:lock":return d&&c.Gi()&&!c.N;case "layer:unlock":return d&&c.Gi()&&c.N;case "resetColor":return d&&null!=c.G;default:return d&&c.oa[a]}return!1};g.Tl=function(){return this.hb};g.Pk=function(a){this.hb=a};g.Mj=function(){return this.ka};g.vn=function(a){this.ka=a};g.yf=function(a){if(a.showVector&&tL(a)){var b=this.O();if(b&&uL(b)){var c=xL(b,a),d=b.S(!a.showVectorType);a.showCount&&(d+=" ("+b.Z+")");wL(c,a,d,0)}}};
g.sa=function(a){a=a||{};a.visible=this.bd();a.opacity=this.Xb();a.minResolution=this.he();a.maxResolution=this.ge();var b=mH(nH.u(),this.D());b&&(a.arrowSize=b.arrowSize,a.arrowUnits=b.arrowUnits,a.color=QB(b),a.replaceStyle=b.replaceStyle,a.size=fH(b),a.icon=bH(b),a.labels=b.labels,a.labelColor=b.labelColor,a.labelSize=b.labelSize,a.lobColumnLength=b.lobColumnLength,a.lobLength=b.lobLength,a.lobLengthType=b.lobLengthType,a.lobLengthColumn=b.lobLengthColumn,a.lobLengthError=b.lobLengthError,a.lobLengthErrorColumn=
b.lobLengthErrorColumn,a.lobLengthErrorUnits=b.lobLengthErrorUnits,a.lobLengthUnits=b.lobLengthUnits,a.lobBearingColumn=b.lobBearingColumn,a.lobBearingError=b.lobBearingError,a.lobBearingErrorColumn=b.lobBearingErrorColumn,a.rotationColumn=b.rotationColumn,a.showRotation=b.showRotation,a.showArrow=b.showArrow,a.showEllipse=b.showEllipse,a.showError=b.showError,a.showLabels=b.showLabels,a.showEllipsoids=b.showEllipsoids,a.showGroundRef=b.showGroundRef);(b=this.O())&&P(b,"os.source.ISource")&&(a=b.sa(a));
return a};
g.restore=function(a){null!=a.id&&this.ga(a.id);var b=Tia(nH.u(),this.D());null!=a.provider&&this.Cc(a.provider);null!=a.tags&&this.vb(a.tags);null!=a.title&&this.Ta(a.title);null!=a.layerType&&this.Zd(a.layerType);null!=a.explicitType&&this.ye(a.explicitType);null!=a.visible&&this.Bd(a.visible);null!=a.featureDirective&&(this.nb=a.featureDirective);null!=a.layerUI&&this.gg(a.layerUI);null!=a.nodeUI&&this.Bf(a.nodeUI);var c=a.alpha||a.opacity;null!=c&&this.rd(c);this.lj(a.minResolution||this.he());
this.kj(a.maxResolution||this.ge());null!=a.color&&aH(b,ZG(a.color));null!=a.replaceStyle&&(b.replaceStyle=a.replaceStyle);null!=a.size&&gH(b,a.size);null!=a.icon&&cH(b,a.icon);null!=a.showArrow&&(b.showArrow=a.showArrow);null!=a.showError&&(b.showError=a.showError);null!=a.showEllipse&&(b.showEllipse=a.showEllipse);null!=a.showEllipsoids&&(b.showEllipsoids=a.showEllipsoids);null!=a.showGroundRef&&(b.showGroundRef=a.showGroundRef);null!=a.showRotation&&(b.showRotation=a.showRotation);b.arrowSize=
a.arrowSize||100;b.arrowUnits=a.arrowUnits||"m";b.lobColumnLength=a.lobColumnLength||1E3;b.lobLength=a.lobLength||1E3;b.lobLengthError=a.lobLengthError||1;b.lobLengthType=a.lobLengthType||"manual";b.lobLengthColumn=a.lobLengthColumn||"";b.lobLengthErrorColumn=a.lobLengthErrorColumn||"";b.lobBearingColumn=a.lobBearingColumn||"";b.lobLengthErrorUnits=a.lobLengthErrorUnits||"m";b.lobLengthUnits=a.lobLengthUnits||"m";b.lobBearingError=a.lobBearingError||1;b.lobBearingErrorColumn=a.lobBearingErrorColumn||
"";b.rotationColumn=a.rotationColumn||"";b.labels=a.labels||[tH()];b.labelColor=a.labelColor;b.labelSize=a.labelSize||14;b.showLabels=a.showLabels||!1;(b=this.O())&&P(b,"os.source.ISource")&&b.restore(a)};function eka(a){if(a){var b=JB(a)||this.S();KI(a,b)}};W.directive("featurecount",[function(){return{restrict:"AE",replace:!0,template:"<span></span>",controller:dP,controllerAs:"featureCount"}}]);function dP(a,b){this.g=null;this.K=b;"item"in a&&(b=a.item.W().O())&&b instanceof vL&&(this.g=b,I(this.g,"propertychange",this.j,this));a.$on("$destroy",this.l.bind(this));this.K.html(hka(this))}dP.$inject=["$scope","$element"];dP.prototype.l=function(){this.g&&xh(this.g,"propertychange",this.j,this);this.K=null};
dP.prototype.j=function(a){a=a.l;"features"!=a&&"featureVisibility"!=a&&"loading"!=a&&"visible"!=a&&"timeEnabled"!==a&&"timeFilter"!=a||this.K.html(hka(this))};function hka(a){try{if(a.g&&!a.g.Xa()){if(a.g.mb())return"(Loading...)";var b=a.g.l,c=a.g.fe().length,d=b.ux();return"("+(c==d?d:c+"/"+d)+")"}}catch(e){}return""};W.directive("layertype",[function(){return{restrict:"AE",replace:!0,template:"<span>{{layerType.getType()}}</span>",controller:eP,controllerAs:"layerType"}}]);function eP(a){this.v=a}eP.$inject=["$scope","$element"];eP.prototype.T=function(){if(O.get(["ui","layers","showLayerTypes"],!0)){var a=this.v.item;if(a&&(a=a.W()))return a.Nf()}return""};eP.prototype.getType=eP.prototype.T;W.directive("tileloading",[function(){return{restrict:"AE",replace:!0,template:"<span></span>",controller:fP,controllerAs:"tileLoading"}}]);function fP(a,b){this.K=b;this.g=null;"item"in a&&(b=a.item.W().O())&&b instanceof gP&&(this.g=b,I(this.g,"propertychange",this.j,this));this.K.html(this.ub());a.$on("$destroy",this.l.bind(this))}fP.$inject=["$scope","$element"];fP.prototype.l=function(){this.g&&xh(this.g,"propertychange",this.j,this);this.K=null};
fP.prototype.j=function(a){a.G&&(a=a.l,"tileCount"!=a&&"loading"!=a||this.K.html(this.ub()))};fP.prototype.ub=function(){try{if(this.g){var a=this.g.get("tileCount");if(null!=a)return"("+a+" In View)"}}catch(b){}return""};function HA(){jz.call(this);this.g=null}w(HA,jz);g=HA.prototype;g.J=function(){HA.C.J.call(this);this.Jh();this.ze(null)};g.aa=function(){var a=null,b=this.W();b instanceof MK&&(a=b.O().aa());return a};g.Ga=function(a){var b=this.na();if("both"!==a||b&&b.length){b=this.getState();HA.C.Ga.call(this,a);var c=this.getState();b!=c&&"both"!==a&&this.g&&this.g.Bd("off"!==c)}};g.W=function(){return this.g};
g.ze=function(a){if(a!==this.g){this.g&&xh(this.g,"propertychange",this.B,this);var b=this.g;if(this.g=a){I(a,"propertychange",this.B,this);this.ga(a.D());this.Da(a.S());var c=void 0;if(a instanceof PK)for(var d=a.g,e=0,f=d.length;e<f;e++)if(void 0===c)c=d[e].bd();else{if(c!=d[e].bd()){this.Ga("both");c=void 0;break}}else c=a.bd();void 0!==c&&this.Ga(c?"on":"off");this.j=a.Qd()}this.dispatchEvent(new U("layer",a,b))}};g.D=function(){return this.g?this.g.D():HA.C.D.call(this)};
g.ba=function(){return this.g?this.g.S():HA.C.D.call(this)};g.je=function(){var a="";if(this.g){a+=this.g.S();a+=this.getTags()?" "+this.getTags().join(" "):"";a+=" "+this.g.Qc();var b=V.Ja(this.g.D());b&&(a+=" "+b.je())}return a};g.getTags=function(){return this.g?this.g.getTags():null};g.Hc=function(){var a=null;this.g&&(a=this.g.td());return a?a:HA.C.Hc.call(this)};g.mb=function(){return this.g?this.g.mb():!1};HA.prototype.isLoading=HA.prototype.mb;
HA.prototype.B=function(a){if(a instanceof U)switch(a.l){case "loading":this.dispatchEvent(new U("loading",a.s,a.o));break;case "visible":this.Ga(a.o?"on":"off");this.dispatchEvent(new U("loading"));break;case "title":this.Da(this.g.S());this.dispatchEvent(new U("label"));break;case "colorModel":case "error":case "icons":case "lock":case DH:case "timeEnabled":this.dispatchEvent(new U("icons"))}};HA.prototype.lc=function(a){this.ze(a.W());HA.C.lc.call(this,a)};
HA.prototype.Gj=function(a){a=HA.C.Gj.call(this,a);var b=this.W();b instanceof PK?a+=" ("+this.W().rb()+")":(a+=" <layertype></layertype>",b instanceof MK?a+=" <featurecount></featurecount>":b instanceof HN&&(a+=" <tileloading></tileloading>"));return a};function hP(){HA.call(this);this.Z=!1;this.l=new le(this.UI,50,this)}w(hP,HA);g=hP.prototype;g.J=function(){this.l.dispose();hP.C.J.call(this)};g.getState=function(){var a=this.na();return a&&0!==a.length?hP.C.getState.call(this):"on"};
g.ze=function(a){var b=this.W(),c=null,d=HI.u();a!==b&&b&&(c=b.O(),xh(c,"addfeature",this.cw,this),xh(c,"removefeature",this.ew,this),d.M("propertychange",this.kx,!1,this),this.zc(null));hP.C.ze.call(this,a);a!==b&&a&&(c=a.O(),I(c,"addfeature",this.cw,this),I(c,"removefeature",this.ew,this),d.H("propertychange",this.kx,!1,this),a=HD(d).map(iP),c=c.Oa().filter(function(a){return!d.contains(a)&&!jP(a)}).map(iP),c=a.concat(c).filter(CA),c.sort(ika),this.zc(c))};
g.kx=function(a){var b=a.o;a=a.l;"add"===a||"add/edit"===a?this.ac(b):"remove"===a&&this.Fb(b)};g.cw=function(a){this.ac(a.feature)};g.ac=function(a){if(a&&!jP(a)){var b=!1,c=this.xj[""+a.D()]||null;if(c instanceof jF)c.cj(a),b=!0;else if(c instanceof zI)c.zf(a),b=!0;else if(c&&this.removeChild(c),c=iP(a))this.R(c),b=!0;b&&this.l.start()}};g.UI=function(){var a=this.na();a&&(a.sort(ika),this.dispatchEvent(new U("children",a,null)))};
function ika(a,b){if(a instanceof lF&&!(b instanceof lF))return-1;if(!(a instanceof lF)&&b instanceof lF)return 1;var c=Qb(a.ba()||"",b.ba()||"");0===c&&(c=Qb(a.D(),b.D()));return c}function iP(a){if(!jP(a)){var b=HI.u().contains(a)?new lF(a):new zI(a);b.ga(""+a.D());return b}return null}g.ew=function(a){this.Fb(a.feature)};g.Fb=function(a){var b=HI.u();!a||jP(a)||b.contains(a)||(a=this.xj[""+a.D()]||null)&&this.removeChild(a)};function jP(a){a=a.get("_node");return!(void 0===a||a)};function kP(a){MK.call(this,a);C.H("spatial:removeFeature",this.g,!1,this)}w(kP,MK);kP.prototype.Zo=function(){var a=new hP;a.collapsed=!0;a.ze(this);return a};kP.prototype.D=function(){return"draw"};kP.prototype.g=function(a){a=a.getContext();if(Ov(a.feature,"ol.Feature")){a=a.feature;var b=this.O();b&&ym(b,a.D())===a&&b.Fb(a)}};function lP(a){kn.call(this,a);this.l=0;this.s=this.j=null;if(a=mn(this))I(a,"add",this.Jm,this),I(a,"remove",this.Km,this)}w(lP,kn);g=lP.prototype;g.J=function(){lP.C.J.call(this);var a=mn(this);a&&(xh(a,"add",this.Jm,this),xh(a,"remove",this.Km,this))};g.Vp=function(a){var b=mn(this);b&&(xh(b,"add",this.Jm,this),xh(b,"remove",this.Km,this));a&&(I(a,"add",this.Jm,this),I(a,"remove",this.Km,this));lP.C.Vp.call(this,a)};g.Qc=function(){return this.s};g.Zd=function(a){this.s=a};
g.Jm=function(a){a.element instanceof sl&&this.dispatchEvent(new BA("addLayer",a.element))};g.Km=function(a){a.element instanceof sl&&this.dispatchEvent(new BA("removeLayer",a.element))};function mP(a){a=a?a:{};var b=document.createElement("DIV");b.className=void 0!==a.className?a.className:"ol-mouse-position";zn.call(this,{element:b,render:a.render?a.render:jka,target:a.target});I(this,Hh(nP),this.rE,this);a.coordinateFormat&&this.set(oP,a.coordinateFormat);a.projection&&this.xn(a.projection);this.L=void 0!==a.undefinedHTML?a.undefinedHTML:"";this.G=b.innerHTML;this.l=this.A=this.s=null}G(mP,zn);
function jka(a){a=a.frameState;a?this.s!=a.viewState.projection&&(this.s=a.viewState.projection,this.A=null):this.s=null;this.al(this.l)}g=mP.prototype;g.rE=function(){this.A=null};g.Wa=function(){return this.get(nP)};g.Ci=function(a){this.l=Dm(this.Y(),a);this.al(this.l)};g.rv=function(){this.al(null);this.l=null};g.setMap=function(a){zn.prototype.setMap.call(this,a);a&&(a=a.g,this.o.push(I(a,"mousemove",this.Ci,this),I(a,"mouseout",this.rv,this)))};g.xn=function(a){this.set(nP,Li(a))};
g.al=function(a){var b=this.L;if(a&&this.s){if(!this.A){var c=this.Wa();this.A=c?Mi(this.s,c):Yi}if(a=this.Y().cd(a))this.A(a,a),b=(b=this.get(oP))?b(a):a.toString()}this.G&&b==this.G||(this.G=this.element.innerHTML=b)};var nP="projection",oP="coordinateFormat";var pP=null;function kka(a){if("success"===a.type){var b=cof2Obj(a.target.g);pP=geoMagFactory(b)}Ma(a.target)}function lka(a,b,c){if("magnetic"==O.get("bearing.type","trueNorth")&&pP){a:{if(pP&&(b=Vi(b,N))){c=pP(b[1],b[0],3.28084*(b[2]||0),c);break a}c={}}a-=c.dec}return 0>a?360+a:a}function mka(a,b){b=void 0!==b?b:5;var c="trueNorth"==O.get("bearing.type","trueNorth")?"T":"M";return a.toFixed(null!=b?b:3)+"\u00b0 "+c};function nka(){tz.call(this);this.Da("Location Format");this.fb("Set Your Location Format");this.vb(["Latitude","Longitude"]);this.wc("fa fa-location-arrow");this.fd="location-setting"}w(nka,tz);W.directive("locationSetting",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/config/locationsettings.html",controller:qP,controllerAs:"locSet"}}]);
function qP(a){this.v=a;O.H("locationFormat",this.g,!1,this);this.format=O.get("locationFormat","deg");this.v.$watch("locSet.format",this.update.bind(this));this.v.$on("$destroy",this.j.bind(this))}qP.$inject=["$scope"];qP.prototype.j=function(){O.M("locationFormat",this.g,!1,this)};qP.prototype.g=function(a){a&&"string"==typeof a.j&&a.j!==a.s&&(this.format=a.j,X(this.v))};qP.prototype.update=function(a,b){O&&a&&b&&a!==b&&O.set("locationFormat",a)};qP.prototype.update=qP.prototype.update;function rP(a){a=a||{};a.undefinedHTML="No coordinate";mP.call(this,a);this.Ic="deg";this.j=oka;this.g=null;a&&a.QN&&(O.H("locationFormat",this.Hx,!1,this),this.Ic=O.get("locationFormat","deg"));sP(this,this.Ic);this.B=null;this.element&&(this.B=Yd(this.element,"click",this.gI,!1,this));$z.u().H("propertychange",this.Pw,!1,this);O.H("bearing.type",this.Gx,!1,this)}w(rP,mP);
var oka={deg:function(a){if(!a)return"No coordinate";var b=Ku(Ir(a[0]),!0,5);a=Ku(a[1],!1,5);10>b.length&&(b="+"+b);9>a.length&&(a="+"+a);return a+", "+b+" (DD)"},dms:function(a){return(Lu(a[1],!1,!1)+" "+Lu(Ir(a[0]),!0,!1)+" (DMS)").replace(/\u00b0/g,"&deg;")},ddm:function(a){return(Mu(a[1],!1,!1)+" "+Mu(Ir(a[0]),!0,!1)+" (DDM)").replace(/\u00b0/g,"&deg;")},mgrs:function(a){return osasm.toMGRS(a)+" (MGRS)"}};g=rP.prototype;
g.J=function(){O.M("locationFormat",this.Hx,!1,this);this.B&&(ee(this.B),this.B=null);$z.u().M("propertychange",this.Pw,!1,this);O.M("bearing.type",this.Gx,!1,this);rP.C.J.call(this)};g.Hx=function(a){a&&"string"==typeof a.j&&sP(this,a.j)};g.Pw=function(){sP(this,this.Ic)};function sP(a,b){b in a.j||(b="deg");a.set(oP,a.j[b]);b!==a.Ic&&(a.Ic=b,-1<mc(Ofa).indexOf(a.Ic)&&O.set("locationFormat",a.Ic));a.g&&rP.C.Ci.call(a,a.g)}g.Ci=function(a){rP.C.Ci.call(this,a);this.g=a};
g.al=function(a){var b=this.Y();b&&0>=ll(M(b))[1]&&rP.C.al.call(this,a)};g.rv=function(){};g.gI=function(){var a=nc(this.j),b=a.indexOf(this.Ic);b>a.length&&(b=0);sP(this,a[b+1]);this.g&&rP.C.Ci.call(this,this.g)};g.Gx=function(){this.g&&this.Ci(this.g)};g.tb=function(){return this.element};function tP(a){Iy.call(this,a);this.title="Add Layer"}w(tP,Iy);tP.prototype.Fa=function(){return Jy(this)&&(this.state="executing",this.add(this.g))?(this.state="success",!0):!1};tP.prototype.Cb=function(){this.state="reverting";return this.remove(this.g)?(this.state="ready",!0):!1};function pka(a){this.j=N;this.g=Li(a)}g=pka.prototype;g.state="ready";g.lb=!1;g.title="Switch map view";g.Ba=null;function qka(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.j?a.g?!0:(a.state="error",a.Ba="New projection is not defined",!1):(a.state="error",a.Ba="Old projection is not defined",!1)}
g.Fa=function(){if(qka(this)){this.state="executing";var a=T.u(),b=rka(this.g);if(a.ha){var c=M(a.ha);c&&xh(c,"propertychange",a.Cm,a);a.ha.set("view",b);b&&I(b,"propertychange",a.Cm,a)}this.state="success";return!0}return!1};function rka(a){var b=M(T.u().Y()),c=$k(b);c&&(c=Ui(c,b.Wa(),a));if(b=b.ab())var d=cu(b,N);N=a;hm(N,42,[512,512]);eu=du(25,N);fu=du(2,N);O.set("baseProjection",N.Tb);c&&!Xh(N.aa(),c)&&(d=c=void 0);return new Yk({projection:N,center:c||[0,0],zoom:d||3,minZoom:2,maxZoom:25})}
g.Cb=function(){this.state="reverting";var a=T.u().Y(),b=rka(this.j);a.set("view",b);this.state="ready";return!0};function uP(a,b){this.source=a;this.target=b}g=uP.prototype;g.state="ready";g.lb=!1;g.title="Transform all vectors";g.Ba=null;function ska(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.source?a.target?!0:(a.state="error",a.Ba="Target projection is not defined",!1):(a.state="error",a.Ba="Source projection is not defined",!1)}g.Fa=function(){if(ska(this)){this.state="executing";var a=Li(this.source),b=Li(this.target);a&&b&&this.transform(a,b);this.state="success";return!0}return!1};
g.transform=function(a,b){var c=pw(T.u());a=tka.bind(null,a,b);b=0;for(var d=c.length;b<d;b++){var e=c[b];if(e instanceof wl&&(e=e.O())){var f=e.Oa();if(f.length){e.clear(!0);for(var h=[],k=0,l=f.length;k<l;k++){var m=f[k].X();if(m){h.push(m);var n=f[k].get("_originalGeometry");n!==m&&h.push(n)}h.push(f[k].get("ellipse"));h.push(f[k].get("lineOfBearing"));if(m=f[k].Qb()){q(m)||(m=[m]);n=0;for(var p=m.length;n<p;n++)h.push(m[n].X())}}h.forEach(a);e.Nc(f)}}}};
function tka(a,b,c){c&&c instanceof kj&&(c.transform(a,"EPSG:4326"),Qu(c),c.transform("EPSG:4326",b))}g.Cb=function(){this.state="reverting";var a=Li(this.source),b=Li(this.target);a&&b&&this.transform(b,a);this.state="ready";return!0};function vP(){A.call(this);this.ma="";this.Fc=this.g=this.De=this.df=this.j=this.Ca=this.cf=null;this.od=this.sg=this.U=this.P=NaN;this.gd=this.af=this.B=this.jb=!1;this.be=null;this.Oc="base";this.Me=null;this.log=uka}w(vP,A);P(vP,"os.data.IDataDescriptor");var uka=E.V("os.data.BaseDescriptor");vP.prototype.D=function(){return this.ma};vP.prototype.getId=vP.prototype.D;g=vP.prototype;g.ga=function(a){this.ma=a};g.mh=function(){return[this.D()]};g.rb=function(){return this.cf};
g.Cc=function(a){this.cf=a};g.Jj=function(){if(this.Me)return this.Me;var a=V,b=this.D();return b&&(b=b.split("#"),b.length)?a.rb(b[0]):null};g.S=function(){return this.j};vP.prototype.getTitle=vP.prototype.S;g=vP.prototype;g.Ta=function(a){var b=this.j;this.j=a;this.dispatchEvent(new U("title",a,b))};g.Go=function(){return null};g.Pl=function(){return this.T()};g.T=function(){return this.df};g.Sb=function(a){this.df=a};g.getColumns=function(){return this.g};g.setColumns=function(a){this.g=a};
g.La=function(){return this.De};g.Vc=function(a){this.De=a};g.qb=function(){return this.Fc};vP.prototype.getDescription=vP.prototype.qb;g=vP.prototype;g.td=function(){return null};g.fb=function(a){this.Fc=a};g.Of=function(){return this.P};g.Qj=function(){return this.U};g.isActive=function(){return this.jb};
g.setActive=function(a){if(this.isActive()!==a){this.jb=a;try{this.eg()&&wP(this)}catch(b){E.error(this.log,"Error setting descriptor activation state",b),this.jb=!1,wP(this)}this.dispatchEvent(new U("active",a,!a))}};g.eg=function(){return!0};function wP(a){a.isActive()&&(a.od=Ha());var b=a.isActive()?"descriptor.activate":"descriptor.de-activate";Q(R.u(),b+"."+a.Oc,1);b=a.isActive()?"descriptorActivated":"descriptorDeactivated";a.dispatchEvent(b);C.dispatchEvent(new lA(b,a))}g.clearData=function(){};
g.isLocal=function(){return this.gd};g.mb=function(){return this.af};g.Va=function(a){this.af=a};g.getTags=function(){return this.be};g.vb=function(a){this.be=a};g.je=function(){var a=this.getTags();return this.S()+" "+this.T()+" "+this.qb()+" "+this.rb()+(a&&a.length?a.join(" "):"")};g.Qd=function(){return""};g.yh=function(){return!1};
g.sa=function(a){a||(a={});a.id=this.D();a.provider=this.rb();a.providerType=this.Ca;a.title=this.S();a.type=this.T();a.color=this.La();a.description=this.qb();a.maxDate=this.Of();a.minDate=this.Qj();a.lastActive=this.od;a.deleteTime=this.sg;a.tags=this.getTags();a.dType=this.Oc;a.active=this.isActive();if(this.g&&0<this.g.length)try{for(var b=[],c=0,d=this.g.length;c<d;c++)this.g[c].temp||b.push(this.g[c].sa());a.columns=b}catch(e){}return a};
g.restore=function(a){this.ga(a.id);this.Cc(a.provider);this.Ca=a.providerType;this.Ta(a.title);this.Sb(a.type);this.Vc(a.color);this.fb(a.description);this.P=a.maxDate||NaN;this.U=a.minDate||NaN;this.od=a.lastActive||NaN;this.sg=a.deleteTime||NaN;this.vb(a.tags);this.B=a.active;if((a=a.columns)&&0<a.length)try{for(var b=[],c=0,d=a.length;c<d;c++){var e=new FF;e.restore(a[c]);b.push(e)}this.setColumns(b)}catch(f){}};
function vka(a){var b="Layer Name: "+a.S()+"<br>",c=a.rb();c&&(b+="Provider: "+c+"<br>");c=a.T()||"";Jb(c,"s")&&(c=c.substring(0,c.length-1));c&&(b+="Type: "+c+"<br>");if(!isNaN(a.Qj())&&!isNaN(a.Of())){c=new Mv;c.g.setTime(a.Qj());var d=new Mv;d.g.setTime(a.Of());b+="Time: "+c.Vh(!0,!0)+" to "+d.Vh(!0,!0)+"<br>"}c=a.qb();b=b+"<br>"+((c?c:"No description provided")+"<br><br>")+("Tags: "+(a.getTags()?a.getTags().join(", "):"(none)"));return b+"<br><br>"}
g.Xh=function(){!0===this.B&&Hc(this.setActive.bind(this,this.B));this.B=void 0};function wka(a,b){return Ob(a.S(),b.S())}function xka(a,b){return isNaN(b.od)&&isNaN(a.od)?0:isNaN(b.od)&&!isNaN(a.od)?1:!isNaN(b.od)&&isNaN(a.od)?-1:Bb(b.od,a.od)};function xP(){A.call(this);this.g=!1;this.init()}w(xP,A);wa(xP);xP.prototype.init=function(){this.g=navigator.onLine;window.addEventListener("online",this.j.bind(this));window.addEventListener("offline",this.j.bind(this))};xP.prototype.j=function(a){a&&"online"==a.type?(this.g=!0,C.dispatchEvent("online")):"offline"==a.type&&(this.g=!1,C.dispatchEvent("offline"))};xP.prototype.Ie=function(){return this.g};
function yka(a){var b=navigator.onLine;if(a.g!=b){var c=new Event(b?"online":"offline");a.j(c)}a.g=b;return a.g};function SK(){vP.call(this);this.log=zka;this.layers=[];this.Z=[];this.A={};this.hd=xP.u();C.H("addLayer",this.mx,!1,this);C.H("removeLayer",this.nx,!1,this)}w(SK,vP);var zka=E.V("os.data.LayerSyncDescriptor"),Aka=["opacity","contrast","brightness","saturation"],Bka=["minResolution","maxResolution"];function Cka(a){return a.id||""}g=SK.prototype;g.J=function(){SK.C.J.call(this);C.M("addLayer",this.mx,!1,this);C.M("removeLayer",this.nx,!1,this);Dka(this)};function yP(a,b){a.Z=(b||zP(a)).map(Cka)}
function zP(a){var b=a.Sa();return b?(q(b)||(b=[b]),b.map(a.PB,a)):b}g.eg=function(){if(this.isActive()){var a=zP(this);yP(this,a);if(a)for(var b=0;b<a.length;b++){var c=a[b],d=c.id||"";d&&((d=T.u().W(d))?Eka(this,d):(d=lw(c))&&Ky(T.u(),d))}}else Dka(this);Fka(this);return!0};function Eka(a,b){-1===a.layers.indexOf(b)&&(I(b,"propertychange",a.Ah,a),a.layers.push(b),a.setActive(!0))}
g.pc=function(a){if(-1<this.layers.indexOf(a)){var b=AP(this);nc(b).forEach(function(a){zs(this.A[a],b[a],!0)},this);xh(a,"propertychange",this.Ah,this);qb(this.layers,a)}this.layers.length||this.setActive(!1)};g.mx=function(a){"string"!==typeof a.layer&&(a=a.layer,this.Z.length||yP(this),-1<this.Z.indexOf(a.D())&&Eka(this,a))};g.nx=function(a){"string"!==typeof a.layer&&(a=a.layer,this.Z.length||yP(this),-1<this.Z.indexOf(a.D())&&-1<this.layers.indexOf(a)&&this.pc(a))};
function Dka(a){a.A=AP(a);for(var b=a.layers.length-1;0<=b;b--){var c=a.layers[b];c&&T.u().pc(c)}a.Va(!1)}g.PB=function(a){var b={};zs(a,b,!0);this.A&&(a=a.id)&&a in this.A&&zs(this.A[a],b,!0);return b};var Gka=[DH,"refreshInterval","timeEnabled","visible"];g=SK.prototype;g.Ah=function(a){a instanceof U?(a=a.l||"","loading"==a?Fka(this):-1<Gka.indexOf(a)?this.zm():BP(this)):a instanceof Jh&&(-1<Aka.indexOf(a.key)?this.zm():-1<Bka.indexOf(a.key)&&BP(this))};
function Fka(a){var b=a.layers;if(b)for(var c=0,d=b.length;c<d;c++)if(b[c].mb()){a.Va(!0);return}a.Va(!1)}g.zm=function(){BP(this)};function BP(a){a.A=AP(a);V.Hr()}g.sa=function(a){a||(a={});a.layer=AP(this);return SK.C.sa.call(this,a)};g.restore=function(a){this.A=a.layer||{};SK.C.restore.call(this,a)};function AP(a){var b={};a=a.layers;for(var c=0,d=a.length;c<d;c++)b[a[c].D()]=a[c].sa();return b}g.Qd=function(){return"<defaultlayernodeui></defaultlayernodeui>"};var CP=!0,DP=null;
function Hka(a){var b=EP.u();if(!a.title||0===a.title.indexOf("Switch projection"))return!0;if(a instanceof nF){var c=a.Xe,d=!DP;d&&(DP=a);a=!0;for(var e=0,f=c.length;e<f&&a;e++)a=Hka(c[e]);d&&(DP=null);return a}c=null;a instanceof tP?c=a.g:a instanceof FP&&(a=a.Ja(),a instanceof SK&&(c=zP(a)));var h=!0;c&&(c=q(c)?c:[c],c.forEach(function(a){var c=a.projections||[];!c.length&&a.projection&&c.push(a.projection);if(c.length){var d=N;e=0;for(f=c.length;e<f;e++){var k=Li(c[e]);if(k&&(CP||Wi(d,k))){h=
!0;return}}b.start(c[0]);b.o.push(a);h=!1}}));return h}function GP(){this.l=new le(this.j,500,this);this.g=[]}wa(GP);GP.prototype.j=function(){var a=1<this.g.length;a="The tile layer"+(a?"s ":" ")+this.g.join(", ")+(a?" are":" is")+" being locally re-projected because the remote services do not support the current projection.";At(zt.u(),a,ss);this.g.length=0};function EP(){A.call(this);this.s=new le(this.ZL,200,this);this.l=[];this.o=[];this.g=this.j=null}w(EP,A);wa(EP);g=EP.prototype;
g.start=function(a){this.j||(this.j=N);!this.g&&(a=Li(a))&&(this.g=a);this.j&&this.g&&this.s.start()};
g.ZL=function(){var a=Ika(this),b=this.g.Tb,c="<p>You have attempted to "+(this.l.length?"enable layers that are in a different projection":"change projections")+"</p><ul><li>Current Projection: "+this.j.Tb+"</li><li>New Projection: "+b+"</li></ul>";c+="<p>Switching to the new projection will cause the following actions:</p>";var d=a.add.slice();d=[{title:"removed",layers:a.remove},{title:"added",layers:d},{title:"reconfigured",layers:a.Dk}];for(var e=0,f=d.length;e<f;e++){var h=d[e].title,k=d[e].layers;
k.length&&(k=k.map(Jka),c+="<p>These layers will be <strong>"+h+"</strong></p><ul><li>"+k.join("</li><li>")+"</li></ul>")}"EPSG:4326"!=b&&"EPSG:3857"!=b&&T.u().Qa()&&(c+="<p>The 3D view does not support the new projection. The view will be switched to 2D.</p>");cK({confirm:this.pL.bind(this,a),cancel:this.aC.bind(this),prompt:c,yesText:"Switch",yesIcon:"fa fa-exchange",windowOptions:{label:this.l.length?"Differing Projections":"Projection Change",icon:"fa fa-warning",x:"center",y:"center",width:"500",
"min-width":"300","max-width":"600",height:"auto",modal:"true",headerClass:"bg-warning u-bg-warning-text"}})};g.aC=function(){for(var a=V,b=0,c=this.l.length;b<c;b++){var d=a.Ja(this.l[b].D());d&&d.setActive(!1);this.l[b].dispose()}this.clear()};
g.pL=function(a){var b=[];if(this.j&&this.g){var c=T.u().Qa();c&&b.push(new Oy(!1,!0));HP(a.remove,!0,b);HP(a.Dk,!0,b);b.push(new pka(this.g));b.push(new uP(this.j,this.g));HP(a.Dk,!1,b);HP(a.add,!1,b);c&&b.push(new Oy(c,!0));this.dispatchEvent(new Kka(b));a=hF.u();c=new oF;c.title="Switch projection from "+this.j.Tb+" to "+this.g.Tb;c.Zb(b);gF(a,c)}this.clear()};
function HP(a,b,c){var d=[];b||a.reverse();for(var e=0,f=a.length;e<f;e++){var h=b?new Ly(a[e]):new tP(a[e]);d.push(h)}d.length&&(h=new oF,h.Zb(d),c.push(h))}g.clear=function(){this.l.length=0;this.o.length=0;this.g=this.j=null};function Jka(a){return a.title}
function Ika(a){for(var b=pw(T.u()),c={remove:[],ZR:[],Dk:[],add:a.l.map(function(a){return a.Sa()}).concat(a.o)},d=b.length;d--;){var e=b[d],f=e.Sa();if(e instanceof ul&&P(e,"os.layer.ILayer"))if(e=f.projections||[],!e.length&&f.projection&&e.push(f.projection),e.length){for(var h=!1,k=0,l=e.length;k<l;k++){var m=Li(e[k]);if(m&&(CP||Wi(m,a.g))){c.Dk.push(f);h=!0;break}}h||c.remove.push(f)}else c.Dk.push(f)}a.dispatchEvent(new Lka(c));return c}function Lka(a){z.call(this,"load");this.layers=a}
w(Lka,z);function Kka(a){z.call(this,"submit");this.j=a}w(Kka,z);var Mka={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:"semicolon",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",
93:"context",96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",186:"semicolon",187:"equals",189:"dash",188:",",190:".",191:"/",192:"`",219:"open-square-bracket",220:"\\",221:"close-square-bracket",222:"single-quote",224:"win"};W.directive("controlshelp",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/help/controls.html",controller:IP,controllerAs:"controlsHelp"}}]);function IP(){var a=JP.u().g;Ab(a,function(a,b){return a.order>b.order?1:a.order<b.order?-1:0});var b=a.length/2+1;this.controls={left:xb(a,0,b),right:xb(a,b,a.length)}}IP.$inject=["$scope"];IP.prototype.getKey=function(a){return 91===a&&De()?"Command":ec(Mka[a])};IP.prototype.getKey=IP.prototype.getKey;
IP.prototype.mD=function(a){return(a=Nka[a])?a:null};IP.prototype.getMouse=IP.prototype.mD;IP.prototype.Ge=function(a){return KP[a]?KP[a].font:null};IP.prototype.getFont=IP.prototype.Ge;IP.prototype.gD=function(a){return KP[a]?KP[a]["class"]:null};IP.prototype.getFontClass=IP.prototype.gD;function JP(){this.g=[]}wa(JP);
var Nka={LEFT_MOUSE:"v1542394219/images/MouseLeft.png",MIDDLE_MOUSE:"v1542394219/images/MouseMiddle.png",RIGHT_MOUSE:"v1542394219/images/MouseRight.png"},KP={HORIZONTAL:{font:"fa fa-arrows-h","class":"control-drag"},VERTICAL:{font:"fa fa-arrows-v","class":"control-drag"},ALL:{font:"fa fa-arrows","class":"control-drag"},LEFT:{font:"fa fa-long-arrow-left","class":"control-key"},RIGHT:{font:"fa fa-long-arrow-right","class":"control-key"},UP:{font:"fa fa-long-arrow-up","class":"control-key"},DOWN:{font:"fa fa-long-arrow-down",
"class":"control-key"}};function LP(a,b,c,d,e,f){var h=ib(a.g,function(a){return a.section==b});h||(h={section:b,order:c,controls:[]},a.g.push(h));h.controls.push({text:d,keys:e,other:f})};W.directive("webglperfcaveat",[function(){return{restrict:"E",templateUrl:"v1542394219/views/help/webglperfcaveat.html"}}]);W.directive("webglsupport",[function(){return{restrict:"E",replace:!0,link:Oka,templateUrl:"v1542394219/views/help/webglsupport.html"}}]);function Oka(a){a.$emit("window.ready")}
function Pka(){var a={hideCancel:!0};a.appName=ws("the application");a.supportText=xs("your system administrator");od&&11==xd?a.showIEHelp=!0:qd&&Bd(10)?a.showFFHelp=!0:rd&&Bd(28)&&(a.showGCHelp=!0);cK({prompt:"<webglsupport></webglsupport>",windowOptions:{label:"3D Globe Not Supported",headerClass:"bg-warning u-bg-warning-text",icon:"fa fa-frown-o",x:"center",y:"center",width:525,"min-width":300,"max-width":1E3,height:"auto","min-height":200,"max-height":1E3,modal:!0}},a)};W.directive("copyPosition",[function(){return{restrict:"AE",replace:!0,scope:{value:"="},templateUrl:"v1542394219/views/plugin/position/positionplugin.html",controller:MP,controllerAs:"copyPosition"}}]);function MP(a,b){y.call(this);this.K=b;this.g=new Lg(document);this.g.H("key",this.j,!1,this);a.$emit("window.ready");a.$on("$destroy",this.l.bind(this))}w(MP,y);MP.$inject=["$scope","$element"];MP.prototype.l=function(){Ma(this.g);this.K=null};MP.prototype.close=function(){KE(this.K)};
MP.prototype.j=function(a){13==a.keyCode&&this.close()};function T(){A.call(this);this.ha=null;this.g=void 0;this.o=!1;this.A=this.l=void 0;this.L=new le(this.yE,500,this);this.G=this.B=this.j=this.s=null;this.I=new Tg;this.N=!1;C.H("zoom",this.Ww,!1,this);C.H("resetView",this.pn,!1,this);C.H("resetRotation",this.Kk,!1,this);C.H("toggleView",this.Ow,!1,this);C.H("removeLayer",this.Dw,!1,this);C.H("map:render",this.render,!1,this);C.H("map:renderSync",this.Xw,!1,this);O.H("bgColor",this.Hw,!1,this)}w(T,A);wa(T);
(function(){for(var a=["ms","moz","webkit","o"],b=0,c;c=a[b]&&!qa.requestAnimationFrame;++b)qa.requestAnimationFrame=qa[c+"RequestAnimationFrame"],qa.cancelAnimationFrame=qa[c+"CancelAnimationFrame"]||qa[c+"CancelRequestAnimationFrame"];if(!qa.requestAnimationFrame){var d=0;qa.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-d));d=b+c;return qa.setTimeout(function(){a(b+c)},c)};qa.cancelAnimationFrame||(qa.cancelAnimationFrame=function(a){clearTimeout(a)})}})();
var NP=E.V("os.MapContainer");g=T.prototype;
g.J=function(){Ma(this.I);this.I=null;Ma(this.L);this.L=null;Ma(this.s);this.s=null;if(this.ha){var a=M(this.ha);a&&xh(a,"propertychange",this.Cm,this);this.ha.dispose();this.ha=null}C.M("zoom",this.Ww,!1,this);C.M("resetView",this.pn,!1,this);C.M("resetRotation",this.Kk,!1,this);C.M("toggleView",this.Ow,!1,this);C.M("removeLayer",this.Dw,!1,this);C.M("map:render",this.render,!1,this);C.M("map:renderSync",this.Xw,!1,this);O.M("bgColor",this.Hw,!1,this);T.C.J.call(this)};
function Yu(a){a.g?(a=a.g,a=a.Kb?a.Kb.s:void 0):a=void 0;return a}g.Hw=function(a){switch(a.type){case "bgColor":a=a.j,wv(a)&&Qka(a)}};function ev(a){return a.ha?a.ha.aa():Th()}g.Cm=function(){this.L.start()};g.yE=function(){if("last"==O.get("os.map.cameraMode"))try{var a=Oz(this);O.set("os.map.cameraState",JSON.stringify(a))}catch(b){E.error(NP,"Error persisting camera state:",b)}GM();this.dispatchEvent("map:viewChange")};g.render=function(){var a=this.Y();a&&a.render()};
g.Xw=function(){var a=this.Y();a&&xn(a)};g.Ve=function(){this.ha&&(wh(this.ha,"postrender",function(){var a=this.ha;Xy(function(){a.Ve();C.dispatchEvent("map:glRepaint")})},this),this.ha.setSize([0,0]),C.dispatchEvent("map:glRepaint"))};g.Y=function(){return this.ha};function Rka(a){return a instanceof ul}function OP(a){return a instanceof wl&&!Ska(a)}function Ska(a){return a instanceof PP||a instanceof MK&&"Image"===a.Qc()}
function Tka(){var a=T.u();a.Qa()?(a=Yu(a))&&a.A&&a.g&&a.g.cancelFlight():(a=(a=a.Y())?M(a):void 0)&&hl(a)}
function QP(a,b){var c=a.Y();if(c){Q(R.u(),"map.features.flyTo",1);c=M(c);var d=b.destination||b.center||$k(c),e=b.duration||1E3;if(a.Qa()){if(c=Yu(a))void 0===b.altitude&&void 0!==b.zoom&&(b.altitude=c.ci(Nz(a,b.zoom),si(d[1])),delete b.zoom),RP(c,b)}else d={center:d,duration:e},void 0!==b.zoom?d.zoom=Je(b.zoom,2,25):b.positionCamera||void 0===b.range?void 0!==b.altitude&&(a=hu(a.Y(),b.altitude,0),d.resolution=Je(a,eu,fu)):(a=hu(a.Y(),b.range,0),d.resolution=Je(a,eu,fu)),"smooth"===b.flightMode&&
(d.easing=sk),c.animate(d)}}
g.oi=function(a,b,c){if(a&&-1!=a.indexOf(Infinity)||-1!=a.indexOf(-Infinity))E.za(NP,"Attempted to fly to infinite extent.");else{var d=this.Y();if(d){Q(R.u(),"map.features.flyToExtent",1);var e=M(d);if(a)if(a=a.slice(),b&&0<b?mi(a,b):.025>gi(a)&&.025>hi(a)&&(a=Vh(a,.025)),this.Qa()){b=Yu(this);var f=vn(d);b&&f&&(d=ii(a),a=nl(e,a,f),null!=c&&(c=Math.min(c,Pz(this,a)),a=Nz(this,c)),c=b.ci(a,0),RP(b,{center:d,altitude:c,duration:1E3}))}else b=Vi($k(e).slice(),N),a=Zi(a,N,"EPSG:4326"),a[0]=Ir(a[0],b[0]-
180,b[0]+180),a[2]=Ir(a[2],b[0]-180,b[0]+180),a[2]<a[0]&&(a[2]+=360),a=Zi(a,"EPSG:4326",N),pl(e,a,{duration:1E3,maxZoom:c,constrainResolution:!0})}}};g.Ww=function(a){try{var b=a.getContext(),c=null!=b.feature?void 0:-1;q(b)||(b=[b]);var d=b.reduce(Yfa,Th());fi(d)||gF(EF,new dv(d,void 0,c))}catch(e){E.error(NP,"Zoom action failed:",e)}};
g.pn=function(){var a=M(this.Y());gl(a,0);cl(a,au);fl(a,a.constrainResolution(a.o,3-a.s,0));this.Qa()&&(a=Yu(this))&&(a.An(0),a.Lh());Q(R.u(),"map.features.resetView",1)};function Uka(a){a.Qa()&&(a=Yu(a))&&a.An(0);Q(R.u(),"map.features.resetTilt",1)}function Vka(a){a.Qa()?(a=Yu(a))&&a.Fz(0):gl(M(a.Y()),0);Q(R.u(),"map.features.resetRoll",1)}g.Kk=function(){Uka(this);Vka(this);Q(R.u(),"map.features.resetRotation",1)};g.LC=function(){document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur()};
g.init=function(){for(var a=Zt(),b=0,c=a.length;b<c;b++){var d=a[b].code,e=a[b].proj4;if(d&&e&&(proj4.defs(d,e),e=Li(d))){var f=e,h=!!a[b].isGlobal;f.j=h;f.g=!(!h||!f.l);(f=a[b].extent)&&e.Ac(f);if(f=a[b].worldExtent)e.Sn=f;Qi(Ei,[e],Xi("EPSG:4326",d),Xi(d,"EPSG:4326"));Qi(Bi,[e],Xi("EPSG:3857",d),Xi(d,"EPSG:3857"))}}hF.u().G.push(Hka);lD(O.get("interpolation"));this.j=new kP({source:new tm});this.j.Ta("Drawing Layer");this.j.ga("draw");this.j.Cc(ws()||null);this.j.yb(rH(nH.u(),$B));this.j.Zd("Reference Layers");
this.j.ye("");this.j.hg(!1);this.j.Bf("");this.j.gg("");this.j.P=!0;this.j.Pk("draw");this.j.yf=va;a=new lP;a.l=-2;a.j=Rka;a.Zd("Tile Layers");b=new lP({layers:[this.j]});b.j=OP;b.Zd("Feature Layers");c=new lP({hidden:!0});c.j=Ska;c.Zd("Image");d=new lP;d.l=100;d.Zd("Reference Layers");N=Li(O.get("baseProjection",N.Tb));hm(N,42,[512,512]);eu=du(25,N);fu=du(2,N);CP=O.get("enableReprojection",!0);e=new Yk({projection:N,center:au,zoom:3,minZoom:2,maxZoom:25});this.ha=new Xu({controls:this.B?this.B():
void 0,interactions:this.G?this.G():void 0,layers:new Kh([a,b,d,c]),loadTilesWhileAnimating:!0,renderer:"canvas",target:"map-container",view:e,keyboardEventTarget:document});I(e,"propertychange",this.Cm,this);window.pfc=this.ha.Vd.bind(this.ha);window.cfp=this.ha.cd.bind(this.ha);window.fte=this.oi.bind(this);this.I.H("resize",this.Ve,!1,this);Hc(this.Ve,this);a=this.Y().g;Yd(a,"contextmenu",zA,!0);Yd(a,"click",this.LC,!1,this);a=O.get("bgColor","#000000");Qka(a);this.dispatchEvent("map:ready");Wka(this);
a=JP.u();LP(a,"General Map Controls",1,"Draw Geometry",[16,"+"],["LEFT_MOUSE","+","ALL"]);LP(a,"General Map Controls",1,"Context Menu",null,["RIGHT_MOUSE"]);LP(a,"General Map Controls",1,"Reset View",[86]);LP(a,"General Map Controls",1,"Reset Rotation",[82]);LP(a,"General Map Controls",1,"Copy Coordinates",[190]);LP(a,"Map Movement Controls",2,"Pan View",null,["LEFT_MOUSE","+","ALL"]);LP(a,"Map Movement Controls",2,"Pan View",null,"LEFT or RIGHT or UP or DOWN".split(" "));LP(a,"Map Zoom Controls",
3,"Zoom to Box",[17,"+"],["LEFT_MOUSE","+","ALL"]);LP(a,"Map Zoom Controls",3,"Smooth Zoom In/Out",[17,"+"],["RIGHT_MOUSE","+","VERTICAL"]);LP(a,"Map Zoom Controls",3,"Zoom About Mouse",null,["Mouse Wheel"]);LP(a,"Map Zoom Controls",3,"Zoom In",null,["Double Left Click"]);LP(a,"Map Zoom Controls",3,"Zoom Out",[17,"+"],["Double Left Click"]);LP(a,"Map Zoom Controls",3,"Large Zoom In/Out",[33,"or",34]);LP(a,"Map Zoom Controls",3,"Zoom In/Out",null,"+ / = or - / _".split(" "));this.yc()&&!SP(this)&&
(a=JP.u(),LP(a,"3D Controls",4,"Tilt Globe",null,["MIDDLE_MOUSE","or","RIGHT_MOUSE","+","VERTICAL"]),LP(a,"3D Controls",4,"Roll Globe",null,["MIDDLE_MOUSE","or","RIGHT_MOUSE","+","HORIZONTAL"]),LP(a,"3D Controls",4,"Tilt Globe",[16,"+"],["UP","or","DOWN"]),LP(a,"3D Controls",4,"Roll Globe",[16,"+"],["LEFT","or","RIGHT"]),LP(a,"3D Controls",4,"Reset Roll",[78]),LP(a,"3D Controls",4,"Reset Tilt",[85]));Xs("pos",Xka);Xs("extent",Yka);Xs("extent2",Zka)};
function $ka(a,b){if(a=(a=a.ha?a.ha.g:void 0)?a.querySelector("canvas"):void 0)a.style.visibility=b?"":"hidden"}function Wka(a){if(Wda&&Rfa){O.H("os.map.mapMode",a.FJ,!1,a);var b=O.get("os.map.mapMode","3d");"3d"===b||"auto"===b?($ka(a,!1),ad(Sy(a,!0,!0),function(){$ka(this,!0);ala(this)},a)):ala(a)}}function ala(a){var b=O.get("os.map.cameraState");if(b)try{b=JSON.parse(b)}catch(c){E.error(NP,"Failed restoring camera state:",c),b=void 0}b&&TP(a,b)}
g.FJ=function(a){"string"===typeof a.j?(a=a.j,a="3d"===a||"auto"===a?!0:!1,a!=this.Qa()&&Sy(this,a)):E.ib(NP,"Unrecognized map mode change value: "+a.j)};
g.Ow=function(){if(!this.o){var a=!this.Qa();if(a&&SP(this)){var b=O.get("webgl.performanceCaveat.preventOverride",!1)?void 0:this.lL.bind(this);b={confirmCallback:va,cancelCallback:b||va,hideCancel:!b,supportLink:O.get("webgl.performanceCaveat.supportLink"),yesText:"Got it!",yesIcon:"fa fa-thumbs-up",yesButtonTitle:"Cancel and continue using 2D.",yesButtonClass:"btn-primary",noText:"Use 3D",noIcon:"fa fa-warning",noButtonTitle:"Switch to 3D, but you may experience poor performance on this browser.",
noButtonClass:"btn-danger"};b.appName=ws("the application");b.supportText=xs("your system administrator");FE({label:"3D Globe Performance Issue",icon:"fa fa-frown-o",x:"center",y:"center",width:"425","min-width":"300","max-width":"600",height:"200","min-height":"200","max-height":"500",modal:"true"},"<confirm><webglperfcaveat></webglperfcaveat></confirm>",void 0,void 0,void 0,b)}b=N.Tb;a&&"EPSG:4326"!==b&&"EPSG:3857"!==b||(a=new Oy(a),gF(hF.u(),a))}};g.lL=function(){this.N=!0;Sy(this,!0)};
g.HM=function(){O.set("os.map.mapMode",this.Qa()?"3d":"2d")};function Oz(a){if(a.Qa()){var b=Yu(a);if(b)return b.sa()}var c=M(a.Y());b=$k(c)||au;"EPSG:4326"!=N&&(b=Vi(b,N),b[0]=Ir(b[0]));var d=c.ab(),e=vn(a.Y());e=gu([e[0],e[1]],d);a=Pz(a,d,1);c=180*(al(c)||0)/Math.PI;return{center:b,altitude:e,heading:c,roll:0,tilt:0,zoom:a}}function TP(a,b){a.s&&Ma(a.s);a.s=new ne(a.DM.bind(a,b));a.s.start(100,5E3)}
g.DM=function(a){try{if(this.Qa()){var b=Yu(this);if(b)return b.restore(a),!0}var c=M(this.Y()),d=a.zoom;if(null==d){var e=ev(this);if(bi(e,bu))return!1;var f=hu(this.Y(),a.altitude);if(isNaN(f))return!1;d=Pz(this,f)}var h=Ti(a.center,N);cl(c,h);gl(c,Le(a.heading));fl(c,c.constrainResolution(c.o,d-c.s,0))}catch(k){E.error(NP,"Error restoring camera state:",k)}return!0};function UP(a,b){a.o!=b&&(a.o=b,a.dispatchEvent(new U("map:change:init3d",b)))}
function Sy(a,b,c){var d=N.Tb;b=b&&("EPSG:4326"===d||"EPSG:3857"===d);if(b!=a.Qa()&&a.g&&!a.o){if(b&&a.yc()&&!SP(a)&&!a.g.Vm())return UP(a,!0),a.g.Ar().then(function(){UP(this,!1);Sy(this,b,c)},function(){UP(this,!1);this.l=!1;Sy(this,b,c)},a);bla(a,b);b?cla(a.g):a.Kk();a.dispatchEvent("mapmode")}a.Qa()==b||SP(a)||a.o||c||(a.l=!1,Pka(),Q(R.u(),"map.stats.error-webglInitFailed",1));setTimeout(a.HM.bind(a),0);return Wc()}
function bla(a,b){if(a.g&&a.g.Vm()&&a.l){a.g.eb(b);var c=b?"map.features.mapMode-3d":"map.features.mapMode-2d";Q(R.u(),c,1);a.dispatchEvent(new U("map:change:view3d",b))}}g.Qa=function(){return!!this.g&&this.g.mc()};
g.yc=function(){void 0==this.l&&((this.l=Modernizr.webgl?od?Modernizr.webglextensions.ANGLE_instanced_arrays&&Modernizr.webglextensions.EXT_texture_filter_anisotropic&&Modernizr.webglextensions.OES_element_index_uint&&Modernizr.webglextensions.OES_texture_float&&Modernizr.webglextensions.OES_texture_float_linear&&Modernizr.webglextensions.WEBGL_compressed_texture_s3tc:!0:!1)||Q(R.u(),"map.stats.error-webglUnsupported",1));return this.l&&null!=this.g};
function SP(a){if(a.N)return!1;void 0==a.A&&(a.A=O.get("webgl.performanceCaveat.failIf",!1)?eja():!1,a.A&&Q(R.u(),"map.stats.error-webglPerfCaveat",1));return a.A}function Qka(a){$("#map-container").css("background",a)}
function Ky(a,b){var c;if(c=a.ha&&b instanceof sl)a:{if(c=b.O()){c=c.Wa();var d=N;if(b instanceof ul&&c&&d&&!Wi(c,d))if(CP)c=GP.u(),d=b.S(),c.g.push(d),c.l.start();else{c=EP.u();c.j||(c.j=N);c.g||(c.g=b.O().Wa());-1===c.l.indexOf(b)&&c.l.push(b);c.s.start();c=!1;break a}}c=!0}if(c){d=un(a.ha);for(var e=0,f=d.getLength();e<f;e++)if(c=d.item(e),c instanceof lP){var h=c.j;if(h&&h(b)){mn(c).push(b);d=new BA("addLayer",b);a.dispatchEvent(d);C.dispatchEvent(d);dla(a,!0);b instanceof VP&&(a=vE.u())&&"Reference Layers"!=
c.Qc()&&zE(a,"v1542394219/onboarding/loaddata.json");a=sA.u();if("Feature Layers"==c.Qc())a:{if(d=void 0,c=a,b=b.D(),c.g){for(d in c.g){h=c.g[d];e=!1;for(f=0;f<h.length;f++)if(h[f].id==b){e=!0;break}if(e){c.update();break a}}var k=un(c.Y()).g;h=void 0;f=0;for(var l=k.length;f<l;f++){var m=k[f];var n=c.g[m.Qc()||""]||[];var p=mn(m).g,r=0;for(d=p.length;r<d;r++){var u=p[r];e=!1;for(var v=0,x=n.length;v<x;v++)if(n[v].id==u.D()){e=!0;n[v].time=Ha();break}e||n.push({id:u.D(),time:Ha()});if(u.D()==b){h=
m;break}}if(null!=h)break}if(null!=h){e=void 0;f=mn(h).g;for(d=f.length-2;0<=d;d--)if(h=f[d],!h.P){e=h.D();break}void 0===e?(d=f[0].D(),wA(c,b,d,!1)):wA(c,b,e,!0);c.update()}}}else a.update();a.save();return}}E.ib(NP,"No layer group was found to support "+b)}}function dla(a,b){b?Q(R.u(),"map.features.addLayer",1):Q(R.u(),"map.features.removeLayer",1);Q(R.u(),"map.features.layerCount",un(a.ha).getLength())}
function ela(){var a=T.u(),b=new fla;if(a.ha){a=un(a.ha);var c=iaa(a.g,function(a){return Bb(b.l,a.l)});0>c&&(c=Math.abs(c+1),Oh(a,c,b))}}g.pc=function(a,b){b=null!=b?b:!0;a="string"===typeof a?this.W(a):a;if(a instanceof sl){var c=!0;try{c=a.ve()}catch(d){}c&&(a=this.W(a,null,!0))&&(c=new BA("removeLayer",a),this.dispatchEvent(c),C.dispatchEvent(c),b&&a.dispose(),dla(this,!1))}};
g.Dw=function(a){if(a&&a.layer&&(a=this.W(a.layer))){var b=V.Ja(a.D());if(b)if(b.isActive())var c=new rA(b);else E.ib(NP,'Descriptor for removed layer "'+a.S()+'" is already inactive.'),this.pc(a);var d;if(!c&&(d=a.Sa())&&"id"in d){c=new Ly(d);try{c.title+=' "'+a.S()+'"'}catch(e){}}c?d&&d.loadOnce?c.Fa():gF(hF.u(),c):this.pc(a)}};
g.ac=function(a,b){if(void 0!=a&&(Q(R.u(),"map.features.addFeature",1),a instanceof ek||(a=qF(a)),"object"===typeof b&&(b=b instanceof Object?b:Gs(b),a.set("_style",b),jH(a)),b=this.W("draw"))&&(a.D()||a.ga(H(a)),a.set("sourceId",b.D()),b=b.O(),b instanceof tm))return pD(a),b.ac(a),a};T.prototype.addFeature=T.prototype.ac;T.prototype.Nc=function(a,b){var c=[];Q(R.u(),"map.features.addFeatures",1);for(var d=0,e=a.length;d<e;d++)this.ac(a[d],b)&&c.push(a[d]);return c};T.prototype.addFeatures=T.prototype.Nc;
T.prototype.Fb=function(a,b){if(null!=a){Q(R.u(),"map.features.removeFeature",1);var c=this.W("draw").O();a="string"===typeof a||"number"===typeof a?ym(c,a):ym(c,a.D()+"");null!=a&&(c.Fb(a),b&&a.dispose())}};T.prototype.removeFeature=T.prototype.Fb;function XB(a,b){return null!=b&&(a=a.W("draw"))?(a=a.O(),!("string"===typeof b||"number"===typeof b?!ym(a,b):!ym(a,b.D()+""))):!1}T.prototype.dg=function(a,b){Q(R.u(),"map.features.removeFeatures",1);for(var c=0,d=a.length;c<d;c++)this.Fb(a[c],b)};
T.prototype.removeFeatures=T.prototype.dg;T.prototype.Oa=function(){return this.j?this.j.O().Oa():[]};function pw(a){var b=[];if(a.ha){a=un(a.ha).g;for(var c=0,d=a.length;c<d;c++)Ov(a[c],"ol.layer.Group")?b=b.concat(mn(a[c]).g):b.push(a[c])}b.reverse();return b}function WP(a,b){return pw(a).reduce(function(a,d){return d instanceof b?a+1:a},0)}
T.prototype.W=function(a,b,c){null==c&&(c=!1);!b&&this.ha&&(b=un(this.ha));var d=null;if(this.ha)for(var e=0,f=b.getLength();e<f;e++){var h=b.item(e);if(h instanceof lP)d=this.W(a,mn(h),c);else try{if("string"===typeof a){if(h.D()==a){d=h;c&&Qh(b,e);break}}else if(a===h){d=h;c&&Qh(b,e);break}else if(a instanceof ek){var k=h.O();k instanceof tm&&ym(k,a.D()||"")&&(d=h)}}catch(l){}if(d)break}return d};function Nz(a,b){a=M(a.Y()).Wa();return du(b,a)}
function Pz(a,b,c){a=M(a.Y()).Wa();return cu(b,a,c)}function Xka(a,b){(a=$k(M(T.u().Y())))&&(a=Vi(a,N));return(-1<b.indexOf("a")?a[1]:a[0]).toString()}function Yka(a,b){a=Zi(T.u().Y().aa(),N,"EPSG:4326");return gla(a,b)}function gla(a,b){switch(b.toLowerCase()){case "north":return Math.max(a[1],a[3]).toString();case "south":return Math.min(a[1],a[3]).toString();case "east":return Math.max(a[0],a[2]).toString();case "west":return Math.min(a[0],a[2]).toString();default:return a.join(",")}}
function Zka(a,b){a=T.u().Y().aa();a=Zi(a,N,"EPSG:4326");a[0]=Ir(a[0]);a[2]=Ir(a[2]);return gla(a,b)}
function Ty(){return new Oc(function(a,b){cK({confirm:a,cancel:b,prompt:"<p>Switching to 2D mode with the current data volume may degrade performance considerably or crash the browser. Click OK to switch to 2D, or Cancel to stay in 3D.</p><p>If you would like to switch to 2D mode safely, please consider narrowing your time range, applying filters, shrinking your query areas, or removing some feature layers.</p>",windowOptions:{label:"Feature Limit Exceeded",icon:"fa fa-warning",x:"center",y:"center",
width:"425",height:"auto",modal:"true",headerClass:"bg-warning u-bg-warning-text"}})})};W.directive("popover",[function(){return{restrict:"AE",replace:!0,scope:{title:"=",popoverclass:"=",content:"=?",pos:"=",icon:"=?"},template:'<i ng-class="popoverctrl.icon"></i>',controller:XP,controllerAs:"popoverctrl"}}]);function XP(a,b,c){this.v=a;this.K=b;this.Ma=c;this.icon="fa fa-question-circle";this.g=null;this.j();this.v.$watch("icon",this.j.bind(this));this.v.$watch("content",this.j.bind(this));this.v.$on("$destroy",this.l.bind(this))}XP.$inject=["$scope","$element","$timeout"];
XP.prototype.l=function(){this.g&&(this.g.off("mouseenter").off("mouseleave"),this.g.popover("dispose"),this.g=null);this.Ma=this.K=this.v=null};
XP.prototype.j=function(){this.v.content&&(this.g&&(this.g.popover("dispose"),this.g=null),this.icon=this.v.icon?this.v.icon:"fa fa-question-circle",null!=this.v.title&&25<this.v.title.length&&(this.v.title=Tb(this.v.title,25)),this.g=this.K.popover({html:!0,placement:this.v.pos?this.v.pos:"bottom",trigger:"manual",title:this.v.title,content:this.v.content,template:'<div class="popover '+(this.v.popoverclass?this.v.popoverclass:"")+'" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',
boundary:"window",container:"body"}),this.g.on("mouseenter",function(){this.K.popover("show");$(".popover").on("mouseleave",function(){this.K.popover("hide")}.bind(this))}.bind(this)),this.g.on("mouseleave",function(){this.Ma(function(){$(".popover:hover").length||this.K.popover("hide")}.bind(this))}.bind(this)));X(this.v)};function hla(){tz.call(this);this.Da("Bearing");uz(this);this.fb("Choose whether bearings are displayed with as true north or magnetic north");this.vb(["bearing","north","true","magnetic"]);this.wc("fa fa-compass");this.fd="bearing-setting";if(!pP){var a="v1542394219/"+O.get("bearing.cofUrl");a=new Ys(a);a.Ra("success",kka);a.Ra("error",kka);a.load()}}w(hla,tz);
W.directive("bearingSetting",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/config/bearingsettings.html",controller:YP,controllerAs:"ctrl"}}]);function YP(a){this.v=a;O.H("bearing.type",this.g,!1,this);this.format=O.get("bearing.type","trueNorth");a=O.get("bearing.cofVersion","2015-2020");var b=O.get("bearing.magneticNorthHelpUrl");this.v.cofVersion=a;this.v.helpUrl=b;this.v.$watch("ctrl.format",t(this.update,this));this.v.$on("$destroy",t(this.j,this))}YP.$inject=["$scope"];
YP.prototype.j=function(){O.M("bearing.type",this.g,!1,this)};YP.prototype.g=function(a){"string"==typeof a.j&&a.j!==a.s&&(this.format=a.j,X(this.v))};YP.prototype.update=function(a,b){a&&b&&a!==b&&O.set("bearing.type",a)};YP.prototype.update=YP.prototype.update;W.directive("checklist",[function(){return{restrict:"E",replace:!0,scope:{allowMultiple:"=",items:"=",name:"@"},templateUrl:"v1542394219/views/checklist.html",controller:ZP,controllerAs:"checklist"}}]);function ZP(a,b,c){this.v=a;this.K=b;this.allCheckbox=!1;c(function(){$P(this)}.bind(this));a.$watch("allowMultiple",this.ZF.bind(this));a.$watch("items",this.mw.bind(this));a.$watch("items.length",this.mw.bind(this));a.$on("$destroy",this.dK.bind(this))}ZP.$inject=["$scope","$element","$timeout"];
g=ZP.prototype;g.dK=function(){this.K=this.v=null};g.ZF=function(a,b){if(a!==b&&!a){a=!0;b=!1;for(var c=this.v.items,d=0,e=c.length;d<e;d++)c[d].enabled&&a?a=!1:c[d].enabled&&(c[d].enabled=!1,b=!0);b&&(aQ(this),$P(this))}};function aQ(a){if(a.v){var b="checklist:change";a.v.name&&(b+=":"+a.v.name);a.v.$emit(b)}}g.mw=function(){this.v.items&&this.v.items.sort(this.dF);$P(this)};
g.dF=function(a,b){return a.label&&b.label?a.label.localeCompare(b.label,void 0,{sensitivity:"base",numeric:!0}):Bb(a.label,b.label)};g.Wh=function(){if(this.v&&this.v.allowMultiple){var a=this.v.items;if(a&&0<a.length){for(var b=0,c=a.length;b<c;b++)a[b].enabled=this.allCheckbox;aQ(this)}}};ZP.prototype.toggleAll=ZP.prototype.Wh;ZP.prototype.MH=function(a){if(this.v){if(this.v.allowMultiple)$P(this);else if(a.enabled)for(var b=this.v.items,c=0,d=b.length;c<d;c++)b[c]!==a&&(b[c].enabled=!1);aQ(this)}};
ZP.prototype.onItemChange=ZP.prototype.MH;function $P(a){if(a.v){var b=!1,c=!1,d=a.v.items;if(d&&0<d.length){for(var e=0,f=d.length;e<f;e++)d[e].enabled?b=!0:c=!0;d=a.K.find(".js-checklist__all");b&&c?(d.prop("checked",!0),d.prop("indeterminate",!0),a.allCheckbox=!0):(d.prop("checked",b),d.prop("indeterminate",!1),a.allCheckbox=b)}}};W.directive("exportoptions",[function(){return{restrict:"E",scope:{allowMultiple:"=",showLabels:"=",initSources:"&",showCount:"@"},templateUrl:"v1542394219/views/ex/exportoptions.html",controller:bQ,controllerAs:"exportoptions"}}]);
function bQ(a){y.call(this);this.scope=a;a.showCount="true"===a.showCount;this.count=0;this.sourceItems=[];this.useSelected=!0;for(var b=this.scope.initSources()||[],c=GL(NB),d=0,e=c.length;d<e;d++){var f=c[d];if(this.sp(f)){if(f.Hb()){var h="all"==b||kb(b,f);this.sourceItems.push(cQ(f,h))}I(f,"propertychange",this.Rm,this)}}this.jg();b=V;b.H("dataSourceAdded",this.by,!1,this);b.H("dataSourceRemoved",this.ey,!1,this);this.scope.$on("checklist:change:sourcelist",this.WI.bind(this));this.scope.$watch("showLabels",
this.jg.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(bQ,y);bQ.$inject=["$scope"];var ila=["features","featureVisibility","visible","timeFilter"],jla=["selectedItemsAdded","selectedItemsChanged","selectedItemsRemoved"];g=bQ.prototype;g.J=function(){bQ.C.J.call(this);this.scope=null;var a=V;a.M("dataSourceAdded",this.by,!1,this);a.M("dataSourceRemoved",this.ey,!1,this);a=GL(NB);for(var b=0,c=a.length;b<c;b++)xh(a[b],"propertychange",this.Rm,this)};
function cQ(a,b){return{enabled:void 0!==b?b:!1,label:a.S(),item:a}}g.sp=function(){return!0};g.WI=function(a){a.stopPropagation();this.jg()};g.Rm=function(a){var b=a.A||a.target;if(b){var c=dQ(this,b);a=a.l;"visible"===a?b.Hb()?c||(this.sourceItems.push(cQ(b,this.scope.allowMultiple)),this.jg()):dQ(this,b,!0):"label"===a?this.jg():c&&c.enabled&&(kb(ila,a)?this.jg():this.useSelected&&kb(jla,a)&&this.jg())}};
g.by=function(a){(a=a.source)&&this.sp(a)&&(I(a,"propertychange",this.Rm,this),!dQ(this,a)&&a.Hb()&&(this.sourceItems.push(cQ(a,this.scope.allowMultiple)),X(this.scope)))};g.ey=function(a){if(a=a.source)xh(a,"propertychange",this.Rm,this),dQ(this,a,!0)};function dQ(a,b,c){if(b)for(var d=0,e=a.sourceItems.length;d<e;d++)if(a.sourceItems[d].item===b){var f=a.sourceItems[d];c&&(a.sourceItems.splice(d,1),f.enabled?a.jg():X(a.scope));break}return f}
g.jg=function(){this.count=0;if(this.scope){for(var a=[],b=[],c=0;c<this.sourceItems.length;c++){var d=this.sourceItems[c];d.detailText="";if(d.enabled){var e=d.item;b.push(e);var f=e.fe();var h=f.length;if(this.useSelected){var k=e.Wd.slice();e=k.length;f=0<e?k.slice():f;d.detailText="("+String(f.length);d.detailText=0<e&&e!=h?d.detailText+(" of "+h+" features)"):d.detailText+(" "+(1!=h?"features":"feature")+")")}else d.detailText="("+String(h)+" "+(1!=h?"features":"feature")+")";if(this.scope.showLabels&&
(h=[],e=d.item.D(),e=mH(nH.u(),e),e.labels&&0<f.length&&!kla(f))){for(k=0;k<e.labels.length;k++)e.labels[k].column&&h.push(e.labels[k].column);0==h.length&&h.push("None");e=Sb(h.join("/"));k=Sb("Columns that will be used for labels in the exported file: "+h.join(", "));d.detailText+='<div class="nowrap" title="'+k+'">Label'+(1<h.length?"s":"")+": "+e+"</div>"}f&&0<f.length&&(a=a.concat(f))}}this.count=a.length;this.scope.$emit("exportoptions:change",a,b);X(this.scope)}};bQ.prototype.updateItems=bQ.prototype.jg;
function kla(a){return a?a.some(function(a){return!!a.get("_style")}):!1};W.directive("bufferform",[function(){return{restrict:"E",scope:{config:"=",showSourcePicker:"=",warningMessage:"=?",initSources:"&"},templateUrl:"v1542394219/views/buffer/bufferform.html",controller:eQ,controllerAs:"buffer"}}]);
function eQ(a,b){bQ.call(this,a);this.units=zc(qB);this.columns=[];this.descSample=this.titleSample="";this.liveAllowed=lla(this.scope.config);this.liveEnabled=!1;this.liveAllowed&&this.scope.config&&this.scope.config.features&&1==this.scope.config.features.length&&(this.liveEnabled=!0);this.help={distance:"Distance around selected features to create the buffer region.",outside:"Create a buffer region outside the original area.",inside:"Create a buffer region inside the original area.",title:"Custom title given to all new buffer areas.",
titleColumn:"Column used to apply titles to all new buffer areas. If a selected item doesn't have this field defined, a generic title will be given. You may also choose to apply a custom title to new areas.",description:"Description applied to all new buffer areas.",descColumn:"Column used to apply descriptions to all new buffer areas. If a selected item doesn't have this field defined, the description will be left blank. You may also choose to apply a custom description to new areas.",tags:"Comma-delimited list of tags to apply to all new buffer areas. Tags can be used to group or search areas in the Areas tab of the Layers window.",
tagsColumn:"Column used to apply tags to all new buffer areas. Tags can be used to group or search areas in the Areas tab of the Layers window.  If an item doesn't have this field defined, the tags will be left blank. You may also choose to provide your own custom tags.",units:"Unit of measure for the buffer distance."};this.g=void 0;this.j=!1;a.$on("exportoptions:change",this.l.bind(this));b(function(){a.$emit("window.ready")})}w(eQ,bQ);eQ.$inject=["$scope","$timeout"];
eQ.prototype.J=function(){eQ.C.J.call(this);this.g&&(T.u().dg(this.g),this.g=void 0)};
eQ.prototype.l=function(a,b,c){a.stopPropagation();this.scope&&this.scope.config&&(a=this.scope.config,a.features&&this.scope.showSourcePicker&&(a.features.length=0,b&&0<b.length&&(a.features=a.features.concat(b))),this.columns=c&&0<c.length?c[0].getColumns().slice():[],this.columns.sort(YF),(this.liveAllowed=lla(this.scope.config))?(this.livePreviewContent="Shows a live preview of buffer area(s) on the map for up to "+fQ+" features, or "+gQ+" vertices.",this.livePreviewIcon=""):(this.livePreviewContent=
"Live preview disabled for performance reasons. This is only allowed for up to "+fQ+" features, or "+gQ+" vertices.",this.livePreviewIcon="fa fa-warning text-warning"),this.wb())};
eQ.prototype.wb=function(a){if(this.liveAllowed&&this.liveEnabled||a)this.j=!1,this.g&&(T.u().dg(this.g),this.g=void 0),this.scope&&this.scope.config&&(this.scope.config.outside||this.scope.config.inside)&&((a=mla(this.scope.config,!0))&&0<a.length&&(this.g=T.u().Nc(a,nla)),this.j=!this.g||!this.g.length);this.scope&&(this.scope.warningMessage=ola(this))};eQ.prototype.updatePreview=eQ.prototype.wb;
function ola(a){if(a.scope&&a.scope.config){var b=a.scope.config;if(!b.distance||0>b.distance)return"Distance must be greater than zero.";if(!b.outside&&!b.inside)return"Please select at least one of Buffer Outside/Inside.";var c=b.features;if(c&&c.length){var d=tB(b.distance,"m",b.units);if(b.inside){var e=c[0].X();if(e=e?e.aa():void 0)if(e=Zi(e,N,"EPSG:4326"),0>$D(e,-d))return"The current buffer distance cannot be used to produce an accurate inner buffer. Please reduce the buffer distance."}if(b.outside&&
663469.9375<d&&c.some(function(a){return"Point"!==a.X().T()}))return"The current buffer distance cannot be used to produce an accurate outer buffer. Please reduce the buffer distance."}if(a.j)return a="Buffer creation failed. Please try reducing the buffer distance",b.inside&&(a+=" or disable the inner buffer"),a+"."}return""}eQ.prototype.hN=function(){if(this.scope&&this.scope.config){var a=this.scope.config.features;if(a&&1===a.length)return Hu(a[0].X())}return!1};
eQ.prototype.supportsBidirectional=eQ.prototype.hN;W.directive("bufferdialog",[function(){return{restrict:"E",templateUrl:"v1542394219/views/buffer/bufferdialog.html",controller:hQ,controllerAs:"buffer"}}]);
function hQ(a,b){this.K=b;this.config=a.config={distance:O.get("bufferRegion.distance",5),units:O.get("bufferRegion.units","km"),outside:!0,inside:!1,title:"Buffer Region",description:"",tags:"",features:[]};this.warningMessage="";if(a.features&&0<a.features.length){if(this.config.features=a.features,this.showSourcePicker=!1,b=MB(this.config.features[0])){for(var c=0;c<this.config.features.length;c++)if(MB(this.config.features[0])!=b){b=null;break}a.sources=b?[b]:void 0}}else this.showSourcePicker=
!0;a.title&&(this.config.title=a.title);a.$on("$destroy",this.g.bind(this));a.$emit("window.ready")}hQ.$inject=["$scope","$element"];hQ.prototype.g=function(){this.K=null};hQ.prototype.cancel=function(){KE(this.K)};hQ.prototype.cancel=hQ.prototype.cancel;hQ.prototype.confirm=function(){mla(this.config);this.cancel()};hQ.prototype.confirm=hQ.prototype.confirm;
hQ.prototype.Ie=function(){if(!this.showSourcePicker)return"";if(!this.Qu())return"No features chosen.";var a=this.config.features.length;return a+" feature"+(1<a?"s":"")+" chosen."};hQ.prototype.getStatus=hQ.prototype.Ie;hQ.prototype.Qu=function(){return!this.showSourcePicker||this.config&&this.config.features&&0<this.config.features.length};hQ.prototype.isDataReady=hQ.prototype.Qu;var nla={fill:{color:"rgba(0,255,255,.15)"},stroke:{width:3,color:"rgba(0,255,255,1)"}},fQ=rd?500:100,gQ=rd?5E3:2E3;function lla(a){if(a.features){if(a.features.length>fQ)return!1;for(var b=0,c=0;c<a.features.length&&b<gQ;c++){var d=a.features[c].X();d&&(b+=d.flatCoordinates.length/d.stride)}return b<gQ}return!0}
function mla(a,b){if(a.features&&0<a.features.length&&null!=a.distance){for(var c=tB(a.distance,"m",a.units),d=[],e=0;e<a.features.length;e++){var f=a.features[e],h="Buffer Region";a.titleColumn?(h=f.get(a.titleColumn.field))||(h="No "+a.titleColumn.name):a.title&&(h=a.title,1<a.features.length&&(h+=" "+(e+1)));var k=f.X();if(k){k="GeometryCollection"==k.T()?k.g:[k];for(var l=0,m=k.length;l<m;l++){var n=Math.abs(c),p;if(a.outside&&a.inside){var r=YD(k[l],n);n=YD(k[l],-n);r&&n&&(r=VD(new ek(r),new ek(n)))&&
(p=r.X())}else a.outside?p=YD(k[l],n):a.inside&&(p=YD(k[l],-n));p&&(r=new ek(p),r.ga(e),r.set("title",""+h),r.set("description",a.descColumn?f.get(a.descColumn.field):a.description),r.set("tags",a.tagsColumn?f.get(a.tagsColumn.field):a.tags),r.set("_node",!1),(n=MB(f))&&r.set("_sourceName",n.S(),!0),d.push(r))}}}if(0<d.length){if(!b){a=[];for(e=0;e<d.length;e++)r=new sF(d[e]),a.push(r);e=new iO;e.Zb(a);e.title="Add buffer region"+(1<a.length?"s":"");gF(hF.u(),e)}return d}}return null}
function iQ(a){IE("Buffer")?HE("Buffer"):FE({id:"Buffer",label:"Create Buffer Region"+(a.features?"":"s"),icon:"fa fa-dot-circle-o",x:"center",y:"center",width:"425","min-width":"300","max-width":"800",height:"auto","show-close":"true"},"<bufferdialog></bufferdialog>",void 0,void 0,void 0,a)};function jQ(a,b){z.call(this,a);this.j=b}w(jQ,z);jQ.prototype.Od=function(){return this.j};function kQ(){A.call(this);this.ma=$b();this.j=this.description=this.name=null;this.g=[]}w(kQ,A);var pla=E.V("os.column.ColumnMapping");g=kQ.prototype;g.D=function(){return this.ma};g.ga=function(a){this.ma=a||$b()};g.getName=function(){return this.name};g.Qh=function(a){this.name=a};g.qb=function(){return this.description};g.fb=function(a){this.description=a};function lQ(a,b,c){b={column:c,layer:b,units:""};a.g.push(b);a.dispatchEvent(new jQ("columnAdded",b))}
function qla(a,b){b=qb(a.g,b)?b:null;a.dispatchEvent(new jQ("columnRemoved",b))}g.getColumns=function(){return this.g};g.Od=function(a){return ib(this.g,function(b){return b.layer===a})};
function rla(a){var b="",c=a.name||"New Association",d=a.j||"string",e=a.description||"";try{b+='<columnMapping name="'+c+'" type="'+d+'" description="'+e+'">';c=0;for(var f=a.g.length;c<f;c++){var h=a.g[c];b+='<column layer="'+h.layer+'">'+h.column+"</column>"}b+="</columnMapping>"}catch(k){return E.error(pla,"Failed to write column mapping: "+a.getName()),""}return b}g.sa=function(a){a=a||{};a.id=this.D();a.columnMapping=rla(this);return a};
g.restore=function(a){this.ga(a.id);if(a=a.columnMapping){var b=VA(a);try{if(b){var c=Ag(b);if(c&&"columnMapping"===c.tagName){var d=c.getAttribute("type"),e=c.getAttribute("name");this.j=d;this.Qh(e);var f=c.getAttribute("description");this.fb(f);var h=c.querySelectorAll("column");if(h){c=0;for(var k=h.length;c<k;c++){var l=h[c],m=l.getAttribute("layer"),n=l.textContent;m&&n&&lQ(this,m,n)}}}}}catch(p){E.error(pla,"Failed to load column mapping: "+a)}}};
g.clone=function(){var a=new kQ,b=this.sa();a.restore(b);return a};function mQ(){FD.call(this);this.log=sla;this.g={};this.o=new le(this.pG,100,this);this.load()}w(mQ,FD);wa(mQ);var sla=E.V("os.column.ColumnMappingManager");g=mQ.prototype;g.D=function(a){return a.D()||""};g.save=function(){E.info(this.log,"Saving column associations.");for(var a=HD(this),b=[],c=0,d=a.length;c<d;c++)b.push(a[c].sa());O.set("columnMappings",b);return Af()};g.load=function(){E.info(this.log,"Loading column associations...");var a=O.get("columnMappings");return sf(Af(a),this.dI,this)};
g.dI=function(a){var b=[];if(a){a="string"===typeof a?JSON.parse(a):a;for(var c=0,d=a.length;c<d;c++){var e=a[c],f=new kQ;f.restore(e);b.push(f)}}tla(this,b);E.info(this.log,"Loaded "+b.length+" associations(s) from storage.");return b};function tla(a,b){for(var c=0,d=b.length;c<d;c++)a.add(b[c])}g.add=function(a){for(var b=a.getColumns(),c=a.D(),d=0,e=b.length;d<e;d++)this.g[nQ(b[d])]=c;a.H("columnAdded",this.Sv,!1,this);a.H("columnRemoved",this.Uv,!1,this);this.dd();return mQ.C.add.call(this,a)};
g.remove=function(a){if(a=this.get(a)){for(var b=a.getColumns(),c=0,d=b.length;c<d;c++)delete this.g[nQ(b[c])];a.M("columnAdded",this.Sv,!1,this);a.M("columnRemoved",this.Uv,!1,this)}this.dd();return mQ.C.remove.call(this,a)};g.Sv=function(a){var b=a.target.D();(a=a.Od())&&(this.g[nQ(a)]=b)};g.Uv=function(a){(a=a.Od())&&delete this.g[nQ(a)]};function oQ(a,b){return a.get("string"===typeof b?a.g[b]:a.g[nQ(b)])}g.dd=function(){this.o.start()};g.pG=function(){this.save();this.dispatchEvent("mappingsChange")};
g.clear=function(){for(var a=HD(this),b=[],c=0,d=a.length;c<d;c++)this.remove(a[c]),b.push(a[c]);return b};function nQ(a){return a.layer+"#"+a.column};function ula(){this.g=null}g=ula.prototype;g.lb=!1;g.title="Clear Map Position";g.Ba=null;g.state="ready";g.Fa=function(){this.state="executing";var a=T.u();this.g=Oz(a);a.pn();this.state="success";return!0};g.Cb=function(){this.state="reverting";return this.g?(TP(T.u(),this.g),this.state="ready",!0):!1};function pQ(){this.g={};this.value=!0}g=pQ.prototype;g.lb=!1;g.title="Clear query areas";g.Ba=null;g.state="ready";g.Fa=function(){this.state="executing";for(var a=HI.u(),b=HD(a),c=0,d=b.length;c<d;c++)b[c].get("shown")&&(this.g[b[c].D()]=!0,a.toggle(b[c],!1));this.state="success";return!0};g.Cb=function(){this.state="reverting";for(var a=HI.u(),b=HD(a),c=0,d=b.length;c<d;c++)b[c].D()in this.g&&a.toggle(b[c],!0);this.g={};this.state="ready";return!0};function qQ(){pQ.call(this);this.value=!1}w(qQ,pQ);qQ.prototype.title="Clear exclusion areas";function rQ(){A.call(this);this.title="Clear Layers";this.Zb([])}w(rQ,oF);rQ.prototype.Zb=function(a){rQ.C.Zb.call(this,a);this.lb=!0};
rQ.prototype.Fa=function(){for(var a=[],b=[],c=[],d=pw(T.u()),e=0,f=d.length;e<f;e++){var h=d[e];try{var k=h.Sa();if(h.ve()&&k&&!k.noClear){var l=V.Ja(h.D());l instanceof SK&&l.isActive()?-1==b.indexOf(l)&&b.push(l):k.loadOnce?T.u().pc(k.id):c.push(k)}}catch(m){}}for(e=0;e<b.length;e++)a.push(new rA(b[e]));for(e=0;e<c.length;e++)a.push(new Ly(c[e]));if(0<a.length)return this.Zb(a),rQ.C.Fa.call(this);this.state="success";this.Ba=null;this.dispatchEvent("executed");return!0};function vla(){this.g=[]}g=vla.prototype;g.lb=!1;g.title="Clear Non-query Features";g.Ba=null;g.state="ready";g.Fa=function(){this.state="executing";var a=T.u().Oa(),b=[],c=UE;if(0<a.length)for(var d=0;d<a.length;d++){var e=a[d];c.get(e)||b.push(e)}T.u().dg(b);this.g=b;this.state="success";return!0};g.Cb=function(){this.state="reverting";T.u().Nc(this.g);this.g.length=0;this.state="ready";return!0};function sQ(a,b){uP.call(this,a,b)}w(sQ,uP);sQ.prototype.transform=function(a,b){for(var c=HD(HI.u()),d=0,e=c.length;d<e;d++){var f=c[d];if(f&&!f.get("shown")){var h=f.X();h&&h.transform(a,b);(f=f.get("_originalGeometry"))&&f.transform(a,b)}}};W.directive("metriccompletion",[function(){return{restrict:"AE",replace:!0,template:'<span class="pl-1 c-slick-grid__hover-color" ng-style="mc.style" ng-bind-html="mc.getCompleted()" />',controller:tQ,controllerAs:"mc"}}]);function tQ(a){this.g=null;this.style="";a.item instanceof uQ&&(this.g=a.item);a.$on("$destroy",this.j.bind(this))}tQ.$inject=["$scope","$element"];tQ.prototype.j=function(){this.g=null};
tQ.prototype.WC=function(){try{if(this.g&&this.g.Ke()){if(this.g)if(this.g.Ke()){for(var a=bz(this.g),b=a.length,c=0,d=0;d<b;d++)a[d].g&&c++;var e=Math.round(c/b*100)}else e=this.g.g?100:0;else e=0;var f=Sea(e/100*255);3==f.length&&f.push(1);this.style={color:nj(f)};return"<strong>("+e+"% Explored)</strong>"}}catch(h){}return""};tQ.prototype.getCompleted=tQ.prototype.WC;function uQ(a){jz.call(this);pz(this,!1);this.key_=a;this.l=void 0;this.icon=null;this.g=!1;this.key_&&(a=R.u(),vQ(this,a.j?Gy(this.key_,a.l):!1),a.H(this.key_,this.uw,!1,this),a.H("metrics:reset",this.vw,!1,this))}w(uQ,jz);g=uQ.prototype;g.J=function(){uQ.C.J.call(this);if(this.key_){var a=R.u();a.M(this.key_,this.uw,!1,this);a.M("metrics:reset",this.vw,!1,this)}};g.uw=function(a){"number"==typeof a.j&&vQ(this,0<a.j)};g.vw=function(){if(this.key_){var a=R.u();vQ(this,a.j?Gy(this.key_,a.l):!1)}};
g.qb=function(){return this.l};g.fb=function(a){this.l=a};function vQ(a,b){b!=a.g&&(a.g=b,a.dispatchEvent(new U("visited",b,!b)),a.dispatchEvent(new U("label")))}g.je=function(){return[this.ba()||"",this.qb()||"",this.getTags()||""].join(" ")};g.getTags=function(){return null};g.Hc=function(){return this.Ke()?this.icon||"&nbsp;":this.g?'<i class="fa fa-check"></i>':'<i class="fa fa-times"></i>'};g.Gj=function(a){return uQ.C.Gj.call(this,a)+"<metriccompletion></metriccompletion>"};g.mc=function(){return!0};
g.mb=function(){return!1};function wQ(){this.g=null;this.label="Change Me!";this.j=[];this.description="";this.be=[];this.icon="";this.collapsed=!1;this.fd=null}w(wQ,y);g=wQ.prototype;g.J=function(){wQ.C.J.call(this);Ma(this.g);this.g=null};g.D=function(){return((0<this.j.length?this.j.join(".")+".":"")+this.label).replace(" ","_").toLowerCase()};function xQ(a){a.g||(a.g=new uQ,a.g.collapsed=a.collapsed,a.g.icon=a.icon,a.g.Da(a.ba()),a.g.fb(a.qb()),pz(a.g,!1));return a.g}g.qb=function(){return this.description};
g.fb=function(a){this.description=a};g.zd=function(a){this.collapsed=a;this.g&&(this.g.collapsed=this.collapsed)};g.wg=function(){return this.icon||'<i class="fa fa-gear"></i>'};g.wc=function(a){this.icon=['<i class="',a,'"></i> '].join("");this.g&&(this.g.icon=this.icon)};g.ba=function(){return this.label};g.Da=function(a){this.label=a};g.getTags=function(){return this.be};g.vb=function(a){this.be=a};g.zg=function(){return this.fd};
g.R=function(a,b){var c=new uQ(b.key);c.Da(b.label);c.fb(b.description);c.collapsed=b.collapsed||!1;c.icon=b.icon||null;a.R(c);return c};g.tj=function(a,b){a.collapsed=!0;for(var c=0;c<b.length;c++)this.R(a,b[c])};function wla(){wQ.call(this);this.Da("Map");this.fb("Start application in 2D or 3D mode");this.vb(["2D","3D","Dimension"]);this.wc("fa fa-globe");this.zd(!0);var a=xQ(this);this.R(a,{label:"2D Mode",key:"map.features.mapMode-2d"});this.R(a,{label:"3D Mode",key:"map.features.mapMode-3d"});this.R(a,{label:"Save State",key:"map.features.saveState"});this.R(a,{label:"Import State",key:"map.features.importState"});this.R(a,{label:"Clear State",key:"map.features.clearState"});this.R(a,{label:"Save Screen Shot",
key:"map.features.screenCapture"});this.R(a,{label:"Draw",key:"map.feature.draw"});this.R(a,{label:"Measure",key:"map.feature.measureToolToggle"});this.R(a,{label:"Show Legend",key:"map.features.showLedgend"});this.R(a,{label:"Show Layer Window",key:"map.features.layers"});var b=this.R(a,{label:"Context Menu"});this.R(b,{label:"Reset View",key:"map.features.resetView"});this.R(b,{label:"Reset Rotation",key:"map.features.resetRotation"});this.R(b,{label:"Toggle 2D/3D View",key:"map.features.toggleMode"});
this.R(b,{label:"Show Legend",key:"map.features.showLedgendContext"});this.R(b,{label:"Clear Selection",key:"map.features.clearSelection"});this.R(b,{label:"Set Background Color",key:"map.features.setBackGroundColor"});a=this.R(a,{label:"Units Menu"});this.R(a,{label:"Use Imperial Units",key:"map.units.imperial"});this.R(a,{label:"Use Metric Units",key:"map.units.metric"});this.R(a,{label:"Use Nautical Units",key:"map.units.nautical"});this.R(a,{label:"Use Miles Only Units",key:"map.units.mile"});
this.R(a,{label:"Use Nautical Miles Only Units",key:"map.units.nauticalmile"});this.R(a,{label:"Use Yards Only Units",key:"map.units.yard"});this.R(a,{label:"Use Feet Only Units",key:"map.units.feet"})}w(wla,wQ);var xla=[[239,187,191],[255,254],[254,255]],yla=E.V("os.file.mime.text");function Ow(a,b){if(a){a:{if(b){var c=b.s;if(c){var d=zla(a,c);break a}}d=void 0}if(!d){var e="";c=new Uint8Array(a);for(var f=Math.min(c.length,16384),h=0;h<f;h++)e+=String.fromCharCode(c[h]);if(e=jschardet.detect(e).encoding){h=0;for(d=xla.length;h<d;h++)if(f=xla[h],c.length>=f.length&&Cb(c.slice(0,f.length),f)){a=a.slice(f.length);break}d=zla(a,e);b&&(b.s=e)}}d&&(d=d.replace(/(^\x00+)|(\x00+$)/g,""));return d}}
function Ala(a){try{return(new TextEncoder).encode(a).buffer}catch(b){E.error(yla,"Failed to create ArrayBuffer from string.",b)}}Fw("text/plain",function(a,b){return Wc(Ow(a,b))},1E3);function zla(a,b){try{return(new TextDecoder(b.toLowerCase())).decode(new DataView(a))}catch(c){E.error(yla,"No TextDecoder could be found for the encoding "+b.toLowerCase())}};function yQ(){this.g=[]}wa(yQ);
function Bla(a,b){var c=a.Ob(),d=a.o;if(c||d){c&&"string"===typeof c&&(c=Ala(c));var e=function(b){if(b){var c=Iw(b);c&&-1<c.indexOf("text/plain")&&Nw(a);a.Sb(b)}return b};c&&c instanceof ArrayBuffer?Hw(c,a).then(e).then(b):d instanceof Blob?sf(zw(d.slice(0,16384)),function(c){Hw(c,a).then(e).then(b)}):E.error(Cla,"Failed to detect content type. The content was not a string or ArrayBuffer.")}else(c=a.T())||E.error(Cla,"The content or original File instance must be present on the os.file.File for content type detection to work"),b(c)}
var Cla=E.V("os.file.FileManager");yQ.prototype.j=function(){return!0};function Dla(a){var b=new GQ(!1);kb(a.g,b)||(a.g.push(b),a.g.sort(a.l))}yQ.prototype.l=function(a,b){return Bb(b.Jq(),a.Jq())};W.directive("urlimport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/file/urlimport.html",controller:HQ,controllerAs:"urlImport"}}]);function HQ(a,b){this.v=a;this.K=b;this.loading=this.l=!1;this.url="";this.K.find('input[name="url"]').focus();a.$emit("window.ready");a.$on("$destroy",this.o.bind(this))}HQ.$inject=["$scope","$element"];
HQ.prototype.o=function(){if(!this.l){var a=this.v.method;a&&(a.M("complete",this.g,!1,this),a.M("cancel",this.g,!1,this),a.M("error",this.j,!1,this),a.dispatchEvent("cancel"))}this.K=this.v=null};HQ.prototype.accept=function(){if(!this.v.urlForm.$invalid&&this.v.method){this.loading=!0;var a=this.v.method;a.Lb(this.url);a.Ra("complete",this.g,!1,this);a.Ra("cancel",this.g,!1,this);a.Ra("error",this.j,!1,this);a.ak()}else this.close()};HQ.prototype.accept=HQ.prototype.accept;
HQ.prototype.close=function(){this.K&&KE(this.K)};HQ.prototype.close=HQ.prototype.close;HQ.prototype.g=function(a){a=a.target;a.M("complete",this.g,!1,this);a.M("cancel",this.g,!1,this);a.M("error",this.j,!1,this);this.l=!0;this.loading=!1;this.close()};HQ.prototype.j=function(a){a=a.target;a.M("complete",this.g,!1,this);a.M("cancel",this.g,!1,this);a.M("error",this.j,!1,this);this.loading=!1;X(this.v)};function IQ(){A.call(this);this.log=JQ;this.Za=this.g=this.j=null}w(IQ,A);var JQ=E.V("os.ui.file.method.UrlMethod");g=IQ.prototype;g.J=function(){IQ.C.J.call(this);this.yj();Ma(this.g);this.g=null};g.Ka=function(){return this.Za};g.Lb=function(a){this.Za=a};g.Jq=function(){return 0};g.yj=function(){this.j=null};g.clone=function(){return new this.constructor};
g.ak=function(){this.yj();this.Za?this.Ki():FE({id:"urlimport",label:"Import URL",icon:"fa fa-cloud-download",x:"center",y:"center",width:"400","min-width":"400","max-width":"400",height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<urlimport></urlimport>",void 0,void 0,void 0,{method:this})};
g.Ki=function(){if(this.Za){this.g&&(this.g.dispose(),this.g=null);var a=this.Za.lastIndexOf("?file=");-1!=a&&(this.Za=this.Za.substring(a+6));this.g=new Ys(this.Za);ct(this.g,"*/*");if(!od||Bd(10))this.g.B="arraybuffer";this.g.H("success",this.AK,!1,this);this.g.H("error",this.zK,!1,this);this.g.load()}else E.error(JQ,"URL cannot be null!"),this.dispatchEvent("cancel")};
g.AK=function(){var a=this.g.j.toString(),b=a.indexOf("?"),c=a.lastIndexOf("/")+1;b=decodeURI(a.substring(-1==c?0:c,-1==b?a.length:b));if(c=this.g.I)if(c=c["Content-Disposition"]||c["content-disposition"]){var d=/filename="(.*?)"/.exec(c);d&&d[1]?b=d[1]:(c=c.split("filename="),0<c.length&&c[1]&&(b=c[1]))}c=this.g.g;this.g.dispose();this.g=null;this.j=Qw(b,a,void 0,c);this.dispatchEvent("complete");C.dispatchEvent(new Ps("userUrl",a))};
g.zK=function(){var a='<strong>Unable to load URL "'+this.Za+'"!</strong><br>Please check that it was entered correctly.';this.g.dispose();this.g=null;At(Ct,a,rs,JQ);this.dispatchEvent("error")};function KQ(){this.g={};this.s={};this.l={};this.o=[];this.j=[];Ela(this,"default",bD)}wa(KQ);var LQ=E.V("os.ui.im.ImportManager");function Fla(a,b){return b&&(b=b.toLowerCase(),b in a.g)?a.g[b]:null}KQ.prototype.No=function(){var a=this.o.slice();0<this.j.length&&a.unshift("Supported data formats: "+this.j.join(", ")+".");return a};function Gla(){var a=KQ.u(),b=[];jc(a.g,function(a){b.push(a)});yb(b,null,function(a){return a.Ib.toString()});return b}
function MQ(a){var b=KQ.u();return a&&(a=a.toLowerCase(),a in b.l)?new b.l[a](void 0):null}function NQ(a,b,c){c?(a.j.push(b),a.j.sort(Bb)):(a.o.push(b),a.o.sort(Bb))}function OQ(a,b,c){b=b.toLowerCase();b in a.g&&E.ib(LQ,'The import UI "'+b+'" has already been registered with the import manager!');a.g[b]=c}function Ela(a,b,c){b=b.toLowerCase();b in a.s?E.info(LQ,'The importer type "'+b+'" has already been registered with the import manager!'):a.s[b]=c}
function PQ(a,b,c){b=b.toLowerCase();b in a.l?E.info(LQ,'The parser type "'+b+'" has already been registered with the import manager!'):a.l[b]=c};W.directive("filesupport",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/im/filesupport.html",controller:QQ,controllerAs:"ctrl"}}]);
function QQ(a,b){y.call(this);this.v=a;this.K=b;this.l=this.v.file;this.j=this.v.confirm;this.g=this.v.cancel;this.o=new Lg(document);this.o.H("key",this.s,!1,this);this.application=ws("the application");this.supportsUpload=!1;this.supportContact=Fz(xs("your system administrator"));this.choice="local";a.$on("$destroy",this.dispose.bind(this));this.l?a.$emit("window.ready"):(this.g&&this.g("Local file could not be loaded."),KE(this.K))}w(QQ,y);QQ.$inject=["$scope","$element"];
QQ.prototype.J=function(){QQ.C.J.call(this);Ma(this.o);this.l=this.v=this.K=null};QQ.prototype.cancel=function(){this.g&&this.g("cancel");KE(this.K)};QQ.prototype.cancel=QQ.prototype.cancel;QQ.prototype.confirm=function(){this.j&&this.j();KE(this.K)};QQ.prototype.confirm=QQ.prototype.confirm;QQ.prototype.s=function(a){27==a.keyCode&&this.cancel()};
function Hla(a){return new Oc(function(b,c){FE({label:"Unable to Store File",headerClass:"bg-warning u-bg-warning-text",icon:"fa fa-warning",x:"center",y:"center",width:550,"min-width":400,"max-width":800,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<filesupport></filesupport>",void 0,void 0,void 0,{file:a,confirm:b,cancel:c})})};function RQ(a,b){this.g=null;this.log=Ila;this.j=null;this.B=a||KQ.u();this.G=b||yQ.u();this.A=b?!1:!0;this.s=this.l=null;this.o=!1}var Ila=E.V("os.ui.im.ImportProcess");g=RQ.prototype;g.hs=function(a){this.s=a};function SQ(a){a.l=new mf;a.g?a.g&&Bla(a.g,a.fw.bind(a)):a.j&&a.j.ak({manager:a.B})}
function TQ(a,b){a.g=b.j;a.o=!1;a.s=b.config;a.g||(b&&"importUrl"==b.type?(a.j=new IQ,b.url&&a.j.Lb(b.url)):(b=a.G,b=(b=ib(b.g,b.j))?b.clone():null,a.j=b),a.j&&(a.j.Ra("complete",a.jy,!1,a),a.j.Ra("cancel",a.kq,!1,a)))}function UQ(a,b){a.j&&(b?(a.j.dispose(),a.j=null):(a.j.M("complete",a.jy,!1,a),a.j.M("cancel",a.kq,!1,a),a.j.yj()))}g.fw=function(a){a&&this.g?(E.info(this.log,'Detected file with type "'+a+'"'),Uw(this.g)?this.lr()?this.um():this.Bg():this.Ms()?this.Bm():this.Bg()):Jla(this)};
function Jla(a){a.Be('Could not determine the file type for "'+a.g.getFileName()+'".')}
g.Bg=function(a){a&&this.hs(a);if(this.g){var b=this.g.T();if(a=Fla(this.B,b)){if(Uw(this.g)&&this.A&&a.j&&!this.o&&!(my.u().g instanceof jy))return this.o=!0,Hla(this.g).then(this.nH,this.mH,this),null;if(a.j&&!this.g.Ob()&&(b=gfa(this.g)))return tf(b,this.Bg,this.Be,this),null;this.l&&this.l.callback(this.g);try{a.Ib(this.g,this.s)}catch(c){Jla(this)}}else this.Be('No import UI was registered for file type "'+b+'"!')}else this.Be("Unable to import file!");return null};
g.nH=function(a){if(a&&this.g){this.g.Lb(a);var b=this.s;b&&b.descriptor&&(b=b.descriptor,P(b,"os.data.IUrlDescriptor")&&b.Lb(a))}this.Bg()};g.mH=function(a){"cancel"===a?this.kq():this.Be("string"==typeof a?a:void 0)};g.Be=function(a){var b=a;if(!b){b="Failed to import file";if(this.g){var c=this.g.getFileName()||this.g.Ka();c&&(b+=' "'+c+'"')}b+="!"}E.error(this.log,b);At(zt.u(),b,rs);this.l&&this.l.Eb(a);UQ(this);return null};
g.jy=function(){this.g=this.j.j;this.o=!1;UQ(this);this.g?this.g&&Bla(this.g,this.fw.bind(this)):this.Be("Failed loading file!")};g.kq=function(){E.info(this.log,"Import cancelled by user.");UQ(this,!0)};g.lr=function(){return this.g&&this.A?oy(my.u(),this.g):!1};g.Ms=function(){return!1};g.um=function(){this.Be('File named "'+this.g.getFileName()+'" already exists!')};g.Bm=function(){this.Be('File with URL "'+this.g.Ka()+'" already exists!')};function Kla(a,b,c,d){function e(b){var c=uu(b);null!=c&&90<Math.abs(c.lat)&&(c=null);var e=!0;if(null!=c)e=!0;else try{var f=osasm.toLonLat(b);e=q(f)&&2===f.length}catch(m){e=!1}d.$pristine||d.$setValidity("pos",e);a.$watch("required",function(a){a?d.$setValidity("pos",e):b?d.$setValidity("pos",e):d.$setValidity("pos",!0)});return b}d.$formatters.unshift(e);d.$parsers.unshift(e)}W.directive("geo",[function(){return{require:"ngModel",link:Kla}}]);W.directive("position",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/geo/position.html",scope:{disabled:"=?",required:"=?",order:"=?",form:"=",geom:"=",label:"@",mapSupport:"@",name:"@",hideHint:"=",showLabel:"=?",bulk:"=?",col:"=?"},controller:VQ,controllerAs:"posCtrl"}}]);
function VQ(a){this.v=a;this.g=null;this.label=void 0!==a.label?a.label:"Position";"false"==this.label&&(this.label=null);this.mapEnabled=!1;null==this.v.required&&(this.v.required=!0);this.j=Math.pow(10,8);this.showLabel=null!=this.v.showLabel?this.v.showLabel:!0;this.col=null!=a.col?a.col:"2";a.popoverContent="Takes DD, DMS, DDM or MGRS. If Lat/Lon, the first coordinate is assumed to be latitude unless it is zero-padded (0683000.55 or 058.135), three-digits (105&deg;30'10.1&quot; or 105.3), or contains the direction (68 30 12 W or 105 E).";
a.$watch("posText",function(){this.v.required||this.v.$emit("positionText",this.v.geom,this.v.posText);this.o()}.bind(this));a.$watch("order",this.o.bind(this));a.$watch("geom.lon",this.l.bind(this));a.$watch("geom.lat",this.l.bind(this));a.$on("position:mapEnabled",this.B.bind(this));a.$on("resetForm",function(a){void 0!==a&&a!=this.v.name||WQ(this,!1)}.bind(this));a.$on("$destroy",this.s.bind(this))}VQ.$inject=["$scope","$element"];
VQ.prototype.s=function(){this.g&&(this.g(),this.g=null);this.v=null};VQ.prototype.o=function(){if(this.v.posText){var a=uu(this.v.posText,this.v.order);null!=a&&90<Math.abs(a.lat)&&(a=null);if(null==a)try{var b=osasm.toLonLat(this.v.posText);a={lon:b[0],lat:b[1]}}catch(c){}null!=a&&(this.v.geom.lat=a.lat,this.v.geom.lon=a.lon)}};
VQ.prototype.l=function(){if(isNaN(this.v.geom.lat)||isNaN(this.v.geom.lon))this.v.posText="";else if(this.v.posText){var a=uu(this.v.posText,this.v.order);null!=a&&(1E-12<Math.abs(a.lat-this.v.geom.lat)||1E-12<Math.abs(a.lon-this.v.geom.lon))&&XQ(this)}else XQ(this)};function XQ(a){var b=a.v.geom.lat,c=a.v.geom.lon;a.v.posText=""+Math.abs(b)+(0<=b?"N ":"S ")+Math.abs(c)+(0<=c?"E":"W")}VQ.prototype.uN=function(){WQ(this,!this.mapEnabled)};VQ.prototype.toggleMapEnabled=VQ.prototype.uN;
VQ.prototype.A=function(a,b,c){!this.v.disabled&&b&&1<b.length&&(this.v.geom.lon=Math.round(b[0]*this.j)/this.j,this.v.geom.lat=Math.round(b[1]*this.j)/this.j,XQ(this),c&&WQ(this,!1),X(this.v))};VQ.prototype.B=function(a,b,c){a.targetScope!==this.v&&null!=c&&null!=b&&c===this.v.name&&WQ(this,b)};function WQ(a,b){a.mapEnabled!==b&&(a.mapEnabled=b,a.g&&(a.g(),a.g=null),a.mapEnabled&&(a.g=a.v.$on("position:mapClick",a.A.bind(a))),a.v.$emit("position:mapEnabled",a.mapEnabled,a.v.name),X(a.v))};var Lla={dO:"bbox",gO:"circle",iQ:"polygon"},YQ={bbox:{name:"Bounding Box",icon:"fa-square-o",tooltip:"Define an area by bounding box corners."},circle:{name:"Circle",icon:"fa-circle-o",tooltip:"Define an area by center point and radius."},polygon:{name:"Polygon",icon:"fa-star-o",tooltip:"Define an area from a list of coordinates."}};W.directive("userarea",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/query/area/userarea.html",controller:ZQ,controllerAs:"ctrl"}}]);
function ZQ(a,b,c){y.call(this);this.scope=a;this.element=b;this.g=a.area;this.l=new Lg(document);this.l.H("key",this.o,!1,this);this.j=new le(this.s,250,this);this.area=void 0;this.areaType="bbox";this.areaTypes=this.scope.areaTypes||mc(Lla);this.name=this.g&&this.g.get("title")||"New Area";this.canEditGeometry=!0;this.errorMsg="";this.lonFirst=!1;this.coordOrder=void 0;this.corner1={};this.corner2={};this.coordinates="";this.center={};this.radius=void 0;this.radiusUnits="km";this.units=["nmi","mi",
"km","m"];this.customPopoverContent="Enter coordinates with spaces between latitude/longitude and commas separating coordinate pairs or MGRS values. The polygon will be validated/closed if necessary.<br><br>Takes DD, DMS, DDM or MGRS. If Lat/Lon, the first coordinate is assumed to be latitude unless it is zero-padded (0683000.55 or 058.135), three-digits (105&deg;30'10.1&quot; or 105.3), or contains the direction (68 30 12 W or 105 E).";this.numInvalidCoords=0;if(this.g){qb(this.areaTypes,"circle");
var d=this.g.X();d&&(d=d.clone(),d.toLonLat(),b=d.aa(),"Polygon"==d.T()?(d=d.getCoordinates())&&1==d.length?(this.canEditGeometry=!0,this.areaType=Gu(d[0],b)?"bbox":"polygon",this.corner1.lon=$Q(b[0]),this.corner1.lat=$Q(b[1]),this.corner2.lon=$Q(b[2]),this.corner2.lat=$Q(b[3]),this.coordinates=d[0].map(function(a){return $Q(a[1])+" "+$Q(a[0])},this).join(",")):this.canEditGeometry=!1:this.canEditGeometry=!1)}this.Ae();a.$watch("ctrl.areaType",this.Ae.bind(this));a.$watch("ctrl.corner1.lon",this.Ae.bind(this));
a.$watch("ctrl.corner1.lat",this.Ae.bind(this));a.$watch("ctrl.corner2.lon",this.Ae.bind(this));a.$watch("ctrl.corner2.lat",this.Ae.bind(this));a.$watch("ctrl.center.lon",this.Ae.bind(this));a.$watch("ctrl.center.lat",this.Ae.bind(this));O.H("interpolation",this.Ae,!1,this);a.$on("$destroy",this.dispose.bind(this));c(function(){a.$emit("window.ready")})}w(ZQ,y);ZQ.$inject=["$scope","$element","$timeout"];
ZQ.prototype.J=function(){ZQ.C.J.call(this);O.M("interpolation",this.Ae,!1,this);Mla(this,void 0);Ma(this.l);this.l=void 0;Ma(this.j);this.scope=this.element=this.j=void 0};ZQ.prototype.cancel=function(){this.scope&&this.scope.cancel&&this.scope.cancel("cancel");this.close()};ZQ.prototype.cancel=ZQ.prototype.cancel;
ZQ.prototype.confirm=function(){if(this.scope&&this.scope.confirm&&this.area){var a=this.g;if(a){var b=this.area.X().clone();a.sb(b);a.set("_originalGeometry",b,!0);a.set("title",this.name,!0);b=this.area.get("interpolationMethod");a.set("interpolationMethod",b,!0)}else a=this.area,a.set("title",this.name,!0),a.Ue("_node",!0);this.scope.confirm(a)}this.close()};ZQ.prototype.confirm=ZQ.prototype.confirm;ZQ.prototype.close=function(){this.element&&KE(this.element)};
ZQ.prototype.o=function(a){27==a.keyCode&&this.cancel()};ZQ.prototype.TC=function(a){return(a=YQ[a])&&a.name?a.name:"Unspecified Type"};ZQ.prototype.getAreaTypeName=ZQ.prototype.TC;ZQ.prototype.SC=function(a){return(a=YQ[a])&&a.icon?a.icon:"fa-calculator"};ZQ.prototype.getAreaTypeIcon=ZQ.prototype.SC;ZQ.prototype.UC=function(a){return(a=YQ[a])&&a.tooltip?a.tooltip:"Enter coordinates to define an area."};ZQ.prototype.getAreaTypeTooltip=ZQ.prototype.UC;
function Mla(a,b){a.area&&$t&&$t.Fb(a.area);(a.area=b)&&$t&&(a=$t,a.ac(b,oG),a.oi(b.X().aa(),1.5))}ZQ.prototype.cI=function(){this.coordOrder=this.lonFirst?1:void 0;this.Ae()};ZQ.prototype.onLonFirstChange=ZQ.prototype.cI;ZQ.prototype.Ae=function(){this.j&&this.j.start()};ZQ.prototype.updateArea=ZQ.prototype.Ae;
ZQ.prototype.s=function(){if(!this.Xa()){var a;if(this.scope.areaForm.$valid){var b=kD().method;switch(this.areaType){case "bbox":var c;this.canEditGeometry||!this.scope.geometry?(a=this.aa())&&(c=Vk(a)):c=this.scope.geometry;a=c;b="rhumb";break;case "circle":c=new Jk([this.center.lon,this.center.lat]);a=YD(c,tB(this.radius,"m",this.radiusUnits),!0);b="none";break;case "polygon":a=Nla(this)}if(a){var d=new ek(a);d.set("_node",!1,!0);d.set("interpolationMethod",b,!0);d.set("title",this.name,!0);d.ga(H(a));
iu(a)}}Mla(this,d);X(this.scope)}};ZQ.prototype.aa=function(){var a;null!=this.corner1.lon&&null!=this.corner1.lat&&null!=this.corner2.lon&&null!=this.corner2.lat&&(a=[this.corner1.lon,this.corner1.lat,this.corner2.lon,this.corner2.lat]);return a};
function Nla(a){a.numInvalidCoords=0;if(a.coordinates&&(a=a.coordinates.split(",").map(function(a){try{a=a.trim();var b=uu(a,this.coordOrder);b&&90<Math.abs(b.lat)&&(b=void 0);b?b=[b.lon,b.lat]:b=osasm.toLonLat(a)}catch(e){b=void 0}b||this.numInvalidCoords++;return b},a).filter(CA),2<a.length&&(Cb(a[0],a[a.length-1])||a.push(a[0]),3<a.length))){var b=new Rk([a]);a=UD(b,!0);a!==b?b=a:b=void 0}return b}function $Q(a){return a.toFixed(14).replace(/\.?0+$/,"")}
function Ola(){return new Oc(function(a,b){FE({x:"center",y:"center",label:"Enter Area Coordinates",icon:"fa fa-calculator",height:"auto",width:500,modal:!1,"no-scroll":!0,"show-close":!0},"<userarea></userarea>",void 0,void 0,void 0,{confirm:a,cancel:b,area:void 0,areaTypes:void 0})})};function aR(a,b){b=void 0!==b?b:!0;UE.toggle(a,b);gF(hF.u(),new sF(a,b));C.dispatchEvent(new GF("zoom",{feature:a,geometry:a.X()}))}function bR(a,b){Q(R.u(),"filters.import",1);var c=new RQ(Ae,Be);TQ(c,new lE("importFile",b,void 0,a));SQ(c)}function cR(){Q(R.u(),"map.features.loadFromCoordinates",1);Ola().then(aR,va)}
function Pla(){Q(R.u(),"map.features.loadFromArea",1);cK({confirm:aR,confirmValue:void 0,prompt:"<span>Please choose an area from the list:</span><choosearea></choosearea>",windowOptions:{label:"Choose Area",icon:"fa fa-list-ul",x:"center",y:"center",width:"400",height:"auto","show-close":"true","no-scroll":"true",modal:"true"}})}function dR(){var a=Qla.clone();if(a){Q(R.u(),"map.features.queryWorld",1);var b=a.X();iu(b);b.set("_normalized",!0);a.set("interpolationMethod","none",!0);aR(a,!1)}}
function Ru(a){if(eR&&a&&a instanceof Rk){var b=Zi(Rla,"EPSG:4326",N);b=ei(b);if(Ke(a.ee(),b)||0==a.ee())return a.ic(eR.getCoordinates()),!0}return!1}var Rla=[-179.9999999999999,-89.99999999999999,180,90],eR=Vk(Rla),Qla=new ek({geometry:eR,title:"Whole World"});function HI(){PE.call(this);this.g=void 0;fR.stroke.color=O.get(gR,hR);fR.stroke.width=parseInt(O.get(iR,jR),10);kR.stroke.color=O.get(lR,mR);kR.stroke.width=parseInt(O.get(nR,oR),10);O.H(gR,this.JN,!1,this);O.H(iR,this.KN,!1,this);O.H(lR,this.HN,!1,this);O.H(nR,this.IN,!1,this);EP.u().H("submit",this.cJ,!1,this)}w(HI,PE);wa(HI);Cc(PE,{u:function(){return HI.u()}});
var gR="os.area.inColor",iR="os.area.inWidth",lR="os.area.exColor",nR="os.area.exWidth",hR="rgba(255,255,0,1)",jR="2",mR="rgba(255,0,0,1)",oR="2",Sla={stroke:{color:"rgba(136,136,136,1)",lineCap:"square",width:2}},fR={stroke:{color:"rgba(255,255,0,1)",lineCap:"square",width:2}},kR={stroke:{color:"rgba(255,0,0,1)",lineCap:"square",width:2}},Tla={fill:{color:"rgba(0,255,255,0.15)"},stroke:{color:"rgba(0,255,255,1)",lineCap:"square",width:2}};g=HI.prototype;g.Y=function(){return T.u()};
g.load=function(){return sf(Af(Nga(this)),function(a){a&&SE(this,a,!1)},this)};g.save=function(){var a=new DD,b=HD(this),c=b.filter(Oga).map(Ula);c=CD(a,c,{featureProjection:N});a=CD(a,b,{featureProjection:N});O.set("areas",c);O.set("areasAll",a);return Af()};function Ula(a){var b=a.get("_originalGeometry");b&&(a=a.clone(),a.sb(b),a.set("_originalGeometry",void 0));return a}g.Cz=function(a){a.set("_highlightStyle",void 0,!0);a.set("_style",Sla,!0);jH(a)};
g.qA=function(a,b){var c=!1,d=WE.getEntries(null,a.D()),e=void 0,f=T.u().W("draw").O();d&&0<d.length&&(e=d[0].includeArea?fR:kR);d=a.get("_selectStyle");var h=a.D();d!==e&&h&&(a.set("_selectStyle",e),jH(a),ym(f,h)&&(f.dispatchEvent(new wm("changefeature",a)),c=!0));c&&!b&&f.ia();return c};g.Vr=function(a){var b=T.u().W("draw").O(),c=a.D();c&&ym(b,c)&&b.dispatchEvent(new wm("changefeature",a));b.ia()};g.Kn=function(){this.g&&(T.u().Fb(this.g),this.g=void 0)};
g.pp=function(a){this.g&&(T.u().Fb(this.g),this.g=void 0);var b=this.get(a);a=T.u();b&&XB(a,b)&&(b=b.X())&&(b=new ek(b.clone()),b.set("_node",!1),this.g=a.ac(b,Tla))};
g.eh=function(a,b){if(a&&!a.get("interpolationMethod")){var c=a.get("_originalGeometry")||a.X(),d=!1;if(c instanceof Rk){var e=c.getCoordinates();1==e.length&&Gu(e[0],c.aa())&&(a.set("interpolationMethod","rhumb",!0),d=!0)}d||a.set("interpolationMethod",iD.method,!0);Ru(c)&&a.set("interpolationMethod","none")}return HI.C.eh.call(this,a,b)?a.hc=!0:!1};g.pv=function(a){var b=a.X();b.get("_normalized")||(b.toLonLat(),Qu(b),iu(b),a.sb(b))};function pR(a){return mj("string"===typeof a?yv(a):a)}
g.JN=function(a){a.j&&pR(a.j)!=fR.stroke.color&&(fR.stroke.color=pR(a.j),qR(this))};g.KN=function(a){a.j&&a.j!=fR.stroke.width&&(fR.stroke.width=parseInt(a.j,10),qR(this))};g.HN=function(a){a.j&&pR(a.j)!=kR.stroke.color&&(kR.stroke.color=pR(a.j),qR(this))};g.IN=function(a){a.j&&a.j!=kR.stroke.width&&(kR.stroke.width=parseInt(a.j,10),qR(this))};
function qR(a){var b=HD(a);db(b,function(a){if(null!=a.Qb()){var b=RE.u().getEntries(null,a.D());b&&0<b.length&&(b=b[0].includeArea?Ac(fR):Ac(kR),a.set("_selectStyle",b),jH(a),this.Vr(a))}},a)}g.cJ=function(a){var b=EP.u(),c=b.j;b=b.g;c&&b&&a.j.push(new sQ(c,b))};function Vla(){tz.call(this);this.Da("Areas");uz(this);this.fb("Options for Areas");this.vb(["areas","color","width"]);this.wc("fa fa-globe");this.fd="areasettings"}w(Vla,tz);W.directive("areasettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/config/areasettings.html",controller:rR,controllerAs:"area"}}]);
function rR(a){this.v=a;O.H(gR,this.Lz,!1,this);O.H(iR,this.Mz,!1,this);O.H(lR,this.Jz,!1,this);O.H(nR,this.Kz,!1,this);this.inColor=O.get(gR,hR);this.inWidth=parseInt(O.get(iR,jR),10)||2;this.exColor=O.get(lR,mR);this.exWidth=parseInt(O.get(nR,oR),10)||2;this.v.$watch("area.inColor",this.GH.bind(this));this.v.$watch("area.inWidth",this.HH.bind(this));this.v.$watch("area.exColor",this.bH.bind(this));this.v.$watch("area.exWidth",this.cH.bind(this));a.$on("$destroy",this.JJ.bind(this))}rR.$inject=["$scope"];
g=rR.prototype;g.JJ=function(){O.M(gR,this.Lz,!1,this);O.M(iR,this.Mz,!1,this);O.M(lR,this.Jz,!1,this);O.M(nR,this.Kz,!1,this);this.v=null};g.GH=function(a){a&&(O.set(gR,this.inColor),sR(this),X(this.v))};g.HH=function(a){a&&(O.set(iR,this.inWidth),sR(this),X(this.v))};g.bH=function(a){a&&(O.set(lR,this.exColor),sR(this),X(this.v))};g.cH=function(a){a&&(O.set(nR,this.exWidth),sR(this),X(this.v))};g.Lz=function(a){a.j&&a.j!=this.inColor&&(this.inColor=a.j,sR(this),X(this.v))};
g.Mz=function(a){a.j&&a.j!=this.inWidth&&(this.inWidth=parseInt(a.j,10),sR(this),X(this.v))};g.Jz=function(a){a.j&&a.j!=this.exColor&&(this.exColor=a.j,sR(this),X(this.v))};g.Kz=function(a){a.j&&a.j!=this.exWidth&&(this.exWidth=parseInt(a.j,10),sR(this),X(this.v))};
function sR(a){fR.stroke.color=a.inColor;fR.stroke.width=a.inWidth;kR.stroke.color=a.exColor;kR.stroke.width=a.exWidth;var b=PE.u(),c=HD(b);db(c,function(a){if(null!=a.Qb()){var c=WE.getEntries(null,a.D());c&&0<c.length&&(c=c[0].includeArea?Ac(fR):Ac(kR),a.set("_selectStyle",c),jH(a),b.Vr(a))}},a)}g.reset=function(){this.inColor=hR;this.inWidth=parseInt(jR,10)||2;this.exColor=mR;this.exWidth=parseInt(oR,10)||2;O.set(gR,hR);O.set(iR,jR);O.set(lR,mR);O.set(nR,oR);sR(this)};rR.prototype.reset=rR.prototype.reset;function Wla(){}g=Wla.prototype;g.state="ready";g.lb=!1;g.title="Interpolate all vectors";g.Ba=null;g.Fa=function(){if("ready"!==this.state){this.Ba="Command not in ready state.";var a=!1}else a=!0;return a?(this.state="executing",this.interpolate(),this.state="success",!0):!1};g.interpolate=function(){for(var a=pw(T.u()),b=0,c=a.length;b<c;b++){var d=a[b];if(d instanceof wl&&(d=d.O())){var e=d.Oa();if(e.length){d.clear(!0);if(!(d instanceof vL))for(var f=0,h=e.length;f<h;f++)pD(e[f]);d.Nc(e)}}}};
g.Cb=function(){this.state="ready";return!0};function Xla(){tz.call(this);this.Da("Interpolation");uz(this);this.fb("Interpolation settings for line/polygon segments");this.vb(["interpolation","line","polygon","render"]);this.wc("fa fa-ellipsis-h");this.fd="interpolationsettings"}w(Xla,tz);W.directive("interpolationsettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/config/interpolationsettings.html",controller:tR,controllerAs:"intCtrl"}}]);
function tR(a){this.v=a;this.g=new le(this.apply,400,this);O.H("propertychange",this.j,!1,this);a.$on("$destroy",this.l.bind(this));var b=this.g.start.bind(this.g);a.$watch("method",b);a.$watch("kilometers",b);this.update()}tR.$inject=["$scope"];tR.prototype.l=function(){O.M("propertychange",this.j,!1,this);this.g.dispose();this.v=null};tR.prototype.j=function(a){/^interpolation\.?/.test(a.l)&&this.update()};
tR.prototype.update=function(){var a=kD();this.v.kilometers=a.distance/1E3;this.v.method=a.method};tR.prototype.apply=function(){var a=this.v.method,b=this.v.kilometers;if(a&&b){a={method:a,distance:1E3*b};b=!1;var c=kD(),d;for(d in c)if(d in a&&a[d]!==c[d]){b=!0;break}b&&(lD(a),O.set("interpolation",a),(new Wla).Fa())}};function uR(a,b,c){y.call(this);this.o=null!=c?t(a,c):a;this.l=b;this.j=t(this.JD,this);this.g=[]}w(uR,y);g=uR.prototype;g.oj=!1;g.xk=0;g.rh=null;g.kf=function(a){this.g=arguments;this.rh||this.xk?this.oj=!0:vR(this)};g.stop=function(){this.rh&&(qa.clearTimeout(this.rh),this.rh=null,this.oj=!1,this.g=[])};g.pause=function(){this.xk++};g.resume=function(){this.xk--;this.xk||!this.oj||this.rh||(this.oj=!1,vR(this))};g.J=function(){uR.C.J.call(this);this.stop()};
g.JD=function(){this.rh=null;this.oj&&!this.xk&&(this.oj=!1,vR(this))};function vR(a){a.rh=ke(a.j,a.l);a.o.apply(null,a.g)};function wR(){y.call(this);this.sources=[];this.g={};this.o=new le(this.Hd,25,this);this.G=Yla;this.I=Zla}w(wR,y);var Zla=[],Yla=["title","visible"];g=wR.prototype;g.J=function(){wR.C.J.call(this);var a=V;a&&(a.M("dataSourceAdded",this.ox,!1,this),a.M("dataSourceRemoved",this.px,!1,this));for(var b in this.g)rh(this.g[b]);this.g={};this.sources.length=0};
g.init=function(){var a=V;a.H("dataSourceAdded",this.ox,!1,this);a.H("dataSourceRemoved",this.px,!1,this);a=GL(a);for(var b=0,c=a.length;b<c;b++){var d=a[b];d&&(xR(this,d),$la(this,a[b]))}};g.Yi=function(a){qb(this.sources,a)};function $la(a,b){ama(a,b);var c=b.D();a.g[c]=I(b,"propertychange",a.Hq,a)}function ama(a,b){b=b.D();b in a.g&&(rh(a.g[b]),delete a.g[b])}g.ox=function(a){a.source&&(xR(this,a.source),$la(this,a.source))};g.px=function(a){a.source&&(ama(this,a.source),this.Yi(a.source))};
function xR(a,b){if(b){a:{var c=0;for(var d=a.I.length;c<d;c++)if(!a.I[c](b)){c=!1;break a}c=!0}c?-1===a.sources.indexOf(b)&&a.sources.push(b):a.Yi(b);a.o.start()}}g.Hq=function(a){try{var b=a.l}catch(c){return}(a=a.target)&&b&&-1<this.G.indexOf(b)&&xR(this,a)};g.Hd=function(){};W.directive("legendguide",[function(){return{restrict:"E",replace:!0,scope:{closeFlag:"=",widget:"@"},templateUrl:"v1542394219/views/legend.html",controller:yR,controllerAs:"legend"}}]);
function yR(a,b){wR.call(this);this.G="color colorModel features featureVisibility geometryCenterShape geometryShape style title visible".split(" ");this.L=[DH,"visible","title"];this.scope=a;this.scope.$on("$destroy",this.dispose.bind(this));this.element=b;this.l=new uR(this.zC,500,this);this.s=null;this.A=this.B=!1;this.j={};this.widget="true"==a.widget;this.init()}w(yR,wR);yR.$inject=["$scope","$element"];g=yR.prototype;
g.J=function(){yR.C.J.call(this);C.M("legend:update",this.Hd,!1,this);var a=T.u();a.M("addLayer",this.Sx,!1,this);a.M("removeLayer",this.Tx,!1,this);for(var b in this.j)rh(this.j[b]);Ma(this.l);this.l=null;this.widget&&(a=a.Y())&&xh(a,"change:size",this.Hd,this);this.element=this.scope=this.s=null};
g.init=function(){yR.C.init.call(this);var a=this.element.find("canvas");a&&1==a.length&&(this.s=a[0]);C.H("legend:update",this.Hd,!1,this);a=T.u();a.H("addLayer",this.Sx,!1,this);a.H("removeLayer",this.Tx,!1,this);for(var b=pw(a).filter(function(a){return a instanceof VP}),c=0;c<b.length;c++)bma(this,b[c]);this.widget&&((a=a.Y())&&I(a,"change:size",this.Hd,this),a=O.get(zR,"15000px"),b=O.get(AR,"15000px"),this.element.css("left",a),this.element.css("top",b),this.element.draggable({containment:"#map-container",
start:this.jK.bind(this),stop:this.kK.bind(this)}),Hc(this.Hd,this))};g.Hd=function(){!this.A&&this.l&&this.l.kf()};g.zC=function(){if(this.s){if(this.widget){var a=angular.element("#map-container");var b=a.height()-50;a=a.width()-50}else b=2E3;aia(this.s,b,a);BR(this)}};g.Sx=function(a){a.layer instanceof VP&&bma(this,a.layer);this.o.start()};g.Tx=function(a){a.layer instanceof VP&&cma(this,a.layer);this.o.start()};function bma(a,b){cma(a,b);var c=b.D();a.j[c]=I(b,"propertychange",a.hJ,a)}
function cma(a,b){b=b.D();b in a.j&&(rh(a.j[b]),delete a.j[b])}g.hJ=function(a){try{var b=a.l}catch(c){return}b&&-1<this.L.indexOf(b)&&this.o.start()};g.jK=function(){angular.element("iframe").addClass("u-pointer-events-none");this.B=!0};
g.kK=function(){angular.element("iframe").removeClass("u-pointer-events-none");this.B=!1;if(this.element){this.element.height("auto");this.element.width("auto");if(!this.A&&this.element&&O){this.A=!0;var a=this.element.css("left"),b=this.element.css("top");O.set(zR,a);O.set(AR,b);this.A=!1}BR(this)}};
function BR(a,b){if(!a.B&&a.element&&a.widget){var c=a.element.css("left").replace("px",""),d=a.element.css("top").replace("px","");if(!isNaN(c)&&!isNaN(d)){var e=parseFloat(c),f=parseFloat(d);c=parseFloat(O.get(zR,c).replace("px",""));d=parseFloat(O.get(AR,d).replace("px",""));var h=parseFloat(a.element.css("width").replace("px","")),k=parseFloat(a.element.css("height").replace("px","")),l=angular.element("#map-container"),m=l.height(),n=l.width();l=l.offset().top;var p=!1;0>e?(a.element.css("left",
"5px"),p=!0):e+h>n&&(e=n-h,a.element.css("left",e+"px"),p=!0);f<l?(a.element.css("top",l+"px"),p=!0):f+k>l+m&&(f=l+m-k,a.element.css("top",f+"px"),p=!0);p||c==e&&d==f||(a.element.css("left",c+"px"),a.element.css("top",d+"px"),BR(a,b))}}}g.AJ=function(){CR(DR.u(),"legend");C.dispatchEvent(new jE("toggleUI","settings",!0))};yR.prototype.openSettings=yR.prototype.AJ;yR.prototype.close=function(){null!=this.scope.closeFlag?this.scope.closeFlag=!this.scope.closeFlag:(this.element.remove(),this.scope.$parent.$destroy())};
yR.prototype.close=yR.prototype.close;function ER(){tz.call(this);this.Da("Legend");uz(this);this.fb("Display a data legend when capturing a screenshot or animated GIF");this.wc("fa fa-map-signs");this.fd="legendsettings"}w(ER,tz);ER.prototype.D=function(){return"legend"};var AR="os.legend.position.top",zR="os.legend.position.left";W.directive("legendsettings",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/config/legendsettings.html",controller:FR,controllerAs:"legend"}}]);
function FR(a,b,c){y.call(this);this.scope=a;this.scope.$on("$destroy",this.dispose.bind(this));this.element=b;this.g=c;this.options=oL();-1===GR.indexOf(this.options.fontSize)&&(this.options.fontSize=kL.fontSize);this.scope.$watch("legend.options.bgColor",this.j.bind(this));this.scope.$watch("legend.options.showBackground",this.o.bind(this));this.scope.$watch("legend.options.opacity",this.l.bind(this));dma(this)}w(FR,y);FR.$inject=["$scope","$element","$compile"];var GR=[12,14,16,20,24,32,48,64];
FR.prototype.J=function(){FR.C.J.call(this);this.scope=this.element=this.g=null};function dma(a){if(a.scope&&a.element&&a.g){var b=a.element.find(".js-legend-settings__plugin-options");b.children().remove();var c="";mL.forEach(function(a){a.settingsUI&&(c=-1==a.settingsUI.indexOf("<")?c+("<"+a.settingsUI+"></"+a.settingsUI+">"):c+a.settingsUI)},a);b.html(c);a.g(b.contents())(a.scope)}}FR.prototype.yJ=function(){C.dispatchEvent(new jE("toggleUI","legend",!0))};FR.prototype.openLegend=FR.prototype.yJ;
FR.prototype.j=function(a,b){a!==b&&(O.set("os.legend.options.bgColor",this.options.bgColor),C.dispatchEvent("legend:update"))};FR.prototype.o=function(a,b){a!==b&&(O.set("os.legend.options.showBackground",this.options.showBackground),C.dispatchEvent("legend:update"))};FR.prototype.l=function(a,b){a!==b&&(O.set("os.legend.options.opacity",this.options.opacity),C.dispatchEvent("legend:update"))};FR.prototype.XB=function(){var a=GR;return a.indexOf(this.options.fontSize)<a.length-1};
FR.prototype.canIncreaseFontSize=FR.prototype.XB;FR.prototype.VB=function(){return 0<GR.indexOf(this.options.fontSize)};FR.prototype.canDecreaseFontSize=FR.prototype.VB;FR.prototype.NE=function(){var a=GR.indexOf(this.options.fontSize);-1!=a&&a<GR.length-1&&(this.options.fontSize=GR[++a],O.set("os.legend.options.fontSize",this.options.fontSize),C.dispatchEvent("legend:update"))};FR.prototype.increaseFontSize=FR.prototype.NE;
FR.prototype.pC=function(){var a=GR.indexOf(this.options.fontSize);-1!=a&&0<a&&(this.options.fontSize=GR[--a],O.set("os.legend.options.fontSize",this.options.fontSize),C.dispatchEvent("legend:update"))};FR.prototype.decreaseFontSize=FR.prototype.pC;FR.prototype.toggle=function(a){O.set("os.legend.options."+a,this.options[a]);C.dispatchEvent("legend:update")};FR.prototype.toggle=FR.prototype.toggle;FR.prototype.pN=function(){this.options.bold=!this.options.bold;this.toggle("bold")};
FR.prototype.toggleBold=FR.prototype.pN;function ema(){tz.call(this);this.Da("Projection");uz(this);this.fb("The base projection for the application");this.vb(["projection","epsg","mercator","geographic"]);this.wc("fa fa-map-o");this.fd="projectionsettings"}w(ema,tz);W.directive("projectionsettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/config/projectionsettings.html",controller:HR,controllerAs:"projCtrl"}}]);
function HR(a){this.v=a;var b=T.u().Y();I(b,"change:view",this.g,this);b=Zt(!0);b.sort(function(a,b){return Pb(a.code,b.code)});this.projections=b;fma(this);this.projection=this.appProjection;a.$on("$destroy",this.j.bind(this))}HR.$inject=["$scope"];HR.prototype.j=function(){var a=T.u().Y();xh(a,"change:view",this.g,this);this.v=null};function fma(a){for(var b=a.projections,c=N.Tb,d=0,e=b.length;d<e;d++)if(b[d].code===c){a.appProjection=b[d];a.projection=a.appProjection;break}}
HR.prototype.g=function(){Q(R.u(),"settings.projectionSwitch",1);fma(this);X(this.v)};HR.prototype.apply=function(){EP.u().start(this.projection.code)};HR.prototype.apply=HR.prototype.apply;function gma(){this.columns=[];this.color="#ffffff";this.title=this.tags=this.description="";this.mappings=[];this.preview=[];this.previewSelection=null};function IR(a){gma.call(this);this.file=a||null;this.replace=!1}w(IR,gma);function FP(a){mA.call(this,a);this.log=hma;var b=a.T();this.title="Add "+(b?b+" ":"")+'"'+a.S()+'"'}w(FP,mA);var hma=E.V("os.data.ActivateDescriptor");FP.prototype.Fa=function(){return oA(this)?(this.state="executing",pA(this)):!1};FP.prototype.Cb=function(){this.state="reverting";return qA(this)};FP.prototype.g=function(){nA(this);this.state="success";this.dispatchEvent(new z("executed"))};FP.prototype.j=function(){nA(this);this.state="ready";this.dispatchEvent(new z("reverted"))};W.directive("fileexists",[function(){return{restrict:"E",templateUrl:"v1542394219/views/im/fileexists.html",controller:ima,controllerAs:"fileExists"}}]);function ima(a){a.$watch("confirmValue",function(b,c){b!=c&&(a.$parent.confirmValue=b)});a.application=ws("the application");a.$emit("window.ready")}ima.$inject=["$scope"];W.directive("urlexists",[function(){return{restrict:"E",templateUrl:"v1542394219/views/im/urlexists.html",controller:jma,controllerAs:"urlExists"}}]);function jma(a){a.$watch("confirmValue",function(b,c){b!=c&&(a.$parent.confirmValue=b)});a.$emit("window.ready")}jma.$inject=["$scope"];function JR(){RQ.call(this);this.log=kma}w(JR,RQ);var kma=E.V("os.ui.im.DuplicateImportProcess");g=JR.prototype;g.lr=function(){return this.g?JR.C.lr.call(this)&&this.Ms():!1};g.Ms=function(){if(this.g){var a=this.g.Ka();return!!a&&null!=KR(a)}return!1};
g.um=function(){var a={confirm:this.UG.bind(this),confirmValue:"saveNew",prompt:"<fileexists></fileexists>",windowOptions:{label:"File Exists!",icon:"fa fa-exclamation-triangle",x:"center",y:"center",width:400,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0}},b={fileName:this.g.getFileName()};cK(a,b)};
g.Bm=function(){var a=this.g.Ka(),b=KR(a).S(),c=this.VG.bind(this);cK({confirm:c,confirmValue:"activate",prompt:"<urlexists></urlexists>",windowOptions:{label:"URL Exists!",icon:"fa fa-exclamation-triangle",x:"center",y:"center",width:450,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0}},{current:b,url:a})};
g.UG=function(a){var b=this.g;"saveNew"==a?(qy(my.u(),b),this.Bg()):"replace"==a?tf(ry(my.u(),b),this.nI,this.GK,this):"replaceAndImport"==a?this.kr():this.Be("Unknown choice for duplicate file: "+a)};g.nI=function(){var a=KR(this.g.Ka());if(a){var b=a.isActive();a.setActive(!1);a=new FP(a);b?a.Fa():gF(EF,a)}};g.GK=function(){this.Be('Failed to store local file "'+this.g.getFileName()+'"! Cancelling import.')};
g.VG=function(a){var b=this.g.Ka();"activate"==a?KR(b).setActive(!0):"reimport"==a?this.kr():"createNew"==a?this.Bg():this.Be("Unknown choice for duplicate URL: "+a)};g.kr=function(){this.Bg()};function KR(a){for(var b=pE(V),c=0,d=b.length;c<d;c++)if(b[c].yh(a))return b[c];return null};function LR(){JR.call(this)}w(LR,JR);LR.prototype.um=function(){LR.C.um.call(this)};LR.prototype.Bm=function(){LR.C.Bm.call(this)};LR.prototype.kr=function(){var a=KR(this.g.Ka()),b=new IR;a instanceof MR&&(b=a.l);b.descriptor=a;b.replace=!0;(a=mH(nH.u(),a.D()))&&(b.color=QB(a));this.Bg(b)};W.directive("servers",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/config/servers.html",controller:NR,controllerAs:"servers"}}]);function NR(a){this.v=a;var b=V;b.H("addDataProvider",this.Yh,!1,this);b.H("removeDataProvider",this.Yh,!1,this);this.Yh();a.$on("$destroy",this.lK.bind(this))}NR.$inject=["$scope"];var OR=E.V("os.ui.ServersCtrl");g=NR.prototype;
g.lK=function(){if(this.v&&this.v.data)for(var a=this.v.data,b=0,c=a.length;b<c;b++)a[b].item.M("propertychange",this.oq,!1,this);a=V;a.M("addDataProvider",this.Yh,!1,this);a.M("removeDataProvider",this.Yh,!1,this);this.v=null};
g.Yh=function(){if(this.v){var a=V.o.na();this.v.all=!0;var b=[];if(a)for(var c=0,d=0,e=a.length;d<e;d++){var f=a[d];f.jm&&(b.push({id:c,enabled:f.mc(),edit:f.Ee,loading:!1,error:f.getError(),label:f.ba(),item:f}),f instanceof UI&&(b[b.length-1].loading=f.mb()),f.mc()||(this.v.all=!1),f.M("propertychange",this.oq,!1,this),f.H("propertychange",this.oq,!1,this),c++)}this.v.data=b;this.apply()}};g.oq=function(a){a=a.l;"loading"!==a&&"error"!==a||this.Yh()};g.apply=function(){X(this.v)};
g.update=function(a){if(this.v){void 0===a&&(a=!0);var b=this.v.data;if(b){this.v.all=!0;for(var c=0,d=b.length;c<d;c++){var e=b[c].enabled,f=b[c].item;if(f.mc()!==e){if(!e&&a&&lma(this,f,this.update.bind(this,!1),!1))continue;var h=V,k=f.D(),l=e;if(k=h.rb(k))k.eb(l),h.dispatchEvent(new QI("editDataProvider",k));e&&f.load()}O.set([f.Ee?"userProviders":"providers",f.D(),"enabled"],e);e||(PR(f,!0),this.v.all=!1)}}}};NR.prototype.update=NR.prototype.update;
function lma(a,b,c,d){var e=PR(b);return 0<e.length?(b='The "'+b.ba()+'" server is currently providing the following active layers:<ul><li>'+e.join("</li><li>")+"</li></ul>Disabling this server will remove these layers. Are you sure you wish to disable the server?",d&&(b=b.replace("Disabling","Removing"),b=b.replace("disable","remove")),cK({confirm:c,cancel:a.Yh.bind(a),prompt:b,yesText:"Yes",noText:"No",noIcon:"fa fa-remove",windowOptions:{label:"Active Layers Exist",icon:"fa fa-warning",x:"center",
y:"center",width:"400",height:"auto",modal:"true",headerClass:"bg-warning u-bg-warning-text"}}),!0):!1}function PR(a,b){a=pE(V,a.D()+"#");var c=[];if(a)for(var d=0,e=a.length;d<e;d++)a[d].isActive()&&(c.push(a[d].S()),b&&a[d].setActive(!1));return c}NR.prototype.Wh=function(){var a=this.v.data;if(a){for(var b=0,c=a.length;b<c;b++)a[b].enabled=this.v.all;this.update()}};NR.prototype.toggleAll=NR.prototype.Wh;
NR.prototype.add=function(){Q(R.u(),"servers.addServer",1);var a=new LR;TQ(a,new lE("importUrl"));SQ(a)};NR.prototype.add=NR.prototype.add;NR.prototype.Pc=function(a){var b=KQ.u();a:{var c=V;for(var d in c.l){var e=c.l[d];if(e.g===a.constructor){c=e.type;break a}}c=null}b=Fla(b,c);a.Ee?Q(R.u(),"servers.edit",1):Q(R.u(),"servers.view",1);b?b.Ib(null,{provider:a,type:c}):(a='There is no import UI defined for "'+c+'".',At(zt.u(),a,rs),E.error(OR,a))};NR.prototype.edit=NR.prototype.Pc;
NR.prototype.remove=function(a,b){void 0===b&&(b=!0);Q(R.u(),"servers.delete",1);if(!(0<PR(a,!b).length&&b&&lma(this,a,this.remove.bind(this,a,!1),!0))){b=O;var c=["userProviders",a.D()];"string"==typeof c&&(c=c.split("."));var d=b.get(c);Es(b.o,c);var e=Os(c);Es(b.j.user,e);"object"===xa(d)?Yt(c,void 0,d):mb(Hs,Ms(c.join(".")));Rt(b,c,void 0,d);dJ(V,a.D());E.info(OR,'Removed provider "'+a.ba()+'"')}};NR.prototype.remove=NR.prototype.remove;
NR.prototype.refresh=function(a){E.info(OR,'Refreshing provider "'+a.ba()+'"');Q(R.u(),"servers.refresh",1);a instanceof UI?a.mb()||a.load(!0):a.load(!0)};NR.prototype.refresh=NR.prototype.refresh;function QR(){tz.call(this);this.Da("Data Servers");this.fb("Add and configure data servers");this.vb(["servers","data","provider"]);this.wc("fa fa-database");this.fd="servers"}w(QR,tz);QR.prototype.D=function(){return"servers"};function mma(){tz.call(this);this.Da("Theme");this.fb("Set Application Theme");this.vb(["Theme"]);this.wc("fa fa-paint-brush");this.fd="themesettings"}w(mma,tz);var nma={Default:"overrides_slate_compact"};W.directive("themesettings",[function(){return{restrict:"E",templateUrl:"v1542394219/views/config/themesettings.html",controller:RR,controllerAs:"ctrl"}}]);
function RR(a){this.v=a;this.themes=O.get("themes",nma);this.theme=O.get("theme","Default");O.H("theme",this.g,!1,this);a.$on("$destroy",this.j.bind(this))}RR.$inject=["$scope"];RR.prototype.j=function(){O.M("theme",this.g,!1,this);this.v=null};RR.prototype.g=function(a){a.j&&a.j!==this.theme&&(this.theme=a.j,X(this.v))};RR.prototype.fJ=function(a){a!=this.theme&&O.set("theme",this.theme)};RR.prototype.onThemeChange=RR.prototype.fJ;var SR=null;
function oma(){return new Oc(function(a,b){var c=/(themes\/).*?(\..*\.css)/,d=$("[rel=stylesheet]");d=ib(d,function(a){return c.test(a.href)});var e=O.get("theme","Default"),f=O.get("themes",nma);f[e]||(e="Default",O.set("theme",e));if(e=f[e]){var h=d.href.replace(c,"$1"+e+"$2");d.href!=h?(SR&&(SR.cancel(),SR=null),SR=pma(h,e).then(function(){SR=null;qma();a()},function(c){c instanceof dd?a():(SR=null,b('Failed loading the application theme: could not load CSS for "'+h+'".'))})):a()}else b("Failed loading the application theme: default theme is missing.")})}
function rma(){oma()}function pma(a,b){return new Oc(function(c,d){var e=$('<link rel="stylesheet" type="text/css" href="'+a+'"></link>');$("head").append(e);e=new ne(sma.bind(void 0,b));e.qh=function(){Uy?Uy.get("$timeout")(function(){c()},200):c()};e.Ri=function(){d()};e.start(50,15E3)})}
function sma(a){var b=$(".u-loaded-theme");b&&b.length||(b=$('<div class="u-loaded-theme" style="position: absolute; left: -9999px"></div>'),$("body").append(b));return b&&b.length?window.getComputedStyle(b[0],":before").content.replace(/^['"](.*)['"]$/,"$1")===a:!1}function qma(){var a=/(themes\/).*?(\..*\.css)/,b=$("[rel=stylesheet]");b=eb(b,function(b){return a.test(b.href)});for(var c=0;c<b.length-1;c++)$(b[c]).remove();C&&C.dispatchEvent(new z(TR))}var TR="theme.changed";function tma(){tz.call(this);this.Da("Units");uz(this);this.fb("Units of Measure");this.vb(["Metric","Imperial","Nautical"]);this.wc("fa fa-calculator");this.fd="unitsettings"}w(tma,tz);W.directive("unitsettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/config/unitsettings.html",controller:UR,controllerAs:"unitsCtrl"}}]);
function UR(a){this.v=a;this.g=$z.u();this.g.H("propertychange",this.j,!1,this);var b=this.g.l;this.allUnits=[];for(var c in b){var d=b[c].distance;d&&this.allUnits.push({title:d.S(),system:d.hf()})}this.units=this.g.g;this.v.$watch("unitsCtrl.units",this.o.bind(this));a.$on("$destroy",this.l.bind(this))}UR.$inject=["$scope"];UR.prototype.l=function(){this.g.M("propertychange",this.j,!1,this);this.v=this.g=null};UR.prototype.j=function(a){(a=a.o)&&a!==this.units&&(this.units=a,X(this.v))};
UR.prototype.o=function(a,b){this.g&&a&&b&&a!==b&&aA(this.g,a)};function uma(a){return function(b){b=Vy(b);b=b.replace(/\[([^|]+)\|([^\]]+)\]/g,"<a onclick=\"$(this).scope().$emit('dispatch','$2')\">$1</a>");return a.trustAsHtml(b)}}uma.$inject=["$sce"];W.filter("alertlink",["$sce",uma]);W.directive("alertPopup",[function(){return{replace:!0,restrict:"AE",scope:!0,templateUrl:"v1542394219/views/alert/alertpopup.html",controller:VR,controllerAs:"alertPopupCtrl"}}]);function VR(a){this.v=a;this.o=0;this.g=null;this.j=!1;this.l=null;this.alertPopups=[];Ct||(Ct=zt.u());Bt(Ct,"alertpopups",this.s,this);Ct.H("alert",this.s,!1,this);Ct.H("clearAlerts",this.ih,!1,this);a.$on("dispatch",vma);a.$on("$destroy",this.B.bind(this))}VR.$inject=["$scope"];
VR.prototype.B=function(){Ct.M("alert",this.s,!1,this);Ct.M("clearAlerts",this.ih,!1,this);this.g&&(this.g.dispose(),this.g=null);this.v=this.Ma=null};VR.prototype.s=function(a){if(this.l)if(a.j==this.l.j){this.g||(this.g=new le(this.A,1E4,this));this.g.start();this.o++;var b=a.N;this.o>=b&&!this.j&&(this.j=!0,5==b&&(b=new vs("Too many duplicate alerts received! Open the alert window for details.",ss),wma(this,b)))}else this.A();this.l=a;this.j||wma(this,a)};
VR.prototype.A=function(){this.o=0;this.j=!1;this.l=null;this.g&&(this.g.dispose(),this.g=null)};
function wma(a,b){if(O.l?O.get(["showAlertPopups"],!0):1){var c=$b(),d=function(a){if(this.v){var b=a.target.msg;a="";a=b?jb(this.alertPopups,function(a){return a.msg==b}):jb(this.alertPopups,function(a){return a.id==c});-1!=a&&(this.alertPopups.splice(a,1),X(this.v))}},e=b.L;if(!e){e=new A;var f=a.v,h=function(){f.hovered?setTimeout(h,1E3):e.dispatchEvent("dismissAlert")};setTimeout(h,1E4)}e.Ra("dismissAlert",d,!1,a);var k=b.j;b={id:c,msg:Tb(k,500),tooltip:k,severity:b.s.toString(),timeout:d};a.alertPopups.push(b);
X(a.v)}}VR.prototype.ih=function(){if(this.alertPopups&&this.v){for(var a=0;a<this.alertPopups.length;a++)this.alertPopups[a].canClose&&clearTimeout(this.alertPopups[a].timeout);this.alertPopups=eb(this.alertPopups,function(a){return!a.canClose});X(this.v)}};VR.prototype.clearAlerts=VR.prototype.ih;VR.prototype.sC=function(a,b){if(O.l?O.get(["showAlertPopups"],!0):1)this.alertPopups.splice(a,1),clearTimeout(b.timeout);C.dispatchEvent(new z("dismissAlert",b))};VR.prototype.dismissAlert=VR.prototype.sC;
function vma(a,b){C.dispatchEvent(b)};function xma(){var a=Uy.get("$compile"),b=Uy.get("$rootScope").$new();a=a("<alert-popup></alert-popup>")(b)[0];zn.call(this,{element:a})}w(xma,zn);function WR(a){An.call(this,a)}w(WR,An);WR.prototype.To=function(a){for(var b={},c=[],d=a.layerStatesArray,e=a.viewState.resolution,f=0,h=d.length;f<h;++f){var k=d[f],l=k,m=e;if(l.layer.Hb()&&m>=l.minResolution&&m<l.maxResolution&&(k=k.layer.O())&&(k=k.kl)&&(k=k(a)))if(Array.isArray(k))for(l=0,m=k.length;l<m;++l)k[l]in b||(c.push(k[l]),b[k[l]]=!0);else k in b||(c.push(k),b[k]=!0)}return c};
WR.prototype.qv=function(a){if(a){if(a=this.To(a),!jk(a,this.A)){xg(this.g);var b=1<a.length?$f("li",void 0,"Sources:"):$f("li",void 0,"Source:");var c=vg(b);this.g.appendChild(c);c=0;for(var d=a.length;c<d;++c)b=$f("li",void 0,a[c]),b=vg(b),this.g.appendChild(b);c=0<a.length;this.j!=c&&(this.element.style.display=c?"":"none",this.j=c);this.A=a}}else this.j&&(this.element.style.display="none",this.j=!1)};An.prototype.Ou=va;function XR(a){a=a?a:{};var b=null!=a.className?a.className:"ol-mapmode",c=null!=a.textClass?a.textClass:"ol-mapmode-text";this.j=a.tipLabel?a.tipLabel:"Toggle 2D/3D view";this.content=sg("SPAN",c);this.g=sg("I","fa fa-spin fa-spinner");this.button=sg("BUTTON",{"class":b+"-toggle",type:"button",title:this.j},this.content);I(this.button,"click",XR.prototype.l,this);b=sg("DIV",b+" ol-unselectable ol-control",this.button);zn.call(this,{element:b,target:a.target});yma(this);T.u().H("propertychange",this.s,
!1,this)}w(XR,zn);XR.prototype.J=function(){T.u().M("propertychange",this.s,!1,this);this.button&&(xh(this.button,"click",XR.prototype.l,this),this.button=void 0);this.g=this.content=void 0};XR.prototype.l=function(a){a.preventDefault();C.dispatchEvent("toggleView")};XR.prototype.s=function(a){a=a.l;"map:change:init3d"!==a&&"map:change:view3d"!==a||yma(this)};
function yma(a){if(a.button&&a.content&&a.g){var b=T.u();b.o?(Eg(a.content,""),a.content.appendChild(a.g),a.button.title="Initializing 3D view"):(yg(a.g),Eg(a.content,b.Qa()?"3D":"2D"),a.button.title=a.j)}};function YR(a){a=a||{};a.autoHide=!1;a.render=zma;Cn.call(this,a)}w(YR,Cn);YR.prototype.l=function(){var a=T.u();a.Qa()?a.Kk():YR.C.l.call(this)};function zma(a){var b=T.u();if(b.Qa()){a=Yu(b);if(!a)return;a=a.ju()}else{a=a.frameState;if(!a)return;a=a.viewState.rotation}if(a!=this.g){b="rotate("+a+"rad)";if(this.j){var c=this.element;0===a?HH(c,"ol-hidden"):IH(c,"ol-hidden")}this.Rb.style.msTransform=b;this.Rb.style.webkitTransform=b;this.Rb.style.transform=b}this.g=a};function ZR(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-scale-line";this.j=document.createElement("DIV");this.j.className=b+"-inner";this.K=document.createElement("DIV");this.K.className=b+" ol-unselectable";this.K.appendChild(this.j);this.A=null;this.l=void 0!==a.minWidth?a.minWidth:64;this.g=!1;this.B=void 0;this.s="";zn.call(this,{element:this.K,render:a.render?a.render:Ama,target:a.target});I(this,Hh($R),this.G,this);this.Zc(a.units||"metric")}G(ZR,zn);var Bma=[1,2,5];
ZR.prototype.Rc=function(){return this.get($R)};function Ama(a){(a=a.frameState)?this.A=a.viewState:this.A=null;this.Sp()}ZR.prototype.G=function(){this.Sp()};ZR.prototype.Zc=function(a){this.set($R,a)};
ZR.prototype.Sp=function(){var a=this.A;if(a){var b=a.center,c=a.projection,d=this.Rc();a=Ki(c,a.resolution,b,"degrees"==d?"degrees":"m");"degrees"!=d&&(a*=yi(c));var e=this.l*a;b="";"degrees"==d?(b=wi.degrees,"degrees"==c.Rc()?e*=b:a/=b,e<b/60?(b="\u2033",a*=3600):e<b?(b="\u2032",a*=60):b="\u00b0"):"imperial"==d?.9144>e?(b="in",a/=.0254):1609.344>e?(b="ft",a/=.3048):(b="mi",a/=1609.344):"nautical"==d?(a/=1852,b="nm"):"metric"==d?.001>e?(b="\u03bcm",a*=1E6):1>e?(b="mm",a*=1E3):1E3>e?b="m":(b="km",
a/=1E3):"us"==d?.9144>e?(b="in",a*=39.37):1609.344>e?(b="ft",a/=.30480061):(b="mi",a/=1609.3472):Rh(!1,33);for(d=3*Math.floor(Math.log(this.l*a)/Math.log(10));;){e=Bma[(d%3+3)%3]*Math.pow(10,Math.floor(d/3));c=Math.round(e/a);if(isNaN(c)){this.K.style.display="none";this.g=!1;return}if(c>=this.l)break;++d}a=e+" "+b;this.s!=a&&(this.s=this.j.innerHTML=a);this.B!=c&&(this.j.style.width=c+"px",this.B=c);this.g||(this.K.style.display="",this.g=!0)}else this.g&&(this.K.style.display="none",this.g=!1)};
var $R="units";function aS(a){ZR.call(this,a);a=$z.u();this.Zc(a.g);a.H("propertychange",this.hx,!1,this)}w(aS,ZR);g=aS.prototype;g.J=function(){$z.u().M("propertychange",this.hx,!1,this);aS.C.J.call(this)};g.hx=function(a){a=a.o;"string"===typeof a&&a!=this.Rc()&&this.Zc(a)};g.hide=function(){this.g&&(this.K.style.display="none",this.g=!1)};
g.Sp=function(){var a=this.A;if(a){var b=this.Y(),c=b.Vd(a.center);if(c)if(c[0]+=1,b=b.cd(c)){a=Vi(a.center,N);b=Vi(b,N);a=window.osasm?osasm.geodesicInverse(a,b).distance:NaN;c=this.l*a;b="";var d=this.Rc();"degrees"==d?(b=wi.degrees,a/=b,c<b/60?(b="\u2033",a*=3600):c<b?(b="\u2032",a*=60):b="\u00b0"):"imperial"==d?.9144>c?(b="in",a/=.0254):1609.344>c?(b="ft",a/=.3048):(b="mi",a/=1609.344):"nautical"==d||"nauticalmile"==d?(a/=1852,b="nmi"):"metric"==d?1>c?(b="mm",a*=1E3):1E3>c?b="m":(b="km",a/=1E3):
"us"==d?.9144>c?(b="in",a*=39.37):1609.344>c?(b="ft",a/=.30480061):(b="mi",a/=1609.3472):"mile"==d?(b="mi",a/=1609.3472):"yard"==d?(b="yd",a*=1.09361):"feet"==d?(b="ft",a/=.30480061):Rh(!1,33);for(var e=3*Math.floor(Math.log(this.l*a)/Math.log(10));;){d=Bma[(e%3+3)%3]*Math.pow(10,Math.floor(e/3));c=Math.round(d/a);if(isNaN(c)){this.K.style.display="none";this.g=!1;return}if(c>=this.l)break;++e}a=d;if(.01>d||1E4<d)a=d.toExponential();a=a+" "+b;this.s!=a&&this.j&&(b=Wf(a),this.j.innerHTML=Vf(b),this.s=
a);this.B!=c&&(this.j.style.width=c+"px",this.B=c);this.g||(this.K.style.display="",this.g=!0)}else this.hide();else this.hide()}else this.hide()};g.tb=function(){return this.K};function bS(a){Dn.call(this,a)}w(bS,Dn);bS.prototype.g=function(a){var b=T.u();if(b.Qa()){if(b=Yu(b))a=hD(!0,0>a),cS(b,a)}else bS.C.g.call(this,a)};function Cma(){var a=[],b=new aS({className:"ol-scale-line",target:document.getElementById("scale-line")}),c=b.tb();c.className+=" position-relative";a.push(b);if(c=document.getElementById("mouse-position"))b=new rP({projection:"EPSG:4326",className:"ol-mouse-position",target:c,undefinedHTML:"&nbsp;",QN:!0}),c=b.tb(),c.className+=" position-relative",a.push(b);b=new dA({target:document.getElementById("zoom-level")});c=b.tb();c.className+=" position-relative";a.push(b);c=new bS;a.push(c);c=new YR;
a.push(c);c=new XR;a.push(c);c=new xma;a.push(c);c=new WR({collapsible:!1});a.push(c);return new Kh(a)};function Dma(a,b){var c=a.O();if(c&&uL(c)){a=xL(c,b);var d=c.G;if(d&&(b.showAuto||b.showManual)){var e=d.g?d.g.g:null;if(e){c=e.kd()+": ";var f={},h=d.j;if(b.showManual&&h)for(var k in h)f[k]=h[k];d=d.l;if(b.showAuto)for(k in d)k in h||(f[k]=d[k]);h=nc(f);!b.showColumn&&0<h.length&&(c="",a.image&&a.image.fill&&(a.image.fill.color="rgba(0,0,0,0)"),a.stroke&&(a.stroke.color="rgba(0,0,0,0)"),d=b.showVector?10:0,wL(a,b,e.kd(),d,!0));if(0<h.length)for(h.sort(e instanceof gL?eia:Bb),e=0;e<h.length;e++)k=
h[e],a.image&&a.image.fill&&(a.image.fill.color=f[k]),a.stroke&&(a.stroke.color=f[k]),d=0,b.showVector&&(d+=10),b.showColumn||(d+=10),wL(a,b,c+k,d)}}}}W.directive("colormodellegendsettings",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/data/histo/colormodellegendsettings.html"}}]);Fw("*/*",function(a){return Wc(!(!a||!a.byteLength))},1E6);Fw("text/xml",function(a,b,c){var d;if(c&&"string"===typeof c){var e=xmlLexer.create(),f=["open-tag"],h="",k=!1,l=function(a){if(-1<f.indexOf(a.type))if("open-tag"===a.type){if(d)e.off("data",l);else{var b=a.value.indexOf(":"),m=a.value;-1<b&&(h=":"+a.value.substring(0,b),m=a.value.substring(b+1));d={content:c,yz:m,Xr:"",cC:a.value}}f.push("attribute-name")}else"attribute-name"===a.type?(f.pop(),a.value==="xmlns"+h&&(k=!0),f.push("attribute-value")):"attribute-value"===a.type&&(f.pop(),k&&(d.Xr=a.value),
k=!1,f.push("attribute-name"));else d=void 0};e.on("data",l);a=c.replace(/\s*\x3c!--[^]*?(--\x3e|$)\s*/g,"");e.write(a);d&&(b=a.indexOf("<"+d.cC),-1<b?(a=a.substring(0,b),a=a.replace(/^\s*<\?xml .*?\?>\s*/g,""),(a=a.replace(/^\s*<!.*?>\s*/g,"").trim())&&(d=void 0)):d=void 0)}return Wc(d)},0,"text/plain");
function dS(a,b){if(!a&&!b)throw Error("At least one of the [rootTagRegex, rootNSRegex] must be defined and not null");return function(c,d,e){var f;!e||b&&!b.test(e.Xr)||a&&!a.test(e.yz)||(f=e);return Wc(f)}};Fw("text/xml; subtype=FILTER",dS(/^filters$/i,/\/state\//i),0,"text/xml");var Ema=[239,187,191];function eS(){}eS.prototype.ba=function(){return"File"};eS.prototype.save=function(a,b,c){return fS(a,b,c)};function fS(a,b,c){c=c||"text/plain;charset=utf-8";if("undefined"!=typeof saveAs){var d=[];"string"===typeof b&&b.startsWith("\ufeff")&&(d.push(new Uint8Array(Ema)),b=b.replace("\ufeff",""));d.push(b);saveAs(new Blob(d,{type:c}),a);return!0}return"undefined"!=typeof saveTextAs&&"string"===typeof b?(saveTextAs(b,a),!0):!1};function gS(){this.g=null;this.j={}}gS.prototype.Bb=function(a){a instanceof ArrayBuffer&&(a=Ow(a)||null);a instanceof Document?this.g=a:"string"===typeof a&&(this.g=VA(a))};gS.prototype.oc=function(){this.j=this.g=null};gS.prototype.vd=function(){return null!=this.g};
gS.prototype.Wc=function(){if(this.g){var a=null,b=Ag(this.g),c=b.localName?b.localName.toLowerCase():"";this.g=null;if("filters"==c)a=Fma(this,b);else if("state"==c)a=Fma(this,b);else if("pqs"==c){a=b.querySelector("attributeFilter");c=b.querySelector("typeName");b=[];if(a&&c){a=zg(a)||[];c=c.textContent;for(var d=0;d<a.length;d++){a:{var e=a[d];var f=null;if(e){var h=e.getAttribute("namehint")||"",k=WA(e);k=k.replace(/xmlns=("|')[^"']*("|')/g,"");k=k.replace(/ogc:/g,"");k=k.replace(/>\s+</g,"><");
if(this.j[k+h]){e=null;break a}this.j[k+h]=!0;f=new eJ;f.Zf(k);f.fb(e.getAttribute("description")||"");f.Ta(h)}e=f}e&&(e.type=c,b.push(e))}}a=b}return a}return null};
function Fma(a,b){b=b.querySelectorAll("filter");var c=[];if(b&&0<b.length)for(var d=0;d<b.length;d++){a:{var e=a,f=b[d];var h=[];var k=zg(f);if(k&&0<k.length){var l=f.getAttribute("title")||"",m=f.getAttribute("match"),n=f.getAttribute("type")||"";k=WA(k[0]);k=k.replace(/xmlns=("|')[^"']*("|')/g,"");k=k.replace(/ogc:/g,"");k=k.replace(/>\s+</g,"><");if(e.j[k+l]){h=null;break a}e.j[k+l]=!0;e=new eJ;e.Zf(k);n=QJ(n);if(0<n.length)for(e.fb(f.getAttribute("description")),e.Ta(l),e.Sb(n[0]),e.eb(!0),e.xh=
m?"AND"==m.toUpperCase():!0,h.push(e),f=1,l=n.length;f<l;f++)m=e.clone(),m.ga($b()),m.Sb(n[f]),h.push(m)}h=0<h.length?h:null}h&&(c=c.concat(h))}return c};W.directive("layerpicker",[function(){return{restrict:"AE",replace:!0,scope:{layer:"=?",layers:"=?",isRequired:"=?",layersFilter:"&?",maxNumLayers:"@?",formatter:"=?",matcher:"=?",placeholderText:"@?",emitName:"@?"},templateUrl:"v1542394219/views/layer/layerpicker.html",controller:hS,controllerAs:"pickerCtrl"}}]);
function hS(a,b,c){this.v=a;this.o=this.v.maxNumLayers?this.v.maxNumLayers:1;this.nh=this.v.layersFilter?this.v.layersFilter:this.s;this.G=this.v.placeholderText||"Select Layer"+(this.multiple()?"s":"")+"...";this.l=null!=this.v.emitName?this.v.emitName:"layerpicker";this.layersList=this.nh();var d=a.formatter||this.I,e=a.matcher||this.A;null==a.isRequired&&(a.isRequired=!0);this.Ma=c;c(function(){this.g=b.find(".js-layer-picker");this.g.select2({placeholder:this.G,maximumSelectionSize:this.o,matcher:e,
formatSelection:d,formatResult:d});this.j()}.bind(this));this.v.$watch("layer",this.j.bind(this));this.v.$watch("layers",this.j.bind(this));this.v.$on("updateLayers",t(function(){this.layersList=this.nh()},this));this.v.$on("$destroy",this.B.bind(this))}hS.$inject=["$scope","$element","$timeout"];hS.prototype.B=function(){this.g=this.v=null};hS.prototype.j=function(){void 0!==this.v.layer?Gma(this):Hma(this)};
function Hma(a){if(a.g){var b=[];a.v.layers&&db(a.v.layers,function(a){var c=ib(this.layersList,function(b){return b.D()==a.D()});c&&b.push(c.$$hashKey)},a);a.g.select2("val",b)}}function Gma(a){if(a.g){var b=null;if(a.v.layer){var c=ib(a.layersList,function(a){return a.D()==this.v.layer.D()},a);c&&(b=c.$$hashKey)}a.g.select2("val",b)}}hS.prototype.s=function(){return pE(V)};hS.prototype.kF=function(a){this.v.layer=a;this.v.$emit(this.l+".layerselected",a)};hS.prototype.layerPicked=hS.prototype.kF;
hS.prototype.lF=function(a){this.v.layers=a;this.Ma(function(){this.v.$emit(this.l+".layerschanged",a)}.bind(this))};hS.prototype.layersChanged=hS.prototype.lF;hS.prototype.multiple=function(){return 1!=this.o};hS.prototype.multiple=hS.prototype.multiple;
hS.prototype.I=function(a){if(a){a=V.Ja(a.text);var b="";if(a){b=a.S()+" "+(a.Go()||"");var c=a.La();c=c?xv(c):"white";b='<span title="'+(a.qb()||"No Description")+'"><i class="fa fa-bars mr-1" style="color:'+c+';"></i>'+b;a.rb()&&(b+=" ("+a.rb()+")");b+="</span>"}return b}return""};hS.prototype.A=function(a,b){if(b=V.Ja(b))if(b=b.S()+" "+(b.Go()||""))return Ub(b.toLowerCase(),a.toLowerCase());return!1};function iS(){return{restrict:"E",scope:{filterData:"=",layerId:"=?"},replace:!0,templateUrl:"v1542394219/views/filter/im/filterimport.html",controller:jS,controllerAs:"ctrl"}}W.directive("filterimport",[iS]);
function jS(a,b,c){this.scope=a;this.element=b;this.o=c;this.s=a.filterData;this.columns=null;this.l="filter";this.found=this.layer=null;this.notFound=[];this.notFoundCount=this.foundCount=0;this.hasUnmatchedFilters=!1;this.showMatch=!0;this.groups=RO;b=pE(V);c=[];for(var d=0,e=b.length;d<e;d++){var f=b[d];try{f.Eg()&&c.push(f)}catch(h){}}this.A=c;b=new bD(this.iy());b.Ra("complete",this.EK,!1,this);gD(b,this.s);a.$watch("ctrl.layer",this.FK.bind(this));a.$on("$destroy",this.DK.bind(this))}
jS.$inject=["$scope","$element","$sce"];g=jS.prototype;g.DK=function(){this.o=this.element=this.scope=null};g.iy=function(){return new gS};
g.EK=function(a){var b=a.target;a=b.getData();b.dispose();b={};for(var c=[],d=0,e=0,f=a.length;e<f;e++){var h=a[e],k=h.S(),l=h.T(),m=this.gu(h),n=this.scope.layerId,p=PJ.ld(l),r=!1;if(p){var u=kS(k,h,m);b[l]?b[l].filterModels.push(u):(r=this.g(p),p=lS(this,p,l),r=mS(this,p,r,h.xh,u),b[l]=r);d++;r=!0}if(n&&!r&&(p=PJ.ld(n),u=p.Fe(),h.matches(u))){var v=h.clone();v.ga($b());v.Sb(n);u=kS(k,v,m);b[n]?b[n].filterModels.push(u):(r=this.g(p),p=lS(this,p,l),r=mS(this,p,r,v.xh,u),b[n]=r);d++;r=!0}r||(u=kS(h.S(),
h,m,l.replace(/_/g," "),!1),c.push(u))}this.found=b;this.notFound=c;this.foundCount=d;this.scope.layerId&&(this.layer=V.Ja(this.scope.layerId));this.hasUnmatchedFilters=!this.layer&&!!this.notFound.length;X(this.scope)};function kS(a,b,c,d,e){return{title:a,filter:b,tooltip:c,type:d,matches:e}}g.gu=function(a){return LJ(fJ(a),1E3)};function mS(a,b,c,d,e){return{layerTitle:b,layerIcon:a.o.trustAsHtml(c),match:d,filterModels:[e]}}
g.FK=function(a){this.columns=[];try{if(P(a,"os.ui.ogc.IOGCDescriptor"))if(a.Xj()){var b=a.se();b&&(this.columns=b.getColumns())}else{var c=this.XD.bind(this,a);a.I=c}else P(a,"os.filter.IFilterable")&&(this.columns=a.Fe())}catch(d){}finally{Ima(this)}};g.XD=function(a){if(a=a.se())this.columns=a.getColumns()||[],Ima(this)};
function Ima(a){a.hasMatchedFilters=!1;a.hasUnmatchedFilters=!1;for(var b=0,c=a.notFound.length;b<c;b++){var d=a.notFound[b];d.matches=a.columns?d.filter.matches(a.columns):!1;d.matches?a.hasMatchedFilters=!0:a.hasUnmatchedFilters=!0}X(a.scope)}g.nh=function(){return this.A};jS.prototype.getLayersFunction=jS.prototype.nh;jS.prototype.pc=function(a){if(a&&this.found[a]){var b=this.found[a];b&&b.filterModels&&(this.foundCount-=b.filterModels.length);delete this.found[a]}};jS.prototype.removeLayer=jS.prototype.pc;
jS.prototype.ao=function(){var a=this.layer;if(P(a,"os.filter.IFilterable")){for(var b=this.notFound.length,c=0;b--;){var d=this.notFound[b];if(d.matches){this.notFound.splice(b,1);for(var e=a.Jl(),f=0,h=e.length;f<h;f++){var k=e[f];d.filter.Sb(k);c++;if(this.found[k])this.found[k].filterModels.push(d);else{var l=this.g(a),m=lS(this,a,k);l=mS(this,m,l,d.filter.xh,d);this.found[k]=l}}}}this.foundCount+=c}this.hasMatchedFilters=this.notFound.some(function(a){return!!a.matches})};
jS.prototype.addNotFound=jS.prototype.ao;
jS.prototype.finish=function(){var a=0,b=[];this.ao();for(var c in this.found){var d=this.found[c],e=d.filterModels;d=d.match;for(var f=0,h=e.length;f<h;f++){var k=e[f].filter;AK(PJ,k);k={layerId:c,filterId:k.D(),areaId:"*",includeArea:!0,filterGroup:d};b.push(k);a++}e=WE.getEntries(c);f=0;for(h=e.length;f<h;f++)k=e[f],"*"!==k.filterId&&(k.filterGroup=d)}0<b.length&&dF(WE,b);b=zt.u();0<a?At(b,"Successfully imported <b>"+a+(1==a?"</b> filter.":" filters."),ts):At(b,"No filters were imported!",ss);
KE(this.element)};jS.prototype.finish=jS.prototype.finish;jS.prototype.cancel=function(){KE(this.element)};jS.prototype.cancel=jS.prototype.cancel;jS.prototype.Io=function(){return"fa-filter"};jS.prototype.getFilterIcon=jS.prototype.Io;jS.prototype.fD=function(a){return this.l+(1==a?"":"s")};jS.prototype.getFilterTitle=jS.prototype.fD;jS.prototype.j=function(a){var b=null;P(a,"os.data.IDataDescriptor")&&(b=a.rb());return b};
function lS(a,b,c){var d=b.S(),e=c.indexOf("#"),f=c.lastIndexOf("#");e!==f&&(d+=" "+ec(c.substring(f+1)));(a=a.j(b))&&(d+=" ("+a+")");return d}jS.prototype.g=function(a){var b="";P(a,"os.data.IDataDescriptor")&&(a=(a=a.La())?xv(a):"#fff",b='<i class="fa fa-bars" style="color:'+xv(a)+'"></i>');return b};W.directive("osfilterimport",[function(){var a=iS();a.controller=nS;return a}]);function nS(a,b,c){jS.call(this,a,b,c)}w(nS,jS);nS.$inject=["$scope","$element","$sce"];nS.prototype.j=function(a){var b=nS.C.j.call(this,a);!b&&P(a,"os.layer.ILayer")&&(b=a.rb());return b};nS.prototype.g=function(a){if(P(a,"os.layer.ILayer")){var b=a.Sa().color;if(b)return'<i class="fa fa-bars" style="color:'+xv(b)+'"></i>'}return nS.C.g.call(this,a)};function oS(){this.j=!1}oS.prototype.S=function(){return""};oS.prototype.g=function(a,b){b.color=a.color;b.description=a.description;b.mappings=a.mappings;b.tags=a.tags;b.title=a.title};function pS(){this.j=!0}w(pS,oS);pS.prototype.g=function(a,b){pS.C.g.call(this,a,b);b.descriptor=a.descriptor;b.file=a.file;b.oldFile=a.oldFile;b.replace=a.replace};pS.prototype.Ib=function(a){if(a){var b=a.T();b&&(b=Iw(b))&&-1<b.indexOf("text/plain")&&Nw(a)}};function qS(){pS.call(this);this.label="Import Filters";this.j=!1}w(qS,pS);qS.prototype.Ib=function(a,b){qS.C.Ib.call(this,a,b);var c={label:this.label,icon:"fa fa-sign-in",x:"center",y:"center",width:"700","min-width":"500","max-width":"900",height:"600","min-height":"300","max-height":"700",modal:"true","show-close":"true"},d;b&&(d=b.layerId);FE(c,this.l(),void 0,void 0,void 0,{filterData:a.Ob(),layerId:d})};qS.prototype.l=function(){return'<filterimport filter-data="filterData" layer-id="layerId"></filterimport>'};function rS(){qS.call(this)}w(rS,qS);rS.prototype.l=function(){return'<osfilterimport class="flex-column d-flex flex-fill" filter-data="filterData"  layer-id="layerId"></osfilterimport>'};function sS(a){bD.call(this,a);this.L=!1;C.H(CL,this.ka,!1,this)}w(sS,bD);var Jma=E.V("os.im.FeatureImporter");sS.prototype.J=function(){C.M(CL,this.ka,!1,this);sS.C.J.call(this)};
sS.prototype.gl=function(a){var b;a instanceof ek&&(b=a);if(b){if(b.ma){var c=b.ma;b.ga(H(b)+"");b.la.ID=c}else b.ga(H(b)+"");if(c=b){var d=c.X();if(d){var e=Tu(d);e!=d&&c.sb(e)}}}a&&(this.bs(a),sS.C.gl.call(this,a));b&&(a=b.la.recordTime,null==a||P(a,"os.time.ITime")||(b.set("RECORDTIME",a),b.set("recordTime",void 0)),b.hc=!0)};var tS=null,Kma=/[<>]/;
sS.prototype.bs=function(a){if(tS){a=a.la;for(var b in a){var c=a[b];if("string"===typeof c&&Kma.test(c)){this.L&&!a._htmlDescription&&JA.test(b)&&(a._htmlDescription=c);try{a[b]=tS(c).trim()}catch(d){E.error(Jma,"Could not sanitize value"),a[b]="Error: Could not sanitize value"}}}}};sS.prototype.ka=function(){this.reset()};function uS(){jM.call(this);this.g="BEARING";this.Db=Lma;this.s=this.o=this.units=null;this.j="Bearing"}w(uS,jM);var Lma=/(bear(i(n(g)?)?)?)|(cour(s(e)?)|head(i(n(g)?)?)?)\b/i;gB(eB.u(),"Bearing",uS);function vS(){SC.call(this);this.l=void 0}w(vS,SC);g=vS.prototype;g.clone=function(){var a=vS.C.clone.call(this);a.l=this.l;return a};g.sa=function(a){a=vS.C.sa.call(this,a);a.customFormat=this.l;return a};g.restore=function(a){vS.C.restore.call(this,a);this.l=a.customFormat};g.rc=function(){var a=vS.C.rc.call(this);Z("customFormat",a,cB(this.l||null));return a};g.ad=function(a){vS.C.ad.call(this,a);this.l=(a=dB(TC(a,"customFormat")))?a:void 0};g.rj=function(a){return this.Se(a)?a:null};function wS(){vS.call(this);this.j="Latitude";this.s="LAT";this.type="Latitude";this.Db=Mma}w(wS,vS);gB(eB.u(),"Latitude",wS);var Mma=/(\b|_)lat(i(t(u(d(e)?)?)?)?)?(\b|_)/i;g=wS.prototype;g.D=function(){return this.type};g.ba=function(){return this.type};g.jc=function(){return this.type&&this.ja?0==this.type.toLowerCase().indexOf(this.ja.toLowerCase())?11:10:wS.C.jc.call(this)};g.Tj=function(){return"geom"};
g.Fa=function(a){if(this.ja){var b=$A(a,this.ja);null!=b&&(b=String(b).replace(mu,""),b=yu(b,this.l),isNaN(b)||(aB(a,this.s,b),Nma(a)))}};g.Se=function(a){return a?(a=yu(String(a)),null!=a&&!isNaN(a)):!1};g.rj=function(a,b){return a&&(a=yu(String(a),b),null!=a&&!isNaN(a))?a.toString():null};function Nma(a){if(!a.X()){var b=a.get("LAT"),c=a.get("LON");void 0===b||isNaN(b)||"number"!==typeof b||void 0===c||isNaN(c)||"number"!==typeof c||(b=new Jk([c,b]),a.hc=!1,a.sb(iu(b)),a.hc=!0)}}
g.Nd=function(a){var b=null;if(a)for(var c=a.length,d=void 0;c--;){var e=a[c];if(e.X())return null;if(d=bB(e,this.Db,d))b=new this.constructor,b.ja=d}return b};function xS(){wS.call(this);this.s="LON";this.type="Longitude";this.Db=Oma;this.j="Longitude"}w(xS,wS);gB(eB.u(),"Longitude",xS);var Oma=/(\b|_)lon(g(i(t(u(d(e)?)?)?)?)?)?(\b|_)/i;xS.prototype.Fa=function(a){if(this.ja){var b=$A(a,this.ja);null!=b&&(b=String(b).replace(mu,""),b=xu(b,this.l),isNaN(b)||(aB(a,this.s,b),Nma(a)))}};xS.prototype.Se=function(a){return a?(a=xu(String(a)),null!=a&&!isNaN(a)):!1};xS.prototype.rj=function(a,b){return a&&(a=xu(String(a),b),null!=a&&!isNaN(a))?a.toString():null};function yS(){jM.call(this);this.g="ORIENTATION";this.Db=Pma;this.s=this.o=this.units=null;this.j="Orientation"}w(yS,jM);gB(eB.u(),"Orientation",yS);var Pma=/(tilt|strike|orient(a(t(i(o(n)?)?)?)?)?)/i;function zS(a){vS.call(this);this.s=void 0!==a?a:0}w(zS,vS);zS.prototype.Fa=function(a){if(this.ja){var b=$A(a,this.ja)||"";if(b=Nb(b.replace(mu,""))){var c=uu(b,this.s,this.l);if(c)a[this.ja]=[c.lon,c.lat];else throw Error('Could not parse coordinate from "'+b+'"!');}}};zS.prototype.Se=function(a){return a?null!=uu(String(a),this.s,void 0):!1};zS.prototype.rj=function(a,b){return a&&(a=uu(String(a),this.s,b),null!=a)?a.lat.toString()+" "+a.lon.toString():null};function AS(){zS.call(this)}w(AS,zS);gB(eB.u(),"LatLon",AS);AS.prototype.Fa=function(a){if(this.ja){var b=$A(a,this.ja)||"";if(b=Nb(b.replace(mu,""))){var c=uu(b,this.s,this.l);if(c)b=iu(new Jk([c.lon,c.lat])),a.hc=!1,a.sb(b),a.hc=!0;else throw Error('Could not parse coordinate from "'+b+'"!');}}};function BS(){vS.call(this)}w(BS,vS);BS.prototype.Fa=function(a){if(this.ja){var b=$A(a,this.ja);if(b)if(b=b.replace(/\s/g,""),b=b.toUpperCase(),b.match(ku))b=osasm.toLonLat(b),a[this.ja]=b;else throw Error('"'+b+'" does not appear to be a valid MGRS coordinate!');}};BS.prototype.Se=function(a){return a?(a=a.replace(/\s/g,""),a=a.toUpperCase(),null!=a.match(ku)):!1};function CS(){vS.call(this)}w(CS,BS);gB(eB.u(),"MGRSMapping",CS);CS.prototype.Fa=function(a){if(this.ja){var b=$A(a,this.ja);if(b)if(b=b.replace(/\s/g,""),b=b.toUpperCase(),b.match(ku))b=osasm.toLonLat(b),b=new Jk(b),a.hc=!1,a.sb(iu(b)),a.hc=!0;else throw Error('"'+b+'" does not appear to be a valid MGRS coordinate!');}};function DS(){vS.call(this);this.s=Qma;this.type="Lat/Lon"}w(DS,vS);var Rma=/(pos(i(t(i(o(n)?)?)?)?)?|mgrs|coord(i(n(a(t(e(s)?)?)?)?)?)?|geo(m(e(t(r(y)?)?)?)?)?|loc(a(t(i(o(n)?)?)?)?)?)/i,Qma={};g=DS.prototype;g.D=function(){return"Position"};g.T=function(){return this.type};g.Sb=function(a){a&&a in this.s?this.type=a:this.type=null};g.ba=function(){return this.type};g.jc=function(){return"MGRS"==this.type?1:2};g.Tj=function(){return"geom"};
g.Fa=function(a){this.type&&(this.s[this.type].ja=this.ja,this.s[this.type].l=this.l,this.s[this.type].Fa(a))};g.Se=function(a){return this.type?this.s[this.type].Se(a):!1};g.rj=function(a,b){return this.type?this.s[this.type].rj(a,b):null};g.Nd=function(a){if(a)for(var b=a.length;b--;){var c=a[b],d;for(d in c)if(d.match(Rma))for(var e in this.s)if(this.s[e].Se(String(c[d])))return a=new DS,a.ja=d,a.Sb(e),a}return null};g.clone=function(){var a=DS.C.clone.call(this);a.Sb(this.type);return a};
g.sa=function(a){a=DS.C.sa.call(this,a);a.type=this.T();return a};g.restore=function(a){DS.C.restore.call(this,a);this.Sb(a.type)};g.rc=function(){var a=DS.C.rc.call(this);Z("subType",a,this.T());return a};g.ad=function(a){DS.C.ad.call(this,a);this.Sb(TC(a,"subType"))};function ES(){DS.call(this);this.j="Position";this.s=Sma;this.type="Lat/Lon"}w(ES,DS);gB(eB.u(),"Position",ES);var Sma={"Lat/Lon":new AS(0),"Lon/Lat":new AS(1),MGRS:new CS};ES.prototype.Nd=function(a){if(a)for(var b=a.length;b--;){var c=a[b];if(c.X())break;c=c.Vb();for(var d in c)if(d.match(Rma))for(var e in this.s)if(this.s[e].Se(String(c[d])))return a=new ES,a.ja=d,a.Sb(e),a}return null};function FS(){uD.call(this)}G(FS,uD);function GS(a){return"string"===typeof a?a:""}g=FS.prototype;g.T=function(){return"text"};g.Rr=function(a,b){b=wD(this,b);(a=HS(GS(a),b))?(b=new ek,b.sb(a),a=b):a=null;return a};g.cg=function(a,b){var c=wD(this,b);b=[];a=HS(GS(a),c);this.g&&"GeometryCollection"==a.T()?b=a.g:b=[a];c=[];for(var d=0,e=b.length;d<e;++d)a=new ek,a.sb(b[d]),c.push(a);return c};g.Ck=function(a,b){return HS(GS(a),wD(this,b))};g.jn=function(){return this.defaultDataProjection};
g.Ps=function(a,b){return Tma(a,wD(this,b))};g.Qs=function(a,b){b=wD(this,b);if(1==a.length)a=Tma(a[0],b);else{for(var c=[],d=0,e=a.length;d<e;++d)c.push(a[d].X());a=new Kr(c);a=IS(xD(a,!0,b))}return a};function Uma(a){a=a?a:{};uD.call(this);this.g=void 0!==a.splitCollection?a.splitCollection:!1}G(Uma,FS);function Vma(a){a=a.getCoordinates();return 0===a.length?"":a.join(" ")}function JS(a){a=a.getCoordinates();for(var b=[],c=0,d=a.length;c<d;++c)b.push(a[c].join(" "));return b.join(",")}function Wma(a){var b=[];a=Uk(a);for(var c=0,d=a.length;c<d;++c)b.push("("+JS(a[c])+")");return b.join(",")}
function IS(a){var b=a.T(),c=(0,Xma[b])(a);b=b.toUpperCase();if(a instanceof tk){a=a.layout;var d="";if("XYZ"===a||"XYZM"===a)d+="Z";if("XYM"===a||"XYZM"===a)d+="M";a=d;0<a.length&&(b+=" "+a)}return 0===c.length?b+" EMPTY":b+"("+c+")"}
var Xma={Point:Vma,LineString:JS,Polygon:Wma,MultiPoint:function(a){var b=[];a=Qr(a);for(var c=0,d=a.length;c<d;++c)b.push("("+Vma(a[c])+")");return b.join(",")},MultiLineString:function(a){var b=[];a=Cr(a);for(var c=0,d=a.length;c<d;++c)b.push("("+JS(a[c])+")");return b.join(",")},MultiPolygon:function(a){var b=[];a=Tr(a);for(var c=0,d=a.length;c<d;++c)b.push("("+Wma(a[c])+")");return b.join(",")},GeometryCollection:function(a){var b=[];a=Np(a);for(var c=0,d=a.length;c<d;++c)b.push(IS(a[c]));return b.join(",")}};
function HS(a,b){return(a=(new KS(new Yma(a))).parse())?xD(a,!1,b):null}function Tma(a,b){return(a=a.X())?IS(xD(a,!0,b)):""}function Yma(a){this.j=a;this.g=-1}
function Zma(a){var b=a.j.charAt(++a.g),c={position:a.g,value:b};if("("==b)c.type=2;else if(","==b)c.type=5;else if(")"==b)c.type=3;else if("0"<=b&&"9">=b||"."==b||"-"==b){c.type=4;b=a.g;var d=!1,e=!1;do{if("."==f)d=!0;else if("e"==f||"E"==f)e=!0;var f=a.j.charAt(++a.g)}while("0"<=f&&"9">=f||"."==f&&(void 0===d||!d)||!e&&("e"==f||"E"==f)||e&&("-"==f||"+"==f));a=parseFloat(a.j.substring(b,a.g--));c.value=a}else if("a"<=b&&"z">=b||"A"<=b&&"Z">=b){c.type=1;b=a.g;do f=a.j.charAt(++a.g);while("a"<=f&&
"z">=f||"A"<=f&&"Z">=f);a=a.j.substring(b,a.g--).toUpperCase();c.value=a}else{if(" "==b||"\t"==b||"\r"==b||"\n"==b)return Zma(a);if(""===b)c.type=6;else throw Error("Unexpected character: "+b);}return c}function KS(a){this.l=a;this.j="XY"}function LS(a){a.g=Zma(a.l)}g=KS.prototype;g.match=function(a){(a=this.g.type==a)&&LS(this);return a};g.parse=function(){LS(this);return $ma(this)};
function $ma(a){var b=a.g;if(a.match(1)){b=b.value;var c="XY",d=a.g;1==a.g.type&&(d=d.value,"Z"===d?c="XYZ":"M"===d?c="XYM":"ZM"===d&&(c="XYZM"),"XY"!==c&&LS(a));a.j=c;if("GEOMETRYCOLLECTION"==b){a:{if(a.match(2)){b=[];do b.push($ma(a));while(a.match(5));if(a.match(3)){a=b;break a}}else if(MS(a)){a=[];break a}throw Error(NS(a));}return new Kr(a)}d=ana[b];c=bna[b];if(!d||!c)throw Error("Invalid geometry type: "+b);b=d.call(a);return new c(b,a.j)}throw Error(NS(a));}
g.Er=function(){if(this.match(2)){var a=OS(this);if(this.match(3))return a}else if(MS(this))return null;throw Error(NS(this));};g.Dr=function(){if(this.match(2)){var a=cna(this);if(this.match(3))return a}else if(MS(this))return[];throw Error(NS(this));};g.Fr=function(){if(this.match(2)){var a=dna(this);if(this.match(3))return a}else if(MS(this))return[];throw Error(NS(this));};
g.nL=function(){if(this.match(2)){var a;if(2==this.g.type)for(a=[this.Er()];this.match(5);)a.push(this.Er());else a=cna(this);if(this.match(3))return a}else if(MS(this))return[];throw Error(NS(this));};g.mL=function(){if(this.match(2)){var a=dna(this);if(this.match(3))return a}else if(MS(this))return[];throw Error(NS(this));};g.oL=function(){if(this.match(2)){for(var a=[this.Fr()];this.match(5);)a.push(this.Fr());if(this.match(3))return a}else if(MS(this))return[];throw Error(NS(this));};
function OS(a){for(var b=[],c=a.j.length,d=0;d<c;++d){var e=a.g;if(a.match(4))b.push(e.value);else break}if(b.length==c)return b;throw Error(NS(a));}function cna(a){for(var b=[OS(a)];a.match(5);)b.push(OS(a));return b}function dna(a){for(var b=[a.Dr()];a.match(5);)b.push(a.Dr());return b}function MS(a){var b=1==a.g.type&&"EMPTY"==a.g.value;b&&LS(a);return b}function NS(a){return"Unexpected `"+a.g.value+"` at position "+a.g.position+" in `"+a.l.j+"`"}
var bna={POINT:Jk,LINESTRING:yr,POLYGON:Rk,MULTIPOINT:Pr,MULTILINESTRING:Ar,MULTIPOLYGON:Rr},ana={POINT:KS.prototype.Er,LINESTRING:KS.prototype.Dr,POLYGON:KS.prototype.Fr,MULTIPOINT:KS.prototype.nL,MULTILINESTRING:KS.prototype.mL,MULTIPOLYGON:KS.prototype.oL};var PS=new Uma;function QS(){vS.call(this);this.j="WKTGeometry"}w(QS,vS);gB(eB.u(),"WKTGeometry",QS);var ena=E.V("os.im.mapping.WKTMapping"),fna=/^\s*(POINT|LINESTRING|LINEARRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)\s*Z?[(]/i,gna=/(center|centroid)/i;g=QS.prototype;g.D=function(){return"WKTGeometry"};g.ba=function(){return"WKTGeometry"};g.jc=function(){return 20};g.Tj=function(){return"geom"};
g.Fa=function(a){if(this.ja){var b=$A(a,this.ja);b&&(b=PS.Ck(String(b),{dataProjection:"EPSG:4326",featureProjection:N}))&&(a.hc=!1,a.set(this.ja,void 0),a.sb(b),a.hc=!0)}};g.Nd=function(a){if(a)for(var b=a.length;b--;){var c=a[b];if(c.X())break;var d=c.Vb(),e=[],f;for(f in d)(d=c.get(f))&&fna.test(String(d))&&(d=new QS,d.ja=f,e.push(d));if(0<e.length){a=e[0];for(b=0;b<e.length;b++)gna.test(e[b].ja)||(a=e[b]);return a}}return null};
g.Se=function(a){var b=null;try{b=PS.Ck(String(a))}catch(c){E.error(ena,"failed restoring descriptors from settings",c)}return null!=b};function RS(a,b){SC.call(this);this.j="DateTime";this.id=b||"DateTime";this.s=!0;this.format=sC[0];this.L=sC;this.I=mga;this.N=nga;this.type=a}w(RS,SC);gB(eB.u(),"DateTime",RS);RS.prototype.D=function(){return"start"==this.type?"Start "+this.id:"end"==this.type?"End "+this.id:this.id};RS.prototype.jc=function(){return 20};RS.prototype.Tj=function(){return"time"};RS.prototype.ba=function(){return this.D()||null};var hna=/(Z|UTC|[+-]\d\d+:?\d\d)$/;g=RS.prototype;
g.Fa=function(a){if(this.ja&&this.format){var b=$A(a,this.ja);var c=null;if(null!=b&&("number"===typeof b||""!=b))if("Timestamp"==this.format)try{c=parseFloat(b)}catch(d){}else"ISO"===this.format?(hna.test(b)||(b+="Z"),c=moment(String(b)).valueOf()):c=EC(String(b),this.format).valueOf();isNaN(c)&&(c=null);b=c;this.s?(c=$A(a,"recordTime")||null,aB(a,"recordTime",this.getTime(b,c))):b&&this.Mq(b,a)}};
g.Nd=function(a){if(a)for(var b=a.length,c=void 0;b--;){var d=$A(a[b],"recordTime");if(P(d,"os.time.ITime"))break;if(c=bB(a[b],this.N[this.type]||uC.instant,c))if(d=$A(a[b],c)){var e=this.L.concat(this.I);if(d=DC(String(d),e,!0))return a=this.clone(),a.ja=c,a.format=d,a}}return null};g.Kj=function(){return this.format};g.T=function(){return this.type};g.Sb=function(a){this.type=a};g.Mq=function(a,b){this.ja&&aB(b,this.ja,(new Date(a)).toISOString())};g.Qn=function(a,b){return new Date(b)};
g.getTime=function(a,b){if(null==a)return P(b,"os.time.ITime")?b:null;"object"==typeof b&&P(b,"os.time.ITime")?"end"==this.type?(b instanceof Uv||(b=new Uv(b)),b.Ya()?b.Om(this.Qn(b.Ya(),a)):b.Om(a)):b.Pa()?b.setStart(this.Qn(b.Pa(),a)):b.setStart(a):b="start"==this.type?new Uv(a,a):"end"==this.type?new Uv(void 0,a):new Pv(a);return b};g.clone=function(){var a=new this.constructor(this.type);a.ja=this.ja;a.format=this.format;a.s=this.s;return a};
g.sa=function(a){a=RS.C.sa.call(this,a);a.applyTime=this.s;a.format=this.Kj();a.type=this.T();return a};g.restore=function(a){RS.C.restore.call(this,a);this.s=a.applyTime;this.format=a.format;this.Sb(a.type)};g.rc=function(){var a=RS.C.rc.call(this);Z("applyTime",a,this.s);var b;(b=this.Kj())?(b=b.replace(/T/g,"'T'"),b=b.replace(/Y/g,"y"),b=b.replace(/D/g,"d"),b=b.replace(/ZZ/g,"Z")):b=null;Z("format",a,b);Z("subType",a,this.T());return a};
g.ad=function(a){RS.C.ad.call(this,a);var b=TC(a,"applyTime");this.s=null!=b?"true"===b?!0:!1:!1;(b=TC(a,"format"))?(b=b.replace(/'T'/g,"T"),b=b.replace(/y/g,"Y"),b=b.replace(/d/g,"D")):b=null;this.format=b;b=TC(a,"subType");null!=b&&this.Sb("start"===b?"start":"end"===b?"end":"pub"==b?"publication":"instant")};function SS(a){RS.call(this,a,"Date");this.format=rC[0];this.L=rC;this.I=[];this.N=lga;this.j="Date"}w(SS,RS);gB(eB.u(),"Date",SS);SS.prototype.jc=function(){return 1};SS.prototype.Mq=function(a,b){this.ja&&aB(b,this.ja,BC(new Date(a),"day"))};SS.prototype.Qn=function(a,b){a=new Date(a);b=new Date(b);a.setUTCFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate());return a};function TS(a){RS.call(this,a,"Time");this.format=tC[0];this.L=tC;this.I=oga;this.N=uC;this.j="Time"}w(TS,RS);gB(eB.u(),"Time",TS);TS.prototype.jc=function(){return 1};TS.prototype.Mq=function(a,b){this.ja&&aB(b,this.ja,BC(new Date(a)))};TS.prototype.Qn=function(a,b){a=new Date(a);b=new Date(b);a.setUTCHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds());return a};function US(){this.alpha=1;this.color="rgba(255,255,255,1)";this.columns=null;this.id="";this.params=null;this.size=3;this.title="New Layer";this.url="";this.visible=!0;this.log=ina}var ina=E.V("os.layer.config.LayerConfig");
US.prototype.dc=function(a){this.id=a.id||$b();this.columns=a.columns||null;null!=a.title&&(this.title=a.title);null!=a.url&&(this.url=a.url);if("string"===typeof a.params)this.params=new af(a.params);else if(a.params){var b=a.params,c=He(b);if("undefined"==typeof c)throw Error("Keys are undefined");var d=new af(null,void 0);b=Ge(b);for(var e=0;e<c.length;e++){var f=c[e],h=b[e];q(h)?lf(d,f,h):d.add(f,h)}this.params=d}this.alpha=Je(a.alpha||a.opacity||1,0,1);null!=a.size&&(this.size=a.size);null!=
a.color&&(this.color=a.color);"string"===typeof this.color&&(this.color=this.color.replace(/^0x/,"#"));null!=a.visible&&(this.visible=a.visible)};function VS(){US.call(this);this.log=jna;this.animate=!1;this.data=null}w(VS,US);var jna=E.V("os.layer.config.StaticLayerConfig");g=VS.prototype;g.dc=function(a){VS.C.dc.call(this,a);this.animate=void 0!==a.animate?a.animate:!1;q(a.data)?this.data=a.data=a.data instanceof Array?a.data:vb(a.data):this.data=null};
g.Ye=function(a){this.dc(a);var b=this.O(a);b.ga(this.id);b.Ta(this.title);oN(b,this.animate);var c=this.W(b,a);this.restore(c,a);null!=a.explicitType&&c.ye(a.explicitType);this.data&&b.Nc(this.data);return c};g.restore=function(a,b){b&&a.restore(b)};g.W=function(a){return new MK({source:a})};g.O=function(){return new vL(void 0)};function WS(a,b,c,d){this.l=a;this.o=b;this.g=c;this.j=d}WS.prototype.clone=function(){return new WS(this.l,this.o,this.g,this.j)};WS.prototype.equals=function(a){return this.l==a.l&&this.o==a.o&&this.g==a.g&&this.j==a.j};function kna(a){return!!a&&("pointerup"===a.type||"pointerdown"===a.type)&&!!a.g&&2===a.g.button};var XS=od||pd||rd&&Bd("525")?"keydown":"keypress";function lna(a){return a}function mna(a){if(a){var b=a.X();if(Hu(b))return a}return null};function YS(a){a=a||{};Gn.call(this,{handleEvent:this.handleEvent.bind(this)});this.condition=a.condition||kna;this.Dl=a.Dl;this.lm=a.lm;this.j=0;this.g=[0,0]}w(YS,Gn);YS.prototype.handleEvent=function(a){if("pointerdown"===a.type)return this.j=Ha(),this.g=a.pixel||[0,0],!0;var b=Ha(),c=a.pixel||[0,0];c=new WS(c[0],c[1],this.g[0],this.g[1]);(b=500<b-this.j)||(b=c.g-c.l,c=c.j-c.o,b=10<Math.sqrt(b*b+c*c));if(b)return!0;a&&this.condition(a)&&this.l(a);return!0};
YS.prototype.l=function(a){var b;(b=a&&a.map&&a.pixel?a.map.zh(a.pixel,mna||lna):null)&&UE.get(b)&&nna(this,a,b)};YS.prototype.o=function(a,b){this.lm&&(b=b||[0,0],this.lm.open(a,{my:"left top",at:"left+"+b[0]+" top+"+b[1],of:"#map-container"}))};function nna(a,b,c,d){a.Dl&&(c={geometry:c.X(),feature:c,layer:d,map:b.map},b=b.pixel||[0,0],a.Dl.open(c,{my:"left top",at:"left+"+b[0]+" top+"+b[1],of:"#map-container"}))};function ZS(a){YS.call(this,a);window.omcm=this.o.bind(this)}w(ZS,YS);P(ZS,"os.I3DSupport");ZS.prototype.yc=function(){return!0};ZS.prototype.l=function(a){if(a.map&&a.pixel){if(a.pixel){var b=a.map.zh(a.pixel,tga);if(b){var c=b.feature;var d=b.layer}}if(c)nna(this,a,c,d);else{c=a.pixel||[0,0];if(a=a.map.cd(c))a=Vi(a,N),a[0]=Ir(a[0]),a=Ti(a,N);this.o(a,c)}}};function $S(){Gn.call(this,{handleEvent:ona})}w($S,Gn);P($S,"os.I3DSupport");$S.prototype.yc=function(){return!0};function ona(a){var b=a.map,c=[];if("dblclick"==a.type&&0==ll(M(b))[1])try{b.zh(a.pixel,function(a,b){if(a instanceof ek&&(b&&b instanceof MK||(b=LB(a)),b instanceof MK)){var d=b.D();b&&d&&mb(c,a)}},{drillPick:!0}),0<c.length&&KI(c)}catch(d){}return!c.length};function aT(a){Ln.call(this,a)}w(aT,Ln);P(aT,"os.I3DSupport");Mn=function(a){var b=!1;if("dblclick"==a.type){b=a.coordinate;var c=T.u();if(c.Qa()){if(c=Yu(c)){var d=c.Qg();RP(c,{center:b,altitude:a.originalEvent.ctrlKey?2*d:d/2,duration:this.j})}}else c=a.originalEvent.ctrlKey?-this.g:this.g,(d=M(a.map))&&Jn(d,c,b,this.j);a.preventDefault();b=!0}return!b};aT.prototype.yc=function(){return!0};function bT(a){this.g=this.ha=null;this.Mc=a}w(bT,y);g=bT.prototype;g.J=function(){this.setMap(null)};g.render=function(){null!==this.ha&&this.X()&&this.ha.render()};g.Y=function(){return this.ha};g.setMap=function(a){null!==this.g&&(rh(this.g),this.g=null,this.ha.render(),this.ha=null);this.ha=a;null!=this.ha&&(this.g=I(a,"postcompose",this.iE,this),this.render())};g.iE=function(a){var b=this.X(),c=this.Qb();a.vectorContext.yb(c);this.mt(a.vectorContext);a.vectorContext.kh(b)};g.Qb=function(){return this.Mc};
g.mt=function(){};function cT(a){bT.call(this,a);this.j=this.Ed=null}w(cT,bT);cT.prototype.X=function(){return this.Ed};function dT(a,b,c,d,e){z.call(this,a);this.geometry=c||null;this.pixel=d||null;this.j=e||null}w(dT,z);function eT(a){Sn.call(this,a);this.l=!1;this.condition=void 0!==a&&void 0!==a.condition?a.condition:Pn;this.type="";this.Mc=void 0!==a&&void 0!==a.style?a.style:new bk({stroke:new ak({color:[0,255,255,1],lineCap:"square",width:2})});this.N=null;this.setActive(!1);this.Ca=new le(this.fC,375,this)}w(eT,Sn);var fT=E.V("os.ui.ol.interaction.AbstractDraw");g=eT.prototype;g.T=function(){return this.type};g.Wu=function(a){return this.type==a};g.Qb=function(){return this.Mc};g.yb=function(a){this.Mc=a};
g.Vb=function(){return null};g.mc=function(){return this.condition===ni||this.l};g.eb=function(a){a?this.condition=ni:(this.condition=Pn,this.l&&this.cancel());E.za(fT,this.T()+" interaction "+(a?"enabled":"disabled"))};g.setActive=function(a){var b=this.get("active")&&!a;eT.C.setActive.call(this,a);b&&this.l&&this.cancel();E.za(fT,this.T()+" interaction "+(a?"activated":"deactivated"))};g.handleEvent=function(a){var b=!1;"key"==a.type&&(b=27==(new Md(a.originalEvent)).keyCode)&&this.cancel();return!b};
g.ed=function(a){var b=this.Y();E.za(fT,this.T()+" interaction begin");b&&!this.l&&(this.l=!0,this.N=new Lg(document,!0),this.N.H("key",this.ny,!0,this),bl(M(b),1,1),this.dispatchEvent(new dT("drawstart",a.coordinate)))};g.update=function(){};g.end=function(a){if(this.l){E.info(fT,this.T()+" interaction complete: "+this.So());this.l=!1;var b=this.X(),c=this.Vb();this.xd();this.dispatchEvent(new dT("drawend",a.coordinate,b,a.pixel,c||void 0))}};
g.cancel=function(){this.l&&(E.za(fT,this.T()+" interaction cancel"),this.l=!1,this.dispatchEvent(new dT("drawcancel")),this.xd())};g.xd=function(){E.za(fT,this.T()+" interaction cleanup");this.Ca.start();this.N.M("key",this.ny,!0,this);this.N.dispose();this.N=null};g.fC=function(){var a=this.Y();a&&bl(M(a),1,-1)};g.ny=function(a){27==a.keyCode&&this.cancel()};g.dispatchEvent=function(a){eT.C.dispatchEvent.call(this,a);a instanceof Ah&&a.originalEvent&&a.originalEvent.defaultPrevented||C&&C.dispatchEvent(a)};function gT(a){a=a||{};a.handleDownEvent=this.handleDownEvent;a.handleUpEvent=this.handleUpEvent;a.handleDragEvent=this.handleDragEvent;eT.call(this,a);this.g=null}w(gT,eT);g=gT.prototype;g.handleDownEvent=function(a){return Rn(a)&&0===a.g.button&&this.condition(a)?(this.ed(a),this.update(a),!0):!1};g.handleDragEvent=function(a){Rn(a)&&this.update(a)};
g.handleUpEvent=function(a){if(!Rn(a))return!0;this.update(a);var b=0,c=0;if(this.g){c=this.Y().Vd(this.g);var d=a.pixel;b=d[0]-c[0];c=d[1]-c[1]}64<=b*b+c*c?this.end(a):this.cancel();return!0};g.ed=function(a){gT.C.ed.call(this,a);this.g=a.coordinate};g.xd=function(){gT.C.xd.call(this);this.g=null};function hT(a){gT.call(this,a);this.type="box";this.A=null;this.s=new cT(this.Qb());this.extent=null}w(hT,gT);g=hT.prototype;g.X=function(){var a=this.s.j;a&&(a.toLonLat(),Qu(a),iu(a));return a};g.Vb=function(){return{interpolationMethod:"rhumb"}};g.ed=function(a){hT.C.ed.call(this,a);this.s.setMap(a.map)};
g.update=function(a){this.A=a.coordinate||this.A;if(this.g&&this.A){this.extent||(this.extent=[]);a=Vi(this.g,M(this.Y()).Wa());var b=Vi(this.A,M(this.Y()).Wa());a&&b&&(this.extent[0]=Ir(Math.min(a[0],b[0]),a[0]-180,a[0]+180),this.extent[1]=Math.min(a[1],b[1]),this.extent[2]=Ir(Math.max(a[0],b[0]),a[0]-180,a[0]+180),this.extent[3]=Math.max(a[1],b[1]),this.mr(this.g,this.A))}};
g.mr=function(a,b){a&&b&&this.extent&&(a=this.s,a.j=Vk(this.extent),iu(a.j),a.Ed=a.j.clone(),nD(void 0,"rhumb"),GB(a.Ed),oD=mD=null,a.render())};g.xd=function(){hT.C.xd.call(this);this.A=null;this.s&&this.s.setMap(null)};g.So=function(){return this.extent?this.extent.toString():"none"};function iT(a){a=a||{};var b=a.color||"rgba(0,255,255,1)";a.style=a.style||new bk({stroke:new ak({color:b,lineCap:"square",width:2})});hT.call(this,a);this.color=lj(b)||[0,255,255,1]}w(iT,hT);P(iT,"os.I3DSupport");g=iT.prototype;g.mr=function(a,b){iT.C.mr.call(this,a,b);this.yx(a,b)};g.xd=function(){iT.C.xd.call(this);av(this.Y(),!0);this.xx()};g.xx=va;g.yx=va;g.yc=function(){return!0};g.ed=function(a){iT.C.ed.call(this,a);av(this.Y(),!1)};function jT(a,b){bT.call(this,a);this.o=this.A=null;this.j=-1;this.l=this.Ed=null;this.s=b||null}w(jT,bT);var pna=new ui(6378137);jT.prototype.mt=function(a){var b=$z.u();this.s&&a.Ld(new VK({fill:new Zj({color:[0,255,255,1]}),text:cA(b,this.j,3)}))};jT.prototype.X=function(){return this.Ed};
function qna(a,b,c){a.A=b;a.o=c;c=M(a.Y()).Wa();b=Vi(a.A,c);c=Vi(a.o,c);a.j=osasm.geodesicInverse(b,c).distance;var d=a.j;c=[];var e;for(e=0;32>e;++e)ik(c,pna.offset(b,d,2*Math.PI*e/32));c.push(c[0],c[1]);b=new Rk(null);Sk(b,"XY",c,[c.length]);iu(b);a.l=b;a.Ed=a.l.clone();GB(a.Ed);a.render()}jT.prototype.Zc=function(a){this.s=a};function kT(){gT.call(this);this.type="circle";this.s=new jT(this.Qb(),"km");this.center=null;this.distance=-1}w(kT,gT);g=kT.prototype;g.X=function(){var a=this.s.l;a&&(a.toLonLat(),Qu(a),iu(a));return a};g.Vb=function(){var a={};a.interpolationMethod=iD.method;return a};g.ed=function(a){kT.C.ed.call(this,a);this.s.setMap(a.map)};
g.update=function(a){a=a.coordinate;if(this.g&&(this.center=this.g,a)){var b=Vi(this.g,M(this.Y()).Wa()),c=Vi(a,M(this.Y()).Wa());this.distance=osasm.geodesicInverse(b,c).distance;this.oy(this.g,a)}};g.oy=function(a,b){a&&b&&(qna(this.s,a,b),this.s.Zc("km"))};g.xd=function(){kT.C.xd.call(this);this.center=null;this.distance=-1;this.s&&this.s.setMap(null)};g.So=function(){var a="";this.g&&(a+=this.g[0]+"E ",a+=this.g[1]+"N ");this.distance&&(a+=this.distance+"m");return a};function lT(){kT.call(this);this.s.Zc($z.u().g)}w(lT,kT);P(lT,"os.I3DSupport");g=lT.prototype;g.oy=function(a,b){a&&b&&(qna(this.s,a,b),this.s.Zc($z.u().g));this.Ax(a,b)};g.xd=function(){lT.C.xd.call(this);av(this.Y(),!0);this.zx()};g.zx=va;g.Ax=va;g.yc=function(){return!0};g.ed=function(a){lT.C.ed.call(this,a);av(this.Y(),!1)};function mT(a){a=a||{};iT.call(this,{color:a.color||"rgba(255,0,0,1)",condition:a.condition||Dca});this.type="dragBox";this.setActive(!0)}w(mT,iT);P(mT,"os.I3DSupport");mT.prototype.yc=function(){return!0};mT.prototype.end=function(){var a=this.X().aa();(new dv(a,void 0,-1)).Fa();this.cancel()};mT.prototype.Wu=function(){return!0};function nT(){eT.call(this,{handleDownEvent:rna,handleMoveEvent:sna,handleUpEvent:tna});this.type="polygon";this.coords=[];this.g=this.B=null;this.finish=!1}w(nT,eT);g=nT.prototype;g.X=function(){var a=new Rk([this.coords]),b=iD.method;a.set("interpolationMethod",b);a.toLonLat();Qu(a);nD("EPSG:4326",b);GB(a);oD=mD=null;a=UD(a);iu(a);return a};g.Vb=function(){var a={};a.interpolationMethod=iD.method;return a};function sna(a){this.l&&this.update(a)}
function tna(a){this.l&&this.finish&&this.end(a);return!1}function rna(a){return Od(new Md(a.originalEvent))&&(this.l||this.condition(a))?(this.l||this.ed(a),this.rs(a)?(this.Az(a),this.finish=!0):this.update(a),!0):!1}g.Az=function(){this.coords[this.coords.length-1]=this.coords[0]};g.rs=function(a){if(3<this.coords.length){var b=this.Y().Vd(this.coords[0]);a=a.pixel;if(b&&a)return 7>Math.abs(a[0]-b[0])&&7>Math.abs(a[1]-b[1])}return!1};
g.ed=function(a){this.finish=!1;nT.C.ed.call(this,a);qD();this.coords.length=0};g.update=function(a){var b=a.coordinate;b&&("pointerdown"===a.type?(this.coords.push(b),1==this.coords.length&&this.coords.push(b)):1<this.coords.length&&(this.coords[this.coords.length-1]=b),this.ut(),1<this.coords.length&&this.wk())};g.ut=function(){};
g.wk=function(){una(this);this.B.setMap(this.Y());this.g||(this.g=new ek,this.g.yb(this.Qb()),this.g.set("interpolationMethod",iD.method),this.B.O().ac(this.g));var a=new yr(this.coords.slice());a.toLonLat();Qu(a);iu(a);this.g.sb(a);this.g.set("_originalGeometry",void 0);this.g.qc(this.Vb(),!0);pD(this.g)};function una(a){a.B||(a.B=new wl({map:a.Y(),source:new tm({features:new Kh,useSpatialIndex:!1}),style:a.Qb(),updateWhileAnimating:!0,updateWhileInteracting:!0}))}
g.xd=function(){nT.C.xd.call(this);this.B&&(this.B.O().de.clear(),this.B.setMap(null),this.B.dispose(),this.B=null);this.g&&(this.g=null)};g.So=function(){return this.coords.toString()};function oT(){nT.call(this);this.color=[51,255,255,1]}w(oT,nT);P(oT,"os.I3DSupport");g=oT.prototype;g.wk=function(){oT.C.wk.call(this);this.Oq()};function pT(a){return Vi(a,N)}g.xd=function(){oT.C.xd.call(this);av(this.Y(),!0);this.Nq()};g.Nq=va;g.Oq=va;g.yc=function(){return!0};g.ed=function(a){oT.C.ed.call(this,a);(a=this.Y())&&0>=ll(M(a))[1]&&av(0,!1)};function qT(){oT.call(this);this.handleEvent=vna.bind(this);this.type="line";this.o=void 0}w(qT,oT);qT.prototype.X=function(){var a=null;this.coords.length=this.coords.length-1;1<this.coords.length&&(a=new yr(this.coords),a.toLonLat(),Qu(a),iu(a));return a};qT.prototype.rs=function(a){if(2<this.coords.length&&null!=this.o){var b=this.o.pixel,c=a.pixel;if(b&&c)return a=c[0]-b[0],b=c[1]-b[1],b=Math.sqrt(a*a+b*b),a=Date.now()-this.o.time,5>b&&250>a}return!1};
qT.prototype.update=function(a){qT.C.update.call(this,a);"pointerdown"===a.type&&(this.o={time:Date.now(),pixel:a.pixel.slice()})};function vna(a){return"dblclick"===a.type?!1:Tn.call(this,a)};function rT(a){Gn.call(this,{handleEvent:wna});a=void 0!==a?a:{};this.condition=void 0!==a.condition?a.condition:Cca;if(null!=a.layers)if(Ba(a.layers))a=a.layers;else{var b=a.layers;a=function(a){return kb(b,a)}}else a=uga;this.layerFilter=a;this.s=O.get("interaction.selectionBehavior",!0)}w(rT,Gn);P(rT,"os.I3DSupport");rT.prototype.yc=function(){return!0};
function wna(a){var b=a.map;if(!this.condition(a)||0<ll(M(b))[1])return!0;var c=this.s;try{var d,e=b.zh(a.pixel,function(a,b){if(a instanceof ek&&(d=MB(a,b),d instanceof vL))return d.zp(a)?rN(d,[a]):c?tN(d,[a]):uN(d,a),a},{layerFilter:this.layerFilter})}catch(f){}if(!e)return!0;a=(a=e.X())&&a.T()||null;return"Polygon"==a||"MultiPolygon"==a?!0:!1};function sT(a){rT.call(this,a);this.handleEvent=this.QJ;a=void 0!==a?a:{};this.condition=void 0!==a.condition?a.condition:Bca;this.l=new cM;this.l.Cf(2E5);a=V;a.H("dataSourceAdded",this.RJ,!1,this);a.H("dataSourceRemoved",this.SJ,!1,this);this.o=!1;this.g=void 0;this.j=null}w(sT,rT);g=sT.prototype;
g.QJ=function(a){var b=a.map;if(!this.condition(a))return!0;if(0<ll(M(b))[1])return this.g&&tT(this,void 0),!0;this.o=!0;var c,d=!1;a=b.zh(a.pixel,function(a,b){return a instanceof ek?a.Qb()?(!(c=MB(a,b))||b||d||(b=c.Ei)&&1===b.length&&b[0]===a&&(d=!0,a=c=null),a):null:a},{layerFilter:this.layerFilter});d&&!a||tT(this,a,c);this.o=!1;return!0};g.ww=function(){tT(this,void 0)};
function tT(a,b,c){var d=c||null,e=T.u();c=e.W("draw").O();if(b!=a.g){if(a.g)if(UE.get(a.g)||XB(e,a.g)&&a.g.get("_interactive"))a.g.la._highlightStyle=null,jH(a.g),WB(a.g,c);else{var f=MB(a.g);!f||null!=f.De&&f.De(null)||sN(f,null)}a.g=b||void 0;f="auto";b&&(d instanceof vL?(null!=d.De&&d.De(b)||sN(d,b?[b]:null),f="pointer"):UE.get(b)?(d=b.D(),0!==aF(WE,d)%2?b.la._highlightStyle=gha:b.la._highlightStyle=VG,jH(b),WB(b,c),f="pointer"):XB(e,b)&&b.get("_interactive")&&(b.la._highlightStyle=VG,jH(b),WB(b,
c),f="pointer"));a.j&&(a.j.style.cursor=f);zL(a.l,b?[b]:null)}}g.setMap=function(a){this.j&&xh(this.j,"mouseout",this.ww,this);sT.C.setMap.call(this,a);(this.j=a?a.g:null)&&I(this.j,"mouseout",this.ww,this);this.l.setMap(a)};g.RJ=function(a){I(a.source,"propertychange",this.Bx,this)};g.SJ=function(a){xh(a.source,"propertychange",this.Bx,this)};g.Bx=function(a){!this.o&&a.G&&"highlightedItems"===a.l&&zL(this.l,a.target.Ei)};function uT(a){co.call(this,a);this.l=0}w(uT,co);P(uT,"os.I3DSupport");uT.prototype.yc=function(){return!1};eo=function(a){var b=!1;"keydown"==a.type&&(this.l=a.originalEvent.keyCode);if(a.type==XS){var c=this.l||a.originalEvent.keyCode;if(this.g(a)&&(40==c||37==c||39==c||38==c)){b=M(a.map);var d=b.ab()*this.o,e=0,f=0;40==c?f=-d:37==c?e=-d:39==c?e=d:f=d;c=[e,f];qk(c,al(b));Hn(b,c,this.j);a.preventDefault();b=!0}}return!b};function vT(a){a=a||{};Gn.call(this,{handleEvent:xna});this.j=0;this.g=null!=a.condition?a.condition:bb(On,Qn)}w(vT,Gn);P(vT,"os.I3DSupport");function xna(a){if(!T.u().Qa)return!1;"keydown"==a.type&&(this.j=a.originalEvent.keyCode);var b=!1;if(a.type==XS){var c=this.j||a.originalEvent.keyCode;if(37==c||39==c)this.g(a)?b=yna(a):Pn(a)&&(b=this.rotate(a));else if(40==c||38==c)this.g(a)?b=yna(a):Pn(a)&&(b=this.tilt(a))}b&&a.preventDefault();return!b}
vT.prototype.tilt=function(a){var b=!1,c=T.u(),d=Yu(c);c.Qa()&&d&&(d.An(d.pu()+(40==a.originalEvent.keyCode?.05:-.05)),b=!0);return b};vT.prototype.rotate=function(a){var b=!1,c=T.u(),d=Yu(c);c.Qa()&&d&&(37==a.originalEvent.keyCode?d.g&&d.g.twistLeft(void 0):d.g&&d.g.twistRight(void 0),b=!0);return b};
function yna(a){var b=!1,c=T.u(),d=Yu(c);if(c.Qa()&&d){a=a.originalEvent.keyCode;c=M(c.Y()).getState();c=Ui([c.resolution,0],N,"EPSG:4326");c=Le(100*c[0]);switch(a){case 38:d.g&&d.g.rotateDown(c);break;case 40:d.g&&d.g.rotateUp(c);break;case 37:d.g&&d.g.rotateLeft(c);break;case 39:d.g&&d.g.rotateRight(c)}b=!0}return b}vT.prototype.yc=function(){return!0};function wT(a){fo.call(this,a);this.o=0}w(wT,fo);P(wT,"os.I3DSupport");wT.prototype.yc=function(){return!0};
go=function(a){var b=!1;"keydown"==a.type&&(this.o=a.originalEvent.keyCode);if(a.type==XS){var c=this.o||a.originalEvent.keyCode;if(this.g(a)){switch(c){case 189:case 173:var d=!1;var e=!0;break;case 187:case 61:e=d=!1;break;case 109:d=Pn(a);e=!0;break;case 107:d=Pn(a);e=!1;break;case 34:e=d=!0;break;case 33:d=!0,e=!1}null!=d&&null!=e&&(b=hD(d,e),c=a.map,c.render(),c=M(c),d=T.u(),d.Qa()?(c=Yu(d))&&cS(c,b):Jn(c,b,void 0,this.l),a.preventDefault(),b=!0)}}return!b};function zna(){T.u().Oa().filter(function(a){return(a=a.get("title"))&&-1<a.indexOf("Measure")}).forEach(Ana)}
function Ana(a){if(a){var b=a.get("_originalGeometry")||a.X();if(b&&b instanceof yr){b.toLonLat();var c=$z.u(),d=b.getCoordinates(),e=new Date(hw.u().g);if(d){for(var f=0,h=1,k=d.length;h<k;h++){var l=d[h-1],m=osasm.geodesicInverse(l,d[h]),n=m.distance;f+=n;if(l){var p=lka(m.initialBearing,l,e);p=mka(p);p=cA(c,n,3)+" Bearing: "+p}n=[a.Qb(),a.la._originalStyle];l=0;for(m=n.length;l<m;l++){if(h<n[l].length){var r=n[l][h];r&&(r=r.ub())&&r.ah(p)}if(h+1===k&&k<n[l].length){var u=cA(c,f,3);(r=n[l][k])&&
(r=r.ub())&&r.ah(u)}}}iu(b);(a=LB(a))&&CH(a)}}}};function xT(){oT.call(this);this.color=[255,0,0,1];this.type="measure";this.Z=0;this.L=[];this.o=[];this.yb(new bk({stroke:new ak({color:this.color,lineCap:"square",width:2})}));this.s=[];$z.u().H("propertychange",this.Cx,!1,this);O.H("bearing.type",this.Pq,!1,this)}w(xT,oT);var Bna=0,yT=iD.method;g=xT.prototype;g.J=function(){$z.u().M("propertychange",this.Cx,!1,this);O.M("bearing.type",this.Pq,!1,this);xT.C.J.call(this)};
g.X=function(){this.coords.length=this.coords.length-1;var a=new yr(this.coords);a.toLonLat();Qu(a);iu(a);return a};g.Vb=function(){var a={};a.interpolationMethod=yT;return a};g.rs=function(a){return 0<this.o.length&&!a.originalEvent.shiftKey};g.ed=function(a){this.g&&(this.g=null);xT.C.ed.call(this,a);this.o.length=0;this.L.length=0;this.Z=this.s.length=0};
g.ut=function(){var a,b=this.coords.length;if(1<b){var c=this.coords.length-1,d=Vi(this.coords[c-1],N);c=Vi(this.coords[c],N);"geodesic"===yT?a=osasm.geodesicInverse(d,c):a=osasm.rhumbInverse(d,c)}this.Z!=b?a&&(this.o.push(a.distance),this.L.push(a.initialBearing||a.bearing)):a&&0<this.o.length&&(this.o[this.o.length-1]=a.distance,this.L[this.L.length-1]=a.initialBearing||a.bearing);this.Z=b};g.Qb=function(){return[xT.C.Qb.call(this)].concat(this.s)};
function Cna(a){return new VK({font:wH(14),offsetX:5,text:a,textAlign:"left",fill:new Zj({color:[255,255,255,1]}),stroke:new ak({color:[0,0,0,1],width:2})})}g.wk=function(){una(this);if(this.s.length===this.o.length)var a=this.s[this.s.length-1];else a=new bk({text:Cna()}),this.s.push(a);var b=this.o.length-1;a.sb(new Jk(this.coords[b]));a.ub().ah(zT(this,b));this.g&&this.g.yb(this.Qb());xT.C.wk.call(this)};
g.end=function(a){if(this.l){if(1<this.s.length){var b=$z.u();b=cA(b,Dna(this),3);this.s.push(new bk({geometry:new Jk(this.coords[this.coords.length-1]),text:Cna(b)}));this.g.yb(this.Qb())}b=yT;b=b.substring(0,1).toUpperCase()+b.substring(1);Bna++;this.g.set("title",b+" Measure "+Bna);this.g.set("icons",' <i class="fa fa-arrows-h" title="Measure feature"></i> ');T.u().ac(this.g);xT.C.end.call(this,a)}};g.Az=va;
function zT(a,b){var c=a.o[b],d=a.s[b].X().getCoordinates(),e=$z.u();c=cA(e,c,3);a=a.L[b];b=new Date(hw.u().g);void 0!==a&&d&&(a=lka(a,d,b),d=mka(a,3),c+=" Bearing: "+d);return c}function Dna(a){for(var b=0,c=0;c<a.o.length;c++)b+=a.o[c];return b}g.Cx=function(a){"unit:change"==a.l&&(this.Pq(),zna())};g.Pq=function(){if(0<this.s.length){for(var a=this.s.length-1,b=1;b<a;b++){var c=zT(this,b);this.s[b].ub().ah(c)}b=$z.u();b=cA(b,Dna(this),3);this.s[a].ub().ah(b);this.g&&this.g.yb(this.Qb())}};function AT(){Gn.call(this,{handleEvent:Ena});this.g={}}w(AT,Gn);P(AT,"os.I3DSupport");AT.prototype.yc=function(){return!0};AT.prototype.zoom=function(a){var b=0,c=a.coordinate,d=new Md(a.originalEvent);null!=this.g?(d.clientY<this.g.low?b=-.1:d.clientY>this.g.high&&(b=.1),c=$k(M(a.map))):this.g={low:d.clientY-5,high:d.clientY+5};if(0!=b){this.g={low:d.clientY-5,high:d.clientY+5};b=Je(b,-1,1);a=a.map;d=M(a);var e=T.u();e.Qa()?(c=Yu(e))&&cS(c,0<b?1/.95:.95):(a.render(),Jn(d,-b,c))}};
function Ena(a){var b=!1;a.g&&2==a.g.buttons&&a.dragging&&a.originalEvent.ctrlKey?(this.zoom(a),b=!0):this.g=null;return!b};function BT(a){ko.call(this,a)}w(BT,ko);P(BT,"os.I3DSupport");BT.prototype.yc=function(){return!1};function CT(){Gn.call(this,{handleEvent:Fna});this.g=bb(On,Qn)}w(CT,Gn);P(CT,"os.I3DSupport");function Fna(a){var b=!1;if("keydown"==a.type&&this.g(a)){var c=a.originalEvent.keyCode;b=!0;switch(c){case 86:Q(R.u(),"map.keyboard.resetView",1);T.u().pn();break;case 78:Q(R.u(),"map.keyboard.resetRoll",1);Vka(T.u());break;case 85:Q(R.u(),"map.keyboard.resetTilt",1);Uka(T.u());break;case 82:Q(R.u(),"map.keyboard.resetRotation",1);T.u().Kk();break;default:b=!1}}b&&a.preventDefault();return!b}
CT.prototype.yc=function(){return!0};function Gna(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Hna.test(c)){a=c;if(!Hna.test(a))throw Error("'"+a+"' is not a valid alpha hex color");5==a.length&&(a=a.replace(Ina,"#$1$1$2$2$3$3$4$4"));b.Di=a.toLowerCase();b.type="hex";return b}a:{var d=a.match(Jna);if(d){c=Number(d[1]);var e=Number(d[2]);var f=Number(d[3]);d=Number(d[4]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=f&&255>=f&&0<=d&&1>=d){f=[c,e,f,d];break a}}f=[]}if(f.length){a=f[0];c=f[1];e=f[2];f=f[3];d=Math.floor(255*f);if(isNaN(d)||
0>d||255<d)throw Error('"('+a+","+c+","+e+","+f+'") is not a valid RGBA color');f=lv(d.toString(16));a=kv(a,c,e)+f;b.Di=a;b.type="rgba";return b}a:{if(d=a.match(Kna))if(c=Number(d[1]),e=Number(d[2]),f=Number(d[3]),d=Number(d[4]),0<=c&&360>=c&&0<=e&&100>=e&&0<=f&&100>=f&&0<=d&&1>=d){f=[c,e,f,d];break a}f=[]}if(f.length){a=f[0];c=f[1];e=f[2];f=f[3];d=Math.floor(255*f);if(isNaN(d)||0>d||255<d)throw Error('"('+a+","+c+","+e+","+f+'") is not a valid HSLA color');f=lv(d.toString(16));a=iv(nv(a,c/100,e/
100))+f;b.Di=a;b.type="hsla";return b}throw Error(a+" is not a valid color string");}var Ina=/#(.)(.)(.)(.)/,Hna=/^#(?:[0-9a-f]{4}){1,2}$/i,Jna=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i,Kna=/^(?:hsla)\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})%,\s?(0|[1-9]\d{0,2})%,\s?(0|1|0\.\d{0,10})\)$/i;function DT(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}g=DT.prototype;g.clone=function(){return new DT(this.top,this.right,this.bottom,this.left)};g.contains=function(a){return this&&a?a instanceof DT?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
g.expand=function(a,b,c,d){Aa(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=Number(b),this.bottom+=Number(c),this.left-=Number(d));return this};g.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};
g.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};g.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};g.translate=function(a,b){a instanceof fg?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,ta(b)&&(this.top+=b,this.bottom+=b));return this};
g.scale=function(a,b){b=ta(b)?b:a;this.left*=a;this.right*=a;this.top*=b;this.bottom*=b;return this};function ET(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}g=ET.prototype;g.clone=function(){return new ET(this.left,this.top,this.width,this.height)};
g.difference=function(a){b:{var b=Math.max(this.left,a.left);var c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),e=Math.min(this.top+this.height,a.top+a.height);if(d<=e){b=new ET(b,d,c-b,e-d);break b}}b=null}if(b&&b.height&&b.width){b=[];c=this.top;d=this.height;e=this.left+this.width;var f=this.top+this.height,h=a.left+a.width,k=a.top+a.height;a.top>this.top&&(b.push(new ET(this.left,this.top,this.width,a.top-this.top)),c=a.top,d-=a.top-this.top);k<f&&(b.push(new ET(this.left,
k,this.width,f-k)),d=k-c);a.left>this.left&&b.push(new ET(this.left,c,a.left-this.left,d));h<e&&b.push(new ET(h,c,e-h,d));a=b}else a=[this.clone()];return a};g.contains=function(a){return a instanceof fg?a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height:this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height};
g.distance=function(a){var b=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);a=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return Math.sqrt(b*b+a*a)};g.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
g.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};g.translate=function(a,b){a instanceof fg?(this.left+=a.x,this.top+=a.y):(this.left+=a,ta(b)&&(this.top+=b));return this};g.scale=function(a,b){b=ta(b)?b:a;this.left*=a;this.width*=a;this.top*=b;this.height*=b;return this};function FT(a,b){var c=kg(a);return c.defaultView&&c.defaultView.getComputedStyle&&(a=c.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}function GT(a,b){return FT(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}
function Lna(a){try{var b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}od&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}function HT(a){var b=kg(a),c=new fg(0,0);var d=b?kg(b):document;d=!od||Cd()||"CSS1Compat"==ig(d).g.compatMode?d.documentElement:d.body;if(a==d)return c;a=Lna(a);b=rg(ig(b).g);c.x=a.left+b.x;c.y=a.top+b.y;return c}
function Mna(a){var b=Nna;if("none"!=GT(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function Nna(a){var b=a.offsetWidth,c=a.offsetHeight,d=rd&&!b&&!c;return ra(b)&&!d||!a.getBoundingClientRect?new gg(b,c):(a=Lna(a),new gg(a.right-a.left,a.bottom-a.top))}function iA(a,b){a.style.display=b?"":"none"}
var IT=qd?"MozUserSelect":rd||pd?"WebkitUserSelect":null;function JT(a,b){var c=a.currentStyle?a.currentStyle[b]:null;if(c)if(/^\d+px?$/.test(c))a=parseInt(c,10);else{b=a.style.left;var d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=c;c=a.style.pixelLeft;a.style.left=b;a.runtimeStyle.left=d;a=+c}else a=0;return a};function KT(){}wa(KT);KT.prototype.g=0;function LT(a){A.call(this);this.o=a||ig();this.s=Ona;this.ma=null;this.Td=!1;this.K=null;this.j=void 0;this.g=this.cb=this.xa=null}w(LT,A);LT.prototype.B=KT.u();var Ona=null;function Pna(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}g=LT.prototype;
g.D=function(){return this.ma||(this.ma=":"+(this.B.g++).toString(36))};g.ga=function(a){this.xa&&this.xa.g&&(wc(this.xa.g,this.ma),xc(this.xa.g,a,this));this.ma=a};g.tb=function(){return this.K};function Qna(a){a.j||(a.j=new Vx(a));return a.j}g.Pe=function(a){if(this==a)throw Error("Unable to set parent component");var b;if(b=a&&this.xa&&this.ma){b=this.xa;var c=this.ma;b=b.g&&c?yc(b.g,c)||null:null}if(b&&this.xa!=a)throw Error("Unable to set parent component");this.xa=a;LT.C.ms.call(this,a)};
g.getParent=function(){return this.xa};g.ms=function(a){if(this.xa&&this.xa!=a)throw Error("Method not supported");LT.C.ms.call(this,a)};g.ep=function(){this.K=this.o.g.createElement("DIV")};g.render=function(a){Rna(this,a)};function Rna(a,b,c){if(a.Td)throw Error("Component already rendered");a.K||a.ep();b?b.insertBefore(a.K,c||null):a.o.g.body.appendChild(a.K);a.xa&&!a.xa.Td||a.Cj()}g.Cj=function(){this.Td=!0;MT(this,function(a){!a.Td&&a.tb()&&a.Cj()})};
g.Dj=function(){MT(this,function(a){a.Td&&a.Dj()});this.j&&this.j.removeAll();this.Td=!1};g.J=function(){this.Td&&this.Dj();this.j&&(this.j.dispose(),delete this.j);MT(this,function(a){a.dispose()});this.K&&yg(this.K);this.xa=this.K=this.g=this.cb=null;LT.C.J.call(this)};
g.R=function(a,b){var c=this.cb?this.cb.length:0;if(a.Td&&(b||!this.Td))throw Error("Component already rendered");if(0>c||c>(this.cb?this.cb.length:0))throw Error("Child component index out of bounds");this.g&&this.cb||(this.g={},this.cb=[]);if(a.getParent()==this){var d=a.D();this.g[d]=a;qb(this.cb,a)}else xc(this.g,a.D(),a);a.Pe(this);nb(this.cb,a,c);a.Td&&this.Td&&a.getParent()==this?(b=this.fp(),c=b.childNodes[c]||null,c!=a.tb()&&b.insertBefore(a.tb(),c)):b?(this.K||this.ep(),c=this.cb?this.cb[c+
1]||null:null,Rna(a,this.fp(),c?c.K:null)):this.Td&&!a.Td&&a.K&&a.K.parentNode&&1==a.K.parentNode.nodeType&&a.Cj()};g.fp=function(){return this.K};g.Ke=function(){return!!this.cb&&0!=this.cb.length};function MT(a,b){a.cb&&db(a.cb,b,void 0)}g.removeChild=function(a,b){if(a){var c=sa(a)?a:a.D();a=this.g&&c?yc(this.g,c)||null:null;c&&a&&(wc(this.g,c),qb(this.cb,a),b&&(a.Dj(),a.K&&yg(a.K)),a.Pe(null))}if(!a)throw Error("Child is not in parent component");return a};
g.pz=function(a){this.removeChild(this.cb?this.cb[a]||null:null,void 0)};var NT;Dc("A AREA BUTTON HEAD INPUT LINK MENU META OPTGROUP OPTION PROGRESS STYLE SELECT SOURCE TEXTAREA TITLE TRACK".split(" "));
function OT(a,b,c){q(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(NT||(NT={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=NT,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};function PT(){}var QT;wa(PT);var Sna={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};function Tna(a,b,c){if(a=a.tb?a.tb():a){var d=[b];od&&!Bd("7")&&(d=Una(FH(a),b),d.push(b));(c?iha:jha)(a,d)}}function RT(a,b){var c;if(c=a.tb()){if(!b&&a.va&32){try{c.blur()}catch(d){}a.va&32&&a.vu(null)}(Fg(c)&&Gg(c))!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}}
PT.prototype.ec=function(a,b){iA(a,b);a&&OT(a,"hidden",!b)};PT.prototype.Ga=function(a,b,c){var d=a.tb();if(d){var e=Vna(this,b);e&&Tna(a,e,c);Wna(d,b,c)}};function Wna(a,b,c){QT||(QT={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=QT[b];var d=a.getAttribute("role")||null;d&&(d=Sna[d]||b,b="checked"==b||"selected"==b?d:b);b&&OT(a,b,c)}function ST(){return"goog-control"}
function Xna(a,b){var c=ST(),d=[c],e=ST();e!=c&&d.push(e);c=b.getState();for(e=[];c;){var f=c&-c;e.push(Vna(a,f));c&=~f}d.push.apply(d,e);(a=b.Ut)&&d.push.apply(d,a);od&&!Bd("7")&&d.push.apply(d,Una(d));return d}function Una(a,b){var c=[];b&&(a=tb(a,[b]));db([],function(d){!hb(d,Fa(kb,a))||b&&!kb(d,b)||c.push(d.join("_"))});return c}
function Vna(a,b){if(!a.g){var c=ST();Ub(c.replace(/\xa0|\s/g," ")," ");a.g={1:c+"-disabled",2:c+"-hover",4:c+"-active",8:c+"-selected",16:c+"-checked",32:c+"-focused",64:c+"-open"}}return a.g[b]};var Yna={};function TT(a,b,c){LT.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=Ca(b);if(d=Yna[d])break;b=b.C?b.C.constructor:null}b=d?Ba(d.u)?d.u():new d:null}this.Yd=b;this.gp=ra(a)?a:null}w(TT,LT);g=TT.prototype;g.gp=null;g.va=0;g.Sf=!0;g.Ut=null;g.wi=function(){return this.Yd};
g.ep=function(){var a=this.o.sh("DIV",Xna(this.Yd,this).join(" "),this.Ob());this.K=a;var b=od||nd?a.getElementsByTagName("*"):null;if(IT){var c="none";a.style&&(a.style[IT]=c);if(b)for(var d=0,e;e=b[d];d++)e.style&&(e.style[IT]=c)}else if(od||nd)if(c="on",a.setAttribute("unselectable",c),b)for(d=0;e=b[d];d++)e.setAttribute("unselectable",c);this.Sf||this.Yd.ec(a,!1)};g.fp=function(){return this.tb()};
g.Cj=function(){TT.C.Cj.call(this);var a=this.K;this.Sf||OT(a,"hidden",!this.Sf);this.isEnabled()||Wna(a,1,!this.isEnabled());null==this.s&&(this.s="rtl"==GT(this.Td?this.K:this.o.g.body,"direction"));this.s&&(a=this.tb(),Tna(a,ST()+"-rtl",!0));this.isEnabled()&&RT(this,this.Sf);a=Qna(this);var b=this.tb();a.H(b,"mouseover",this.kE).H(b,"mousedown",this.yu).H(b,"mouseup",this.zu).H(b,"mouseout",this.PD);this.wu!=va&&a.H(b,"contextmenu",this.wu);od&&(Bd(9)||a.H(b,"dblclick",this.WD),this.A||(this.A=
new UT(this),La(this,Fa(Ma,this.A))));if(a=this.tb())b=this.l||(this.l=new Lg),Mg(b,a),Qna(this).H(b,"key",this.OD).H(a,"focus",this.ZD).H(a,"blur",this.vu)};g.Dj=function(){TT.C.Dj.call(this);this.l&&this.l.detach();this.Sf&&this.isEnabled()&&RT(this,!1)};g.J=function(){TT.C.J.call(this);this.l&&(this.l.dispose(),delete this.l);delete this.Yd;this.A=this.Ut=this.gp=null};g.Ob=function(){return this.gp};
g.ec=function(a,b){if(b||this.Sf!=a&&this.dispatchEvent(a?"show":"hide"))(b=this.tb())&&this.Yd.ec(b,a),this.isEnabled()&&RT(this,a),this.Sf=a};g.isEnabled=function(){return!(this.va&1)};g.eb=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!VT(this,1,!a)||(a||(this.setActive(!1),WT(this,!1)),this.Sf&&RT(this,a),this.Ga(1,!a,!0))};function WT(a,b){VT(a,2,b)&&a.Ga(2,b)}g.isActive=function(){return!!(this.va&4)};g.setActive=function(a){VT(this,4,a)&&this.Ga(4,a)};
g.zp=function(){return!!(this.va&8)};g.nj=function(a){VT(this,8,a)&&this.Ga(8,a)};g.getState=function(){return this.va};g.Ga=function(a,b,c){c||1!=a?39&a&&b!=!!(this.va&a)&&(this.Yd.Ga(this,a,b),this.va=b?this.va|a:this.va&~a):this.eb(!b)};function XT(a){return!!(255&a)&&!!(39&a)}function VT(a,b,c){return!!(39&b)&&!!(a.va&b)!=c&&(!(0&b)||a.dispatchEvent(Pna(b,c)))&&!a.Xa()}g.kE=function(a){!Zna(a,this.tb())&&this.dispatchEvent("enter")&&this.isEnabled()&&XT(2)&&WT(this,!0)};
g.PD=function(a){!Zna(a,this.tb())&&this.dispatchEvent("leave")&&(XT(4)&&this.setActive(!1),XT(2)&&WT(this,!1))};g.wu=va;function Zna(a,b){return!!a.relatedTarget&&Dg(b,a.relatedTarget)}g.yu=function(a){if(this.isEnabled()&&(XT(2)&&WT(this,!0),Od(a))){XT(4)&&this.setActive(!0);var b;if(b=this.Yd){var c;b=(c=this.tb())?Fg(c)&&Gg(c):!1}b&&this.tb().focus()}Od(a)&&a.preventDefault()};g.zu=function(a){this.isEnabled()&&(XT(2)&&WT(this,!0),this.isActive()&&YT(this,a)&&XT(4)&&this.setActive(!1))};
g.WD=function(a){this.isEnabled()&&YT(this,a)};function YT(a,b){if(XT(16)){var c=!(a.va&16);VT(a,16,c)&&a.Ga(16,c)}XT(8)&&a.nj(!0);XT(64)&&(c=!(a.va&64),VT(a,64,c)&&a.Ga(64,c));c=new z("action",a);b&&(c.altKey=b.altKey,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.I=b.I);return a.dispatchEvent(c)}g.ZD=function(){XT(32)&&VT(this,32,!0)&&this.Ga(32,!0)};g.vu=function(){XT(4)&&this.setActive(!1);XT(32)&&VT(this,32,!1)&&this.Ga(32,!1)};
g.OD=function(a){return this.Sf&&this.isEnabled()&&13==a.keyCode&&YT(this,a)?(a.preventDefault(),a.stopPropagation(),!0):!1};if(!Ba(TT))throw Error("Invalid component class "+TT);if(!Ba(PT))throw Error("Invalid renderer class "+PT);var $na=Ca(TT);Yna[$na]=PT;function aoa(){return new TT(null)}if(!Ba(aoa))throw Error("Invalid decorator function "+aoa);
function UT(a){y.call(this);this.j=a;this.g=!1;this.l=new Vx(this);La(this,Fa(Ma,this.l));a=this.j.K;this.l.H(a,"mousedown",this.s).H(a,"mouseup",this.A).H(a,"click",this.o)}w(UT,y);var boa=!od||Cd();UT.prototype.s=function(){this.g=!1};UT.prototype.A=function(){this.g=!0};
function coa(a,b){if(!boa)return a.button=0,a.type=b,a;var c=document.createEvent("MouseEvents");c.initMouseEvent(b,a.bubbles,a.cancelable,a.view||null,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,a.relatedTarget||null);return c}UT.prototype.o=function(a){if(this.g)this.g=!1;else{var b=a.j,c=b.button,d=b.type,e=coa(b,"mousedown");this.j.yu(new Md(e,a.A));e=coa(b,"mouseup");this.j.zu(new Md(e,a.A));boa||(b.button=c,b.type=d)}};
UT.prototype.J=function(){this.j=null;UT.C.J.call(this)};var doa="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" ");W.directive("colorpalette",[function(){return{restrict:"E",replace:!0,scope:{colors:"=?",value:"=",name:"@",columns:"@",showReset:"@"},templateUrl:"v1542394219/views/color/colorpalette.html",controller:ZT,controllerAs:"palette"}}]);function ZT(a){this.v=a;this.g=a.name||null;this.showReset="true"===a.showReset;for(var b=a.colors||doa,c=a.columns||7,d=[],e=0,f=b.length;e<f;e++)0==e%c&&d.push([]),d[d.length-1].push(b[e]);a.rows=d;a.$on("$destroy",this.j.bind(this))}ZT.$inject=["$scope"];
ZT.prototype.j=function(){this.v=null};ZT.prototype.pick=function(a){this.v.value=a;this.v.$emit($T("palette.change",this.g),a)};ZT.prototype.pick=ZT.prototype.pick;ZT.prototype.reset=function(){this.v.value="";this.v.$emit($T("palette.reset",this.g))};ZT.prototype.reset=ZT.prototype.reset;ZT.prototype.S=function(a){return xv(a)};ZT.prototype.getTitle=ZT.prototype.S;function $T(a,b){return b?b+"."+a:a};W.directive("colorpicker",[function(){return{restrict:"AE",replace:!0,scope:{color:"=",data:"=",disabled:"=",name:"@",showReset:"@"},template:'<button type="button" class="btn bg-transparent border js-color-picker" ng-click="colorPicker.togglePopup()" ng-disabled=disabled><i class="fa fa-square" ng-style="{\'color\': color}"></i></button>',controller:aU,controllerAs:"colorPicker"}}]);
function aU(a,b,c){this.scope=a;this.element=b;this.o=c;this.j=this.l=null;this.showPopup=!1;(b=this.scope.color)||(b="#ffffff");0!==b.indexOf("#")&&(b=(-1<b.indexOf("a(")?Gna(b):Gea(b)).Di.substring(0,7));this.scope.color=b;this.g=this.scope.name;a.$on($T("palette.change",this.g),this.sK.bind(this));a.$on($T("palette.reset",this.g),this.BI.bind(this));a.$on("$destroy",this.tK.bind(this))}aU.$inject=["$scope","$element","$compile"];g=aU.prototype;
g.tK=function(){eoa(this);this.element=this.o=this.scope=null};function eoa(a){a.j&&(a.j.remove(),a.j=null);a.l&&(de(document,"mousedown",a.Qm,!1,a),de(document,"mousewheel",a.Qm,!1,a),a.l.$destroy(),a.l=null)}g.sK=function(a,b){a.stopPropagation();this.scope.color=b;this.g?this.scope.$emit(this.g+".change",this.scope.color):this.scope.$emit("color.colorChanged",{color:this.scope.color,data:this.scope.data});this.In(!1)};g.BI=function(a){a.stopPropagation();this.scope.$emit(this.g+".reset");this.In(!1)};
g.Qm=function(a){var b=this.element[0];a.target==b||Dg(b,a.target)||(b=this.j&&this.j[0])&&a.target!=b&&!Dg(b,a.target)&&(this.In(!1),X(this.scope))};g.In=function(a){(this.showPopup=void 0!==a?a:!this.showPopup)?(this.l=this.scope.$new(),this.l.value=this.scope.color,this.j=this.o(foa(this))(this.l),a=$(".color-picker-container"),a=a.length?a[0]:document.body,wg(a,this.j[0]),Yd(document,"mousedown",this.Qm,!1,this),Yd(document,"mousewheel",this.Qm,!1,this)):eoa(this)};aU.prototype.togglePopup=aU.prototype.In;
function foa(a){var b=a.element.offset();b.top+=a.element.outerHeight();return'<colorpalette class="position-fixed" value="value" '+(a.g?'name="'+a.g+'" ':"")+'show-reset="'+(void 0!==a.scope.showReset?a.scope.showReset:"false")+'" style="top:'+b.top+"px;left:"+b.left+'px;"></colorpalette>'};W.directive("confirmcolor",[function(){return{restrict:"E",templateUrl:"v1542394219/views/window/confirmcolor.html",controller:goa,controllerAs:"confirmcolor"}}]);function goa(a){a.$watch("confirmValue",function(b,c){b!=c&&(a.$parent.confirmValue=b)})}goa.$inject=["$scope"];var bU=void 0;function hoa(a){this.visible=!!(a&&1<a.length)}function ioa(){var a=O.get("bgColor","#000000");this.da[0]='<i class="fa fa-fw fa-tint" style="color:'+a+'"></i>'}function joa(){C.dispatchEvent(new jE("toggleUI","legend",!0,null,"map.features.showLedgend"))}function koa(){for(var a=GL(NB),b=0,c=a.length;b<c;b++){var d=a[b];d instanceof vL&&hN(d)}}
function loa(){var a=O.get("bgColor","#000000");cK({confirm:moa,confirmValue:a||"#ffffff",prompt:"<confirmcolor></confirmcolor>",windowOptions:{label:"Choose Color",icon:"fa fa-tint",x:"center",y:"center",width:195,height:"auto",modal:"true","show-close":"false","no-scroll":"true"}})}function moa(a){O.set("bgColor",a)}function noa(){this.visible=T.u().Qa()&&Iz();this.selected=!!O.get("os.map.enableTerrain",!1)}function ooa(){O.set("os.map.enableTerrain",!this.selected)};function cU(a){var b=a||{};b.timeout=null!=b.timeout?b.timeout:10;b.duration=null!=b.duration?b.duration:0;ho.call(this,a);this.I=100}w(cU,ho);cU.prototype.A=function(a){this.j&&(this.j=0<this.j?.2:-.2);cU.C.A.call(this,a)};function poa(){var a=new mT,b={delta:.2},c=new cU(b),d=new AT(b),e=new aT,f=new BT,h=new vT(b),k=new rT(b),l=new Vn({kinetic:void 0,delta:.2}),m=new sT(b),n=new iT,p=new lT,r=new oT,u=new qT,v=new $S,x=new xT,B=new uT;b=new wT(b);var F=new CT,D=new ZS({Dl:mF,lm:bU});return new Kh([m,h,B,b,a,f,l,c,d,e,D,k,n,p,r,u,x,v,F])};function qoa(){wQ.call(this);this.Da("Add Data");this.fb("The Add Data window allows both feature and imagery data from an expanding pool of data providers to be added to the map.");this.vb(["data","providers","search"]);this.wc("fa fa-plus");this.zd(!0);var a=xQ(this);this.R(a,{label:"Open",description:"Open Add Data window.",key:"addData.open"});this.R(a,{label:"Add Data",icon:"fa fa-plus",description:"Add a data layer to the map.",key:"addData.add-layer-command"});this.R(a,{label:"Remove Data",
icon:"fa fa-plus",description:"Remove a data layer from the map",key:"addData.remove-layer-command"});this.R(a,{label:"Search",description:"Perform a search through the available data layers.",key:"addData.search"});this.R(a,{label:"Group By",description:"Group the available data layers by a facet.",key:"addData.groupBy"});this.R(a,{label:"Open File/URL",description:"Import data from a local file or URL.",key:"addData.import"});this.R(a,{label:"View Layer Info",description:"Click on a layer to see information about it.",
key:"addData.getInfo"})}w(qoa,wQ);function roa(){wQ.call(this);this.Da("Filters");this.vb(["TODO"]);this.wc("fa fa-filter");this.zd(!0);var a=xQ(this);this.R(a,{label:"Group By",key:"filters.groupBy"});this.R(a,{label:"Search filters",key:"filters.search"});this.R(a,{label:"Copy filter",key:"filters.copy"});this.R(a,{label:"Edit filter",key:"filters.edit"});this.R(a,{label:"Remove filter",key:"filters.remove"});this.R(a,{label:"Import filter",key:"filters.import"});a=this.R(a,{label:"Advanced filter dialog"});this.R(a,{label:"Open Advanced Filter Dialog",
key:"filters.advancedOpen"});this.R(a,{label:"Select Layer",key:"filters.advanced.selectLayer"});this.R(a,{label:"Add Filter",key:"filters.new"});this.R(a,{label:"Advanced Toggle",key:"filters.advanced.advancedToggle"});this.R(a,{label:"Expand All",key:"filters.advanced.expandAll"});this.R(a,{label:"Collapse All",key:"filters.advanced.collapseAll"});this.R(a,{label:"Reset",key:"filters.advanced.reset"});this.R(a,{label:"Area Include/Exclude Toggle",key:"filters.advanced.areaIncludeToggle"});this.R(a,
{label:"Area Edit",key:"filters.advanced.areaEdit"});this.R(a,{label:"Area Remove",key:"filters.advanced.areaRemove"});this.R(a,{label:"Export",key:"filters.export"});this.R(a,{label:"Import",key:"filters.import"});this.R(a,{label:"Apply",key:"filters.advanced.apply"});this.R(a,{label:"Close",key:"filters.advanced.close"})}w(roa,wQ);function soa(){wQ.call(this);this.Da("Layers");this.fb("Layer controls for the map");this.vb("Add Layer Tile Feature Imagery Zoom Style Remove Rename Convolve Buffer Export".split(" "));this.wc("fa fa-bars");this.zd(!0);var a=xQ(this),b=this.R(a,{label:"Style Panel",collapsed:!0,description:"The layer style panel allows control over a layer's opacity, color and size."});this.R(b,{label:"Change Feature Layer Color",description:"The color used to render the data for this layer.",key:"layers.features.changeVectorColor"});
this.R(b,{label:"Change Feature Layer Shape",description:"The icon shape used for data points on this layer.",key:"layers.features.changeVectorShape"});this.R(b,{label:"Change Feature Layer Center Shape",description:"The icon shape used in the ellipse center for data points on this layer.",key:"layers.features.changeVectorCenterShape"});this.R(b,{label:"Change Feature Layer Size",description:"The icon size used for data points on this layer.",key:"layers.features.changeVectorSize"});this.R(b,{label:"Toggle Ellipsoid",
description:"Whether or not ellipses are rendered as ellipsoids.",key:"layers.features.changeVectorEllipsoid"});this.R(b,{label:"Toggle Ground Reference",description:"Whether or not ellipses are rendered with a ground reference line.",key:"layers.features.changeVectorGroundReference"});this.R(b,{label:"Toggle Line of Bearing Arrow",description:"Whether or not lines of bearing are rendered with arrows.",key:"layers.features.changeVectorShowArrow"});this.R(b,{label:"Toggle Line of Bearing Show Error",
description:"Whether or not lines of bearing are rendered with error arcs.",key:"layers.features.changeVectorShowError"});this.R(b,{label:"Toggle Line of Bearing Show Ellipse",description:"Whether or not lines of bearing are rendered with error ellipses.",key:"layers.features.changeVectorShowEllipse"});this.R(b,{label:"Line of Bearing Arrow Length",description:"The length of an arrow drawn with lines of bearing.",key:"layers.features.changeVectorArrowSize"});this.R(b,{label:"Line of Bearing Arrow Length Units",
description:"The units of the length of an arrow drawn with lines of bearing.",key:"layers.features.changeVectorArrowUnits"});this.R(b,{label:"Line of Bearing Length Multiplier",description:"The multiplier on the length of a line of bearing.",key:"layers.features.changeVectorLineOfBearingLength"});this.R(b,{label:"Line of Bearing Length Type",description:"The type of the length of a line of bearing (manual or column).",key:"layers.features.changeVectorLineOfBearingLengthType"});this.R(b,{label:"Line of Bearing Length",
description:"The length of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingLengthColumn"});this.R(b,{label:"Line of Bearing Length Column Multiplier",description:"The multiplier on the length of a line of bearing, column option.",key:"layers.features.changeVectorLineOfBearingColumnLength"});this.R(b,{label:"Line of Bearing Length Units",description:"The units on the length of a line of bearing.",key:"layers.features.changeVectorLineOfBearingLengthUnits"});
this.R(b,{label:"Line of Bearing Length Error",description:"The length error of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingLengthErrorColumn"});this.R(b,{label:"Line of Bearing Length Error Multiplier",description:"The multiplier on the error length of a line of bearing.",key:"layers.features.changeVectorLineOfBearingLengthError"});this.R(b,{label:"Line of Bearing Length Error Units",description:"The units of the length error of a line of bearing.",
key:"layers.features.changeVectorLineOfBearingLengthErrorUnits"});this.R(b,{label:"Line of Bearing Orientation",description:"The orientation of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingBearingColumn"});this.R(b,{label:"Line of Bearing Orientation Error",description:"The orientation error of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingBearingErrorColumn"});this.R(b,{label:"Line of Bearing Orientation Error Multiplier",
description:"The multipler on the orientation error of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingBearingError"});this.R(b,{label:"Toggle Show Icon Rotation",description:"Whether or not icons are shown with rotation.",key:"layers.features.changeVectorShowRotation"});this.R(b,{label:"Icon Rotation Column",description:"The orientation of an icon. Can be defined by a column.",key:"layers.features.changeVectorRotationColumn"});this.R(b,{label:"Change Feature Auto Refresh",
description:"How often the layer will automatically refresh its data.",key:"layers.features.changeVectorAutoRefresh"});b=this.R(a,{label:"Label Panel",collapsed:!0,description:"The layer label panel allows control over a layer's. label settings, including label color and columns."});this.R(b,{label:"Change Label Color",description:'The color used for labels on this layer when "Always Show Labels" is checked. <br/>NOTE: The label color does not affect the label color used when hovering, which is alaways red.',
key:"layers.features.changeLabelColor"});this.R(b,{label:"Change Label Size",description:"The font size used for labels on this layer.",key:"layers.features.changeLabelSize"});this.R(b,{label:"Always Show Labels",description:"When checked, labels will be rendered for all features.",key:"layers.features.changeLabelToggle"});this.R(b,{label:"Select a label column",description:"Controls the data column used for labels on this layer.",key:"layers.features.labelColumnSelect"});this.R(b,{label:"Add a label column",
description:"Add additional columns used for labels.",key:"layers.features.labelColumnAdd"});this.R(b,{label:"Remove a label column",description:"Add remove columns used for the labels.",key:"layers.features.labelColumnRemove"});b=this.R(a,{label:"Layer Context Menu",collapsed:!0,description:"Layer right-click context menu commands."});this.R(b,{label:"Identify",key:"layers.contextMenu.identify"});this.R(b,{label:"Most Recent",key:"layers.contextMenu.mostRecent"});this.R(b,{label:"Refresh",key:"layers.contextMenu.refresh"});
this.R(b,{label:"Remove",key:"layers.contextMenu.remove",description:"Removes this layer."});this.R(b,{label:"Rename",key:"layers.contextMenu.rename"});a=this.R(a,{label:"Feature Layer Context Menu",collapsed:!0,description:"Layer right-click context menu commands."});this.R(a,{label:"Go to layer",description:"Zooms to data loaded by this layer.",key:"layers.contextMenu.featureLayer.goTo"});this.R(a,{label:"Identify",description:"Causes current layer to blink.",key:"layers.contextMenu.identify"});
this.R(a,{label:"Clear Selection",description:"Clear any selected data from layer.",key:"layers.contextMenu.featureLayer.clearSelection"});this.R(a,{label:"Most Recent",description:"Focuses time filter (in main menu bar) to most recent data available.",key:"layers.contextMenu.mostRecent"});this.R(a,{label:"Refresh",description:"Refreshes the layer form the server.",key:"layers.contextMenu.refresh"});this.R(a,{label:"Remove",description:"Removes this layer.",key:"layers.contextMenu.remove"});this.R(a,
{label:"Rename",description:"Renames this layer.",key:"layers.contextMenu.rename"});this.R(a,{label:"Generate 2D Heatmap",description:"Generate 2D Heatmap for this layer.",key:"layers.contextMenu.featureLayer.heatMap"});this.R(a,{label:"Export...",description:"Exports data from this layer.",key:"layers.contextMenu.export"});this.R(a,{label:"Create Buffer Region",description:"Creates buffered region from data in this layer.",key:"layers.contextMenu.createBuffer"})}w(soa,wQ);function Foa(){wQ.call(this);this.Da("Places");this.wc("fa fa-circle-o");this.zd(!0);var a=xQ(this);this.R(a,{label:"Add Place",description:"Add a Place to your Places list.",key:"places.addPlace"});this.R(a,{label:"Add Folder",description:"Add a folder to your Places list.",key:"places.addFolder"});this.R(a,{label:"Export",description:"Export your Places list.",key:"places.export"});this.R(a,{label:"Expand All",description:"Click the expand all button on your Places list.",key:"places.expandAll"});
this.R(a,{label:"Collapse All",description:"Click the collapse all button on your Places list.",key:"places.collapseAll"});a=this.R(a,{label:"Places Context Menu"});this.R(a,{label:"Edit Folder",description:"Edit a Places folder.",key:"places.contextMenu.editFolder"});this.R(a,{label:"Edit Place",description:"Edit a Place.",key:"places.contextMenu.editPlacemark"});this.R(a,{label:"Export Node",description:"Export a Place or a folder from the Places list.",key:"places.contextMenu.export"})}w(Foa,wQ);function Goa(){wQ.call(this);this.Da("Servers");this.fb("The servers window can be accessed through the settings window. It shows all of the servers that are currently configured. It also allows you to add, edit, refresh and remove servers.");this.wc("fa fa-database");this.zd(!0);var a=xQ(this);this.R(a,{label:"Add Server",description:"Add a new server in the Servers section in settings.",key:"servers.addServer"});this.R(a,{label:"View Server",description:"View details about a server in the Servers section in settings.",
key:"servers.view"});this.R(a,{label:"Refresh a server in the Servers section in settings.",key:"servers.refresh"});this.R(a,{label:"Edit a server in the Servers section in settings.",key:"servers.edit"});this.R(a,{label:"Delete a server in the Servers section in settings.",key:"servers.delete"})}w(Goa,wQ);var Hoa=[{label:"Play",description:"The play or pause button animates loaded data over time.",key:"timeline.features.controls-playToggle"},{label:"Next Frame",description:"This button moves the blue time frame window to the next frame.",key:"timeline.features.controls-nextFrame"},{label:"Previous Frame",description:"This button moves the blue time frame window to the previous frame.",key:"timeline.features.controls-prevFrame"},{label:"First Frame",key:"timeline.features.controls-firstFrame"},{label:"Last Frame",
key:"timeline.features.controls-lastFrame"},{label:"Zoom In",key:"timeline.features.controls-zoomIn"},{label:"Zoom Out",key:"timeline.features.controls-zoomOut"},{label:"Mouse Wheel Zoom",description:"Zooms the timeline in or out",key:"timeline.features.controls-mouseZoom"},{label:"Record",key:"timeline.features.controls-record"},{label:"Reset",key:"timeline.features.controls-reset"},{label:"Chart Type",key:"timeline.features.controls-chartType"}],Ioa=[{label:"Load",description:"Queries a time range drawn on the timeline. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",
key:"timeline.features.timeRange-load"},{label:"Add",description:"Adds a time range drawn on the timeline. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",key:"timeline.features.timeRange-add"},{label:"Slice",description:"Adds a slice range drawn on the timeline. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",
key:"timeline.features.timeRange-slice"},{label:"Select",description:"Selects features in the drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",key:"timeline.features.timeRange-select"},{label:"Select Exclusive",description:"Selects only features in the drawn time range, deselecting all other features. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",
key:"timeline.features.timeRange-selectExclusive"},{label:"Deselect",description:"Deselects all features in the drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",key:"timeline.features.timeRange-deselect"},{label:"Zoom",description:"Zooms to the drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",
key:"timeline.features.timeRange-zoom"},{label:"Animates this time range",description:"Animates data over the drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",key:"timeline.features.timeRange-animate"}],Joa=[{label:"Fade",description:"Fade in/out features based on the size of your timeline window and scroll direction",key:"timeline.features.settings-fade"},
{label:"Lock",description:"Locks start of view window during animation",key:"timeline.features.settings-lock"},{label:"Time Range",description:"Changes the load range from the timeline settings",key:"timeline.features.settings-timeRange"}];
function Koa(){wQ.call(this);this.Da("Timeline");this.fb("Animate data loaded in the application over a time range.");this.vb(["Animation"]);this.wc("fa fa-clock-o");this.zd(!0);var a=xQ(this);this.R(a,{label:"Open Timeline",description:'The <i class="fa fa-clock-o"></i> icon located at the top center of the screen opens the time-line control.',key:"timeline.features.open"});var b=this.R(a,{label:"Control Panel",description:"Controls displayed at the bottom of the timeline."});this.tj(b,Hoa);b=this.R(a,
{label:"Time Range Menu",MR:"Actions that can be taken using a drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag."});this.tj(b,Ioa);a=this.R(a,{label:"Settings",description:"Timeline settings available from the settings button in the control panel."});this.tj(a,Joa)}w(Koa,wQ);function dU(){this.g={};this.j=hw.u();this.j.H("timeline.reset",this.o,!1,this);V.H("dataSourceRemoved",this.l,!1,this)}w(dU,y);wa(dU);dU.prototype.J=function(){dU.C.J.call(this);this.j.M("timeline.reset",this.o,!1,this);V.M("dataSourceRemoved",this.l,!1,this)};dU.prototype.l=function(a){var b;if(b=a.source)b=a.source.D()in this.g;b&&(a=a.source.D(),delete this.g[a])};dU.prototype.o=function(){for(var a in this.g)eU(this.g[a],this.j)};function fU(a,b,c,d,e){z.call(this,a,e);this.s=c||[];this.j=b;this.L=void 0!==d?d:c?c.length:0}w(fU,z);fU.prototype.ie=function(){return this.s};function gU(){A.call(this);this.l="";this.g={};this.A=[];this.G={};this.j=[];this.o={};this.s=0;this.B=null;this.I=this.qC}w(gU,A);wa(gU);var Loa=E.V("os.search.SearchManager");
function hU(a,b){if(b){var c=b.D();(c=a.g[c]||null)?E.error(Loa,'Search provider already registered with id "'+c.D()+'". Existing name is "'+c.getName()+'", new name is "'+b.getName()+'".'):(a.g[b.D()]=b,b.H("success",a.bK,!1,a),b.H("error",a.sE,!1,a),b.H("autocomplete.success",a.SD,!1,a),b.H("autocomplete.error",a.RD,!1,a),a.dispatchEvent("change"))}}function iU(a,b){return mc(a.g).filter(function(a){return b?a.isEnabled()&&(b&&"string"===typeof b?!0:!1):a.isEnabled()})}g=gU.prototype;
g.search=function(a,b,c,d,e,f,h){this.l=a;this.G={};this.j=[];this.s=0;if((a||e)&&0!==c)if(e=iU(this,a),0<e.length){this.dispatchEvent(new fU("start",this.l,[],0));for(var k in this.o)this.o[k]&&this.g[k]&&this.g[k].cancel();this.o={};k=0;for(var l=e.length;k<l;k++)this.o[e[k].D()]=!0,Q(R.u(),"type."+e[k].type,1);k=0;for(l=e.length;k<l;k++)e[k].search(a,b,c,d,f,h)}else 0==kc(this.g)?(a=xs(),a="No search types are available. Please ensure you have appropriate permissions or contact "+(void 0!==a?"<b>"+
a+"</b>":"an administrator")+" for support.",At(zt.u(),a,rs)):(a="No search types are enabled that support requested search. Please enable at least one type in the search menu.",At(zt.u(),a,ss));else this.clear()};g.bK=function(a){var b=a.target;delete this.o[b.D()];var c=a.ie()||[];b.Nz()&&Moa(c);this.G[b.getName()+"_"+b.T()]={results:c,total:a.L};this.j=[];this.s=0;jc(this.G,function(a){this.j=this.j.concat(a.results);this.s+=a.total},this);this.l!==a.j&&(this.l=a.j||"");Ab(this.j,this.JM);Noa(this)};
g.sE=function(a){delete this.o[a.target.D()];Noa(this)};function Noa(a){if(a.B)if(0===a.j.length)a.j.push(new a.B);else if(1<a.j.length)for(var b=0,c=a.j.length;b<c;b++)if(a.j[b]instanceof a.B){a.j.splice(b,1);break}b="success";uc(a.o)||(b="progress");a.dispatchEvent(new fU(b,a.l,a.j,a.s))}g.SD=function(a){if(a=a.ie())this.A=this.A.concat(a);this.dispatchEvent(new fU("autocomplete.success",this.l,this.A))};g.RD=function(){this.dispatchEvent(new z("autocomplete.error"))};
g.clear=function(a){this.l=a||"";this.G={};this.j=[];this.s=0;for(var b in this.g)this.g[b].cancel();this.o={};this.dispatchEvent(new fU("success",this.l,this.j,0))};g.ie=function(){return vb(this.j)};function Moa(a){if(a.length){var b=a[0].jc();if(hb(a,function(a){return b==a.jc()}))a.forEach(function(b,c){b.j=(c+1)/a.length*100});else{var c=Number.NEGATIVE_INFINITY;a.forEach(function(a){c=c<a.jc()?a.jc():c});a.forEach(function(a){var b=a.jc()/(c/100);a.j=b})}}}
g.JM=function(a,b){return-Bb(a.jc(),b.jc())};g.qC=function(){return[]};var Ooa=gU.u();function jU(){jz.call(this);this.g=null}w(jU,jz);g=jU.prototype;g.Ga=function(a){var b=this.getState();jU.C.Ga.call(this,a);a=this.getState();b!=a&&this.g&&(b="on"===a,b!==this.g.isActive()&&(b=b?new FP(this.g):new rA(this.g),gF(EF,b)||jU.C.Ga.call(this,"off")))};g.Ja=function(){return this.g};
function kU(a,b){if(b!==a.g){a.g&&a.g.M("propertychange",a.l,!1,a);var c=a.g;a.g=b;a.g.H("propertychange",a.l,!1,a);a.ga(a.g.D());a.Da(a.g.S());oz(a,a.g.qb()||"");a.j=a.g.Qd();a.Ga(a.g.isActive()?"on":"off");a.dispatchEvent(new U("descriptor",b,c))}}g.J=function(){this.g&&this.g.M("propertychange",this.l,!1,this);jU.C.J.call(this)};g.D=function(){return this.g?this.g.D():jU.C.D.call(this)};g.ba=function(){return this.g?this.g.S():jU.C.D.call(this)};g.je=function(){return this.g?this.g.je():""};
g.getTags=function(){return this.g?this.g.getTags():[]};g.Hc=function(){var a=null;this.g&&(a=this.g.td());return a?a:jU.C.Hc.call(this)};g.mb=function(){return this.g?this.g.mb():!1};jU.prototype.isLoading=jU.prototype.mb;jU.prototype.l=function(a){var b=a.l;if("active"==b)this.Ga(this.g.isActive()?"on":"off");else if("loading"==b)this.dispatchEvent(new U("loading",a.s,a.o));else if("icons"==b)this.dispatchEvent(new U(b));else if("title"==b||"explicitTitle"==b)this.Da(this.g.S()),this.dispatchEvent(new U("label"))};
jU.prototype.lc=function(a){kU(this,a.Ja());jU.C.lc.call(this,a)};function lU(){SI.call(this)}w(lU,SI);function mU(a,b,c,d){d=(null!=d?d:1)?Poa(a,b):null;d||(d=new jU,kU(d,b),a.R(d));if(null!=c?c:1)a=b.isActive(),b.setActive(!1),b=new FP(b),a?b.Fa():gF(EF,b)}function Qoa(a,b,c){var d=Poa(a,b);d&&a.removeChild(d);b.setActive(!1);c&&b.clearData()}function Poa(a,b){var c=null;if((a=a.na())&&0<a.length)for(var d=a.length;d--;){var e=a[d];if(e.Ja()==b||e.Ja().D()==b.D()){c=e;break}}return c}lU.prototype.bc=function(){this.Ga("off");this.Ee=!1;this.eb(!0)};
lU.prototype.load=function(){this.zc(null);for(var a=pE(V,this.D()+"#"),b=0,c=a.length;b<c;b++)mU(this,a[b],!1,!1);this.dispatchEvent(new QI("dataProviderLoaded",this))};function Roa(a){var b=a.localName;(a=a.getAttribute("type"))&&(b+="#"+a);return b}function Soa(a,b){return Bb(b.priority,a.priority)}function Toa(a,b){return Bb(a.S(),b.S())};function nU(a){this.description=null;this.load=!1;this.be=this.g=this.method=null;this.title=a};function oU(a,b){nU.call(this,a);this.ne=b||null}w(oU,nU);function pU(a){IR.call(this,a);this.state=this.loadItems=null}w(pU,IR);W.directive("defaultfilenodeui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/file/defaultfilenodeui.html",controller:qU,controllerAs:"nodeUi"}}]);function qU(a,b){eF.call(this,a,b);this.confirmRemove=!1}w(qU,eF);qU.$inject=["$scope","$element"];
qU.prototype.Vk=function(){cK({confirm:this.remove.bind(this),cancel:va,prompt:"Are you sure you want to remove this file from the application? <b>This action cannot be undone</b>, and will clear the application history.",yesText:"Remove",yesIcon:"fa fa-trash-o",yesButtonClass:"btn-danger",windowOptions:{label:"Remove File",icon:"fa fa-trash-o",headerClass:"bg-danger u-bg-danger-text",x:"center",y:"center",width:"325",height:"auto",modal:"true","no-scroll":"true"}})};qU.prototype.tryRemove=qU.prototype.Vk;
qU.prototype.Ja=function(){return this.scope.item.Ja()};qU.prototype.remove=function(){var a=this.Ja(),b=V;a&&a instanceof vP&&(qE(b,a),(b=b.rb(a.Oc))&&b instanceof lU&&Qoa(b,a,!0),a.dispose(),hF.u().jo())};function Uoa(a){nU.call(this,a)}w(Uoa,nU);function rU(a,b,c,d){this.id=a;this.enabled=!1;this.label=b;this.tooltip=d||"Clear "+b;this.g=c}rU.prototype.xb=function(){return new this.g};function sU(){this.j=Voa;this.g={}}wa(sU);var Voa=E.V("os.ui.clear.ClearManager");sU.prototype.getEntries=function(){return this.g};function tU(a){var b=uU;if(a.id in b.g)E.error(b.j,"Clear type already exists: "+a.label);else{var c=O.get(["ui","clear",a.id],!1);a.enabled=c;b.g[a.id]=a}}
sU.prototype.clear=function(a,b){var c=[],d=[],e;for(e in this.g){var f=this.g[e];b&&b.length&&kb(b,e)||!f.enabled&&!a||(c.push(f.xb()),d.push(f.label))}0<c.length&&(1<c.length?(a=new oF,a.Zb(c),a.title="Clear "+d.join(", ")):a=c[0],gF(hF.u(),a));for(var h in this.g)c=this.g[h],O.set(["ui","clear",c.id],c.enabled)};sU.prototype.reset=function(){for(var a in this.g){var b=this.g[a];b.enabled=O.get(["ui","clear",b.id],!1)}};var uU=sU.u();function Woa(a,b,c,d){function e(b){if(!d.$pristine||b){var c=!0;a.oldTitle!==b&&null==a.stateForm.persister&&(c=!vU.Ay(b));d.$setValidity("title",c);d.$setDirty()}return b}d.$formatters.unshift(e);d.$parsers.unshift(e);a.$watch("stateForm.persister",function(){e(d.$modelValue)})}W.directive("statetitle",[function(){return{require:"ngModel",link:Woa}}]);function wU(a,b){this.scope=a;this.element=b;this.all=!1;this.persister=null;this.persisters={};this.showOptions=!1;this.states=[];this.isSaving=!1;a.$on("$destroy",this.l.bind(this))}wU.$inject=["$scope","$element"];wU.prototype.l=function(){this.element=this.scope=null};wU.prototype.accept=function(){this.close()};wU.prototype.accept=wU.prototype.accept;wU.prototype.close=function(){KE(this.element)};wU.prototype.close=wU.prototype.close;
wU.prototype.Wh=function(){for(var a=0,b=this.states.length;a<b;a++)this.states[a].eb(this.all)};wU.prototype.toggleAll=wU.prototype.Wh;wU.prototype.qb=function(a){a=a.qb();this.isSaving||(a=a.replace("Saves","Sets"));return a};wU.prototype.getDescription=wU.prototype.qb;wU.prototype.S=function(a){return a.S()};wU.prototype.getTitle=wU.prototype.S;W.directive("stateimport",[function(){return{restrict:"E",scope:!0,templateUrl:"v1542394219/views/window/stateimportexport.html",controller:xU,controllerAs:"stateForm"}}]);
function xU(a,b){wU.call(this,a,b);this.g=a.config;this.g.replace&&(this.scope.oldTitle=this.g.title);this.j=this.g.state;a.title=this.g.title;a.description=this.g.description;a.tags=this.g.tags;this.states=vU.il(this.j);this.all=hb(this.states,function(a){return a.mc()},this);this.showClear=0<kc(uU.getEntries());this.clear=O.get("state.clear",!1);if(this.g.loadItems){this.showOptions=!0;b=0;for(var c=this.states.length;b<c;b++){var d=this.states[b];d.eb(kb(this.g.loadItems,d.toString()))}}a.$emit("window.ready")}
w(xU,wU);xU.$inject=["$scope","$element"];xU.prototype.l=function(){xU.C.l.call(this);vc(this.g);this.j=this.g=null};xU.prototype.accept=function(){this.showClear&&(O.set("state.clear",this.clear),this.clear&&uU.clear(!0,["mapPosition"]));var a=null;this.j instanceof Document?a=new oU(this.scope.title,this.j):a=new Uoa(this.scope.title,this.j);a.description=this.scope.description;a.g=this.states;a.be=this.scope.tags;a.load=!0;var b=this.g.file,c=vU,d=b.Ka();d&&Uw(d)?Xoa(c,b,a):c.xr(b,a);xU.C.accept.call(this)};
xU.prototype.accept=xU.prototype.accept;function yU(){pS.call(this)}w(yU,pS);
yU.prototype.Ib=function(a,b){yU.C.Ib.call(this,a,b);var c=new pU;b&&this.g(b,c);c.file=a;b=null;Nw(a);var d=a.Ob(),e=a.l;if(d)if("string"===typeof d)if("application/json"==e)try{b=JSON.parse(d)}catch(f){b=void 0}else b=VA(d);else if(d instanceof Document||Aa(d))b=d;c.state=b;b instanceof Document?(b&&((d=b.querySelector("state > title"))&&d.textContent&&(c.title=d.textContent),(d=b.querySelector("state > description"))&&d.textContent&&(c.description=d.textContent),b=b.querySelector("state > tags"))&&
(b=iF(b),c.tags=b?b.join(", "):""),Yoa(a,c)):Aa(b)&&(b&&(c.title=b.title,c.description=b.description,c.tags=b.tags),Yoa(a,c))};yU.prototype.g=function(a,b){yU.C.g.call(this,a,b);b.state=a.state;b.loadItems=a.loadItems};function Yoa(a,b){b.title||(b.title=a.getFileName());FE({label:"Import State",icon:"fa fa-file-text",x:"center",y:"center",width:"400",height:"auto",modal:"true","show-close":"true"},"<stateimport></stateimport>",void 0,void 0,void 0,{config:b})};W.directive("stateexport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/window/stateimportexport.html",controller:zU,controllerAs:"stateForm"}}]);
function zU(a,b,c){wU.call(this,a,b);this.appName=ws();this.persister=null;if((b=BG(AU.u()))&&0<b.length)for(var d=0,e=b.length;d<e;d++)this.persisters[b[d].ba()]=b[d];(b=a.defaultMethod||"File",b in this.persisters)&&(this.persister=this.persisters[b]);this.states=BU(vU);this.all=hb(this.states,function(a){return a.mc()},this);this.isSaving=!0;c(function(){a.$emit("window.ready")})}w(zU,wU);zU.$inject=["$scope","$element","$timeout"];
zU.prototype.accept=function(){var a=this.persister||null,b=this.scope.title,c=this.scope.description,d=this.scope.tags;if(this.states&&0<this.states.length){var e=[];for(var f=0,h=this.states.length;f<h;f++){var k=this.states[f];k.mc()&&e.push(k)}}f=vU;var l=ws("Unknown Application");var m=O.get("about.version","Unknown Version");h=TA();k=LC("state",f.o,h);k.setAttribute("source",l+" ("+m+")");k.setAttribute("version",f.g);h.appendChild(k);Z("title",k,b);c&&Z("description",k,c);if(d){var n;"string"===
typeof d?n=d?Nb(d).split(/\s*,\s*/):null:d&&(n=d);if(n){l=mB("tags",h);m=0;for(var p=n.length;m<p;m++)Z("tag",l,n[m]);n=l}else n=null;n&&k.appendChild(n)}b=new oU(b,h);b.description=c||null;b.method=a;b.be=d||null;e||(e=BU(f));if(e){b.g=e;a=new mf;c=0;for(d=e.length;c<d;c++)wf(a,e[c].save(b));tf(a,Fa(f.yq,b),f.Fw,f).callback()}else f.Fw("No state types selected");zU.C.accept.call(this)};zU.prototype.accept=zU.prototype.accept;var vU=null;function CU(){A.call(this);this.contentType="text/plain";this.s={};this.j={};this.g="";this.log=Zoa}w(CU,A);wa(CU);var Zoa=E.V("os.ui.state.StateManager");g=CU.prototype;g.yr=function(a){this.g=a};function DU(a,b){return b in a.s?new a.s[b]:null}
function EU(a,b,c){if(!b)throw Error("version cannot be empty or null!");if(!c)throw Error("clazz cannot be empty or null!");try{b in a.j||(a.j[b]={});var d=(new c).toString();d in a.j[b]&&E.ib(a.log,"Replacing state implementation in version "+b+' for tag "'+d+'".');a.j[b][d]=c}catch(e){throw Error("clazz must be a state constructor!");}}g.Bt=function(){};
function BU(a,b){var c=[];if(b)for(var d in a.j)for(e in b=a.j[d],b)c.push(new b[e]);else if(a.g in a.j){b=a.j[a.g];for(var e in b)c.push(new b[e])}c.sort(Toa);return c}g.Ay=function(){return!1};g.xr=function(){};function FU(){FE({id:"stateExport",label:"Save State",icon:"fa fa-floppy-o",x:"center",y:"center",width:"385",height:"auto",modal:"true","show-close":"true"},'<stateexport default-method="defaultMethod"></stateexport>',void 0,void 0,void 0,{defaultMethod:void 0})}
g.yq=function(a){var b=a.ne?PC(a.ne):null,c=a.ne?a.ne.querySelector("title").textContent+"_state.xml":null,d=a.method;if(d)d.save(c,b,a.contentType||this.contentType,a.title,a.description,a.be);else try{var e=new Lw;e.j=c;e.Lb(Sw(c));e.g=b;e.l=this.contentType;qy(my.u(),e);Xoa(this,e,a)||E.error(this.log,"Failed saving state: unable to save locally")}catch(f){E.error(this.log,"error saving state file to local storage: "+f.message,f)}};g.Fw=function(a){E.error(this.log,"Failed saving state: "+a)};
function Xoa(a,b,c){tf(ry(my.u(),b),Fa(a.xr,b,c),a.VK,a);return!0}g.VK=function(a){"string"===typeof a?E.error(this.log,"Unable to store state file locally: "+a):E.error(this.log,"Unable to store state file locally!")};function GU(){vP.call(this);this.Oc="state";this.log=$oa;this.Sb("Saved States");this.gd=!0;this.o=new pU;this.url=this.l=null}w(GU,vP);P(GU,"os.data.IUrlDescriptor");P(GU,"os.ui.data.IStateDescriptor");var $oa=E.V("os.ui.state.AbstractStateDescriptor");g=GU.prototype;g.eg=function(){if(this.isActive())HU(this);else for(var a=vU,b=this.D()+"-",c=BU(a,!0),d=0,e=c.length;d<e;d++)try{var f=c[d];f.remove(b)}catch(h){E.error(a.log,"Could not remove "+f.toString()+": "+h.message,h)}return!0};
function HU(a,b){try{if(b){a.Va(!1);Nw(b);var c=b.Ob(),d=(/^\s*$/.test(c)?0:/^[\],:{}\s\u2028\u2029]*$/.test(c.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))?JSON.parse(c):VA(c),e=vU.il(d),f=a.l?a.l.slice():null;if(f){b=0;for(var h=e.length;b<h;b++){var k=e[b];k.eb(kb(f,k.toString()))}}vU.Jp(d,e,a.D()+"-",a.S())}else{var l=
a.Ka();if(l)if(a.Va(!0),Uw(l))tf(py(my.u(),l),a.TK,a.SK,a);else{var m=new IQ;m.Lb(l);m.H("complete",a.UK,!1,a);m.H("cancel",a.zy,!1,a);m.H("error",a.zy,!1,a);m.Ki()}else IU(a,"No URL provided for state file!")}}catch(n){IU(a,"Unable to activate state: "+n.message,n)}}g.TK=function(a){a?HU(this,a):IU(this,"State file not found in local storage!")};g.SK=function(a){IU(this,"string"===typeof a?"Unable to load state file from storage: "+a:"State file not found in local storage!")};
g.UK=function(a){a=a.target;var b=a.j;a.dispose();b?HU(this,b):IU(this,"Unable to load state file from URL!")};g.zy=function(a){a.target.dispose();IU(this,"Unable to load state file from URL!")};function IU(a,b,c){E.error(a.log,b,c);a.Va(!1);a.setActive(!1)}g.Qd=function(){return"<defaultfilenodeui></defaultfilenodeui>"};g.Ka=function(){return this.url};g.Lb=function(a){this.url=a};g.yh=function(a){return a==this.Ka()};g.Vc=function(a){this.o.color=a;GU.C.Vc.call(this,a)};
g.fb=function(a){this.o.description=a;GU.C.fb.call(this,a)};g.vb=function(a){this.o.tags=a?a.join(", "):"";GU.C.vb.call(this,a)};g.Ta=function(a){this.o.title=a;GU.C.Ta.call(this,a)};g.clearData=function(){var a=this.Ka();a&&Uw(a)&&ny(my.u(),a)};g.sa=function(a){a=GU.C.sa.call(this,a);a.loadItems=this.l?this.l.slice():null;a.url=this.Ka();return a};g.restore=function(a){var b=a.loadItems||null;this.l=b;this.o.loadItems=b;this.url=a.url||null;GU.C.restore.call(this,a)};function JU(){GU.call(this);this.log=apa}w(JU,GU);var apa=E.V("os.state.StateDescriptor");JU.prototype.td=function(){return'<i class="fa fa-bookmark" title="State file"/>'};function KU(){this.deferred=null;this.description="";this.enabled=!0;this.priority=0;this.j=null;this.g="state";this.title=""}g=KU.prototype;g.mc=function(){return this.enabled};g.eb=function(a){this.enabled=a};g.S=function(){return this.title};g.qb=function(){return this.description};g.save=function(a){this.deferred&&!this.deferred.g&&this.deferred.cancel(!0);this.deferred=new mf;this.Yc(a,mB(this.g,a.ne,void 0,this.j));return this.deferred};g.Kd=function(a){this.deferred&&this.deferred.callback(a)};
function LU(a,b){a.deferred&&a.deferred.Eb(b)}g.toString=function(){var a=this.g,b=this.j;b&&b.type&&(a+="#"+b.type);return a};function MU(a,b){b=a+b;a=b.split("#");3<a.length&&(b=[],b[0]=a.shift(),b[2]=a.pop(),b[1]=a.join("-"),b=b.join("#"));return b};function NU(){KU.call(this);this.g="xml"}w(NU,KU);NU.prototype.O=function(a){if(a){for(a=a.parentElement||a;a.parentElement;)a=a.parentElement;return a.getAttribute("source")}return null};function OU(a){if("string"===typeof a){var b=VA(a);if(b=Ag(b))return b}return a}NU.prototype.Kd=function(a,b){b&&Ag(a.ne).appendChild(b);NU.C.Kd.call(this,a,b)};function PU(){NU.call(this);this.description="Saves the current filters";this.priority=90;this.g="filters";this.title="Filters"}w(PU,NU);
function QU(a){var b=a.querySelector("filters");a=a.querySelector("queryEntries");void 0!==b&&void 0!==a&&(a=a?a.getElementsByTagName("queryEntry"):[],db(a,function(a){var c=a.getAttribute("filterId"),e=a.getAttribute("layerId"),f=c+"_"+e,h=b?b.getElementsByTagName("filter"):[];!ib(h,function(a){return a.getAttribute("id")==c&&a.getAttribute("type")==e||a.getAttribute("id")==f&&a.getAttribute("type")==e})&&(h=ib(h,function(a){return a.getAttribute("id")==c}))&&(h=OC(h,b),h.setAttribute("id",f),h.setAttribute("type",
e),a.setAttribute("filterId",f))}))}PU.prototype.Yc=function(a,b){try{b.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:ogc","http://www.opengis.net/ogc");var c=this.sources;if(c)for(var d=0,e=c.length;d<e;d++)bpa(b,c[d].D());else bpa(b);this.Kd(a,b)}catch(f){LU(this,f.message||"Unspecified error.")}};
function bpa(a,b){if(IK(PJ,b))for(var c=HK(PJ,b),d=0,e=c.length;d<e;d++){var f=c[d];if(f&&PJ.isEnabled(f)){a:{var h=b;var k=WE,l=typeof f;l="string"==l||"number"==l?f:f.D();for(var m=0,n=k.entries.length;m<n;m++){var p=k.entries[m],r=p.filterId,u=p.layerId;if((!h||h===u)&&r===l){h=p.filterGroup;break a}}h=!0}h=h?"AND":"OR";(k=f.pb())&&(k=VA(k))&&Ag(k)&&(k=Ag(k))&&(k=OC(k,a,"ogc","http://www.opengis.net/ogc"))&&Z("filter",a,void 0,{id:f.D(),active:!0,filterType:"single",title:f.S(),description:f.qb()||
"",type:b||f.T(),match:h}).appendChild(k)}}};function RU(){this.s=new XMLSerializer;uD.call(this)}G(RU,uD);g=RU.prototype;g.T=function(){return"xml"};g.Rr=function(a,b){return Bl(a)?cpa(this,a,b):Cl(a)?this.Sr(a,b):"string"===typeof a?(a=Dl(a),cpa(this,a,b)):null};function cpa(a,b,c){a=SU(a,b,c);return 0<a.length?a[0]:null}g.Sr=function(){return null};g.cg=function(a,b){return Bl(a)?SU(this,a,b):Cl(a)?this.Bk(a,b):"string"===typeof a?(a=Dl(a),SU(this,a,b)):[]};
function SU(a,b,c){var d=[];for(b=b.firstChild;b;b=b.nextSibling)b.nodeType==Node.ELEMENT_NODE&&ik(d,a.Bk(b,c));return d}g.Ck=function(a,b){if(Bl(a))return null;if(Cl(a))return this.fz(a,b);"string"===typeof a&&Dl(a);return null};g.fz=function(){return null};g.jn=function(a){return Bl(a)?this.defaultDataProjection:Cl(a)?this.kn(a):"string"===typeof a?(Dl(a),this.defaultDataProjection):null};g.kn=function(){return this.defaultDataProjection};g.Ps=function(){return this.s.serializeToString(null)};
g.Qs=function(a,b){a=this.Un(a,b);return this.s.serializeToString(a)};g.Un=function(){return null};function TU(a){a=a?a:{};this.featureType=a.featureType;this.featureNS=a.featureNS;this.srsName=a.srsName;this.schemaLocation="";this.g={};this.g["http://www.opengis.net/gml"]={featureMember:Gl(TU.prototype.dn),featureMembers:Gl(TU.prototype.dn)};RU.call(this)}G(TU,RU);var dpa=/^[\s\xa0]*$/;g=TU.prototype;
g.dn=function(a,b){var c=a.localName,d=null;if("FeatureCollection"==c)"http://www.opengis.net/wfs"===a.namespaceURI?d=Ol([],this.g,a,b,this):d=Ol(null,this.g,a,b,this);else if("featureMembers"==c||"featureMember"==c){var e=b[0],f=e.featureType,h=e.featureNS,k;if(!f&&a.childNodes){f=[];h={};var l=0;for(k=a.childNodes.length;l<k;++l){var m=a.childNodes[l];if(1===m.nodeType){var n=m.nodeName.split(":").pop();if(-1===f.indexOf(n)){var p="",r=0;m=m.namespaceURI;for(var u in h){if(h[u]===m){p=u;break}++r}p||
(p="p"+r,h[p]=m);f.push(p+":"+n)}}}"featureMember"!=c&&(e.featureType=f,e.featureNS=h)}"string"===typeof h&&(l=h,h={},h.p0=l);e={};f=Array.isArray(f)?f:[f];for(var v in h){n={};l=0;for(k=f.length;l<k;++l)(-1===f[l].indexOf(":")?"p0":f[l].split(":")[0])===v&&(n[f[l].split(":").pop()]="featureMembers"==c?Fl(this.dz,this):Gl(this.dz,this));e[h[v]]=n}"featureMember"==c?d=Ol(void 0,e,a,b):d=Ol([],e,a,b)}null===d&&(d=[]);return d};
function epa(a,b,c){var d=c[0];d.srsName=b.firstElementChild.getAttribute("srsName");d.srsDimension=b.firstElementChild.getAttribute("srsDimension");if(a=Ol(null,a.Ts,b,c,a))return xD(a,!1,d)}
g.dz=function(a,b){var c;(c=a.getAttribute("fid"))||(c=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var d={},e;for(a=a.firstElementChild;a;a=a.nextElementSibling){var f=a.localName;if(0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)){var h=zl(a,!1);dpa.test(h)&&(h=void 0);d[f]=h}else"boundedBy"!==f&&(e=f),d[f]=epa(this,a,b)}b=new ek(d);e&&fk(b,e);c&&b.ga(c);return b};
g.kz=function(a,b){if(a=this.en(a,b))return b=new Jk(null),Kk(b,"XYZ",a),b};g.iz=function(a,b){if(a=Ol([],this.RA,a,b,this))return new Pr(a)};g.hz=function(a,b){if(a=Ol([],this.QA,a,b,this))return b=new Ar(null),Dr(b,a),b};g.jz=function(a,b){if(a=Ol([],this.SA,a,b,this))return b=new Rr(null),Ur(b,a),b};g.Yy=function(a,b){Nl(this.WA,a,b,this)};g.fv=function(a,b){Nl(this.NA,a,b,this)};g.Zy=function(a,b){Nl(this.XA,a,b,this)};g.gn=function(a,b){if(a=this.en(a,b))return b=new yr(null),zr(b,"XYZ",a),b};
g.eM=function(a,b){if(a=Ol(null,this.el,a,b,this))return a};g.gz=function(a,b){if(a=this.en(a,b))return b=new Ik(null),wk(b,"XYZ",a),b.ia(),b};g.hn=function(a,b){if((a=Ol([null],this.Wn,a,b,this))&&a[0]){b=new Rk(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)ik(c,a[f]),d.push(c.length);Sk(b,"XYZ",c,d);return b}};g.en=function(a,b){return Ol(null,this.el,a,b,this)};g.RA={"http://www.opengis.net/gml":{pointMember:Fl(TU.prototype.Yy),pointMembers:Fl(TU.prototype.Yy)}};
g.QA={"http://www.opengis.net/gml":{lineStringMember:Fl(TU.prototype.fv),lineStringMembers:Fl(TU.prototype.fv)}};g.SA={"http://www.opengis.net/gml":{polygonMember:Fl(TU.prototype.Zy),polygonMembers:Fl(TU.prototype.Zy)}};g.WA={"http://www.opengis.net/gml":{Point:Fl(TU.prototype.en)}};g.NA={"http://www.opengis.net/gml":{LineString:Fl(TU.prototype.gn)}};g.XA={"http://www.opengis.net/gml":{Polygon:Fl(TU.prototype.hn)}};g.fl={"http://www.opengis.net/gml":{LinearRing:Gl(TU.prototype.eM)}};
g.fz=function(a,b){return(a=epa(this,a,[vD(this,a,b?b:{})]))?a:null};g.Bk=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};b&&nh(c,vD(this,a,b));return this.dn(a,[c])||[]};g.kn=function(a){return Li(this.srsName?this.srsName:a.firstElementChild.getAttribute("srsName"))};function UU(a){a=zl(a,!1);return VU(a)}function VU(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function WU(a){a=zl(a,!1);a=Date.parse(a);return isNaN(a)?void 0:a/1E3}function XU(a){a=zl(a,!1);return YU(a)}function YU(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function ZU(a){a=zl(a,!1);return $U(a)}function $U(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function aV(a){return zl(a,!1).trim()}
function bV(a,b){cV(a,b?"1":"0")}function dV(a,b){a.appendChild(xl.createTextNode(b.toPrecision()))}function eV(a,b){a.appendChild(xl.createTextNode(b.toString()))}function cV(a,b){a.appendChild(xl.createTextNode(b))};function fV(a){a=a?a:{};TU.call(this,a);this.I=void 0!==a.surface?a.surface:!1;this.A=void 0!==a.curve?a.curve:!1;this.B=void 0!==a.multiCurve?a.multiCurve:!0;this.G=void 0!==a.multiSurface?a.multiSurface:!0;this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd";this.hasZ=void 0!==a.hasZ?a.hasZ:!1}G(fV,TU);g=fV.prototype;
g.hM=function(a,b){if(a=Ol([],this.PA,a,b,this))return b=new Ar(null),Dr(b,a),b};g.iM=function(a,b){if(a=Ol([],this.TA,a,b,this))return b=new Rr(null),Ur(b,a),b};g.Mt=function(a,b){Nl(this.FA,a,b,this)};g.bA=function(a,b){Nl(this.mB,a,b,this)};g.jM=function(a,b){return Ol([null],this.VA,a,b,this)};g.lM=function(a,b){return Ol([null],this.bB,a,b,this)};g.kM=function(a,b){return Ol([null],this.Wn,a,b,this)};g.gM=function(a,b){return Ol([null],this.el,a,b,this)};
g.RE=function(a,b){(a=Ol(void 0,this.fl,a,b,this))&&b[b.length-1].push(a)};g.EC=function(a,b){(a=Ol(void 0,this.fl,a,b,this))&&(b[b.length-1][0]=a)};g.lz=function(a,b){if((a=Ol([null],this.nB,a,b,this))&&a[0]){b=new Rk(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)ik(c,a[f]),d.push(c.length);Sk(b,"XYZ",c,d);return b}};g.cz=function(a,b){if(a=Ol([null],this.GA,a,b,this))return b=new yr(null),zr(b,"XYZ",a),b};
g.dM=function(a,b){a=Ol([null],this.JA,a,b,this);return Zh(a[1][0],a[1][1],a[2][0],a[2][1])};g.fM=function(a,b){var c=zl(a,!1),d=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;a=[];for(var e;e=d.exec(c);)a.push(parseFloat(e[1])),c=c.substr(e[0].length);if(""===c){b=b[0].srsName;c="enu";b&&(c=Li(b).fh);if("neu"===c)for(b=0,c=a.length;b<c;b+=3)d=a[b],a[b]=a[b+1],a[b+1]=d;b=a.length;2==b&&a.push(0);if(0!==b)return a}};
g.Tr=function(a,b){var c=zl(a,!1).replace(/^\s*|\s*$/g,"");b=b[0];var d=b.srsName,e=b.srsDimension;b="enu";d&&(b=Li(d).fh);c=c.split(/\s+/);d=2;a.getAttribute("srsDimension")?d=$U(a.getAttribute("srsDimension")):a.getAttribute("dimension")?d=$U(a.getAttribute("dimension")):a.parentNode.getAttribute("srsDimension")?d=$U(a.parentNode.getAttribute("srsDimension")):e&&(d=$U(e));for(var f,h=[],k=0,l=c.length;k<l;k+=d)a=parseFloat(c[k]),e=parseFloat(c[k+1]),f=3===d?parseFloat(c[k+2]):0,"en"===b.substr(0,
2)?h.push(a,e,f):h.push(e,a,f);return h};g.el={"http://www.opengis.net/gml":{pos:Gl(fV.prototype.fM),posList:Gl(fV.prototype.Tr)}};g.Wn={"http://www.opengis.net/gml":{interior:fV.prototype.RE,exterior:fV.prototype.EC}};
g.Ts={"http://www.opengis.net/gml":{Point:Gl(TU.prototype.kz),MultiPoint:Gl(TU.prototype.iz),LineString:Gl(TU.prototype.gn),MultiLineString:Gl(TU.prototype.hz),LinearRing:Gl(TU.prototype.gz),Polygon:Gl(TU.prototype.hn),MultiPolygon:Gl(TU.prototype.jz),Surface:Gl(fV.prototype.lz),MultiSurface:Gl(fV.prototype.iM),Curve:Gl(fV.prototype.cz),MultiCurve:Gl(fV.prototype.hM),Envelope:Gl(fV.prototype.dM)}};g.PA={"http://www.opengis.net/gml":{curveMember:Fl(fV.prototype.Mt),curveMembers:Fl(fV.prototype.Mt)}};
g.TA={"http://www.opengis.net/gml":{surfaceMember:Fl(fV.prototype.bA),surfaceMembers:Fl(fV.prototype.bA)}};g.FA={"http://www.opengis.net/gml":{LineString:Fl(TU.prototype.gn),Curve:Fl(fV.prototype.cz)}};g.mB={"http://www.opengis.net/gml":{Polygon:Fl(TU.prototype.hn),Surface:Fl(fV.prototype.lz)}};g.nB={"http://www.opengis.net/gml":{patches:Gl(fV.prototype.jM)}};g.GA={"http://www.opengis.net/gml":{segments:Gl(fV.prototype.lM)}};g.JA={"http://www.opengis.net/gml":{lowerCorner:Fl(fV.prototype.Tr),upperCorner:Fl(fV.prototype.Tr)}};
g.VA={"http://www.opengis.net/gml":{PolygonPatch:Gl(fV.prototype.kM)}};g.bB={"http://www.opengis.net/gml":{LineStringSegment:Gl(fV.prototype.gM)}};function fpa(a,b,c){var d=c[c.length-1];c=d.hasZ;a.setAttribute("srsDimension",c?3:2);d=d.srsName;b=b.getCoordinates();for(var e=b.length,f=Array(e),h,k=0;k<e;++k){h=b[k];var l=k,m=c,n="enu";d&&(n=Li(d).fh);n="en"===n.substr(0,2)?h[0]+" "+h[1]:h[1]+" "+h[0];m&&(n+=" "+(h[2]||0));f[l]=n}cV(a,f.join(" "))}
g.wv=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=yl(a.namespaceURI,"pos");a.appendChild(d);c=c[c.length-1];a=c.hasZ;d.setAttribute("srsDimension",a?3:2);var e=c.srsName;c="enu";e&&(c=Li(e).fh);b=b.getCoordinates();c="en"===c.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0];a&&(c+=" "+(b[2]||0));cV(d,c)};var gpa={"http://www.opengis.net/gml":{lowerCorner:K(cV),upperCorner:K(cV)}};g=fV.prototype;
g.OF=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);Pl({node:a},gpa,Ll,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};g.tv=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=yl(a.namespaceURI,"posList");a.appendChild(d);fpa(d,b,c)};g.NF=function(a,b){a=b[b.length-1];b=a.node;var c=a.exteriorWritten;void 0===c&&(a.exteriorWritten=!0);return yl(b.namespaceURI,void 0!==c?"interior":"exterior")};
g.om=function(a,b,c){var d=c[c.length-1],e=d.hasZ;d=d.srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=Uk(b),Pl({node:a,hasZ:e,srsName:d},hpa,this.NF,b,c,void 0,this)):"Surface"===a.nodeName&&(e=yl(a.namespaceURI,"patches"),a.appendChild(e),a=yl(e.namespaceURI,"PolygonPatch"),e.appendChild(a),this.om(a,b,c))};
g.nm=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=yl(a.namespaceURI,"posList"),a.appendChild(d),fpa(d,b,c)):"Curve"===a.nodeName&&(d=yl(a.namespaceURI,"segments"),a.appendChild(d),a=yl(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.nm(a,b,c))};
g.vv=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.surface;f&&a.setAttribute("srsName",f);b=Tr(b);Pl({node:a,hasZ:e,srsName:f,surface:d},ipa,this.o,b,c,void 0,this)};g.RF=function(a,b,c){var d=c[c.length-1],e=d.srsName;d=d.hasZ;e&&a.setAttribute("srsName",e);b=Qr(b);Pl({node:a,hasZ:d,srsName:e},jpa,Jl("pointMember"),b,c,void 0,this)};
g.uv=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.curve;f&&a.setAttribute("srsName",f);b=Cr(b);Pl({node:a,hasZ:e,srsName:f,curve:d},kpa,this.o,b,c,void 0,this)};g.xv=function(a,b,c){var d=yl(a.namespaceURI,"LinearRing");a.appendChild(d);this.tv(d,b,c)};g.yv=function(a,b,c){var d=this.j(b,c);d&&(a.appendChild(d),this.om(d,b,c))};g.SF=function(a,b,c){var d=yl(a.namespaceURI,"Point");a.appendChild(d);this.wv(d,b,c)};
g.sv=function(a,b,c){var d=this.j(b,c);d&&(a.appendChild(d),this.nm(d,b,c))};g.QF=function(a,b,c){var d=c[c.length-1],e=nh({},d);e.node=a;var f;Array.isArray(b)?d.dataProjection?f=Zi(b,d.featureProjection,d.dataProjection):f=b:f=xD(b,!0,d);Pl(e,lpa,this.j,[f],c,void 0,this)};
g.PF=function(a,b,c){var d=b.D();d&&a.setAttribute("fid",d);d=c[c.length-1];var e=d.featureNS,f=b.Ud;d.Nh||(d.Nh={},d.Nh[e]={});var h=b.Vb();b=[];var k=[];for(m in h){var l=h[m];null!==l&&(b.push(m),k.push(l),m==f||l instanceof kj?m in d.Nh[e]||(d.Nh[e][m]=K(this.QF,this)):m in d.Nh[e]||(d.Nh[e][m]=K(cV)))}var m=nh({},d);m.node=a;Pl(m,d.Nh,Jl(void 0,e),k,c,b)};
var ipa={"http://www.opengis.net/gml":{surfaceMember:K(fV.prototype.yv),polygonMember:K(fV.prototype.yv)}},jpa={"http://www.opengis.net/gml":{pointMember:K(fV.prototype.SF)}},kpa={"http://www.opengis.net/gml":{lineStringMember:K(fV.prototype.sv),curveMember:K(fV.prototype.sv)}},hpa={"http://www.opengis.net/gml":{exterior:K(fV.prototype.xv),interior:K(fV.prototype.xv)}},lpa={"http://www.opengis.net/gml":{Curve:K(fV.prototype.nm),MultiCurve:K(fV.prototype.uv),Point:K(fV.prototype.wv),MultiPoint:K(fV.prototype.RF),
LineString:K(fV.prototype.nm),MultiLineString:K(fV.prototype.uv),LinearRing:K(fV.prototype.tv),Polygon:K(fV.prototype.om),MultiPolygon:K(fV.prototype.vv),Surface:K(fV.prototype.om),MultiSurface:K(fV.prototype.vv),Envelope:K(fV.prototype.OF)}},mpa={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};fV.prototype.o=function(a,b){return yl("http://www.opengis.net/gml",mpa[b[b.length-1].node.nodeName])};
fV.prototype.j=function(a,b){var c=b[b.length-1];b=c.multiSurface;var d=c.surface,e=c.curve;c=c.multiCurve;Array.isArray(a)?a="Envelope":(a=a.T(),"MultiPolygon"===a&&!0===b?a="MultiSurface":"Polygon"===a&&!0===d?a="Surface":"LineString"===a&&!0===e?a="Curve":"MultiLineString"===a&&!0===c&&(a="MultiCurve"));return yl("http://www.opengis.net/gml",a)};
fV.prototype.Un=function(a,b){b=wD(this,b);var c=yl("http://www.opengis.net/gml","featureMembers");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var d={srsName:this.srsName,hasZ:this.hasZ,curve:this.A,surface:this.I,multiSurface:this.G,multiCurve:this.B,featureNS:this.featureNS,featureType:this.featureType};b&&nh(d,b);b=[d];var e=b[b.length-1];d=e.featureType;var f=e.featureNS,h={};h[f]={};h[f][d]=K(this.PF,this);e=nh({},e);e.node=c;Pl(e,h,
Jl(d,f),a,b);return c};function gV(a){a=a?a:{};RU.call(this);hV||(iV=[255,255,255,1],jV=new Zj({color:iV}),kV=[20,2],lV=mV="pixels",nV=[64,64],oV="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",pV=.5,qV=new pL({anchor:kV,anchorOrigin:"bottom-left",anchorXUnits:mV,anchorYUnits:lV,crossOrigin:"anonymous",rotation:0,scale:pV,size:nV,src:oV}),rV="NO_IMAGE",sV=new ak({color:iV,width:1}),tV=new ak({color:[51,51,51,1],width:2}),uV=new VK({font:"bold 16px Helvetica",fill:jV,stroke:tV,scale:.8}),npa=new bk({fill:jV,
image:qV,text:uV,stroke:sV,zIndex:0}),hV=[npa]);this.defaultDataProjection=Li("EPSG:4326");this.j=a.defaultStyle?a.defaultStyle:hV;this.o=void 0!==a.extractStyles?a.extractStyles:!0;this.B=void 0!==a.writeStyles?a.writeStyles:!0;this.g={};this.A=void 0!==a.showPointNames?a.showPointNames:!0}var hV,iV,jV,kV,mV,lV,nV,oV,pV,qV,rV,sV,tV,uV,npa;G(gV,RU);
var vV=["http://www.google.com/kml/ext/2.2"],wV=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],opa={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"};
function xV(a,b){var c=[0,0],d="start";if(a.Ua()){var e=a.Ua().Nl();null===e&&(e=nV);2==e.length&&(d=a.Ua().j(),c[0]=d*e[0]/2,c[1]=-d*e[1]/2,d="left")}null!==a.ub()?(e=a.ub(),a=e.clone(),a.B=e.Ge()||uV.Ge(),a.j=e.j||uV.j,a.Dz(e.ob()||uV.ob()),a.Iz(e.kb()||tV)):a=uV.clone();a.ah(b);a.Vf=c[0];a.o=c[1];a.g=d;return new bk({text:a})}
function ppa(a,b,c,d,e){return function(){var f=e,h="";f&&this.X()&&(f="Point"===this.X().T());f&&(h=this.get("name"),f=f&&h);if(a)return f?(f=xV(a[0],h),a.concat(f)):a;if(b){var k=qpa(b,c,d);return f?(f=xV(k[0],h),k.concat(f)):k}return f?(f=xV(c[0],h),c.concat(f)):c}}function qpa(a,b,c){return Array.isArray(a)?a:"string"===typeof a?(!(a in c)&&"#"+a in c&&(a="#"+a),qpa(c[a],b,c)):b}
function yV(a){a=zl(a,!1);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}function zV(a){a=zl(a,!1);for(var b=[],c=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,d;d=c.exec(a);)b.push(parseFloat(d[1]),parseFloat(d[2]),d[3]?parseFloat(d[3]):0),a=a.substr(d[0].length);if(""===a)return b}
function AV(a){var b=zl(a,!1).trim();a=a.baseURI;a&&"about:blank"!=a||(a=window.location.href);return a?(new URL(b,a)).href:b}function rpa(a){return XU(a)}function spa(a,b){return Ol(null,tpa,a,b)}function upa(a,b){b=b[b.length-1].flatCoordinates;a=zl(a,!1);(a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(a))?b.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),0):b.push(0,0,0,0)}
function vpa(a,b){if(a=Ol([],wpa,a,b))return b=new Ar(null),Dr(b,a),b}function BV(a,b){if(b=Ol({flatCoordinates:[],whens:[]},xpa,a,b)){a=b.flatCoordinates;b=b.whens;var c;var d=0;for(c=Math.min(a.length,b.length);d<c;++d)a[4*d+3]=b[d];b=new yr(null);zr(b,"XYZM",a);return b}}function ypa(a,b){var c=Ol({},CV,a,b);if(a=Ol(null,DV,a,b))return b=new yr(null),zr(b,"XYZ",a),b.qc(c),b}function zpa(a,b){var c=Ol({},CV,a,b);if(a=Ol(null,DV,a,b))return b=new Rk(null),Sk(b,"XYZ",a,[a.length]),b.qc(c),b}
function Apa(a,b){a=Ol([],Bpa,a,b);if(!a)return null;if(0===a.length)return new Kr(a);var c=!0,d=a[0].T(),e;var f=1;for(e=a.length;f<e;++f)if(b=a[f],b.T()!=d){c=!1;break}if(c)if("Point"==d){var h=a[0];c=h.layout;d=h.flatCoordinates;f=1;for(e=a.length;f<e;++f)b=a[f],ik(d,b.flatCoordinates);b=h=new Pr(null);wk(b,c,d);b.ia();EV(h,a)}else"LineString"==d?(h=new Ar(null),Dr(h,a),EV(h,a)):"Polygon"==d?(h=new Rr(null),Ur(h,a),EV(h,a)):"GeometryCollection"==d?h=new Kr(a):Rh(!1,37);else h=new Kr(a);return h}
function Cpa(a,b){var c=Ol({},CV,a,b);if(a=Ol(null,DV,a,b))return b=new Jk(null),Kk(b,"XYZ",a),b.qc(c),b}function Dpa(a,b){var c=Ol({},CV,a,b);if((a=Ol([null],Epa,a,b))&&a[0]){b=new Rk(null);var d=a[0],e=[d.length],f;var h=1;for(f=a.length;h<f;++h)ik(d,a[h]),e.push(d.length);Sk(b,"XYZ",d,e);b.qc(c);return b}}
function FV(a,b){b=Ol({},Fpa,a,b);if(!b)return null;a="fillStyle"in b?b.fillStyle:jV;var c=b.fill;void 0===c||c||(a=null);c="imageStyle"in b?b.imageStyle:qV;c==rV&&(c=void 0);var d="textStyle"in b?b.textStyle:uV,e="strokeStyle"in b?b.strokeStyle:sV;b=b.outline;void 0===b||b||(e=null);return[new bk({fill:a,image:c,stroke:e,text:d,zIndex:void 0})]}
function EV(a,b){var c=b.length,d=Array(b.length),e=Array(b.length),f=Array(b.length),h,k,l;var m=k=l=!1;for(h=0;h<c;++h){var n=b[h];d[h]=n.get("extrude");e[h]=n.get("tessellate");f[h]=n.get("altitudeMode");m=m||void 0!==d[h];k=k||void 0!==e[h];l=l||f[h]}m&&a.set("extrude",d);k&&a.set("tessellate",e);l&&a.set("altitudeMode",f)}function Gpa(a,b){Nl(Hpa,a,b)}function Ipa(a,b){Nl(Jpa,a,b)}
var Kpa=L(wV,{displayName:J(aV),value:J(aV)}),Hpa=L(wV,{Data:function(a,b){var c=a.getAttribute("name");Nl(Kpa,a,b);a=b[b.length-1];null!==c?a[c]=a.value:null!==a.displayName&&(a[a.displayName]=a.value);delete a.value},SchemaData:function(a,b){Nl(Lpa,a,b)}}),Jpa=L(wV,{LatLonAltBox:function(a,b){if(a=Ol({},Mpa,a,b))b=b[b.length-1],b.extent=[parseFloat(a.west),parseFloat(a.south),parseFloat(a.east),parseFloat(a.north)],b.altitudeMode=a.altitudeMode,b.minAltitude=parseFloat(a.minAltitude),b.maxAltitude=
parseFloat(a.maxAltitude)},Lod:function(a,b){if(a=Ol({},Npa,a,b))b=b[b.length-1],b.minLodPixels=parseFloat(a.minLodPixels),b.maxLodPixels=parseFloat(a.maxLodPixels),b.minFadeExtent=parseFloat(a.minFadeExtent),b.maxFadeExtent=parseFloat(a.maxFadeExtent)}}),Mpa=L(wV,{altitudeMode:J(aV),minAltitude:J(XU),maxAltitude:J(XU),north:J(XU),south:J(XU),east:J(XU),west:J(XU)}),Npa=L(wV,{minLodPixels:J(XU),maxLodPixels:J(XU),minFadeExtent:J(XU),maxFadeExtent:J(XU)}),CV=L(wV,{extrude:J(UU),tessellate:J(UU),altitudeMode:J(aV)}),
tpa=L(wV,{coordinates:Gl(zV)}),Epa=L(wV,{innerBoundaryIs:function(a,b){(a=Ol(void 0,Opa,a,b))&&b[b.length-1].push(a)},outerBoundaryIs:function(a,b){(a=Ol(void 0,Ppa,a,b))&&(b[b.length-1][0]=a)}}),xpa=L(wV,{when:function(a,b){b=b[b.length-1].whens;a=zl(a,!1);a=Date.parse(a);b.push(isNaN(a)?0:a)}},L(vV,{coord:upa})),DV=L(wV,{coordinates:Gl(zV)}),Qpa=L(wV,{href:J(AV)},L(vV,{x:J(XU),y:J(XU),w:J(XU),h:J(XU)})),GV=L(wV,{Icon:J(function(a,b){return(a=Ol({},Qpa,a,b))?a:null}),heading:J(XU),hotSpot:J(function(a){var b=
a.getAttribute("xunits"),c=a.getAttribute("yunits");var d="insetPixels"!==b?"insetPixels"!==c?"bottom-left":"top-left":"insetPixels"!==c?"bottom-right":"top-right";return{x:parseFloat(a.getAttribute("x")),xunits:opa[b],y:parseFloat(a.getAttribute("y")),yunits:opa[c],origin:d}}),scale:J(rpa)}),Opa=L(wV,{LinearRing:Gl(spa)}),HV=L(wV,{color:J(yV),scale:J(rpa)}),Rpa=L(wV,{color:J(yV),width:J(XU)}),Bpa=L(wV,{LineString:Fl(ypa),LinearRing:Fl(zpa),MultiGeometry:Fl(Apa),Point:Fl(Cpa),Polygon:Fl(Dpa)}),wpa=
L(vV,{Track:Fl(BV)}),Spa=L(wV,{ExtendedData:Gpa,Region:Ipa,Link:function(a,b){Nl(IV,a,b)},address:J(aV),description:J(aV),name:J(aV),open:J(UU),phoneNumber:J(aV),visibility:J(UU)}),IV=L(wV,{href:J(AV)}),Ppa=L(wV,{LinearRing:Gl(spa)}),Tpa=L(wV,{Style:J(FV),key:J(aV),styleUrl:J(AV)}),JV=L(wV,{ExtendedData:Gpa,Region:Ipa,MultiGeometry:J(Apa,"geometry"),LineString:J(ypa,"geometry"),LinearRing:J(zpa,"geometry"),Point:J(Cpa,"geometry"),Polygon:J(Dpa,"geometry"),Style:J(FV),StyleMap:function(a,b){if(a=Ol(void 0,
Upa,a,b))b=b[b.length-1],Array.isArray(a)?b.Style=a:"string"===typeof a?b.styleUrl=a:Rh(!1,38)},address:J(aV),description:J(aV),name:J(aV),open:J(UU),phoneNumber:J(aV),styleUrl:J(AV),visibility:J(UU)},L(vV,{MultiTrack:J(vpa,"geometry"),Track:J(BV,"geometry")})),Vpa=L(wV,{color:J(yV),fill:J(UU),outline:J(UU)}),Lpa=L(wV,{SimpleData:function(a,b){var c=a.getAttribute("name");null!==c&&(a=aV(a),b[b.length-1][c]=a)}}),Fpa=L(wV,{IconStyle:function(a,b){if(a=Ol({},GV,a,b)){b=b[b.length-1];var c="Icon"in
a?a.Icon:{},d=!("Icon"in a)||0<Object.keys(c).length,e,f=c.href;f?e=f:d&&(e=oV);f="bottom-left";var h=a.hotSpot;if(h){var k=[h.x,h.y];var l=h.xunits;var m=h.yunits;f=h.origin}else e===oV?(k=kV,l=mV,m=lV):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(e)&&(k=[.5,0],m=l="fraction");var n;h=c.x;var p=c.y;void 0!==h&&void 0!==p&&(n=[h,p]);var r;h=c.w;c=c.h;void 0!==h&&void 0!==c&&(r=[h,c]);var u;c=a.heading;void 0!==c&&(u=si(c));a=a.scale;d?(e==oV&&(r=nV,void 0===a&&(a=pV)),e=new pL({anchor:k,anchorOrigin:f,
anchorXUnits:l,anchorYUnits:m,crossOrigin:"anonymous",offset:n,offsetOrigin:"bottom-left",rotation:u,scale:a,size:r,src:e}),b.imageStyle=e):b.imageStyle=rV}},LabelStyle:function(a,b){(a=Ol({},HV,a,b))&&(b[b.length-1].textStyle=new VK({fill:new Zj({color:"color"in a?a.color:iV}),scale:a.scale}))},LineStyle:function(a,b){(a=Ol({},Rpa,a,b))&&(b[b.length-1].strokeStyle=new ak({color:"color"in a?a.color:iV,width:"width"in a?a.width:1}))},PolyStyle:function(a,b){if(a=Ol({},Vpa,a,b)){b=b[b.length-1];b.fillStyle=
new Zj({color:"color"in a?a.color:iV});var c=a.fill;void 0!==c&&(b.fill=c);a=a.outline;void 0!==a&&(b.outline=a)}}}),Upa=L(wV,{Pair:function(a,b){if(a=Ol({},Tpa,a,b)){var c=a.key;c&&"normal"==c&&((c=a.styleUrl)&&(b[b.length-1]=c),(a=a.Style)&&(b[b.length-1]=a))}}});g=gV.prototype;g.Qr=function(a,b){var c=L(wV,{Document:El(this.Qr,this),Folder:El(this.Qr,this),Placemark:Fl(this.Tp,this),Style:this.nM.bind(this),StyleMap:this.mM.bind(this)});if(a=Ol([],c,a,b,this))return a};
g.Tp=function(a,b){var c=Ol({geometry:null},JV,a,b);if(c){var d=new ek;a=a.getAttribute("id");null!==a&&d.ga(a);b=b[0];(a=c.geometry)&&xD(a,!1,b);d.sb(a);delete c.geometry;this.o&&d.yb(ppa(c.Style,c.styleUrl,this.j,this.g,this.A));delete c.Style;d.qc(c);return d}};g.nM=function(a,b){var c=a.getAttribute("id");null!==c&&(b=FV(a,b))&&(a=a.baseURI,a&&"about:blank"!=a||(a=window.location.href),c=a?(new URL("#"+c,a)).href:"#"+c,this.g[c]=b)};
g.mM=function(a,b){var c=a.getAttribute("id");null!==c&&(b=Ol(void 0,Upa,a,b))&&(a=a.baseURI,a&&"about:blank"!=a||(a=window.location.href),c=a?(new URL("#"+c,a)).href:"#"+c,this.g[c]=b)};g.Sr=function(a,b){return 0<=wV.indexOf(a.namespaceURI)?(a=this.Tp(a,[vD(this,a,b)]))?a:null:null};
g.Bk=function(a,b){if(!(0<=wV.indexOf(a.namespaceURI)))return[];var c=a.localName;if("Document"==c||"Folder"==c)return(c=this.Qr(a,[vD(this,a,b)]))?c:[];if("Placemark"==c)return(b=this.Tp(a,[vD(this,a,b)]))?[b]:[];if("kml"==c){c=[];for(a=a.firstElementChild;a;a=a.nextElementSibling){var d=this.Bk(a,b);d&&ik(c,d)}return c}return[]};
function KV(a,b){b=lj(b);b=[255*(4==b.length?b[3]:1),b[2],b[1],b[0]];var c;for(c=0;4>c;++c){var d=parseInt(b[c],10).toString(16);b[c]=1==d.length?"0"+d:d}cV(a,b.join(""))}function LV(a,b,c){a={node:a};var d=b.T();if("GeometryCollection"==d){var e=Np(b);var f=MV}else"MultiPoint"==d?(e=Qr(b),f=Wpa):"MultiLineString"==d?(e=Cr(b),f=Xpa):"MultiPolygon"==d?(e=Tr(b),f=Ypa):Rh(!1,39);Pl(a,Zpa,f,e,c)}function $pa(a,b,c){Pl({node:a},aqa,bqa,[b],c)}
function cqa(a,b,c){var d={node:a};b.D()&&a.setAttribute("id",b.D());a=b.Vb();var e={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};e[b.Ud]=1;var f=Object.keys(a||{}).sort().filter(function(a){return!e[a]});if(0<f.length){var h=Ml(a,f);Pl(d,NV,dqa,[{names:f,values:h}],c)}if(f=b.ke())if(f=f.call(b,0))f=Array.isArray(f)?f[0]:f,this.B&&(a.Style=f),(f=f.ub())&&(a.name=f.ub());f=eqa[c[c.length-1].node.namespaceURI];a=Ml(a,f);Pl(d,NV,Ll,a,c,f);a=c[0];(b=b.X())&&(b=xD(b,!0,
a));Pl(d,NV,MV,[b],c)}function OV(a,b,c){var d=b.flatCoordinates;a={node:a};a.layout=b.layout;a.stride=b.stride;b=b.Vb();b.coordinates=d;d=fqa[c[c.length-1].node.namespaceURI];b=Ml(b,d);Pl(a,gqa,Ll,b,c,d)}function hqa(a,b,c){b=Uk(b);var d=b.shift();a={node:a};Pl(a,iqa,jqa,b,c);Pl(a,iqa,kqa,[d],c)}function lqa(a,b){dV(a,Math.round(1E6*b)/1E6)}
var mqa=L(wV,["Document","Placemark"]),pqa=L(wV,{Document:K(function(a,b,c){Pl({node:a},nqa,oqa,b,c,void 0,this)}),Placemark:K(cqa)}),nqa=L(wV,{Placemark:K(cqa)}),PV=L(wV,{Data:K(function(a,b,c){a.setAttribute("name",b.name);a={node:a};b=b.value;"object"==typeof b?(null!==b&&b.displayName&&Pl(a,PV,Ll,[b.displayName],c,["displayName"]),null!==b&&b.value&&Pl(a,PV,Ll,[b.value],c,["value"])):Pl(a,PV,Ll,[b],c,["value"])}),value:K(function(a,b){cV(a,b)}),displayName:K(function(a,b){a.appendChild(xl.createCDATASection(b))})}),
QV={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},qqa=L(wV,["href"],L(vV,["x","y","w","h"])),rqa=L(wV,{href:K(cV)},L(vV,{x:K(dV),y:K(dV),w:K(dV),h:K(dV)})),sqa=L(wV,["scale","heading","Icon","hotSpot"]),uqa=L(wV,{Icon:K(function(a,b,c){a={node:a};var d=qqa[c[c.length-1].node.namespaceURI],e=Ml(b,d);Pl(a,rqa,Ll,e,c,d);d=qqa[vV[0]];e=Ml(b,d);Pl(a,
rqa,tqa,e,c,d)}),heading:K(dV),hotSpot:K(function(a,b){a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("xunits",b.xunits);a.setAttribute("yunits",b.yunits)}),scale:K(lqa)}),vqa=L(wV,["color","scale"]),wqa=L(wV,{color:K(KV),scale:K(lqa)}),xqa=L(wV,["color","width"]),yqa=L(wV,{color:K(KV),width:K(dV)}),aqa=L(wV,{LinearRing:K(OV)}),Zpa=L(wV,{LineString:K(OV),Point:K(OV),Polygon:K(hqa),GeometryCollection:K(LV)}),eqa=L(wV,"name open visibility address phoneNumber description styleUrl Style".split(" ")),
NV=L(wV,{ExtendedData:K(function(a,b,c){a={node:a};var d=b.names;b=b.values;for(var e=d.length,f=0;f<e;f++)Pl(a,PV,zqa,[{name:d[f],value:b[f]}],c)}),MultiGeometry:K(LV),LineString:K(OV),LinearRing:K(OV),Point:K(OV),Polygon:K(hqa),Style:K(function(a,b,c){a={node:a};var d={},e=b.ob(),f=b.kb(),h=b.Ua();b=b.ub();h instanceof pL&&(d.IconStyle=h);b&&(d.LabelStyle=b);f&&(d.LineStyle=f);e&&(d.PolyStyle=e);b=Aqa[c[c.length-1].node.namespaceURI];d=Ml(d,b);Pl(a,Bqa,Ll,d,c,b)}),address:K(cV),description:K(cV),
name:K(cV),open:K(bV),phoneNumber:K(cV),styleUrl:K(cV),visibility:K(bV)}),fqa=L(wV,["extrude","tessellate","altitudeMode","coordinates"]),gqa=L(wV,{extrude:K(bV),tessellate:K(bV),altitudeMode:K(cV),coordinates:K(function(a,b,c){c=c[c.length-1];var d=c.layout;c=c.stride;var e;"XY"==d||"XYM"==d?e=2:"XYZ"==d||"XYZM"==d?e=3:Rh(!1,34);var f,h=b.length,k="";if(0<h){k+=b[0];for(d=1;d<e;++d)k+=","+b[d];for(f=c;f<h;f+=c)for(k+=" "+b[f],d=1;d<e;++d)k+=","+b[f+d]}cV(a,k)})}),iqa=L(wV,{outerBoundaryIs:K($pa),
innerBoundaryIs:K($pa)}),Cqa=L(wV,{color:K(KV)}),Aqa=L(wV,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Bqa=L(wV,{IconStyle:K(function(a,b,c){a={node:a};var d={},e=b.tf(),f=b.Nl(),h={href:b.g.l};if(e){h.w=e[0];h.h=e[1];var k=b.ri(),l=b.hk();l&&f&&0!==l[0]&&l[1]!==e[1]&&(h.x=l[0],h.y=f[1]-(l[1]+e[1]));!k||k[0]===e[0]/2&&k[1]===e[1]/2||(d.hotSpot={x:k[0],xunits:"pixels",y:e[1]-k[1],yunits:"pixels"})}d.Icon=h;e=b.j();1!==e&&(d.scale=e);b=b.o;0!==b&&(d.heading=b);b=sqa[c[c.length-1].node.namespaceURI];
d=Ml(d,b);Pl(a,uqa,Ll,d,c,b)}),LabelStyle:K(function(a,b,c){a={node:a};var d={},e=b.ob();e&&(d.color=e.La());(b=b.j)&&1!==b&&(d.scale=b);b=vqa[c[c.length-1].node.namespaceURI];d=Ml(d,b);Pl(a,wqa,Ll,d,c,b)}),LineStyle:K(function(a,b,c){a={node:a};var d={color:b.La(),width:b.g};b=xqa[c[c.length-1].node.namespaceURI];d=Ml(d,b);Pl(a,yqa,Ll,d,c,b)}),PolyStyle:K(function(a,b,c){Pl({node:a},Cqa,Dqa,[b.La()],c)})});function tqa(a,b,c){return yl(vV[0],"gx:"+c)}
function oqa(a,b){return yl(b[b.length-1].node.namespaceURI,"Placemark")}function MV(a,b){if(a)return yl(b[b.length-1].node.namespaceURI,QV[a.T()])}var Dqa=Jl("color"),zqa=Jl("Data"),dqa=Jl("ExtendedData"),jqa=Jl("innerBoundaryIs"),Wpa=Jl("Point"),Xpa=Jl("LineString"),bqa=Jl("LinearRing"),Ypa=Jl("Polygon"),kqa=Jl("outerBoundaryIs");
gV.prototype.Un=function(a,b){b=wD(this,b);var c=yl(wV[4],"kml");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",vV[0]);c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var d={node:c},e={};1<a.length?e.Document=a:1==a.length&&(e.Placemark=a[0]);a=mqa[c.namespaceURI];
e=Ml(e,a);Pl(d,pqa,Ll,e,[b],a,this);return c};function RV(a){return a&&(a=Ol({geometry:null},JV,a,[]))&&a.geometry instanceof kj?a.geometry:null}function Eqa(a,b){var c=b||",",d=a.length;b=[];for(var e=0;e<d;e++)b.push(a[e][0]+c+a[e][1]);2<a.length&&(c=a[0],a=a[d-1],1E-12<Math.abs(c[0]-a[0])||1E-12<Math.abs(c[1]-a[1])?b.push(b[0]):b[b.length-1]=b[0]);return b.join(" ")}
function Fqa(a,b,c,d){var e="<BBOX";c&&(e+=' areanamehint="'+c+'"');d&&(e+=' description="'+d+'"');return e+"><PropertyName>"+b+'</PropertyName><gml:Envelope srsName="CRS:84"><gml:lowerCorner>'+a[0]+" "+a[1]+"</gml:lowerCorner><gml:upperCorner>"+a[2]+" "+a[3]+"</gml:upperCorner></gml:Envelope></BBOX>"}
function SV(a,b,c,d){GB(a);var e=[];if(a=TV(a,"GML"))e.push("<Intersects"),c&&e.push(' areanamehint="'+c+'"'),d&&e.push(' description="'+d+'"'),e.push(">","<PropertyName>",b||"none","</PropertyName>",a,"</Intersects>");return 0<e.length?e.join(""):null}
function TV(a,b){if(!a)return null;switch(a.T()){case "LineString":a=[a.getCoordinates()];break;case "Polygon":a=a.getCoordinates();if(1==a.length&&Su(a[0])){a=a[0];for(var c=[a.length+4],d=0;d<a.length;d++)a[d][1]=Ir(a[d][1]);for(d=1;d<a.length;d++){var e=a[d][0]-a[d-1][0];if(180<Math.abs(e)){for(var f=a,h=c,k=0,l=d,m=0;m<0+l;m+=1)h[k++]=f[m];f=a;h=d;k=c;l=d+4;m=a.length-d;for(var n=h;n<h+m;n+=1)k[l++]=f[n];f=90*Math.sign(c[d-1][1]);180>e?(c[d]=[180,c[d-1][1]],c[d+1]=[180,f],c[d+2]=[-180,f],c[d+
3]=[-180,c[d+4][1]]):(c[d]=[-180,c[d-1][1]],c[d+1]=[-180,f],c[d+2]=[180,f],c[d+3]=[180,c[d+4][1]])}}a=[c]}break;case "MultiLineString":return Gqa(a,b);case "MultiPolygon":return Gqa(a,b);default:return null}c=[];if(a&&0<a.length){b=b||"GML";d="GML"==b?" ":",";c.push("GML"==b?'<gml:Polygon xmlns:gml="http://www.opengis.net/gml"><gml:exterior><gml:LinearRing><gml:posList srsDimension="2" srsName="CRS:84">':'<kml:Polygon xmlns:kml="http://www.opengis.net/kml/2.2"><kml:outerBoundaryIs><kml:LinearRing><kml:coordinates>');
c.push(Eqa(a[0],d));c.push("GML"==b?"</gml:posList></gml:LinearRing></gml:exterior>":"</kml:coordinates></kml:LinearRing></kml:outerBoundaryIs>");e=1;for(f=a.length;e<f;e++)c.push("GML"==b?'<gml:interior><gml:LinearRing><gml:posList srsDimension="2" srsName="CRS:84">':"<kml:innerBoundaryIs><kml:LinearRing><kml:coordinates>"),c.push(Eqa(a[e],d)),c.push("GML"==b?"</gml:posList></gml:LinearRing></gml:interior>":"</kml:coordinates></kml:LinearRing></kml:innerBoundaryIs>");c.push("GML"==b?"</gml:Polygon>":
"</kml:Polygon>")}return 0<c.length?c.join(""):null}
function Gqa(a,b){if(!a)return null;switch(a.T()){case "MultiLineString":a=Cr(a);break;case "MultiPolygon":a=Tr(a);break;default:return null}b=b||"GML";var c=[];if(a&&0<a.length){if("GML"===b){var d="gml:MultiPolygon";var e="gml:polygonMember";var f='xmlns:gml="http://www.opengis.net/gml"'}else d="kml:MultiGeometry",f='xmlns:kml="http://www.opengis.net/kml/2.2"';for(var h=[],k=0;k<a.length;k++){var l=TV(a[k],b);l&&(e&&h.push("<"+e+">"),h.push(l),e&&h.push("</"+e+">"))}0<h.length&&c.push("<",d," ",
f,">",h.join(""),"</",d,">")}return 0<c.length?c.join(""):null};function UV(){NU.call(this);this.description="Saves the current exclusion areas";this.priority=80;this.g="exclusionAreas";this.title="Exclusion Areas"}w(UV,NU);var Hqa=E.V("os.state.v2.ExclusionArea"),VV={};
UV.prototype.load=function(a,b,c){a=OU(a);if(a instanceof Element)try{var d=a.querySelectorAll("exclusionArea"),e=!1;d.length||(d=a.querySelectorAll("Polygon"),e=!0);if(0<d.length){VV[b]=[];var f=a.parentNode,h=f?f.querySelector("queryEntries"):null;a=[];f=[];for(var k=0,l=d.length;k<l;k++){if(e){var m=mB("exclusionArea");m.appendChild(d[k])}else m=d[k];var n=RV(m);if(n){iu(n);var p=new ek(n),r=d[k].getAttribute("id")||$b(),u=d[k].getAttribute("title");r&&(p.ga(MU(b,r)),p.set("temp",!0),p.set("title",
u?u:"Area "+(k+1)),p.set("tags",c),p.set("_sourceName",c));VV[b].push(p);a.push(p);if(!h||!h.querySelector('queryEntry[areaId="'+r+'"]')){var v=d[k].querySelectorAll("layer");r=p.D();if(v&&v.length)for(var x=0,B=v.length;x<B;x++){var F={layerId:MU(b,v[x].textContent),areaId:r,filterId:"*",includeArea:!1,filterGroup:!0,temp:!0};f.push(F)}else F={layerId:"*",areaId:r,filterId:"*",includeArea:!1,filterGroup:!0,temp:!0},f.push(F)}}}SE(UE,a,!0);dF(WE,f)}}catch(D){E.error(Hqa,"There was an error loading a query area from state file "+
b,D)}else E.error(Hqa,"Unable to load state content!")};UV.prototype.remove=function(a){if(a in VV){for(var b=VV[a],c=0,d=b.length;c<d;c++){var e=b[c];e.get("temp")&&(vF(WE,null,e.D()),UE.remove(e))}delete VV[a]}};
UV.prototype.Yc=function(a,b){try{for(var c=UE,d=WO(),e={},f=0,h=d.length;f<h;f++){var k=d[f],l=k.areaId;if(l&&"*"!==l&&!k.includeArea){var m=k.layerId;l in e||(e[l]={});"*"!==m&&(e[l][m]=!0)}}for(l in e){var n=c.get(l);if(n){var p=n.X();if(p){p=p.clone().toLonLat();var r=TV(p,"KML");if(r){var u=VA(r),v=Z("exclusionArea",b,void 0,{id:n.D(),title:n.get("title")});v.appendChild(Ag(u));var x=e[l];if(x)for(m in x)Z("layer",v,m)}}}}this.Kd(a,b)}catch(B){LU(this,B.message||"Unspecified error.")}};function WV(){PU.call(this)}w(WV,PU);var Iqa=E.V("os.state.v2.Filter"),XV={};
WV.prototype.load=function(a,b){a=OU(a);if(a instanceof Element)try{var c=zg(a),d=WE,e=a.parentNode,f=e?e.querySelector("queryEntries"):null;if(c&&0<c.length){a=0;for(var h=c.length;a<h;a++){var k=c[a];e=k;var l=b,m=String(e.getAttribute("urlKey")||e.getAttribute("type"));var n=MU(l,m);e=k;l=null;var p=zg(e);if(p&&0<p.length){l=new eJ;var r=WA(p[0]);r=r.replace(/xmlns=("|')[^"']*("|')/g,"");r=r.replace(/ogc:/g,"");r=r.replace(/>\s+</g,"><");l.Zf(r);var u="AND"===e.getAttribute("match");l.xh=u;l.ga(e.getAttribute("id"));
l.fb(e.getAttribute("description"));l.Ta(e.getAttribute("title"));l.type=e.getAttribute("type")||""}var v=l;var x="AND"==String(k.getAttribute("match"));v&&(v.ga(MU(b,v.D())),v.type=n,v.l=!0,v.eb(!0),AK(LK.u(),v),LK.u().Xg(n,x),f||uF(d,n,"*",v.D(),!0,x,!0),b in XV||(XV[b]=[]),XV[b].push(v))}}}catch(B){E.error(Iqa,"There was an error loading a filter for state file "+b)}else E.error(Iqa,"Unable to load state content!")};
WV.prototype.remove=function(a){var b=WE;if(a in XV){for(var c=XV[a],d=0,e=c.length;d<e;d++)vF(b,null,null,c[d].D()),EK(LK.u(),c[d]);delete XV[a]}};WV.prototype.Yc=function(a,b){this.sources=GL(NB);WV.C.Yc.call(this,a,b)};function YV(a){var b=O.get(["deprecatedLayers"],{});return!!a&&a in b}function ZV(a){a&&($V||($V=[]),-1===$V.indexOf(a)&&($V.push(a),Jqa.start()))}
var $V=null,Jqa=new le(function(){var a=$V;if(a&&0<a.length){for(var b=O.get(["deprecatedLayers"],{}),c="<ul>",d=0,e=a.length;d<e;d++){var f=a[d];c+="<li>"+(b[f]?b[f].message:'The layer "'+f+'" is legacy and may soon cease to function or be removed.')+"</li>"}cK({prompt:"<b>Heads up!</b><p>The following legacy layers were just loaded into the application: </p>"+(c+"</ul>"),yesText:"Got It",noIcon:"",noText:"",windowOptions:{label:"Legacy Layers",headerClass:"bg-warning u-bg-warning-text",icon:"fa fa-exclamation-circle",
x:"center",y:"center",width:"500",height:"auto",modal:"true","no-scroll":"true"}});$V=null}},500);function aW(a){return window&&window.location?(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),a=new Ve(a),(a.j?a:gf(window.location.origin,a)).toString()):a};function bW(){NU.call(this);this.description="Saves the current layers";this.j={type:"data"};this.g="layers";this.title="Layers"}w(bW,NU);var Kqa=E.V("os.state.v2.LayerState");bW.prototype.isValid=function(a){try{var b=a.Sa();if(!b||!b.type||b.loadOnce)return!1;var c=b.type.toLowerCase();return"basemap"===c||"static"===c||"ref"===c?!1:!(Uw(b.url)||Uw(b.url2)||null!=b.originalUrl||null!=b.originalUrl2)}catch(d){}return!1};
bW.prototype.load=function(a,b){a=OU(a);if(a instanceof Element)try{var c=a.querySelectorAll("layer");if(c){a=[];for(var d=0,e=c.length;d<e;d++){var f=Lqa(this,c[d]);f&&a.push(f)}a.reverse();c=0;for(var h=a.length;c<h;c++){var k=a[c];k.id=MU(b,k.id);k.exportEnabled=!0;var l=V.Ja(b.substring(0,b.length-1));l&&(k.provider=l.S());var m=k.layer;if(!m){var n=k.params;if(n){var p=n.get("typename");q(p)?m=p[0]:m=p;if("string"===typeof m){var r=m.indexOf(":");-1<r&&(m=m.substring(r+1))}}}var u=k.style,v=
k.styles;if(null!=u&&null!=v){f=!1;for(var x=0,B=v.length;x<B;x++){if(v[x].data===u){f=!0;break}if(v[x].label===u){f=!0;k.style=v[x].data;break}}f||(k.style="")}m&&YV(m)&&ZV(k.title)}d=0;for(e=a.length;d<e;d++){var F=new tP(a[d]);F.Fa();F.dispose()}}}catch(D){E.error(Kqa,"Error loading layer in state "+b,D)}else E.error(Kqa,"Unable to load state content!")};bW.prototype.remove=function(a){for(var b=pw(T.u()),c=b.length;c--;){var d=b[c];if(d)try{var e=d.D();e&&Ib(e,a)&&T.u().pc(d)}catch(f){}}};
bW.prototype.Yc=function(a,b){try{for(var c=pw(T.u()),d=0,e=c.length;d<e;d++){var f=c[d];if(this.isValid(f)){var h=Mqa(this,f,a,{title:f.S()});h&&b.appendChild(h)}}this.Kd(a,b)}catch(k){LU(this,k.message||"Unspecified error.")}};
function Mqa(a,b,c,d){var e=["locked","featureType","type"];if(!b.Sa())return null;var f=zc(b.Sa());null!=d&&Cc(f,d);b.sa(f);b=f.url;"string"!==typeof b||Uw(b)||(b=f.url=decodeURIComponent(aW(b)));(d=f.urls)&&0<d.length&&!b&&(f.url=d[0]);d="string"===typeof f.type?f.type.toLowerCase():"";for(var h=0,k=e.length;h<k;h++)null!=f[e[h]]&&delete f[e[h]];e=mB("layer",c.ne);c="wms"!=d?mB("basicFeatureStyle",c.ne):null;for(var l in f)if(h=f[l],null!=h)switch(l){case "params":var m=Z("params",e),n="string"===
typeof h?new af(h):h,p=n.Ub();h=0;for(k=p.length;h<k;h++){var r=p[h],u=String(n.get(r));"wms"==d?r=r.toUpperCase():"wfs"==d&&(r=r.toLowerCase());Z(r,m,u)}break;case "provider":Z("dataProvider",e,h);break;case "baseType":Z("provider",e,h);cW(a,l,h,e);break;case "color":c?(h=xv(h).slice(1),Z("pointColor",c,h)):cW(a,l,h,e);break;case "contrast":"number"!==typeof h||isNaN(h)||Z("contrast",e,Math.round(100*(h-1)));break;case "alpha":case "opacity":c?(h=null!=h?Number(h):1,Z("pointOpacity",c,Math.round(255*
h))):(h=null!=h?Number(h):1,Z("alpha",e,h));break;case "size":c&&(h=null!=h?Math.floor(h):3,Z("pointSize",c,2*h));break;case "styles":m=Z("styles",e);n=h;p=f.legends;h=0;for(k=n.length;h<k;h++)n[h].data&&(r=Z("style",m),Z("name",r,n[h].data),Z("title",r,n[h].label),p&&p.length==n.length&&Z("legend",r,p[h]||""));break;case "labels":if(c&&0<h.length&&!Lb(Yb(h[0].column))){Z("labelColumn",c,h[0].column);var v=Z("labelColumns",c);db(h,function(a){Z("label",v,void 0,{column:a.column,showColumn:a.showColumn})})}break;
case "labelColor":c&&"string"===typeof h&&!Lb(Yb(h))&&(h=xv(h).replace(/^#/,""),Z("labelColor",c,h));break;case "labelSize":c&&"number"===typeof h&&Z("labelSize",c,h);break;case "showLabels":Z("showLabels",e,h);break;case "mappings":if((k=f.mappings)&&0<k.length){h=Z("mappings",e);k=kB(hB.u(),k);for(var x in k)m=JSON.stringify(k[x]),Z("mapping."+x,h,m)}break;case "refreshInterval":Z("refreshRate",e,h);break;default:cW(a,l,h,e)}c&&0<c.childElementCount&&e.appendChild(c);"wms"==d&&b&&Z("getMapUrl",
e,b);XA(e,{type:d});return e}
function cW(a,b,c,d){if("string"===typeof c||"number"===typeof c||"boolean"===typeof c){if("string"===typeof c&&-1<b.search(/color/i)&&"colorize"!=b&&wv(c))try{c=xv(c).replace(/^#/,"0x")}catch(h){c="0xffffff"}else"string"===typeof c&&Ib(c,"url")&&(c=aW(c));Z(b,d,c)}else if(q(c)){var e=Jb(b,"s")?b.substring(0,b.length-1):b;b=Z(b,d);d=0;for(var f=c.length;d<f;d++)cW(a,e,c[d],b)}else if(DU(vU,b))try{f=c.sa(),Z(b,d,JSON.stringify(f))}catch(h){}else if(Aa(c)&&!Ba(c))for(e in b=Z(b,d),c)cW(a,e,c[e],b)}
function dW(a,b,c){var d=null,e=DU(vU,b),f=c.textContent,h=zg(c);if(e)a=JSON.parse(f),e.restore(a),d=e;else if(-1<b.search(/color/i)&&"colorize"!=b&&0==h.length&&wv(f))d=vv(f,"0x");else if(h&&0<h.length)if(c.localName==h[0].localName+"s"||1<h.length&&h[1].localName==h[0].localName)for(d=[],e=0,b=h.length;e<b;e++)d.push(dW(a,h[e].localName,h[e]));else for(d={},e=0,b=h.length;e<b;e++)c=h[e],d[c.localName]=dW(a,c.localName,c);else Ez.test(f)?d=parseFloat(f):Dz.test(f)?d=parseInt(f,16):Cz.test(f)?d="true"==
f.toLowerCase():d=f;return d}
function Lqa(a,b){if(b){var c=zg(b);if(c){for(var d=String(b.getAttribute("type")),e=Gv(Ev.u(),d),f=0,h=c.length;f<h;f++){var k=c[f],l=k.localName;if(Ub(l,"FileSource"))return null;switch(l){case "basicFeatureStyle":var m=zg(k);k=0;for(l=m.length;k<l;k++){var n=m[k].textContent;switch(m[k].localName){case "pointColor":try{n=vv(n,"#"),e.color=ZG(n)}catch(v){e.color="rgba(255,255,255,1)"}break;case "pointOpacity":e.opacity=Mb(n)?Number(n)/255:1;break;case "pointSize":e.size=Mb(n)?Number(n)/2:3;break;
case "labelColumn":n="string"===typeof n?Nb(n):"";void 0==e.labels&&(e.labels=[tH()],e.labels[0].column=n,e.labels[0].showColumn=!1);var p=a.O(b);p&&-1<p.indexOf("MIST3D")&&(e.showLabels=!Lb(Yb(n)));break;case "labelColumns":var r=[];n=zg(m[k]);db(n,function(a){r.push({column:a.getAttribute("column"),showColumn:"true"==a.getAttribute("showColumn")?!0:!1})});e.labels=r;break;case "labelColor":try{n=vv(n,"#"),e.labelColor=ZG(n)}catch(v){e.labelColor=""}break;case "labelSize":n=Mb(n)?Number(n):0,e.labelSize=
0<n?Je(n,8,24):14}}break;case "contrast":k=Number(k.textContent);l=k/100+1;e.contrast=isNaN(k)?1:Je(l,0,2);break;case "dataProvider":e.provider=k.textContent;break;case "getMapUrl":e.url=k.textContent.replace(/[?]+$/,"");break;case "params":m=e.params||new af;n=zg(k);k=0;for(l=n.length;k<l;k++)m.set(n[k].localName,n[k].textContent);e.params=m;break;case "styles":m=[{data:"",label:"Default"}];if(n=zg(k)){k=0;for(l=n.length;k<l;k++){p=n[k].querySelector("name");var u=n[k].querySelector("title");m.push({data:p&&
p.textContent||"",label:u&&u.textContent||""})}e.styles=m}break;case "tags":e.tags=iF(k);break;case "title":e.title=k.textContent.replace(/\s*(Tiles|Features)\s*$/,"");break;case "showLabels":e.showLabels="true"==k.textContent;break;case "mappings":m={};n=zg(k);k=0;for(l=n.length;k<l;k++)p=n[k],m[p.localName]=JSON.parse(p.textContent);e.mappings=lB(hB.u(),m);break;case "refreshRate":e.refreshInterval=dW(a,l,k);break;default:e[l]=dW(a,l,k)}}e.type=d.toUpperCase();"typeOverride"in e&&(a=e.typeOverride,
Hv(Ev.u(),a)&&(e.type=a,delete e.typeOverride));return e}}return null};function eW(){NU.call(this);this.description="Saves the current query areas";this.priority=80;this.g="queryAreas";this.title="Query Areas"}w(eW,NU);var Nqa=E.V("os.state.v2.QueryArea"),fW={};
eW.prototype.load=function(a,b,c){a=OU(a);if(a instanceof Element)try{var d=a.querySelectorAll("queryArea");if(d){fW[b]=[];var e=[],f=[],h=a.parentNode,k=h?h.querySelector("queryEntries"):null;a=0;for(var l=d.length;a<l;a++){var m=RV(d[a]);if(m){iu(m);var n=new ek(m),p=d[a].getAttribute("id")||$b(),r=d[a].getAttribute("title");p&&(n.ga(MU(b,p)),n.set("temp",!0),n.set("title",r?r:"Area "+(a+1)),n.set("tags",c),n.set("_sourceName",c));fW[b].push(n);e.push(n);if(!k||!k.querySelector('queryEntry[areaId="'+
p+'"]')){var u=d[a].querySelectorAll("layer");p=n.D();if(u&&u.length){h=0;for(var v=u.length;h<v;h++){var x={layerId:MU(b,u[h].textContent),areaId:p,filterId:"*",includeArea:!0,filterGroup:!0,temp:!0};f.push(x)}}else x={layerId:"*",areaId:p,filterId:"*",includeArea:!0,filterGroup:!0,temp:!0},f.push(x)}}}SE(UE,e,!0);dF(WE,f)}}catch(B){E.error(Nqa,"There was an error loading a query area from state file "+b,B)}else E.error(Nqa,"Unable to load state content!")};
eW.prototype.remove=function(a){var b=WE,c=UE;if(a in fW){for(var d=fW[a],e=[],f=0,h=d.length;f<h;f++){for(var k=d[f],l=b.getEntries(null,k.D()),m=0,n=l.length;m<n;m++)l[m].temp&&e.push(l[m]);k.get("temp")&&c.remove(k)}e.length&&XE(b,e);delete fW[a]}};
eW.prototype.Yc=function(a,b){try{for(var c=UE,d=WO(),e={},f=0,h=d.length;f<h;f++){var k=d[f],l=k.areaId;if(l&&"*"!==l&&k.includeArea){var m=k.layerId;l in e||(e[l]={});"*"!==m&&(e[l][m]=!0)}}for(l in e){var n=c.get(l);if(n){var p=n.X();if(p){p=p.clone().toLonLat();var r=TV(p,"KML");if(r){var u=VA(r),v=Z("queryArea",b,void 0,{id:n.D(),title:n.get("title")});v.appendChild(Ag(u));var x=e[l];if(x)for(m in x)Z("layer",v,m)}}}}this.Kd(a,b)}catch(B){LU(this,B.message||"Unspecified error.")}};function gW(){NU.call(this);this.description="Saves the query combinations";this.priority=90;this.g="queryEntries";this.title="Query Entries"}w(gW,NU);var Oqa=E.V("os.state.v2.QueryEntries"),hW={};
gW.prototype.load=function(a,b){a=OU(a);if(a instanceof Element)try{var c=zg(a);a=WE;if(c){for(var d=[],e=0,f=c.length;e<f;e++){var h=c[e],k=h.getAttribute("layerId"),l=h.getAttribute("areaId"),m=h.getAttribute("filterId")||"*",n=h.getAttribute("negate");if(!n||"true"!==n){var p=h.getAttribute("includeArea");p=p?"true"===p.toLowerCase():!0;var r=/(and|true)/i,u=h.getAttribute("filterGroup");u=u?r.test(u):!0;k&&l&&m&&void 0!==p&&void 0!==u&&d.push({layerId:"*"!==k?MU(b,k):k,areaId:"*"!==l?MU(b,l):
l,filterId:"*"!==m?MU(b,m):m,includeArea:p,filterGroup:u,temp:!0})}}d.length&&(dF(a,d),hW[b]=d)}}catch(v){E.error(Oqa,"There was an error loading a query entry in "+b,v)}else E.error(Oqa,"Unable to load state content!")};gW.prototype.remove=function(a){var b=hW[a];b&&(XE(WE,b),delete hW[a])};
gW.prototype.Yc=function(a,b){try{var c=WO(!0);if(c)for(var d=0,e=c.length;d<e;d++){var f=zc(c[d]);if("*"!=f.layerId){if(f.hasOwnProperty("negate")){if("true"===f.negate||!0===f.negate)continue;delete f.negate}"*"==f.filterId&&delete f.filterId;Z("queryEntry",b,void 0,f)}}this.Kd(a,b)}catch(h){LU(this,h.message||"Unspecified error.")}};function Pqa(a){var b=0;if(a)for(var c=a.length,d,e=1,f=1,h=!1;e<c&&f<c;)if(d=a.charAt(f).toUpperCase(),Mb(d))f++;else{if("T"==d)h=!0;else if(e=parseInt(a.substring(e,f),10),!isNaN(e))switch(d){case "Y":b+=31536E6*e;break;case "M":b+=h?6E4*e:2592E6*e;break;case "D":b+=864E5*e;break;case "H":b+=36E5*e;break;case "S":b+=1E3*e}f++;e=f}return b}
function Qqa(a){var b="P",c=Math.floor(a/864E5);0<c&&(b+=c+"D",a-=864E5*c);for(var d=!1,e=[{c:"H",x:36E5},{c:"M",x:6E4},{c:"S",x:1E3}],f=0,h=e.length;f<h;f++)c=Math.floor(a/e[f].x),0<c&&(d||(b+="T",d=!0),b+=c+e[f].c,a-=c*e[f].x);return b};function Rqa(a,b){b=void 0!==b?b:!1;var c=0;if(a&&0<a.length){for(var d={},e=0,f=a.length;e<f;e++){var h=a[e].g,k;for(k in h){var l="number"===typeof h[k]?h[k]:h[k].length;k in d?b?d[k]+=l:h[k]>d[k]&&(d[k]=l):d[k]=l}}for(k in d)l=q(d[k])?d[k].length:d[k],l>c&&(c=l)}return c};function iW(a){this.xa=a}w(iW,y);iW.prototype.J=function(){this.clear();this.xa=null;iW.C.J.call(this)};iW.prototype.clear=function(){this.xa&&d3.select(this.xa).selectAll("path, circle, g").remove()};
iW.prototype.g=function(a,b,c){this.clear();if(this.xa&&0<a.length){var d=d3.select(this.xa);c.domain([0,Rqa(a)]);var e=0,f=a[0].o;f&&0<f.interval&&(e=Math.round((b(f.interval)-b(0))/2));var h=d3.svg.line().interpolate("linear").x(function(a){return b(a.key)+e}).y(function(a){return c(a.value)});a=d.selectAll("g").data(a).enter().append("g").attr("class","c-histogram-line");a.append("path").attr("stroke",function(a){return a.La()}).attr("d",function(a){var b=[],c;for(c in a.g)b.push({key:c,value:a.g[c]});
return h(b)});a.each(function(a){var d=[],f;for(f in a.g){var h=a.g[f];0<h&&d.push({key:f,value:h})}d3.select(this).selectAll("circle").data(d).enter().append("circle").attr("class","c-histogram-group__line-point").attr("cx",function(a){return b(a.key)+e}).attr("cy",function(a){return c(a.value)}).attr("r",3).attr("style",function(b){var c="fill:"+a.La()+";";0==b.value&&(c+="display:none;");return c})})}};
iW.prototype.tooltip=function(a){d3.select(this.xa).selectAll("circle").on("mouseover",function(b){var c=d3.select(this.parentElement).data();c&&0<c.length&&a.show(c[0],b)}).on("mouseout",a.hide)};function jW(a){this.xa=a}w(jW,y);jW.prototype.J=function(){this.clear();this.xa=null;jW.C.J.call(this)};jW.prototype.clear=function(){if(this.xa){var a=d3.select(this.xa);a.selectAll(".bar").remove();a.selectAll("g").remove()}};
jW.prototype.g=function(a,b,c){this.clear();if(this.xa&&0<a.length){var d=d3.select(this.xa);c.domain([0,Rqa(a,!0)]);for(var e={},f=0,h=a.length;f<h;f++){var k=a[f],l=[],m;for(m in k.g){var n=k.g[m];0<n&&l.push({key:m,value:n})}n=10;var p=k.o;p&&0<p.interval&&(n=b(p.interval)-b(0));p=d.append("g");p.data([k]);p.selectAll(".bar").data(l).enter().append("rect").attr("class","bar").attr("x",function(a){return b(a.key)}).attr("y",function(a){var b=c(a.value),d=a.key;d in e&&(b=e[d]-(c(0)-c(a.value)));
return e[d]=b}).attr("height",function(a){return c(0)-c(a.value)}).attr("style",function(){return"fill: "+k.La()}).attr("width",n)}}};jW.prototype.tooltip=function(a){d3.select(this.xa).selectAll("rect").on("mouseover",function(b){var c=d3.select(this.parentElement).data();c&&0<c.length&&a.show(c[0],b)}).on("mouseout",a.hide)};var kW={line:iW,stackedBar:jW};function lW(){A.call(this);this.ma="";this.Fn=this.Cd=null;this.init=!1;this.L=null;this.Pu=!0}w(lW,A);g=lW.prototype;g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.Je=function(){return this.L};g.pi=function(){return null};g.Dg=function(){};function Sqa(a,b){z.call(this,a);this.left=b}w(Sqa,z);function mW(){lW.call(this);this.g=d3.svg.brush();this.U=null;this.ag=nW;this.Nb=new uR(this.YK,40,this);this.ga("window");this.P=this.dragPan=this.Z=this.Ia=!1;this.l=NaN;this.G=!1;this.Ca=this.B=NaN;this.zb=null;this.hb=!0;this.ka=this.bb=!1;this.I=ab;this.init=this.ra=!1;this.node=null;this.wo=!1;this.s="brush"}w(mW,lW);var oW=!1,nW="brush";g=mW.prototype;g.cD=function(){return this.ag};function pW(a){a.ag="brushend"}g.eu=function(){return this.s};g.aa=function(){return qW(this.g.extent()||this.U)};
g.Ac=function(a,b,c){c=void 0!==c?c:!1;var d=this.aa();a&&a[0]==a[1]&&(a[1]=a[0]+1);d===a||d&&a&&Ke(d[0],a[0])&&Ke(d[1],a[1])||(c&&(a=rW(this,a)),(this.U=a)?this.g.extent(a):this.g.clear(),this.render(),b||this.Mn(),this.oa=d)};g.ae=function(a,b){this.Ac([a.start,a.end],b,void 0)};function Tqa(a,b,c){var d=a.aa();if(d&&2==d.length){var e=d[1]-d[0];b=b<d[0]?b:b-e;a.Ac([b,b+e],c)}}
g.yl=function(a){!isNaN(this.l)&&this.P?a<this.l?this.Ac(rW(this,[a,this.l]),this.G):a>=this.l&&this.Ac(rW(this,[this.l,a]),this.G):Tqa(this,a,this.G)};
g.Dg=function(a,b){this.Cd&&(this.g.x(this.Cd).on(this.ag,this.Mn.bind(this)),this.U&&this.g.extent(this.U),this.g.on(nW+".always",this.mG.bind(this)),this.g.on("brushstart.stoppan",this.gq.bind(this)),this.g.on("brushend.cleanup",this.oG.bind(this)));this.hb||this.g.clamp(!1);this.node=a=a.append("g");a.attr("class",this.s+" brush-"+this.D()).on("mouseenter",this.hI.bind(this)).on("mouseleave",this.iI.bind(this)).on("mousedown",this.ZK.bind(this));a.selectAll("rect").attr("height",b+"px");a.append("text").attr("class",
"label left").style("display","none").attr("y",13);a.append("text").attr("class","label right").style("display","none").attr("y",13);var c=d3.select("svg");if(!c.select("#right-gradient")[0][0]){var d=c.append("svg:defs").append("svg:linearGradient").attr("id","right-gradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");d.append("svg:stop").attr("offset","0%").attr("stop-color","#24e").attr("stop-opacity",1);d.append("svg:stop").attr("offset","100%").attr("stop-color",
"#24e").attr("stop-opacity",0);c=c.append("svg:defs").append("svg:linearGradient").attr("id","left-gradient").attr("x1","100%").attr("y1","0%").attr("x2","0%").attr("y2","0%").attr("spreadMethod","pad");c.append("svg:stop").attr("offset","0%").attr("stop-color","#24e").attr("stop-opacity",1);c.append("svg:stop").attr("offset","100%").attr("stop-color","#24e").attr("stop-opacity",0)}a.append("rect").style("display","none").style("pointer-events","none").attr("class","fade-right").attr("fill","url(#right-gradient)");
a.append("rect").style("display","none").style("pointer-events","none").attr("class","fade-left").attr("fill","url(#left-gradient)");this.ka&&Uqa(this,a);(c=this.Je())&&a.append("title").text(c);this.init=!0;this.render(b);this.I()&&(a.selectAll(".resize").append("polygon").attr("points","0,0 0,-10 10,-10 10,-4"),a.select(".resize.w > polygon").attr("transform","scale(-1, 1)"));this.ra&&(hw.u().H("timeline.lockToggle",Fa(this.ik,!0),!1,this),b=a.append("g"),b.attr("class","lock"),b.append("title").text("Locks start edge of view window during animation"),
b.append("text").attr("class","button fa c-glyph js-svg-timeline_lock d-none").attr("aria-label","Locks start edge of view window during animation").attr("role","img").attr("y","-1").attr("font-family","FontAwesome").style("font-size","0.7rem").on("mouseup",this.ik.bind(this)).on("mouseover",this.fq.bind(this)).on("mouseout",this.cq.bind(this)).text(function(){return"\uf023"}),b.append("text").attr("class","button fa c-glyph js-svg-timeline_unlock").attr("aria-label","Locks start edge of view window during animation").attr("role",
"img").attr("y","-1").attr("font-family","FontAwesome").style("font-size","0.7rem").on("mouseup",this.ik.bind(this)).on("mouseover",this.fq.bind(this)).on("mouseout",this.cq.bind(this)).text(function(){return"\uf09c"}),this.ik(!0))};g.render=function(a){if(this.init)try{this.g.extent(this.aa());var b=d3.select(".brush-"+this.D());b.call(this.g);void 0!==a&&b.selectAll("rect").attr("height",a+"px");this.Wg()}catch(c){}};function rW(a,b){return a.Fn&&b?b.map(a.Fn):b}g.Mn=function(a){a||this.Nb.kf()};
g.YK=function(){var a=rW(this,this.aa());Cb(a,this.A)||(this.dispatchEvent(new U("extent",a,this.A)),this.A=a)};g.gq=function(){d3.event.sourceEvent.stopPropagation();hw.u().stop()};g.hI=function(){this.Ia=!0;this.Wg()};g.iI=function(){this.Ia=!1;this.Wg()};
g.ZK=function(){if(this.bb)this.render();else{this.Z=!0;var a=angular.element(d3.event.target).parent().attr("class");-1<a.indexOf("resize")&&(this.l=this.aa()["resize e"==a?0:1]);Yd(window,"mouseup",this.xw,!1,this);Yd(window,"mousemove",this.Zv,!1,this);Vqa(this,new Md(d3.event));this.Wg();this.A=this.aa()}};g.xw=function(){this.Z=!1;Wqa(this);this.P=!1;de(window,"mouseup",this.xw,!1,this);de(window,"mousemove",this.Zv,!1,this);this.Wg()};
g.mG=function(){if(d3.event)if((this.P="resize"==d3.event.mode)&&!isNaN(this.l)){var a=d3.mouse(d3.select(".x-axis").node());this.yl(this.Cd.invert(a[0]).getTime())}else this.Ac(rW(this,this.aa()),!0);this.Wg()};g.oG=function(){this.P=!1;this.l=NaN};g.Zv=function(a){this.Z&&(oW=!0,Vqa(this,a))};
function Vqa(a,b){var c=a.Cd.range(),d=b.clientX-Math.max(angular.element(".c-svg-timeline").offset().left,0);b=d<c[0]+20;c=d>c[1]-20;b||c?a.dragPan||(a.dispatchEvent(new Sqa("dragpanstart",b)),a.dragPan=!0):a.dragPan&&Wqa(a)}function Wqa(a){a.dispatchEvent("dragpanstop");oW=a.dragPan=!1}
g.Wg=function(){var a=d3.select(".brush-"+this.D()),b=this.aa(),c=(new Uv(b[0],b[1])).toISOString().split(" to ");b=a.select(".extent").node().getBBox();var d=a.selectAll(".fade-left"),e=a.selectAll(".fade-right");this.Ia||this.Z?(a.select("text.left").text(c[0]).attr("x",b.x-5),a.select("text.right").text(c[1]).attr("x",b.x+b.width+5),a.selectAll("text").style("display","block")):a.selectAll("text").style("display","none");if("window"==this.D()&&hw.u().N){a=null;if(!isNaN(this.B)){if(0!=this.B&&
100<Math.abs(b.x/this.B))return;if(5>Math.abs(this.B-b.x)&&5>Math.abs(this.Ca-b.x-b.width))a=this.zb;else if(b.x>this.B+5||b.x+b.width>this.Ca+5)a=!0;else if(b.x+b.width<this.Ca-5||this.B-5>b.x)a=!1}null==a?(d.style("display","none"),e.style("display","none")):a?(e.style("display","none"),d.style("display","block"),d.style("pointer-events","none"),d.attr("x",b.x-b.width),d.attr("width",b.width)):(d.style("display","none"),e.style("display","block"),e.style("pointer-events","none"),e.attr("x",b.x+
b.width),e.attr("width",b.width));this.B=b.x;this.Ca=b.x+b.width;this.zb=a}else d.style("display","none"),e.style("display","none");a=d3.select(".brush-"+this.D());b=a.node().getBBox();b=b.width/2-4+b.x;a.selectAll(".buttons > .button").style("display","block").style("pointer-events","auto").attr("x",b);this.ra&&(a=d3.select(".brush-"+this.D()),b=a.select(".extent").node().getBBox().x-25,a.selectAll(".lock > .button").style("display","block").style("pointer-events","auto").attr("x",b))};
g.clear=function(){this.U=null;var a="."+this.s+" .brush-"+this.D();d3.select(a).call(this.g.clear())};g.ik=function(a){oW||(a?a=hw.u().B:(a=hw.u(),a.B=!a.B,a=a.B),a?(angular.element(".js-svg-timeline_unlock").addClass("d-none"),angular.element(".js-svg-timeline_lock").removeClass("d-none")):(angular.element(".js-svg-timeline_lock").addClass("d-none"),angular.element(".js-svg-timeline_unlock").removeClass("d-none")),Q(R.u(),"timeline.features.settings-lock",1))};g.nG=function(){oW||sW(this)};
g.fq=function(){this.bb=!0};g.cq=function(){this.bb=!1};function Uqa(a,b){b=b.append("g");var c="Delete "+a.Je().toLowerCase();b.attr("class","buttons");b.append("title").text(c);b.append("text").attr("class","button fa c-glyph").attr("aria-label",c).attr("role","img").attr("y","-1").on("mouseup",a.nG.bind(a)).on("mouseover",a.fq.bind(a)).on("mouseout",a.cq.bind(a)).text("\uf00d")}
function tW(a){var b=a.aa();return b&&b[0]!==b[1]?new WK(b[0],b[1]):a.oa&&a.oa[0]!==a.oa[1]?new WK(a.oa[0],a.oa[1]):null}function sW(a,b){a.node&&(a.wo=!0,a.g.on(nW+".always",null),a.g.on("brushstart.stoppan",null),a.g.on("brushend.cleanup",null),a.node&&(a.node.on("mouseenter",null).on("mouseleave",null).on("mousedown",null),a.node.remove()),a.ra&&hw.u().M("timeline.lockToggle",Fa(a.ik,!0),!1,a),a.init=!1,b||a.dispatchEvent(new z("deleted",a)),a.dispose())};function uW(){mW.call(this);this.ga("select");pW(this);this.j=this.jb=null;this.nb=this.bL.bind(this);this.N=null;this.o=!1}w(uW,mW);g=uW.prototype;g.Dg=function(a,b){d3.select(".c-svg-timeline").on("mousedown."+this.D(),this.SG.bind(this),!0);uW.C.Dg.call(this,a,b)};
g.SG=function(){var a=d3.event;if(a.shiftKey&&!this.o){this.o=!0;this.dispatchEvent("dragstart");try{var b=new MouseEvent(a.type,a)}catch(c){b=document.createEvent("MouseEvents"),b.initMouseEvent(a.type,!0,!0,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget)}d3.select(".brush-"+this.D()).select(".background").node().dispatchEvent(b);window.addEventListener("mousemove",this.nb,!0);d3.event.preventDefault();d3.event.stopPropagation();
return this.o=!1}};g.gq=function(){uW.C.gq.call(this);this.P=!0;this.l=this.Cd.invert(d3.mouse(d3.select(".x-axis").node())[0]).getTime()};g.bL=function(a){this.N=[a.pageX,a.pageY]};
g.Mn=function(a){uW.C.Mn.call(this,a);if(d3.event&&"brushend"==d3.event.type)if(a=this.aa(),this.j&&this.jb&&a&&!this.o){this.o=!0;window.removeEventListener("mousemove",this.nb,!0);var b=this.Cd;b=this.N?this.N[0]:b(a[1]);var c=this.N?this.N[1]:75;this.j&&this.j.open(a,{my:"left top",at:"left+"+b+" top+"+c,of:".c-svg-timeline"});C.H(KF,this.fI,!1,this);this.N=null;this.o=!1;d3.select(".brush-"+this.D()).select(".background").style("display","none")}else this.dispatchEvent("change")};
g.fI=function(){this.o=!0;this.Ac(null);this.dispatchEvent("exit");this.o=!1};g.Wg=function(){this.Z?uW.C.Wg.call(this):d3.select(".brush-"+this.D()).selectAll("text").style("display","none")};function vW(){lW.call(this);this.g=d3.svg.axis();this.Pu=!1}w(vW,lW);function Xqa(a){var b=qW(a.Cd.domain());b=[new Date(b[0]),new Date(b[1])];a=a.Cd;a=1/(a(1)-a(0));a=20*Number(a.toPrecision(2));for(var c=hw.u().L,d=mC(b[0],c),e=null,f=[],h=0;null===e||e<=b[1];h++){var k=oC(d,c,h);if(null!==e&&k.getTime()-e<a)break;e=k.getTime();e>=b[0]&&f.push(k)}return f}
vW.prototype.Dg=function(a,b){this.Cd&&this.g.orient("top").scale(this.Cd).tickSize(-b,-b).tickFormat(d3.format("")).tickValues(Xqa(this));a.append("g").attr("class","axis c-svg-timeline__tile-axis").call(this.g)};vW.prototype.render=function(a){void 0!==a&&this.g.tickSize(-a,-a);this.g.tickValues(Xqa(this));d3.select(".c-svg-timeline__tile-axis").call(this.g)};vW.prototype.aa=function(){return qW(this.Cd.domain())};function wW(a,b){A.call(this);this.K=a;a=Cg(this.K)?this.K:this.K?this.K.body:null;this.o=!!a&&"rtl"==GT(a,"direction");this.g=Yd(this.K,qd?"DOMMouseScroll":"mousewheel",this,b)}w(wW,A);
wW.prototype.handleEvent=function(a){var b=0,c=0,d=a.j;"mousewheel"==d.type?(a=xW(-d.wheelDelta),ra(d.wheelDeltaX)?(b=xW(-d.wheelDeltaX),c=xW(-d.wheelDeltaY)):c=a):(a=d.detail,100<a?a=3:-100>a&&(a=-3),ra(d.axis)&&d.axis===d.HORIZONTAL_AXIS?b=a:c=a);ta(this.j)&&(b=Je(b,-this.j,this.j));ta(this.l)&&(c=Je(c,-this.l,this.l));this.o&&(b=-b);b=new Yqa(a,d,b,c);this.dispatchEvent(b)};function xW(a){return rd&&(sd||ud)&&0!=a%40?a:a/40}wW.prototype.J=function(){wW.C.J.call(this);ee(this.g);this.g=null};
function Yqa(a,b,c,d){Md.call(this,b);this.type="mousewheel";this.detail=a;this.deltaX=c;this.deltaY=d}w(Yqa,Md);function yW(){lW.call(this);this.g=[];this.j=this.aL.bind(this);this.ga("offarrows")}w(yW,lW);g=yW.prototype;g.setItems=function(a){this.g=a};g.setStart=function(a){this.o=a};g.Dg=function(a,b){b=-zW;a.append("g").attr("transform","translate(0, "+b+")").attr("class","off-left");a.append("g").attr("class","off-right");this.init=!0};
g.render=function(){var a=-zW;if(this.init){var b=d3.select(".off-left"),c=this.g.filter(this.GC,this);c.sort(Zqa);var d=d3.select(".off-right"),e=this.g.filter(this.IC,this);e.sort($qa);d3.selectAll(".offarrow").remove();ara(this,b,c);ara(this,d,e);b=this.Cd;d.attr("transform","translate("+(b(this.Cd.domain()[1])-10*e.length)+", "+a+") scale(-1,1) translate("+10*-e.length+",0)")}};
function ara(a,b,c){for(var d=0,e=c.length;d<e;d++){var f=c[d],h=b.append("g").attr("class","offarrow");h.append("title").html(bra(f));h.append("polygon").attr("class","arrow-"+f.D()).attr("transform","translate("+11*d+", 0)").attr("points","0,5 10,0 10,10").style("cursor","pointer").on("click",a.j)}}g.aL=function(){var a=d3.select(d3.event.target).attr("class");if(a){var b=a.indexOf("-");-1<b&&(a=a.substring(b+1));this.dispatchEvent(new U("zoom",a))}};
g.GC=function(a){return(a=a.aa())&&2==a.length&&a[0]!==a[1]?a[0]<this.o:!1};g.IC=function(a){return(a=a.aa())&&2==a.length&&a[0]!==a[1]?a[1]>this.l:!1};function bra(a){var b=a.Je();return b="Jump to "+(b?b.toLowerCase():"the "+a.D())}function Zqa(a,b){return Bb(a.aa()[0],b.aa()[0])}function $qa(a,b){return-1*Bb(a.aa()[1],b.aa()[1])};function AW(a){this.j=a;z.call(this,BW)}w(AW,z);var BW="timeline.Scale";W.directive("timeline",[function(){return{template:'<div class="c-timeline js-timeline"></div>',restrict:"AE",replace:!0,scope:{histClass:"=",histData:"=",histTip:"=",startEnd:"=",items:"=",animationBrushes:"=",holdBrushes:"=",loadBrushes:"=",sliceBrushes:"=",snap:"@"},controllerAs:"timeline",controller:CW}}]);var DW=[1,5,10,25,50,100,500,1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,12096E5,2592E6,7776E6,15552E6,31536E6];
function qW(a){if(a)for(var b=0,c=a.length;b<c;b++)a[b]="number"===typeof a[b]?a[b]:a[b].getTime();return a}var EW=null;function cra(a){a=wC?new Date(a.getTime()+wC):a;return EW(a)}var dra=[[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%H:%M",function(a){return a.getUTCMinutes()}],["%H:00",function(a){return a.getUTCHours()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",function(){return!0}]];
function CW(a,b,c){this.v=a;this.K=b;this.Ma=c;this.oa=this.U=this.L=this.j=this.pa=this.s=null;this.zb=!1;this.o=this.N=null;this.Ia=a.histClass||null;this.bb=a.histData||null;a.items=a.items||[new mW];this.g=a.items;this.A=mC(new Date,"day").getTime();this.B=this.A+864E5;this.ka=0;this.nb=-1;this.hb=null;a.snap&&"true"==a.snap.toLowerCase()&&(this.hb=this.EM.bind(this));this.P=this.I=null;this.Ca=new Tg;this.Ca.H("resize",this.eL,!1,this);this.G=new yW;this.G.H("propertychange",this.fG,!1,this);
this.Ea=new je(50);this.Ea.H("tick",this.RG,!1,this);this.jb=!0;this.Nb=this.Z=null;this.ra=new uR(this.JC,40,this);EW||(EW=d3.time.format.utc.multi(dra));a.$on("$destroy",this.cL.bind(this));O.H("time.offset",this.yw,!1,this);if(a=this.v.startEnd)this.A=a.Pa(),this.B=a.Ya();this.A&&this.B||(a=AC(new Date),this.start=mC(a,"day").getTime(),this.B=oC(a,"day",1).getTime(),a=hw.u(),NM(a,"day"),a.ae(SM(this.A,this.B)));this.v.$watch("startEnd",t(this.ZI,this));this.Ma(this.dL.bind(this));Q(R.u(),"timeline.features.open",
1)}CW.$inject=["$scope","$element","$timeout"];var era=E.V("os.ui.timeline.TimelineCtrl"),zW=10;g=CW.prototype;g.dL=function(){this.v.$watch("histClass",t(this.BH,this));this.v.$watch("histData",t(this.CH,this));this.v.$watch("sliceBrushes",t(this.YM,this));this.v.$watch("loadBrushes",t(this.nF,this));this.v.$watch("animationBrushes",t(this.MB,this));this.v.$watch("holdBrushes",t(this.JE,this));fra(this)};
function FW(a){if(a)for(var b=0;b<a.length;b+=1)try{sW(a[b],!0)}catch(c){E.error(era,"destroyBrushCollection_",c)}}
g.cL=function(){this.Ca&&(this.Ca.dispose(),this.Ca=null);FW(this.v.sliceBrushes);FW(this.v.loadBrushes);FW(this.v.animationBrushes);FW(this.v.holdBrushes);this.v.sliceBrushes=[];this.v.loadBrushes=[];this.v.animationBrushes=[];this.v.holdBrushes=[];for(var a=0,b=this.g.length;a<b;a++)this.g[a].M("propertychange",this.nq,!1,this),this.g[a].M("dragpanstart",this.iq,!1,this),this.g[a].M("dragpanstop",this.jq,!1,this);this.G&&this.G.dispose();this.P&&this.P.dispose();this.Ea&&this.Ea.dispose();this.K=
this.v=null;this.ra&&this.ra.dispose();this.o&&(this.o.dispose(),this.o=null);this.N&&(this.N.remove(),this.N=null);this.I&&(d3.selectAll(".c-histogram-tooltip").remove(),this.I=null);this.pa=this.oa=this.U=this.L=this.j=null;this.s.remove();this.s=null;O.M("time.offset",this.yw,!1,this)};g.BH=function(a,b){a!=b&&(this.o&&(this.o.dispose(),this.o=null),this.Ia=a||null,GW(this))};g.CH=function(a,b){a!=b&&(this.bb=a||null,GW(this))};
g.ZI=function(a,b){!a||a==b||this.A==a.Pa()&&this.B==a.Ya()?this.ra.kf():(this.A=a.Pa(),this.B=a.Ya(),this.zb&&(HW(this,[this.A,this.B]),this.Oe()))};g.yw=function(){this.Oe()};g.eL=function(){try{var a=this.K.innerWidth(),b=IW(this),c=zW;this.j.range([0,a]);this.s.select(".c-svg-timeline__main").select(".c-svg-timeline__axis-background").attr("points",gra(b-c,a));GW(this);JW(this)}catch(d){E.error(era,"onViewportResize_",d)}};
function hra(a){a=zb(DW,Bb,!1,a);0>a&&(a=Math.min(Math.abs(a+1),DW.length-1));return DW[a]}
function ira(a){var b=qW(a.j.domain());a=Math.floor(a.K.innerWidth()/80);var c=hra((b[1]-b[0])/a);a=wC;var d=b[0]+a,e=d+c-d%c;d=[];var f=null;0===c%6048E5&&(e=new Date(e),e.setUTCDate(e.getUTCDate()-e.getUTCDay()),e=e.getTime());if(2592E6>c)for(var h=0;null===f||f<=b[1];h++)f=e+c*h-a,d.push(new Date(f));else for(c/=2592E6,c=6<c?0:c,e=new Date(b[0]),c?(e.setUTCMonth(e.getUTCMonth()-e.getUTCMonth()%c),e=mC(e,"month")):(e.setUTCFullYear(e.getUTCFullYear()),e=mC(e,"year")),h=0;null===f||f<=b[1];h++){var k=
new Date(e.getTime());c?k.setUTCMonth(e.getUTCMonth()+h*c):k.setUTCFullYear(e.getUTCFullYear()+h);k.setTime(k.getTime()-a);f=k.getTime();d.push(k)}return d}function IW(a){a=a.K.innerHeight();return 150<a?150:a}
function fra(a){function b(a){if(1E3<Math.abs(a)){var b=d3.formatPrefix(a);return 1E4<Math.abs(a)?Math.round(b.scale(a))+b.symbol:d3.round(b.scale(a),1)+b.symbol}return Number.isInteger(a)?a:""}a.o&&(a.o.dispose(),a.o=null);a.s&&(a.s.remove(),a.s=null);a.s||(a.s=d3.select(a.K[0]).append("svg").attr("class","c-svg-timeline"));var c=a.K.innerWidth(),d=IW(a),e=zW;a.j||(a.j=d3.time.scale.utc());a.j.range([0,c]).domain([0,864E5]);a.U||(a.U=d3.svg.axis().orient("bottom").scale(a.j).tickSize(8,0).tickFormat(cra).tickPadding(5).tickValues(ira(a)));
a.L||(a.L=d3.scale.linear());a.L.range([d-30-e-1,6]).domain([0,0]);a.oa||(a.oa=d3.svg.axis().orient("left").scale(a.L).tickFormat(b).tickPadding(5).tickSize(0,0).ticks([5]));a.l||(a.l=d3.behavior.zoom().on("zoom",a.Oe.bind(a)));var f=10*c,h=7884E5*c;a.l.x(a.j).scaleExtent([864E5/h,864E5/f]);f=a.s.append("g").attr("class","js-svg-timeline__background-group");a.s.call(a.l).on("wheel.zoom",null).on("dblclick.zoom",null).on("dblclick.jump",a.PH.bind(a));a.P&&a.P.dispose();a.P=new wW(a.s.node());a.P.H("mousewheel",
a.fL,!1,a);a.pa=f.append("rect").attr("class","c-svg-timeline__background").attr("width","100%").attr("height","100%").on("mousedown",a.fN.bind(a)).on("mouseup",a.Yz.bind(a)).on("mouseout",a.Yz.bind(a));f.append("rect").attr("class","c-svg-timeline__axis-background").attr("width","100%").attr("height",""+e);f=a.s.append("g").attr("class","c-svg-timeline__main").attr("transform","translate(0, "+e+")");f.append("line").attr("class","c-svg-timeline__line").attr("x2","100%").attr("y2",0);a.N=f.append("g").attr("class",
"c-histogram-group");f.append("polygon").attr("points",gra(d-e,c)).attr("class","c-svg-timeline__axis-background");a.v.histTip&&(a.I=d3.tip(),a.I.attr("class","c-histogram-tooltip").offset([-10,0]).html(a.v.histTip),a.I(a.s));f.append("g").attr("transform","translate(0,"+(d-30-e)+")").attr("class","axis x-axis").call(a.U);f.append("g").attr("transform","translate(30, 0)").attr("class","axis y-axis").call(a.oa);c=0;for(h=a.g.length;c<h;c++){a.g[c].Cd=a.j;a.g[c].Fn=a.hb;try{a.g[c].M("propertychange",
a.nq,!1,a),a.g[c].M("dragpanstart",a.iq,!1,a),a.g[c].M("dragpanstop",a.jq,!1,a)}catch(k){}a.g[c].H("propertychange",a.nq,!1,a);a.g[c].H("dragpanstart",a.iq,!1,a);a.g[c].H("dragpanstop",a.jq,!1,a);a.g[c].Dg(f,d-30-e)}a.Nb=f.append("g").attr("class","skip-hold-brushes");a.G.Cd=a.j;a.G.setItems(a.g.filter(function(a){return a.Pu}));a.G.Dg(f,d-30-e);HW(a,[a.A,a.B],!0);a.zb=!0;a.v.$emit("timeline.Init");a.Oe()}g.iq=function(a){this.jb=a.left;this.Z=a.target;this.Ea.start()};
g.jq=function(){this.Ea.stop();this.Z=null};g.RG=function(){var a=qW(this.j.domain());try{this.Z.yl&&(this.jb?(jra(this),this.Z.yl(a[0])):(kra(this),this.Z.yl(a[1])))}catch(b){}};function gra(a,b){var c=a-30;return"0,1 30,1 30,"+c+" "+b+","+c+" "+b+","+a+" 0,"+a+" 0,1"}g.JC=function(){var a={start:this.A,end:this.B,interval:this.ka};this.v.$emit("timeline.Scale",a);C.dispatchEvent(new AW(a))};
function GW(a){if(a.N){var b=a.N.node();!a.o&&a.Ia&&b&&(a.o=new a.Ia(b));a.o&&a.bb&&a.j&&a.L&&(a.o.g(a.bb,a.j,a.L),a.I&&a.o.tooltip(a.I))}lra(a)}function KW(a,b,c){c=[void 0!==c?c:a.K.innerWidth()/2,0];var d=a.l.scaleExtent(),e=a.l.translate(),f=e[0];e=e[1];var h=a.l.scale();b=h*(1+.1*b);b<d[0]||b>d[1]||(d=[(c[0]-f)/h,(c[1]-e)/h],h=b,b=[d[0]*h+f,d[1]*h+e],f+=c[0]-b[0],e+=c[1]-b[1],a.l.translate([f,e]).scale(h),a.Oe())}g.zoomIn=function(){KW(this,1);Q(R.u(),"timeline.features.controls-zoomIn",1)};
g.zoomOut=function(){KW(this,-1);Q(R.u(),"timeline.features.controls-zoomOut",1)};function jra(a){a.l.translate([a.l.translate()[0]- -20,0]);a.Oe();Q(R.u(),"timeline.features.controls-panLeft",1)}function kra(a){a.l.translate([a.l.translate()[0]-20,0]);a.Oe();Q(R.u(),"timeline.features.controls-panRight",1)}g.fL=function(a){a.preventDefault();var b=a.clientX-this.K.find(".c-svg-timeline").offset().left;KW(this,0<a.deltaY?-1:1,b);Q(R.u(),"timeline.features.controls-mouseZoom",1)};
g.PH=function(){var a=this.getItem("window");if(a){var b=d3.mouse(d3.select(".x-axis").node());b=this.j.invert(b[0]).getTime();Tqa(a,b);this.Oe()}};g.Oe=function(){lra(this);if(this.l.scale()!=this.nb){var a=this.j;a=1/(a(1)-a(0));a=10*Number(a.toPrecision(2));var b=zb(DW,Bb,!1,a);0>b&&(b=Math.min(Math.abs(b+1),DW.length-1));this.ka=0===b?DW[0]:Math.abs(DW[b]-a)<Math.abs(DW[b-1]-a)?DW[b]:DW[b-1]}this.nb=this.l.scale();a=qW(this.j.domain());this.A=a[0];this.B=a[1];this.U.tickValues(ira(this));this.ra.kf()};
g.nq=function(a){var b=a.target;JW(this);this.v.$emit("timeline.item."+b.D(),a.o)};function lra(a){d3.select(".x-axis").call(a.U);d3.select(".y-axis").call(a.oa);0===d3.select(".y-axis text").data()[0]&&d3.select(".y-axis text").remove();JW(a)}
function JW(a){for(var b=IW(a)-30-zW,c=0,d=a.g.length;c<d;c++)a.g[c].render(b);if(a.v.sliceBrushes)for(c=0,d=a.v.sliceBrushes.length;c<d;c++)a.v.sliceBrushes[c].render(b);if(a.v.loadBrushes)for(c=0,d=a.v.loadBrushes.length;c<d;c++)a.v.loadBrushes[c].render(b);if(a.v.animationBrushes)for(c=0,d=a.v.animationBrushes.length;c<d;c++)a.v.animationBrushes[c].render(b);if(a.v.holdBrushes)for(c=0,d=a.v.holdBrushes.length;c<d;c++)a.v.holdBrushes[c].render(b);a.G.setStart(a.A);a.G.l=a.B;a.G.render(b)}
g.EM=function(a){var b=wC;return 0<this.ka?Math.round((a+b)/this.ka)*this.ka-b:a};g.setStart=function(a){this.A=Sv(a);this.Oe()};function mra(a,b){"string"===typeof b&&(b=a.getItem(b));b&&LW(a,b.aa())}function LW(a,b){if(b&&2==b.length){var c=b[0];b=b[1];var d=.05*(b-c);HW(a,[c-d,b+d],!0);HW(a,[c-d,b+d],!0);a.Oe()}}
function HW(a,b,c){var d=a.j,e=b[1]-b[0],f=qW(a.j.domain());f=f[1]-f[0];e=a.l.scale()*f/e;f=a.l.scaleExtent();if(c)e=Je(e,f[0],f[1]);else if(e<f[0]||e>f[1])return;a.l.scale(e);c=a.l.translate()[0];e=d(b[0]);if(isNaN(c)||isNaN(e))a.l.translate([0,0]),c=a.l.translate()[0],e=d(b[0]);a.l.translate([c-e,0])}g.getItem=function(a){for(var b=0,c=this.g.length;b<c;b++)if(this.g[b].D()==a)return this.g[b];return null};g.fN=function(){this.pa.classed("dragging",!0)};
g.Yz=function(){this.pa&&this.pa.classed("dragging",!1)};g.fG=function(a){if("zoom"==a.l)mra(this,a.o);else if("pan"==a.l&&(a=a.o,"string"===typeof a&&(a=this.getItem(a)),a&&(a=a.aa())&&2==a.length)){a=(a[1]+a[0])/2;var b=qW(this.j.domain());b=(b[1]-b[0])/2;HW(this,[a-b,a+b]);this.Oe()}};g.YM=function(){MW(this,this.v.sliceBrushes)};g.nF=function(){MW(this,this.v.loadBrushes)};g.MB=function(){MW(this,this.v.animationBrushes)};g.JE=function(){MW(this,this.v.holdBrushes)};
function MW(a,b){if(b)for(var c=IW(a),d=zW,e=a.Nb,f=0;f<b.length;f+=1)b[f].init||(b[f].Cd=a.j,b[f].Fn=a.hb,b[f].Dg(e,c-30-d))}mb(yA,function(a,b){return"contextmenu"!==b?!!$(a).closest(".js-timeline").length:!1});function NW(a,b,c){this.scope=a;this.scope.collapsed=OW;this.element=b;this.timeout=c;this.pa=null;this.B=nc(kW);this.g=hw.u();this.ra=null;this.G=this.N=0;this.L=null;this.ka=!1;this.oa=[];this.U=!1;this.fpsx=this.fps=0;nra(this);this.histData=this.histClass=null;this.playing=this.g.ud();this.timeRange=null;a=O.get(["ui","timelineSettings","chartType"],"line");a=this.B.indexOf(a);-1<a&&(Gb(this.B,a),this.histClass=kW[this.B[0]]);this.P=new mW;this.P.hb=!1;this.P.L="The currently-displayed time window";
this.P.I=PW;this.P.ra=!0;this.o=new uW;this.o.ga("select");this.o.jb="#map-container";this.o.H("change",this.Ti,!1,this);this.o.H("exit",this.Ti,!1,this);this.o.H("dragstart",this.Ti,!1,this);this.items=[new vW,this.P,this.o];this.sliceBrushes=[];this.loadBrushes=[];this.animationBrushes=[];this.holdBrushes=[];this.j=!1;this.l=void 0;this.Ia=new Lg(this.element[0]);this.Ia.H("key",this.zb,!1,this);this.s=void 0;this.rm(null);this.vm(null);this.l||(this.l=new IF(new HF({type:"root",children:[{type:"group",
label:"Load",sort:0},{type:"group",label:"Ranges",sort:10,children:[{eventType:"load:item.window",label:"Active Window",tooltip:"Zooms to and loads the active window",da:['<i class="fa fa-fw fa-square-o"></i>'],ya:this.A.bind(this),sort:0}]},{type:"group",label:"Data",children:[],sort:20}]})),ora(this,this.l,"load:","Load","Zooms to and loads "));this.s||(this.s=new IF(new HF({type:"root",children:[{type:"group",label:"Zoom To",sort:0},{type:"group",label:"Ranges",sort:10,children:[{eventType:"load:item.load",
label:"Loaded Range",tooltip:"Zooms to the loaded range",da:['<i class="fa fa-fw fa-arrows-h"></i>'],ya:this.A.bind(this),sort:0},{eventType:"zoom:item.window",label:"Active Window",tooltip:"Zooms to and loads the active window",da:['<i class="fa fa-fw fa-square-o"></i>'],ya:this.A.bind(this),sort:10}]},{type:"group",label:"Data",sort:20,children:[{eventType:"zoom:All Data",label:"All Data",tooltip:"Zooms to all data",da:['<i class="fa fa-fw fa-crop"></i>'],ya:this.A.bind(this),sort:0}]}]})),ora(this,
this.s,"zoom:","Zoom To","Zooms to "));this.nb={".js-load-presets":this.l,".js-zoom-group":this.s};this.Z=!1;this.bi();QW(this,!0);this.scope.$on("timeline.item.load",this.Nb.bind(this));this.scope.$on("timeline.item.window",this.jb.bind(this));this.scope.$on("timeline.Scale",this.hb.bind(this));this.oa.push(this.scope.$watch("timelineCtrl.fpsx",this.bb.bind(this)));this.scope.$on("$destroy",this.destroy.bind(this))}NW.$inject=["$scope","$element","$timeout"];var RW=[.5,1,2,4,6,8,18,24,30],OW=!1;
function PW(){return!OW}NW.prototype.destroy=function(){this.Fk();this.Ia.dispose();for(var a=0,b=this.oa.length;a<b;a++)this.oa[a]();a=this.getItem("select");a.M("change",this.Ti,!1,this);a.M("exit",this.Ti,!1,this);a.M("dragstart",this.Ti,!1,this);var c=this.items;a=0;for(b=c.length;a<b;a++)c[a].dispose();Ma(this.l);Ma(this.s);this.s=this.l=void 0;this.timeout=this.element=this.scope=this.L=this.g=null};
NW.prototype.jb=function(a,b){!this.j&&b&&2===b.length&&(this.j=!0,a=b[1]-b[0],a!=this.g.cc()&&(PM(this.g,a),QM(this.g,a/2)),this.g.Ad(b[1]),this.j=!1)};NW.prototype.Nb=function(a,b){!this.j&&b&&2===b.length&&(this.j=!0,this.g.ae(SM(b[0],b[1])),this.j=!1)};var SW=[{diff:0,format:".SSS"},{diff:6E4,format:":ss"},{diff:36E5,format:" HH:mm"},{diff:3456E5,format:"YYYY MMM D"}];
NW.prototype.hb=function(a,b){this.L=b;var c=SW.length;a="";for(var d=b.end-b.start;c--&&!(a+=SW[c].format,d>SW[c].diff););c=new Date(b.start+wC);b=new Date(b.end+wC);a+=" ";this.scope.start=pC(c,a)+xC;this.scope.end=pC(b,a)+xC;TW(this);this.Z&&(pra(this),this.Z=!1)};NW.prototype.bb=function(a,b){null!=a&&a!==b&&(this.fps=a=RW[a],qra(this,a),Q(R.u(),"timeline.features.controls-changeFps",1))};
function nra(a){if(a.g){var b=a.g.U;if(a.fps!=b){for(var c=0;c<RW.length-1&&!(RW[c]>=b);c++);a.fps=RW[c];a.fpsx=c;a.fps!=b&&qra(a,a.fps)}}}function qra(a,b){a.g.M("timeline.fpsChange",a.Kc,!1,a);XM(a.g,b);a.g.H("timeline.fpsChange",a.Kc,!1,a)}NW.prototype.Ca=function(){TW(this)};function TW(a){a.L&&(a.histData=OW?[]:rra(a.L),a.ka&&UW(a),X(a.scope))}NW.prototype.iD=function(a,b){var c="";a&&a.S()&&(c+=a.S()+"<br>");return c+='Features: <span class="u-text-red">'+b.value+"</span>"};
NW.prototype.getHistogramTooltip=NW.prototype.iD;g=NW.prototype;
g.bi=function(){this.U||(this.U=!0,this.g.H("timeline.show",this.Kc,!1,this),this.g.H("timeline.reset",this.Kc,!1,this),this.g.H("timeline.play",this.Kc,!1,this),this.g.H("timeline.stop",this.Kc,!1,this),this.g.H("timeline.fpsChange",this.Kc,!1,this),this.g.H("timleline.rangeChanged",this.Kc,!1,this),this.g.H("timeline.slice.rangeChanged",this.Kc,!1,this),this.g.H("timeline.animate.rangeChanged",this.Kc,!1,this),this.g.H("timeline.animate.holdRangeChanged",this.Kc,!1,this),this.g.H("timeline.refreshLoad",
this.ln,!1,this),JM(this.g),this.Aq(null),this.rq(null),this.rm(null),this.vm(null),UW(this),this.ra=this.g.sa())};
g.Fk=function(){this.U&&(this.U=!1,this.g.M("timeline.show",this.Kc,!1,this),this.g.M("timeline.reset",this.Kc,!1,this),this.g.M("timeline.play",this.Kc,!1,this),this.g.M("timeline.stop",this.Kc,!1,this),this.g.M("timeline.fpsChange",this.Kc,!1,this),this.g.M("timleline.rangeChanged",this.Kc,!1,this),this.g.M("timeline.slice.rangeChanged",this.Kc,!1,this),this.g.M("timeline.animate.rangeChanged",this.Kc,!1,this),this.g.M("timeline.animate.holdRangeChanged",this.Kc,!1,this),this.g.M("timeline.refreshLoad",
this.ln,!1,this))};
g.Kc=function(a){QW(this);"timeline.animate.rangeChanged"===a.type&&this.rm(null);"timeline.animate.holdRangeChanged"===a.type&&this.vm(null);"timeline.slice.rangeChanged"===a.type&&this.Aq(null);"timleline.rangeChanged"===a.type&&this.rq(null);"timeline.animate.holdRangeChanged"!==a.type&&"timeline.slice.rangeChanged"!==a.type&&"timleline.rangeChanged"!==a.type||TW(this);X(this.scope);if("timeline.play"==a.type)this.I=Ha();else if("timeline.stop"==a.type){if(0<this.I&&(a=R.u(),a.isEnabled())){var b=
Ha()-this.I;Q(a,"timeline.stats.max-play",b);Q(a,"timeline.stats.min-play",b)}this.I=0}};function QW(a,b){if(!a.j){a.j=!0;nra(a);a.playing=a.g.ud();b&&(a.N=0,a.G=0);if(b||!a.g.ud())if(0===a.N||0===a.G)a.N=a.g.Pa(),a.G=a.g.Ya(),b=.05*(a.G-a.N),a.timeRange=new Uv(a.N-b,a.G+b),a.Z=!0;a.Z||pra(a);a.j=!1}}function pra(a){var b=a.getItem("window");b&&b.Ac([a.g.g-a.g.cc(),a.g.g],!0);(b=a.getItem("loop"))&&a.g.l.isEmpty()&&b.Ac([OM(a.g).start,OM(a.g).end],!0)}
g.getItem=function(a){for(var b=this.items,c=0,d=b.length;c<d;c++)if(b[c].D()==a)return b[c];return null};g.KC=function(){this.g.first();Q(R.u(),"timeline.features.controls-firstFrame",1)};NW.prototype.firstFrame=NW.prototype.KC;NW.prototype.eF=function(){this.g.last();Q(R.u(),"timeline.features.controls-lastFrame",1)};NW.prototype.lastFrame=NW.prototype.eF;NW.prototype.FF=function(){this.g.next();ZM(this.g);Q(R.u(),"timeline.features.controls-nextFrame",1)};NW.prototype.nextFrame=NW.prototype.FF;
NW.prototype.WL=function(){this.g.prev();ZM(this.g);Q(R.u(),"timeline.features.controls-prevFrame",1)};NW.prototype.previousFrame=NW.prototype.WL;NW.prototype.reset=function(){this.ra&&(this.g.restore(this.ra),QW(this,!0),Q(R.u(),"timeline.features.controls-reset",1),(new le(this.ln,10,this)).start())};NW.prototype.reset=NW.prototype.reset;NW.prototype.gA=function(){(this.playing=!this.playing)?this.g.play():this.g.stop();Q(R.u(),"timeline.features.controls-playToggle",1)};
NW.prototype.togglePlay=NW.prototype.gA;NW.prototype.zoomIn=function(){VW(this).zoomIn();Q(R.u(),"timeline.features.controls-zoomIn",1)};NW.prototype.zoomIn=NW.prototype.zoomIn;NW.prototype.zoomOut=function(){VW(this).zoomOut();Q(R.u(),"timeline.features.controls-zoomOut",1)};NW.prototype.zoomOut=NW.prototype.zoomOut;function VW(a){return a.element.find(".js-timeline").children().scope().timeline}
NW.prototype.qN=function(){Gb(this.B,1);var a=this.B[0];this.histClass=kW[a];O.set(["ui","timelineSettings","chartType"],a);a="timeline.features.controls-chartType#"+a;Q(R.u(),a,1)};NW.prototype.toggleChartType=NW.prototype.qN;
NW.prototype.Dh=function(a){var b=this.nb[a];if(b){var c=b.Ha().find("Data");c.children.length=b===this.s?1:0;var d=this.histData;if(d)for(var e=b===this.l?"load:":"zoom:",f=b===this.l?"Zooms to and loads ":"Zooms to ",h=100,k=0;k<d.length;k++){var l=d[k],m=l.l,n=l.S();l.Hb()&&sra(m)&&c.R({eventType:e+l.D(),label:n,tooltip:f+n,da:['<i class="fa fa-fw fa-bars"></i>'],sort:h++,ya:this.A.bind(this)})}this.scope.menu=a;C.Ra(KF,this.gc,!1,this);b.open(void 0,{my:"left bottom",at:"left top",of:a})}};
NW.prototype.openMenu=NW.prototype.Dh;NW.prototype.gc=function(){this.scope.menu=null};NW.prototype.select=function(){this.scope.selecting=!this.scope.selecting;angular.element(".brush-select .background").css("display",this.scope.selecting?"block":"none")};NW.prototype.select=NW.prototype.select;g=NW.prototype;g.Ti=function(a){this.scope.selecting="dragstart"==a.type;X(this.scope)};g.KB=function(a){bja(this.g,tW(a.A))};
g.LB=function(a){if("extent"===a.l){var b=a.o,c=a.s;a=this.g;b=new WK(b[0],b[1]);c=new WK(c[0],c[1]);if(b.start!=c.start||b.end!=c.end)a.l.remove(c),gN(a,b)}};g.ZM=function(a){var b=this.g;a=tW(a.A);a=fN(a);var c=b.o.clone();86399E3<=a.end&&(a.end=864E5);b.o.remove(a);aL(c,b.o)||(b.P.clear(),b.dispatchEvent("timeline.slice.rangeChanged"),b.dispatchEvent("timleline.rangeChanged"),!c.isEmpty()&&b.o.isEmpty()&&b.dispatchEvent("timeline.refreshLoad"),VM(b),aN(b))};
g.aN=function(a){if("extent"===a.l){var b=a.o,c=a.s;a=this.g;c=new WK(c[0],c[1]);b=fN(new WK(b[0],b[1]));c=fN(c);if(b.start!=c.start||b.end!=c.end)86399E3<=c.end&&(c.end=864E5),a.o.remove(c),aja(a,b)}};
g.oF=function(a){var b=this.g;a=tW(a.A);var c=b.j.clone();b.j.remove(a);b.j.isEmpty()?(b.j.remove(a),b.j.add(a.clone()),At(zt.u(),"At least one load range must always be present",us),b.P.clear(),b.dispatchEvent("timeline.slice.rangeChanged"),b.dispatchEvent("timleline.rangeChanged"),VM(b),aN(b)):aL(c,b.j)||(b.P.clear(),b.dispatchEvent("timeline.slice.rangeChanged"),b.dispatchEvent("timleline.rangeChanged"),a=Qe(c).length,c=Qe(b.j).length,1<a&&1===c&&b.dispatchEvent("timeline.refreshLoad"),VM(b),aN(b))};
g.pF=function(a){if("extent"===a.l){var b=a.o,c=a.s;a=this.g;b=new WK(b[0],b[1]);c=new WK(c[0],c[1]);if(b.start!=c.start||b.end!=c.end)a.j.remove(c.clone()),RM(a,b)}};g.yD=function(a){var b=new mW;b.ga("slice-"+cc());b.G=!0;pW(b);b.s="slice";b.L="The slice range";b.ka=!0;b.I=PW;b.Ac([a.start,a.end]);b.H("deleted",this.ZM.bind(this));b.H("propertychange",this.aN.bind(this));return b};
g.lD=function(a){var b=new mW;this.g.o.isEmpty()?(b.ga("load-"+cc()),b.s="load"):(b.ga("considered-"+cc()),b.s="considered");b.L="The load range";b.G=!0;pW(b);b.ka=1<Qe(this.g.j).length;b.I=PW;b.Ac([a.start,a.end]);b.H("deleted",this.oF.bind(this));b.H("propertychange",this.pF.bind(this));return b};g.RC=function(a){var b=new mW;b.ga("loop-"+cc());b.G=!0;pW(b);b.L="The playback loop";b.ka=!0;b.I=PW;b.Ac([a.start,a.end]);b.H("deleted",this.KB.bind(this));b.H("propertychange",this.LB.bind(this));return b};
g.jD=function(a){var b=new mW;b.ga("loop-"+cc());b.G=!0;pW(b);b.s="hold";b.L="The hold range";b.ka=!0;b.I=PW;b.Ac([a.start,a.end]);b.H("deleted",this.KE.bind(this));b.H("propertychange",this.LE.bind(this));return b};function WW(a,b,c){for(var d,e=[],f=a.splice(0),h=Math.max(b.length,f.length),k=0;k<h;k++)d=b[k],a=f[k],d&&a&&!a.wo?(a.ae(d,!0),e.push(a)):d?e.push(c(d)):d||!a||a.wo||sW(a,!0);return e}g.ln=function(){XW(this.loadBrushes,this.rq.bind(this))};
function XW(a,b){for(var c=0;c<a.length;c++)sW(a[c],!0);b(null)}g.Aq=function(){var a=this.sliceBrushes;var b=this.g;b=Qe(b.o.isEmpty()?[]:YM(b));this.sliceBrushes=WW(a,b,this.yD.bind(this))};g.rq=function(){this.loadBrushes=WW(this.loadBrushes,Qe(this.g.j),this.lD.bind(this))};g.rm=function(){this.animationBrushes=WW(this.animationBrushes,Qe(this.g.l),this.RC.bind(this))};g.vm=function(){this.holdBrushes=WW(this.holdBrushes,Qe(this.g.s),this.jD.bind(this))};g.KE=function(a){cja(this.g,tW(a.A))};
g.LE=function(a){if("extent"===a.l){var b=a.o,c=a.s;a=this.g;b=new WK(b[0],b[1]);c=new WK(c[0],c[1]);if(b.start!=c.start||b.end!=c.end)a.s.remove(c),dja(a,b)}};var tra={iR:"Today",ER:"Yesterday",eR:"This Week",jP:"Last Week",dR:"This Month",gP:"Last 30 Days",hP:"Last 60 Days",iP:"Last 90 Days",fR:"This Year"};function sra(a){return!!a&&a.Pa()!=Qv&&a.Ya()!=Rv&&!isNaN(a.Pa())&&!isNaN(a.Ya())&&!(0==a.Pa()&&0==a.Ya())}
function ora(a,b,c,d,e){b=b.Ha().find(d);d=0;for(var f in tra){var h=tra[f],k=c+h,l=-1<h.indexOf("Data")?"fa-crop":"fa-calendar";b.R({eventType:k,label:h,tooltip:e+h.toLowerCase(),da:['<i class="fa fa-fw '+l+'"></i>'],sort:d++,ya:a.A.bind(a)})}}
NW.prototype.A=function(a){var b=a.type.split(":");a=b[0];var c=b[1],d=!0;b=angular.element(".c-svg-timeline").scope().timeline;var e=this.histData;switch(c){case "Today":var f=mC(new Date,"day");var h=nC(new Date,"day");break;case "Yesterday":f=mC(new Date,"day");h=nC(new Date,"day");f.setUTCDate(f.getUTCDate()-1);h.setUTCDate(h.getUTCDate()-1);break;case "This Week":f=mC(new Date,"week");h=nC(new Date,"week");break;case "Last Week":f=mC(new Date,"week");h=nC(new Date,"week");f.setUTCDate(f.getUTCDate()-
7);h.setUTCDate(h.getUTCDate()-7);break;case "This Month":f=mC(new Date,"month");h=nC(new Date,"month");break;case "Last 30 Days":h=nC(new Date,"day");f=oC(h,"day",-30);break;case "Last 60 Days":h=nC(new Date,"day");f=oC(h,"day",-60);break;case "Last 90 Days":h=nC(new Date,"day");f=oC(h,"day",-90);break;case "This Year":f=mC(new Date,"year");h=nC(new Date,"year");break;case "All Data":if(e){c=Number.POSITIVE_INFINITY;for(var k=Number.NEGATIVE_INFINITY,l=0,m=e.length;l<m;l++){var n=e[l].l;sra(n)&&
(c=Math.min(c,n.Pa()),k=Math.max(k,n.Ya()))}k>c&&(f=new Date(c),h=new Date(k),d=!1)}break;default:if(0===c.indexOf("item.")){if("item.load"===c?e=cL(this.g.j):(e=this.g,e=new WK(e.g-e.G,e.g)),n=e)h=qW([n.start,n.end]),f=new Date(h[0]),h=new Date(h[1]),d=!1}else if(c&&e)for(l=0,m=e.length;l<m;l++)if(e[l].D()==c){if(n=e[l].l)f=new Date(n.Pa()),h=new Date(n.Ya()),d=!1;break}}void 0!==f&&void 0!==h&&(d&&(f.setTime(f.getTime()-wC),h.setTime(h.getTime()-wC)),b.getItem("window")&&(f=f.getTime(),h=h.getTime(),
LW(b,[f,h]),"load"==a&&(this.g.ae(SM(f,h)),JM(this.g),UW(this))))};
NW.prototype.zb=function(a){var b=VW(this);if(b)switch(a.keyCode){case 33:case 38:a.stopPropagation();b.zoomIn();break;case 34:case 40:a.stopPropagation();b.zoomOut();break;case 37:a.shiftKey?(a.stopPropagation(),jra(b)):a.ctrlKey?(a.stopPropagation(),this.g.first()):(a.stopPropagation(),this.g.prev());break;case 39:a.shiftKey?(a.stopPropagation(),kra(b)):a.ctrlKey?(a.stopPropagation(),this.g.last()):(a.stopPropagation(),this.g.next());break;case 32:a.stopPropagation(),this.gA()}};
function UW(a){var b=a.histData;if(b&&b.length){a.ka=!1;for(var c=Number.NEGATIVE_INFINITY,d=OM(a.g).start,e=OM(a.g).end,f=0,h=b.length;f<h;f++){var k=b[f].g,l;for(l in k)k[l]&&d<=l&&l<=e&&(c=Math.max(c,l))}c>Number.NEGATIVE_INFINITY&&a.g.Ad(c+a.L.interval)}else a.ka=!0}NW.prototype.close=function(){WM(this.g);Uia(this.g);C.dispatchEvent(new jE("toggleUI","timeline"))};NW.prototype.close=NW.prototype.close;NW.prototype.rN=function(){OW=!OW;this.scope.collapsed=OW;this.Ea()};
NW.prototype.toggleCollapse=NW.prototype.rN;
NW.prototype.Ea=function(){var a=VW(this),b=this.element.find(".js-timeline-panel"),c=b.find(".js-timeline");OW?(b.removeClass("c-timeline-panel__expanded"),b.addClass("c-timeline-panel__collapsed"),c.removeClass("c-timeline__expanded"),c.addClass("c-timeline__collapsed")):(b.removeClass("c-timeline-panel__collapsed"),b.addClass("c-timeline-panel__expanded"),c.removeClass("c-timeline__collapsed"),c.addClass("c-timeline__expanded"));Uy.get("$timeout")(function(){fra(a);this.ln();XW(this.sliceBrushes,
this.Aq.bind(this));XW(this.holdBrushes,this.vm.bind(this));XW(this.animationBrushes,this.rm.bind(this))}.bind(this),100)};NW.prototype.Ek=function(){this.g.ud()&&this.g.stop();C.dispatchEvent("timeline.record");Q(R.u(),"timeline.features.controls-record",1)};NW.prototype.record=NW.prototype.Ek;function YW(){NU.call(this);this.description="Saves the current timeline";this.priority=100;this.g="time";this.title="Time"}w(YW,NU);var ZW=E.V("os.state.v2.TimeState");
YW.prototype.load=function(a,b){a=OU(a);if(a instanceof Element)try{if(ura(a))this.l(a,b);else{var c=a.querySelector("animation");C.dispatchEvent(new jE("toggleUI","timeline",null!=c&&0<c.childElementCount));var d=new ne(ura.bind(void 0,a)),e=this.l.bind(this,a,b);d.qh=e;d.Ri=e;d.start(100,5E3)}}catch(f){E.error(ZW,"Failed to parse time state! Stack: "+f.stack)}else E.error(ZW,"Unable to load state content!")};
function ura(a){a=a.querySelector("animation");a=null!=a&&0<a.childElementCount;var b=null!=ng("js-timeline");return a===b}
YW.prototype.l=function(a){try{var b=a.querySelector("animation"),c=null!=b&&0<b.childElementCount,d=hw.u(),e=null,f=a.querySelectorAll("interval");if(0<f.length){for(var h=new $K,k=0;k<f.length;k+=1)h.add($W(f[k].textContent));e=cL(h)}var l=e;var m=a.querySelector("current"),n=m?m.textContent:void 0;var p=n?$W(n):null;!l&&p&&(l=new WK(p.start,p.end));if(l){var r=a.querySelector("duration");if(r)var u=r.textContent;else{var v=l.end-l.start;u=24192E5<=v?"month":6048E5==v?"week":864E5==v?"day":"custom"}(e=
u||void 0)&&NM(d,e);var x=vra(a,"sequence"),B=new $K;B.add(l);aL(B,x)?WM(d):dN(d,x);eN(d,vra(a,"holds"));d.ae(l);c&&(JM(d,e),MM(d,l.end-l.start))}p&&(PM(d,p.end-p.start),d.Ad(p.end));l=0;var F=a.querySelector("millisPerFrame"),D=F?Number(F.textContent):0;!isNaN(D)&&0<D&&(l=Math.round(1E3/D));var S=isNaN(l)||0===l?null:l;null!==S&&XM(d,S);var ia=a.querySelector("advance");var ea=ia?Pqa(ia.textContent):null;null!==ea&&0!==ea&&QM(d,ea);var ca=angular.element(".js-date-control").scope();ca&&ca.dateControl.update();
if(c){var Y=ng("js-timeline");Y&&QW(angular.element(Y).scope().timelineCtrl,!0);var ja=b.querySelector("playState");ja&&"Forward"==ja.textContent?d.play():d.ud()&&d.stop()}}catch(Ga){E.error(ZW,"Failed to parse time state! Stack: "+Ga.stack)}};YW.prototype.remove=function(){};
YW.prototype.Yc=function(a,b){try{var c=hw.u(),d=new WK(c.g-c.cc(),c.g),e=Qqa(c.A);Z("interval",b,aX(cL(c.j)));Z("current",b,aX(d));Z("advance",b,e);if(!c.l.isEmpty()){var f=Z("sequence",b);wra(Qe(c.l),f)}if(!c.s.isEmpty()){var h=Z("holds",b);wra(Qe(c.s),h)}if(null!=ng("js-timeline")){var k=aX(OM(c)),l=Math.floor(Math.round(1E3/c.U)),m=c.ud()?"Forward":"Stop",n=Z("animation",b);Z("loop",n,k);Z("loopBehavior",n,"taperEndSnapStart");Z("millisPerFrame",n,l);Z("playState",n,m)}Z("duration",b,c.L);this.Kd(a,
b)}catch(p){LU(this,p.message||"Unspecified error.")}};function wra(a,b){for(var c,d=0;d<a.length;d+=1)c=a[d],c=aX(c),Z("interval",b,c)}function aX(a){var b=new Date(a.end);return pC(new Date(a.start),"YYYY-MM-DDTHH:mm:ss[Z]")+"/"+pC(b,"YYYY-MM-DDTHH:mm:ss[Z]")}function $W(a){var b=a.split(/\//);a=EC(b[0],["YYYY-MM-DDTHH:mm:ss[Z]"]);b=EC(b[1],["YYYY-MM-DDTHH:mm:ss[Z]"]);return new WK(a.valueOf(),b.valueOf())}
function vra(a,b){var c=new $K;if(a&&(a=a.querySelector(b)))for(a=a.querySelectorAll("interval"),b=0;b<a.length;b+=1)c.add($W(a[b].textContent));return c};function bX(){NU.call(this);this.description="Saves the current map view/position";this.priority=100;this.g="map";this.title="Current View"}w(bX,NU);var xra=E.V("os.state.v2.ViewState");
bX.prototype.load=function(a){a=OU(a);if(a instanceof Element)try{var b=a.querySelector("projection");if(b)var c=b.textContent;var d=T.u();c="Perspective"==c?"3d":"2d";var e=d.Qa();("2d"==c&&e||"3d"==c&&!e)&&Sy(d,!e);var f=Number(a.querySelector("latitude").textContent),h=Number(a.querySelector("longitude").textContent);TP(d,{center:[h?h:0,f?f:0],altitude:Number(a.querySelector("altitude").textContent),heading:Number(a.querySelector("heading").textContent),roll:Number(a.querySelector("roll").textContent),
tilt:Je(Number(a.querySelector("tilt").textContent),0,90)})}catch(k){}else E.error(xra,"Unable to load state content!")};bX.prototype.remove=function(){};
bX.prototype.Yc=function(a,b){try{var c=T.u(),d=KC("kml:Camera","http://www.opengis.net/kml/2.2",b);d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:kml","http://www.opengis.net/kml/2.2");Z("projection",b,c.Qa()?"Perspective":"Equirectangular");var e=Oz(c);KC("kml:latitude","http://www.opengis.net/kml/2.2",d,e.center[1]);KC("kml:longitude","http://www.opengis.net/kml/2.2",d,e.center[0]);KC("kml:altitude","http://www.opengis.net/kml/2.2",d,e.altitude);KC("kml:tilt","http://www.opengis.net/kml/2.2",
d,e.tilt);KC("kml:heading","http://www.opengis.net/kml/2.2",d,e.heading);KC("kml:roll","http://www.opengis.net/kml/2.2",d,e.roll);KC("kml:altitudeMode","http://www.opengis.net/kml/2.2",d,"clampToGround");this.Kd(a,b)}catch(f){LU(this,f.message||"Unspecified error.")}};function cX(){NU.call(this);this.description="Saves the current layers";this.j={type:"data"};this.g="layers";this.title="Layers"}w(cX,NU);var yra=E.V("os.state.v3.LayerState");g=cX.prototype;g.isValid=function(a){try{var b=a.Sa();if(!b||!b.type||b.loadOnce)return!1;var c=b.type.toLowerCase();return"basemap"===c||"static"===c||"ref"===c?!1:!(Uw(b.url)||Uw(b.url2))}catch(d){}return!1};
g.load=function(a,b){a=OU(a);if(a instanceof Element)try{var c=a.querySelectorAll("layer");if(c){a=[];for(var d=0,e=c.length;d<e;d++){var f=this.Wq(c[d]);f&&a.push(f)}a.reverse();c=0;for(var h=a.length;c<h;c++){var k=a[c];k.id=MU(b,k.id);k.exportEnabled=!0;var l=V.Ja(b.substring(0,b.length-1));l&&(k.provider=l.S());var m=k.layer;if(!m){var n=k.params;if(n){var p=n.get("typename");q(p)?m=p[0]:m=p;if("string"===typeof m){var r=m.indexOf(":");-1<r&&(m=m.substring(r+1))}}}var u=k.style,v=k.styles;if(null!=
u&&null!=v){f=!1;for(var x=0,B=v.length;x<B;x++){if(v[x].data===u){f=!0;break}if(v[x].label===u){f=!0;k.style=v[x].data;break}}f||(k.style="")}m&&YV(m)&&ZV(k.title)}d=0;for(e=a.length;d<e;d++){var F=new tP(a[d]);F.Fa();F.dispose()}}}catch(D){E.error(yra,"Error loading layer in state "+b,D)}else E.error(yra,"Unable to load state content!")};g.remove=function(a){for(var b=pw(T.u()),c=b.length;c--;){var d=b[c];if(d)try{var e=d.D();e&&Ib(e,a)&&T.u().pc(d)}catch(f){}}};
g.Yc=function(a,b){try{for(var c=pw(T.u()),d=!1,e=0,f=c.length;e<f;e++){var h=c[e];if(this.isValid(h)){var k=this.Vq(h,a,void 0,{title:h.S()});k&&b.appendChild(k);var l=h.O();!d&&l instanceof vL&&(d=l.N)}}d&&At(zt.u(),"You have at least one of your layers locked. Locked layers are included in state files, but they <b>will not be locked</b> when the state is loaded. The state file may look different from what you currently see!",ss);this.Kd(a,b)}catch(m){LU(this,m.message||"Unspecified error.")}};
g.Vq=function(a,b,c,d){var e=["locked","featureType","type"];if(!a.Sa())return null;var f=zc(a.Sa());null!=d&&Cc(f,d);a.sa(f);a=f.url;"string"!==typeof a||Uw(a)||(a=f.url=decodeURIComponent(aW(a)));(d=f.urls)&&0<d.length&&!a&&(f.url=d[0]);d="string"===typeof f.type?f.type.toLowerCase():"";null!=c&&(c=q(c)?c:[c],e=ub(e,c));c=0;for(var h=e.length;c<h;c++)null!=f[e[c]]&&delete f[e[c]];e=mB("layer",b.ne);b="wms"!=d?mB("basicFeatureStyle",b.ne):null;for(var k in f)if(c=f[k],null!=c)switch(k){case "params":var l=
Z("params",e),m="string"===typeof c?new af(c):c,n=m.Ub();c=0;for(h=n.length;c<h;c++){var p=n[c],r=String(m.get(p));"wms"==d?p=p.toUpperCase():"wfs"==d&&(p=p.toLowerCase());Z(p,l,r)}break;case "provider":Z("dataProvider",e,c);break;case "baseType":Z("provider",e,c);this.Id(k,c,e);break;case "color":b?(c=xv(c).slice(1),Z("pointColor",b,c)):this.Id(k,c,e);break;case "contrast":"number"!==typeof c||isNaN(c)||Z("contrast",e,Math.round(100*(c-1)));break;case "alpha":case "opacity":b?(c=null!=c?Number(c):
1,Z("pointOpacity",b,Math.round(255*c))):(c=null!=c?Number(c):1,Z("alpha",e,c));break;case "size":b&&(c=null!=c?Math.floor(c):3,Z("pointSize",b,2*c));break;case "styles":l=Z("styles",e);m=c;n=f.legends;c=0;for(h=m.length;c<h;c++)m[c].data&&(p=Z("style",l),Z("name",p,m[c].data),Z("title",p,m[c].label),n&&n.length==m.length&&Z("legend",p,n[c]||""));break;case "labels":if(b&&0<c.length&&!Lb(Yb(c[0].column))){Z("labelColumn",b,c[0].column);var u=Z("labelColumns",b);db(c,function(a){Z("label",u,void 0,
{column:a.column,showColumn:a.showColumn})})}break;case "labelColor":b&&"string"===typeof c&&!Lb(Yb(c))&&(c=xv(c).replace(/^#/,""),Z("labelColor",b,c));break;case "labelSize":b&&"number"===typeof c&&Z("labelSize",b,c);break;case "showLabels":Z("showLabels",e,c);break;case "mappings":if((c=f.mappings)&&0<c.length)for(h=Z("mappings",e),l=hB.u().rc(c).getElementsByTagName("mapping"),c=l.length;0<c;c--)h.appendChild(l[c-1]);break;case "commentChar":this.Id("comment",c,e);this.Id("quote",'"',e);break;
case "dataRow":"number"===typeof c&&this.Id("dataRow",c-1,e);break;case "headerRow":"number"===typeof c&&f.useHeader?this.Id("headerRow",c-1,e):this.Id("headerRow",-1,e);break;case "useHeader":case "parserConfig":break;case "animate":"timeEnabled"in f||this.Id(k,c,e);break;case "timeEnabled":this.Id("animate",c,e);break;case "isBaseLayer":this.Id("baseLayer",c,e);break;case "refreshInterval":Z("refreshRate",e,c);break;default:this.Id(k,c,e)}b&&0<b.childElementCount&&e.appendChild(b);"wms"==d&&a&&
Z("getMapUrl",e,a);XA(e,{type:d});return e};
g.Id=function(a,b,c){if("string"===typeof b||"number"===typeof b||"boolean"===typeof b){if("string"===typeof b&&-1<a.search(/color/i)&&"colorize"!=a&&wv(b))try{b=xv(b).replace(/^#/,"0x")}catch(f){b="0xffffff"}else"string"===typeof b&&Ib(b,"url")&&(b=aW(b));Z(a,c,b)}else if(q(b)){var d=Jb(a,"s")?a.substring(0,a.length-1):a;a=Z(a,c);c=0;for(var e=b.length;c<e;c++)this.Id(d,b[c],a)}else if(DU(vU,a))try{e=b.sa(),Z(a,c,JSON.stringify(e))}catch(f){}else if(Aa(b)&&!Ba(b))for(d in a=Z(a,c),b)this.Id(d,b[d],
a)};
function dX(a,b,c){var d=null,e=DU(vU,b),f=c.textContent,h=zg(c);if(e)a=JSON.parse(f),e.restore(a),d=e;else if(-1<b.search(/color/i)&&"colorize"!=b&&0==h.length&&wv(f))d=vv(f,"0x");else if(h&&0<h.length)if(c.localName==h[0].localName+"s"||1<h.length&&h[1].localName==h[0].localName)for(d=[],e=0,b=h.length;e<b;e++)d.push(dX(a,h[e].localName,h[e]));else for(d={},e=0,b=h.length;e<b;e++)c=h[e],d[c.localName]=dX(a,c.localName,c);else Ez.test(f)?d=parseFloat(f):Dz.test(f)?d=parseInt(f,16):Cz.test(f)?d="true"==
f.toLowerCase():d=f;return d}
g.Wq=function(a){if(a){var b=zg(a);if(b){for(var c=String(a.getAttribute("type")),d=Gv(Ev.u(),c),e=0,f=b.length;e<f;e++){var h=b[e],k=h.localName;if(Ub(k,"FileSource"))return null;switch(k){case "basicFeatureStyle":var l=zg(h);h=0;for(k=l.length;h<k;h++){var m=l[h].textContent;switch(l[h].localName){case "pointColor":try{m=vv(m,"#"),d.color=ZG(m)}catch(u){d.color="rgba(255,255,255,1)"}break;case "pointOpacity":d.opacity=Mb(m)?Number(m)/255:1;break;case "pointSize":d.size=Mb(m)?Number(m)/2:3;break;
case "labelColumn":m="string"===typeof m?Nb(m):"";void 0==d.labels&&(d.labels=[tH()],d.labels[0].column=m,d.labels[0].showColumn=!1);var n=this.O(a);n&&-1<n.indexOf("MIST3D")&&(d.showLabels=!Lb(Yb(m)));break;case "labelColumns":var p=[];m=zg(l[h]);db(m,function(a){p.push({column:a.getAttribute("column"),showColumn:"true"==a.getAttribute("showColumn")?!0:!1})});d.labels=p;break;case "labelColor":try{m=vv(m,"#"),d.labelColor=ZG(m)}catch(u){d.labelColor=""}break;case "labelSize":m=Mb(m)?Number(m):0,
d.labelSize=0<m?Je(m,8,24):14}}break;case "contrast":h=Number(h.textContent);k=h/100+1;d.contrast=isNaN(h)?1:Je(k,0,2);break;case "dataProvider":d.provider=h.textContent;break;case "getMapUrl":d.url=h.textContent.replace(/[?]+$/,"");break;case "params":l=d.params||new af;m=zg(h);h=0;for(k=m.length;h<k;h++)l.set(m[h].localName,m[h].textContent);d.params=l;break;case "styles":l=[{data:"",label:"Default"}];if(m=zg(h)){h=0;for(k=m.length;h<k;h++){n=m[h].querySelector("name");var r=m[h].querySelector("title");
l.push({data:n&&n.textContent||"",label:r&&r.textContent||""})}d.styles=l}break;case "tags":d.tags=iF(h);break;case "title":d.title=h.textContent.replace(/\s*(Tiles|Features)\s*$/,"");break;case "showLabels":d.showLabels="true"==h.textContent;break;case "mappings":l=hB.u();m=[];n=zg(h);h=0;for(k=n.length;h<k;h++)r=l.ad(n[h]),m.push(r);d.mappings=m;break;case "animate":d[k]=dX(this,k,h);d.timeEnabled=d[k];break;case "timeEnabled":break;case "comment":d.commentChar=dX(this,k,h);break;case "dataRow":d.dataRow=
dX(this,k,h)+1;break;case "headerRow":h=dX(this,k,h);d.useHeader=0>h?!1:!0;d.headerRow=h+1;break;case "baseLayer":d.isBaseLayer=dX(this,k,h);break;case "refreshRate":d.refreshInterval=dX(this,k,h);break;default:d[k]=dX(this,k,h)}}d.type=c.toUpperCase();"typeOverride"in d&&(a=d.typeOverride,Hv(Ev.u(),a)&&(d.type=a,delete d.typeOverride));return d}}return null};function eX(){NU.call(this);this.description="Saves the current layers";this.g="dataLayers";this.title="Data Layers";this.j={type:"data"};this.layers=[]}w(eX,NU);var zra=E.V("os.state.v4.BaseLayerState");g=eX.prototype;g.isValid=function(a){try{var b=a.Sa();if(!b||!b.type||b.loadOnce||b.skipState)return!1;var c=b.type.toLowerCase();return"basemap"===c||"static"===c||"ref"===c?!1:!(Uw(b.url)||Uw(b.url2))&&!(Tw(b.url)||Tw(b.url2))}catch(d){}return!1};
g.load=function(a,b){a=OU(a);if(a instanceof Element)try{var c=a.querySelectorAll("layer");if(c){a=[];for(var d=0,e=c.length;d<e;d++){var f=this.Yq(c[d]);f&&a.push(f)}a.reverse();c=0;for(var h=a.length;c<h;c++){var k=a[c];k.id=MU(b,k.id);k.exportEnabled=!0;var l=V.Ja(b.substring(0,b.length-1));l&&(k.provider=l.S());var m=k.layer;if(!m){var n=k.params;if(n){var p=n.get("typename");q(p)?m=p[0]:m=p;if("string"===typeof m){var r=m.indexOf(":");-1<r&&(m=m.substring(r+1))}}}var u=k.style,v=k.styles;if(null!=
u&&null!=v){f=!1;for(var x=0,B=v.length;x<B;x++){if(v[x].data===u){f=!0;break}if(v[x].label===u){f=!0;k.style=v[x].data;break}}f||(k.style="")}m&&YV(m)&&ZV(k.title)}d=0;for(e=a.length;d<e;d++){var F=new tP(a[d]);F.Fa();F.dispose()}}}catch(D){E.error(zra,"Error loading layer in state "+b,D)}else E.error(zra,"Unable to load state content!")};
g.Yc=function(a,b){try{for(var c=this.layers,d=!1,e=0,f=c.length;e<f;e++){var h=c[e];if(this.isValid(h)){var k=this.Xq(h,a,void 0,{title:h.S()});k&&b.appendChild(k);var l=h.O();!d&&l instanceof vL&&(d=l.N)}var m=h.Sa();if(m&&m.skipState){var n="The '"+h.S()+"' layer is of a type which can not be saved in state files. That layer will not be included. The state file may look different from what you currently see!";At(zt.u(),n,ss)}}d&&(n="You have at least one of your layers locked. Locked layers are included in state files, but they <b>will not be locked</b> when the state is loaded. The state file may look different from what you currently see!",
At(zt.u(),n,ss));this.Kd(a,b)}catch(p){LU(this,p.message||"Unspecified error.")}};
g.Xq=function(a,b,c,d){var e=["locked","featureType","type"];if(!a.Sa())return null;var f=zc(a.Sa());null!=d&&Cc(f,d);a.sa(f);d=f.url;"string"!==typeof d||Uw(d)||(d=f.url=decodeURIComponent(aW(d)));var h=f.urls;h&&0<h.length&&!d&&(f.url=h[0]);a.Sa()?(h=a.Sa().type,a=Lb(Yb(h))?"":a.Sa().type):a="";null!=c&&(c=q(c)?c:[c],e=ub(e,c));c=0;for(h=e.length;c<h;c++)null!=f[e[c]]&&delete f[e[c]];e=mB("layer",b.ne);b="wms"!=a?mB("basicFeatureStyle",b.ne):null;for(var k in f)c=f[k],null!=c&&Ara(this,f,a,k,c,
b,e);b&&0<b.childElementCount&&e.appendChild(b);"wms"==a&&d&&Z("getMapUrl",e,d);XA(e,{type:a});return e};
function Ara(a,b,c,d,e,f,h){switch(d){case "params":b=Z("params",h);h="string"===typeof e?new af(e):e;a=h.Ub();f=0;for(e=a.length;f<e;f++){d=a[f];var k=String(h.get(d));"wms"==c?d=d.toUpperCase():"wfs"==c&&(d=d.toLowerCase());Z(d,b,k)}break;case "provider":Z("dataProvider",h,e);break;case "baseType":Z("provider",h,e);a.Jd(d,e,h);break;case "color":f?(c=zv(e),Z("pointColor",f,c)):a.Jd(d,e,h);break;case "contrast":"number"!==typeof e||isNaN(e)||Z("contrast",h,Math.round(100*(e-1)));break;case "alpha":case "opacity":f?
(e=null!=e?Number(e):1,c=Math.round(255*e),(e=f.querySelector("pointOpacity"))?e.textContent=c:Z("pointOpacity",f,c)):(e=null!=e?Number(e):1,Z("alpha",h,e));break;case "size":f&&(e=null!=e?Math.floor(e):3,Z("pointSize",f,2*e));break;case "styles":c=Z("styles",h);b=e;f=0;for(e=b.length;f<e;f++)b[f].data&&(h=Z("style",c),Z("name",h,b[f].data),Z("title",h,b[f].label));break;case "labels":c=e;if(f&&0<c.length&&!Lb(Yb(c[0].column))){var l=Z("labelColumns",f);db(c,function(a){Z("label",l,void 0,{column:a.column,
showColumn:a.showColumn})})}break;case "labelColor":f&&"string"===typeof e&&!Lb(Yb(e))&&(c=zv(e),Z("labelColor",f,c));break;case "labelSize":f&&"number"===typeof e&&Z("labelSize",f,e);break;case "showLabels":Z("showLabels",h,e);break;case "icon":c=Z("iconStyle",h);Z("iconDefaultPointSize",c,"4.0");Z("iconDefaultTo",c,"Icon");f=30;b.size&&"number"===typeof b.size&&(f=Math.floor(10*b.size));Z("iconScale",c,f);Z("defaultIconURL",c,e.path);Z("iconXOffset",c,0);Z("iconYOffset",c,0);Z("mixIconElementColor",
c,!0);break;case "mappings":if((f=b.mappings)&&0<f.length)for(c=Z("mappings",h),e=hB.u().rc(f).getElementsByTagName("mapping"),f=e.length;0<f;f--)c.appendChild(e[f-1]);break;case "commentChar":a.Jd("comment",e,h);a.Jd("quote",'"',h);break;case "dataRow":a.Jd("dataRow",e-1,h);break;case "headerRow":b.useHeader?a.Jd("headerRow",e-1,h):a.Jd("headerRow",-1,h);break;case "useHeader":case "parserConfig":break;case "animate":"timeEnabled"in b||a.Jd(d,e,h);break;case "timeEnabled":a.Jd("animate",e,h);break;
case "isBaseLayer":a.Jd("baseLayer",e,h);break;case "refreshInterval":Z("refreshRate",h,e);break;case "extent":h.appendChild(Bra(e));break;case "colorModel":c=Cra(e);h.appendChild(c);break;default:a.Jd(d,e,h)}}function Bra(a){var b=mB("extents");a=Zi(a,"EPSG:4326",N);KC("north","http://www.opengis.net/kml/2.2",b,a[3]);KC("south","http://www.opengis.net/kml/2.2",b,a[1]);KC("east","http://www.opengis.net/kml/2.2",b,a[2]);KC("west","http://www.opengis.net/kml/2.2",b,a[0]);return b}
function Dra(a){var b=[];b.push(parseFloat(QC(a.querySelector("west"),-179)));b.push(parseFloat(QC(a.querySelector("south"),-89)));b.push(parseFloat(QC(a.querySelector("east"),179)));b.push(parseFloat(QC(a.querySelector("north"),89)));return Zi(b,N,"EPSG:4326")}
g.Jd=function(a,b,c){if("string"===typeof b||"number"===typeof b||"boolean"===typeof b){if("string"===typeof b&&-1<a.search(/color/i)&&"colorize"!=a&&wv(b))try{b=zv(b)}catch(f){b="0xffffff"}else"string"===typeof b&&Ib(b,"url")&&(b=aW(b));"string"===typeof b&&"$$hashKey"==a||Z(a,c,b)}else if(q(b)){var d=Jb(a,"s")?a.substring(0,a.length-1):a;a=Z(a,c);c=0;for(var e=b.length;c<e;c++)this.Jd(d,b[c],a)}else if(DU(fX.u(),a))try{e=b.sa(),Z(a,c,JSON.stringify(e))}catch(f){}else if(Aa(b)&&!Ba(b))for(d in a=
Z(a,c),b)this.Jd(d,b[d],a)};
function gX(a,b,c){var d=null,e=DU(fX.u(),b),f=c.textContent,h=zg(c);if(e)a=JSON.parse(f),e.restore(a),d=e;else if(-1<b.search(/color/i)&&"colorize"!=b&&0==h.length&&wv(f))d=vv(f,"0x");else if(h&&0<h.length)if(c.localName==h[0].localName+"s"||1<h.length&&h[1].localName==h[0].localName)for(d=[],e=0,b=h.length;e<b;e++)d.push(gX(a,h[e].localName,h[e]));else for(d={},e=0,b=h.length;e<b;e++)c=h[e],d[c.localName]=gX(a,c.localName,c);else Ez.test(f)?d=parseFloat(f):Dz.test(f)?d=parseInt(f,16):Cz.test(f)?
d="true"==f.toLowerCase():d=f;return d}g.Yq=function(a){if(a){var b=zg(a);if(b){for(var c=String(a.getAttribute("type")),d=Gv(Ev.u(),c),e=0,f=b.length;e<f;e++){var h=b[e],k=h.localName;if(Ub(k,"FileSource"))return null;Era(this,a,h,k,d)}d.type=c.toUpperCase();"typeOverride"in d&&(a=d.typeOverride,Hv(Ev.u(),a)&&(d.type=a,delete d.typeOverride));return d}}return null};
function Era(a,b,c,d,e){switch(d){case "basicFeatureStyle":var f=zg(c);c=0;for(d=f.length;c<d;c++){var h=f[c].textContent;switch(f[c].localName){case "pointColor":try{h=vv(h,"#"),e.color=ZG(h)}catch(m){e.color="rgba(255,255,255,1)"}break;case "pointOpacity":e.opacity=Mb(h)?Number(h)/255:1;break;case "pointSize":e.size=Mb(h)?Number(h)/2:3;break;case "labelColumn":h="string"===typeof h?Nb(h):"";void 0==e.labels&&(e.labels=[tH()],e.labels[0].column=h,e.labels[0].showColumn=!1);var k=a.O(b);k&&-1<k.indexOf("MIST3D")&&
(e.showLabels=!Lb(Yb(h)));break;case "labelColumns":var l=[];h=zg(f[c]);db(h,function(a){l.push({column:a.getAttribute("column"),showColumn:"true"==a.getAttribute("showColumn")?!0:!1})});e.labels=l;break;case "labelColor":try{h=vv(h,"#"),e.labelColor=ZG(h)}catch(m){e.labelColor=""}break;case "labelSize":h=Mb(h)?Number(h):0,e.labelSize=0<h?Je(h,8,24):14}}break;case "contrast":c=Number(c.textContent);e.contrast=isNaN(c)?1:Je(c/100+1,0,2);break;case "dataProvider":e.provider=c.textContent;break;case "getMapUrl":e.url=
c.textContent.replace(/[?]+$/,"");break;case "params":a=e.params||new af;b=zg(c);c=0;for(d=b.length;c<d;c++)a.set(b[c].localName,b[c].textContent);e.params=a;break;case "styles":a=[{data:"",label:"Default"}];if(b=zg(c)){c=0;for(d=b.length;c<d;c++)f=b[c].querySelector("name"),h=b[c].querySelector("title"),a.push({data:f&&f.textContent||"",label:h&&h.textContent||""});e.styles=a}break;case "tags":e.tags=iF(c);break;case "title":e.title=c.textContent.replace(/\s*(Tiles|Features)\s*$/,"");break;case "showLabels":e.showLabels=
"true"==c.textContent;break;case "iconStyle":if(c=c.querySelector("defaultIconURL"))c=c.textContent,d=c.indexOf("maps.google.com"),-1<d&&(c="http://"+c.substring(d)),e.icon={path:c};break;case "mappings":a=hB.u();b=[];f=zg(c);c=0;for(d=f.length;c<d;c++)h=a.ad(f[c]),b.push(h);e.mappings=b;break;case "animate":e[d]=gX(a,d,c);e.timeEnabled=e[d];break;case "timeEnabled":break;case "comment":e.commentChar=gX(a,d,c);break;case "dataRow":e.dataRow=gX(a,d,c)+1;break;case "headerRow":c=gX(a,d,c);e.useHeader=
0>c?!1:!0;e.headerRow=c+1;break;case "baseLayer":e.isBaseLayer=gX(a,d,c);break;case "refreshRate":e.refreshInterval=gX(a,d,c);break;case "extents":e.extent=Dra(c);break;case "colorModel":c=Fra(c);e.colorModel=c;break;default:e[d]=gX(a,d,c)}}
function Fra(a){var b={colorMethod:0,binMethod:{},manualColors:{}};b.colorMethod=parseInt(QC(a.querySelector("colorMethod"),0),10);var c=a.querySelector("binMethod");if(c){var d=c.querySelector("field");d&&(d=aV(d),b.binMethod.field=d||"");if(d=c.querySelector("type"))d=aV(d),b.binMethod.type=d||"";if(d=c.querySelector("width"))d=XU(d),null!=d&&(b.binMethod.width=d);if(c=c.querySelector("offset"))c=XU(c),null!=c&&(b.binMethod.offset=c)}a=a.querySelector("manualColors").querySelectorAll("pair");for(c=
0;c<a.length;c++){d=a[c];var e=d.querySelector("name");d=d.querySelector("value");e=QC(e,null);d=QC(d,null);Lb(Yb(e))||(b.manualColors[e]=d)}return b}
function Cra(a){var b=mB("colorModel");if(a){Z("colorMethod",b,a.colorMethod);var c=a.binMethod;if(c){var d=Z("binMethod",b);Z("field",d,c.field);Z("type",d,c.type);null!=c.width&&Z("width",d,c.width);null!=c.offset&&Z("offset",d,c.offset)}c=Z("manualColors",b);for(var e in a.manualColors)a.manualColors.hasOwnProperty(e)&&(d=Z("pair",c),Z("name",d,e),Z("value",d,a.manualColors[e]))}return b};function hX(){eX.call(this)}w(hX,eX);hX.prototype.remove=function(a){for(var b=pw(T.u()),c=b.length;c--;){var d=b[c];if(d)try{var e=d.D();e&&Ib(e,a)&&T.u().pc(d)}catch(f){}}};hX.prototype.Yc=function(a,b){this.layers=pw(T.u());hX.C.Yc.call(this,a,b)};function iX(){NU.call(this);this.description="Saves the current query areas";this.priority=80;this.g="queryAreas";this.title="Query Areas"}w(iX,NU);var Gra=E.V("os.state.v4.QueryArea"),jX={};
iX.prototype.load=function(a,b,c){a=OU(a);if(a instanceof Element)try{var d=a.querySelectorAll("queryArea");if(d){jX[b]=[];var e=[],f=[],h=a.parentNode,k=h?h.querySelector("queryEntries"):null;a=0;for(var l=d.length;a<l;a++){var m=RV(d[a]);if(m){iu(m);var n=new ek(m),p=d[a].getAttribute("id")||$b(),r=d[a].getAttribute("title"),u=QC(d[a].querySelector("description"),""),v=QC(d[a].querySelector("tags"),"");p&&(n.ga(MU(b,p)),n.set("temp",!0),n.set("title",r?r:"Area "+(a+1)),n.set("tags",v),n.set("description",
u),n.set("_sourceName",c));jX[b].push(n);e.push(n);if(!k||!k.querySelector('queryEntry[areaId="'+p+'"]')){var x=d[a].querySelectorAll("layer");p=n.D();if(x&&x.length){h=0;for(var B=x.length;h<B;h++){var F={layerId:MU(b,x[h].textContent),areaId:p,filterId:"*",includeArea:!0,filterGroup:!0,temp:!0};f.push(F)}}else F={layerId:"*",areaId:p,filterId:"*",includeArea:!0,filterGroup:!0,temp:!0},f.push(F)}}}SE(UE,e,!0);dF(WE,f)}}catch(D){E.error(Gra,"There was an error loading a query area from state file "+
b,D)}else E.error(Gra,"Unable to load state content!")};iX.prototype.remove=function(a){var b=WE,c=UE;if(a in jX){for(var d=jX[a],e=[],f=[],h=0,k=d.length;h<k;h++){for(var l=d[h],m=b.getEntries(null,l.D()),n=0,p=m.length;n<p;n++)m[n].temp&&f.push(m[n]);l.get("temp")&&e.push(l)}f.length&&XE(b,f);db(e,c.remove,c);delete jX[a]}};
iX.prototype.Yc=function(a,b){try{for(var c=UE,d=WO(),e={},f=0,h=d.length;f<h;f++){var k=d[f],l=k.areaId;if(l&&"*"!==l&&k.includeArea){var m=k.layerId;l in e||(e[l]={});"*"!==m&&(e[l][m]=!0)}}for(l in e){var n=c.get(l);if(n){var p=n.X();if(p){p=p.clone().toLonLat();var r=TV(p,"KML");if(r){var u=VA(r),v=Z("queryArea",b,void 0,{id:n.D(),title:n.get("title")});Z("description",v,n.get("description"));Z("tags",v,n.get("tags"));v.appendChild(Ag(u));var x=e[l];if(x)for(m in x)Z("layer",v,m)}}}}this.Kd(a,
b)}catch(B){LU(this,B.message||"Unspecified error.")}};function kX(){NU.call(this);this.description="Saves the current timeline";this.priority=100;this.g="time";this.title="Time"}w(kX,NU);var lX=E.V("os.state.v4.TimeState");
kX.prototype.load=function(a,b){a=OU(a);if(a instanceof Element)try{if(Hra(a))this.l(a,b);else{var c=a.querySelector("animation");C.dispatchEvent(new jE("toggleUI","timeline",null!=c&&0<c.childElementCount));var d=new ne(Hra.bind(void 0,a)),e=this.l.bind(this,a,b);d.qh=e;d.Ri=e;d.start(100,5E3)}}catch(f){E.error(lX,"Failed to parse time state! Stack: "+f.stack)}else E.error(lX,"Unable to load state content!")};
function Hra(a){a=a.querySelector("animation");a=null!=a&&0<a.childElementCount;var b=null!=ng("js-timeline");return a===b}
kX.prototype.l=function(a){try{var b=a.querySelector("animation"),c=null!=b&&0<b.childElementCount,d=hw.u(),e=null,f=a.querySelectorAll("interval");if(0<f.length){for(var h=new $K,k=0;k<f.length;k+=1)h.add(mX(f[k].textContent));e=cL(h)}var l=e;var m=a.querySelector("current"),n=m?m.textContent:void 0;var p=n?mX(n):null;!l&&p&&(l=new WK(p.start,p.end));if(l){var r=a.querySelector("duration");if(r)var u=r.textContent;else{var v=l.end-l.start;u=24192E5<=v?"month":6048E5==v?"week":864E5==v?"day":"custom"}(e=
u||void 0)&&NM(d,e);var x=Ira(a,"playIntervals"),B=new $K;B.add(l);d.ae(l);c&&(JM(d,e),MM(d,l.end-l.start));aL(B,x)?WM(d):dN(d,x);eN(d,Ira(a,"heldIntervals"))}p&&(PM(d,p.end-p.start),d.Ad(p.end));l=0;var F=a.querySelector("millisPerFrame"),D=F?Number(F.textContent):0;!isNaN(D)&&0<D&&(l=Math.round(1E3/D));var S=isNaN(l)||0===l?null:l;null!==S&&XM(d,S);var ia=a.querySelector("advance");var ea=ia?Pqa(ia.textContent):null;null!==ea&&0!==ea&&QM(d,ea);var ca=angular.element(".js-date-control").scope();
ca&&ca.dateControl.update();if(c){var Y=ng("js-timeline");Y&&QW(angular.element(Y).scope().timelineCtrl,!0);var ja=b.querySelector("playState");ja&&"Play"==ja.textContent?d.play():d.ud()&&d.stop()}}catch(Ga){E.error(lX,"Failed to parse time state! Stack: "+Ga.stack)}};kX.prototype.remove=function(){};
kX.prototype.Yc=function(a,b){try{var c=hw.u(),d=new WK(c.g-c.cc(),c.g),e=Qqa(c.A);Z("interval",b,nX(cL(c.j)));Z("current",b,nX(d));Z("advance",b,e);if(!c.l.isEmpty()){var f=Z("playIntervals",b),h=Qe(c.l);for(d=0;d<h.length;d+=1){var k=h[d];var l=nX(k);Z("interval",f,l)}}!c.s.isEmpty()&&b.appendChild(Jra(Qe(c.s)));if(null!=ng("js-timeline")){var m=Math.floor(Math.round(1E3/c.U)),n=c.ud()?"Play":"Stop",p=Z("animation",b);Z("millisPerFrame",p,m);Z("playState",p,n)}Z("duration",b,c.L);this.Kd(a,b)}catch(r){LU(this,
r.message||"Unspecified error.")}};function Jra(a){for(var b=mB("heldIntervals"),c,d,e=0;e<a.length;e+=1)d=mB("held"),b.appendChild(d),c=a[e],c=nX(c),Z("interval",d,c);return b}function nX(a){var b=new Date(a.end);return pC(new Date(a.start),"YYYY-MM-DDTHH:mm:ss[Z]")+"/"+pC(b,"YYYY-MM-DDTHH:mm:ss[Z]")}function mX(a){var b=a.split(/\//);a=EC(b[0],["YYYY-MM-DDTHH:mm:ss[Z]"]);b=EC(b[1],["YYYY-MM-DDTHH:mm:ss[Z]"]);return new WK(a.valueOf(),b.valueOf())}
function Ira(a,b){var c=new $K;if(a&&(a=a.querySelector(b)))for(a=a.querySelectorAll("interval"),b=0;b<a.length;b+=1)c.add(mX(a[b].textContent));return c};function oX(){NU.call(this);this.description="Saves the current map view/position";this.priority=100;this.g=Kra;this.title="Current View";this.l={center:[0,0],altitude:1E6,heading:0,roll:0,tilt:0};this.projection=Lra}w(oX,NU);var Lra="Equirectangular",Kra="map";oX.prototype.remove=function(){};oX.prototype.xn=function(a){this.projection=a};oX.prototype.Wa=function(){return this.projection};
oX.prototype.Yc=function(a,b){try{var c=KC("kml:Camera","http://www.opengis.net/kml/2.2",b);c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:kml","http://www.opengis.net/kml/2.2");Z("projection",b,this.Wa());var d=this.l;KC("kml:longitude","http://www.opengis.net/kml/2.2",c,d.center[0]);KC("kml:latitude","http://www.opengis.net/kml/2.2",c,d.center[1]);KC("kml:altitude","http://www.opengis.net/kml/2.2",c,d.altitude);KC("kml:heading","http://www.opengis.net/kml/2.2",c,d.heading);KC("kml:tilt",
"http://www.opengis.net/kml/2.2",c,d.tilt);KC("kml:roll","http://www.opengis.net/kml/2.2",c,180<d.roll?d.roll-360:d.roll);KC("kml:altitudeMode","http://www.opengis.net/kml/2.2",c,"clampToGround");this.Kd(a,b)}catch(e){LU(this,e.message||"Unspecified error.")}};function pX(){oX.call(this)}w(pX,oX);var Mra=E.V("os.state.v4.ViewState");
pX.prototype.load=function(a){a=OU(a);if(a instanceof Element)try{var b=a.querySelector("projection");if(b)var c=b.textContent;var d=T.u();c="Perspective"==c?"3d":"2d";var e=d.Qa();("2d"==c&&e||"3d"==c&&!e)&&Sy(d,!e);var f=Number(a.querySelector("roll").textContent);TP(d,{center:[Number(a.querySelector("longitude").textContent),Number(a.querySelector("latitude").textContent)],altitude:Number(a.querySelector("altitude").textContent),heading:Number(a.querySelector("heading").textContent),roll:180<f?
f-360:f,tilt:Je(Number(a.querySelector("tilt").textContent),0,90)})}catch(h){E.error(Mra,"Error loading viewstate:",h)}else E.error(Mra,"Unable to load state content!")};pX.prototype.Yc=function(a,b){var c=T.u();this.xn(c.Qa()?"Perspective":Lra);this.l=Oz(c);pX.C.Yc.call(this,a,b)};function qX(){SI.call(this)}w(qX,lU);wa(qX);qX.prototype.bc=function(a){this.ga("state");this.Da("State Files");qX.C.bc.call(this,a);this.jm=!1};qX.prototype.load=function(a){qX.C.load.call(this,a);a=pE(V,this.D()+"#");for(var b=0,c=a.length;b<c;b++)a[b].Xh()};qX.prototype.Je=function(){return"Contains all state files that have been imported into "+ws("the application")};Fw("text/xml; subtype=STATE",dS(/^state$/i,/\/state\//i),0,"text/xml");function rX(){CU.call(this);this.contentType="text/xml";this.log=Nra;this.o="http://www.bit-sys.com/mist/state/";var a=KQ.u();NQ(a,ws("Application")+" state files.");OQ(a,"text/xml; subtype=STATE",new yU)}w(rX,CU);var Nra=E.V("os.ui.state.XMLStateManager");rX.prototype.yr=function(a){rX.C.yr.call(this,a);this.o="http://www.bit-sys.com/mist/state/"+a};
rX.prototype.il=function(a){if("string"===typeof a){var b=VA(a);b&&(a=b)}b=[];if(a instanceof Document&&Ag(a)instanceof Element){var c=Ag(a);a=c.namespaceURI;a=a.substring(a.lastIndexOf("/")+1);if(a in this.j&&(a=this.j[a],c=zg(c)))for(var d=c.length;d--;){var e=Roa(c[d]);e&&e in a&&(e=new a[e],e.eb(!0),b.push(e))}}b.sort(Toa);return b};
rX.prototype.Jp=function(a,b,c,d){if(a&&b){if("string"===typeof a){var e=VA(a);e&&(a=e)}if(a instanceof Document&&Ag(a)instanceof Element){b.sort(Soa);a=zg(Ag(a));e=0;for(var f=b.length;e<f;e++){var h=b[e];if(h.mc())for(var k=0,l=a.length;k<l;k++)if(Roa(a[k])==h.toString()){h.load(a[k],c,d);break}}}}};function fX(){rX.call(this);this.log=sX;this.yr("v4");var a=V;ZI(a,new RI("state",qX,"State Files","Contains all state files"));$I(a,"state",JU);EU(this,"v2",UV);EU(this,"v2",WV);EU(this,"v2",bW);EU(this,"v2",eW);EU(this,"v2",gW);EU(this,"v2",YW);EU(this,"v2",bX);EU(this,"v3",UV);EU(this,"v3",WV);EU(this,"v3",cX);EU(this,"v3",eW);EU(this,"v3",gW);EU(this,"v3",YW);EU(this,"v3",bX);EU(this,"v4",UV);EU(this,"v4",WV);EU(this,"v4",hX);EU(this,"v4",iX);EU(this,"v4",gW);EU(this,"v4",kX);EU(this,"v4",pX);
this.l={};this.l.v2={bk:[QU],Lk:[]};this.l.v3={bk:[QU],Lk:[]};this.l.v4={bk:[QU],Lk:[]}}w(fX,rX);wa(fX);var sX=E.V("os.state.StateManager");g=fX.prototype;g.Bt=function(){pE(V,"state#").forEach(function(a){a.setActive(!1)});this.dispatchEvent("clear")};g.Ay=function(a){for(var b=pE(V),c=0,d=b.length;c<d;c++)if(b[c].S()==a)return!0;return!1};
g.xr=function(a,b){for(var c=V,d=qX.u(),e=null,f=pE(c),h=0,k=f.length;h<k;h++){var l=a.Ka();if(f[h]instanceof JU&&l&&f[h].yh(l)){e=f[h];break}}e||(e=new JU,e.Vc("rgba(255,255,255,1)"),e.Lb(a.Ka()),e.ga(TI(d)),e.Cc(d.ba()),e.od=Ha());a=e;a.Ta(b.title);a.fb(b.description);a.vb(b.be?b.be.split(/\s*,\s*/):null);if(b.g){f=[];h=0;for(k=b.g.length;h<k;h++)l=b.g[h],l.mc()&&f.push(l.toString());0<f.length&&(a.l=f,a.o.loadItems=f)}bJ(c,e);mU(d,e,b.load)};
function Ora(a,b){if(b&&b instanceof Document&&Ag(b)instanceof Element){b=Ag(b);var c=b.namespaceURI;if(c){var d=c.lastIndexOf("/");0>d?(d=a.g,E.ib(sX,"Could not extract the version number from the xmlns: "+c+". Using the default: "+d)):(d=c.substr(d+1),d||(d=a.g,E.ib(sX,"Could not extract the version number from the xmlns: "+c+". Using the default: "+d)))}else d=a.g;if(a=a.l[d])for(c=0,d=a.bk.length;c<d;c++)a.bk[c](b)}}g.il=function(a){Ora(this,a);return fX.C.il.call(this,a)};
g.Jp=function(a,b,c,d){Ora(this,a);fX.C.Jp.call(this,a,b,c,d)};g.yq=function(a){var b=Ag(a.ne);if(b)for(var c=this.l[this.g],d=0,e=c.Lk.length;d<e;d++)c.Lk[d](b);fX.C.yq.call(this,a)};function tX(a){A.call(this);this.L=[];void 0!==a&&this.Qk(a);this.s=null;this.g=[];this.A=this.o=0}w(tX,A);tX.prototype.Qk=function(a){for(var b=0,c=a.length;b<c;b++)a[b]+=(-1<a[b].indexOf("?")?"&":"?")+"_cd="+Ha();this.L=a};tX.prototype.B=function(a){a=a.target;a.removeAllListeners();4==mx(a)&&(0===a.Ie()?this.o++:this.A++);this.o+this.A==this.g.length&&(this.dispatchEvent(new z(0<this.o/this.g.length?"error":"success")),this.g.length=0)};
tX.prototype.I=function(a){a.target.removeAllListeners();this.l=new dx;this.l.H("timeout",this.G,!1,this);this.l.H("success",this.G,!1,this);this.l.H("error",this.G,!1,this);this.l.B=!0;fx(this.l,this.s,"POST","<fake></fake>",{Accept:"application/json","Content-Type":"text/xml"})};tX.prototype.G=function(a){a=a.target;a.removeAllListeners();4==mx(a)&&(0===a.Ie()?this.dispatchEvent(new z("postError")):this.dispatchEvent(new z("postSuccess")))};function uX(){this.g=window.document||{cookie:""}}g=uX.prototype;g.isEnabled=function(){return navigator.cookieEnabled};g.set=function(a,b,c,d,e,f){if(/[;=\s]/.test(a))throw Error('Invalid cookie name "'+a+'"');if(/[;\r\n]/.test(b))throw Error('Invalid cookie value "'+b+'"');ra(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(Ha()+1E3*c)).toUTCString();this.g.cookie=a+"="+b+e+d+c+f};
g.get=function(a,b){for(var c=a+"=",d=(this.g.cookie||"").split(";"),e=0,f;e<d.length;e++){f=Nb(d[e]);if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};g.remove=function(a,b,c){var d=ra(this.get(a));this.set(a,"",0,b,c);return d};g.Ub=function(){return vX(this).keys};g.Jc=function(){return vX(this).values};g.isEmpty=function(){return!this.g.cookie};g.clear=function(){for(var a=vX(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};
function vX(a){a=(a.g.cookie||"").split(";");for(var b=[],c=[],d,e,f=0;f<a.length;f++)e=Nb(a[f]),d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,values:c}};function wX(a,b){this.v=a;this.K=b;this.j=Dt.u();this.j.ng(this);this.server=location.host;a=new uX;var c=O.get(["consent"]);c&&c.text&&(this.refresh=c.refresh,this.text=c.text,this.g=new je(900*this.refresh),this.g.H("tick",this.cr,!1,this),a&&!a.get("consent")?(Pra(b,{backdrop:"static",focus:!0}),$("body").addClass("c-consent")):(this.g.start(),this.cr()));this.v.$on("$destroy",this.destroy.bind(this))}wX.$inject=["$scope","$element"];g=wX.prototype;
g.destroy=function(){$("body").removeClass("c-consent");this.Ma=this.K=this.v=null};g.Eh=function(){return["consent"]};g.Xc=function(){this.K.modal("hide");this.g.start()};g.cr=function(){(new uX).set("consent","true",this.refresh,"/",null,!1)};function Qra(){var a=O.get(["consent"]),b=new uX;a&&a.text&&!b.get("consent")&&Rra("<consent></consent>")}g.FM=function(){this.cr();this.K.modal("hide");this.g.start();Kt(this.j,"consent","")};wX.prototype.saveCookie=wX.prototype.FM;
W.directive("consent",function(){return{replace:!0,restrict:"E",templateUrl:"v1542394219/views/consent.html",controller:wX,controllerAs:"consentCtrl"}});function xX(a){z.call(this,a)}w(xX,z);function DR(){A.call(this);this.log=Sra;this.j={};this.l=null;this.g=new jz}w(DR,A);wa(DR);var Sra=E.V("os.ui.config.SettingsManager");
function yX(a,b){var c=b.D();if(c in a.j)a.j[c]=b;else{a.j[c]=b;try{b.g||(b.g=new rz,sz(b.g,b),b.g.collapsed=!1);var d=b.g;if(!a.g.find("label",d.ba())){var e=a.g,f=b.j;c=0;for(var h=f.length;c<h;c++){var k=f[c],l=a.g.find("label",k);if(!l){var m=new rz,n=new tz;n.wc("fa fa-folder");n.Da(k);sz(m,n);m.collapsed=!1;e.R(m);l=m}e=l}e.R(d)}}catch(p){}a.dispatchEvent(new xX("settingsmanager:pluginadded",b))}}
DR.prototype.na=function(){var a=this.g.na();return a?(a=a.slice(),Ab(a,function(a,c){return Bb(a.ba(),c.ba())}),a):[]};DR.prototype.nj=function(a){this.l=a};function CR(a,b){if(b=a.j[b]){var c=b.ba();if(c=a.g.find("label",c))a.l=c,a.dispatchEvent(new xX("settingsmanager:selectedchange",b))}};var Tra={},zX=void 0,AX={};function BX(a,b,c,d){if(zX&&!AX[a]){b.id=a;AX[a]=d||b;var e;a="openWindow."+a;c=c?"0:Major":"1:Minor";(c=zX.Ha().find(c))&&(e=c.R({label:b.label,eventType:a,tooltip:b.description||"",da:['<i class="fa fa-fw '+b.icon+'"></i>'],ig:b.shortcut,qa:b.metricKey,ya:CX}));delete b.shortcut;return e}}function CX(a){a="string"===typeof a?a:a.type.split(/\./)[1];if(IE(a))return HE(a),!0;if(a=AX[a]){if(Ba(a))a();else{a=zc(a);var b=a.html;delete a.html;FE(a,b)}return!0}return!1}
function Ura(a){CR(DR.u(),a);CX("settings")};function DX(a,b){y.call(this);this.scope=a;this.element=b;this.qa=this.g=this.menu=void 0;this.l="left bottom";this.o="left top+3";a.$on("$destroy",this.dispose.bind(this))}w(DX,y);DX.$inject=["$scope","$element"];DX.prototype.J=function(){DX.C.J.call(this);this.element=this.scope=null};
DX.prototype.Dh=function(){this.menu&&(this.scope.menu||this.element.hasClass("active")||this.element.hasClass("active-remove")||this.element.hasClass("active-remove-active")?(this.scope.menu=!1,this.element.blur(),this.menu.close()):(this.scope.menu=!0,C.Ra(KF,this.B,!1,this),this.menu.open(void 0,{my:this.o,at:this.l,of:this.element||"#js-window__container",within:$(document.firstElementChild)})));X(this.scope)};DX.prototype.openMenu=DX.prototype.Dh;
DX.prototype.B=function(){this.scope.menu=!1;this.element.blur()};DX.prototype.toggle=function(){this.g&&!CX(this.g)&&C.dispatchEvent(new jE("toggleUI",this.g,null,null,this.qa))};DX.prototype.toggle=DX.prototype.toggle;DX.prototype.Yj=function(a){if(a=a||this.g){var b=angular.element("#js-window__container").scope();return!!IE(a)||b.mainCtrl&&b.mainCtrl[a]}return!1};DX.prototype.isWindowActive=DX.prototype.Yj;function Rra(a){var b=Uy.get("$compile"),c=Uy.get("$rootScope").$new();nh(c,void 0);var d=$("#js-window__container");d.append(b(a)(c)[0]);d.scope()&&d.scope().$on("$destroy",function(){$("body > .modal-backdrop").remove()})}function Pra(a,b){a.modal(b).on("hidden.bs.modal",function(){setTimeout(function(){a.scope().$destroy();a.remove()},1500)})};W.directive("modalAutoSize",[function(){return{restrict:"C",link:Vra}}]);function Vra(a,b){new EX(a,b)}function EX(a,b){b=this.K=b;if(b.hasClass("modal")){var c=new uR(this.j,500,this);b.bind("DOMSubtreeModified",c.kf.bind(c));a.$on("$destroy",this.l.bind(this));this.g=new Tg;this.g.H("resize",this.j,!1,this)}}
EX.prototype.j=function(){if(this.K){var a=this.K.find(".modal-header"),b=this.K.find(".modal-body"),c=this.K.find(".modal-footer"),d=$(window).height()||0,e=this.K.hasClass("modal-huge")?12:Math.floor(.1*d);a=a.outerHeight()||0;c=c.outerHeight()||0;var f=(parseInt($("body").css("margin-top"),10)||0)+(parseInt($("body").css("padding-top"),10)||0);b.css({"max-height":d-(f+2*e+c+a)+"px"})}};EX.prototype.l=function(){this.g&&(this.g.dispose(),this.g=null);this.K=null};W.directive("aboutModal",[function(){return{replace:!0,restrict:"E",templateUrl:"v1542394219/views/modal/aboutmodal.html",controller:Wra,controllerAs:"aboutModalCtrl"}}]);function Wra(a,b){a.path="v1542394219/";a["os.uiPath"]="v1542394219/";this.application=ws();this.logoPath=O.get("about.logoPath","images/logo.png");this.userAgent=navigator.userAgent;this.appVendors=O.get(["about","appVendors"],[]);this.vendors=O.get(["about","vendors"],[]);Pra(b)}Wra.$inject=["$scope","$element"];function Xra(){var a=Pt.u();try{var b=(new Date(a.j.user.opensphere.reset.last)).toISOString().replace(/T/," ").replace(/(.000)/," ")}catch(c){b="Never!"}cK({confirm:st,prompt:"This action will clear all locally saved application settings and <b>reload the current page.</b> The current state of your application will be lost, so be sure you're at a good stopping point.<br><br>Last reset: "+b+"<br><br><b>Are you sure you want to clear your settings and reload?</b>",yesText:"Clear and Reload",yesButtonClass:"btn-danger",
windowOptions:{label:"Reset Settings",icon:"fa fa-refresh",x:"center",y:300,width:400,height:"auto",modal:!0,"no-scroll":!0,"disable-drag":!0,headerClass:"bg-danger u-bg-danger-text"}})}var Yra={eventType:"displayClearLocalStorage",label:"Reset Settings",tooltip:"Clears your browser's local storage",da:['<i class="fa fa-fw fa-refresh"></i>'],sort:1E3};var FX=new IF(new HF({type:"root",children:[]}));W.directive("help",[function(){return{restrict:"E",replace:!0,scope:!0,controller:GX,controllerAs:"ctrl",template:'<button class="btn btn-info dropdown-toggle" title="Support" ng-click="ctrl.openMenu()" ng-right-click="ctrl.openMenu()" ng-class="{active: menu}"><i class="fa fa-question-circle" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">Support</span></button>'}}]);
function GX(a,b){DX.call(this,a,b);this.menu=FX;this.log=Zra;$ra(this)}w(GX,DX);GX.$inject=["$scope","$element"];var Zra=E.V("os.ui.help.HelpCtrl");GX.prototype.J=function(){GX.C.J.call(this);this.menu.removeAllListeners();this.menu=void 0};
function $ra(a){var b=ws("the application"),c=a.menu.Ha();O.get("helpVideoUrl")&&(c.R({eventType:"help_video",label:"Help Videos",tooltip:"View help videos for "+b,da:['<i class="fa fa-fw fa-question-circle"></i>'],sort:20}),a.menu.H("help_video",a.j,!1,a));c.R({type:"separator",sort:100});c.R({eventType:"about",label:"About",tooltip:"About "+b,da:['<i class="fa fa-fw fa-info-circle"></i>'],sort:101});a.menu.H("about",a.j,!1,a);uc(JP.u().g)||(c.R({eventType:"controlsHelp",label:"Controls",tooltip:"Keyboard and mouse controls",
da:['<i class="fa fa-fw fa-keyboard-o"></i>'],sort:110}),a.menu.H("controlsHelp",a.j,!1,a));var d=O.get("helpVideoCardUrl");d&&(c.R({eventType:"videoCard",label:"Graphics Card Help",tooltip:"Troubleshoot 3D view",da:['<i class="fa fa-fw fa-desktop"></i>'],sort:120}),a.menu.H("videoCard",function(){window.open(d)},!1,a));O.get("onboarding")&&!0!==O.get("onboarding").hideTips&&(c.R({eventType:"showTips",label:"Show Tips",tooltip:"Reset help tips, and show the initial set of tips",da:['<i class="fa fa-fw fa-question"></i>'],
sort:130}),a.menu.H("showTips",a.j,!1,a));c.R({eventType:"viewAlerts",label:"View Alerts",tooltip:"Display the alert log",da:['<i class="fa fa-fw fa-bell"></i>'],sort:140});C.H("viewAlerts",asa);a.menu.H("viewAlerts",a.j,!1,a);c.R({eventType:"viewLog",label:"View Log",tooltip:"Display the application log",da:['<i class="fa fa-fw fa-terminal"></i>'],sort:150});a.menu.H("viewLog",a.j,!1,a);c.R(Yra);a.menu.H("displayClearLocalStorage",function(){Xra()})}
GX.prototype.j=function(a){switch(a.type){case "about":Rra("<about-modal></about-modal>");break;case "showTips":O.set("onboarding",{showOnboarding:!0});if(a=O.get("initialOnboarding"))a=yE+a,zE(vE.u(),a);break;case "viewLog":this.scope.$emit("viewLog");break;case "viewAlerts":this.scope.$emit("viewAlerts");break;case "help_video":a=O.get("helpVideoUrl");window.open(a);break;case "controlsHelp":IE("controlsHelp")?HE("controlsHelp"):FE({id:"controlsHelp",x:"center",y:"center",label:"Controls","show-close":!0,
"no-scroll":!1,"min-width":850,"min-height":750,"max-width":900,"max-height":800,modal:!1,width:850,height:750,icon:"fa fa-keyboard-o"},"controlshelp")}};function bsa(a){a&&!CX(a)&&C.dispatchEvent(new jE("toggleUI",a))}function asa(){bsa("alerts")};function csa(a){z.call(this,a)}w(csa,z);function HX(a,b,c,d){this.l=a;this.A=b;this.B=c;this.j=null;this.I=d||"No results";this.o=this.g=this.s=null;this.G={}}w(HX,y);g=HX.prototype;g.J=function(){HX.C.J.call(this);this.g&&(this.g.init(),this.g=null);this.s&&(this.s.init(),this.s=null)};function dsa(a){var b={};a.A&&a.B&&a.B[a.A]&&esa(b,a.B[a.A]);zs(a.G,b,!0);return b}
function IX(a,b,c){var d=dsa(a);b||(b="*");b='"'+b+'"';var e=[];a.g=c;if(a.s)for(var f=a.B[a.A],h=0,k=f.length;h<k;h++)f[h].dispose();b=fsa(b);c||".*"!=b||a.j?(b=new RegExp(b,"gi"),JX(a,e),c&&c.init(),a.o={},a.cs(b,e,a.l),a.Bo(a.g,e),a.o=null,c&&c.init()):a.El(e);a.Hz(e);gsa(d,e,a.G);a.B[a.A]=e;a.s=c}function hsa(a,b){return Bb(a.D(),b.D())}
function fsa(a){var b=".*";a=a.toLowerCase();if("*"!=a&&'"*"'!=a){b=a;var c=0,d=!1;a=[];if(b){b=b.trim();for(var e=0,f=b.length;e<f;e++){var h=b.charAt(e);'"'==h?(d&&e>c&&a.push(b.substring(c,e).trim()),d=!d,c=e+1):h.match(/\s/)&&!d&&(e>c&&a.push(b.substring(c,e).trim()),c=e+1)}e>c&&a.push(b.substring(c,e).trim())}b=[];c=0;for(d=a.length;c<d;c++)2<a[c].length&&b.push(Wb(a[c]));0===b.length&&b.push(Wb(a[0]));b="("+b.join("|")+")"}return b}
function KX(a,b){var c=Qb(a.ba(),b.ba());0===c&&(c=Bb(a.D(),b.D()));return c}g.Hz=function(a){if(this.g){a.sort(hsa);for(var b=0,c=a.length;b<c;b++){var d=a[b].na();d&&d.sort(KX)}}else a.sort(KX)};g.El=function(a){if(0<this.l.length)for(var b=0,c=this.l.length;b<c;b++)a.push(this.l[b]);else JX(this,a)};function JX(a,b){var c=new jz;c.ga("noResults");c.Da(a.I);pz(c,!1);b.push(c)}
g.cs=function(a,b,c){if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f&&!f.na()){var h=isa(f);f.getParent()&&(h+=isa(f.getParent()));if(h){if(a.test(h)){if(f.D()in this.o)continue;if(!this.j||this.j(f))0<b.length&&"noResults"==b[0].D()&&b.splice(0,1),this.g?jsa(this.g,f,b):b.push(f)}a.lastIndex=0}f.D()in this.o||(!this.g||this.j&&!this.j(f)||this.g.count(f),this.o[f.D()]=!0)}else this.cs(a,b,f.na())}};function isa(a){var b;a&&(a.je?b=a.je():a.na()||(b=a.ba()));return b||""}g.Bo=function(){};
function esa(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c];e.qf&&(a[e.D()]=!e.collapsed,(e=e.na())&&esa(a,e))}}function gsa(a,b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d],h=f.D();h in a&&(f.collapsed=!a[h],delete c[h]);(f=f.na())&&gsa(a,f,c)}};function LX(){A.call(this);this.log=ksa;this.o={};this.l=null;this.j=new jz;this.g=null}w(LX,A);wa(LX);var ksa=E.V("os.ui.metrics.MetricsManager");function MX(a,b){var c=b.D();if(!(c in a.o)){a.o[c]=b;try{var d=xQ(b);a.g.R(d);a.g.na().sort(KX)}catch(e){}a.dispatchEvent(new csa("metricsmanager:pluginadded",b))}}LX.prototype.nj=function(a){this.l=a};function NX(){this.l="";this.s=0;this.g=this.j=this.o=this.A=null;"undefined"!==typeof document.hidden?this.g="hidden":"undefined"!==typeof document.mozHidden?this.g="mozHidden":"undefined"!==typeof document.webkitHidden?this.g="webkitHidden":"undefined"!==typeof document.msHidden&&(this.g="msHidden")}wa(NX);NX.prototype.Mj=function(){var a=null;null!==this.g&&(a=document[this.g]);return a};
function lsa(){var a=NX.u();a.s++;document.title="("+a.s+") "+a.l;a.j||(a.j=Yd(document,"click",a.B,!1,a))}NX.prototype.B=function(){Ma(this.A);this.A=null;this.s=0;document.title=this.l;this.j&&(ee(this.j),this.j=null);this.o&&(this.o(),this.o=null)};var msa=null;W.directive("ngOnboarding",[function(){return{restrict:"E",scope:{enabled:"=",config:"=",steps:"=",onFinishCallback:"=",index:"=stepIndex"},replace:!0,templateUrl:"v1542394219/views/onboarding/ngonboarding.html",controller:OX,controllerAs:"ngOnboardCtrl"}}]);
function OX(a,b){this.l={overlay:!0,overlayOpacity:.6,horizontalAlign:"default",verticalAlign:"default"};this.v=a;this.o=b;this.g=null;this.stepCount=a.steps.length;a.$watch("index",this.s.bind(this));a.$on("$destroy",this.A.bind(this));this.j=new Tg;this.j.H("resize",this.B,!1,this);if(a.steps.length&&!a.index)return a.index=0}OX.$inject=["$scope","$sce"];OX.prototype.A=function(){this.j&&(this.j.dispose(),this.j=null);this.v=this.o=null};
OX.prototype.next=function(){this.lastStep?this.close():this.v.index=this.v.index+1};OX.prototype.next=OX.prototype.next;OX.prototype.cn=function(){this.v.index=this.v.index-1};OX.prototype.previous=OX.prototype.cn;OX.prototype.close=function(){this.v.enabled=!1;PX(this,!1);if(this.v.onFinishCallback)this.v.onFinishCallback()};OX.prototype.close=OX.prototype.close;OX.prototype.dN=function(){O.set("onboarding.showOnboarding",!1);this.close()};OX.prototype.stopShowing=OX.prototype.dN;
function PX(a,b){$(".c-ng-onboarding__focus").removeClass("c-ng-onboarding__focus");$(".c-ng-onboarding__highlight").removeClass("c-ng-onboarding__highlight");b&&a.v.overlay&&(a.g.attachTo&&$(a.g.attachTo).addClass("c-ng-onboarding__focus"),a.g.focusOn&&$(a.g.focusOn).addClass("c-ng-onboarding__focus"),a.g.highlight&&$(a.g.highlight).addClass("c-ng-onboarding__highlight"))}OX.prototype.B=function(){["top","right","bottom","left","position"].forEach(function(a){this.v[a]=null},this);nsa(this)};
OX.prototype.s=function(a){if(null===a)this.v.enabled=!1,PX(this,!1);else{this.g=this.v.steps[this.v.index];this.lastStep=this.v.index+1===this.v.steps.length;this.showNextButton=this.v.index+1<this.v.steps.length;this.showPreviousButton=0<this.v.index;"title top right bottom left width height position".split(" ").forEach(function(a){this.v[a]=null},this);for(var b in this.l)this.v[b]=this.l[b];if(null!=this.v.config)for(b in this.v.config)this.v[b]=this.v.config[b];for(b in this.g)a=this.g[b],"description"==
b&&q(a)&&(a=a.join("")),this.v[b]=a;this.description=this.o.trustAsHtml(this.v.description);PX(this,!0);nsa(this)}};
function nsa(a){var b;a.v.position=a.g.position;if(a.g.attachTo){var c=$(a.g.attachTo);if(c&&0<c.length){if(!a.v.left&&!a.v.right){var d=b=null;var e=$(window).width(),f=$(".js-onboarding__popover").outerWidth();if("right"===a.v.position)b=c.offset().left+c.outerWidth()+15,d=e-c.offset().left+15,b+f>e&&d+f<e?(b="auto",a.v.position="left"):d=null;else if("left"===a.v.position)d=e-c.offset().left+15;else if("top"===a.v.position||"bottom"===a.v.position)b=c.offset().left;a.g.xOffset&&(null!==b&&(b+=
a.g.xOffset),null!==d&&(d-=a.g.xOffset));a.v.left=b;a.v.right=d}a.v.top||a.v.bottom||(b=d=null,e=$(window).height(),"left"===a.v.position||"right"===a.v.position?(d=c.offset().top,"center"==a.g.verticalAlign&&(d-=$(".js-onboarding__popover").outerHeight()/2,c=SVGElement&&c[0]instanceof SVGElement?c[0].getBBox().height:c.outerHeight(),d+=c/2)):"bottom"===a.v.position?(d=c.offset().top+c.outerHeight()+15,f=$(".js-onboarding__popover").outerHeight(),d+f>e&&0>=f-c.offset().top+15&&(d=null,a.v.position=
"top",b=e-c.offset().top+15)):"top"===a.v.position&&(b=e-c.offset().top+15),a.g.yOffset&&(null!==d&&(d+=a.g.yOffset),null!==b&&(b-=a.g.yOffset)),a.v.top=0>d?0:d,a.v.bottom=0>b?0:b)}else a.v.position="centered"}a.positionClass=a.v.position&&a.v.position.length?"bs-popover-"+a.v.position:null};W.directive("onboarding",[function(){return{restrict:"E",scope:!0,template:"<div></div>",controller:QX,controllerAs:"onboardCtrl"}}]);function QX(a,b,c){this.enabled=!1;this.steps=null;this.index=0;this.config=null;this.onFinishCallback=this.A.bind(this);this.s=c;this.K=b;this.v=a;this.g=vE.u();this.g.H("displayOnboarding",this.o,!1,this);this.j=[];a.$on("$destroy",this.B.bind(this))}QX.$inject=["$scope","$element","$compile"];var osa=E.V("os.ui.onboarding.OnboardingCtrl");
QX.prototype.B=function(){this.g.M("displayOnboarding",this.o,!1,this);this.v=this.s=this.K=null};QX.prototype.o=function(a){E.za(osa,"Received onboarding: "+a.title);this.enabled?this.j.push(a):psa(this,a)};
function psa(a,b){E.za(osa,"Displaying onboarding: "+b.title);b.config&&(a.config=b.config);a.steps=b.j;a.enabled=!0;a.index=0;a.l=a.v.$new();b=a.s('<ng-onboarding enabled="onboardCtrl.enabled" steps="onboardCtrl.steps" config="onboardCtrl.config"on-finish-callback="onboardCtrl.onFinishCallback" step-index="onboardCtrl.index"></ng-onboarding>')(a.l);a.K.append(b)}
QX.prototype.A=function(){this.K.children().remove();this.l.$destroy();this.steps=this.config=this.l=null;this.enabled=!1;this.index=0;this.g&&this.g.isEnabled()||(this.j.length=0);0<this.j.length&&psa(this,this.j.shift())};function RX(a,b,c,d){this.scope=a;Uy=b;this.g=null;a.path=c;a.appName=ws(d);a.pluginsReady=!1;window.addEventListener("beforeunload",this.hq.bind(this));R.u();Fe=Dt.u();Cv=LX.u();b=msa=NX.u();b.l=this.scope.appName;b.B();yE=this.scope.path;vE.u();Dv=HG.u();Dv.Ra("load",this.vq,!1,this);a.$on("viewLog",this.rw.bind(this));a.$on("$destroy",this.destroy.bind(this))}RX.$inject=["$scope","$injector","rootPath","defaultAppName"];g=RX.prototype;
g.destroy=function(){this.ar();window.removeEventListener("beforeunload",this.hq.bind(this),!0);this.scope=null};
function qsa(a){var b=O.get(["certUrls"]),c=O.get(["certPostUrl"]);if(b){a.g=new tX(b);od&&c&&(b=a.g,c+=(-1<c.indexOf("?")?"&":"?")+"nocache="+Ha(),b.s=c);a.g.H("error",a.tm,!1,a);a.g.H("success",a.tm,!1,a);a=a.g;a.o=0;c=a.A=0;for(b=a.L.length;c<b;c++)a.g[c]=new dx,a.g[c].H("timeout",a.B,!1,a),a.g[c].H("success",a.B,!1,a),a.g[c].H("error",a.B,!1,a),a.g[c].B=!0,fx(a.g[c],a.L[c]);a.s&&od&&(a.j=new dx,a.j.H("timeout",a.I,!1,a),a.j.H("success",a.I,!1,a),a.j.H("error",a.I,!1,a),a.j.B=!0,fx(a.j,a.s))}}
g.tm=function(a){if("error"===a.type||"postError"===a.type){var b="Certificate Authority Issues",c=O.get(["caInstructions"]);c='Your browser does not have the proper certificate authorities installed correctly. Some features and base maps may fail to work properly. Please <a class="important-link" target="_blank" href="'+c+'">click here</a> for instructions on how to fix this.';"postError"===a.type&&(b="Internet Explorer Issues",c=O.get(["ieCertIssuesUrl"]),c='You appear to be using a version of Internet Explorer that has problems with getting data from cross-domain remote servers. Please <a class="important-link" target="_blank" href="'+
c+'">click here</a> for instructions on how to fix this.');cK({confirm:va,prompt:c,noText:"",noIcon:"",windowOptions:{label:b,icon:"fa fa-frown-o",x:"center",y:"center",width:"350",height:"auto",modal:"true","no-scroll":"true",headerClass:"bg-warning u-bg-warning-text"}})}this.g.M("error",this.tm,!1,this);this.g.M("success",this.tm,!1,this)};
g.Zq=function(){O.get(["sessionStart"])||O.set(["sessionStart"],(new Date).getTime());O.get(["about","version"])||O.set(["about","version"],this.scope.version);vy=O.get(["proxyUrl"],vy);wfa();bea();rx=O.get("mixedContent",!1);Mw=O.get("fileUrls",!1);yfa();zfa();Qra();qsa(this);this.mz();var a=Caa().split(".");a=a&&1<a.length?Number(a[0]):0;var b=O.get("minPerformatFFVersion",38),c=O.get("deprecatedFirefoxMessage","<h3>You are using an unsupported version of the Firefox browser!</h3>For the best experience, please consider updating your browser.");
ic("Firefox")&&a<b&&($("body").addClass("c-main__slowBrowser"),At(zt.u(),c,ss,void 0,1,new A));Uy.get("$rootScope").getUniqueString=function(){return $b()}};g.vq=function(){var a=R.u(),b="UNKNOWN";pe?b="CHROME":od?b="IE":pd?b="EDGE":oe?b="FIREFOX":nd?b="OPERA":qe&&(b="SAFARI");var c=cba||xd;c=c.split(".")[0];Q(a,"browser."+(b+"."+c),1);this.scope.pluginsReady=!0;this.Nu()};g.hq=va;g.rw=va;g.mz=va;g.ar=va;g.Nu=va;g.kt=va;g.it=va;W.directive("alerts",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/windows/alerts.html",controller:SX,controllerAs:"ctrl"}}]);function SX(a){this.v=a;this.alertArray=[];this.showAlertPopups=O.get(["showAlertPopups"],!0);Ct||(Ct=zt.u());Ct.g.Jc().forEach(this.g,this);Ct.H("alert",this.g,!1,this);a.$on("dispatch",rsa);a.$on("$destroy",this.j.bind(this))}SX.$inject=["$scope","$timeout","$element"];SX.prototype.j=function(){Ct.M("alert",this.g,!1,this);this.v=null};
SX.prototype.g=function(a){this.alertArray.unshift({msg:a.j,severity:a.s.toString(),time:a.getTime().Vh(!0).slice(11)});X(this.v)};SX.prototype.ih=function(){this.alertArray.length=0;Ct.ih()};SX.prototype.clearAlerts=SX.prototype.ih;SX.prototype.oN=function(){this.showAlertPopups=!this.showAlertPopups;O.set(["showAlertPopups"],this.showAlertPopups)};SX.prototype.toggleAlertPopups=SX.prototype.oN;function rsa(a,b){C.dispatchEvent(b)};function TX(a,b,c,d){HX.call(this,a,b,c,d)}w(TX,HX);TX.prototype.cs=function(a,b){var c=this.Ol(),d=this.g,e=this.j;if(c)for(var f=0,h=c.length;f<h;f++){var k=!0,l=this.Cn(c[f]),m=l.je();m&&(!a.test(m)||e&&!e(l)||(0<b.length&&"noResults"==b[0].D()&&b.splice(0,1),d?jsa(d,l,b,!0):(b.push(l),k=!1)),a.lastIndex=0);l.D()in this.o||(d&&d.count(l),this.o[l.D()]=!0);k&&l.dispose()}this.Bo(d,b)};TX.prototype.Ol=function(){return[]};TX.prototype.Cn=function(){return new Yy};function UX(a,b,c){HX.call(this,[],a,b,c)}w(UX,TX);UX.prototype.Ol=function(){return HD(UE)};UX.prototype.Cn=function(a){var b=new lF;b.cj(a);return b};UX.prototype.El=function(a){var b=HD(UE);if(b&&0<b.length)for(var c=0,d=b.length;c<d;c++)a.push(new lF(b[c]));else JX(this,a)};function VX(){y.call(this);this.g=this.l=null}w(VX,y);g=VX.prototype;g.init=function(){this.l={};this.g={}};g.J=function(){VX.C.J.call(this);this.g=this.l=null};function jsa(a,b,c,d){null==d&&(d=!0);var e=a.Pd(b),f;if(e)for(var h=0,k=e.length;h<k;h++){var l=e[h],m=b.clone();l in a.l?(f=a.l[l])&&f.R(m,void 0):(f=a.Ce(l),a.l[l]=f,f.R(m,void 0),c.push(f));d&&(l in a.g?a.g[l].Fl++:a.g[l]={Fl:1,total:0},ssa(a,l))}}
g.count=function(a){if(a=this.Pd(a))for(var b=0,c=a.length;b<c;b++){var d=a[b];d in this.g?this.g[d].total++:this.g[d]={Fl:0,total:1};ssa(this,d)}};function ssa(a,b){if(b in a.l&&b in a.g){var c=a.l[b];a=a.g[b];b=c.ba();b=b.replace(/ \(\d+( of \d+)?\)$/,"");b+=" ("+a.Fl+(a.Fl!=a.total?" of "+a.total:"")+")";c.Da(b)}}g.Pd=function(){return null};g.Ce=function(){return new Yy};mb(tF,"_sourceName");function WX(a){VX.call(this);this.j=a||!1}w(WX,VX);WX.prototype.Pd=function(a){var b=[];if(a&&a instanceof jF)try{var c=a.ee().get("_sourceName")}catch(d){}c?b.push(c):b.push("No Associated Source");return b};WX.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a);pz(b,!1);b.collapsed=!this.j;return b};function tsa(){return{restrict:"AE",replace:!0,scope:{layer:"=",btnText:"@"},template:'<button class="btn btn-primary btn-sm" title="Add a filter" ng-disabled="!addfilterctrl.canAdd()" ng-click="addfilterctrl.add()"><i class="fa fa-plus"></i> {{btnText}}</button>',controller:XX,controllerAs:"addfilterctrl"}}W.directive("addfilter",[tsa]);
function XX(a,b){this.K=b;this.scope=a;this.j=new IF(new HF({type:"root",children:[]}));this.layers=[];this.g();WE.H("propertychange",this.g,!1,this);a.$on("$destroy",this.l.bind(this))}XX.$inject=["$scope","$element"];XX.prototype.l=function(){WE.M("propertychange",this.g,!1,this);Ma(this.j);this.j=void 0;this.K=this.scope=null};
XX.prototype.g=function(){if(this.j){var a=this.j.Ha();a.children&&(a.children=void 0);var b=YE(WE),c=[],d;for(d in b){var e=PJ.ld(d);try{if(e){var f=e.Fe();f&&c.push({id:d,label:b[d],columns:f})}}catch(h){}}this.scope.layer&&this.scope.layer.id&&mb(c,this.scope.layer);c.sort(usa);b=0;for(d=c.length;b<d;b++)e=c[b].id,a.R({label:c[b].label,eventType:e,ya:this.o.bind(this,e)});this.layers=c}};
XX.prototype.add=function(){this.scope.layer&&this.scope.layer.id?this.o(this.scope.layer.id):this.j&&this.K&&this.j.open(void 0,{my:"left top",at:"left bottom",of:this.K})};XX.prototype.add=XX.prototype.add;XX.prototype.o=function(a){var b=ib(this.layers,function(b){return b.id==a});JK(a,b.columns,this.s.bind(this))};XX.prototype.s=function(a){a&&this.scope.$emit("filterComplete",a)};XX.prototype.SB=function(){return!!this.layers&&0<this.layers.length};XX.prototype.canAdd=XX.prototype.SB;
function usa(a,b){return Ob(a.label,b.label)};W.directive("osaddfilter",[function(){var a=tsa();a.controller=YX;return a}]);function YX(a,b){XX.call(this,a,b);T.u().H("addLayer",this.g,!1,this);T.u().H("removeLayer",this.g,!1,this);T.u().H("renameLayer",this.g,!1,this)}w(YX,XX);YX.$inject=["$scope","$element"];YX.prototype.l=function(){YX.C.l.call(this);T.u().M("addLayer",this.g,!1,this);T.u().M("removeLayer",this.g,!1,this);T.u().M("renameLayer",this.g,!1,this)};W.directive("filterexport",[function(){return{restrict:"E",scope:{confirm:"=",mode:"="},templateUrl:"v1542394219/views/filter/filterexport.html",controller:ZX,controllerAs:"filterexport"}}]);function ZX(a,b,c){this.scope=a;this.element=b;this.mode=a.mode?a.mode:"active";this.fileName="filters.xml";this.confirm=a.confirm;c(function(){a.$emit("window.ready")})}ZX.$inject=["$scope","$element","$timeout"];
function vsa(a){FE({id:"filterexport",label:"Export Filters",icon:"fa fa-download",x:"center",y:"center",width:"400",height:"auto",modal:"true","show-close":"true"},'<filterexport mode="mode" confirm="confirm"></filterexport>',void 0,void 0,void 0,{confirm:a,mode:void 0})}ZX.prototype.cancel=function(){KE(this.element)};ZX.prototype.cancel=ZX.prototype.cancel;ZX.prototype.save=function(){this.confirm(this.fileName,this.mode);KE(this.element)};ZX.prototype.save=ZX.prototype.save;
function wsa(a,b){if(0<b.length){var c=LC("filters","http://www.bit-sys.com/state/v2"),d=!1;db(b,function(a){var b=a.gb(),e=b instanceof eJ?b:PJ.pb(b.filterId),k=fJ(e);if(k){var l=PJ.ld(e.type);l&&(a={active:"on"==a.getState()?"true":"false",filterType:"single",title:e.S(),description:e.qb()||"",type:l.ff(),match:1==b.filterGroup||void 0===b.filterGroup?"AND":"OR"},a=Z("filter",c,null,a),OC(k,a,"ogc","http://www.opengis.net/ogc"),d=!0)}});d?fS(a,PC(c),"text/xml; subtype=FILTER"):At(Ct,"Something went wrong! We were unabled to export your filters.",
rs)}else At(Ct,"No filters to export",ss)};function $X(a){yK.call(this,a);this.filter&&(this.title='Remove filter "'+this.filter.S()+'"')}w($X,yK);$X.prototype.Fa=function(){return zK(this)?(this.state="executing",this.remove(),this.state="success",!0):!1};$X.prototype.Cb=function(){this.state="reverting";this.add();this.state="ready";return!0};W.directive("copyfilterpicker",[function(){return{restrict:"E",replace:!0,scope:{models:"=",sourceLayerName:"=",sourceFilterKey:"="},templateUrl:"v1542394219/views/filter/copyfilterpicker.html",controller:aY,controllerAs:"copyFilterPickerCtrl"}}]);function aY(a,b){this.v=a;this.j=a.sourceFilterKey;this.duplicateText="Duplicate columns are not allowed.";b(this.Wb.bind(this));a.$on("$destroy",this.g.bind(this))}aY.$inject=["$scope","$timeout"];
aY.prototype.g=function(){this.v.copyFilterPickerForm&&this.v.copyFilterPickerForm.$setValidity("duplicate",!0);this.v=null};
aY.prototype.Wb=function(){for(var a=this.v.models,b=0<Er(a,function(a){return a.selectedTargetColumn?a.selectedTargetColumn.name:$b()}).length,c=!1,d="",e="",f=0,h=a.length;f<h;f++){var k=a[f];if(k.selectedTargetColumn){var l=k.targetFilterKey;d=k.selectedTargetColumn.name;l=l+"#"+d;if((l=oQ(mQ.u(),l))&&(l=l.Od(this.j))&&l.column!==k.sourceColumnName){e=l.column;c=!0;break}}}c&&(this.inUseText="<b>"+d+"</b> is already associated with <b>"+e+"</b>.");this.v.copyFilterPickerForm.$setValidity("duplicate",
!b);this.v.copyFilterPickerForm.$setValidity("inUse",!c)};aY.prototype.validate=aY.prototype.Wb;W.directive("copyfilter",[function(){return{restrict:"E",replace:!0,scope:{filterEntry:"=",layerId:"="},templateUrl:"v1542394219/views/filter/copyfilter.html",controller:bY,controllerAs:"copyFilterCtrl"}}]);
function bY(a,b,c){this.K=b;this.j=[];this.g=a.filterEntry;this.sourceFilterKey=Iha(this.g.T())||"";this.sourceLayerName=PJ.ld(this.g.T()).S();this.layers=[];this.unmappedColumns={};this.mappedColumns={};this.numLayersChecked=0;this.helpText="Some columns in the filter are not available in the selected layers. Please choose the appropriate columns for each.";xsa(this);a.$on("checklist:change:layerlist",this.l.bind(this));a.$on("$destroy",this.o.bind(this));c(function(){a.$emit("window.ready")})}
bY.$inject=["$scope","$element","$timeout"];bY.prototype.o=function(){this.K=this.v=null};function xsa(a){var b=YE(WE),c=[];for(e in b)if(V.Ja(e)){var d=b[e];a.g.T()===e&&(d+=" (Current Layer)");c.push({id:e,label:d,enabled:!1})}c.sort(function(a,b){return Ob(a.label,b.label)});b=fJ(a.g).querySelectorAll("PropertyName");var e=0;for(d=b.length;e<d;e++)mb(a.j,b[e].textContent);a.layers=c;a.l()}
bY.prototype.l=function(){var a=mQ.u(),b=this.unmappedColumns;this.unmappedColumns={};this.mappedColumns={};var c=this.layers.filter(function(a){return a.enabled});this.numLayersChecked=c.length;for(var d=0,e=c.length;d<e;d++){var f=PJ.ld(c[d].id);if(f){var h=f.ff();if(h!==this.sourceFilterKey){var k=f.Fe();if(k){k=eb(k,Jha);f=f.S();for(var l=0,m=this.j.length;l<m;l++){var n=this.j[l],p=oQ(a,this.sourceFilterKey+"#"+n);if(p&&p.Od(h)){var r=p.Od(h),u=ib(k,function(a){return a.name===r.column});p=ysa(f,
h,n,k,u,p);this.mappedColumns[h]?this.mappedColumns[h].push(p):this.mappedColumns[h]=[p]}else p=null,(u=b[h])&&(u=ib(u,function(a){return a.sourceColumnName===n&&a.targetFilterKey===h}))&&(p=u.selectedTargetColumn),p=ysa(f,h,n,k,p),this.unmappedColumns[h]?ib(this.unmappedColumns[h],function(a){return a.sourceColumnName===n&&a.targetFilterKey===h})||this.unmappedColumns[h].push(p):this.unmappedColumns[h]=[p]}}}}}};
function zsa(a){var b=mQ.u(),c={},d;for(d in a.unmappedColumns)for(var e=a.unmappedColumns[d],f=0,h=e.length;f<h;f++){var k=e[f],l=k.sourceColumnName,m=k.targetFilterKey;k=k.selectedTargetColumn.name;var n=m+"#"+k,p=a.sourceFilterKey+"#"+l;c[m]=c[m]||[];n=oQ(b,n)||oQ(b,p);n||(n=new kQ,n.Qh(l),lQ(n,a.sourceFilterKey,l),b.add(n));n.Od(m)||lQ(n,m,k);(k=n.Od(a.sourceFilterKey))&&k.column!==l&&(qla(n,k),lQ(n,a.sourceFilterKey,l));mb(c[m],n)}b.dd();for(d in a.mappedColumns)for(e=a.mappedColumns[d],f=0,
h=e.length;f<h;f++)k=e[f],m=k.targetFilterKey,n=k.mapping,c[m]=c[m]||[],mb(c[m],n);return c}bY.prototype.IE=function(){return 0<kc(this.unmappedColumns)};bY.prototype.hasUnmappedColumns=bY.prototype.IE;bY.prototype.DE=function(){return 0<kc(this.mappedColumns)};bY.prototype.hasMappedColumns=bY.prototype.DE;bY.prototype.cancel=function(){KE(this.K)};bY.prototype.cancel=bY.prototype.cancel;
bY.prototype.finish=function(){for(var a=zsa(this),b=[],c=this.layers.filter(function(a){return a.enabled}),d=0,e=c.length;d<e;d++){var f=c[d].id,h=PJ.ld(f).ff(),k=this.g.clone(),l=a[h],m=this.g.pb();if(l&&m)for(var n=0,p=l.length;n<p;n++){var r=l[n],u=r.Od(this.sourceFilterKey);r=r.Od(h);m=m.replace(new RegExp("<PropertyName>"+u.column+"</PropertyName>","g"),"<PropertyName>"+r.column+"</PropertyName>")}k.Sb(f);k.ga($b());k.Zf(m);f=new FK(k);b.push(f)}0<b.length&&(a=new oF,a.Zb(b),a.title='Copied filter "'+
this.g.S()+'" to '+b.length+(1===b.length?" layer":" layers"),gF(hF.u(),a));KE(this.K)};bY.prototype.finish=bY.prototype.finish;function ysa(a,b,c,d,e,f){return{name:a,targetFilterKey:b,sourceColumnName:c,targetColumns:d,selectedTargetColumn:e,mapping:f}};W.directive("viewfilter",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/filter/viewfilters.html",controller:cY,controllerAs:"filters"}}]);function cY(a,b){this.scope=a;this.element=b;this.g=a.entry;this.root=null;this.title=this.g.S();this.description=this.g.qb();this.root=new aK(!0);if(b=fJ(this.g))this.root.Xg(b.localName),Asa(this,b,this.root);a.$on("$destroy",t(this.j,this))}cY.$inject=["$scope","$element"];
cY.prototype.j=function(){var a=angular.element("#removeMultiple");a&&KE(a);this.element=this.scope=null};function Asa(a,b,c){b=Ag(b);for(var d;b;){var e=a;var f=b;d=c;for(var h=!1,k=0;k<KJ.length;k++)if(KJ[k].matches(angular.element(f))){h=!0;break}h?(f=XJ(f,e.scope.columns,!0),d.R(f),d.collapsed=!1):(e=new aK(!0),e.Xg(f.localName),d.R(e),f=e);d=ra(b.nextElementSibling)?b.nextElementSibling:Bg(b.nextSibling);f instanceof aK&&Asa(a,b,f);b=d}}cY.prototype.cancel=function(){KE(this.element)};
cY.prototype.cancel=cY.prototype.cancel;var dY=void 0;function eY(a){switch(a.type){case "query:importFile":bR();break;case "query:enterCoordinates":cR();break;case "query:queryWorld":dR()}};function Bsa(){return{restrict:"AE",replace:!0,scope:{layerId:"=",updateImmediate:"=?",hideAdvanced:"@?",hideLayerChooser:"=?"},templateUrl:"v1542394219/views/query/combinator.html",controller:fY,controllerAs:"comboCtrl"}}W.directive("combinator",[Bsa]);
function fY(a,b){this.K=b;this.scope=a;this.l=null;this.G="";this.A=new le(this.update,50,this);this.s=new le(this.apply,50,this);this.I={};this.o=!0===a.updateImmediate;if(b=!a.hideAdvanced)a:{b=WE;for(var c=YE(b),d=0,e=b.entries.length;d<e;d++){var f=b.entries[d],h=f.layerId;if("*"!==h&&h in c&&"*"!==f.areaId&&"*"!==f.filterId){b=!0;break a}}b=!1}a.advanced=b;b=gY;a.orders=b;a.order=O.get(["filter","groupBy"],b[b.length-1]);a.layer=null;a.layers=[];a.hideLayerChooser=!!a.hideLayerChooser;a.hasCountrySupport=
!1;a.$on("$destroy",this.B.bind(this));a.$on("dirty",this.Yv.bind(this));a.$on("edit",this.aH.bind(this));a.$on("view",this.sJ.bind(this));a.$on("copy",this.FG.bind(this));a.$on("remove",this.LK.bind(this));a.$on("filterComplete",this.qH.bind(this));a.$on("combinator.setLayer",this.KI.bind(this));this.o&&a.$on("combinator.apply",this.apply.bind(this));this.update();PJ.H("filtersRefresh",this.g,!1,this);PJ.H("propertychange",this.g,!1,this);UE.H("propertychange",this.g,!1,this);WE.H("propertychange",
this.g,!1,this)}fY.$inject=["$scope","$element"];var gY=["Area - Layer - Filter","Layer - Area - Filter","Layer - Filter - Area"];fY.prototype.apply=function(){Csa(this);var a=Dsa(this),b=hY(this,"all"),c="all"!==b;c&&(a=a.filter(function(a){return a.layerId===b||"*"===a.layerId}));a=a.filter(function(a){return!("disabled"in a)});a=new vK(a,c,b,!0);this.j(a);Q(R.u(),"filters.advanced.apply",1);this.scope.$emit("combinator.applycomplete")};fY.prototype.apply=fY.prototype.apply;
fY.prototype.close=function(){KE(this.K);Q(R.u(),"filters.advanced.close",1)};fY.prototype.close=fY.prototype.close;fY.prototype.clear=function(){var a=this.scope.pivots;a&&a.Ga("off");this.Yv();Q(R.u(),"filters.advanced.reset",1)};fY.prototype.clear=fY.prototype.clear;function hY(a,b){return(!a.scope.hideLayerChooser&&a.scope.layer?a.scope.layer.id:a.scope.layerId)||b}function Dsa(a){a.l||(a.l=WE.getEntries(null,null,null,!0));return a.l}
fY.prototype.B=function(){PJ.M("filtersRefresh",this.g,!1,this);PJ.M("propertychange",this.g,!1,this);UE.M("propertychange",this.g,!1,this);WE.M("propertychange",this.g,!1,this);Ma(this.A);this.A=null;Ma(this.s);this.s=null;var a=this.Ha();a&&a.dispose();this.K=this.scope=null};fY.prototype.j=function(a){a.Fa()};fY.prototype.g=function(a){var b=!0;a.G&&"featureHovered"==a.l&&(b=!1,a=a.o)&&(this.scope.selected=[],Esa(this,a));b&&this.A.start()};
fY.prototype.update=function(a){var b=this.scope.advanced,c=gY[gY.length-2];c=b?this.scope.order:c;var d=c.split(" - ");if(c===this.G){var e=this.scope.pivots,f={};iY(this,e,f)}this.qr();Csa(this);(e=this.Ha())&&e.dispose();e=ZO(WE,d,void 0,void 0,!b,this.scope.hideLayerChooser?this.scope.layer:void 0);e=Fsa(this,e);this.scope.pivots=e;Gsa(this,a);f&&iY(this,e,f,!0,a);b||(a=e.na(),a&&0!=a.length||(e.Da("No layers"),pz(e,!1)));X(this.scope);O.set(["filter","groupBy"],c);this.G=c};
fY.prototype.update=fY.prototype.update;fY.prototype.MM=function(a){Q(R.u(),"filters.advanced.selectLayer",1);this.update(a)};fY.prototype.selectLayer=fY.prototype.MM;fY.prototype.LM=function(a){Q(R.u(),"filters.groupBy",1);this.update(a)};fY.prototype.selectGroupBy=fY.prototype.LM;
function Esa(a,b,c){if(!c){c=a.Ha();var d=!0}var e=c.na();if(e)for(var f=0,h=e.length;f<h;f++)e[f].D()==b&&a.scope.selected.push(e[f]),Esa(a,b,e[f]);d&&0<a.scope.selected.length&&(X(a.scope),c.dispatchEvent(new U("scrollRowIntoView",a.scope.selected[0].id)))}fY.prototype.JB=function(a){Q(R.u(),"filters.advanced.advancedToggle",1);this.update(a)};fY.prototype.advancedToggle=fY.prototype.JB;function Hsa(a,b){return Ob(a.label,b.label)}g=fY.prototype;
g.KI=function(a,b){this.scope&&b&&(a=ib(this.scope.layers,function(a){return a.id===b}))&&(this.scope.layer=a,this.update(!0))};
g.qr=function(){var a=YE(WE),b=[],c=this.scope.hideLayerChooser?this.scope.layerId:this.scope.layer||this.scope.layerId,d;for(d in a){var e=PJ.ld(d);try{if(e){var f=e.Fe();f&&(b.push({id:d,label:a[d],columns:f}),!c||c.id!==d&&c!==d||(c=b[b.length-1]))}}catch(h){}}b.sort(Hsa);b.unshift({id:null,label:"All"});c&&c.id||(c=b[0]);a=this.scope.layer?this.scope.layer.id===c.id:!0;this.scope.layers=b;this.scope.layer=c;a&&this.scope.$broadcast("layerChanged",this.scope.layer.id)};
function Fsa(a,b,c){c=void 0!==c?c:!0;var d=!1,e=hY(a);if(e){var f=b.na();if(f){for(var h=0,k=f.length;h<k;h++){var l=f[h],m=l.gb();if(m&&m.layerId===e){d=!0;if(c)c=b,l.getParent().removeChild(l),b=l,c.dispose();else for(h=f.length;h--;)f[h]!==l&&b.removeChild(f[h]);break}}if(!d)for(h=0,k=f.length;h<k;h++)Fsa(a,f[h],!1)}}return b}g.Ha=function(){return this.scope.pivots};function Csa(a){var b=a.Ha();b&&(a.l=[],Isa(b,a.l))}
function Gsa(a,b){var c=void 0;if(b&&(c=Dsa(a))&&c.length){b=WE.getEntries(null,null,null,!0);for(var d={},e={},f={},h=0,k=c.length;h<k;h++)d[c[h].layerId]=!0,e[c[h].areaId]=!0,f[c[h].filterId]=!0;h=0;for(k=b.length;h<k;h++){var l=b[h];l.layerId in d&&l.areaId in e&&l.filterId in f||c.push(l)}c=c.filter(function(a){return!("disabled"in a)})}c=$ja(WE,c);(b=a.Ha())&&Jsa(b,c,void 0,a.scope.advanced)}g.Yv=function(){var a=hY(this,"all");a&&(this.I[a]=!0,this.o&&this.apply())};
g.aH=function(a,b,c){if(c&&(a=c[b?"filterId":"areaId"]))if(b){if(b=PJ.pb(a)){var d=c.layerId;(c=(c=ib(this.scope.layers,function(a){return a.id==d}))&&c.columns||null)?JK(d,c,this.pr.bind(this),b):At(Ct,"This layer is missing required information to edit filters.",ss)}}else(c=UE.get(a))&&ZE(c)};
g.sJ=function(a,b,c){if(c&&(a=c[b?"filterId":"areaId"]))if(b){if(b=PJ.pb(a)){var d=c.layerId;(c=(c=ib(this.scope.layers,function(a){return a.id==d}))&&c.columns||null)?Rha(d,c,this.pr.bind(this),b):At(Ct,"This layer is missing required information to edit filters.",ss)}}else At(Ct,"Viewing areas is not allowed at this time.",ss)};g.FG=function(a,b){b&&(a=b.filterId)&&(a=PJ.pb(a))&&KK(a,b.layerId)};
g.LK=function(a,b,c){if(c){if(a=c[b?"filterId":"areaId"])if(b){if(b=PJ.pb(a))b=new $X(b),this.j(b)}else if(b=UE.get(a))b=new cF(b),this.j(b);this.o&&(this.scope.$emit("dirty"),this.apply())}};g.toggle=function(a,b){if(!b){var c=!0;b=this.Ha()}if(b){b.getParent()&&(b.collapsed=a);var d=b.na();if(d)for(var e=0,f=d.length;e<f;e++)this.toggle(a,d[e])}c&&b.dispatchEvent(new U("children"));a?Q(R.u(),"filters.advanced.collapseAll",1):Q(R.u(),"filters.advanced.expandAll",1)};
function Isa(a,b,c){if(a){var d=a.gb();c=c?zc(c):Ksa();if(d&&c)for(var e in d)c[e]=d[e];if("off"===a.getState()&&(c.disabled=!0,d=c.areaId,e=c.layerId,d&&"*"!==d&&e&&(d=WE.getEntries("*",d,"*"))&&d.length)){delete c.disabled;c.negate=!0;b.push(c);return}(a=a.na())&&a.length||b.push(c);if(a)for(d=0,e=a.length;d<e;d++)Isa(a[d],b,c)}}function Ksa(){return{layerId:"*",areaId:"*",filterId:"*",includeArea:!0,filterGroup:!0}}
function Jsa(a,b,c,d){if(a){var e=c?zc(c):Ksa();if(c=a.gb()){for(var f in c)e[f]=c[f];f=e.layerId;for(var h=e.areaId,k=e.filterId,l=0,m=0,n=0,p=0,r=0,u=b.length;r<u;r++){var v=b[r];f&&f!==v.layerId&&"*"!==f||h&&h!==v.areaId&&"*"!==h||k&&k!==v.filterId&&"*"!==k||(h&&"*"!==h&&(n++,l+=v.includeArea?1:0),k&&"*"!==k&&(p++,m+=v.filterGroup?1:0))}n&&c.areaId&&(c.includeArea=.5<l/n);p&&c.filterId&&(c.filterGroup=.5<m/p)}if((c=a.na())&&c.length)for(a=0,f=c.length;a<f;a++)Jsa(c[a],b,e,d);else{var x=["layerId",
"areaId","filterId"];b=b.filter(function(a){if("negate"in a||"disabled"in a)return!1;for(var b=0,c=x.length;b<c;b++){var f=x[b];if((d||"*"!==e[f])&&a[f]!==e[f])return!1}return!0});a.Ga(b&&b.length?"on":"off")}}}
function iY(a,b,c,d,e){var f=e||!1;if(b){for(var h=[],k=b;k;)h.unshift(k.D()),k=k.getParent();h=h.join(".");d?h in c?b.collapsed=c[h]:a.o&&(h=b.gb(),!f&&h&&("filterId"in h&&"*"!=h.filterId||"areaId"in h&&"*"!=h.areaId)&&(b.Ga("on"),a.s.start())):c[h]=b.collapsed;if(b=b.na())for(f=0,h=b.length;f<h;f++)iY(a,b[f],c,d,e)}}g.Hf=function(a){if(a){var b=PJ.pb(a.D());if(b){b=new $X(b);var c=new FK(a),d=new oF;d.Zb([b,c]);d.title="Edit Filter "+a.S();this.j(d)}else a.l=!0,this.j(new FK(a))}};
g.qH=function(a,b){a.stopPropagation();this.pr(b)};g.pr=function(a){this.Hf(a);this.scope.$emit("dirty")};function Lsa(a,b,c){if(a)for(var d=0,e=a.length;d<e;d++){var f=a[d];if((c&&"on"==f.getState()||!c)&&f.gb()){var h=f.gb().filterId;void 0!==h&&"*"!=h&&b.push(f)}f.na()&&Lsa(f.na(),b,c)}}g.MK=function(a,b){var c=[];"selected"!=b?Lsa(this.scope.pivots.na(),c,"active"==b):c=eb(this.scope.selected,function(a){return a.gb()&&(a=a.gb().filterId,void 0!==a&&"*"!=a)?!0:!1});wsa(a,c)};
g.Ej=function(){var a=HK(PJ,hY(this));return a&&0<a.length?!1:!0};fY.prototype.exportDisabled=fY.prototype.Ej;fY.prototype.Zj=function(){Q(R.u(),"filters.export",1);vsa(this.MK.bind(this))};fY.prototype.launchExport=fY.prototype.Zj;fY.prototype.import=function(){bR({layerId:hY(this)})};fY.prototype["import"]=fY.prototype.import;fY.prototype.Eq=function(){var a=this.K.find(".js-import-group"),b=dY;b&&a&&a.length&&b.open(void 0,{my:"left top+4",at:"left bottom",of:a})};fY.prototype.openImportMenu=fY.prototype.Eq;W.directive("osCombinator",[function(){var a=Bsa();a.controller=jY;a.templateUrl="v1542394219/views/windows/combinator.html";return a}]);function jY(a,b){fY.call(this,a,b);T.u().H("addLayer",this.g,!1,this);T.u().H("removeLayer",this.g,!1,this);T.u().H("renameLayer",this.g,!1,this);PJ.H("exportFilter",this.Zj,!1,this)}w(jY,fY);jY.$inject=["$scope","$element"];
jY.prototype.qr=function(){if(this.scope.hideLayerChooser&&this.scope.layerId){var a=this.scope.layerId,b=[],c=null,d=PJ.ld(a);if(d)try{var e=d.Fe();e&&(c={id:a,label:d.S(),columns:e},b.push(c))}catch(f){}this.scope.layers=b;this.scope.layer=c}else jY.C.qr.call(this)};jY.prototype.B=function(){jY.C.B.call(this);T.u().M("addLayer",this.g,!1,this);T.u().M("removeLayer",this.g,!1,this);T.u().M("renameLayer",this.g,!1,this);PJ.M("exportFilter",this.Zj,!1,this)};
jY.prototype.Hf=function(a){if(a){var b=PJ.pb(a.D());if(b){b=new $X(b);a=new FK(a);var c=new oF;c.Zb([b,a]);this.j(c)}else this.j(new FK(a))}};jY.prototype.j=function(a){gF(hF.u(),a)};
function Msa(){angular.element('div[label="Advanced"].window').length?HE("filters"):FE({label:"Advanced",key:"filters",icon:"fa fa-filter",x:"center",y:"center",width:400,height:520,"show-close":!0,"no-scroll":!0,"min-width":300,"max-width":1E3,"min-height":200,"max-height":1E3},'<os-combinator layer-id="layerId" hide-layer-chooser="hideChooser"></os-combinator>',void 0,void 0,void 0,{layerId:void 0})}
function kY(a,b){var c="Filters",d=("filters-"+a).replace(/\s/g,"").replace(/[^\w]/g,"-");IE(d)?HE(d):(b?c+=" for "+b:(b=nw(a))&&(c+=" for "+b),FE({id:d,label:c,key:d,icon:"fa fa-filter",x:"center",y:"center",width:400,height:520,"show-close":!0,"no-scroll":!0,"min-width":300,"max-width":1E3,"min-height":200,"max-height":1E3},'<os-combinator layer-id="layerId" hide-layer-chooser="hideChooser"></os-combinator>',void 0,void 0,void 0,{layerId:a,hideChooser:!0}))};function lY(a){VX.call(this);this.o=a||!1}w(lY,VX);lY.prototype.Pd=function(a){var b=[],c=null;a&&("function"===typeof a.getTags?c=a.getTags():"function"===typeof a.getParent&&(a=a.getParent(),"function"===typeof a.getTags&&(c=a.getTags())));if(c){a=0;for(var d=c.length;a<d;a++)mb(b,"a"+c[a].toUpperCase())}0===b.length&&b.push("zNo Tags");return b};lY.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a.substring(1));pz(b,!1);b.collapsed=!this.o;return b};function mY(a,b,c){this.element=b;this.scope=a;this.j=new le(this.s,c,this);this.title="";this.scope.term="";this.scope.views=[];this.l="None";this.g=this.scope.selected=null;this.scope.contextMenu=null;a.$on("$destroy",this.destroy.bind(this));a.$on("search",this.s.bind(this));a.$on("collapseChange",this.save.bind(this))}mY.$inject=["$scope","$element","searchDelay"];mY.prototype.destroy=function(){this.save();this.j.dispose();this.j=null;this.g.dispose();this.element=this.scope=this.g=null};
mY.prototype.save=function(){O.set(["groupBy",this.title,"openIds"],dsa(this.g))};mY.prototype.init=function(){var a=O.get(["groupBy",this.title,"openIds"],O.get([this.title,"openIds"],{}));this.g.G=a;a=O.get(["groupBy",this.title,"groupBy"],O.get([this.title,"groupBy"],this.l));this.scope.view=this.scope.views[a];this.search()};mY.prototype.search=function(){this.j.start()};mY.prototype.search=mY.prototype.search;mY.prototype.ko=function(){this.scope.term="";this.search();this.element.find(".search").focus()};
mY.prototype.clearSearch=mY.prototype.ko;mY.prototype.s=function(){var a=this.scope.term,b;for(b in this.scope.views)if(this.scope.views[b]===this.scope.view){O.set(["groupBy",this.title,"groupBy"],b);break}IX(this.g,a,-1==this.scope.view?null:this.scope.view);X(this.scope)};(function(){if(td){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(fc))?a[1]:"0"}return sd?(a=/10[_.][0-9_.]+/,(a=a.exec(fc))?a[0].replace(/_/g,"."):"10"):Maa?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(fc))?a[1]:""):Naa||Oaa||Paa?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(fc))?a[1].replace(/_/g,"."):""):""})();function nY(a,b,c){A.call(this);this.target=a;this.handle=b||a;this.L=c||new ET(NaN,NaN,NaN,NaN);this.l=kg(a);this.g=new Vx(this);La(this,Fa(Ma,this.g));this.deltaY=this.deltaX=this.G=this.B=this.screenY=this.screenX=this.clientY=this.clientX=0;this.o=!0;this.j=!1;Yd(this.handle,["touchstart","mousedown"],this.cp,!1,this);this.s=Nsa}w(nY,A);var Nsa=qa.document&&qa.document.documentElement&&!!qa.document.documentElement.setCapture&&!!qa.document.releaseCapture;g=nY.prototype;g.mc=function(){return this.o};
g.eb=function(a){this.o=a};g.J=function(){nY.C.J.call(this);de(this.handle,["touchstart","mousedown"],this.cp,!1,this);this.g.removeAll();this.s&&this.l.releaseCapture();this.handle=this.target=null};
g.cp=function(a){var b="mousedown"==a.type;if(!this.o||this.j||b&&!Od(a))this.dispatchEvent("earlycancel");else if(this.dispatchEvent(new oY("start",this,a.clientX,a.clientY,a))){this.j=!0;b&&a.preventDefault();b=this.l;var c=b.documentElement,d=!this.s;this.g.H(b,["touchmove","mousemove"],this.lE,{capture:d,passive:!1});this.g.H(b,["touchend","mouseup"],this.Xl,d);this.s?(c.setCapture(!1),this.g.H(c,"losecapture",this.Xl)):this.g.H(b?b.parentWindow||b.defaultView:window,"blur",this.Xl);this.I&&this.g.H(this.I,
"scroll",this.tu,d);this.clientX=this.B=a.clientX;this.clientY=this.G=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.deltaX=this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.A=rg(ig(this.l).g)}};g.Xl=function(a,b){this.g.removeAll();this.s&&this.l.releaseCapture();this.j?(this.j=!1,this.dispatchEvent(new oY("end",this,a.clientX,a.clientY,a,Osa(this,this.deltaX),Psa(this,this.deltaY),b||"touchcancel"==a.type))):this.dispatchEvent("earlycancel")};
g.lE=function(a){if(this.o){var b=1*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.j){var d=this.B-this.clientX,e=this.G-this.clientY;if(0<d*d+e*e)if(this.dispatchEvent(new oY("start",this,a.clientX,a.clientY,a)))this.j=!0;else{this.Xa()||this.Xl(a);return}}c=Qsa(this,b,c);b=c.x;c=c.y;this.j&&this.dispatchEvent(new oY("beforedrag",this,a.clientX,a.clientY,a,b,c))&&(this.target.style.left=b+"px",
this.target.style.top=c+"px",this.dispatchEvent(new oY("drag",this,a.clientX,a.clientY,a,b,c)),a.preventDefault())}};function Qsa(a,b,c){var d=rg(ig(a.l).g);b+=d.x-a.A.x;c+=d.y-a.A.y;a.A=d;a.deltaX+=b;a.deltaY+=c;return new fg(Osa(a,a.deltaX),Psa(a,a.deltaY))}g.tu=function(a){var b=Qsa(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;var c=b.x;b=b.y;this.target.style.left=c+"px";this.target.style.top=b+"px";this.dispatchEvent(new oY("drag",this,a.clientX,a.clientY,a,c,b))};
function Osa(a,b){var c=a.L;a=isNaN(c.left)?null:c.left;c=isNaN(c.width)?0:c.width;return Math.min(null!=a?a+c:Infinity,Math.max(null!=a?a:-Infinity,b))}function Psa(a,b){var c=a.L;a=isNaN(c.top)?null:c.top;c=isNaN(c.height)?0:c.height;return Math.min(null!=a?a+c:Infinity,Math.max(null!=a?a:-Infinity,b))}function oY(a,b,c,d,e,f,h,k){z.call(this,a);this.clientX=c;this.clientY=d;this.s=e;this.left=ra(f)?f:b.deltaX;this.top=ra(h)?h:b.deltaY;this.j=!!k}w(oY,z);function pY(){A.call(this);this.G=[];this.Ca=[];this.I=[];this.ra=this.Z=this.U=!1}w(pY,A);g=pY.prototype;g.init=function(){if(!this.ra){for(var a,b=0;a=this.G[b];b++)this.U&&(Yd(a.element,"mousedown",a.lv,!1,a),this.N&&HH(a.element,this.N)),this.Z&&this.P&&HH(a.element,this.P);this.ra=!0}};
g.su=function(a){var b=a.j?null:this.s;if(b&&b.j){var c=a.clientX,d=a.clientY,e=rg(ig(this.A).g),f=c+e.x;e=d+e.y;var h;this.L&&(h=this.L(b.l,b.g,f,e));this.dispatchEvent(new qY("drag",this,this.g,b.j,b.l,b.K,c,d,f,e));b.j.dispatchEvent(new qY("drop",this,this.g,b.j,b.l,b.K,c,d,f,e,h,a.s))}this.dispatchEvent(new qY("dragend",this,this.g,b?b.j:void 0,b?b.l:void 0,b?b.K:void 0));de(this.l,"drag",this.nv,!1,this);de(this.l,"end",this.su,!1,this);de(kg(this.g.g).body,"selectstart",this.aA);for(a=0;b=this.I[a];a++)de(b.K,
"scroll",this.It,!1,this),b.g=[];this.l.dispose();yg(this.A);delete this.g;delete this.A;delete this.l;delete this.B;delete this.s};
g.nv=function(a){var b=rg(ig(this.A).g);var c=new fg(a.clientX+b.x,a.clientY+b.y);b=c.x;var d=c.y,e=this.s;this.dispatchEvent(new qY("drag",this,this.g,e?e.j:void 0,e?e.l:void 0,e?e.K:void 0,a.clientX,a.clientY,b,d));var f;if(e){this.L&&e.j&&(f=this.L(e.l,e.g,b,d));if(e.g.contains(c)&&f==this.ka)return;e.j&&(this.dispatchEvent(new qY("dragout",this,this.g,e.j,e.l,e.K)),e.j.dispatchEvent(new qY("dragout",this,this.g,e.j,e.l,e.K,void 0,void 0,void 0,void 0,this.ka)));this.ka=f;this.s=null}if(this.o.contains(c)){a:{for(var h=
0;e=this.B[h];h++)if(e.g.contains(c))if(e.o){if(e.o.j.contains(c)){c=e;break a}}else{c=e;break a}c=null}if((e=this.s=c)&&e.j)this.L&&(f=this.L(e.l,e.g,b,d)),b=new qY("dragover",this,this.g,e.j,e.l,e.K),b.N=f,this.dispatchEvent(b),e.j.dispatchEvent(new qY("dragover",this,this.g,e.j,e.l,e.K,a.clientX,a.clientY,void 0,void 0,f));else if(!e){this.j||(this.j=new Rsa(this.o.clone()));a=this.j.g;a.top=this.o.top;a.right=this.o.right;a.bottom=this.o.bottom;a.left=this.o.left;for(f=0;e=this.B[f];f++)c=e.g,
e.o&&(e=e.o.j,c=new DT(Math.max(c.top,e.top),Math.min(c.right,e.right),Math.min(c.bottom,e.bottom),Math.max(c.left,e.left))),e=null,b>=c.right?e=c.right>a.left?c.right:a.left:b<c.left&&(e=c.left<a.right?c.left:a.right),h=null,d>=c.bottom?h=c.bottom>a.top?c.bottom:a.top:d<c.top&&(h=c.top<a.bottom?c.top:a.bottom),null===e||null===h||(Math.abs(e-b)>Math.abs(h-d)?h=null:e=null),null!==e?e<=b?a.left=e:a.right=e:null!==h&&(h<=d?a.top=h:a.bottom=h);this.s=10<=(a.right-a.left)*(a.bottom-a.top)?this.j:null}}};
g.aA=function(){return!1};g.It=function(a){for(var b=0,c;c=this.I[b];b++)if(a.target==c.K){var d=c.o-c.K.scrollTop,e=c.l-c.K.scrollLeft;c.o=c.K.scrollTop;c.l=c.K.scrollLeft;this.j&&this.s==this.j&&(0<d?this.j.g.top+=d:this.j.g.bottom+=d,0<e?this.j.g.left+=e:this.j.g.right+=e);for(var f=0,h;h=c.g[f];f++)h=h.g,h.top+=d,h.left+=e,h.bottom+=d,h.right+=e,Ssa(this,h)}this.l.tu(a)};
function Ssa(a,b){1==a.B.length?a.o=new DT(b.top,b.right,b.bottom,b.left):(a=a.o,a.left=Math.min(b.left,a.left),a.right=Math.max(b.right,a.right),a.top=Math.min(b.top,a.top),a.bottom=Math.max(b.bottom,a.bottom))}g.J=function(){pY.C.J.call(this);for(var a,b=0;a=this.G[b];b++)this.U&&(de(a.element,"mousedown",a.lv,!1,a),this.N&&IH(a.element,this.N)),this.Z&&this.P&&IH(a.element,this.P),a.dispose();this.G.length=0};
function qY(a,b,c,d,e,f,h,k,l,m,n){z.call(this,a);this.s=b;this.j=c;this.L=e;this.clientX=h;this.clientY=k;this.N=n}w(qY,z);function rY(a,b){A.call(this);this.element=lg(document,a);this.data=b;this.xa=null;this.j=new Vx(this);La(this,Fa(Ma,this.j));this.g=null;if(!this.element)throw Error("Invalid argument");}w(rY,A);g=rY.prototype;g.getData=function(){return this.data};
g.lv=function(a){if(Od(a)){var b=a.target;b&&(this.j.H(b,"mousemove",this.mv,!1).H(b,"mouseout",this.mv,!1),this.j.H(kg(b),"mouseup",this.vF,!0),this.g=b,this.l=new fg(a.clientX,a.clientY))}};g.Pe=function(a){this.xa=a};
g.mv=function(a){var b=this.g;b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.l.x)+Math.abs(a.clientY-this.l.y)||b)if(this.j.removeAll(),b=this.xa,!b.g)if(b.g=this,0==b.dispatchEvent(new qY("dragstart",b,b.g,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a)))b.g=null;else{var c=this.g;a:{var d=c.cloneNode(!0);for(var e=(c||document).getElementsByTagName("TEXTAREA"),f=(d||document).getElementsByTagName("TEXTAREA"),h=0;h<e.length;h++)f[h].value=e[h].value;switch(c.tagName){case "TR":d=
sg("TABLE",null,sg("TBODY",null,d));break a;case "TD":case "TH":d=sg("TABLE",null,sg("TBODY",null,sg("TR",null,d)));break a;case "TEXTAREA":d.value=c.value}}b.oa&&HH(d,b.oa);b.A=d;d=kg(c);d.body.appendChild(b.A);e=b.A;f=HT(c);if(od){h=JT(c,"marginLeft");var k=JT(c,"marginRight"),l=JT(c,"marginTop");c=JT(c,"marginBottom");c=new DT(l,k,c,h)}else h=FT(c,"marginLeft"),k=FT(c,"marginRight"),l=FT(c,"marginTop"),c=FT(c,"marginBottom"),c=new DT(parseFloat(l),parseFloat(k),parseFloat(c),parseFloat(h));f.x-=
2*(c.left||0);f.y-=2*(c.top||0);e.style.position="absolute";e.style.left=f.x+"px";e.style.top=f.y+"px";c=new nY(e);b.l=c;b.l.I=b.Ia;Yd(b.l,"drag",b.nv,!1,b);Yd(b.l,"end",b.su,!1,b);Yd(d.body,"selectstart",b.aA);b.B=[];for(d=0;c=b.Ca[d];d++)for(e=0;k=c.G[e];e++){f=b;h=c;l=[k.element];for(var m=0;m<l.length;m++){var n=l[m],p=n;var r=HT(p);p=Mna(p);r=new DT(r.y,r.x+p.width,r.y+p.height,r.x);f.B.push(new Rsa(r,h,k,n));Ssa(f,r)}}b.o||(b.o=new DT(0,0,0,0));for(d=0;c=b.I[d];d++)c.g=[],c.l=c.K.scrollLeft,
c.o=c.K.scrollTop,e=HT(c.K),f=Mna(c.K),c.j=new DT(e.y,e.x+f.width,e.y+f.height,e.x);for(d=0;f=b.B[d];d++)for(e=0;c=b.I[e];e++)Dg(c.K,f.K)&&(c.g.push(f),f.o=c);b.s=null;for(d=0;c=b.I[d];d++)Yd(c.K,"scroll",b.It,!1,b);b.l.cp(a);a.preventDefault()}a.preventDefault()};g.vF=function(){this.j.removeAll();delete this.l;this.g=null};function Rsa(a,b,c,d){this.g=a;this.j=b;this.l=c;this.K=d||null;this.o=null};function sY(a,b){pY.call(this);a=new rY(a,b);a.Pe(this);this.G.push(a)}w(sY,pY);function tY(a,b){z.call(this,"urlImported",b);this.j=a}w(tY,z);tY.prototype.j=null;tY.prototype.gf=function(){return this.j};function uY(){A.call(this);this.g={}}w(uY,A);wa(uY);W.directive("dragDrop",[function(){return{restrict:"A",replace:!1,link:Tsa,scope:{ddTargetId:"@",ddData:"=",ddStart:"=?",ddEnd:"=?",ddOver:"=?",ddOut:"=?",ddDrop:"=",ddMin:"=?"}}}]);function Tsa(a,b){b=new Usa(a,b);a.$on("$destroy",b.destroy.bind(b))}
function Usa(a,b){this.v=a;this.xa=this.g=this.j=null;this.v.ddMin=a.ddMin?a.ddMin:50;this.j=new sY(b[0],a.ddData);this.g=new sY(a.ddTargetId);b=this.j;var c=this.g;b.Ca.push(c);c.Z=!0;b.U=!0;this.j.oa="c-dd-source__dragging";this.j.N="c-dd-source";this.g.P="c-dd-target";this.j.init();this.g.init();this.g.H("dragover",this.FB);this.g.H("dragout",this.Wr);this.g.H("drop",this.Wr);this.j.H("dragstart",this.fK,!1,this);this.j.H("dragend",this.eK,!1,this);a.ddOver&&this.g.H("dragover",this.QG,!1,this);
a.ddOut&&this.g.H("dragout",this.PG,!1,this);a.ddDrop&&this.g.H("drop",this.TG,!1,this)}g=Usa.prototype;g.destroy=function(){this.j.dispose();this.g.dispose();this.v=this.g=this.j=null};g.fK=function(a){Vsa();var b=a.j.element;b&&(b=Hg(b,"selectable"))&&(this.xa=$(b),this.xa.removeClass("selectable"),this.xa.addClass("unselectable"));this.v.ddStart&&this.v.ddStart(a.j.data,a)};
g.eK=function(a){Vsa();this.xa&&(this.xa.removeClass("unselectable"),this.xa.addClass("selectable"),this.xa=null);this.v.ddEnd&&this.v.ddEnd(a.j.data,a)};function Vsa(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(b){}else if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}}g.QG=function(a){this.v.ddOver(a.j.data,a)};g.PG=function(a){this.v.ddOut(a.j.data,a)};
g.TG=function(a){this.Wr(a);var b=new fg(a.s.l.B,a.s.l.G),c=new fg(a.clientX,a.clientY),d=b.x-c.x;b=b.y-c.y;Math.sqrt(d*d+b*b)<this.v.ddMin||this.v.ddDrop(a.j.data,a)};g.FB=function(a){HH(a.L.element,"c-dd-target__dragover")};g.Wr=function(a){IH(a.L.element,"c-dd-target__dragover")};W.directive("urlDragDrop",[function(){return{restrict:"A",replace:!1,link:Wsa,scope:{ddTargetId:"@",ddDrop:"=?",ddCapture:"@",ddElement:"@",ddText:"@?",enabled:"=?"}}}]);
function Wsa(a,b){b=new vY(a,b);a.$on("$destroy",b.destroy.bind(b))}function vY(a,b){this.v=a;this.K=a.ddElement?$(a.ddElement):b;a.enabled=void 0==a.enabled?!0:a.enabled;this.K[0]&&(Yd(this.K[0],"drop",this.j,"true"===a.ddCapture,this),Yd(this.K[0],"dragover",this.g,!1,this),Yd(this.K[0],"dragleave",this.g,!1,this),this.v.ddText?this.K.attr("data-text",this.v.ddText):this.K.attr("data-text","Drag & Drop"))}
vY.prototype.g=function(a){this.v.enabled&&(a=a.j,a.preventDefault(),a.stopPropagation(),!document.querySelector(".modal-backdrop")&&a&&a.currentTarget&&("dragover"==a.type?HH(a.currentTarget,"c-dd-target__dragover"):void 0!==a.relatedTarget&&0==$(a.currentTarget).find(a.relatedTarget).length&&IH(a.currentTarget,"c-dd-target__dragover")))};
vY.prototype.j=function(a){if(this.v.enabled&&(a=a.j,a.preventDefault(),a.stopPropagation(),IH(a.currentTarget,"c-dd-target__dragover"),!document.querySelector(".modal-backdrop")))if(null!=this.v.ddDrop)this.v.ddDrop(a);else if(a.dataTransfer.files&&0<a.dataTransfer.files.length){var b=uY.u();b.j&&b.j(a.dataTransfer.files)}else{var c=null;try{c=a.dataTransfer.getData("text")||a.dataTransfer.getData("text/plain")||a.dataTransfer.getData("text/x-moz-text-internal")}catch(f){}if(c)if(Az.test(c)){a=uY.u();
var d="",e="";for(b in a.g)Ub(c,b)&&(e=b,b=c.slice(0,c.indexOf(b))+b,d=c.replace(b,""));d.length||e.length?1==a.g[e].length?a.g[e][0].call(a,d):1<a.g[e].length&&a.dispatchEvent(new tY({url:c,title:"Handle URLs",handlers:a.g[e]})):a.l&&a.l(c)}else b=uY.u(),b.o&&b.o(c)}};vY.prototype.destroy=function(){de(this.K[0],"drop",this.j,"true"===this.v.ddCapture,this);de(this.K[0],"dragover",this.g,!1,this);de(this.K[0],"dragleave",this.g,!1,this);this.K=this.v=null};W.directive("areas",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/areas.html",controller:wY,controllerAs:"areasCtrl"}}]);function wY(a,b){mY.call(this,a,b,25);this.title="areas";try{this.scope.contextMenu=mF}catch(c){}this.scope.views=Xsa;this.g=new UX("areas",this.scope);this.onDrop=this.A.bind(this);UE.H("propertychange",this.o,!1,this);this.init()}w(wY,mY);wY.$inject=["$scope","$element"];var Xsa={None:-1,Tag:new lY(!1),Source:new WX(!1)};
wY.prototype.destroy=function(){UE.M("propertychange",this.o,!1,this);wY.C.destroy.call(this)};wY.prototype.Fp=function(){Msa()};wY.prototype.launch=wY.prototype.Fp;wY.prototype.Eq=function(){var a=this.element.find(".js-import-group"),b=dY;b&&a&&a.length&&b.open(void 0,{my:"left top+4",at:"left bottom",of:a})};wY.prototype.openImportMenu=wY.prototype.Eq;wY.prototype.Ej=function(){return this.scope.selected?0==this.scope.selected.length||"No results"==this.scope.selected[0].ba():!0};
wY.prototype.exportDisabled=wY.prototype.Ej;wY.prototype.Jf=function(){var a=this.scope.selected.map(function(a){return a instanceof lF&&(a=a.ee())?Ula(a):null}).filter(CA);EG(a)};wY.prototype["export"]=wY.prototype.Jf;wY.prototype.import=function(a){bR(void 0,a)};wY.prototype["import"]=wY.prototype.import;wY.prototype.o=function(a){a&&"toggle"!==a.l&&this.search()};wY.prototype.A=function(a){a.dataTransfer&&a.dataTransfer.files&&sf(Pw(a.dataTransfer.files[0]),this.import.bind(this),this.B.bind(this))};
wY.prototype.B=function(){At(Ct,"Could not handle file with drag and drop. Try again or use the browse capability.")};Fw("text/xml; subtype=COLUMNMAPPING",dS(/^columnmappings$/i,null),0,"text/xml");function xY(){pS.call(this);this.j=!1;this.log=Ysa}w(xY,pS);var Ysa=E.V("os.ui.column.mapping.ColumnMappingImportUI");
xY.prototype.Ib=function(a){var b=HD(mQ.u());b&&0<b.length?cK({confirm:this.l.bind(this,a),prompt:"You are importing a new set of Column Associations. This action will <b>wipe out all existing Column Associations and replace them with the imported set</b><br><br>Are you sure you want to proceed?",yesText:"Clear and Import",windowOptions:{x:"center",y:"center",label:"Import Column Associations","show-close":!1,"no-scroll":!0,width:400,height:"auto",icon:"fa fa-sign-in"}}):this.l(a)};
xY.prototype.l=function(a){var b=[];if((a=a.Ob())&&"string"===typeof a)try{var c=VA(a),d=Ag(c).querySelectorAll("columnMapping");c=0;for(var e=d.length;c<e;c++){var f=WA(d[c]),h=new kQ;h.restore({columnMapping:f});b.push(h)}}catch(k){E.error(this.log,"Failed to parse Column Associations! Stack: "+k.stack),At(Ct,"There was a problem importing the Column Associations. Please see the log for more details.",rs)}else E.ib(this.log,"No content was passed to the import process."),At(Ct,"We didn't find any data to import in that file! No changes were made to your Column Associations.",
ss);0<b.length&&(d=mQ.u(),d.clear(),tla(d,b),b="Successfully imported <b>"+b.length+"</b> Column "+(1===b.length?"Association.":"Associations."),At(Ct,b,ts))};W.directive("columnmappingnodeui",[function(){return{restrict:"E",replace:!0,template:'<div><span ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit the column mapping"></i></span><span ng-click="nodeUi.tryRemove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the column mapping"></i></span></div>',controller:yY,controllerAs:"nodeUi"}}]);function yY(a){this.v=a}yY.$inject=["$scope","$element"];
yY.prototype.Vk=function(){var a="Are you sure you want to remove the <b>"+this.v.item.g.getName()+"</b> column association from the application? <b>This action cannot be undone.</b>";cK({confirm:this.g.bind(this),prompt:a,yesText:"Remove",yesIcon:"fa fa-trash-o",yesButtonClass:"btn-danger",windowOptions:{label:"Remove Column Association",icon:"fa fa-trash-o",x:"center",y:400,width:325,height:"auto",modal:"true","no-scroll":"true",headerClass:"bg-danger u-bg-danger-text"}})};
yY.prototype.tryRemove=yY.prototype.Vk;yY.prototype.g=function(){var a=this.v.item.g;mQ.u().remove(a)};yY.prototype.Pc=function(){Zsa(this.v.item.g)};yY.prototype.edit=yY.prototype.Pc;function zY(){jz.call(this);this.g=null;pz(this,!1);this.j="<columnmappingnodeui></columnmappingnodeui>"}w(zY,jz);function $sa(a,b){b!==a.g&&a.zc(null);if(a.g=b){var c=b.getColumns();a.Da(b.getName());b=0;for(var d=c.length;b<d;b++){var e=c[b],f=e.layer;e=e.column;var h=e+" ("+f+")",k=new jz;-1!==f.indexOf("!!")&&(f=f.split("!!"),h="<b>"+e+"</b>  ("+f[0]+" - "+f[1]+")");k.Da(h);pz(k,!1);a.R(k)}}}zY.prototype.ba=function(){return this.g?this.g.getName()||"New Association":zY.C.ba.call(this)};
zY.prototype.lc=function(a){zY.C.lc.call(this,a);$sa(this,a.g)};W.directive("columnmappingexport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/column/mapping/columnmappingexport.html",controller:AY,controllerAs:"cmExportCtrl"}}]);function AY(a,b){this.v=a;this.K=b;this.j=a.mappings;this.g=a.selectedMappings;this.showExportType=0<this.g.length;this.exportType="all";this.persister=null;this.persisters=ata;b=new eS;this.persister=this.persisters[b.ba()]=b;this.v.$emit("window.ready");a.$on("$destroy",this.l.bind(this))}
AY.$inject=["$scope","$element"];var ata={};AY.prototype.l=function(){this.K=this.v=null};AY.prototype.accept=function(){for(var a=this.persister,b=this.v.title+".xml",c="all"===this.exportType?this.j:this.g,d="<columnMappings>",e=0,f=c.length;e<f;e++)d+=rla(c[e]);a.save(b,d+"</columnMappings>","text/xml; subtype=COLUMNMAPPING");this.close()};AY.prototype.accept=AY.prototype.accept;AY.prototype.close=function(){KE(this.K)};AY.prototype.close=AY.prototype.close;function BY(){jz.call(this);this.initialLayer=this.getFn=this.mapping=this.model=null;pz(this,!1)}w(BY,jz);BY.prototype.lc=function(a){BY.C.lc.call(this,a);this.model=a.model;this.mapping=a.mapping;this.getFn=a.getFn;this.initialLayer=a.initialLayer};W.directive("mappingexpression",[function(){return{restrict:"E",replace:!0,scope:{node:"="},templateUrl:"v1542394219/views/column/mapping/mappingexpression.html",controller:CY,controllerAs:"exprCtrl"}}]);
function CY(a,b,c){this.v=a;this.K=b;this.Ma=c;b=a.node;this.g=b.model;this.layer=b.initialLayer;this.columns=this.column=null;this.layer&&bta(this,this.layer);this.Ma(t(function(){var a=this.K.find(".js-mapping-expression__column-select");a.select2({placeholder:"Select column..."});this.K.find(".select2-choice").attr("tabIndex",0);this.columns||a.select2("disable")},this));a.$on("layerpicker.layerselected",this.o.bind(this));a.$watch("exprCtrl.column",this.l.bind(this))}
CY.$inject=["$scope","$element","$timeout"];CY.prototype.o=function(a,b){b&&bta(this,b)};CY.prototype.l=function(a){a&&(this.g.column=a.name);this.v.$emit("columnpicker.columnselected")};function bta(a,b){var c=b.se();a.g.layer=DY(b);a.v.node.initialLayer=b;c?(b=c.getColumns(),cta(a,b)):(a=a.j.bind(a),b.I=a,b.Xj())}CY.prototype.j=function(){var a=this.layer.se();a&&cta(this,a.getColumns())};
function cta(a,b){var c=a.g.column;a.column=null;b=b.filter(function(a){if("string"!==a.type&&"decimal"!==a.type)return!1;a.name===c&&(this.column=a);return!0},a);a.columns=b;a.g.column=null==a.column?null:a.g.column;a.Ma(t(function(){this.K.find(".js-mapping-expression__column-select").change().select2("enable")},a))}CY.prototype.PC=function(a){a=V.Ja(a.text);var b="";if(a){b=a.S();var c=a.La();c=c?xv(c):"white";b='<i class="fa fa-bars mr-1" style="color:'+c+'"></i>'+b;a.rb()&&(b+=" ("+a.rb()+")")}return b};
CY.prototype.formatter=CY.prototype.PC;W.directive("columnmodeltree",[function(){var a=iK();a.controller=EY;return a}]);function EY(a,b,c){jK.call(this,a,b,c)}w(EY,jK);EY.$inject=["$scope","$element","$compile"];EY.prototype.Bs=function(){return'<mappingexpression node="item"></mappingexpression>'};EY.prototype.Ih=function(){var a=EY.C.Ih.call(this);a.rowHeight=30;a.enableTextSelectionOnCells=!0;return a};W.directive("columnmappingform",[function(){return{restrict:"E",replace:!0,scope:{columnMapping:"="},templateUrl:"v1542394219/views/column/mapping/columnmappingform.html",controller:FY,controllerAs:"cmFormCtrl"}}]);
function FY(a,b,c){this.v=a;this.K=b;this.Ma=c;this.l=[];this.g=a.columnMapping;this.tree=[];this.duplicateLayerText="";this.notEnoughLayerText="A column association must include at least 2 different columns.";this.otherCMText="";dta(this);c(t(function(){this.K.find('input[name="name"]').focus()},this));a.$on("layerpicker.layerselected",this.j.bind(this));a.$on("columnpicker.columnselected",this.j.bind(this));a.$on("columnmapping.remove",this.s.bind(this));a.$on("$destroy",this.o.bind(this))}
FY.$inject=["$scope","$element","$timeout"];FY.prototype.o=function(){this.Ma=this.K=this.v=null};function dta(a){for(var b=pE(V),c=a.g.getColumns(),d={},e=0,f=b.length;e<f;e++){var h=b[e];try{!0===h.o&&(d[DY(h)]=h,a.l.push(h))}catch(k){}}if(0<c.length)for(b=0,e=c.length;b<e;b++)f=c[b],h=eta(a,f),h.initialLayer=d[f.layer],a.tree.push(h);else a.add(),a.add();a.Ma(a.j.bind(a))}
FY.prototype.add=function(){lQ(this.g,"","");var a=this.g.getColumns();a=eta(this,a[a.length-1]);this.tree.push(a);this.tree=this.tree.slice()};FY.prototype.add=FY.prototype.add;FY.prototype.s=function(a,b){a=this.tree.indexOf(b);-1!==a&&(this.tree.splice(a,1),this.tree=this.tree.slice(),X(this.v));qla(this.g,b.model);this.j()};
FY.prototype.j=function(){this.duplicateLayerText="";var a=this.g.getColumns(),b=Er(a,function(a){return a.layer||$b()}),c=1<a.length&&0<b.length,d=1<a.length;c&&(this.duplicateLayerText="Duplicate layers are not supported (<b>"+ib(this.tree,function(a){return DY(a.initialLayer)===b[0].layer}).initialLayer.S()+"</b>)");a=ib(a,function(a){return!a.layer||0==a.layer.length||!a.qe||0==a.qe.length});this.v.cmForm.$setValidity("duplicateLayer",!c);this.v.cmForm.$setValidity("notEnoughLayers",d);this.v.cmForm.$setValidity("incompleteLayers",
null==a)};function eta(a,b){var c=new BY;c.model=b;c.mapping=a.g;a=a.nh.bind(a);c.getFn=a;return c}FY.prototype.Wb=function(){this.otherCMText="";for(var a=this.g.getColumns(),b=this.g.D(),c=!0,d=0,e=a.length;d<e;d++){var f=a[d],h=nQ(f);if((h=oQ(mQ.u(),h))&&h.D()!==b){c=!1;this.otherCMText="One of your columns (<b>"+f.column+"</b>) is currently in use on the <b>"+h.getName()+"</b> column association.";break}}this.v.cmForm.$setValidity("reusedColumn",c)};FY.prototype.validate=FY.prototype.Wb;
FY.prototype.confirm=function(){var a=mQ.u();a.remove(this.g.D());a.add(this.g);this.cancel()};FY.prototype.confirm=FY.prototype.confirm;FY.prototype.cancel=function(){KE(this.K)};FY.prototype.cancel=FY.prototype.cancel;FY.prototype.nh=function(){return this.l};FY.prototype.getLayersFunction=FY.prototype.nh;function GY(){tz.call(this);OQ(KQ.u(),"text/xml; subtype=COLUMNMAPPING",new xY);this.Da("Column Associations");this.fb("Configure your column associations");this.vb(["column","mapping","data"]);this.wc("fa fa-columns");this.fd="columnmappingsettings"}w(GY,tz);GY.prototype.D=function(){return"columnMappingSettings"};W.directive("columnmappingsettings",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/column/mapping/columnmappingsettings.html",controller:HY,controllerAs:"cmCtrl"}}]);
function HY(a,b){this.v=a;this.g=mQ.u();this.g.H("mappingsChange",this.j,!1,this);this.Ma=b;this.mappingTree=[];a.$on("$destroy",this.l.bind(this));this.j()}HY.$inject=["$scope","$timeout"];HY.prototype.l=function(){this.g.M("mappingsChange",this.j,!1,this);this.Ma=this.v=this.g=null};HY.prototype.j=function(){var a=HD(this.g);a=a.sort(fta);this.mappingTree=a.map(gta);X(this.v);this.Ma(t(function(){this.v.$broadcast("slickgrid.invalidateRows")},this))};HY.prototype.create=function(){Zsa()};
HY.prototype.create=HY.prototype.create;HY.prototype.Jf=function(){var a=this.v.selected,b=HD(mQ.u()),c=[];if(0<a.length)for(var d=0,e=a.length;d<e;d++)if(a[d]instanceof zY)mb(c,a[d].g);else{var f=a[d].getParent();f instanceof zY&&mb(c,f.g)}FE({label:"Export Column Associations",icon:"fa fa-download",x:"center",y:"center",width:400,height:"auto","show-close":"true",modal:"true"},"<columnmappingexport></columnmappingexport>",void 0,void 0,void 0,{mappings:b,selectedMappings:c,yesButtonClass:"btn-danger"})};
HY.prototype["export"]=HY.prototype.Jf;HY.prototype.import=function(){var a=new RQ;TQ(a,new lE("importFile"));SQ(a)};HY.prototype["import"]=HY.prototype.import;
function Zsa(a){if(IE("columnmappingform"))HE("columnmappingform");else{var b={id:"columnmappingform",x:"center",y:"center",label:(a?"Edit":"Create")+" Column Association","show-close":!0,"no-scroll":!0,modal:!0,width:800,height:400,icon:"fa fa-columns"};a={columnMapping:a?a.clone():new kQ};FE(b,'<columnmappingform column-mapping="columnMapping"></columnmappingform>',void 0,void 0,void 0,a)}}function gta(a){var b=new zY;$sa(b,a);return b}function fta(a,b){return Bb(a.getName(),b.getName())};var hta=void 0;function AU(){A.call(this);this.g=[];this.j=[]}w(AU,A);wa(AU);var AG=AU.u(),IY=E.V("os.ui.file.ExportManager");function JY(a,b){if(q(b))for(var c=0,d=b.length;c<d;c++)JY(a,b[c]);else-1==a.g.indexOf(b)?(a.g.push(b),a.g.sort(ita)):E.za(IY,"Attempted adding duplicate export method: "+b.ba())}function zG(a){for(var b=[],c=0,d=a.g.length;c<d;c++)b.push(new a.g[c].constructor);return b}
function jta(a,b){if(q(b))for(var c=0,d=b.length;c<d;c++)jta(a,b[c]);else-1==a.j.indexOf(b)?(a.j.push(b),a.j.sort(ita)):E.za(IY,"Attempted adding duplicate persistence method: "+b.ba())}function BG(a){for(var b=[],c=0,d=a.j.length;c<d;c++)b.push(new a.j[c].constructor);return b}
function CG(a,b,c,d,e){var f=AG;if(null==a||0==a.length)E.error(IY,"No data was supplied for the export.");else if(null!=d&&null!=e){d.setItems(a);d.js(b);d.Qh(c);try{d.lb()?(d.H("complete",Fa(f.l,d,e),!1,f),d.H("error",f.o,!1,f),d.Xc()):(d.Xc(),f.l(d,e))}catch(h){c='Failed exporting "'+c+'" to '+d.ba()+": "+h.message,At(Ct,c,rs,IY),d.dispose()}}else 0<f.g.length&&0<f.j.length?a&&0<a.length&&(IE("exportDialog")?HE("exportDialog"):(d={options:{Fj:d,fields:b,items:a,zk:e,title:c},exporters:zG(f),persisters:BG(f)},
FE({id:"exportDialog",label:"Export: "+c,icon:"fa fa-download",x:"center",y:"center",width:"400","min-width":"400","max-width":"800",height:"auto","min-height":"250","max-height":"600",modal:"true","show-close":"true"},"<exportdialog></exportdialog>",void 0,void 0,void 0,d))):0==f.g.length?E.error(IY,'There are no export methods defined. Can not export "'+c+'".'):0==f.j.length&&E.error(IY,'There are no persistence methods defined. Can not export "'+c+'".')}
AU.prototype.l=function(a,b){var c=a.Yf,d=a.getName(),e="."+a.getExtension();a.dispose();c&&d?(!Jb(d,e)&&1<e.length&&(d+=e),b.save(d,c,a.Pj())):(a='Failed exporting "'+a.getName()+'" to '+a.ba()+". Exporter result was empty.",At(Ct,a,rs,IY))};AU.prototype.o=function(a){Ma(a.target)};function ita(a,b){return Bb(a.ba(),b.ba())};W.directive("anytypeimport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/file/anytypeimport.html",controller:KY,controllerAs:"anytype"}}]);function KY(a,b){this.v=a;this.K=b;this.v.isZip=this.v.file?Jw(this.v.file.Ob()):!1;this.v.$emit("window.ready");this.v.$on("destroy",t(function(){this.K=this.v=null},this))}KY.$inject=["$scope","$element"];
KY.prototype.accept=function(){try{this.v["import"].Ib(this.v.file,this.v.config)}catch(a){At(zt.u(),"Error loading file: <b>"+this.v.file.getFileName()+"</b>",rs)}this.close()};KY.prototype.accept=KY.prototype.accept;KY.prototype.close=function(){KE(this.K)};KY.prototype.close=KY.prototype.close;function LY(){this.j=!1}w(LY,oS);
LY.prototype.Ib=function(a,b){var c=Gla(),d=[];db(c,function(a){a.S()&&(a.title=a.S(),d.push(a))});Ab(d,function(a,b){return a.S()>b.S()?1:0});if(0<d.length)b={importers:d,file:a,config:b},a=a.Ob(),a={label:a instanceof ArrayBuffer&&Jw(a)?"Import Zip":"Choose Import Method",icon:"fa fa-cloud-download",x:"center",y:"center",width:"450",height:"auto","show-close":"true","no-scroll":"true"},FE(a,"anytypeimport",void 0,void 0,void 0,b);else throw Error("No Importers to select from");};function MY(){}var kta=E.V("os.ui.file.FileXTHandler");MY.prototype.Eh=function(){return["file.load"]};MY.prototype.Xc=function(a,b){a=a.url;"file.load"===b&&(Ib(a,"local://")?tf(py(new my("com.bitsys.db",2),a),this.j,this.g,this):(C.dispatchEvent(new lE("importUrl",a)),lsa()))};MY.prototype.j=function(a){ny(new my("com.bitsys.db",2),a);C.dispatchEvent(new lE("importFile",a));lsa()};
MY.prototype.g=function(a){var b=[];if("string"===typeof a){var c=400;b.push(a)}else c=404,b.push("File not found in local storage!");E.error(kta,b.toString()+" Status code: "+c)};W.directive("importdialog",[function(){return{restrict:"E",replace:!0,scope:{method:"=",manager:"=?",hideCancel:"=?",confirmText:"=?",onClose:"=?"},templateUrl:"v1542394219/views/file/importdialog.html",controller:NY,controllerAs:"importdialog"}}]);
function NY(a,b){this.v=a;this.K=b;this.j=!1;this.url=this.file=null;this.hideCancel=a.hideCancel||!1;this.loading=this.fileChosen=!1;a.confirmText=a.confirmText||"Next";this.g=sg("INPUT",{type:"file",name:"file","class":"d-none"});lg(document,"js-window__container").appendChild(this.g);Yd(this.g,"change",this.hy,!1,this);this.K.find('input[name="url"]').focus();a.$emit("window.ready");a.$on("$destroy",this.l.bind(this))}NY.$inject=["$scope","$element"];var lta=E.V("os.ui.file.ImportDialogCtrl");
NY.prototype.l=function(){de(this.g,"change",this.hy,!1,this);yg(this.g);this.file=this.g=null;this.j||this.v.method&&this.v.method.dispatchEvent("cancel");this.K=this.v=null};NY.prototype.accept=function(){if(this.v.method){this.loading=!0;var a=this.v.method;if(this.fileChosen){if(this.file){var b=Pw(this.file);b&&tf(b,this.yK,this.xK,this)}}else var c=this.url;c&&(a.Lb(c),a.Ra("complete",this.bj,!1,this),a.Ra("cancel",this.bj,!1,this),a.Ra("error",this.ir,!1,this),a.ak())}else this.close()};
NY.prototype.accept=NY.prototype.accept;NY.prototype.close=function(){if(this.v&&this.v.onClose)this.v.onClose();KE(this.K)};NY.prototype.close=NY.prototype.close;NY.prototype.yj=function(){this.g&&(this.g.value=null);this.K&&this.K.find('input[name="url"]').focus();this.url=null;this.fileChosen=!1};NY.prototype.clearFile=NY.prototype.yj;NY.prototype.No=function(){if(this.v&&this.v.manager){var a=this.v.manager.No();if(0<a.length){var b="<ul>";a.forEach(function(a){b+="<li>"+a+"</li>"});b+="</ul>"}}return b};
NY.prototype.getImportDetails=NY.prototype.No;NY.prototype.xJ=function(){this.g.click()};NY.prototype.openFileBrowser=NY.prototype.xJ;g=NY.prototype;g.hy=function(){this.g.files&&0<this.g.files.length&&(this.file=this.g.files[0]);this.url=null!=this.file?this.file.name:null;this.fileChosen=!0;X(this.v)};g.yK=function(a){this.loading=!1;if(a){var b=this.v.method;b.j=a;b.ak();this.j=!0}this.close()};
g.xK=function(a){this.loading=!1;a&&"string"===typeof a||(a='Unable to load file "'+(this.file?this.file.name:"unknown")+'"!');At(Ct,a,rs,lta);this.close()};g.bj=function(a){a=a.target;a.M("complete",this.bj,!1,this);a.M("cancel",this.bj,!1,this);a.M("error",this.ir,!1,this);this.j=!0;this.loading=!1;this.close()};g.ir=function(a){a=a.target;a.M("complete",this.bj,!1,this);a.M("cancel",this.bj,!1,this);a.M("error",this.ir,!1,this);this.loading=!1};function GQ(a){IQ.call(this);this.log=mta;this.l=!!a}w(GQ,IQ);var mta=E.V("os.ui.file.method.ImportMethod");GQ.prototype.Jq=function(){return 100};GQ.prototype.clone=function(){var a=new this.constructor;a.l=this.l;return a};
GQ.prototype.ak=function(a){var b=this.j,c=this.Ka();b||c?c?this.Ki():b&&this.dispatchEvent("complete"):(a={manager:a&&a.manager||KQ.u(),method:this},FE({id:"urlimport",label:"Import Data",icon:"fa fa-cloud-download",x:"center",y:"center",width:"400","min-width":"400","max-width":"400",height:"auto",modal:"true","show-close":"true","no-scroll":"true"},'<importdialog manager="manager" method="method"></importdialog>',void 0,void 0,void 0,a))};function OY(a,b){yK.call(this,a);this.g=b;this.filter&&(this.title=(b?"Enable":"Disable")+' filter "'+this.filter.S()+'"')}w(OY,yK);OY.prototype.Fa=function(){if(zK(this)){this.state="executing";try{return PJ.toggle(this.filter,this.g),this.g||DK(this),this.state="success",!0}catch(a){}}return!1};OY.prototype.Cb=function(){this.state="reverting";try{return PJ.toggle(this.filter,!this.g),this.g||CK(this),this.state="ready",!0}catch(a){}return!1};function PY(a){jz.call(this);this.g=null;a&&this.uk(a);this.j="<filternodeui></filternodeui>"}w(PY,jz);g=PY.prototype;g.Ga=function(a){var b=this.getState();PY.C.Ga.call(this,a);a=this.getState();b!=a&&this.g&&(b="on"===a,"both"!==a&&this.g.isEnabled()!==b&&this.g.eb(b))};g.gb=function(){return this.g};
g.uk=function(a){if(a!==this.g){this.g&&this.g.M("propertychange",this.tk,!1,this);var b=this.g;if(this.g=a)this.g.H("propertychange",this.tk,!1,this),this.ga(this.g.D()),this.Da(this.g.S()),this.Ga(this.g.isEnabled()?"on":"off");oz(this,this.Co());this.dispatchEvent(new U("filter",a,b))}};g.J=function(){this.g&&(this.g.M("propertychange",this.tk,!1,this),this.g=null);PY.C.J.call(this)};g.D=function(){return this.g?this.g.D():PY.C.D.call(this)};g.ba=function(){return this.g?this.g.S():PY.C.ba.call(this)};
g.je=function(){var a="";this.g&&(a+=this.g.S(),a+=" "+this.g.qb(),a+=" "+this.g.type);return a};g.getTags=function(){return null};g.Co=function(){var a="";this.g&&(a+="Description: "+(this.g.qb()||"None provided."),a+="\nFilter: "+LJ(fJ(this.g),1E3));return a};g.lc=function(a){PY.C.lc.call(this,a);this.uk(a.gb())};g.tk=function(a){"enabled"==a.l&&this.Ga(this.g.isEnabled()?"on":"off")};function nta(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canCopy()" ng-click="nodeUi.copy()"><i class="fa fa-copy fa-fw c-glyph" title="Copy"></i></span><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit"></i></span><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove"></i></span></span>',controller:QY,controllerAs:"nodeUi"}}
W.directive("filternodeui",[nta]);function QY(a,b){eF.call(this,a,b)}w(QY,eF);QY.$inject=["$scope","$element"];QY.prototype.remove=function(){var a=new $X(this.scope.item.gb());gF(hF.u(),a);Q(R.u(),"filters.remove",1)};QY.prototype.remove=QY.prototype.remove;QY.prototype.hh=function(){var a=this.scope.item.gb();return void 0!==YE(WE)[a.T()]};QY.prototype.canEdit=QY.prototype.hh;QY.prototype.Pc=function(){this.scope.$emit("filterEdit",this.scope.item.gb());Q(R.u(),"filters.edit",1)};
QY.prototype.edit=QY.prototype.Pc;QY.prototype.UB=function(){var a=V.Ja(this.scope.item.gb().T()),b=YE(WE);return 0<kc(b)&&!!a};QY.prototype.canCopy=QY.prototype.UB;QY.prototype.copy=function(){this.scope.$emit("filterCopy",this.scope.item.gb());Q(R.u(),"filters.copy",1)};QY.prototype.copy=QY.prototype.copy;function RY(a){PY.call(this,a);WE.H("propertychange",this.lx,!1,this)}w(RY,PY);g=RY.prototype;g.J=function(){WE.M("propertychange",this.lx,!1,this);RY.C.J.call(this)};
g.uk=function(a){if(a!==this.g){this.g&&this.g.M("propertychange",this.tk,!1,this);var b=this.g;if(this.g=a)this.g.H("propertychange",this.tk,!1,this),this.ga(this.g.D()),this.Da(this.g.S()),this.Ga(this.g.isEnabled()?"on":"off"),oz(this,LJ(fJ(this.g),1E3)),this.j="<filternodeui></filternodeui>";this.dispatchEvent(new U("filter",a,b))}null==T.u().W(this.g.T())&&(this.cf=!0)};g.lx=function(){this.dispatchEvent(new U("icons"))};
g.Ga=function(a){if("both"!==a){var b=this.getState();nz(this,a);a=this.getState();if(b!=a&&this.g&&(b="on"===a,a=this.g.isEnabled(),b!==a)){a=[];a.push(new OY(this.g,b));if(b){var c=WE.getEntries(this.g.T()),d={layerId:this.g.T(),areaId:"*",filterId:this.g.D(),includeArea:!0,filterGroup:!0};c.push(d);a.push(new vK(c,!0,this.g.T(),!0))}0<a.length&&(c=new oF,c.Zb(a),c.title=b?"Enable":"Disable Filter",gF(hF.u(),c))}}};
g.Hc=function(){var a=this.gb(),b="u-fa-badge-times",c="inactive";XO(WE,a.D())&&null!=T.u().W(a.T())&&(b="u-fa-badge-check",c="active");return' <i class="fa fa-fw fa-filter position-relative '+b+'" title="This filter is '+c+'"></i> '};function SY(a,b,c){HX.call(this,[],a,b,c)}w(SY,TX);SY.prototype.Ol=function(){return HK(PJ)};SY.prototype.Cn=function(a){return new RY(a)};SY.prototype.El=function(a){var b=HK(PJ);if(b&&0<b.length)for(var c=0,d=b.length;c<d;c++){var e=new RY;e.uk(b[c]);a.push(e)}else JX(this,a)};W.directive("filtergroupui",[function(){return{restrict:"AE",replace:!0,template:'<span class="float-right"><select class="filter-select" ng-model="groupUi.group" ng-change="groupUi.onGroup()" ng-options="key for (key, value) in groupUi.groups" title="Whether results can match any filter or must match all filters."/></span>',controller:TY,controllerAs:"groupUi"}}]);
function TY(a){this.v=a;a=BK.u();a.H("filterGroupingChanged",this.g,!1,this);this.group=a.vi(this.v.item.D());this.groups=ota;this.v.$on("$destroy",this.j.bind(this))}TY.$inject=["$scope","$element"];var ota={Any:!1,All:!0};TY.prototype.j=function(){BK.u().M("filterGroupingChanged",this.g,!1,this)};TY.prototype.g=function(a){a.key==this.v.item.D()&&(this.group=BK.u().vi(a.key))};TY.prototype.xH=function(){BK.u().Xg(this.v.item.D(),this.group)};TY.prototype.onGroup=TY.prototype.xH;function UY(a){VX.call(this);this.o=a||!1}w(UY,VX);UY.prototype.Pd=function(a){var b=[];if(a=a.gb().type)try{var c=a.indexOf("#");if(-1!=c){a=a.substring(c+1);var d=a.indexOf("#");-1!=d&&(a=a.substring(0,d))}}catch(e){}else a="Unknown";mb(b,a);return b};UY.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a);pz(b,!1);b.collapsed=!1;this.o&&b.Bf("<filtergroupui></filtergroupui>");(a=V.Ja(a))&&b.Da(a.S()+" ("+a.rb()+")");return b};function VY(a){UY.call(this);this.j=a}w(VY,UY);
VY.prototype.Pd=function(a){var b=[],c=a.gb().type;a="Unknown";if(c){var d=PJ.ld(c);if(d instanceof MK)a=d.S(),this.j&&(a+=" "+d.Nf()),(c=d.rb())&&(a+=" ("+c+")");else{a=c;c=this.j;d=a.indexOf("#");if(-1!=d)if(Ub(a.substring(0,d),"state"))a=a.substring(a.lastIndexOf("#")+1)+" (state file)";else if(a=a.substring(d+1),d=a.indexOf("#"),-1!=d){var e=a.substring(d+1);a=c&&e?a.substring(0,d)+" "+ec(e):a.substring(0,d)}a=a.replace(/_/g," ");a+=" (not loaded)"}}mb(b,a);return b};W.directive("filtertree",[function(){return{restrict:"AE",replace:!0,scope:{type:"="},template:'<div><slicktree x-data="filters" selected="selectedFilter" checkbox-tooltip="Enable or disable the filter" show-root="true"></slicktree></div>',controller:WY,controllerAs:"filterTree"}}]);function WY(a){this.v=a;this.j=new HX([],"filters",a);BK.u().H("filtersRefresh",this.g,!1,this);a.$watch("type",this.g.bind(this));a.$on("$destroy",this.l.bind(this));this.g()}WY.$inject=["$scope"];
WY.prototype.l=function(){BK.u().M("filtersRefresh",this.g,!1,this);this.v=null};var pta=new UY;WY.prototype.g=function(){var a=this.v.type,b=HK(BK.u(),a),c=[];if(b)for(var d=0,e=b.length;d<e;d++){var f=new PY;f.uk(b[d]);c.push(f)}this.j.l=c;IX(this.j,"",a?null:pta);X(this.v)};var XY=new IF(new HF({type:"root",children:[{label:"Show",eventType:"enable",tooltip:"Shows the filter",da:['<i class="fa fa-fw fa-check-square-o"></i>'],sort:0},{label:"Hide",eventType:"disable",tooltip:"Hides the filter",da:['<i class="fa fa-fw fa-square-o"></i>'],sort:10},{label:"Turn filter on",eventType:"filter:apply",tooltip:"Apply the filter to all areas for the query",da:['<i class="fa fa-fw fa-filter"></i>'],sort:20},{label:"Turn filter off",eventType:"filter:unapply",tooltip:"Remove the filter from all areas for the query",
da:['<i class="fa fa-fw fa-ban"></i>'],sort:30},{label:"Remove",eventType:"filter:remove",tooltip:"Removes the filter",da:['<i class="fa fa-fw fa-times"></i>'],sort:40},{label:"Export Filter",eventType:"export",tooltip:"Export the filter",da:['<i class="fa fa-fw fa-download"></i>'],sort:50}]}));function YY(a){return function(b){this.visible=a(b)}}function ZY(a){var b=[];if(a){for(var c=0,d=a.length;c<d;c++){var e=a[c];e instanceof RY?b.push(e.gb()):b=b.concat(ZY(e.na()))}yb(b)}return b}
function $Y(a){return null!=T.u().W(a)}function qta(a){a=ZY(a);for(var b=0,c=a.length;b<c;b++)if(a[b].isEnabled()&&$Y(a[b].T()))return!0;return!1}function rta(a){a=ZY(a);for(var b=0,c=a.length;b<c;b++)if(!a[b].isEnabled()&&$Y(a[b].T()))return!0;return!1}function sta(a){a=ZY(a);for(var b=0,c=a.length;b<c;b++)if(XO(WE,a[b].D())&&$Y(a[b].T()))return!0;return!1}function tta(a){a=ZY(a);for(var b=0,c=a.length;b<c;b++)if(!XO(WE,a[b].D())&&a[b].isEnabled()&&$Y(a[b].T()))return!0;return!1}
function uta(a){return 0<ZY(a).length}
function aZ(a){var b=a.getContext();if(b){var c=[],d="";b=ZY(b);switch(a.type){case "disable":d="Disable filter";a=0;for(var e=b.length;a<e;a++)c.push(new OY(b[a],!1));break;case "filter:remove":d="Remove filter";a=0;for(e=b.length;a<e;a++)c.push(new $X(b[a]));break;case "export":a.preventDefault();a.stopPropagation();PJ.dispatchEvent(new gJ("exportFilter"));break;case "enable":case "filter:apply":var f=[];a=0;for(e=b.length;a<e;a++){var h=b[a];h.isEnabled()?d="Turn on filter":(c.push(new OY(h,!0)),
d="Enable and turn on filter");f=f.concat(WE.getEntries(h.T()));h={layerId:h.T(),areaId:"*",filterId:h.D(),includeArea:!0,filterGroup:!0};f.push(h)}yb(f,void 0,function(a){return JSON.stringify(a)});c.push(new vK(f,!0,"all",!0));break;case "filter:unapply":d="Turn off filter";var k=WE.getEntries();f=[];a=0;for(e=b.length;a<e;a++)h=b[a],f=f.concat(WE.getEntries(null,null,h.D()));yb(f,void 0,function(a){return JSON.stringify(a)});db(f,function(a){qb(k,a)});c.push(new vK(k,!1,"all",!0))}0<c.length&&
(b=new oF,b.Zb(c),b.title=d+(1<c.length?"s":""),gF(hF.u(),b))}};W.directive("filters",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/filters.html",controller:bZ,controllerAs:"filtersCtrl"}}]);
function bZ(a,b){mY.call(this,a,b,25);this.title="filters";try{this.scope.contextMenu=XY}catch(c){}this.l="Layer Type";this.onDrop=this.o.bind(this);this.g=new SY("filters",this.scope);this.scope.views=vta;this.init();a.$on("filterCopy",this.DG.bind(this));a.$on("filterEdit",this.ZG.bind(this));a.$on("filterComplete",this.gK.bind(this));PJ.H("propertychange",this.Qx,!1,this);PJ.H("filtersRefresh",this.search,!1,this);PJ.H("exportFilter",this.Jf,!1,this);a=T.u();a.H("addLayer",this.search,!1,this);
a.H("removeLayer",this.search,!1,this)}w(bZ,mY);bZ.$inject=["$scope","$element"];var vta={None:-1,Layer:new VY,"Layer Type":new VY(!0)};bZ.prototype.destroy=function(){PJ.M("exportFilter",this.Jf,!1,this);PJ.M("filtersRefresh",this.search,!1,this);PJ.M("propertychange",this.Qx,!1,this);var a=T.u();a.M("addLayer",this.search,!1,this);a.M("removeLayer",this.search,!1,this);bZ.C.destroy.call(this)};bZ.prototype.Fp=function(){Msa();Q(R.u(),"filters.advancedOpen",1)};bZ.prototype.launch=bZ.prototype.Fp;
bZ.prototype.Jf=function(){vsa(this.B.bind(this))};bZ.prototype["export"]=bZ.prototype.Jf;bZ.prototype.Ej=function(){var a=HK(PJ);return a&&0<a.length?!1:!0};bZ.prototype.exportDisabled=bZ.prototype.Ej;bZ.prototype.B=function(a,b){var c=[];"selected"!=b?wta(this,this.scope.filters,c,"active"==b):this.scope.selected&&this.scope.selected.length?c=this.scope.selected:this.scope.selected&&(c=[this.scope.selected]);c=eb(c,function(a){return a instanceof RY});wsa(a,c)};
function wta(a,b,c,d){if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e];if(h.na())wta(a,h.na(),c,d);else if((d&&"on"==h.getState()||!d)&&h.gb()){var k=h.D();void 0!==k&&"*"!=k&&c.push(h)}}}bZ.prototype.import=function(a){bR(void 0,a)};bZ.prototype["import"]=bZ.prototype.import;g=bZ.prototype;g.ZG=function(a,b){a=PJ.ld(b.T());var c=null;try{a&&(c=a.Fe())}catch(d){}c&&JK(b.T(),c,this.Hf.bind(this),b)};g.gK=function(a,b){a.stopPropagation();this.Hf(b)};
g.Hf=function(a){if(a){var b=PJ.pb(a.D());if(b){b=new $X(b);var c=new FK(a),d=new oF;d.Zb([b,c]);d.title="Edit Filter "+a.S();gF(hF.u(),d)}else gF(hF.u(),new FK(a))}};g.DG=function(a,b){KK(b,b.T())};g.Qx=function(a){a&&"toggle"!==a.l&&this.search()};g.yH=function(){this.search();Q(R.u(),"filters.groupBy",1)};bZ.prototype.onGroupChange=bZ.prototype.yH;bZ.prototype.HI=function(){this.search();Q(R.u(),"filters.search",1)};bZ.prototype.onSearchTermChange=bZ.prototype.HI;
bZ.prototype.o=function(a){a.dataTransfer&&a.dataTransfer.files&&sf(Pw(a.dataTransfer.files[0]),this.import.bind(this),this.A.bind(this))};bZ.prototype.A=function(){At(Ct,"Could not handle file with drag and drop. Try again or use the browse capability.")};function xta(){bsa("metrics")};function cZ(a,b){this.v=a;this.Ma=b;this.g=hF.u();this.g.H("command_added",this.Dt,!1,this);this.g.H("command_executing",this.Ft,!1,this);this.g.H("command_executed",this.Et,!1,this);this.g.H("command_reverting",this.Ht,!1,this);this.g.H("command_reverted",this.Gt,!1,this);this.g.H("history_limit_changed",this.ev,!1,this);this.showHistoryView=!1;this.current=this.g.g;this.processingIndex=-1;this.newCommand=null;this.commandHistory=this.g.j;a.$on("$destroy",this.l.bind(this))}
cZ.$inject=["$scope","$timeout"];cZ.prototype.l=function(){this.g.M("command_added",this.Dt,!1,this);this.g.M("command_executing",this.Ft,!1,this);this.g.M("command_executed",this.Et,!1,this);this.g.M("command_reverting",this.Ht,!1,this);this.g.M("command_reverted",this.Gt,!1,this);this.g.M("history_limit_changed",this.ev,!1,this);this.v=this.Ma=null};
cZ.prototype.jo=function(){cK({confirm:this.j.bind(this),prompt:"Are you sure you want to clear the application history? This action cannot be undone.",yesText:"Clear",yesIcon:"fa fa-trash-o",yesButtonClass:"btn-danger",windowOptions:{label:"Clear History",icon:"fa fa-trash-o",x:"center",y:"center",width:"325",height:"auto",modal:"true",noScroll:"true",headerClass:"bg-danger u-bg-danger-text"}})};cZ.prototype.clearHistory=cZ.prototype.jo;
cZ.prototype.j=function(){var a=this.g.s;zF(this.g,0);zF(this.g,a)};cZ.prototype.tN=function(){this.showHistoryView=!this.showHistoryView};cZ.prototype.toggleHistoryView=cZ.prototype.tN;cZ.prototype.Mk=function(a){this.current!=a&&(this.v.$emit("historyProcessing",!0),this.g.Mk(a))};cZ.prototype.setIndex=cZ.prototype.Mk;g=cZ.prototype;g.Dt=function(){this.Ma(t(function(){this.current=this.g.g;var a=document.getElementById("js-history__scroll");a.scrollTop=a.scrollHeight},this))};
g.Ft=function(a){this.Ma(t(function(){this.current==this.commandHistory.length-1?this.newCommand=a.j:this.processingIndex=this.current+1;this.v.$emit("historyProcessing",!0)},this))};g.Ht=function(){this.Ma(t(function(){this.processingIndex=this.current=this.g.g;this.v.$emit("historyProcessing",!0)},this))};g.Et=function(){this.Ma(t(function(){this.newCommand=null;this.processingIndex=-1;this.current=this.g.g;this.v.$emit("historyProcessing",!1)},this))};
g.Gt=function(){this.Ma(t(function(){this.processingIndex=-1;this.current=this.g.g;this.v.$emit("historyProcessing",!1)},this))};g.ev=function(){this.Ma(t(function(){var a=document.getElementById("historyScroll");a.scrollTop=0<this.commandHistory.length?a.scrollHeight:0},this))};W.directive("history",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/windows/history.html",controller:cZ,controllerAs:"historyView"}}]);function yta(a){var b=[];if(a)if(Ov(a,"os.source.Vector"))b.push(a);else if(q(a))for(var c=0,d=a.length;c<d;c++)if(Ov(a[c],"os.source.Vector"))b.push(a[c]);else if(a[c]instanceof HA){var e=a[c].W();e instanceof MK&&(e=e.O())&&b.push(e)}return b};W.directive("export",[function(){var a=xG();a.controller=dZ;return a}]);function dZ(a,b,c){yG.call(this,a,b,c);a.itemText="feature";a.allowMultiple=!1;a.showLabels=!1;b=a.initSources=this.g.sources;c=this.scope.exporter;if(b&&1<b.length&&(!c||!c.Sh()))for(var d in this.exporters)b=this.exporters[d],b.Sh()&&(this.scope.exporter=b);a.$on("exportoptions:change",this.s.bind(this))}w(dZ,yG);dZ.$inject=["$scope","$element","$compile"];dZ.prototype.o=function(){return'<h5 class="mt-3 text-center">Sources to Export</h5><exportoptions init-sources="initSources" allow-multiple="allowMultiple" show-labels="showLabels"></exportoptions>'};
dZ.prototype.j=function(a,b){dZ.C.j.call(this,a,b);a&&(this.scope.allowMultiple=a.Sh(),this.scope.showLabels=a.zs())};dZ.prototype.s=function(a,b,c){a.stopPropagation();this.g.items.length=0;this.g.fields.length=0;b&&0<b.length&&(this.g.items=this.g.items.concat(b));if(c)for(a=0;a<c.length;a++)if(b=BL(c[a]))for(var d=0;d<b.length;d++)kb(this.g.fields,b[d])||this.g.fields.push(b[d])};var eZ=void 0,fZ=0,gZ=0;function hZ(a){this.visible=!1;if(this.eventType&&a&&0<a.length){var b=IA(a);this.visible=b.length==a.length&&b.every(function(b){return this.eventType?b.Uk(this.eventType,a):!1},this)}}function iZ(a){for(var b=IA(a.getContext()),c=0;c<b.length;c++){var d=b[c];d&&d.di(a.type)}}
function zta(a){a=IA(a.getContext());for(var b="",c=0;c<a.length;c++){var d=V.Ja(a[c].D());d?(b+=vka(d),c<a.length-1&&(b+="<hr><br>")):(b+="No Description for "+a[c].S()+"<br>",c<a.length-1&&(b+="<br><hr><br>"))}FE({id:"layerDescription",label:"Layer Description",icon:"fa fa-newspaper-o",x:"center",y:"center",width:"600",height:"auto","show-close":!0},'<div class="d-flex flex-column flex-fill"><div class="modal-body">'+b+'</div><div class="modal-footer"><button class="btn btn-secondary" ng-click="close()"><i class="fa fa-ban"></i> Close</button></div></div>',
void 0,void 0,void 0,{close:function(){KE(IE("layerDescription"))}})}function Ata(a){if(a=a.getContext())if(a=yta(a)||[],IE("export"))HE("export");else{var b=1==a.length?a[0].S():null;FE({id:"export",label:"Export Data",icon:"fa fa-download",x:"center",y:"center",width:"400","min-width":"300","max-width":"800",height:"auto","min-height":"250","max-height":"600","show-close":"true"},"<export></export>",void 0,void 0,void 0,{options:{Fj:null,fields:[],items:[],zk:null,sources:a,title:b}})}}
function Bta(a){a=IA(a.getContext()).reduce(DA,Th());fi(a)||gF(EF,new dv(a))}
function Cta(a){for(var b=IA(a.getContext()),c={},d=pw(T.u()).filter(function(a){if(a instanceof jZ)return!1;if(!kb(b,a))return a.Hb()||a.bd()}),e=0,f=d.length;e<f;e++){var h=d[e],k=h.O();if((k=k instanceof vL?k.g:null)&&!T.u().Qa()){var l=k.Oa().splice(0,k.Oa().length);zL(k,null);c[h.D()]=l}else h.fg(!1)}iZ(a);var m=new je(1750);m.H("tick",function(){for(var a=0,b=d.length;a<b;a++){var e=d[a],f=e.O();(f=f instanceof vL?f.g:null)&&!T.u().Qa()?zL(f,c[e.D()]):e.fg(!0)}m.dispose()});m.start()};function Dta(a){this.visible=!1;0<BI(a).length?this.visible=!0:(a=AI(a),1!==a.length||Hu(a[0])||(this.visible=!0))}function Eta(a){a.preventDefault();iQ({features:[new ek(new Jk(a.getContext()))]})}function Fta(a){var b=a.getContext();b&&a instanceof z&&!Ee()&&(a.preventDefault(),a.stopPropagation(),a=yta(b),iQ({sources:a&&0<a.length?[a[0]]:[]}))}
function Gta(a){var b=a.getContext();b&&a instanceof z&&!Ee()&&(a.preventDefault(),a.stopPropagation(),a=BI(b),a.length||(a=AI(b).map(function(a){return new ek(a)})),a.length&&(b={features:a},HI.u().contains(a[0])&&(a=a[0].get("title"))&&(b.title=ec(a)+" Buffer"),iQ(b)))};var kZ=void 0;function lZ(a){switch(a.type){case "box":C.dispatchEvent(new z("box"));break;case "circle":C.dispatchEvent(new z("circle"));break;case "polygon":C.dispatchEvent(new z("polygon"));break;case "line":C.dispatchEvent(new z("line"));break;case "chooseArea":Pla();break;case "enterCoordinates":cR();break;case "countryBorder":C.dispatchEvent(new z("country"));break;case "queryWorld":dR()}};var mZ=void 0;
function Hta(){var a=mZ;if(a){var b=a.Ha().find("Recent");b.children&&(b.children.length=0)}a=pE(V).filter(function(a){return!isNaN(a.od)});a.sort(xka);for(var c=Math.min(a.length,10),d={},e=0;e<c;e++){var f=a[e],h=f.isActive(),k=f.S()||"",l=f.T(),m=h?"fa-check-square-o":"fa-square-o";l&&("Tile and Feature Groups"===l&&(l="Group"),l=l.replace(/ Layers/i,""),k+=" ("+l+")");k in d&&(k+=" ("+f.rb()+")");d[k]=!0;b.R({eventType:"recent."+f.D(),label:k,tooltip:(h?"Remove":"Add")+" this item",da:['<i class="fa fa-fw '+
m+'"></i>'],sort:e,ya:f.setActive.bind(f,!h)})}};function nZ(){this.lb=!1;this.title="Clear States";this.Ba=null;this.state="ready";this.g=[]}nZ.prototype.Fa=function(){this.state="executing";this.g.length=0;for(var a=pE(V),b=0,c=a.length;b<c;b++){var d=a[b];d instanceof GU&&d.isActive()&&this.g.push(d.D())}vU.Bt();this.state="success";return!0};nZ.prototype.Cb=function(){this.state="reverting";for(var a=V,b=0,c=this.g.length;b<c;b++){var d=a.Ja(this.g[b]);d&&d.setActive(!0)}this.g.length=0;this.state="ready";return!0};var oZ=void 0,pZ=void 0;function qZ(a){pZ&&a&&P(a.j,"os.ui.data.IStateDescriptor")&&pZ.kf()}function Ita(a){switch(a.type){case "state:save":FU();break;case "state:clear":a=new nZ,gF(hF.u(),a)}}
function Jta(){if(oZ){var a=oZ.Ha();a.children&&haa(a.children,function(a){return"group"===a.type});for(var b=pE(V),c={},d=0;d<b.length;d++){var e=b[d];if(P(e,"os.ui.data.IStateDescriptor")){var f=e;c["1:Saved States"]||(c["1:Saved States"]=[]);c["1:Saved States"].push(f)}}for(var h in c){d=h.split(":");b=a.R({label:String(d[1]),type:"group",sort:Number(d[0])||0});var k=c[h];k.sort(xka);f=[];for(d=0;d<k.length;d++){if(7<=f.length){(d=Kta(f[0]))&&b.R(d);break}e=k[d];e.od&&f.push(e)}f.sort(wka);for(d=
0;d<f.length;d++)(e=Lta(f[d],d))&&b.R(e)}}}function Lta(a,b){var c=a.S();if(c){var d=a.isActive(),e=d?"fa-check-square-o":"fa-square-o";d=(d?"Unload":"Load")+" this application state";return{label:c,eventType:"state:"+a.D(),tooltip:d,da:['<i class="fa fa-fw '+e+'"></i>'],ya:Mta.bind(void 0,a),sort:b}}}function Mta(a){a.setActive(!a.isActive())}
function Kta(a){var b=a.T();a=a.Oc;if(b&&a)return{label:"More "+b,eventType:"VIEW_MORE_"+a,tooltip:"Launch the Add Data window to add more",da:['<i class="fa fa-fw fa-plus"></i>'],ya:Nta.bind(void 0,b,a),sort:Infinity}}function Nta(a,b){b=Ota.bind(void 0,a,b);var c={};c.filterFunc=b;c.filterName=a;C.dispatchEvent(new jE("toggleUI","addData",void 0,c))}function Ota(a,b,c){return c instanceof jU&&(c=c.Ja(),P(c,"os.ui.data.IStateDescriptor"))?c.T()===a&&c.Oc===b:!1};var rZ=void 0;function Pta(){FU()};var sZ=new IF(new HF({type:"root",children:[{label:"Load",eventType:"timeline.load",tooltip:"Queries this time range, replaces other load ranges",da:['<i class="fa fa-fw fa-cloud-download"></i>'],sort:10},{label:"Add",eventType:"timeline.add",tooltip:"Adds this time range to the loaded ranges",da:['<i class="fa fa-fw fa-plus"></i>'],sort:20},{label:"Create Slice",eventType:"timeline.slice",tooltip:"Adds time slice which creates a time range less than 24 hours to show data from each loaded day",da:['<i class="fa fa-fw fa-hand-scissors-o"></i>'],
sort:30},{label:"View",eventType:"timeline.activeWindow",tooltip:"Sets the active view window to this range",da:['<i class="fa fa-fw fa-eye"></i>'],sort:40},{label:"Animate",eventType:"timeline.animate",tooltip:"Animates this time range",da:['<i class="fa fa-fw fa-play"></i>'],sort:50},{label:"Skip Animate",eventType:"timeline.animateSkip",tooltip:"Skip animating this time range",da:['<i class="fa fa-fw fa-ban"></i>'],sort:60},{label:"Hold Range",eventType:"timeline.animateHold",tooltip:"Always show this time range",
da:['<i class="fa fa-fw fa-hand-rock-o"></i>'],sort:70},{label:"Zoom",eventType:"timeline.zoom",tooltip:"Zooms to this time range",da:['<i class="fa fa-fw fa-crop"></i>'],sort:80},{label:"Select",eventType:"timeline.select",tooltip:"Selects features in this time range",da:['<i class="fa fa-fw fa-check-circle"></i>'],sort:90},{label:"Select Exclusive",eventType:"timeline.selectExclusive",tooltip:"Selects only features in this time range, deselecting all other features",da:['<i class="fa fa-fw fa-check-circle"></i>'],
sort:100},{label:"Deselect",eventType:"timeline.deselect",tooltip:"Deselects the features in this time range",da:['<i class="fa fa-fw fa-times-circle"></i>'],sort:110},{label:"Remove",eventType:"timeline.remove",tooltip:"Removes the features in this time range",da:['<i class="fa fa-fw fa-times"></i>'],sort:120}]}));
function tZ(a){var b=a.getContext(),c=GL(V);b=new Uv(b[0],b[1]);if(c)for(var d=0,e=c.length;d<e;d++)if(c[d]instanceof vL&&c[d].Md){var f=c[d],h=jw(f.l,b,!1,!0);switch(a.type){case "timeline.select":tN(f,h);Q(R.u(),"timeline.features.timeRange-select",1);break;case "timeline.selectExclusive":uN(f,h);Q(R.u(),"timeline.features.timeRange-selectExclusive",1);break;case "timeline.deselect":rN(f,h);Q(R.u(),"timeline.features.timeRange-deselect",1);break;case "timeline.remove":h&&f.dg(h)}}}
function Qta(a){var b=hw.u();a=a.getContext();b.ae(XK(a));Q(R.u(),"timeline.features.timeRange-load",1)}function Rta(a){var b=hw.u();a=a.getContext();RM(b,XK(a));Q(R.u(),"timeline.features.timeRange-add",1)}function Sta(a){var b=hw.u();a=a.getContext();aja(b,XK(a));Q(R.u(),"timeline.features.timeRange-slice",1)}function Tta(){mra(angular.element(".js-timeline").children().scope().timeline,"select");Q(R.u(),"timeline.features.timeRange-zoom",1)}
function Uta(a){var b=hw.u();a=a.getContext();dja(b,XK(a));Q(R.u(),"timeline.features.timeRange-hold",1)}function Vta(a){var b=hw.u();a=a.getContext();gN(b,XK(a));b.play();Q(R.u(),"timeline.features.timeRange-animate",1)}function Wta(a){var b=hw.u();a=a.getContext();a=XK(a);!b.l.isEmpty()||dN(b,YM(b));bja(b,a);cja(b,a);b.play();Q(R.u(),"timeline.features.timeRange-skip",1)}
function Xta(a){var b=angular.element(".js-timeline").children().scope().timeline.getItem("window");a=a.getContext();b.Ac(a)};var uZ=new IF(new HF({type:"root",children:[]}));function Yta(a){aA($z.u(),a.type)}function Zta(){var a=$z.u().g;this.da=this.eventType===a?['<i class="fa fa-fw fa-check-circle-o"></i>']:['<i class="fa fa-fw fa-circle-o"></i>']};var $ta={};
function aua(){zX||(zX=new IF(new HF({type:"root",children:[{label:"",eventType:"0:Major",type:"group",sort:0},{label:"",eventType:"1:Minor",type:"group",sort:1}]})));BX("addData",{icon:"fa fa-plus",label:"Add Data",description:"Add data to the map",x:"center",y:"center",width:"800",height:"600","min-width":"565","max-width":"1200","min-height":"300","max-height":"1000","show-close":"true","no-scroll":"true","help-context":"addData",html:"adddata"},!0);BX("layers",{key:"layers",icon:"fa fa-align-justify",label:"Layers",
description:"View and manipulate layers on the map",x:"0",y:"96",width:"325",height:"550","min-width":"300","max-width":"1000","min-height":"250","max-height":"2000","show-close":"true","no-scroll":"true","help-context":"layers",shortcut:"alt+l",html:'<layerswin tab="layers"></layerswin>',metricKey:"map.features.layers"},!0)&&CX("layers");BX("timeline",{icon:"fa fa-clock-o",label:"Timeline",metricKey:"timeline.features.open"},!0,function(){C.dispatchEvent(new jE("toggleUI","timeline"))});BX("settings",
{icon:"fa fa-gears",label:"Settings",description:"Change application settings",x:"center",y:"center",width:"1000",height:"500","min-width":"535","max-width":"1000","min-height":"300","max-height":"2000","show-close":"true","no-scroll":"true",html:"settings"},!0);BX("alerts",{icon:"fa fa-bell",label:"Alerts",description:"View notifications and alerts",x:"center",y:"center",width:"500",height:"600","min-width":"300","max-width":"1000","min-height":"300","max-height":"1000","show-close":"true","no-scroll":"false",
html:'<alerts resize-with=".js-window"></alerts>'});BX("clear",{icon:"fa fa-times",label:"Clear",description:"Clear data from the map",x:"center",y:"center",width:300,height:350,"min-width":300,"max-width":400,"min-height":250,"max-height":500,"show-close":!0,html:"clear"});BX("history",{icon:"fa fa-history",label:"History",description:"View undo history",x:"center",y:"center",width:"500",height:"600","min-width":"300","max-width":"1000","min-height":"300","max-height":"1000","show-close":"true",
"no-scroll":"true",html:'<history resize-with=".js-window"></history>'},!1,void 0);O.get("metrics.enabled",!1)&&BX("metrics",{icon:"fa fa-cubes",label:"OpenSphere Capabilities",description:"Explore OpenSphere Capabilities",x:"center",y:"center",width:"500",height:"600","min-width":"300","max-width":"1000","min-height":"300","max-height":"1000","show-close":"true","no-scroll":"true",html:"metrics"},!1,void 0);BX("legend",{icon:"fa-map-signs",label:"Legend",description:"Shows a legend for all the data on the map"},
!1,joa);BX("log",{icon:"fa fa-terminal",label:"Log"},!1,function(){Ce.isEnabled()||Ce.eb(!0)});BX("servers",{icon:"fa fa-database",label:"Servers"},!1,bua)}var bua=Fa(Ura,"servers");W.directive("addDataButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:vZ,controllerAs:"ctrl",template:'<div class="btn-group o-add-data-button" ng-right-click="ctrl.openMenu()"><button class="btn btn-primary" id="addDataButton" title="Add data to the map" ng-click="ctrl.toggle()" ng-class="{active: ctrl.isWindowActive()}" metric="{{metrics.addDataOpen}}"><i class="fa fa-plus" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">Add Data</span></button><button class="btn btn-primary" title="Open a file or URL" ng-click="ctrl.open()"><i class="fa fa-fw fa-folder-open"></i></button><button class="btn btn-primary dropdown-toggle dropdown-toggle-split" ng-click="ctrl.openMenu()" ng-class="{active: menu}"></button></div>'}}]);
function vZ(a,b){DX.call(this,a,b);this.menu=mZ;this.g="addData";this.qa="addData.open"}w(vZ,DX);vZ.$inject=["$scope","$element"];vZ.prototype.open=function(){C.dispatchEvent("importFile")};vZ.prototype.open=vZ.prototype.open;function wZ(a,b){this.menu=null;this.qa=this.g=void 0;this.scope=a;this.element=b;this.position="top";a.$on("$destroy",this.l.bind(this))}wZ.$inject=["$scope","$element"];wZ.prototype.l=function(){this.element=this.scope=null};
wZ.prototype.Dh=function(){this.menu&&(this.scope.menu||this.element.hasClass("active")||this.element.hasClass("active-remove")||this.element.hasClass("active-remove-active")?(this.scope.menu=!1,this.element.blur()):(this.scope.menu=!0,C.Ra(KF,this.o,!1,this),oha(this.menu,this.position,this.element||void 0)));X(this.scope)};wZ.prototype.openMenu=wZ.prototype.Dh;wZ.prototype.o=function(){this.scope.menu=!1;this.element.blur()};
wZ.prototype.toggle=function(){this.g&&!CX(this.g)&&C.dispatchEvent(new jE("toggleUI",this.g,null,null,this.qa))};wZ.prototype.toggle=wZ.prototype.toggle;wZ.prototype.Yj=function(a){if(a=a||this.g){var b=angular.element("#js-window__container").scope();return!!IE(a)||b.mainCtrl&&b.mainCtrl[a]}return!1};wZ.prototype.isWindowActive=wZ.prototype.Yj;W.directive("alertbadge",[function(){return{restrict:"E",replace:!0,scope:{reset:"="},templateUrl:"v1542394219/views/badge.html",controller:xZ,controllerAs:"badge"}}]);function xZ(a){this.scope=a;this.count=0;this.highestAlert=us;this.g=zt.u();Bt(this.g,"alertbadge",this.j,this);this.g.H("alert",this.j,!1,this);a.$watch("reset",this.reset.bind(this));a.$on("$destroy",this.destroy.bind(this))}xZ.$inject=["$scope"];var cua={Error:"badge-danger",Warning:"badge-warning"};
xZ.prototype.destroy=function(){this.g.M("alert",this.j,!1,this);this.scope=this.g=null};xZ.prototype.reset=function(){this.scope.reset&&(this.count=0,this.highestAlert=us)};xZ.prototype.eu=function(){return cua[this.highestAlert]||"badge-light"};xZ.prototype.getClass=xZ.prototype.eu;xZ.prototype.j=function(a){this.scope.reset||(this.count++,a=a.s,a.value>this.highestAlert.value&&(this.highestAlert=a));X(this.scope)};W.directive("alertButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:yZ,controllerAs:"ctrl",template:'<button class="btn btn-secondary" ng-click="ctrl.toggle()" title="Alerts" ng-class="{\'active\': ctrl.isWindowActive()}"><i class="fa fa-fw fa-bell"></i> <alertbadge reset="ctrl.isWindowActive()"></alertbadge></button>'}}]);function yZ(a,b){wZ.call(this,a,b);this.g="alerts"}w(yZ,wZ);yZ.$inject=["$scope","$element"];W.directive("clearButton",[function(){return{restrict:"E",replace:!0,controller:zZ,controllerAs:"ctrl",template:'<button class="btn btn-danger" ng-click="ctrl.toggle()" title="Select items to clear/reset"><i class="fa fa-fw fa-times"></i></button>'}}]);function zZ(a,b){wZ.call(this,a,b);this.g="clear"}w(zZ,wZ);zZ.$inject=["$scope","$element"];W.directive("wheelDate",[function(){return{restrict:"AE",replace:!0,scope:{date:"=",disable:"=",isRequired:"=",blurOnSelect:"=?"},templateUrl:"v1542394219/views/datetime/wheeldate.html",controller:AZ,controllerAs:"wheelDate"}}]);function dua(a){BZ.call(this,a);this._selectDate(a);$(a).blur()}var BZ=null;
function AZ(a,b,c){$.datepicker&&!BZ&&(BZ=$.datepicker._gotoToday,$.datepicker._gotoToday=dua);this.v=a;this.K=b;this.Ma=c;var d=!1;this.dateOptions={changeYear:!0,changeMonth:!0,closeText:"Close",currentText:"Today",showButtonPanel:!0,yearRange:"1900:+10",dateFormat:"yy-mm-dd",onSelect:function(){d=!0},beforeShow:function(){var a=!0;if(navigator.userAgent.toLowerCase().match(/msie/)||navigator.userAgent.toLowerCase().match(/.net/))a=!d;d=!1;return a}};this.date=null;this.l=new wW(document);this.o=
!1;this.g=null;this.j=b[0];Yd(this.j,"focus",this.Xv,!1,this);Yd(this.j,"blur",this.Wv,!1,this);if(a.date)this.date=new Date(a.date.getTime());else var e=a.$watch("date",function(a,b){a&&b&&a.getTime()==b.getTime()&&(this.date=new Date(a.getTime()),this.K.datepicker("setDate",this.date),e())}.bind(this));a.$watch("date",this.vK.bind(this));a.$on("$destroy",this.uK.bind(this))}AZ.$inject=["$scope","$element","$timeout"];var CZ=E.V("os.ui.datetime.WheelDateCtrl");g=AZ.prototype;
g.uK=function(){de(this.j,"focus",this.Xv,!1,this);de(this.j,"blur",this.Wv,!1,this);this.l.dispose();this.Ma=this.K=this.v=this.j=this.l=null};g.vK=function(a,b){!a&&b&&(E.za(CZ,"Wheel date reset on null date"),this.K.datepicker("setDate",null),this.date=null);!a||b&&a.getTime()===b.getTime()||(this.date=new Date(a.getTime()),this.K.datepicker("setDate",this.date),E.za(CZ,"Wheel date changed to: "+a.toUTCString()))};
g.Xv=function(){this.l.Sd("mousewheel")||(this.l.H("mousewheel",this.Gu,!1,this),this.v.blurOnSelect&&this.g&&(this.g.dispose(),this.g=null,this.o=!1,this.Ma(function(){document.activeElement.blur()})))};g.Wv=function(){this.l.M("mousewheel",this.Gu,!1,this);this.g=new le(this.TD,250,this);this.g.start()};g.TD=function(){this.o&&(this.o=!1,this.Ma(this.pA.bind(this)));this.g.dispose();this.g=null};
g.Gu=function(a){if(a){a.preventDefault();var b=a.target,c=b.selectionStart,d=b.selectionEnd;a=0>a.deltaY?1:-1;5>d?this.date.setFullYear(this.date.getFullYear()+a):8>d?this.date.setMonth(this.date.getMonth()+a):this.date.setDate(this.date.getDate()+a);this.K.datepicker("setDate",this.date);b.selectionStart=c;b.selectionEnd=d;this.o=!0;X(this.v)}};
g.pA=function(){E.za(CZ,"Wheel date updating scope.");if(!this.date||za(this.date))this.v.date=this.date?new Date(this.date.getTime()):null,this.v.blurOnSelect&&this.Ma(function(){document.activeElement.blur()})};AZ.prototype.updateScopeDate=AZ.prototype.pA;W.directive("dateControl",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/datetime/datecontrol.html",controller:DZ,controllerAs:"dateControl"}}]);
function DZ(a){this.v=a;this.g=hw.u();this.g.H("timeline.reset",this.l,!1,this);this.j=new le(this.o,10,this);this.startDate=zC(new Date(this.g.Pa()));this.endDate=eua(this);this.duration=this.g?this.g.L:"day";this.durations=["day","week","month","custom"];this.disabled=!1;this.bi();a.$watch("dateControl.startDate",this.A.bind(this));a.$watch("dateControl.endDate",this.s.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(DZ,y);DZ.$inject=["$scope"];var EZ=E.V("os.ui.datetime.DateControlCtrl");
DZ.prototype.J=function(){DZ.C.J.call(this);Ma(this.j);this.j=null;this.g.M("timeline.reset",this.l,!1,this);this.v=this.g=null};DZ.prototype.A=function(a,b){a&&b&&a.getTime()!=b.getTime()&&(this.startDate=mC(a,this.duration,!0),"custom"===this.duration?this.startDate>this.endDate&&(this.endDate=new Date(this.startDate)):this.endDate=oC(this.startDate,this.duration,1,!0),this.disabled||this.j&&this.j.start(),E.za(EZ,"start changed: "+this.startDate.toUTCString()+" to "+this.endDate.toUTCString()))};
DZ.prototype.s=function(a,b){"custom"===this.duration&&a&&b&&a.getTime()!=b.getTime()&&(this.endDate=mC(a,"day",!0),this.startDate>this.endDate&&(this.startDate=new Date(this.endDate)),this.disabled||this.j&&this.j.start(),E.za(EZ,"end changed: "+this.startDate.toUTCString()+" to "+this.endDate.toUTCString()))};
DZ.prototype.WG=function(){this.disabled||(this.startDate=mC(this.startDate,this.duration,!0),this.endDate="custom"===this.duration?new Date(this.startDate):oC(this.startDate,this.duration,1,!0),this.j&&this.j.start(),E.za(EZ,"duration changed: "+this.startDate.toUTCString()+" to "+this.endDate.toUTCString()))};DZ.prototype.onDurationChanged=DZ.prototype.WG;
DZ.prototype.o=function(){if(this.g){var a=AC(this.startDate),b=AC(this.endDate);"custom"===this.duration&&b.setDate(b.getDate()+1);a=a.getTime();b=b.getTime();this.g.Z=!0;this.g.ae(SM(a,b));NM(this.g,this.duration);PM(this.g,KM(this.g));this.g.Z=!1;this.g.Ad(b)}};DZ.prototype.VM=function(a){this.disabled||(this.startDate=oC(this.startDate,this.duration,a,!0),this.endDate=oC(this.endDate,this.duration,a,!0))};DZ.prototype.shiftDate=DZ.prototype.VM;
DZ.prototype.bi=function(){if(this.g){this.g.stop();var a=this.g;a.o.isEmpty()||(a.o.clear(),a.P.clear(),a.dispatchEvent("timeline.slice.rangeChanged"),a.dispatchEvent("timleline.rangeChanged"),VM(a));this.o()}this.disabled=!1};DZ.prototype.Fk=function(){this.disabled=!0};DZ.prototype.update=function(){this.g&&(this.startDate=zC(new Date(this.g.Pa())),this.endDate=eua(this),this.duration=this.g?this.g.L:"day",X(this.v))};
function eua(a){if(a.g){var b=zC(new Date(a.g.Ya()));"custom"===a.duration&&b.setDate(b.getDate()-1);return b}return null}DZ.prototype.l=function(){this.disabled||this.update()};W.directive("datePanel",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/datepanel.html",controller:FZ,controllerAs:"ctrl"}}]);
function FZ(){this.extended=!1;this.startMinute=this.startHour=0;this.endHour=1;this.endMinute=0;this.active=!1;this.sliceTip="Show/hide time filter panel";this.sliceTitle="Time Filter";this.sliceDescription="Creates a time range of less than 24 hours to show data from each loaded day. \nChoose 14:00 to 16:00 to query that time slice every day within the given range. (UTC 0000 = Zulu)";this.g=hw.u()}FZ.$inject=["$scope"];FZ.prototype.fA=function(){(this.extended=!this.extended)||this.co()};
FZ.prototype.toggleExtend=FZ.prototype.fA;FZ.prototype.expand=function(){C.dispatchEvent(new jE("toggleUI","timeline"))};FZ.prototype.expand=FZ.prototype.expand;FZ.prototype.cc=function(){return"UTC"+("Z"==xC?"+0000":xC)};FZ.prototype.getOffset=FZ.prototype.cc;FZ.prototype.dd=function(a,b,c,d){void 0!=this[a]?null==this[a]||this[a]<b?this[a]=parseInt(b,10):this[a]>c&&(this[a]=parseInt(c,10)):d&&(this[a]=parseInt(d,10));this.active=!1};FZ.prototype.onChange=FZ.prototype.dd;
FZ.prototype.co=function(){var a=new $K;this.extended?(a.add(SM(36E5*this.startHour+6E4*this.startMinute,36E5*this.endHour+6E4*this.endMinute)),this.active=!0):this.active=!1;this.g.o.clone().isEmpty()&&a.isEmpty()||cN(this.g,a)};FZ.prototype.applySlice=FZ.prototype.co;FZ.prototype.ot=function(){this.active&&this.co()};FZ.prototype.applySliceIfActive=FZ.prototype.ot;FZ.prototype.ZB=function(){this.fA()};FZ.prototype.cancelSlice=FZ.prototype.ZB;
FZ.prototype.bN=function(){return 60*this.startHour+this.startMinute<60*this.endHour+this.endMinute};FZ.prototype.sliceValid=FZ.prototype.bN;W.directive("choosearea",[function(){return{restrict:"E",scope:{area:"=?",areas:"=?",filter:"=?",helpTitle:"@",helpContent:"@"},templateUrl:"v1542394219/views/query/area/choosearea.html",controller:GZ,controllerAs:"choosearea"}}]);
function GZ(a){this.v=a;this.v.areas||(fua(this),UE.H("propertychange",this.g,!1,this));void 0===this.v.area&&this.v.areas&&0<this.v.areas.length&&(this.v.area=this.v.areas[0]);a.$watch("area",function(b){a.$parent.confirmValue=b});a.$on("$destroy",this.dispose.bind(this))}w(GZ,y);GZ.$inject=["$scope"];GZ.prototype.J=function(){GZ.C.J.call(this);UE.M("propertychange",this.g,!1,this)};GZ.prototype.g=function(a){this.v&&(fua(this),"remove"==a.l&&a.o==this.v.area&&(this.v.area=null),X(this.v))};
function fua(a){a.v&&(a.v.areas=HD(UE),a.v.filter&&(a.v.areas=a.v.areas.filter(a.v.filter)))};W.directive("drawMenu",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/ol/draw/drawmenu.html",controller:HZ,controllerAs:"drawMenu"}}]);function HZ(a,b){this.K=b;this.drawControls=a.$parent.drawControls;this.showChooseArea=0<HD(UE).length;a.$on("$destroy",this.g.bind(this))}HZ.$inject=["$scope","$element"];HZ.prototype.g=function(){this.K.remove();this.drawControls=this.K=null};HZ.prototype.Wj=function(){return!1};HZ.prototype.isCountryEnabled=HZ.prototype.Wj;
HZ.prototype.fF=function(){cR();this.drawControls.Hn(!1)};HZ.prototype.launchAreaByCoordinates=HZ.prototype.fF;HZ.prototype.gF=function(){Pla();this.drawControls.Hn(!1)};HZ.prototype.launchChooseArea=HZ.prototype.gF;HZ.prototype.bM=function(){dR();this.drawControls.Hn(!1)};HZ.prototype.queryWorld=HZ.prototype.bM;W.directive("drawControls",[function(){return{restrict:"AE",replace:!0,scope:{menu:"=",olMap:"=",embeddedControls:"=",hideExtraControls:"="},templateUrl:"v1542394219/views/ol/draw/drawcontrols.html",controller:IZ,controllerAs:"drawControls"}}]);
function IZ(a,b){y.call(this);this.v=a;this.K=b;this.interaction=null;this.feature=void 0;this.menu=a.menu;this.log=gua;this.g=a.olMap;this.selectedType="";this.supportsLines=this.supportsLines||!1;this.controlMenu=kZ;b=this.controlMenu.Ha();this.supportsLines&&b.R({label:"Line",eventType:"line",tooltip:"Draw a line on the map",da:['<i class="fa fa-fw fa-long-arrow-right"></i> '],ya:lZ,sort:40});this.hideExtraControls&&(b.removeChild("Choose Area"),b.removeChild("Enter Coordinates"),b.removeChild("Whole World"),
b.removeChild("drawMenuSeparator"));this.Wj()&&!this.hideExtraControls&&b.R({label:"Country Border",eventType:"countryBorder",tooltip:"Draw a box for query, selection, and zoom",da:['<i class="fa fa-fw fa-globe"></i> '],ya:lZ,sort:130});C.H("drawstart",this.apply,!1,this);C.H("drawend",this.aw,!1,this);C.H("drawcancel",this.apply,!1,this);C.H("box",this.vf,!1,this);C.H("circle",this.vf,!1,this);C.H("polygon",this.vf,!1,this);C.H("line",this.vf,!1,this);C.H("country",this.vf,!1,this);b=O.get("drawType",
"box");JZ(this,b);a.$on("$destroy",this.dispose.bind(this))}w(IZ,y);IZ.$inject=["$scope","$element"];var gua=E.V("os.ui.ol.draw.DrawControlsCtrl");g=IZ.prototype;g.J=function(){IZ.C.J.call(this);C.M("drawstart",this.apply,!1,this);C.M("drawend",this.aw,!1,this);C.M("drawcancel",this.apply,!1,this);C.M("box",this.vf,!1,this);C.M("circle",this.vf,!1,this);C.M("polygon",this.vf,!1,this);C.M("line",this.vf,!1,this);C.M("country",this.vf,!1,this);this.K=this.v=null};
g.Y=function(){return this.g?this.g.Y():null};g.ly=function(){return this.menu};g.zf=function(a){this.feature&&this.g&&this.g.Fb(this.feature,!0);(this.feature=a)&&this.g&&this.g.ac(this.feature)};function JZ(a,b){a.interaction=null;var c=a.Y();if(c){c=c.interactions.g;for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f instanceof eT){var h=f.Wu(b);f.setActive(h);h&&(a.interaction=f)}}}else a.gv();O.set("drawType",b);a.selectedType=b}g.gv=function(){};g.sw=function(){JZ(this,this.selectedType)};
g.apply=function(){X(this.v)};g.aw=function(a){if(a.target===this.interaction){var b=this.interaction.Qb(),c=this.ly(),d=this.Y();c&&d&&($(d.g).addClass("u-pointer-events-none"),d=new ek(a.j),d.sb(a.geometry.clone()),d.ga($b()),d.yb(b),d.set("_node",!1),this.zf(d),c.open({feature:d,geometry:a.geometry,style:b},{my:"left top",at:"left+"+a.pixel[0]+" top+"+a.pixel[1],of:"#map-container"}),C.Ra(KF,this.eI,!1,this),this.apply())}};
g.eI=function(){$(this.Y().g).removeClass("u-pointer-events-none");this.zf(void 0);this.interaction&&this.interaction.eb(!1);this.apply()};g.vf=function(a){!a||!a.type||"country"==a.type&&this.Wj()||this.ct(a.type)};g.ct=function(a){E.za(this.log,"Activating "+a+" control.");Q(R.u(),"map.feature.draw",1);Q(R.u(),"map.feature.draw_"+a,1);this.interaction&&this.interaction.T()!=a&&(this.interaction.eb(!1),JZ(this,a));this.interaction&&this.interaction.eb(!this.interaction.mc())};
IZ.prototype.activateControl=IZ.prototype.ct;IZ.prototype.Hn=function(){var a=this.controlMenu,b=this.K.find(".draw-controls-group");a.open(void 0,{my:"left top+4",at:"left bottom",of:b})};IZ.prototype.toggleMenu=IZ.prototype.Hn;IZ.prototype.isActive=function(){return this.interaction?this.interaction.mc():!1};IZ.prototype.isActive=IZ.prototype.isActive;IZ.prototype.Wj=function(){return!1};IZ.prototype.isCountryEnabled=IZ.prototype.Wj;W.directive("osDrawControls",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/draw/drawcontrols.html",controller:KZ,controllerAs:"drawControls"}}]);function KZ(a,b){this.supportsLines=!0;IZ.call(this,a,b);this.log=hua}w(KZ,IZ);KZ.$inject=["$scope","$element"];var hua=E.V("os.ui.draw.DrawControlsCtrl");g=KZ.prototype;g.J=function(){KZ.C.J.call(this);de(T.u(),"map:ready",this.sw,!1,this)};g.Y=function(){return T.u().Y()};g.ly=function(){return hta};
g.zf=function(a){this.feature&&T.u().Fb(this.feature.D(),!0);(this.feature=a)&&T.u().ac(this.feature)};g.gv=function(){Zd(T.u(),"map:ready",this.sw,!1,this)};W.directive("historyButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:LZ,controllerAs:"ctrl",template:'<button class="btn btn-secondary" ng-click="ctrl.toggle()" title="History" ng-class="{\'active\': ctrl.isWindowActive()}"><i class="fa fa-fw fa-history"></i></button>'}}]);function LZ(a,b){wZ.call(this,a,b);this.g="history"}w(LZ,wZ);LZ.$inject=["$scope","$element"];W.directive("layersButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:MZ,controllerAs:"ctrl",template:'<button class="btn btn-primary" title="View Layers" ng-click="ctrl.toggle()" ng-class="{active: ctrl.isWindowActive()}"><i class="fa fa-align-justify" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">Layers</span></button>'}}]);function MZ(a,b){DX.call(this,a,b);this.g="layers";this.qa="map.features.layers"}w(MZ,DX);MZ.$inject=["$scope","$element"];W.directive("legendButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:NZ,controllerAs:"ctrl",template:'<button class="btn btn-secondary" title="View Legend" ng-click="ctrl.toggle()" ng-class="{active: ctrl.isWindowActive()}"><i class="fa fa-map-signs"></i></button>'}}]);function NZ(a,b){DX.call(this,a,b);this.g="legend";this.qa="map.features.showLedgend"}w(NZ,DX);NZ.$inject=["$scope","$element"];W.directive("measureButton",[function(){return{restrict:"E",replace:!0,scope:{showLabel:"="},controller:OZ,controllerAs:"ctrl",template:'<div class="btn-group" ng-right-click="ctrl.openMenu()"><button class="btn btn-secondary" id="measureButton" title="Measure between points" ng-click="ctrl.toggle()" ng-class="{active: measuring}"><i class="fa fa-fw fa-arrows-h"></i> {{showLabel ? \'Measure\' : \'\'}}</button><button class="btn btn-secondary dropdown-toggle dropdown-toggle-split" ng-click="ctrl.openMenu()" ng-class="{active: menu}"></button></div>'}}]);
function OZ(a,b){DX.call(this,a,b);this.menu=iua;this.menu.H("geodesic",this.A,!1,this);this.menu.H("rhumb",this.A,!1,this);this.g="measure";this.qa="map.feature.measureToolToggle";this.scope.measuring=!1;this.j={};C.H("drawend",this.s,!1,this);C.H("drawcancel",this.s,!1,this);this.key_="measureMethod";yT=O.get(this.key_,yT)}w(OZ,DX);OZ.$inject=["$scope","$element"];
var iua=new IF(new HF({type:"root",children:[{label:"Measure Geodesic",eventType:"geodesic",tooltip:"Measures the shortest distance between two points (variable bearing).",Aa:jua},{label:"Measure Rhumb Line",eventType:"rhumb",tooltip:"Measures the path of constant bearing between two points.",Aa:jua}]}));
OZ.prototype.toggle=function(a){a:{var b=T.u().Y().interactions.g;for(var c=0,d=b.length;c<d;c++)if(b[c]instanceof xT){b=b[c];break a}b=null}if(b){if(a=void 0!==a?a:!b.get("active"))this.j={};c=T.u().Y().interactions.g;d=0;for(var e=c.length;d<e;d++)if(c[d]instanceof eT){var f=c[d],h=f.T();a?(this.j[h]=f.get("active"),f.setActive(!1)):h in this.j?f.setActive(this.j[h]):f.setActive(!1)}b.eb(a);b.setActive(a);(this.scope.measuring=a)&&this.qa&&Q(R.u(),this.qa,1)}};OZ.prototype.toggle=OZ.prototype.toggle;
OZ.prototype.s=function(a){a.target instanceof xT&&this.toggle(!1)};OZ.prototype.A=function(a){yT=a.type;O.set(this.key_,a.type);this.toggle(!0)};function jua(){this.da=this.eventType===yT?['<i class="fa fa-fw fa-dot-circle-o"></i>']:['<i class="fa fa-fw fa-circle-o"></i>']};function PZ(){this.g=O.get("mute",!1);this.j={};this.l={};this.s={};this.o=null;this.load()}wa(PZ);var QZ=E.V("os.audio.AudioManager");function kua(){var a=PZ.u();return nc(a.j)}PZ.prototype.load=function(){if(window.HTMLAudioElement)for(var a=["sounds","userSounds"],b=0,c=a.length;b<c;b++){var d=O.get([a[b]]),e;for(e in d){var f=d[e];0===f.indexOf("sounds/")&&(f="v1542394219/"+f);"default"==e.toLowerCase()&&(this.o=e);this.j[e]=f}}else E.ib(QZ,"This browser does not support audio")};
PZ.prototype.play=function(a,b){if(!(a in this.j))if(this.o)E.za(QZ,'Could not find sound "'+a+'" in sound list, using the default instead.'),a=this.o;else{E.error(QZ,'Could not find "'+a+'" in sound list and no default sound was defined.');return}var c=this.j[a];if(c){if(c in this.l)var d=this.l[c];else d=document.createElement("audio"),d.src=c,this.l[c]=d;var e=this.s[c]||0,f=Ha();!this.g&&(void 0===b||f-e>b)&&(E.za(QZ,'Playing "'+a+'" from '+c),d.play(),this.s[c]=f)}};W.directive("muteButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:RZ,controllerAs:"ctrl",template:"<button class=\"btn btn-secondary\" ng-click=\"ctrl.toggle()\" title=\"{{mute ? 'Unmute': 'Mute'}}\"><i class=\"fa fa-fw {{mute ? 'fa-volume-off' : 'fa-volume-up'}}\"></i></button>"}}]);function RZ(a){this.scope=a;this.scope.mute=PZ.u().g}RZ.$inject=["$scope"];RZ.prototype.toggle=function(){var a=PZ.u();a.g=!a.g;O.set("mute",a.g);this.scope.mute=a.g};RZ.prototype.toggle=RZ.prototype.toggle;function SZ(a,b){y.call(this);this.scope=a;this.element=b;this.g=this.j.bind(this);b.resize(this.g);a.$on("$destroy",this.dispose.bind(this))}w(SZ,y);SZ.$inject=["$scope","$element"];SZ.prototype.J=function(){SZ.C.J.call(this);this.element=this.scope=null};SZ.prototype.nD=function(){var a=0;this.element.find(".nav-item").each(function(){a+=$(this).outerWidth(!0)});return a};SZ.prototype.getNavContentSize=SZ.prototype.nD;SZ.prototype.j=function(){C.dispatchEvent(new z("os.ui.nav.resize"))};W.directive("navBottom",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/navbottom.html",controller:SZ,controllerAs:"navBottom"}}]);W.directive("punyparent",[function(){return{restrict:"A",scope:!0,controller:TZ}}]);function TZ(a,b){this.v=a;this.K=b;this.j=this.o.bind(this);this.g=0;b.resize(this.j);a.$on("$destroy",this.l.bind(this))}TZ.$inject=["$scope","$element"];TZ.prototype.l=function(){this.K.removeResize(this.j);this.K=this.v=null};
TZ.prototype.o=function(){var a=this.K.children().toArray(),b=0;a.forEach(function(a){a=$(a);a.hasClass("resize-triggers")||(b+=a.outerWidth(!0))});b>this.g&&(this.g=b);a.forEach(function(a){a=$(a);var b=a.scope();!a.hasClass("resize-triggers")&&b&&(b.puny=this.K.outerWidth(!0)<this.g)}.bind(this));X(this.v)};W.directive("navTop",[function(){return{restrict:"E",replace:!0,scope:{options:"=?"},templateUrl:"v1542394219/views/navtop.html",controller:SZ,controllerAs:"navTop"}}]);W.directive("osNavTop",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/osnavtop.html"}}]);W.directive("saveButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:UZ,controllerAs:"ctrl",template:'<button class="btn btn-secondary dropdown-toggle" ng-click="ctrl.openMenu()" title="Save options" ng-right-click="ctrl.openMenu()" ng-class="{active: menu}"><i class="fa fa-floppy-o" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">Save</span></button>'}}]);function UZ(a,b){DX.call(this,a,b);this.menu=rZ}w(UZ,DX);UZ.$inject=["$scope","$element"];W.directive("scaleLine",[function(){return{restrict:"E",replace:!0,scope:!0,template:'<li class="pointer" id="scale-line" ng-click="ctrl.openMenu()" ng-right-click="ctrl.openMenu()"><div class="unit-group"></div></li>',controller:VZ,controllerAs:"ctrl"}}]);function VZ(a,b){DX.call(this,a,b);this.menu=uZ;this.l="right top";this.o="right bottom-4"}w(VZ,DX);VZ.$inject=["$scope","$element"];W.directive("searchBox",[function(){return{restrict:"AE",replace:!0,scope:{dataSource:"=datasource",allowMultiple:"@",eventPrefix:"@",searchOnClear:"@",showDropdownText:"@",searchManager:"=?",showClear:"@?"},templateUrl:"v1542394219/views/search/searchbox.html",controller:WZ,controllerAs:"searchBox"}}]);
function WZ(a,b){this.scope=a;this.L="false"!=a.searchOnClear;this.element=b;this.g=a.searchManager||gU.u();this.N=a&&a.eventPrefix||"";this.allowMultiple="false"!=a.allowMultiple;this.showDropdownText="true"==a.showDropdownText;this.searchTerm=this.g.l;this.showSearchOptions=!1;this.searchOptions=[];this.recentSearches=O.get("search.recent",[]);this.o=b.find(".js-searchbox__typeahead").typeahead();Yd(b[0],"click",this.B,!1,this);this.g.H("change",this.l,!1,this);this.g.H("start",this.s,!1,this);
this.g.H("autocomplete.success",this.G,!1,this);this.g.H("success",this.A,!1,this);C.H("search.refresh",this.search,!1,this);this.l();this.providerGroups=[];this.searchOptionsGroups={};this.searchOptionsNoGroup=[];lua(this);b=HG.u();b.ready?this.I():b.Ra("load",this.I,!1,this);this.j();O.H(XZ,this.j,!1,this);a.$on("$destroy",this.destroy.bind(this))}WZ.$inject=["$scope","$element"];
WZ.prototype.destroy=function(){de(this.element[0],"click",this.B,!1,this);this.g.M("change",this.l,!1,this);this.g.M("start",this.s,!1,this);this.g.M("autocomplete.success",this.G,!1,this);this.g.M("success",this.A,!1,this);C.M("search.refresh",this.search,!1,this);O.M(XZ,this.j);this.scope=this.element=null};
WZ.prototype.I=function(){var a=this.recentSearches;if(a){var b=!1;try{for(var c=mc(this.g.g),d=c.map(rE).sort(),e=a.length;e--;){var f=a[e];if("type"in f){var h=f.type||"";b=!0;if("Search All Sources"==f.type)f.ids=d;else{var k=ib(c,Fga.bind(void 0,h));k?f.ids=[k.D()]:a.splice(e,1)}delete f.type}else if(f.ids){for(var l=f.ids.length;l--;)this.g.g[f.ids[l]]||(f.ids.splice(l,1),b=!0);0==f.ids.length&&(a.splice(e,1),b=!0)}else a.splice(e,1),b=!0}}catch(m){this.recentSearches=[],b=!0}b&&YZ(this)}};
WZ.prototype.B=function(a){Hg(a.target,"typeahead")&&this.search()};WZ.prototype.clear=function(){this.searchTerm="";this.search()};WZ.prototype.clear=WZ.prototype.clear;WZ.prototype.search=function(){if(this.searchTerm||this.L)this.scope.dataSource?mua(this.scope.dataSource,this.searchTerm):this.g.search(this.searchTerm),X(this.scope)};WZ.prototype.search=WZ.prototype.search;
WZ.prototype.l=function(){this.searchOptions=mc(this.g.g);lua(this);this.j();if(!this.allowMultiple){var a=!1;this.searchOptions.forEach(function(b){b.isEnabled()&&(a?b.eb(!1):a=!0)})}this.searchTerm&&this.search();X(this.scope)};WZ.prototype.s=function(a){a=a.j;a!==this.searchTerm&&(this.searchTerm=a);nua(this)};WZ.prototype.A=function(){this.searchTerm!=this.g.l&&(this.searchTerm=this.g.l)};
WZ.prototype.wN=function(a){!this.allowMultiple&&a.isEnabled()||a.eb(!a.isEnabled());!this.allowMultiple&&a.isEnabled()&&this.searchOptions.forEach(function(b){b!=a&&b.isEnabled()&&b.eb(!1)})};WZ.prototype.toggleSearch=WZ.prototype.wN;WZ.prototype.Wh=function(a){this.searchOptions.forEach(function(b){b.eb(a)})};WZ.prototype.toggleAll=WZ.prototype.Wh;WZ.prototype.vD=function(a){return a.getName()};WZ.prototype.getSearchName=WZ.prototype.vD;
WZ.prototype.uD=function(a){return this.allowMultiple?a.isEnabled()?"fa-check-square-o":"fa-square-o":a.isEnabled()?"fa-angle-double-right":""};WZ.prototype.getSearchIcon=WZ.prototype.uD;
function lua(a){a.providerGroups=[];a.searchOptionsGroups={};a.searchOptionsNoGroup=[];var b=O.get("providerGroups",{}),c=vb(a.searchOptions);jc(b,function(a,b){this.providerGroups.push(b);var d=[];db(a,function(a){var b=jb(c,function(b){return a==b.getName()},this);-1<b&&(d.push(c[b]),rb(c,b))},this);this.searchOptionsGroups[b]=d},a);a.searchOptionsNoGroup=c}
WZ.prototype.hD=function(a){if(ZZ(this,a))a="fa-check-square-o";else{a=this.searchOptionsGroups[a];for(var b=!0,c=0;c<a.length;c++)if(a[c].isEnabled()){b=!1;break}a=b?"fa-square-o":"fa-minus-square-o"}return a};WZ.prototype.getGroupIcon=WZ.prototype.hD;function ZZ(a,b){a=a.searchOptionsGroups[b];b=!0;for(var c=0;c<a.length;c++)if(!a[c].isEnabled()){b=!1;break}return b}WZ.prototype.As=function(a){var b=ZZ(this,a);a=this.searchOptionsGroups[a];for(var c=0;c<a.length;c++)a[c].eb(!b)};
WZ.prototype.toggleGroup=WZ.prototype.As;WZ.prototype.wD=function(a){return this.searchOptionsGroups[a]};WZ.prototype.getSearchOptionsGroup=WZ.prototype.wD;function oua(a){if(0==a.providerGroups.length)return null;for(var b=0,c="",d=a.searchOptions.filter(function(a){return a.isEnabled()}),e=0;e<a.providerGroups.length;e++)ZZ(a,a.providerGroups[e])&&(b+=1,c=a.providerGroups[e]);return 1==b&&d.length==a.searchOptionsGroups[c].length?c:null}WZ.prototype.XE=function(a){return a.isEnabled()};
WZ.prototype.isSearchEnabled=WZ.prototype.XE;WZ.prototype.CE=function(){return gb(this.searchOptions,function(a){return!a.isEnabled()})};WZ.prototype.hasDisabledSearch=WZ.prototype.CE;
WZ.prototype.oD=function(){if(0<this.searchOptions.length){var a=this.searchOptions.filter(function(a){return a.isEnabled()});if(1==a.length)return"Search "+a[0].getName()+"...";if(a.length==this.searchOptions.length)return"Search All Types...";if(0==a.length)return"No search types enabled.";var b=oua(this);return b?"Search "+b+"...":"Search "+a.length+" types..."}return"No search types available."};WZ.prototype.getPlaceholderText=WZ.prototype.oD;
WZ.prototype.YC=function(){if(0<this.searchOptions.length){var a=this.searchOptions.filter(function(a){return a.isEnabled()});if(1==a.length)return a[0].getName();if(a.length==this.searchOptions.length)return"All";if(0!=a.length){var b=oua(this);return b?b:a.length+" Types"}}return"None"};WZ.prototype.getDropdownText=WZ.prototype.YC;
WZ.prototype.rD=function(a){var b="";a=a.ids;0<a.length&&(b=mc(this.g.g).map(rE).sort(),b=Cb(a,b)?"(All Search Types)":1==a.length?(b=this.g.g[a[0]]||null)&&b.getName()?"("+b.getName()+")":"(1 Search Type)":"("+a.length+" Search Types)");return b};WZ.prototype.getRecentDetails=WZ.prototype.rD;
WZ.prototype.sD=function(a){var b="Load recent search",c=a.ids;if(0<c.length){var d=mc(this.g.g).map(rE).sort();Cb(c,d)?b='Search all types for "'+a.term+'".':1==c.length?(c=this.g.g[c[0]]||null)&&c.getName()&&(b="Search "+c.getName()+' for "'+a.term+'".'):(b='Search the following types for "'+a.term+'":\n - ',a=c.map(function(a){return(a=this.g.g[a]||null)?a.getName():"Unknown search type"},this),b+=a.join("\n - "))}return b};WZ.prototype.getRecentTitle=WZ.prototype.sD;
WZ.prototype.OM=function(a){this.searchTerm=a.term;for(var b=0;b<this.searchOptions.length;b++){var c=this.searchOptions[b];-1<a.ids.indexOf(c.D())?c.eb(!0):c.eb(!1)}this.search();a=cb(this.recentSearches,a);0<a&&Hb(this.recentSearches,a,0);YZ(this)};WZ.prototype.setFromRecent=WZ.prototype.OM;WZ.prototype.tM=function(){this.o.data("typeahead").source=[];if(this.searchTerm){var a=this.g,b=this.searchTerm;a.l=b;a.A=[];a=iU(a,b);for(var c=0,d=a.length;c<d;c++)a[c].Tq(b)}};
WZ.prototype.refreshAutocomplete=WZ.prototype.tM;
WZ.prototype.xN=function(a){var b=a.originalEvent;if(this.showSearchOptions=!this.showSearchOptions)var c=iU(this.g).map(rE).sort(),d=Yd(document,"click",function(a){if(this.element){var e=this.element.find(".js-searchbox__search-options")[0]||null,h=this.element.find(".js-searchbox__recent-searches")[0]||null;e=Dg(e,a.target);h=Dg(h,a.target);a.j==b||e&&!h&&this.allowMultiple||(ee(d),a.stopPropagation(),this.showSearchOptions=!1,h||(a=iU(this.g).map(rE).sort(),Cb(a,c)||this.search()),X(this.scope))}},
!1,this)};WZ.prototype.toggleSearchOptions=WZ.prototype.xN;WZ.prototype.G=function(a){var b=a.ie();b&&0<b.length&&(a=this.o.data("typeahead"),b=a.source.concat(b),yb(b),a.source=b,a.lookup())};function nua(a){if(a.searchTerm){var b=iU(a.g).map(rE).sort(),c=jb(a.recentSearches,function(a){return a.term==this.searchTerm},a);-1<c?Hb(a.recentSearches,c,0):(a.recentSearches.unshift({ids:b,term:a.searchTerm}),5<a.recentSearches.length&&(a.recentSearches.length=5));YZ(a)}}
function YZ(a){var b=[];a.recentSearches.forEach(function(a){a.ids&&(a={ids:a.ids.slice(),term:a.term},b.push(a))});O.set("search.recent",b)}WZ.prototype.FC=function(a){C.dispatchEvent(new z("favorite",a));this.showSearchOptions=!1;X(this.scope)};WZ.prototype.favoriteSearch=WZ.prototype.FC;WZ.prototype.j=function(){var a=[];Ooa.I&&(a=Ooa.I(pua.filter($Z(),[qua],5)));this.favorites=a;X(this.scope)};
WZ.prototype.VE=function(a){var b=location.href.split("#");a=a.uri.split("#");return 2==b.length&&2==a.length&&b[1]==a[1]};WZ.prototype.isFavoriteActive=WZ.prototype.VE;W.directive("serversButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:a_,controllerAs:"ctrl",template:'<button class="btn btn-secondary" ng-click="ctrl.toggle()" title="Servers" ng-class="{\'active\': ctrl.isWindowActive(\'settings\')}"><i class="fa fa-fw fa-database"></i><span ng-if="serverError" class="ml-1 badge badge-warning"><i class="fa fa-fw fa-warning"></i></span></button>'}}]);
function a_(a,b){wZ.call(this,a,b);this.g="servers";V.H("dataProviderLoaded",this.j,!1,this);V.H("editDataProvider",this.j,!1,this);V.H("removeDataProvider",this.j,!1,this)}w(a_,wZ);a_.$inject=["$scope","$element"];a_.prototype.l=function(){a_.C.l.call(this);V.M("dataProviderLoaded",this.j,!1,this);V.M("editDataProvider",this.j,!1,this);V.M("removeDataProvider",this.j,!1,this)};a_.prototype.j=function(){this.scope&&(this.scope.serverError=V.th(),X(this.scope))};W.directive("settingsButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:b_,controllerAs:"ctrl",template:'<button class="btn btn-secondary" title="View Settings" ng-click="ctrl.toggle()" ng-class="{active: ctrl.isWindowActive()}"><i class="fa fa-gears"></i></button>'}}]);function b_(a,b){DX.call(this,a,b);this.g="settings"}w(b_,DX);b_.$inject=["$scope","$element"];W.directive("stateButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:c_,controllerAs:"ctrl",template:'<button class="btn btn-secondary dropdown-toggle o-state-button" ng-click="ctrl.openMenu()" title="State options" ng-right-click="ctrl.openMenu()" ng-class="{active: menu}"> <i class="fa fa-bookmark" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">States</span></button>'}}]);function c_(a,b){DX.call(this,a,b);this.menu=oZ}w(c_,DX);c_.$inject=["$scope","$element"];W.directive("windowsButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:d_,controllerAs:"ctrl",template:'<button class="btn btn-secondary dropdown-toggle" ng-click="ctrl.openMenu()" title="Windows and other views" ng-right-click="ctrl.openMenu()" ng-class="{active: menu}">More</button>'}}]);function d_(a,b){DX.call(this,a,b);this.menu=zX}w(d_,DX);d_.$inject=["$scope","$element"];W.directive("ngRightClick",[function(){return{restrict:"A",controller:e_}}]);function e_(a,b,c,d){this.v=a;this.K=b;this.g=c(d.ngRightClick);b.on("contextmenu",this.l.bind(this));a.$on("$destroy",this.j.bind(this))}e_.$inject=["$scope","$element","$parse","$attrs"];e_.prototype.j=function(){this.K&&(this.K.off("contextmenu"),this.K=null);this.v=this.g=null};e_.prototype.l=function(a){this.v&&this.v.$apply(function(){a.preventDefault();a.stopPropagation();this.v&&this.g&&this.g(this.v,{$event:a})}.bind(this))};function rua(){vK.call(this,[]);this.title="Clear query entries"}w(rua,vK);function f_(a,b,c){sua++;this.ma=c||sua;this.result=a;this.j=b||0}var sua=0;f_.prototype.D=function(){return this.ma};f_.prototype.getId=f_.prototype.D;f_.prototype.xi=function(){return this.result};f_.prototype.jc=function(){return this.j};f_.prototype.l=function(){};function g_(){f_.call(this,0,0)}w(g_,f_);g_.prototype.g=function(){return'<div class="coord-result-card"><div class="result-card-header">No results found</div></div>'};function h_(a,b,c,d,e){A.call(this);this.id=a;a=null!=e?e:!0;this.enabled=O.get(["search",this.D(),"enabled"].join("."),a);this.name=b;this.priority=null!=d?d:0;this.type=c||"";this.term=null;this.log=tua}w(h_,A);var tua=E.V("os.search.AbstractSearch");g=h_.prototype;g.isEnabled=function(){return this.enabled};g.eb=function(a){this.enabled=a;O.set(["search",this.D(),"enabled"].join("."),a)};g.D=function(){return this.id};g.getName=function(){return this.name};g.T=function(){return this.type};
g.search=function(a,b,c,d,e){this.term=a;return this.ds.apply(this,arguments)};g.Nz=function(){return!0};function i_(a,b){y.call(this);this.scope=a;this.element=b;this.log=uua;this.result=this.scope.result;this.feature=this.result.xi();b=T.u().W("search");b instanceof MK&&(this.layer=b);this.layer||(b=new vL,b.Ta("Search Results"),b.ga("search"),b.oa.bufferSelected=!1,b.oa["export"]=!1,b=new MK({source:b}),b.Ta("Search Results"),b.ga("search"),b.yb(rH(nH.u(),$B)),b.ye(""),b.hg(!1),b.Bf(""),b.gg(""),b.P=!0,b.yf=va,Tia(nH.u(),"search").showLabels=!0,Ky(T.u(),b),this.layer=b);this.layer.O().ac(this.feature);
I(this.layer.O(),"propertychange",this.g,this);a.$on("$destroy",this.dispose.bind(this))}w(i_,y);i_.$inject=["$scope","$element"];var uua=E.V("os.ui.search.FeatureResultCardCtrl");i_.prototype.J=function(){i_.C.J.call(this);var a=T.u();xh(this.layer.O(),"propertychange",this.g,this);var b=this.layer.O();b.Fb(this.feature);b.Oa().length||(this.layer.hg(!0),a.pc(this.layer));this.scope=this.element=this.feature=null};
i_.prototype.g=function(a){if(a instanceof U){var b=a.l,c=a.o;c||(c=a.s);if(c&&c.length)for(var d=this.element,e=0;e<c.length;e++)c[e]===this.feature?"selectedItemsAdded"===b?d.addClass("u-card-selected"):"selectedItemsRemoved"===b?d.removeClass("u-card-selected"):"highlightedItems"===b&&(a.o?d.addClass("u-card-highlight"):d.removeClass("u-card-highlight")):d.hasClass("u-card-highlight")&&d.removeClass("u-card-highlight")}};i_.prototype.kd=function(a){return this.feature.get(a)};
i_.prototype.getField=i_.prototype.kd;i_.prototype.HD=function(){this.result.l()};i_.prototype.goTo=i_.prototype.HD;i_.prototype.Wm=function(){this.feature.set("_highlightStyle",WG);jH(this.feature);CH(this.layer,[this.feature])};i_.prototype.over=i_.prototype.Wm;i_.prototype.out=function(){this.feature.set("_highlightStyle",void 0);jH(this.feature);CH(this.layer,[this.feature])};i_.prototype.out=i_.prototype.out;W.directive("coordresultcard",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/search/place/coordinateresultcard.html",controller:j_,controllerAs:"ctrl"}}]);function j_(a,b){i_.call(this,a,b);a=this.feature.X();a=Vi(vk(a),N);this.lat=a[1];this.lon=a[0];this.mgrs=osasm.toMGRS([this.lon,this.lat])}w(j_,i_);j_.$inject=["$scope","$element"];function k_(a,b,c){f_.call(this,a,null!=c?c:100);c=Gs(vua);a.set("_style",c);var d=!!a.get("name");if(b=b||(d?"name":void 0))c.labels=[{column:b,showColumn:!1}],d||a.set("name",a.get(b));jH(a)}w(k_,f_);var vua={image:{type:"icon",scale:.75,src:"http://maps.google.com/mapfiles/kml/paddle/wht-blank.png",color:"rgba(0,255,255,1)"},text:{}};
k_.prototype.l=function(){var a=this.result.get("extent");if(a)a=Zi(a,"EPSG:4326",N);else{var b=this.result.X();b instanceof Jk?QP(T.u(),{center:vk(b)}):b&&(a=b.aa())}a&&T.u().oi(a,2,16)};k_.prototype.g=function(){return"<coordresultcard></coordresultcard>"};function wua(a){if(a&&"label"in a){var b=a.label;delete a.label}a=new ek(a);a.ga(H(a));var c=Gs(vua);a.set("_style",c);b&&(c.labels=[{column:b,showColumn:!1}]);jH(a);return a};function l_(){h_.call(this,"coord","Coordinates");this.log=xua;this.priority=100;this.type="coord"}w(l_,h_);var xua=E.V("os.ui.search.place.CoordinateSearch");l_.prototype.cancel=function(){};l_.prototype.Tq=function(a){this.term=a;this.dispatchEvent(new fU("autocomplete.success",this.term,[]))};
l_.prototype.ds=function(a,b,c){this.term=a;var d=[];try{var e=uu(a);if(e)if(90>e.lat&&-90<e.lat){e.lon=Ir(e.lon);var f=wua({geometry:iu(new Jk([e.lon,e.lat])),label:a});d.push(new k_(f))}else{var h="The processed latitude was out of bounds [-90.0, 90.0]. Result for "+a+":"+JSON.stringify(e);throw Error(h);}else{var k=a.replace(/\s+/g,"").toUpperCase();if(k.match(ku)){var l=osasm.toLonLat(k);f=wua({geometry:iu(new Jk(l)),label:a});d.push(new k_(f))}}}catch(m){E.error(this.log,"coordinate search failed:",
m)}this.dispatchEvent(new fU("success",a,sE(d,b,c),d.length));return!0};W.directive("resultcard",[function(){return{restrict:"E",replace:!0,scope:!0,template:"<div></div>",controller:m_,controllerAs:"resultCard"}}]);function m_(a,b,c){if("result"in a){var d=a.result.g();Ib(d,"<")?b.append(c(d)(a)):b.append(d)}a.$on("$destroy",this.g.bind(this))}m_.$inject=["$scope","$element","$compile"];m_.prototype.g=function(){};W.directive("autovheight",[function(){return{restrict:"A",scope:{siblings:"@",padding:"@?",minHeight:"@?"},controller:n_}}]);
function n_(a,b,c,d){this.v=a;this.K=b;this.minHeight=null!=this.v.minHeight?this.v.minHeight:20;this.padding=null!=this.v.padding?this.v.padding:0;this.g=this.j.bind(this);b.parent().resize(this.g);d(this.o.bind(this));mc(CE).forEach(function(a){$(a).resize(this.g)}.bind(this));Xy(this.j.bind(this));C.H(TR,this.j,!1,this);a.$on("resize",this.j.bind(this));a.$on("$destroy",this.l.bind(this))}n_.$inject=["$scope","$element","$injector","$timeout"];
n_.prototype.l=function(){C.M(TR,this.j,!1,this);this.K.parent().removeResize(this.g);var a=this.v.siblings;if(a&&this.g)try{$(a).removeResize(this.g)}catch(b){}this.v=this.K=this.g=null};
n_.prototype.j=function(){if(this.K){var a=window.innerHeight,b=0;mc(CE).forEach(function(a){b+=$(a).outerHeight()});this.v.siblings&&$.makeArray($(this.v.siblings)).forEach(function(a){b+=$(a).outerHeight()});var c=a-b,d=this.minHeight+"vh";c/a*100>this.minHeight&&(d=c/a*100-this.padding+"vh");this.K.css("height",d)}};n_.prototype.o=function(){var a=this.v.siblings;a&&$(a).resize(this.g)};W.directive("searchresults",[function(){return{restrict:"E",scope:{parent:"@"},replace:!0,transclude:!0,templateUrl:"v1542394219/views/search/searchresults.html",controller:o_,controllerAs:"searchResults"}}]);function o_(a){this.v=a;this.show=!1;this.results=[];this.loading=!1;var b=gU.u();b.H("start",this.Cu,!1,this);b.H("success",this.Um,!1,this);b.H("progress",this.Um,!1,this);b.H("autocomplete.success",this.uu,!1,this);a.$on("$destroy",this.NK.bind(this));yua(this)}o_.$inject=["$scope"];g=o_.prototype;
g.NK=function(){var a=gU.u();a.M("start",this.Cu,!1,this);a.M("success",this.Um,!1,this);a.M("progress",this.Um,!1,this);a.M("autocomplete.success",this.uu,!1,this);this.v=null};g.Cu=function(){this.loading=!0};g.Um=function(a){this.loading="success"!==a.type;yua(this);X(this.v)};function yua(a){a.results=(gU.u().ie()||[]).slice(0,20);a.show=0<a.results.length}g.uu=function(){this.results.length=0;this.show=!1;X(this.v)};g.track=function(a){return a.D()};o_.prototype.track=o_.prototype.track;function p_(){A.call(this);this.g=new uR(this.qG,100,this);for(var a=GL(NB),b=0,c=a.length;b<c;b++)I(a[b],"propertychange",this.Im,this);V.H("dataSourceAdded",this.sx,!1,this);V.H("dataSourceRemoved",this.tx,!1,this);C.H("addLayer",this.Fh,!1,this);C.H("removeLayer",this.Fh,!1,this)}w(p_,A);wa(p_);g=p_.prototype;
g.J=function(){this.g.dispose();this.g=null;C.M("addLayer",this.Fh,!1,this);C.M("removeLayer",this.Fh,!1,this);V.M("dataSourceAdded",this.sx,!1,this);V.M("dataSourceRemoved",this.tx,!1,this);for(var a=GL(NB),b=0,c=a.length;b<c;b++)xh(a[b],"propertychange",this.Im,this);V=null};g.Fh=function(){this.g.kf()};g.qG=function(){this.dispatchEvent("histogramChange")};g.sx=function(a){a.source&&(I(a.source,"propertychange",this.Im,this),this.Fh())};
g.tx=function(a){a.source&&(xh(a.source,"propertychange",this.Im,this),this.Fh())};g.Im=function(a){switch(a.l){case "featureVisibility":if(!a.o)break;case "color":case "features":case "timeEnabled":case "timeModel":case "title":case "visible":this.Fh()}};
function rra(a){var b=[];0<a.interval&&(b=pw(T.u()).map(Zfa).filter(CA),b.length||(b=GL(NB)),b=b.map(function(b){if(P(b,"os.hist.IHistogramProvider"))a:{var c=a.start,e=a.end,f=a.interval;if(0<f){var h=b.l;if(h&&b.Hb()&&b.Md){var k={},l=h.Z;for(c=Math.floor(c/f)*f;c<=e;){var m=c+f,n=jw(h,new Uv(c,m),!1,!0).length;k[c]=n;c=m}l&&jw(h,l,!1,!0);if(0<kc(k)){e=new bM;e.ga(b.D());f=xv(b.La());e.s=f;e.g=k;e.o=a;e.Ta(b.S());e.ec(b.Hb());e.ae(h.B||gw);b=e;break a}}}b=null}else b=null;return b}).filter(CA));
return b};W.directive("dateTime",[function(){return{restrict:"AE",replace:!0,scope:{value:"=",disabled:"=?",isRequired:"=?",invalid:"=?",hidecontrols:"=?"},templateUrl:"v1542394219/views/datetime/datetime.html",controller:q_,controllerAs:"dateTimeCtrl"}}]);
function q_(a){this.v=a;this.second=this.minute=this.hour=this.date=null;this.dateOptions={changeYear:!0,changeMonth:!0,yearRange:"1900:+10"};a.required=a.isRequired||!1;zua(this);a.$watch("disabled",function(b){a.required=!0===b?!1:a.isRequired});a.$watch("isRequired",function(){a.required=a.disabled?!1:a.isRequired});a.$on("reset",function(a,c){c==this.v.value&&(a=new Date(this.v.value),this.date=new Date(a.getTime()+6E4*a.getTimezoneOffset()),this.hour=a.getUTCHours(),this.minute=a.getUTCMinutes(),
this.second=a.getUTCSeconds())}.bind(this));a.$on("$destroy",this.g.bind(this))}q_.$inject=["$scope"];var Aua=E.V("os.ui.datetime.DateTimeCtrl");q_.prototype.g=function(){this.v=this.date=null};
function zua(a){a.v.$watch("value",function(a){a?(a=new Date(a),this.date=new Date(a.getTime()+6E4*a.getTimezoneOffset()),this.hour=a.getUTCHours(),this.minute=a.getUTCMinutes(),this.second=a.getUTCSeconds()):this.second=this.minute=this.hour=this.date=null}.bind(a));a.l=a.v.$watch("dateTimeCtrl.date",a.j.bind(a))}q_.prototype.j=function(a,b){a&&a!=b&&this.Ls("date")};
q_.prototype.Ls=function(a){E.za(Aua,"dateTime.updateValue");a&&"date"===a&&za(this.date)&&!isNaN(this.date.getTime())&&(null==this.hour&&(this.hour=0),null==this.minute&&(this.minute=0),null==this.second&&(this.second=0));za(this.date)&&!isNaN(this.date.getTime())&&null!=this.hour&&null!=this.minute&&null!=this.second?(a=new Date(this.date.getTime()-6E4*this.date.getTimezoneOffset()),a.setUTCHours(this.hour),a.setUTCMinutes(this.minute),a.setUTCSeconds(this.second),this.v.value=a.toISOString().replace(/\.[0-9]{3}Z/,
"Z"),this.errorString=null,this.v.invalid=!1):(this.v.invalid=!0,this.requiredString=this.errorString=null,this.v.required&&!za(this.date)&&null==this.hour&&null==this.minute&&null==this.second?this.requiredString="Required!":za(this.date)?null==this.hour?this.errorString="Hour field invalid! Range: 0-23":null==this.minute?this.errorString="Minute field invalid! Range: 0-59":null==this.second&&(this.errorString="Second field invalid! Range: 0-59"):this.errorString="Please provide a valid date.")};
q_.prototype.updateValue=q_.prototype.Ls;q_.prototype.PM=function(){$(".js-date-time__time-input").addClass("ng-dirty");$(".js-wheel-date__date-input").addClass("ng-dirty");var a=new Date;this.date=new Date(a.getTime()+6E4*a.getTimezoneOffset());this.hour=a.getUTCHours();this.minute=a.getUTCMinutes();this.second=a.getUTCSeconds();this.Ls();this.v&&this.v.dateTimeForm&&this.v.dateTimeForm.$setDirty()};q_.prototype.setNow=q_.prototype.PM;
q_.prototype.reset=function(){this.l();this.second=this.minute=this.hour=this.date=null;this.errorString=this.v.value=null;this.v.invalid=!1;zua(this)};q_.prototype.reset=q_.prototype.reset;W.directive("animationsettings",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/windows/animationsettings.html",controller:r_,controllerAs:"animationCtrl"}}]);
function r_(a,b){this.scope=a;this.element=b;this.g=this.j=this.l=this.o=null;b=hw.u();this.o=new Date(b.Pa()+wC);this.l=new Date(b.Ya()+wC);this.scope.autoConfig=Bua;this.scope.autoLoop=!!b.l.isEmpty();this.scope.autoLoop?(this.scope.loopStart=this.j=this.o,this.scope.loopEnd=this.g=this.l):(this.scope.loopStart=this.j=new Date(OM(b).start+wC),this.scope.loopEnd=this.g=new Date(OM(b).end+wC));s_(this.scope,b.cc(),b.A);this.eo();this.scope.duration=b.L;this.scope.durations=["day","week","month","year"];
this.scope.units=t_;this.scope.fade=b.N;this.scope.lock=b.B;a.$watch("loopStart",this.s.bind(this));a.$watch("loopEnd",this.s.bind(this));a.$on("$destroy",this.G.bind(this));a.loopRangeTip="The time range used to animate data.";a.tilesTip="The size of each tile frame.";a.windowTip="The size of the blue active window.";a.skipTip="The amount of time that the active window skips forward or back with each frame.";a.fadeTip="Fade in/out features based on the size of your timeline window and scroll direction.";
a.lockTip="During animation this causes the visible window to lock from the start point.";this.A=new Lg(document);this.A.H("key",this.B,!1,this);this.scope.$emit("window.ready")}r_.$inject=["$scope","$element"];r_.prototype.G=function(){Ma(this.A);this.element=this.scope=this.g=this.j=this.l=this.o=this.element=null};var Bua=!0,t_=[{label:"ms",value:1},{label:"secs",value:1E3},{label:"mins",value:6E4},{label:"hrs",value:36E5},{label:"days",value:864E5},{label:"weeks",value:6048E5}];
r_.prototype.FE=function(){return 1<Qe(hw.u().l).length};r_.prototype.hasMultipleRanges=r_.prototype.FE;r_.prototype.s=function(){"string"===typeof this.scope.loopStart&&(this.j=FC(this.scope.loopStart,null));"string"===typeof this.scope.loopEnd&&(this.g=FC(this.scope.loopEnd,null));this.eo()};
r_.prototype.eo=function(){if(this.scope.autoConfig){var a=hw.u(),b=KM(a);if(24174E5<=b)this.scope.duration="week",s_(this.scope,6048E5,6048E5);else if(4302E5<=b)this.scope.duration="day",s_(this.scope,864E5,864E5);else{var c=hra(b/24);a=cL(a.j).getLength();c<a/24&&(c=Math.min(b/2,a/24));this.scope.duration="day";s_(this.scope,c,c/2)}}};r_.prototype.autoConfigure=r_.prototype.eo;
function s_(a,b,c){for(var d=0,e=t_.length;d<e;d++)0===b%t_[d].value&&(a.windowUnit=t_[d],a.window=b/t_[d].value),0===c%t_[d].value&&(a.skipUnit=t_[d],a.skip=c/t_[d].value)}
r_.prototype.accept=function(){var a=hw.u();this.scope.fade!=a.N&&TM(a,this.scope.fade);this.scope.lock!=a.B&&(UM(a,this.scope.lock),Q(R.u(),"timeline.features.settings-lock",1));WM(a);if(!this.scope.autoLoop){var b=this.j.getTime()-wC,c=this.g.getTime()-wC;b!=c&&gN(a,new WK(b,c))}Bua=this.scope.autoConfig;PM(a,this.scope.window*this.scope.windowUnit.value);QM(a,this.scope.skip*this.scope.skipUnit.value);NM(a,this.scope.duration);a.Ad(OM(a).start+a.cc());LW(this.scope.timeline,[a.Pa(),a.Ya()]);this.cancel()};
r_.prototype.accept=r_.prototype.accept;r_.prototype.cancel=function(){KE(this.element)};r_.prototype.cancel=r_.prototype.cancel;r_.prototype.iH=function(){Q(R.u(),"timeline.features.settings-fade",1)};r_.prototype.onFadeChange=r_.prototype.iH;r_.prototype.B=function(a){27==a.keyCode?this.cancel():13==a.keyCode&&this.accept()};W.directive("time",[function(){return{restrict:"E",replace:!0,scope:{hours:"=",mins:"=",secs:"="},templateUrl:"v1542394219/views/time/time.html",controllerAs:"time"}}]);W.directive("timesettings",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/windows/timelinesettings.html",controller:u_,controllerAs:"timeCtrl"}}]);
function u_(a,b){this.scope=a;this.element=b;a=hw.u();this.scope.offset="UTC"+("Z"==xC?"+0000":xC);b=this.scope;for(var c=Qe(a.j),d=[],e=0;e<c.length;e++)d.push({start:(new Date(c[e].start+wC)).toISOString(),end:(new Date(c[e].end+wC)).toISOString()});b.loadRanges=d;b=this.scope;a=Qe(a.o);c=[];for(d=0;d<a.length;d++)864E5==a[d].end&&(a[d].end=86399E3),c.push({start:{hours:Math.floor(a[d].start/36E5),mins:Math.floor(a[d].start/6E4)%60,secs:Math.floor(a[d].start/1E3)%60},end:{hours:Math.floor(a[d].end/
36E5),mins:Math.floor(a[d].end/6E4)%60,secs:Math.floor(a[d].end/1E3)%60}});b.sliceRanges=c;this.scope.$on("$destroy",this.l.bind(this));this.scope.loadStartTip="The start of a time range used to load data.";this.scope.loadEndTip="The end of a time range used to load data.";this.scope.sliceTip="A time range less than 24 hours to show data from each loaded day.";this.scope.sliceStartTip="The start of a slice used to load data. Start can be later than end if it crosses midnight.";this.scope.sliceEndTip=
"The end of a slice used to load data.";this.scope.offsetTip="All times will be shown with this offset (or time zone).";this.scope.sliceModels={};this.g=new Lg(document);this.g.H("key",this.j,!1,this);this.scope.$emit("window.ready")}u_.$inject=["$scope","$element"];u_.prototype.l=function(){Ma(this.g);this.scope=this.element=null};
u_.prototype.accept=function(){var a=hw.u(),b=this.scope.offset;b=b.replace(/(utc|[:])/gi,"");var c=("-"==b.charAt(0)?-1:1)*(36E5*parseInt(b.substring(1,3),10)+6E4*parseInt(b.substring(3,5),10));0===c&&(b="Z");O.set(["time","offsetLabel"],b);O.set(["time","offset"],c);var d=this.scope.sliceRanges,e=new $K;for(b=0;b<d.length;b++){c=36E5*d[b].start.hours+6E4*d[b].start.mins+1E3*d[b].start.secs;var f=36E5*d[b].end.hours+6E4*d[b].end.mins+1E3*d[b].end.secs;c>f&&(e.add(SM(0,f)),f=864E5);e.add(SM(c,f))}cN(a,
e);d=this.scope.loadRanges;if(0<d.length){e=new $K;Wia(a);for(b=0;b<d.length;b++){c=v_(d[b].start);f=v_(d[b].end);var h=c,k=f;c>f&&(h=f,k=c);e.add(SM(h,k))}$ia(a,e);a.dispatchEvent("timeline.refreshLoad");Q(R.u(),"timeline.features.settings-timeRange",1)}LW(this.scope.timeline,[a.Pa(),a.Ya()]);this.cancel()};u_.prototype.accept=u_.prototype.accept;u_.prototype.cancel=function(){KE(this.element)};u_.prototype.cancel=u_.prototype.cancel;
u_.prototype.j=function(a){27==a.keyCode?this.cancel():13==a.keyCode&&this.accept()};u_.prototype.HB=function(){var a={start:{hours:0,mins:0,secs:0},end:{hours:1,mins:0,secs:0}},b=this.scope.sliceRanges.length?this.scope.sliceRanges[this.scope.sliceRanges.length-1]:null;b&&(a={start:{hours:b.start.hours,mins:b.start.mins,secs:b.start.secs},end:{hours:b.end.hours,mins:b.end.mins,secs:b.end.secs}});this.scope.sliceRanges.push(a)};u_.prototype.addSlice=u_.prototype.HB;
u_.prototype.yM=function(a){this.scope.sliceRanges.splice(a,1)};u_.prototype.removeSlice=u_.prototype.yM;u_.prototype.addRange=function(){var a=this.scope.loadRanges[this.scope.loadRanges.length-1];this.scope.loadRanges.push({start:a.start,end:a.end})};u_.prototype.addRange=u_.prototype.addRange;u_.prototype.removeRange=function(a){this.scope.loadRanges.splice(a,1)};u_.prototype.removeRange=u_.prototype.removeRange;function v_(a){return("string"===typeof a?FC(a,null):a).getTime()-wC}
u_.prototype.valid=function(){for(var a=this.scope.loadRanges,b=0;b<a.length;b++){var c=v_(a[b].start),d=v_(a[b].end);if(c>=d)return!1}return!0};u_.prototype.valid=u_.prototype.valid;u_.prototype.isValid=function(a,b){return new Date(a)<new Date(b)};u_.prototype.isValid=u_.prototype.isValid;u_.prototype.cF=function(a,b,c){var d=!0;a&&b&&(d=36E5*a.hours+6E4*a.mins+1E3*a.secs<=36E5*b.hours+6E4*b.mins+1E3*b.secs||c);return d};u_.prototype.isValidSlice=u_.prototype.cF;W.directive("timelinePanel",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/timelinepanel.html",controller:w_,controllerAs:"timelineCtrl"}}]);function w_(a,b,c){NW.call(this,a,b,c);this.pa=p_.u();this.pa.H("histogramChange",this.Ca,!1,this);Pga&&sZ&&(this.o.j=sZ)}w(w_,NW);w_.$inject=["$scope","$element","$timeout"];g=w_.prototype;g.destroy=function(){this.pa.M("histogramChange",this.Ca,!1,this);this.pa=null;w_.C.destroy.call(this)};
g.Vx=function(a){a.layer instanceof MK?(a=a.layer.O(),a instanceof vL&&x_(!0,a)):a.layer instanceof VP&&x_(!0,a.layer)};g.bi=function(){try{angular.element(".js-date-control").scope().dateControl.Fk()}catch(a){}x_(!0);T.u().H("addLayer",this.Vx,!1,this);w_.C.bi.call(this);C.dispatchEvent("map:glRepaint")};g.Fk=function(){w_.C.Fk.call(this);T.u().M("addLayer",this.Vx,!1,this);x_(!1);angular.element(".js-date-control").scope().dateControl.bi();angular.element(".js-date-panel").scope().ctrl.ot();C.dispatchEvent("map:glRepaint")};
function x_(a,b){if(b)b.tn(a);else{b=pw(T.u());for(var c=0,d=b.length;c<d;c++){var e=b[c];e instanceof VP?e.tn(a):e instanceof MK&&(e=e.O(),e instanceof vL&&e.tn(a))}}}g.UM=function(){var a={timeline:angular.element(".c-svg-timeline").scope().timeline};FE({label:"Timeline Settings",icon:"fa fa-clock-o",x:"center",y:"center",width:"525",height:"auto",modal:"true","no-scroll":"true","show-close":"true"},"<timesettings></timesettings>",void 0,void 0,void 0,a)};w_.prototype.settings=w_.prototype.UM;
w_.prototype.NB=function(){var a={timeline:angular.element(".c-svg-timeline").scope().timeline};FE({label:"Animation Settings",icon:"fa fa-sliders",x:"center",y:"center",width:"450","max-width":"600","min-width":"450",height:"auto",modal:"true","no-scroll":"true"},"<animationsettings></animationsettings>",void 0,void 0,void 0,a)};w_.prototype.animationSettings=w_.prototype.NB;w_.prototype.Ea=function(){w_.C.Ea.call(this);T.u().Ve();C.dispatchEvent("map:glRepaint")};function y_(){y.call(this);this.id="";this.error=null}w(y_,y);y_.prototype.D=function(){return this.id};y_.prototype.getError=function(){return this.error};function z_(a){pS.call(this);this.j=!1;this.fd=a}w(z_,pS);
z_.prototype.Ib=function(a,b){z_.C.Ib.call(this,a,b);var c=new IR;b&&this.g(b,c);var d=b?b.type:a?a.T():null,e=V;d=d&&d in e.l?e.l[d]:null;this.fd&&((b=b?b.provider:null)?(c.provider=b,c.enabled=b.mc()):(c.file=a,c.label=a.getFileName(),c.enabled=!0),FE({label:(b?b.Ee?"Edit ":"View ":"Add ")+d.title,icon:"fa fa-database",x:"center",y:"center",width:"500","min-width":"350","max-width":"600",height:"auto","min-height":"250","max-height":"500",modal:"true","show-close":"true","no-scroll":"true"},this.fd,
void 0,void 0,void 0,{config:c}))};function A_(){jz.call(this);this.l=!1}w(A_,jz);A_.prototype.mb=function(){return this.l};A_.prototype.isLoading=A_.prototype.mb;A_.prototype.Va=function(a){a!=this.l&&(this.l=a,this.dispatchEvent(new U("loading",a,!a)))};A_.prototype.setLoading=A_.prototype.Va;A_.prototype.Eo=function(){return this.mb()};A_.prototype.lc=function(a){this.Va(a.mb());A_.C.lc.call(this,a)};function B_(a){A_.call(this);this.s=a;this.Jb=null}w(B_,A_);B_.prototype.load=function(a){this.Va(!0);var b=new jz;this.Jb=new C_(b,a,this.s);this.Jb.H("success",this.o,!1,this);this.Jb.H("error",this.g,!1,this);this.Jb.load()};B_.prototype.o=function(){this.Va(!1);this.Jb.M("success",this.o,!1,this);this.Jb.M("error",this.g,!1,this);this.zc(this.Jb.o.na());Ma(this.Jb);this.Jb=null;this.dispatchEvent("success")};
B_.prototype.g=function(){this.Va(!1);this.Jb.M("success",this.o,!1,this);this.Jb.M("error",this.g,!1,this);Ma(this.Jb);this.Jb=null;this.dispatchEvent("error")};function Cua(){this.j=this.o=this.l=this.g=null}g=Cua.prototype;g.Ul=function(){return[]};g.Jo=function(){return this.l};g.Ez=function(a){this.l=a};g.te=function(){return this.o};g.zn=function(a){this.o=a};g.Mf=function(){return this.j};g.un=function(a){this.j=a};g.getColumns=function(){return this.g};g.setColumns=function(a){this.g=a};g.sa=function(){};g.restore=function(){};function D_(){SK.call(this);this.l=this.s=!1;this.o=this.L=this.Za=this.I=null;this.Oc="arc"}w(D_,SK);Nv["plugin.arc.layer.ArcLayerDescriptor"]=D_;P(D_,"os.ui.ogc.IFeatureTypeDescriptor");P(D_,"os.filter.IFilterable");g=D_.prototype;g.Ka=function(){return this.Za};g.Lb=function(a){this.Za=a};g.aa=function(){return this.L};g.Ac=function(a){this.L=a};g.getTags=function(){return null};g.T=function(){return this.s&&this.l?"Tile and Feature Groups":this.s?"Tile Layers":this.l?"Feature Layers":null};
g.td=function(){var a="";this.s&&(a+='<img src="v1542394219/images/tiles-base.png" title="Tile layer"/>');this.l&&(a+='<img src="v1542394219/images/features-base.png" title="Feature layer"/>');E_(this)&&(a+='<img class="time-icon" src="v1542394219/images/time-base.png" title="This layer supports animation over time"/>');return a};function E_(a){return!!a.Qj()||!!a.Of()}g.mh=function(){var a=[this.D()];this.s&&a.push(this.D()+"#tiles");this.l&&a.push(this.D()+"#features");return a};
function Dua(a,b,c,d){a.Lb(d);a.ga(c);a.Ta(b.name);a.fb(b.description);a.I=b.id;if(c=b.copyrightText)a.fb(a.qb()+"\n\nCopyright: "+c),a.G=c;if(c=b.extent)try{4326===c.wkid&&a.Ac([c.xmin,c.ymin,c.xmax,c.ymax])}catch(m){}d=c=null;var e=b.timeInfo;if(e)try{c=e.startTimeField,d=e.endTimeField,a.U=e.timeExtent[0],a.P=e.timeExtent[1]}catch(m){}e=b.drawingInfo;a.Vc("#ffffff");if(e)try{var f;"esriGeometryPoint"!=b.geometryType&&(f=oc(e,["renderer","symbol","outline","color"]));f||(f=oc(e,["renderer","symbol",
"color"]));if(f){var h=iv(f);a.Vc(h)}}catch(m){}(f=b.capabilities)?(f=f.split(/\s*,\s*/),Eua(a,kb(f,"Map")),Fua(a,kb(f,"Data"))):(a.s=!0,a.l=!0);if((b=b.fields)&&q(b)&&0<b.length){a.o=new Cua;f=[];h=0;for(e=b.length;h<e;h++){var k=b[h],l=k.name;f.push({name:l,type:Gua(k.type)});l===c?a.o.zn(c):l===d?a.o.un(d):"esriFieldTypeGeometry"===l&&a.o.Ez(l)}f.sort(function(a,b){return Pb(a.name,b.name)});a.o.setColumns(f)}else a.l=!1;a.Xh()}g.se=function(){return this.o};g.Xj=function(){return!!this.o};
function Fua(a,b){a.l=b}function Eua(a,b){a.s=b}g.Sa=function(){var a=[];this.l&&a.push(Hua(this));this.s&&a.push(Iua(this));return a};
function Iua(a){var b={},c=new af;c.set("layers","show: "+a.I);b.type=F_;b.id=a.D()+"#tiles";b.layerType=a.T();b.providedBy=a.rb();b.animate=E_(a);b.tags=a.getTags();b.url=a.Ka();b.params=c;b.title=a.S();b.extent=a.aa();(c=a.G)&&(b.attributions=[c]);b.colorControl="colorControl:pickerReset";b.baseColor=a.La();E_(a)&&(b.timeParam="time",b.timeFormat="{start},{end}",b.dateFormat="timestamp");return b}
function Hua(a){var b={};b.id=a.D()+"#features";var c=new af;c.set("f","json");c.set("inSR","4326");c.set("outSR","4326");c.set("outFields","*");c.set("geometryType","esriGeometryPolygon");c.set("geometry","{geom}");c.set("returnIdsOnly",!0);E_(a)&&c.set("time","{time}");b.type=G_;b.layerType=a.T();b.animate=E_(a);b.url=a.Ka()+"/"+a.I+"/query";b.params=c;b.usePost=!0;b.title=a.S();b.spatial=!0;b.temporal=E_(a);b.filter=!0;b.load=!0;b.tags=a.getTags();b.provider=a.rb();a.s||(b.attributions=[a.G]);
var d=a.se();b.featureType=d;c=[];if(E_(a)&&d&&(a=d.te())){d=d.Mf();var e=new RS(d?"start":"instant");e.ja=a;e.format="Timestamp";c.push(e);d&&(a=new RS("end"),a.ja=d,a.format="Timestamp",c.push(a))}0<c.length&&(b.mappings=c);return b}g.Eg=function(){return this.l};g.Hi=function(){var a=this.D()+"#features";kY(a,this.S()+" Features")};g.ff=function(){return this.Za+"/"+this.I+"/query!!"+this.S()};g.Fe=function(){return this.o?this.o.getColumns():null};
g.Qd=function(){var a=D_.C.Qd.call(this);this.Eg()&&(a="<filterabledescriptornodeui></filterabledescriptornodeui>"+a);return a};g.Jl=function(){return[this.D()+"#features"]};function H_(a){A_.call(this);this.log=Jua;this.Za=null;this.o=a;this.g=null}w(H_,A_);var Jua=E.V("plugin.arc.node.ArcServiceNode");H_.prototype.Lb=function(a){var b=a.indexOf("/FeatureServer"),c=a.indexOf("/MapServer");-1<b?a=a.substring(0,b):-1<c&&(a=a.substring(0,c));this.Za=a};H_.prototype.load=function(a){this.g&&Ma(this.g);this.Va(!0);this.Lb(a);a=this.Za+"/MapServer/layers?f=json";this.g=new Ys(a);ct(this.g,"*/*");this.g.H("success",this.B,!1,this);this.g.H("error",this.s,!1,this);this.g.load()};
H_.prototype.B=function(){this.Va(!1);var a=this.g.g;Ma(this.g);var b=this.g=null;try{b=JSON.parse(a)}catch(l){}if(b&&this.o&&(a=b.layers)&&0<a.length){b=0;for(var c=a.length;b<c;b++){var d=a[b],e=this.o,f=V,h="";this.Za&&(h=this.Za.replace(e.Ka(),""));h=bc(h+"|"+d.id);var k=e.D()+"#"+h;(h=f.Ja(k))||(h=new D_);h.Cc(e.ba());Dua(h,d,k,this.Za+"/MapServer");h.Me=e;bJ(f,h);d=new jU;kU(d,h);this.R(d)}}this.dispatchEvent("success")};
H_.prototype.s=function(){this.Va(!1);var a=this.g.j;Ma(this.g);this.g=null;E.error(this.log,"Arc loading failed for URL: "+(a?a.toString():"no URL available!"));this.dispatchEvent("error")};function C_(a,b,c){A.call(this);this.o=a;this.Za=b;this.s=c;this.g=null;this.log=Kua;this.j=[];this.l=[]}w(C_,A);var Kua=E.V("plugin.arc.ArcLoader");g=C_.prototype;g.J=function(){C_.C.J.call(this);this.s=this.o=null;this.g&&(Ma(this.g),this.g=null)};g.Ka=function(){return this.Za};g.Lb=function(a){this.Za=a};
g.load=function(){var a=this.Za+"?f=json";E.za(this.log,"Loading Arc capabilities from URL: "+a);this.g=new Ys(a);ct(this.g,"*/*");this.g.H("success",this.sL,!1,this);this.g.H("error",this.rL,!1,this);this.g.load()};
g.sL=function(){var a=this.g.g;Ma(this.g);this.g=null;E.za(this.log,"Arc load successful from: "+this.Za);var b=null;try{b=JSON.parse(a)}catch(h){E.error(this.log,"The Arc response JSON was invalid!")}this.j.length=0;this.l.length=0;if(b){if((a=b.folders)&&q(a))for(var c=0,d=a.length;c<d;c++){var e=a[c],f=new B_(this.s);f.Da(e);f.H("success",this.Rg,!1,this);f.H("error",this.Rg,!1,this);f.load(this.Za+"/"+e);this.j.push(f)}if((a=b.services)&&q(a))for(c=0,d=a.length;c<d;c++)e=a[c],"MapServer"===e.type&&
(e=e.name,e=e.substring(e.lastIndexOf("/")+1),f=new H_(this.s),f.Da(e),f.H("success",this.Rg,!1,this),f.H("error",this.Rg,!1,this),f.load(this.Za+"/"+e),this.j.push(f));(b=b.layers)&&q(b)&&(e="Folder",b=this.Za.lastIndexOf("/MapServer"),-1==b&&(b=this.Za.lastIndexOf("/FeatureServer")),-1!=b&&(b=this.Za.substring(0,b),e=b.substring(b.lastIndexOf("/")+1)),f=new H_(this.s),f.Da(e),f.H("success",this.Rg,!1,this),f.H("error",this.Rg,!1,this),f.load(this.Za),this.j.push(f))}0===this.j.length&&this.dispatchEvent("success")};
g.Rg=function(a){a=a.target;a.M("success",this.Rg,!1,this);a.M("error",this.Rg,!1,this);a.na()&&a.na().length&&this.l.push(a);qb(this.j,a);0===this.j.length&&(this.o.zc(this.l),this.l=[],this.dispatchEvent("success"))};g.rL=function(){var a=this.g.j;Ma(this.g);this.g=null;E.error(this.log,"Arc loading failed for URL: "+a.toString());this.dispatchEvent("error")};function Gua(a){return"esriFieldTypeBoolean"===a||"esriFieldTypeString"===a?"string":"esriFieldTypeDate"===a?"datetime":"esriFieldTypeGeometry"===a?"gml":"decimal"}function Lua(a){kY(a.D())}function Mua(a){return(a=a.Sa())&&a.featureType&&(a=a.featureType)?a.getColumns():null}var Nua=/arcgis/i,Oua=/ArcGIS REST Services Directory/i;function I_(){UI.call(this);this.s="ogc";this.Jb=null;this.log=Pua}w(I_,UI);var Pua=E.V("plugin.arc.ArcServer");I_.prototype.bc=function(a){I_.C.bc.call(this,a);var b=a.url;-1==b.indexOf("/rest/services")&&(b+="/rest/services");b=b.replace(/\/+$/,"");a.id&&this.ga(a.id);this.Lb(b)};
I_.prototype.load=function(a){I_.C.load.call(this,a);E.info(this.log,this.ba()+" requesting Arc Server capabilities.");this.zc(null);a=new jz;this.Jb=new C_(a,this.url,this);this.Jb.load();this.Jb.H("success",this.l,!1,this);this.Jb.H("error",this.g,!1,this)};I_.prototype.l=function(){E.info(this.log,this.ba()+" base Arc server capabilities loaded.");this.Jb.M("success",this.l,!1,this);this.Jb.M("error",this.g,!1,this);this.zc(this.Jb.o.na());this.Jb&&(Ma(this.Jb),this.Jb=null);this.Va(!1)};
I_.prototype.g=function(){this.Jb.M("success",this.l,!1,this);this.Jb.M("error",this.g,!1,this);this.Jb&&(Ma(this.Jb),this.Jb=null);var a='Request failed for <a target="_blank" href="'+this.Ka()+'">Arc Server Capabilities</a>';this.getError()||(a="Server ["+this.ba()+"]: "+a,this.G||At(zt.u(),a,rs),E.error(Pua,a),WI(this,a),this.Va(!1));this.Va(!1)};function J_(a,b){a.error="";this.scope=a;this.element=b;this.g=this.scope.config.provider||null;this.dr();a.$emit("window.ready")}J_.$inject=["$scope","$element"];J_.prototype.dr=function(){this.scope.edit=this.g?this.g.Ee:!0};
J_.prototype.accept=function(){if(!this.scope.form.$invalid&&!this.scope.testing)if(!this.g||this.scope.error||this.g.Ee&&this.Zt()){this.scope.testing=!0;var a=this.g?this.g.D():$b();this.g=this.Jj();this.g.ga(a);this.g.Ee=!0;this.g.H("propertychange",this.j,!1,this);this.g.load(!0)}else this.g&&this.g.Ee?this.hj():this.close()};J_.prototype.accept=J_.prototype.accept;J_.prototype.close=function(){this.g&&this.g.M("propertychange",this.j,!1,this);KE(this.element)};J_.prototype.close=J_.prototype.close;
J_.prototype.apply=function(){try{this.scope.$apply()}catch(a){}};J_.prototype.j=function(a){"loading"!=a.l||a.o||(this.g.M("propertychange",this.j,!1,this),this.scope.testing=!1,this.scope.error=this.g.ti(),this.g.getError()?this.apply():this.hj())};J_.prototype.hj=function(){var a=this.Ux();O.set(["userProviders",this.g.D()],a);dJ(V,this.g.D());cJ(V,this.g);this.close()};function Qua(a,b,c,d){function e(b){var c=V.o.na(),e=a.config.provider||null;if(c)for(var f=0,m=c.length;f<m;f++)if(c[f].ba()===b&&e!==c[f])return d.$setValidity("unique",!1),b;d.$setValidity("unique",!0);return b}d.$formatters.unshift(e);d.$parsers.unshift(e)}Qua.$inject=["$scope","$element","$attrs","$ctrl"];W.directive("uniqueProviderTitle",[function(){return{require:"ngModel",link:Qua}}]);function Rua(a,b,c,d){function e(b){if(b&&a.config){var c=(a.config.alternateUrls||[]).indexOf(b);if(c!=a.$index&&-1!=c)return d.$setValidity("unique",!1),b}d.$setValidity("unique",!0);return b}d.$formatters.unshift(e);d.$parsers.unshift(e)}Rua.$inject=["$scope","$element","$attrs","$ctrl"];W.directive("uniqueServerUrl",[function(){return{require:"ngModel",link:Rua}}]);function K_(a,b){J_.call(this,a,b);this.element.find('input[name="title"]').focus()}w(K_,J_);K_.$inject=["$scope","$element"];g=K_.prototype;g.dr=function(){K_.C.dr.call(this);var a=this.scope.config.file;a?(a=a.Ob())&&(a=a.match(/title>([^<]*)<\//i))&&1<a.length&&(this.scope.config.label=a[1]):this.g&&(this.scope.config.label=this.g.ba())};g.Zt=function(){return this.Ka()!==this.scope.config.url};g.Ka=function(){return this.g?this.g.Ka():""};
g.Ux=function(){var a={},b=["label","url","enabled","type"],c=this.scope.config,d;for(d in c)-1<b.indexOf(d)&&(a[d]=c[d]);return a};g.hj=function(){this.g&&this.g.Da(this.scope.config.label);K_.C.hj.call(this)};W.directive("arcserver",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/forms/singleurl.html",controller:L_,controllerAs:"ctrl"}}]);function L_(a,b){K_.call(this,a,b);b=a.config.file;a.config.url=b?b.Ka():this.Ka();a.urlExample="https://www.example.com/arcgis/rest/services";a.config.type="arc";a.config.label=this.ba()||"ArcGIS Server"}w(L_,K_);L_.$inject=["$scope","$element"];L_.prototype.Jj=function(){var a=new I_;a.bc(this.scope.config);return a};
L_.prototype.Ka=function(){return this.g?this.g.Ka()||"":""};L_.prototype.ba=function(){return this.g?this.g.ba()||"":""};function M_(){US.call(this);this.log=Sua;this.animate=!1}w(M_,US);var Sua=E.V("os.layer.config.AbstractDataSourceLayerConfig");g=M_.prototype;g.dc=function(a){M_.C.dc.call(this,a);void 0!==a.animate?this.animate=a.animate:this.animate=!1};
g.Ye=function(a){this.dc(a);var b=this.O(a);a.attributions&&(b.kl=mm(b,a.attributions),b.ia());b.ga(this.id);yN(b,this.pd(a));b.Ph(this.wd(a));b.Ta(this.title);oN(b,this.animate);this.columns&&b.setColumns(this.columns);var c=this.W(b,a);this.restore(c,a);"load"in a||(a.load=!0);a.load&&b.refresh();return c};g.restore=function(a,b){b&&a.restore(b)};g.hl=va;
function Tua(a,b,c){var d=c.getColumns();if(d){var e=c.Jo();e&&sb(d,function(a){return a.name==e});if(b=V.Ja(b.id||""))if(b=b.getColumns()){var f={};d.forEach(function(a){a.name&&(f[a.name]=a.type||"string")});b.forEach(function(a){var b=a.name;f[b]&&(a.type=f[b])})}d=d.map(Uua);(a=a.O())&&a.setColumns(d)}}g.wd=function(a){var b=new sS(this.xf(a));a=Fy(a.url);b.L=a;return b};g.W=function(a){return new MK({source:a})};
g.pd=function(a){var b=new Ve(this.url);this.params&&Ze(b,this.params);b=new Ys(b);b.Tg=a.usePost?"POST":"GET";return b};g.O=function(){return new xN(void 0)};function Uua(a){var b=a.name.toUpperCase(),c=new FF;c.id=b;c.name=b;c.field=a.name;c.type=a.type;WF(c);return c};function N_(a,b,c,d,e){Ss.call(this,a,e);this.o=b;this.s=c;this.g=d}w(N_,Ss);N_.prototype.j=function(a){a=a.g;var b=a.get(this.o);b&&a.set(this.o,b.replace(this.s,this.g))};function O_(){this.j=this.g=this.l=null}O_.prototype.O=function(){return this.j};O_.prototype.Bb=function(a){this.j=a};function eU(a,b,c){b=a.l.format(b);a.g.g=b;b=a.j.o;et(b,a.g.D());$s(b,a.g);if(void 0!==c?c:1)c=WE,a=a.j.D(),c.g[a]=!0,c.s.start()};function P_(){this.g=null}w(P_,y);g=P_.prototype;g.J=function(){P_.C.J.call(this);this.oc()};g.Bb=function(a){var b=null;a instanceof ArrayBuffer&&(a=Ow(a)||null);"string"===typeof a?b=JSON.parse(a).features:Aa(a)&&(b=a.features);b&&(this.g?this.g=this.g.concat(b):this.g=b)};g.oc=function(){this.g=null};g.vd=function(){return null!=this.g&&0<this.g.length};
g.Wc=function(){if(this.g){for(var a=[],b=0,c=this.g.length;b<c;b++){var d=new ek,e=this.g[b],f=e.id||$b();d.ga(f);if(f=e.geometry){var h=null;f.x&&f.y?h=new Jk([f.x,f.y]):f.paths?h=new yr(f.paths[0]):f.rings?h=new Rk(f.rings):f.points?h=new Pr(f.points):f.xmin&&(h=new Rk([[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]]]));h&&d.sb(iu(h))}if(e=e.attributes)for(var k in e)d.set(k,e[k]);a.push(d)}this.g=null;return a}return null};function Q_(){N_.call(this,"ArcFilter","where","","",100)}w(Q_,N_);Q_.prototype.j=function(a){var b=this.g;b?a.g.set("where",b):a.g.remove("where")};function R_(){this.j=this.s=this.o=this.modifier=this.I=this.l=null;this.g=!1}w(R_,y);g=R_.prototype;g.py=function(){return this.I};function S_(a){var b=a.areaId;return"*"!==b?!!UE.get(b)&&a.includeArea:!1}function Vua(a){return!!UE.get(a.areaId)&&!a.includeArea}function Wua(a){var b=a.areaId,c=UE.get(b);if(a.spatialRequired)return!!c&&!!c.get("shown");"*"!==b&&c&&!c.get("shown")&&(a.areaId="*");return!0}function T_(a){a=a.filterId;return"*"!==a?(a=PJ.pb(a),!!a&&!!a.isEnabled()):!0}
function Xua(a){return UE.get(a.areaId)}
g.nr=function(){for(var a=UE,b=PJ,c=["area","filter"],d=WE.getEntries(this.l,null,null,!0),e=[],f=0,h=d.length;f<h;f++){var k=zc(d[f]);k.spatialRequired=this.g;e.push(k)}e=e.filter(Wua);d=e.filter(Vua).map(Xua);f=e.filter(S_);f.length?e=f.filter(T_):(e=e.filter(T_),yb(e,null,function(a){return a.filterId}));var l="";if(this.g&&!f.length)return l;var m=c[0]+"Id";e.sort(function(a,b){return Bb(a[m],b[m])});var n=void 0,p="",r=!0,u=null;f=0;for(h=e.length;f<h;f++){k=e[f];var v=k[m],x=k.areaId,B=k.filterId,
F=x&&k.includeArea?a.get(x):null;B=B?b.pb(B):null;var D=v===x?B:F;v!==n&&(n&&(p=this.wrap(p,c[1],d,r),p+=this.write(u),l+=this.wrapAll(p),p=""),n=v);p+=this.write(D);u=v===x?F:B;r=k.filterGroup}p=this.wrap(p,c[1],d,r);p+=this.write(u);l+=this.wrapAll(p);return l=this.wrap(l,c[0],d,r)};g.write=function(a){return a?a instanceof eJ?this.cl(a):this.o?this.o.format(a):"":""};g.cl=function(a){return this.j?this.j.format(a):a.pb()||""};
g.wrap=function(a,b,c,d){d=void 0!==d?d:!0;var e="";if("area"==b){if(e+=this.o.j(a),this.s&&c&&0<c.length){a={};b=0;for(d=c.length;b<d;b++){var f=c[b].D();f in a||(e+=this.s.format(c[b]),a[f]=!0)}e=this.s.j(e)}}else this.j&&!Lb(Yb(a))&&(e+=this.j.wrap(a,d));return e};g.wrapAll=function(a){return this.j?this.j.wrapAll(a):""};function U_(){this.G=!1;this.A=new le(this.aK,250,this);this.source=null;this.g=!1}w(U_,R_);g=U_.prototype;g.J=function(){U_.C.J.call(this);this.A.dispose();this.Bb(null)};g.O=function(){return this.source};g.py=function(){return this.source?this.source.S():""};
g.Bb=function(a){var b=WE;this.source&&(this.I=this.l=null,b.M("propertychange",this.Bw,!1,this),xh(this.source,"propertychange",this.Ix,this));if(this.source=a)this.l=this.source.D(),this.source.refresh=this.refresh.bind(this),b.H("propertychange",this.Bw,!1,this),I(this.source,"propertychange",this.Ix,this)};g.Ix=function(a){"visible"==a.l&&this.source.Hb()&&this.G&&(this.G=!1,V_(this))};g.Bw=function(a){a=a.o;var b=this.source.D();if("*"in a||b in a)this.source.clear(),this.refresh()};
g.aK=function(){this.source.mb()?this.A.start():V_(this)};function V_(a){a.A.isActive()||(a.source.Hb()?(a.vz(),a.Ot()):a.G=!0)}g.Ot=function(){this.g&&!this.modifier.g||zN(this.source)};g.refresh=function(a){var b=WE,c=this.source.D();this.g?aka(b,c)||aka(b,"*")?Yua(this,a):this.source.clear():Yua(this,a)};function Yua(a,b){b?V_(a):(a.source.aj(),a.A.start())}g.vz=function(){var a=this.nr();this.modifier.g=a;var b=this.source.o;b&&(et(b,this.modifier),$s(b,this.modifier));this.g&&!a&&this.source.clear()};function W_(){}W_.prototype.format=function(a){var b="";if(a&&a.X()){var c=a.X().clone().toLonLat();a=a.get("interpolationMethod");nD("EPSG:4326",a);GB(c);var d=oD=mD=null;switch(c.T()){case "Circle":d=(new Rk([Au(Wk(c),Xk(c))])).getCoordinates();break;case "MultiLineString":case "Polygon":d=c.getCoordinates();break;case "LineString":d=c.getCoordinates();break;case "MultiPolygon":d=[];c.getCoordinates().forEach(function(a){d=d.concat(a)});break;default:d=c.aa()}d&&(b=JSON.stringify({rings:d}))}return b};
W_.prototype.Sh=function(){return!0};W_.prototype.j=function(a){a=a.split("}{");for(var b={rings:[]},c=0,d=a.length;c<d;c++){Ib(a[c],"{")||(a[c]="{"+a[c]);Jb(a[c],"}")||(a[c]+="}");var e=JSON.parse(a[c]);b.rings=b.rings.concat(e.rings)}return JSON.stringify(b)};function X_(){N_.call(this,"ArcSpatial","geometry","","",100)}w(X_,N_);X_.prototype.j=function(a){var b=this.g;b&&a.g.set("geometry",b)};function Y_(){U_.call(this);this.modifier=new Q_;this.o=new W_;this.g=!0;this.B=new X_}w(Y_,U_);var Zua=E.V("plugin.arc.query.ArcQueryHandler");function $ua(a){for(var b=WE.getEntries(a.l,null,null,!0),c=[],d=0,e=b.length;d<e;d++){var f=zc(b[d]);f.spatialRequired=a.g;c.push(f)}return c=c.filter(Wua)}
Y_.prototype.nr=function(){var a="",b=$ua(this);b=b.filter(S_);b=b.filter(T_);if(!b.length)return a;a=!!b[0].filterGroup;for(var c=[],d={},e=0,f=b.length;e<f;e++){var h=b[e].filterId;h&&!d[h]&&(d[h]=!0,(h=PJ.pb(h))&&c.push(h))}b=c;a=null!=a?a:!0;c="";if(b)for(b instanceof eJ&&(b=[b]),d=0;d<b.length;d++)if(e=b[d]?b[d].pb():null)try{var k=VA(e),l=Ag(k);if(l){e=LJ;if(f=l){var m=f.getElementsByTagName("PropertyIsLike");if(0!=m.length)for(h=0;h<m.length;h++){var n="UPPER("+NJ(m[h].childNodes)+")";null!=
m[h].querySelector("PropertyName")&&Eg(m[h].querySelector("PropertyName"),n);if(null!=m[h].querySelector("Literal")){a:{for(var p=OJ(m[h].childNodes),r=0;1>r;r++)if("'"==p.charAt(0)&&"'"==p.charAt(p.length-1)){var u=p.substring(1,p.length-1);break a}u=p}var v=u.toUpperCase();Ub(v,"*")||(v="*"+v+"*");Eg(m[h].querySelector("Literal"),v)}}}var x=e(f,void 0,!0);x&&(c=c?c+(" "+(a?"AND":"OR")+" ("+x):"("+x,c+=")")}}catch(B){}return c};
function ava(a){var b=!1,c={},d=$ua(a),e=Eb(d,function(a){var d=a.areaId;if(S_(a)&&!c[d])return b=c[d]=!0,"inclusion";if(Vua(a)&&!c[d])return c[d]=!0,"exclusion"});if(!b)return"";d=null;var f=e.inclusion;e=e.exclusion;for(var h=0,k=f.length;h<k;h++){var l=f[h];if(l=(l=l.areaId)?UE.get(l):null)try{if(d)TD(d,l,!0);else{var m=l.X();m&&(d=new ek(m.clone()))}}catch(n){E.error(Zua,"error merging inclusion areas",n)}}if(d&&e)for(h=0,k=e.length;h<k;h++)if(l=e[h],m=(l=l.areaId)?UE.get(l):null)try{VD(d,m,!0)}catch(n){if("Result geometry is empty"===
n.message){d=null;break}E.error(Zua,"error merging exclusion areas",n)}a=a.o.format(d);Ma(d);return a}Y_.prototype.Ot=function(){this.g&&!this.B.g||zN(this.source)};Y_.prototype.vz=function(){var a=this.nr();this.modifier.g=a;a=ava(this);this.B.g=a;var b=this.source.o;b&&(et(b,this.modifier),$s(b,this.modifier),et(b,this.B),$s(b,this.B));this.g&&!a&&this.source.clear()};function bva(){}bva.prototype.format=function(a){return a.Pa()+", "+a.Ya()};function Z_(a){xN.call(this,a);this.log=cva;this.P=[];this.I=0;this.Nr=!0}w(Z_,xN);Nv["plugin.arc.source.ArcRequestSource"]=Z_;var cva=E.V("plugin.arc.source.ArcRequestSource");g=Z_.prototype;g.J=function(){$_(this);Z_.C.J.call(this)};g.aj=function(){$_(this);Z_.C.aj.call(this)};
g.wq=function(){var a="Request complete for "+this.S();E.info(this.log,a);this.I=0;$_(this);a=this.o.g;try{var b=JSON.parse(a)}catch(k){this.Va(!1);return}a=this.o.j.clone();var c=this.o.Tg,d=a.g;d.remove("geometry");d.remove("geometryType");d.remove("objectIds");d.remove("returnIdsOnly");d.remove("time");d.remove("where");b=b.objectIds;if(b&&q(b)&&0<b.length)for(var e=0,f=b.length;e<f;e+=1E3){var h=Math.min(f,e+1E3);d.set("objectIds",b.slice(e,h).join(","));h=new Ys(a);h.Tg=c;h.H("success",this.EH,
!1,this);h.H("error",this.DH,!1,this);h.load();this.P.push(h);this.I++}else this.Va(!1)};function $_(a){for(var b=0,c=a.P.length;b<c;b++)Ma(a.P[b]);a.P=[]}g.EH=function(a){this.I--;a=a.target;var b=a.g;Ma(a);gD(this.B,b);0===this.I&&this.Va(!1)};g.DH=function(a){this.I--;E.error(this.log,"Error loading IDs for Arc source: "+this.S());Ma(a.target);0===this.I&&this.Va(!1)};function a0(){M_.call(this)}w(a0,M_);var G_="arcfeature";g=a0.prototype;
g.Ye=function(a){this.dc(a);var b=this.O(a);b.ga(this.id);yN(b,this.pd(a));b.Ph(this.wd(a));oN(b,void 0!==this.animate?this.animate:!1);b.Ta(this.title);var c=this.W(b,a);a&&c.restore(a);var d=a.featureType;d&&Tua(c,a,d);var e=null!=a.filter?a.filter:!1,f=null!=a.spatial?a.spatial:!1;d=null!=a.temporal?a.temporal:!1;if(e||f||d)e&&(e=Lua.bind(void 0,c),c.o=e,e=Mua.bind(void 0,c),c.I=e),$s(b.o,new Q_),e=new Y_,e.Bb(b),f=WE,f.j.push(e),f.l.start(),d&&(e=new N_("time","time","{time}",""),d=new O_,d.l=
new bva,d.g=e,d.Bb(b),e=dU.u(),f=b.D(),e.g[f]=d,eU(d,e.j,!1));a.load&&b.refresh();return c};g.O=function(){return new Z_};g.pd=function(a){a=a0.C.pd.call(this,a);var b=this.params.get("outputformat"),c=/json/i;b&&c.test(b)&&ct(a,"application/json, text/plain, */*");return a};g.xf=function(){return new P_};g.wd=function(a){var b=new sS(this.xf(a));a.mappings&&eD(b,a.mappings);cD(b,["Radius","SemiMajor","SemiMinor"]);return b};function b0(a,b,c){GN.call(this,a,b,c)}w(b0,GN);b0.prototype.Sg=function(a){return a instanceof HN?a.Sa():null};b0.prototype.g=function(){};function c0(a,b,c){GN.call(this,a,b,c);this.title="Change Layer Color";b&&(this.value=ZG(b))}w(c0,b0);c0.prototype.j=function(){var a=T.u().W(this.Na);return a instanceof HN?a.La():null};c0.prototype.g=function(a,b){var c=T.u().W(this.Na);c instanceof HN&&dva(c,b);c0.C.g.call(this,a,b)};function d0(a,b,c){GN.call(this,a,b,c);this.title="Colorize Layer";this.value=b}w(d0,b0);d0.prototype.j=function(){var a=T.u().W(this.Na);return a instanceof HN?fO(a):null};d0.prototype.g=function(a,b){var c=T.u().W(this.Na);c instanceof HN&&eva(c,b);d0.C.g.call(this,a,b)};function e0(a,b,c){GN.call(this,a,b,c);this.title="Change Layer Style"}w(e0,b0);e0.prototype.j=function(){var a=T.u().W(this.Na);return a instanceof HN?a.Qb():null};e0.prototype.g=function(a,b){var c=T.u().W(this.Na);c instanceof HN&&c.yb(b);e0.C.g.call(this,a,b)};W.directive("tilelayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/layer/tile.html",controller:f0,controllerAs:"tile"}}]);function f0(a,b,c){lO.call(this,a,b,c);a.$on("color.change",this.A.bind(this));a.$on("color.reset",this.G.bind(this))}w(f0,lO);f0.$inject=["$scope","$element","$timeout"];
f0.prototype.md=function(){f0.C.md.call(this);this.scope&&(this.scope.color=fva(this),this.scope.styles=this.getValue(Nja),this.scope.style=this.getValue(Oja),this.scope.colorize=this.getValue(Pja))};function fva(a){if(a=a.scope.items)for(var b=0,c=a.length;b<c;b++)try{var d=a[b].W();if(d instanceof HN){var e=d.La();return e?xv(e):e}}catch(f){}return null}f0.prototype.A=function(a,b){this.xb(function(a){return new c0(a.D(),b)})};f0.prototype.G=function(a){this.A(a,"");this.scope.color=fva(this)};
f0.prototype.zm=function(){var a=this.scope.items;if(a&&1===a.length&&null!=this.scope.style){var b=this.scope.style;this.xb(function(a){return new e0(a.D(),b)})}};f0.prototype.onStyleChange=f0.prototype.zm;f0.prototype.tG=function(){var a=this.scope.colorize;this.xb(function(b){return new d0(b.D(),a)})};f0.prototype.onColorizeChange=f0.prototype.tG;function HN(a){ul.call(this,a);this.ma=$b();this.ka="Tile Layers";this.pa="Tiles";this.j="New Layer";this.G=this.s=!1;this.Ia=this.oa=null;this.ra=!0;this.B=this.Mc=this.g=null;this.U="<defaultlayernodeui></defaultlayernodeui>";this.Ea="tilelayerui";this.Ca="tile";this.Z=!1;this.P=this.OB.bind(this);(a=this.O())&&I(a,"propertychange",this.UJ,this)}w(HN,ul);P(HN,"os.layer.ILayer");P(HN,"os.legend.ILegendRenderer");g=HN.prototype;g.J=function(){HN.C.J.call(this);var a=this.O();a&&a.dispose()};
g.lj=function(a){var b=this.O();b&&(b.hc=!1,b.set("minResolution",a),b.hc=!0);HN.C.lj.call(this,a)};g.kj=function(a){if(isFinite(a)){if(isFinite(a)){var b=1;for(var c=0;Math.round(a*b)/b!==a;)b*=10,c++;b=c}else b=0;a+=Math.pow(10,-b)}if(b=this.O())b.hc=!1,b.set("maxResolution",a),b.hc=!0;HN.C.kj.call(this,a)};function g0(a){var b=a.La();b&&Bja(a.D(),xv(b))}g.UJ=function(a){if(a instanceof U){var b=a.l;"loading"==b?this.Va(a.o):"refreshInterval"==b&&this.dispatchEvent(new U("refreshInterval",a.o,a.s))}};
g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.La=function(){return this.g?this.g.color||this.g.baseColor:null};g.ug=function(){return this.g?this.g.brightness||0:0};g.vg=function(){return this.g&&null!=this.g.contrast?this.g.contrast:1};g.yg=function(){return this.g&&null!=this.g.saturation?this.g.saturation:1};function fO(a){return a.g?a.g.colorize||!1:!1}function eva(a,b){a.g&&(a.g.colorize=b,h0(a),CH(a))}
function dva(a,b,c){if(c=c||a.g)c.color=b&&"string"==typeof b?xv(b):null,h0(a),g0(a),CH(a)}g.ij=function(a){HN.C.ij.call(this,a);var b=this.g;b&&(b.brightness=a,h0(this),g0(this),CH(this))};g.jj=function(a){HN.C.jj.call(this,a);var b=this.g;b&&(b.contrast=a,h0(this),g0(this),CH(this))};g.mj=function(a){HN.C.mj.call(this,a);var b=this.g;b&&(b.saturation=a,h0(this),g0(this),CH(this))};
function h0(a){var b=a.O();if(b instanceof gP){fO(a)||!Av(a.La(),a.g?a.g.baseColor:null)||0!=a.ug()||1!=a.vg()||1!=a.yg()?(a=a.P,b.g||(b.g=[]),mb(b.g,a)):(a=a.P,b.g||(b.g=[]),qb(b.g,a));b=b.Ec.Jc();a=0;for(var c=b.length;a<c;a++){var d=b[a];d instanceof j0&&d.reset()}}}
g.OB=function(a){var b=(this.g?this.g.baseColor:null)||"#fffffe",c=this.La()||"#fffffe",d=this.ug(),e=this.vg(),f=this.yg(),h=fO(this);if((h||!Av(b,c)||0!=this.ug()||1!=this.vg()||1!=this.yg())&&c){if(h){var k;q(c)?k=c:k=yv(c);for(var l=0,m=a.length;l<m;l+=4)a[l]=k[0],a[l+1]=k[1],a[l+2]=k[2]}else if(!Av(b,c))for(q(b)?m=b:m=yv(b),q(c)?l=c:l=yv(c),b=Math.max(m[0],m[1],m[2]),k=b==m[0]?0:b==m[1]?1:2,m=Math.max(l[0],l[1],l[2]),l=[l[0]/m,l[1]/m,l[2]/m],c=m/b,m=l[0]*c,b=l[1]*c,l=l[2]*c,l=[0==k?m:0,1==k?
m:0,2==k?m:0,0,0,0==k?b:0,1==k?b:0,2==k?b:0,0,0,0==k?l:0,1==k?l:0,2==k?l:0,0,0,0,0,0,1,0],k=0,m=a.length;k<m;k+=4){b=a[k];c=a[k+1];h=a[k+2];var n=a[k+3];if(0!==b||0!==c||0!==h||0!==n)a[k]=b*l[0]+c*l[1]+h*l[2]+n*l[3]+l[4],a[k+1]=b*l[5]+c*l[6]+h*l[7]+n*l[8]+l[9],a[k+2]=b*l[10]+c*l[11]+h*l[12]+n*l[13]+l[14]}l=(1-e)/2;k=.3086*(1-f);m=.6094*(1-f);b=.082*(1-f);d*=225;e=[e*(k+f),e*k,e*k,0,0,e*m,e*(m+f),m*e,0,0,e*b,e*b,e*(b+f),0,0,0,0,0,1,0,l+d,l+d,l+d,1,0];f=0;for(d=a.length;f<d;f+=4)l=a[f],k=a[f+1],m=a[f+
2],b=a[f+3],a[f]=Math.round(l*e[0]+k*e[5]+m*e[10]+b*e[15]+e[20]),a[f+1]=Math.round(l*e[1]+k*e[6]+m*e[11]+b*e[16]+e[21]),a[f+2]=Math.round(l*e[2]+k*e[7]+m*e[12]+b*e[17]+e[22]),a[f]=Je(a[f],0,255),a[f+1]=Je(a[f+1],0,255),a[f+2]=Je(a[f+2],0,255)}};g.Qb=function(){var a=this.Mc;if(!a){var b=this.O();if(P(b,"os.source.IStyle")&&(a=b.Qb(),b=this.B))for(var c=0,d=b.length;c<d;c++)if(b[c].data==a)return b[c]}return a};
g.yb=function(a){"string"==typeof a&&(a=this.B?ib(this.B,gva.bind(this,a)):null);this.Mc=a;var b=this.O();P(b,"os.source.IStyle")&&(b.yb(a),CH(this))};g.td=function(){var a,b="";this.s&&(b+='<i class="fa fa-warning text-warning" title="There were errors accessing the tiles for this layer"></i>');var c=this.La();c&&(a=yv(c));return b+=a?DN(this.D(),['<image xlink:href="v1542394219/images/tiles-base.png" x="0" y="0" width="16px" height="16px"><title>Tile layer</title></image>'],null,a):'<img src="v1542394219/images/tiles-base.png" title="Tile layer"/>'};
g.mb=function(){return this.G};g.Va=function(a){if(this.G!==a){var b=this.G;this.G=a;this.dispatchEvent(new U("loading",a,b));a=this.O();a instanceof EA&&(a=a.th(),a!==this.s&&(this.s=a,this.dispatchEvent(new U("error",this.s,!this.s))))}};g.S=function(){return this.j};g.Ta=function(a){this.j=a;this.dispatchEvent(new U("title",a))};g.Qc=function(){return this.ka};g.Zd=function(a){this.ka=a};g.Nf=function(){return this.pa};g.ye=function(a){this.pa=a};g.rb=function(){return this.oa};
g.Cc=function(a){this.oa=a};g.getTags=function(){return this.Ia};g.vb=function(a){this.Ia=a};g.getError=function(){return this.s};g.ve=function(){return this.ra};g.hg=function(a){this.ra=a};g.Qd=function(){return this.U};g.Bf=function(a){this.U=a};g.Nj=function(){return this.Ea};g.gg=function(a){this.Ea=a};g.bd=function(){return HN.C.Hb.call(this)};g.Bd=function(a){a!==this.bd()&&(this.ec(a),this.dispatchEvent(new U("visible",a,!a)))};g.fg=function(a){this.ec(a)};g.Ij=function(){return this.Hb()};
g.Sa=function(){return this.g};g.Nk=function(a){this.g=a;h0(this)};g.di=function(a){var b=this.O();if(bv)switch(a){case "identify":mw(this);break;case "mostRecent":IL(V,this.D());break;case "refresh":b.refresh();break;case "layer:remove":a=new BA("removeLayer",this.D());C.dispatchEvent(a);break;case "rename":cP(this)}};g.Ll=function(){return null};
g.Uk=function(a,b){if(bv)switch(a){case "goTo":b=N.aa();a=DA(Th(),this);b=ei(b);var c=ei(a);return!fi(a)&&.8>c/b;case "identify":case "refresh":case "showDescription":return!0;case "rename":return!!b&&ya(b)&&1===b.length;case "mostRecent":a=V.Ja(this.D());if(null!=a)return a=a.Of(),0<a&&a<Rv;break;case "layer:remove":return this.ve()}return!1};g.Tl=function(){return this.Ca};g.Pk=function(a){this.Ca=a};g.Mj=function(){return this.Z};g.vn=function(a){this.Z=a};
g.yf=function(a){if(a.showTile&&tL(a)&&this.bd()){var b=rL(this.S(),a),c=new ek(new Jk([a.offsetX,a.offsetY])),d=new bk({fill:new Zj({color:ZG(this.La()||"#fff")}),stroke:new ak({color:"#000",width:1})});var e=Math.ceil(.8*a.fontSize);for(var f=Math.round(e/2.85),h=10-Math.floor(a.fontSize/8),k=a.offsetY,l=[],m=0;3>m;m++)l.push(new Rk([[[h+f,k],[h+e,k],[h+e-f,k+f],[h,k+f],[h+f,k]]])),k-=Math.ceil(f/2);e=new Kr(l);e=new ek(e);sL(a,e,d,c,b)}};
g.sa=function(a){a=a||{};a.visible=this.bd();a.opacity=this.Xb();a.contrast=this.vg();a.brightness=this.ug();a.saturation=this.yg();a.color=this.La();a.colorize=fO(this);var b=this.O().tileGrid,c=this.Sa();c=c?c.zoomOffset||0:0;a.maxZoom=Math.min(25,fm(b,this.he())-c);a.minZoom=Math.max(2,fm(b,this.ge())-c);(b=this.Qb())&&(a.style="string"===typeof b?b:b.data);(b=this.O())&&b instanceof EA&&(a.refreshInterval=b.xg());return a};
g.restore=function(a){null!=a.id&&this.ga(a.id);null!=a.provider&&this.Cc(a.provider);null!=a.tags&&this.vb(a.tags);null!=a.title&&this.Ta(a.title);null!=a.layerType&&this.Zd(a.layerType);null!=a.visible&&this.Bd(a.visible);var b=a.alpha||a.opacity;null!=b&&this.rd(b);null!=a.contrast&&this.jj(a.contrast);null!=a.brightness&&this.ij(a.brightness);null!=a.saturation&&this.mj(a.saturation);a.color&&dva(this,a.color,a);a.colorize&&eva(this,a.colorize);void 0!==a.refreshInterval&&(b=this.O())&&b instanceof
EA&&b.Qe(a.refreshInterval);b=a.zoomOffset||0;var c=this.O().tileGrid,d=c.minZoom;c=c.maxZoom;if(null!=a.minZoom){var e=Math.min(c,Math.max(d,Math.round(a.minZoom)+b));this.kj(this.O().tileGrid.ab(e))}null!=a.maxZoom&&(e=Math.min(c,Math.max(d,Math.round(a.maxZoom)+b)),this.lj(this.O().tileGrid.ab(e)));a=a.style||"";b=this.Qb();(!b||"string"===typeof b&&a!=b||a!=b.data)&&this.yb(a)};function gva(a,b){return b.data==a};function k0(a,b,c){Bh.call(this);c=c?c:{};this.fc=a;this.state=b;this.g=null;this.key="";this.l=void 0===c.transition?250:c.transition;this.B={}}G(k0,Bh);k0.prototype.ia=function(){this.dispatchEvent("change")};k0.prototype.getKey=function(){return this.key+"/"+this.fc};function ap(a){if(!a.g)return a;var b=a.g;do{if(2==b.getState())return b;b=b.g}while(b);return a}
function hva(a){if(a.g){var b=a.g;do{if(2==b.getState()){b.g=null;break}else 1==b.getState()?a=b:0==b.getState()?a.g=b.g:a=b;b=a.g}while(b)}}k0.prototype.getState=function(){return this.state};k0.prototype.Ga=function(a){this.state=a;this.ia()};function bp(a,b,c){if(!a.l)return 1;var d=a.B[b];if(!d)d=c,a.B[b]=d;else if(-1===d)return 1;b=c-d+1E3/60;return b>=a.l?1:Math.pow(b/a.l,3)};function l0(a,b,c,d,e,f){k0.call(this,a,b,f);this.A=d;this.G=c;this.wa=new Image;null!==d&&(this.wa.crossOrigin=d);this.o=null;this.I=e}G(l0,k0);g=l0.prototype;g.J=function(){1==this.state&&(m0(this),this.wa=iva());this.g&&this.g.dispose();this.state=5;this.ia();k0.prototype.J.call(this)};g.Ua=function(){return this.wa};g.getKey=function(){return this.G};g.HF=function(){this.state=3;m0(this);this.wa=iva();this.ia()};
g.IF=function(){this.state=this.wa.naturalWidth&&this.wa.naturalHeight?2:4;m0(this);this.ia()};g.load=function(){3==this.state&&(this.state=0,this.wa=new Image,null!==this.A&&(this.wa.crossOrigin=this.A));0==this.state&&(this.state=1,this.ia(),this.o=[wh(this.wa,"error",this.HF,this),wh(this.wa,"load",this.IF,this)],this.I(this,this.G))};function m0(a){a.o.forEach(rh);a.o=null}function iva(){var a=qj(1,1);a.fillStyle="rgba(0,0,0,0)";a.fillRect(0,0,1,1);return a.canvas};function n0(a){Ij.call(this,a)}G(n0,Ij);n0.prototype.ji=function(a){for(var b,c;this.qg()&&!(b=this.j.value_,c=b.fc[0].toString(),c in a&&a[c].contains(b.fc));)this.pop().dispose()};function jva(a){if(0!==a.l){var b=a.g.key_.split("/").map(Number)[0];a.forEach(function(a){if(a.fc[0]!==b){var c=a.fc;this.remove(c[0]+"/"+c[1]+"/"+c[2]);a.dispose()}},a)}};function kva(a,b,c,d){var e=Ui(c,b,a);c=Ki(b,d,c);b=yi(b);void 0!==b&&(c*=b);b=yi(a);void 0!==b&&(c/=b);b=a.aa();if(!b||Xh(b,e))a=Ki(a,c,e)/c,isFinite(a)&&0<a&&(c/=a);return c}function o0(a,b,c,d){a=c-a;b=d-b;var e=Math.sqrt(a*a+b*b);return[Math.round(c+a/e),Math.round(d+b/e)]}
function lva(a,b,c,d,e,f,h,k,l,m,n){var p=qj(Math.round(c*a),Math.round(c*b));if(0===l.length)return p.canvas;p.scale(c,c);var r=Th();l.forEach(function(a){ci(r,a.extent)});var u=qj(Math.round(c*gi(r)/d),Math.round(c*hi(r)/d)),v=c/d;l.forEach(function(a){u.drawImage(a.image,m,m,a.image.width-2*m,a.image.height-2*m,(a.extent[0]-r[0])*v,-(a.extent[3]-r[3])*v,gi(a.extent)*v,hi(a.extent)*v)});var x=[h[0],h[3]];k.o.forEach(function(a){var b=a.source,e=a.target,h=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1];a=
(e[0][0]-x[0])/f;var n=-(e[0][1]-x[1])/f,v=(e[1][0]-x[0])/f,B=-(e[1][1]-x[1])/f,Oa=(e[2][0]-x[0])/f,tc=-(e[2][1]-x[1])/f;e=b[0][0];b=b[0][1];h-=e;k-=b;l-=e;m-=b;a:{h=[[h,k,0,0,v-a],[l,m,0,0,Oa-a],[0,0,h,k,B-n],[0,0,l,m,tc-n]];k=h.length;for(l=0;l<k;l++){m=l;for(var Ta=Math.abs(h[l][l]),ka=l+1;ka<k;ka++){var Vb=Math.abs(h[ka][l]);Vb>Ta&&(Ta=Vb,m=ka)}if(0===Ta){h=null;break a}Ta=h[m];h[m]=h[l];h[l]=Ta;for(m=l+1;m<k;m++)for(Ta=-h[m][l]/h[l][l],ka=l;ka<k+1;ka++)h[m][ka]=l==ka?0:h[m][ka]+Ta*h[l][ka]}l=
Array(k);for(m=k-1;0<=m;m--)for(l[m]=h[m][k]/h[m][m],Ta=m-1;0<=Ta;Ta--)h[Ta][k]-=h[Ta][m]*l[m];h=l}h&&(p.save(),p.beginPath(),l=(a+v+Oa)/3,m=(n+B+tc)/3,k=o0(l,m,a,n),v=o0(l,m,v,B),Oa=o0(l,m,Oa,tc),p.moveTo(v[0],v[1]),p.lineTo(k[0],k[1]),p.lineTo(Oa[0],Oa[1]),p.clip(),p.transform(h[0],h[2],h[1],h[3],a,n),p.translate(r[0]-e,r[3]-b),p.scale(d/c,-d/c),p.drawImage(u.canvas,0,0),p.restore())});n&&(p.save(),p.strokeStyle="black",p.lineWidth=1,k.o.forEach(function(a){var b=a.target;a=(b[0][0]-x[0])/f;var c=
-(b[0][1]-x[1])/f,d=(b[1][0]-x[0])/f,e=-(b[1][1]-x[1])/f,h=(b[2][0]-x[0])/f;b=-(b[2][1]-x[1])/f;p.beginPath();p.moveTo(d,e);p.lineTo(a,c);p.lineTo(h,b);p.closePath();p.stroke()}),p.restore());return p.canvas};function mva(a,b,c,d,e){this.l=a;this.s=b;var f={},h=Xi(this.s,this.l);this.j=function(a){var b=a[0]+"/"+a[1];f[b]||(f[b]=h(a));return f[b]};this.A=d;this.L=e*e;this.o=[];this.G=!1;this.I=this.l.g&&!!d&&!!this.l.aa()&&gi(d)==gi(this.l.aa());this.g=this.l.aa()?gi(this.l.aa()):null;this.B=this.s.aa()?gi(this.s.aa()):null;a=[c[0],c[3]];b=[c[2],c[3]];d=[c[2],c[1]];c=[c[0],c[1]];e=this.j(a);var k=this.j(b),l=this.j(d),m=this.j(c);p0(this,a,b,d,c,e,k,l,m,10);if(this.G){var n=Infinity;this.o.forEach(function(a){n=
Math.min(n,a.source[0][0],a.source[1][0],a.source[2][0])});this.o.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-n>this.g/2){var b=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];b[0][0]-n>this.g/2&&(b[0][0]-=this.g);b[1][0]-n>this.g/2&&(b[1][0]-=this.g);b[2][0]-n>this.g/2&&(b[2][0]-=this.g);Math.max(b[0][0],b[1][0],b[2][0])-Math.min(b[0][0],b[1][0],b[2][0])<this.g/2&&(a.source=b)}},this)}f={}}
function p0(a,b,c,d,e,f,h,k,l,m){var n=Sh([f,h,k,l]),p=a.g?gi(n)/a.g:null,r=a.g,u=a.l.g&&.5<p&&1>p,v=!1;if(0<m){if(a.s.uh()&&a.B){var x=Sh([b,c,d,e]);v|=.25<gi(x)/a.B}!u&&a.l.uh()&&p&&(v|=.25<p)}if(v||!a.A||li(n,a.A)){if(!(v||isFinite(f[0])&&isFinite(f[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])&&isFinite(l[0])&&isFinite(l[1])))if(0<m)v=!0;else return;if(0<m&&(v||(n=a.j([(b[0]+d[0])/2,(b[1]+d[1])/2]),r=u?(ti(f[0],r)+ti(k[0],r))/2-ti(n[0],r):(f[0]+k[0])/2-n[0],n=(f[1]+k[1])/
2-n[1],v=r*r+n*n>a.L),v)){Math.abs(b[0]-d[0])<=Math.abs(b[1]-d[1])?(u=[(c[0]+d[0])/2,(c[1]+d[1])/2],r=a.j(u),n=[(e[0]+b[0])/2,(e[1]+b[1])/2],p=a.j(n),p0(a,b,c,u,n,f,h,r,p,m-1),p0(a,n,u,d,e,p,r,k,l,m-1)):(u=[(b[0]+c[0])/2,(b[1]+c[1])/2],r=a.j(u),n=[(d[0]+e[0])/2,(d[1]+e[1])/2],p=a.j(n),p0(a,b,u,n,e,f,r,p,l,m-1),p0(a,u,c,d,n,r,h,k,p,m-1));return}if(u){if(!a.I)return;a.G=!0}a.o.push({source:[f,k,l],target:[b,d,e]});a.o.push({source:[f,h,k],target:[b,c,d]})}}
function nva(a){var b=Th();a.o.forEach(function(a){a=a.source;Uh(b,a[0]);Uh(b,a[1]);Uh(b,a[2])});return b};function q0(a,b,c,d,e,f,h,k,l,m,n){k0.call(this,e,0);this.U=void 0!==n?n:!1;this.P=h;this.N=k;this.L=null;this.o=b;this.A=d;this.G=f?f:e;this.j=[];this.pj=null;this.s=0;f=Yl(d,this.G);k=this.A.aa();e=this.o.aa();f=k?ki(f,k):f;if(0===ei(f))this.state=4;else if((k=a.aa())&&(e?e=ki(e,k):e=k),d=d.ab(this.G[0]),d=kva(a,c,ii(f),d),!isFinite(d)||0>=d)this.state=4;else if(this.I=new mva(a,c,f,e,d*(void 0!==m?m:.5)),0===this.I.o.length)this.state=4;else if(this.s=fm(b,d),c=nva(this.I),e&&(a.g?(c[1]=ri(c[1],
e[1],e[3]),c[3]=ri(c[3],e[1],e[3])):c=ki(c,e)),ei(c)){a=Zl(b,c,this.s);for(b=a.minX;b<=a.maxX;b++)for(c=a.minY;c<=a.maxY;c++)(m=l(this.s,b,c,h))&&this.j.push(m);0===this.j.length&&(this.state=4)}else this.state=4}G(q0,k0);q0.prototype.J=function(){1==this.state&&(this.pj.forEach(rh),this.pj=null);k0.prototype.J.call(this)};q0.prototype.Ua=function(){return this.L};
q0.prototype.Jk=function(){var a=[];this.j.forEach(function(b){b&&2==b.getState()&&a.push({extent:Yl(this.o,b.fc),image:b.Ua()})},this);this.j.length=0;if(0===a.length)this.state=3;else{var b=this.G[0],c=bm(this.A,b),d="number"===typeof c?c:c[0];c="number"===typeof c?c:c[1];b=this.A.ab(b);var e=this.o.ab(this.s),f=Yl(this.A,this.G);this.L=lva(d,c,this.P,e,this.o.aa(),b,f,this.I,a,this.N,this.U);this.state=2}this.ia()};
q0.prototype.load=function(){if(0==this.state){this.state=1;this.ia();var a=0;this.pj=[];this.j.forEach(function(b){var c=b.getState();if(0==c||1==c){a++;var d=I(b,"change",function(){var c=b.getState();if(2==c||3==c||4==c)rh(d),a--,0===a&&(this.pj.forEach(rh),this.pj=null,this.Jk())},this);this.pj.push(d)}},this);this.j.forEach(function(a){0==a.getState()&&a.load()});0===a&&setTimeout(this.Jk.bind(this),0)}};function ova(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(h){if(h)return a.replace(c,h[0].toString()).replace(d,h[1].toString()).replace(e,function(){return(-h[2]-1).toString()}).replace(f,function(){var a=em(b,h[0]);Rh(a,55);return(a.maxY-a.minY+1+h[2]).toString()})}}function pva(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=ova(a[e],b);return r0(d)}function r0(a){return 1===a.length?a[0]:function(b,c,d){if(b)return a[ti((b[1]<<b[0])+b[2],a.length)](b,c,d)}}
function qva(){}function rva(a){var b=[],c=/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[2].charCodeAt(0),e;for(e=c[1].charCodeAt(0);e<=d;++e)b.push(a.replace(c[0],String.fromCharCode(e)));return b}if(c=c=/\{(\d+)-(\d+)\}/.exec(a)){d=parseInt(c[2],10);for(e=parseInt(c[1],10);e<=d;e++)b.push(a.replace(c[0],e.toString()));return b}b.push(a);return b};function s0(a){lm.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX});this.mk=void 0!==a.opaque?a.opaque:!1;this.nN=void 0!==a.tilePixelRatio?a.tilePixelRatio:1;this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null;this.Ec=new n0(a.cacheSize);this.Uh=[0,0];this.key_="";this.mN={transition:a.transition}}G(s0,lm);g=s0.prototype;g.qg=function(){return this.Ec.qg()};g.ji=function(a,b){(a=this.Vj(a))&&a.ji(b)};
function Ao(a,b,c,d,e){a=a.Vj(b);if(!a)return!1;b=!0;for(var f,h,k=d.minX;k<=d.maxX;++k)for(var l=d.minY;l<=d.maxY;++l)f=c+"/"+k+"/"+l,h=!1,Jj(a,f)&&(f=a.get(f),(h=2===f.getState())&&(h=!1!==e(f))),h||(b=!1);return b}g.Ko=function(){return 0};g.getKey=function(){return this.key_};g.Yg=function(a){this.key_!==a&&(this.key_=a,this.ia())};g.Rj=function(){return this.mk};g.Pf=function(){return this.tileGrid.Pf()};g.CD=function(){return this.tileGrid};
g.Rd=function(a){return this.tileGrid?this.tileGrid:gm(a)};g.Vj=function(a){var b=this.Wa();return b&&!Wi(b,a)?null:this.Ec};g.Ai=function(){return this.nN};function cp(a,b,c,d){d=a.Rd(d);c=a.Ai(c);b=Ul(bm(d,b),a.Uh);return 1==c?b:Tl(b,c,a.Uh)}
function sva(a,b,c){var d=void 0!==c?c:a.Wa();c=a.Rd(d);if(a.Tn&&d.uh()){var e=b;b=e[0];a=dm(c,e);d=jm(d);Xh(d,a)?b=e:(e=gi(d),a[0]+=e*Math.ceil((d[0]-a[0])/e),b=cm(c,a[0],a[1],b,!1,void 0))}e=b[0];d=b[1];a=b[2];if(c.minZoom>e||e>c.maxZoom)c=!1;else{var f=c.aa();c=(c=f?Zl(c,f,e):em(c,e))?Sl(c,d,a):!0}return c?b:null}g.refresh=function(){this.Ec.clear();this.ia()};g.vA=lh;function tva(a,b){Ah.call(this,a);this.tile=b}G(tva,Ah);function EA(a){s0.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX,transition:a.transition});this.tileLoadFunction=a.tileLoadFunction;this.tileUrlFunction=this.lh?this.lh.bind(this):qva;this.urls=null;a.urls?this.Qk(a.urls):a.url&&this.Lb(a.url);a.tileUrlFunction&&this.bh(a.tileUrlFunction);this.A={}}G(EA,s0);g=EA.prototype;
g.VF=function(a){a=a.target;var b=H(a),c=a.getState();if(1==c){this.A[b]=!0;var d="tileloadstart"}else b in this.A&&(delete this.A[b],d=3==c?"tileloaderror":2==c||5==c?"tileloadend":void 0);void 0!=d&&this.dispatchEvent(new tva(d,a))};g.ps=function(a){this.Ec.clear();this.tileLoadFunction=a;this.ia()};g.bh=function(a,b){this.tileUrlFunction=a;jva(this.Ec);"undefined"!==typeof b?this.Yg(b):this.ia()};g.Lb=function(a){var b=this.urls=rva(a);this.bh(this.lh?this.lh.bind(this):pva(b,this.tileGrid),a)};
g.Qk=function(a){this.urls=a;var b=a.join("\n");this.bh(this.lh?this.lh.bind(this):pva(a,this.tileGrid),b)};g.vA=function(a,b,c){a=a+"/"+b+"/"+c;Jj(this.Ec,a)&&this.Ec.get(a)};function gP(a){EA.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:uva,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX,transition:a.transition});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.tileClass=void 0!==a.tileClass?a.tileClass:l0;this.l={};this.s={};this.N=
a.reprojectionErrorThreshold}G(gP,EA);g=gP.prototype;g.qg=function(){if(this.Ec.qg())return!0;for(var a in this.l)if(this.l[a].qg())return!0;return!1};g.ji=function(a,b){a=this.Vj(a);this.Ec.ji(this.Ec==a?b:{});for(var c in this.l){var d=this.l[c];d.ji(d==a?b:{})}};g.Ko=function(a){return this.Wa()&&a&&!Wi(this.Wa(),a)?0:this.Lo()};g.Lo=function(){return 0};g.Rj=function(a){return this.Wa()&&a&&!Wi(this.Wa(),a)?!1:EA.prototype.Rj.call(this,a)};
g.Rd=function(a){var b=this.Wa();return!this.tileGrid||b&&!Wi(b,a)?(b=H(a).toString(),b in this.s||(this.s[b]=gm(a)),this.s[b]):this.tileGrid};g.Vj=function(a){var b=this.Wa();if(!b||Wi(b,a))return this.Ec;a=H(a).toString();a in this.l||(this.l[a]=new n0(this.Ec.highWaterMark));return this.l[a]};
g.tl=function(a,b,c,d,e,f){a=[a,b,c];d=(b=sva(this,a,e))?this.tileUrlFunction(b,d,e):void 0;d=new this.tileClass(a,void 0!==d?0:4,void 0!==d?d:"",this.crossOrigin,this.tileLoadFunction,this.mN);d.key=f;I(d,"change",this.VF,this);return d};
function Ho(a,b,c,d,e,f){var h=a.Wa();if(h&&f&&!Wi(h,f)){var k=a.Vj(f);d=[b,c,d];var l;b=d[0]+"/"+d[1]+"/"+d[2];Jj(k,b)&&(l=k.get(b));c=a.getKey();if(l&&l.key==c)return l;var m=a.Rd(h),n=a.Rd(f),p=sva(a,d,f);a=new q0(h,m,f,n,d,p,a.Ai(e),a.Lo(),function(a,b,c,d){return vva(this,a,b,c,d,h)}.bind(a),a.N,!1);a.key=c;l?(a.g=l,hva(a),k.replace(b,a)):k.set(b,a);return a}return vva(a,b,c,d,e,h||f)}
function vva(a,b,c,d,e,f){var h=b+"/"+c+"/"+d,k=a.getKey();if(Jj(a.Ec,h)){var l=a.Ec.get(h);if(l.key!=k){var m=l;l=a.tl(b,c,d,e,f,k);0==m.getState()?l.g=m.g:l.g=m;hva(l);a.Ec.replace(h,l)}}else l=a.tl(b,c,d,e,f,k),a.Ec.set(h,l);return l}function uva(a,b){a.Ua().src=b};function wva(a,b){var c=qj(a.width,a.height);c.drawImage(a,0,0);a=c.canvas;var d=c.getImageData(0,0,a.width,a.height),e=d.data;b.forEach(function(a){a(e)});c.putImageData(d,0,0);return a};function j0(a,b,c,d,e){l0.call(this,a,b,c,d,e);this.s=this.j=null}G(j0,l0);j0.prototype.Ua=function(){if(this.wa&&this.wa.width&&this.wa.height){var a=this.s;a.g||(a.g=[]);a=a.g;if(0<a.length)return this.j||(this.j=wva(this.wa,a)),this.j}return this.wa};j0.prototype.reset=function(){this.j=null};P(gP,"os.source.IFilterableTileSource");gP.prototype.g=null;(function(){var a=gP.prototype.tl;gP.prototype.tl=function(b,c,d,e,f,h){b=a.call(this,b,c,d,e,f,h);b instanceof j0&&(b.s=this);return b}})();P(EA,"os.ol.source.IUrlSource");P(EA,"os.ol.source.ILoadingSource");g=EA.prototype;g.eA=!1;g.extent=null;g.gk=0;g.Le=null;g.Yp=!1;g.aa=function(){return this.extent};g.Ac=function(a){this.extent=a};g.gf=function(){return null};g.updateParams=function(){};g.Fg=function(){return this.Yp};g.xg=function(){return this.gk};
g.Qe=function(a){this.gk!=a&&(this.gk=a,this.Le&&(this.Le.M("tick",this.Hv,!1,this),this.Le.Sd()||this.Le.stop()),this.Le=null,0<this.gk&&(this.Le=yL[a],this.Le||(this.Le=new je(1E3*a),yL[a]=this.Le),this.Le.H("tick",this.Hv,!1,this),this.Le.start()),this.dispatchEvent(new U("refreshInterval")))};g.Hv=function(){this.Fg()&&this.refresh()};g.refresh=function(){this.Ec.clear();this.ia()};g.TM=EA.prototype.bh;
g.bh=function(a){var b=this.aa.bind(this),c=this.CD.bind(this);this.TM(function(d,e,f){var h=b(),k=!0;if(h){k=c();if(!k||k.Pf().length<=d[0])return;k=Yl(k,d);k=li(h,k)}return k?a(d,e,f):void 0})};g.Oi=!1;g.dk=0;g.qm=0;g.ek=0;g.Gv=!1;g.fk=null;g.Ig=null;g.J=function(){s0.prototype.J.call(this);this.fk&&(db(this.fk,rh),this.fk.length=0);this.Ig&&(this.Ig.dispose(),this.Ig=null);this.Ec&&this.Ec.clear()};g.mb=function(){return this.Oi};
g.Va=function(a){this.Oi!==a&&(this.Oi=a,this.Ig||this.Xa()||(this.Ig=new le(this.Xt,500,this)),a=this.Ig)&&(this.Oi?me(a):(a.start(),this.dk=0))};g.th=function(){return this.Gv};g.Xt=function(){if(!this.Xa()){if(this.qm||this.ek)this.Gv=this.ek/(this.qm+this.ek)>O.get("tileErrorThreshold",.6),this.qm=this.ek=0;this.dispatchEvent(new U("loading",this.Oi,!this.Oi))}};g.OE=function(){this.dk++;1===this.dk&&this.Va(!0)};
g.jw=function(a){"tileloadend"===a.type?this.qm++:this.ek++;this.dk--;0===this.dk&&this.Va(!1)};g.SM=EA.prototype.ps;g.ps=function(a){this.eA=!0;this.fk||(this.fk=[I(this,"tileloadstart",this.OE,this),I(this,"tileloadend",this.jw,this),I(this,"tileloaderror",this.jw,this)]);var b=this;this.Ig||(this.Ig=new le(this.Xt,500,this));this.SM(function(c,d){b.Fg()&&b.gk&&(d=new Ve(d),d.g.set("_cd",Ha()),d=d.toString());a(c,d)})};function xva(a){var b=a.tileUrlFunction;a.bh(function(a,d,e){(a=b(a,d,e))&&(a=zy(a));return a})}function yva(a,b){if(b=(0,a.tileUrlFunction)([2,2,-1],1,b)){b=new Ys(b);var c=function(b){b=b.target;if("proxy"===b.ka){var c=b.G;c&&(1===c.length||1<c.length&&0===c[c.length-2])&&xva(a)}b.dispose()};b.H("success",c);b.H("error",c);b.load()}};function t0(){US.call(this);this.crossOrigin=this.tileGrid=this.projection=null;this.g=HN;this.tileClass=j0;this.urls=[]}w(t0,US);var u0=E.V("os.layer.config.AbstractTileLayerConfig"),v0=new RegExp(/{[a-zA-Z]-[a-zA-Z]}/g),w0=new RegExp(/{\d-\d}/g);g=t0.prototype;
g.dc=function(a){t0.C.dc.call(this,a);null!=a.urls?this.urls=a.urls:this.url&&(a.urls=this.urls=[this.url],a.url=void 0);for(var b=[],c=0;c<this.urls.length;c++){var d=this.urls[c];if("string"===typeof d){var e=[];if(v0.test(d)){E.za(u0,"Expanding URL with alpha range: "+d);var f=d.match(v0)[0];e=e.concat(zva(d,f))}else w0.test(d)?(E.za(u0,"Expanding URL with numeric range: "+d),f=d.match(w0)[0],e=e.concat(zva(d,f))):(E.za(u0,"Not expanding URL: "+d),e.push(d));d=e;for(e=0;e<d.length;e++)b.push(d[e])}else b.push(d)}E.za(u0,
"Potentially expanded URL set: "+b.join());this.urls=b;a.urls=this.urls;b=this.Yo(a);c=this.Xo(a);d=qea(a);if(!d)throw Error("No projections supported by the layer are defined!");this.projection=d;this.tileGrid=hm(this.projection,42,[b,c]);a:{for(h in Ay)if(a.crossOrigin===Ay[h]){var h=!0;break a}h=!1}if(h)for(this.crossOrigin=a.crossOrigin,h=0;h<this.urls.length;h++)b=this.urls[h],b=b.replace(/{-?[zxy]}/g,"\\d+"),b=b.replace(w0,"\\d"),b=b.replace(v0,"[a-zA-Z]"),Dy(new RegExp("^"+b),this.crossOrigin);
else this.crossOrigin=sx(this.urls[0]);"none"===this.crossOrigin&&(this.crossOrigin=null,a.crossOrigin=null);this.g=a.layerClass||this.g;this.tileClass=a.tileClass||this.tileClass};
g.Ye=function(a){this.dc(a);var b=this.O(a);this.tileClass&&P(b,"os.source.IFilterableTileSource")&&(b.tileClass=this.tileClass);a.extent&&b.Ac(Zi(a.extent,a.extentProjection||"EPSG:4326",this.projection));a.attributions&&(b.kl=mm(b,a.attributions),b.ia());this.crossOrigin&&"none"!==this.crossOrigin&&(a.proxy?(E.za(u0,"layer "+this.id+" proxy=true"),xva(b)):void 0===a.proxy&&(E.za(u0,"layer "+this.id+" proxy=auto"),yva(b,this.projection)));E.za(u0,"layer "+this.id+" crossOrigin="+this.crossOrigin);
b.eA||b.ps(b.tileLoadFunction);b=new this.g({source:b});this.po(b,a);b.restore(a);return b};g.po=function(a,b){null!=b.explicitType&&a.ye(b.explicitType)};g.Yo=function(a){return a.tileWidth||a.tileSize||512};g.Xo=function(a){return a.tileHeight||a.tileSize||512};function zva(a,b){var c=[],d=b.slice(1,-1).split("-"),e=d[1];for(d=d[0].charCodeAt(0);d<=e.charCodeAt(0);d++){var f=a.replace(b,String.fromCharCode(d));c.push(f)}return c};W.directive("screenoverlay",[function(){return{restrict:"E",transclude:!0,scope:!0,replace:!0,templateUrl:"v1542394219/views/windows/screenoverlay.html",controller:Ava,controllerAs:"confirm"}}]);
function Bva(a){var b={image:a.image},c=a.size&&75<a.size.y?a.size.y:75,d=a.size&&250<a.size.x?a.size.x:250,e=a.xy?a.xy.x:25,f=a.xy?a.xy.y:50,h=vn(T.u().Y());c={id:a.id,label:a.name||"KML Screen Overlay",icon:"",x:e,y:f,width:d,"min-width":250,"max-width":h[0],height:c,"min-height":75,"max-height":h[1],modal:!1,"show-hide":a["show-hide"]?a["show-hide"]:!1,"show-close":a["show-close"]?a["show-close"]:!1,"no-scroll":!0,overlay:!0};IE(a.id)||FE(c,"<screenoverlay></screenoverlay>",void 0,void 0,void 0,
b)}function Ava(a){null==a.valid&&(a.valid=!0)}Ava.$inject=["$scope"];function VP(a){HN.call(this,a);this.N=this.L=!1;this.l=null;this.A=new le(this.TJ,25,this);this.o=hw.u();this.I="YYYY-MM-DDTHH:mm:ss[Z]";this.o.H("timeline.durationChange",this.Gh,!1,this);this.o.H("timeline.reset",this.Gh,!1,this);this.o.H("timeline.show",this.Gh,!1,this);x0(this)}w(VP,HN);g=VP.prototype;
g.J=function(){VP.C.J.call(this);this.o.M("timeline.durationChange",this.Gh,!1,this);this.o.M("timeline.reset",this.Gh,!1,this);this.o.M("timeline.show",this.Gh,!1,this);this.o=null;this.A.dispose();this.A=null;this.l&&IE(this.l)&&KE(IE(this.l))};
g.Bd=function(a){var b=this.bd();VP.C.Bd.call(this,a);a&&!b&&this.N&&(this.N=!1,this.Gh());a:if(this.Sa()&&this.Sa().legends&&this.Sa().legends[0]){var c=this.Sa().legends[0],d=b=null;c.size&&(b={x:c.size[0],y:c.size[1]+30},d=vn(T.u().Y()),d={x:d[0]-b.x-250,y:d[1]-b.y-75});if(c.OnlineResource)c=c.OnlineResource;else if("string"!==typeof c){b=null;break a}b={image:c,name:this.S()+" - Legend",id:bc(c),"show-close":!0,xy:d,size:b}}else b=null;b&&(a&&!this.l?(Bva(b),this.l=b.id):!a&&this.l&&(IE(this.l)&&
KE(IE(this.l)),this.l=null))};g.Gh=function(){this.A&&!this.A.isActive()&&this.A.start()};g.TJ=function(){this.Hb()?x0(this):this.N=!0};g.tn=function(a){this.L!==a&&(this.L=a,this.dispatchEvent(new U("animationEnabled",a)))};function x0(a){var b=a.O(),c=b.gf();a={TIME:a.hu()};a.TIME!=c.TIME&&(Cc(c,a),b.updateParams(c))}g.hu=function(){var a=hw.u(),b=a.L,c="custom"==b?a.Pa():a.g-a.cc();return Cva(this.I,c,a.g,b)};
g.sa=function(a){a=VP.C.sa.call(this,a)||{};var b=this.O();b&&b instanceof EA&&(a.refreshInterval=b.xg());return a};g.restore=function(a){VP.C.restore.call(this,a);if(void 0!==a.refreshInterval){var b=this.O();b&&b instanceof EA&&b.Qe(a.refreshInterval)}};function Cva(a,b,c,d){if("custom"!=d)var e=b=(b+c)/2;else e=b,b=c;e=mC(new Date(e),d);b=nC(new Date(b),d);b=b.getTime()==e.getTime()?nC(new Date(c),d):b;c=pC(e,a||void 0);a=pC(b,a||void 0);return c+"/"+a};function y0(a){VP.call(this,a)}w(y0,VP);y0.prototype.hu=function(){var a=hw.u(),b=a.L,c="custom"==b?a.Pa():a.g-a.cc();a=a.g;"custom"!=b&&(c=a=(c+a)/2);c=mC(new Date(c),b);var d=nC(new Date(a),b);d=d.getTime()==c.getTime()?nC(new Date(a),b):d;return c.getTime()+","+d.getTime()};function Dva(a,b){var c=[];Object.keys(b).forEach(function(a){null!==b[a]&&void 0!==b[a]&&c.push(a+"="+encodeURIComponent(b[a]))});var d=c.join("&");a=a.replace(/[?&]$/,"");a=-1===a.indexOf("?")?a+"?":a+"&";return a+d};function z0(a){a=a||{};gP.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0,transition:a.transition});this.j=a.params||{};this.o=Th();this.Yg(Eva(this))}G(z0,gP);function Eva(a){var b=0,c=[],d;for(d in a.j)c[b++]=d+"-"+a.j[d];return c.join("/")}
z0.prototype.gf=function(){return this.j};z0.prototype.Ai=function(a){return a};
z0.prototype.lh=function(a,b,c){var d=this.tileGrid;d||(d=this.Rd(c));if(!(d.Pf().length<=a[0])){var e=Yl(d,a,this.o),f=Ul(bm(d,a[0]),this.Uh);1!=b&&(f=Tl(f,b,this.Uh));d={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};nh(d,this.j);var h=this.urls;h?(c=c.Tb.split(":").pop(),d.SIZE=f[0]+","+f[1],d.BBOX=e.join(","),d.BBOXSR=c,d.IMAGESR=c,d.DPI=Math.round(d.DPI?d.DPI*b:90*b),a=(1==h.length?h[0]:h[ti((a[1]<<a[0])+a[2],h.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),
a=Dva(a,d)):a=void 0;return a}};z0.prototype.updateParams=function(a){nh(this.j,a);this.Yg(Eva(this))};function A0(a){z0.call(this,a);this.Yp=!0}w(A0,z0);A0.prototype.updateParams=function(a){var b=0,c=[],d=this.gf(),e;for(e in d)c[b++]=e+"-"+d[e];this.Yg(c.join("/"));A0.C.updateParams.call(this,a)};function B0(){t0.call(this)}w(B0,t0);var F_="arctile";B0.prototype.dc=function(a){B0.C.dc.call(this,a);this.g=a.animate?y0:this.g};B0.prototype.O=function(){for(var a={},b=this.params.Ub(),c=0,d=b.length;c<d;c++){var e=b[c];a[e]=this.params.get(e)}a={urls:this.urls,params:a,tileGrid:this.tileGrid,projection:this.projection,crossOrigin:this.crossOrigin,wrapX:this.projection.uh()};return new A0(a)};Fw("text/html",function(a,b,c){if(b&&b.getFileName()&&/\.x?html?$/i.test(b.getFileName())||b&&"text/html"===b.l||c&&"string"===typeof c&&/^<(!doctype )?html( |>)/i.test(c.trim()))var d=c;return Wc(d)},-10,"text/plain");function Fva(a,b,c){a="string"===typeof c?c:c.content;return Wc(a&&Oua.test(a)||b&&b.Ka()&&Nua.test(b.Ka()))}Fw("arc",Fva,0,"text/xml");Fw("arc",Fva,0,"text/html");function Gva(a){for(var b=a.querySelectorAll('layer[type="wms"]'),c=0,d=b.length;c<d;c++){var e=b[c],f=e.querySelector("provider");f&&"ArcMap"===zl(f,!0).trim()&&(yg(f),e.setAttribute("type",F_));if(e=e.querySelector("url"))f=zl(e,!0).trim(),Jb(f,"/export")&&Eg(e,f.substring(0,f.length-7))}a=a.querySelectorAll('layer[type="arc"]');b=0;for(c=a.length;b<c;b++)a[b].setAttribute("type",G_)}
function Hva(a){for(var b=a.querySelectorAll('layer[type="'+F_+'"]'),c=0,d=b.length;c<d;c++){var e=b[c];e.setAttribute("type","wms");Z("provider",e,"ArcMap");if(e=e.querySelector("url")){var f=zl(e,!0).trim();Jb(f,"/export")||Eg(e,f+"/export")}}a=a.querySelectorAll('layer[type="'+G_+'"]');b=0;for(c=a.length;b<c;b++)a[b].setAttribute("type","arc")};function C0(){y_.call(this);this.id="arc"}w(C0,y_);C0.prototype.init=function(){var a=V;ZI(a,new RI(this.id,I_,"Arc Server","Arc servers provide feature and tile data."));$I(a,this.id,D_);a=Ev.u();Iv(a,G_,a0);Iv(a,F_,B0);OQ(KQ.u(),this.id,new z_("<arcserver></arcserver>"));a=fX.u();var b;b||(b=a.g);mb(a.l[b].bk,Gva);var c;c||(c=a.g);mb(a.l[c].Lk,Hva)};Fw("text/csv",function(a,b){return Wc(b&&(/\.csv$/.test(b.getFileName())||"text/csv"===b.l))},1E3,"text/plain");Fh.prototype.SN=function(){return H(this)};nh(Fh.prototype,{$$hashKey:Fh.prototype.SN});Fh.prototype.hc=!0;Fh.prototype.dispatchEvent=function(a){if(this.hc)return Bh.prototype.dispatchEvent.call(this,a)};Fh.prototype.Qp=function(a,b){if(this.hc){var c=Hh(a);this.dispatchEvent(new Jh(c,a,b));this.dispatchEvent(new Jh("propertychange",a,b))}};W.directive("mergeareaoption",[function(){return{restrict:"E",replace:!0,scope:{ngModel:"=",help:"=?"},template:'<div class="row mt-1"><label class="col-form-label col-4 text-right">Merge Areas</label><div class="col form-inline"><input class="form-control col-auto" type="checkbox" name="merge" ng-model="ngModel"/><span class="ml-auto"><popover ng-if="help" x-title="\'Merge Areas\'" x-content="help" x-pos="\'right\'"> </popover></span></div></div>',controller:Iva,controllerAs:"ctrl"}}]);
function Iva(a){this.scope=a}Iva.$inject=["$scope"];function D0(a){this.element=this.scope=null;this.l=a||null;this.valid=!0;this.template="<span>Placeholder template.</span>";this.title="Placeholder Title";this.uo=this.j=!1;this.priority=0;this.log=Jva}var Jva=E.V("os.ui.wiz.step.AbstractWizardStep");D0.prototype.o=function(a,b){void 0!==b&&(this.valid=b)};function E0(a,b){void 0!=b&&a.ki(b);a.scope&&(delete a.scope.step,a.scope.$destroy(),a.scope=null);a.element&&(a.element.remove(),a.element=null);a.uo=!0}D0.prototype.g=function(){this.j=!0};
D0.prototype.ki=function(){};D0.prototype.S=function(){return this.title};D0.prototype.getTitle=D0.prototype.S;D0.prototype.isValid=function(){return this.valid};function F0(){D0.call(this);this.template="<areaoptionsstep></areaoptionsstep>";this.title="Area Options"}w(F0,D0);F0.prototype.g=function(a){this.j||a.columns&&0!=a.columns.length||(a.wb(),F0.C.g.call(this,a))};W.directive("areaoptionsstep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/query/areaoptionsstep.html",controller:G0,controllerAs:"areaoptions"}}]);
function G0(a){this.v=a;this.help=iG;a.$watch("areaOptionsForm.$valid",this.j.bind(this));a.$on("$destroy",this.g.bind(this))}G0.$inject=["$scope"];G0.prototype.g=function(){this.v=null};G0.prototype.j=function(a){this.v.$emit("validate",a)};var Kva={"Dollar Sign ($)":"$","Exclamation (!)":"!","Hash (#)":"#","Percent (%)":"%",None:!1},Lva={"Backslash (\\)":"\\","Colon (:)":":","Comma (,)":",","Pipe (|)":"|","Semi-Colon (;)":";","Slash (/)":"/","Space ( )":" ","Tab (->)":"\t"};function H0(a){IR.call(this,a);this.commentChar="#";this.dataRow=2;this.delimiter=",";this.headerRow=1;this.linePreview=[];this.useHeader=!0}w(H0,IR);function Mva(a){a.linePreview=[];if(a.file){var b=a.file.Ob();if(b){b=b.split(/\r?\n/,50);for(var c=0,d=b.length;c<d;c++){var e=Nb(b[c]);e&&a.linePreview.push(e)}}}};W.directive("spinner",[function(){return{restrict:"AE",replace:!0,scope:{live:"&",disabled:"=?",min:"=?",max:"=?",name:"@",value:"=",step:"=?",css:"@"},template:'<div ng-form><input class="spinner" name="spinner"/></div>',controller:I0}}]);
function I0(a,b){var c=!0;void 0!==a.live&&void 0!==a.live()&&(c=a.live());null==a.min&&(a.min=-Infinity);null==a.max&&(a.max=Infinity);var d={change:this.YI.bind(this),min:a.min,max:a.max,value:a.value,start:this.Cp};void 0!==a.step&&(d.step=a.step);d[c?"spin":"stop"]=this.XI.bind(this);d.spin||(d.spin=this.Cp);a.$on("$destroy",this.nK.bind(this));this.v=a;this.g=b.find("input");this.g.spinner(d);a.css&&b.find(".ui-spinner").addClass(a.css);b.find(".ui-spinner-input").addClass("form-control");b=
this.mK.bind(this);a.$watch("value",b);a.$watch("min",b);a.$watch("max",b);a.$watch("step",b);a.$watch("disabled",this.OG.bind(this))}I0.$inject=["$scope","$element"];g=I0.prototype;g.nK=function(){this.g=this.v=null};g.Cp=function(a){a.stopPropagation()};
g.mK=function(a,b){for(var c=["min","max","step"],d=0,e=c.length;d<e;d++){var f=c[d];f in this.v&&this.g.spinner("option",f,this.v[f])}null===this.v.value&&(this.v.value=this.v.min||0);this.g.spinner("value",this.v.value);a!==b&&this.v.name&&this.v[this.v.name]&&this.v[this.v.name].$setDirty()};g.OG=function(a){void 0!==a&&this.g.spinner("option","disabled",a)};g.XI=function(a,b){this.Cp(a);b=void 0!==b.value?b.value:this.g.spinner("value");this.v.value=b;this.v.$emit(this.v.name+"."+a.type,b);X(this.v)};
g.YI=function(a,b){b=void 0!==b.value?b.value:this.g.spinner("value");"number"!==typeof b&&(b=this.v.value);var c=Je(b,this.v.min,this.v.max);if(c!=this.v.value||b!=c)this.v.value=c,this.v.$emit(this.v.name+"."+a.type,c),X(this.v);this.g.spinner("value")!=this.v.value&&this.g.spinner("value",this.v.value)};W.directive("slickheaderbutton",[function(){var a=cI();a.scope.onCommand="=?";a.controller=J0;return a}]);function J0(a,b,c){dI.call(this,a,b,c);a=new Slick.Plugins.HeaderButtons;a.onCommand.subscribe(function(a,b){a=b.button;var c=b.command;b=this.ta.getColumnIndex(b.column.id);this.scope.onCommand(this.scope.columns[b],a,c,this.scope.columns)}.bind(this));this.ta.registerPlugin(a)}w(J0,dI);J0.$inject=["$scope","$element","$compile"];W.directive("wizardpreview",[function(){return{restrict:"E",replace:!0,scope:{config:"=",resizeWith:"@"},templateUrl:"v1542394219/views/wiz/wizardpreview.html",controller:K0,controllerAs:"wizPreview"}}]);
function K0(a,b,c){this.v=a;this.K=b;this.Ma=c;try{var d=b.width()/a.config.columns.length}catch(e){d=0}this.options={dataItemColumnValueExtractor:this.GD,defaultColumnWidth:120,enableColumnReorder:!1,fullWidthRows:!0,forceFitColumns:200<=d,multiSelect:!1,rowHeight:21};this.j=this.g=null;a.resizeWith&&(this.j=this.zr.bind(this),this.g=b.parents(a.resizeWith),this.g.resize(this.j),this.zr(500));a.$on("resizePreview",this.hL.bind(this));a.$on("$destroy",this.gL.bind(this))}
K0.$inject=["$scope","$element","$timeout"];g=K0.prototype;g.gL=function(){this.g&&(this.j&&(this.g.removeResize(this.j),this.j=null),this.g=null);this.v=this.K=this.Ma=null};g.hL=function(a,b){this.zr(b)};g.zr=function(a){this.Ma(t(function(){if(this.K&&this.v){for(var a=0,c=this.K.siblings(),d=0,e=c.length;d<e;d++)a+=$(c[d]).outerHeight();c=this.K.height();(a=Math.max(this.K.parent().outerHeight()-a-2,0))&&c!=a&&(this.K.height(a),this.v.$broadcast("resize"))}},this),a)};
g.GD=function(a,b){return $A(a,"string"===typeof b?b:b.field)};g.onCommand=function(a,b,c,d){for(var e=0,f=0,h=d.length;f<h;f++)d[f].include&&e++;"exclude-column"===c&&1<e-1?(b.cssClass="fa fa-square-o slick-header-buttons",b.tooltip="Check to include column",b.command="include-column",a.include=!1):"include-column"===c&&(b.cssClass="fa fa-check-square-o slick-header-buttons",b.tooltip="Uncheck to exclude column",b.command="exclude-column",a.include=!0)};function L0(a){D0.call(this,a);this.template="<csvconfigstep></csvconfigstep>";this.title="Configuration"}w(L0,D0);L0.prototype.ki=function(a){try{a.wb();var b=a.preview.slice(0,24);if((!a.mappings||0>=a.mappings.length)&&b&&0<b.length){var c=hB.u().Nd(b);c&&0<c.length&&(a.mappings=c)}}catch(d){}};W.directive("csvconfigstep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/file/csv/configstep.html",controller:M0,controllerAs:"configStep"}}]);
function M0(a,b){this.Ma=b;this.g=a.config;this.delimiters=Lva;this.commentChars=Kva;this.linePreviewRows=[];for(var c=b=0,d=this.g.linePreview.length;c<d;c++)b=Math.max(Wy(this.g.linePreview[c]).width,b),this.linePreviewRows.push({id:c+1,line:this.g.linePreview[c]});this.linePreviewColumns=[{id:"id",name:"ID",field:"id",minWidth:25,width:25,resizable:!1,selectable:!1,sortable:!1},{id:"line",name:"Line",field:"line",selectable:!1,sortable:!1,width:b}];this.linePreviewOptions={fullWidthRows:!0,multiSelect:!1,
useRowRenderEvents:!0,headerRowHeight:0,rowHeight:21};a.$on("headerRow.spinstop",this.j.bind(this));a.$on("dataRow.spinstop",this.j.bind(this));a.$on("$destroy",this.l.bind(this));this.wb()}M0.$inject=["$scope","$timeout"];M0.prototype.l=function(){this.Ma=this.g=null};M0.prototype.j=function(){this.Ma(this.wb.bind(this))};M0.prototype.wb=function(){this.g.wb()};M0.prototype.updatePreview=M0.prototype.wb;W.directive("geohelp",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/window/geohelp.html",controller:N0,controllerAs:"th"}}]);function N0(a,b){this.K=b;a.$on("$destroy",t(this.g,this))}N0.$inject=["$scope","$element"];N0.prototype.g=function(){this.K=null};N0.prototype.close=function(){KE(this.K)};N0.prototype.close=N0.prototype.close;function O0(){D0.call(this);this.template="<geometrystep></geometrystep>";this.title="Geometry";this.posColumn=this.lonColumn=this.latColumn="";this.posType="Lat/Lon";this.geomType="none";this.ignoreMissingGeomRows=this.showEllipse=!1;this.ellipse={radius:{column:"",units:"nmi"},semiMajor:{column:"",units:"nmi"},semiMinor:{column:"",units:"nmi"},orientation:{column:""}};this.bearing={column:""};this.altitude={column:"",units:"autodetect"};this.geoFormats=[{format:"DMS",description:"DMS - Degrees, minutes, seconds"},
{format:"DDM",description:"DDM - Degrees and decimal minutes"},{format:"DD",description:"DD - Decimal degrees"}];this.useGeoSingleAutoFormat=this.useGeoSeparateAutoFormat=!0;this.geoSeparateFormat=this.geoFormats[0].format;this.geoSingleFormat=this.geoFormats[0].format;this.sample="";this.result=null}w(O0,D0);
O0.prototype.g=function(a){if(!this.j&&a.mappings&&0<a.mappings.length){for(var b=0,c=a.mappings.length;b<c;b++){var d=a.mappings[b];d instanceof ES?(this.posColumn=d.ja,this.posType=d.T(),this.geomType="single"):d instanceof xS&&"single"!=this.geomType?(this.lonColumn=d.ja,this.geomType="separate"):d instanceof wS&&"single"!=this.geomType?(this.latColumn=d.ja,this.geomType="separate"):d instanceof QS?(this.posColumn=d.ja,this.posType="WKT",this.geomType="single"):d instanceof uS?this.bearing.column=
d.ja:d instanceof kM?(this.ellipse.semiMajor.column=d.ja,this.ellipse.semiMajor.units=d.Rc(),this.showEllipse=!0):d instanceof lM?(this.ellipse.semiMinor.column=d.ja,this.ellipse.semiMinor.units=d.Rc(),this.showEllipse=!0):d instanceof yS?(this.ellipse.orientation.column=d.ja,this.showEllipse=!0):d instanceof jM?(this.ellipse.radius.column=d.ja,this.ellipse.radius.units=d.Rc(),this.showEllipse=!0):d instanceof VC&&(this.altitude.column=d.ja,this.altitude.units=d.units)}O0.C.g.call(this,a)}a.ignoreMissingGeomRows&&
(this.ignoreMissingGeomRows=a.ignoreMissingGeomRows)};
O0.prototype.ki=function(a){if(a.mappings)for(var b=a.mappings.length;b--;){var c=a.mappings[b];if(c instanceof ES||c instanceof wS||c instanceof xS||c instanceof QS||c instanceof jM)a.mappings.splice(b,1);else if(c instanceof VC){var d=c.clone();a.mappings.splice(b,1)}}b=Nva(this);0<b.length&&(a.mappings=a.mappings?a.mappings.concat(b):b,!d&&this.altitude.column&&(d=new VC),d&&(b=d,b.ja=this.altitude.column,b.Zc("m"),b.G=!1,this.altitude.units&&"autodetect"!=this.altitude.units&&b.Zc(this.altitude.units),
a.mappings.push(d)))};
function Nva(a){var b=[];if("single"==a.geomType){if(a.posColumn&&a.posType)if("WKT"==a.posType){var c=new QS;c.ja=a.posColumn;b.push(c)}else c=new ES,c.ja=a.posColumn,c.Sb(a.posType),a.useGeoSingleAutoFormat||"Lat/Lon"!=a.posType&&"Lon/Lat"!=a.posType||(c.l=a.geoSingleFormat),b.push(c)}else"separate"==a.geomType&&a.latColumn&&a.lonColumn&&(c=new wS,c.ja=a.latColumn,a.useGeoSeparateAutoFormat||(c.l=a.geoSeparateFormat),b.push(c),c=new xS,c.ja=a.lonColumn,a.useGeoSeparateAutoFormat||(c.l=a.geoSeparateFormat),
b.push(c));a.bearing.column&&(c=new uS,c.ja=a.bearing.column,b.push(c));a.showEllipse&&(a.ellipse.radius.column&&(c=new jM,c.ja=a.ellipse.radius.column,c.Zc(a.ellipse.radius.units),b.push(c)),a.ellipse.semiMajor.column&&(c=new kM,c.ja=a.ellipse.semiMajor.column,c.Zc(a.ellipse.semiMajor.units),b.push(c)),a.ellipse.semiMinor.column&&(c=new lM,c.ja=a.ellipse.semiMinor.column,c.Zc(a.ellipse.semiMinor.units),b.push(c)),a.ellipse.orientation.column&&(c=new yS,c.ja=a.ellipse.orientation.column,b.push(c)));
return b}O0.prototype.isValid=function(){return("single"!=this.geomType||this.posColumn&&this.posType)&&("separate"!=this.geomType||this.latColumn&&this.lonColumn)?this.valid:!1};W.directive("geometrystep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/wiz/geometrystep.html",controller:P0,controllerAs:"geomStep"}}]);
function P0(a){this.v=a;this.columns=a.config.columns||[];this.columns.sort(ZF);this.errors=[];this.warnings=[];this.posTypes=zc(Sma);this.posTypes.WKT=new QS;this.units=nc(ju);this.altUnits=["autodetect"];for(var b in pB)this.altUnits.push(pB[b]);a.$watch("ellipseForm.$valid",this.Wb.bind(this));a.$watch("step.geomType",this.Wb.bind(this));a.$on("$destroy",this.g.bind(this))}P0.$inject=["$scope"];P0.prototype.g=function(){this.v=null};
P0.prototype.Wb=function(){this.result=this.sample=null;this.errors=[];this.warnings=[];var a=this.v.config;a.skipGeoMappings=!1;if(a.preview&&!(0>a.preview.length)){var b=this.v.step;if(b)if("none"!=b.geomType)if(a.ignoreMissingGeomRows=b.ignoreMissingGeomRows,"single"==b.geomType)if(b.posColumn){var c=b.posColumn;if("WKT"==b.posType){var d=new QS;d.ja=c}else d=new ES,d.ja=c,d.Sb(b.posType);d=Q0(this,d,c,b.useGeoSingleAutoFormat?void 0:b.geoSingleFormat);0===d.test?this.warnings.push("Caution: No data found in first "+
R0+' rows from column "'+c+'"!'):0>d.test?this.errors.push('Unable to parse geometry from column "'+c+'"!'):b.posType&&"Lat/Lon"==b.posType||"Lon/Lat"==b.posType?(c=d.result?d.result.split(" "):[],this.result=2!==c.length?d.result:"Latitude: "+c[0]+" Longitude: "+c[1]):this.result=d.result;this.sample=d.sample}else this.errors.push("Please choose a geometry column.");else{if("separate"==b.geomType)if(b.latColumn&&b.lonColumn){c=new wS;c.ja=b.latColumn;d=Q0(this,c,c.ja,b.useGeoSeparateAutoFormat?void 0:
b.geoSeparateFormat);0===d.test?this.warnings.push("Caution: No data found in first "+R0+' rows from latitude column "'+c.ja+'"!'):0>d.test?this.errors.push('Unable to parse latitude from column "'+c.ja+'"!'):this.result="Latitude: "+d.result;this.sample=d.sample;d=new xS;d.ja=b.lonColumn;var e=Q0(this,d,d.ja,b.useGeoSeparateAutoFormat?void 0:b.geoSeparateFormat);0===e.test?(this.warnings.push("Caution: No data found in first "+R0+' rows from longitude column "'+d.ja+'"!'),this.result=null):0>e.test?
(this.errors.push('Unable to parse longitude from column "'+d.ja+'"!'),this.result=null):this.result=this.result?this.result+" Longitude: "+e.result:null;this.sample=(this.sample?this.sample+" ":"")+e.sample;0===this.errors.length&&c.ja==d.ja&&this.warnings.push("Caution: The same column will be used for longitude and latitude - is this a Single Geometry Field?")}else this.errors.push("Please choose latitude/longitude columns.")}else a.ignoreMissingGeomRows=!1,a.skipGeoMappings=!0;a.wb(Nva(b));this.v.$emit("validate",
0===this.errors.length&&(!this.v.step.showEllipse||this.v.ellipseForm.$valid));this.v.$broadcast("resizePreview")}};P0.prototype.validate=P0.prototype.Wb;function Q0(a,b,c,d){a=a.v.config.preview;for(var e=null,f=0,h=a.length;f<h;f++){var k=a[f].get(c);if(k){e=k;var l=b.rj(k,d);if(null!=l)return{test:1,result:l,sample:k}}}return{test:e?-1:0,result:null,sample:e}}
P0.prototype.Gp=function(){document.getElementById("geo-help")||FE({label:"Location Formats",icon:"fa fa-map-marker",x:"-10",y:"center",width:"445","min-width":"250","max-width":"600",height:"500","min-height":"250","max-height":"600","show-close":!0,modal:!0},"<geohelp></geohelp>")};P0.prototype.launchHelp=P0.prototype.Gp;function S0(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/wiz/wizard.html",controller:T0,controllerAs:"wiz"}}W.directive("wizard",[S0]);
function T0(a,b,c){this.scope=a;this.element=b;this.timeout=c;this.config=a.config||{};this.loading=!1;this.wizardClass="";this.steps=a.steps;this.stepStates={};b=0;for(c=this.steps.length;b<c;b++)U0(this,this.steps[b],"");this.activeIndex=this.steps&&0<this.steps.length?0:-1;0<=this.activeIndex&&V0(this,this.steps[this.activeIndex]);a.$on("validate",this.o.bind(this));a.$on("save",this.j.bind(this));a.$on("windowCancel",this.pl.bind(this));a.$on("$destroy",this.l.bind(this))}
T0.$inject=["$scope","$element","$timeout","$attrs"];T0.prototype.l=function(){var a=this.steps[this.activeIndex];a.uo||E0(a,this.config);this.scope=this.element=this.timeout=null};T0.prototype.o=function(a,b){a.stopPropagation();a=this.steps[this.activeIndex];(void 0!==b?b:1)&&a.isValid(this.config)?U0(this,a,""):U0(this,a,"error")};T0.prototype.j=function(a,b){(a=this.steps[this.activeIndex])&&a.ki(b)};
function V0(a,b,c){var d=c?void 0:a.scope.$new();c=c?void 0:a.element.find("#js-wizard-step-content");b.g(a.config);if(d&&c){b.scope=d;b.scope.step=b;b.scope.$on("validate",b.o.bind(b));a=b.l||c.injector().get("$compile");var e=b.template;a&&e&&(c.html(e),b.element=a(c.contents())(d))}b.uo=!1}T0.prototype.accept=function(){var a=this.steps[this.activeIndex];a.isValid(this.config)?this.finish():U0(this,a,"error")};T0.prototype.accept=T0.prototype.accept;
T0.prototype.RB=function(){return this.yp()&&"error"!=this.Sl(this.activeIndex)};T0.prototype.canAccept=T0.prototype.RB;T0.prototype.TB=function(){return!this.yp()&&"error"!=this.Sl(this.activeIndex)};T0.prototype.canContinue=T0.prototype.TB;T0.prototype.yp=function(){return this.activeIndex==this.steps.length-1};T0.prototype.isLastStep=T0.prototype.yp;T0.prototype.cancel=function(){this.pl();KE(this.element)};T0.prototype.cancel=T0.prototype.cancel;T0.prototype.pl=function(){};
T0.prototype.finish=function(){KE(this.element)};T0.prototype.next=function(a){if(this.activeIndex<this.steps.length-1){var b=this.steps[this.activeIndex];b.isValid(this.config)?(U0(this,b,"complete"),E0(b,this.config),b=this.steps[++this.activeIndex],a=a&&b.isValid(this.config),V0(this,b,a)):(U0(this,b,"error"),null!=b.scope||V0(this,b));Ova(this)}};T0.prototype.next=T0.prototype.next;
T0.prototype.prev=function(a){if(0<this.activeIndex){var b=this.steps[this.activeIndex];U0(this,b,b.isValid(this.config)?"":"error");E0(b,this.config);b=this.steps[--this.activeIndex];V0(this,b,a);Ova(this)}};T0.prototype.prev=T0.prototype.prev;function Ova(a){if(-1<a.activeIndex){var b=a.steps[a.activeIndex];b.isValid(a.config)||U0(a,b,"error");b=a.activeIndex+1;for(var c=a.steps.length;b<c;b++)U0(a,a.steps[b],"")}}
T0.prototype.RM=function(a){for(a=Je(a,0,this.steps.length-1);this.activeIndex!=a;){var b=this.activeIndex;b>a?this.prev(b>a+1):b<a&&this.next(b<a-1);if(b==this.activeIndex)break}};T0.prototype.setStepIndex=T0.prototype.RM;T0.prototype.isActive=function(a){return"number"===typeof a?this.activeIndex===a:this.steps[this.activeIndex]===a};T0.prototype.isActive=T0.prototype.isActive;
T0.prototype.zD=function(a){"number"===typeof a&&(a=this.steps[a]);if(a){var b=this.Sl(a);if("error"==b)return"fa-exclamation-triangle text-warning";if(this.isActive(a))return"fa-caret-right";if("complete"==b)return"fa-check text-success"}return""};T0.prototype.getStepIcon=T0.prototype.zD;T0.prototype.Sl=function(a){"number"===typeof a&&(a=this.steps[a]);return this.stepStates[a.S()]};T0.prototype.getStepState=T0.prototype.Sl;
function U0(a,b,c){"number"===typeof b&&(b=a.steps[b]);b&&(a.stepStates[b.S()]=c,X(a.scope))};function W0(a,b){if((a=Mga(a))&&0<a.length){var c=kG(b),d=a.map(FA).filter(CA);b.merge&&1<d.length?(a=WD(d))?(a=new ek(a),Pva(a,b,c),UE.add(a)):At(Ct,"Failed merging areas",rs):(a.forEach(function(a){a&&!UE.get(a)&&Pva(a,b,c)}),SE(UE,a,!0))}else At(Ct,"No Areas Found",ss)}function Pva(a,b,c){jG(a,c);a.Ub().forEach(function(b){var c=ib(tF,function(a){return a.toLowerCase()==b.toLowerCase()});c?c!=b&&(a.set(c,a.get(b)),a.set(b,void 0)):a.set(b,void 0)});a.set("_sourceName",b._sourceName,!0)};function X0(a){A.call(this);this.columns=[];this.config=a;this.g=[];Modernizr.webworkers||(Papa.LocalChunkSize=1048576,Papa.RemoteChunkSize=1048576)}w(X0,WC);var R0=1E3;g=X0.prototype;g.oc=function(){lb(this.g);this.j&&(this.j.abort(),this.j=void 0)};g.J=function(){this.oc();this.config=null;X0.C.J.call(this)};g.getColumns=function(){return this.columns};g.UD=function(a,b){a&&a.data&&a.data.length&&(Y0(this,a),this.g=this.g.concat(a.data));this.j=b};
g.VD=function(a){a&&a.data&&a.data.length&&(Y0(this,a),this.g=this.g.concat(a.data));this.j=void 0;this.Hh()};function Y0(a,b){if(!a.config.useHeader){b.meta.fields=[];a=0;for(var c=b.data[0].length;a<c;a++)b.meta.fields.push("Column "+a);for(a=b.data.length;a--;){c=b.data[a];for(var d={},e=0,f=c.length;e<f;e++)d["Column "+e]=c[e];b.data[a]=d}}}
function Qva(a,b){if(a.config.useHeader){for(var c=Math.max(a.config.headerRow,1)-1;c--;)b=b.replace(/.*?(\r?\n)/,"");c=a.config.dataRow-a.config.headerRow;if(1<c){for(a=b.match(/.*?((\r?\n)|$)/)[0];c--;)b=b.replace(/.*?((\r?\n)|$)/,"");b=a+b}}else for(c=Math.max(a.config.dataRow,1)-1;c--;)b=b.replace(/.*?((\r?\n)|$)/,"");return b}g.vd=function(){return 0<this.g.length};g.Wc=function(){return Rva(this,this.g.pop())};
g.Bb=function(a){lb(this.columns);lb(this.g);a instanceof ArrayBuffer&&(a=Ow(a)||null);if("string"===typeof a){var b={chunk:this.UD.bind(this),comments:this.config.commentChar||!1,complete:this.VD.bind(this),delimiter:this.config.delimiter,dynamicTyping:!1,header:this.config.useHeader,worker:!0,skipEmptyLines:!0};a=Qva(this,a);Papa.parse(a,b)}};function Z0(a){X0.call(this,a)}w(Z0,X0);function Rva(a,b,c){b=new ek(b);if(a.config.ignoreMissingGeomRows){c=null!=c?c:a.config.mappings;var d="Latitude";a="Longitude";if(c)for(var e=0;e<c.length;e++)if("Latitude"==c[e].D())d=c[e].ja;else if("Longitude"==c[e].D())a=c[e].ja;else if(c[e]instanceof ES||c[e]instanceof QS)d=c[e].ja,a=c[e].ja;c=b.get(d);a=b.get(a);if(null!=c&&null!=a){if(Lb(c)||Lb(a))return null}else return null}b.ga(String(H(b)));return b};function a1(a,b,c,d){T0.call(this,a,b,c,d)}w(a1,T0);a1.$inject=["$scope","$element","$timeout","$attrs"];a1.prototype.finish=function(){this.loading=!0;var a=new Z0(this.scope.config);a=new bD(a);a.o=this.scope.config.mappings;a.Ra("complete",this.g,!1,this);gD(a,this.scope.config.file.Ob())};a1.prototype.g=function(a){a=a.target;var b=a.getData();a.dispose();b&&0<b.length&&(this.scope.config._sourceName=this.scope.config.file.getFileName(),W0(b,this.scope.config));KE(this.element)};
W.directive("csvareaimport",[function(){var a=S0();a.controller=a1;return a}]);function b1(){H0.call(this)}w(b1,H0);
b1.prototype.wb=function(a){var b=new Z0(this),c=this.file.Ob();b.columns.length=0;c=Qva(b,c);var d=Papa.parse(c,{comments:b.config.commentChar||!1,preview:R0,delimiter:b.config.delimiter,dynamicTyping:!1,header:b.config.useHeader});c=[];if(d&&d.data&&0<d.data.length){Y0(b,d);for(var e=0,f=d.data.length;e<f;e++){var h=Rva(b,d.data[e],a);h&&c.push(h)}if(a){if(c&&0<c.length){a=c[0];b.columns.length=0;d=!1;null!=a.get("recordTime")&&(d=new FF("recordTime"),d.id="TIME",d.name="TIME",d.selectable=!1,d.sortable=
!1,b.columns.push(d),d=!0);a=a.Vb();for(var k in a)KB(k)||d&&"TIME"==k||(a=new FF(k),a.selectable=!1,a.sortable=!1,b.columns.push(a))}}else for(k=b.columns.length=0,a=d.meta.fields.length;k<a;k++)e=new FF(d.meta.fields[k]),e.selectable=!0,e.sortable=!1,b.columns.push(e)}this.preview=c||[];this.columns=b.getColumns()||[];c=0;for(k=this.columns.length;c<k;c++)d=this.columns[c],d.width=0,WF(d);b.dispose()};function c1(){pS.call(this);this.j=!1}w(c1,pS);c1.prototype.S=function(){return"Area Import - CSV"};
c1.prototype.Ib=function(a,b){c1.C.Ib.call(this,a,b);b=[new L0,new O0,new F0];var c=new b1;c.file=a;c.title=a.getFileName();Mva(c);FE({label:"CSV Area Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},'<csvareaimport resize-with=".js-window"></csvareaimport>',void 0,void 0,void 0,{config:c,steps:b})};function d1(){this.Ic=new DD;this.features=null;this.g={};this.j=0}w(d1,y);g=d1.prototype;g.J=function(){d1.C.J.call(this);this.oc()};g.Bb=function(a){this.features=null;this.j=0;var b;a instanceof ArrayBuffer&&(a=Ow(a)||null);q(a)&&1==a.length&&("string"===typeof a[0]||Aa(a[0]))?b=a[0]:Aa(a)?b=a:a&&"string"===typeof a&&(b=JSON.parse(a.replace(/\t/g," ").replace(/\r\n/g,"")));b&&(q(b)?this.features=b:(a=b,"Feature"==a.type?this.features=[a]:"FeatureCollection"==a.type&&(this.features=a.features)))};
g.oc=function(){this.features=null;this.j=0};g.vd=function(){return null!=this.features&&this.features.length>this.j};g.Wc=function(){var a=this.features[this.j++];return a?(a=this.Ic.cg(a,{featureProjection:N}),a.forEach(this.Xc,this),a):null};g.Xc=va;g.getColumns=function(){return this.g?mc(this.g):[]};function e1(a,b,c,d){T0.call(this,a,b,c,d)}w(e1,T0);e1.$inject=["$scope","$element","$timeout","$attrs"];e1.prototype.finish=function(){this.loading=!0;var a=new d1;a=new bD(a);a.o=this.scope.config.mappings;a.Ra("complete",this.g,!1,this);gD(a,this.scope.config.file.Ob())};e1.prototype.g=function(a){a=a.target;var b=a.getData();a.dispose();b&&0<b.length&&(this.scope.config._sourceName=this.scope.config.file.getFileName(),W0(b,this.scope.config));KE(this.element)};
W.directive("geojsonareaimport",[function(){var a=S0();a.controller=e1;return a}]);function f1(){IR.call(this)}w(f1,IR);f1.prototype.wb=function(){var a=MQ("geojson");a.Bb(this.file.Ob());var b=25,c=[];for(a.g={};a.vd()&&b--;){var d=a.Wc();if(q(d))for(var e=0,f=d.length;e<f;e++){var h=d[e];h.ga(String(H(h)));c.push(h)}d=h.Ub();e=0;for(f=d.length;e<f;e++){var k=d[e];if(k&&!KB(k)&&!(k in a.g)){var l=new FF(k);l.selectable=!0;l.sortable=!0;a.g[k]=l}}}this.preview=c||[];this.columns=a.getColumns()||[];b=0;for(c=this.columns.length;b<c;b++)e=this.columns[b],e.width=0,WF(e);a.dispose()};function g1(){pS.call(this);this.j=!1}w(g1,pS);g1.prototype.S=function(){return"Area Import - GeoJSON"};
g1.prototype.Ib=function(a,b){g1.C.Ib.call(this,a,b);var c=[new F0],d=new f1;b&&this.g(b,d);d.file=a;d.title=a.getFileName();FE({label:"GeoJSON Area Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},'<geojsonareaimport resize-with=".js-window"></geojsonareaimport>',void 0,void 0,void 0,{config:d,steps:c})};function h1(a,b,c){lG.call(this,a,b,c)}w(h1,lG);h1.$inject=["$scope","$element","$timeout"];h1.prototype.getFileName=function(){return this.config&&this.config.title||void 0};function Sva(a,b){a.config._sourceName=a.getFileName();W0(b,a.config)};function j1(){A.call(this);this.Ic=new gV({showPointNames:!1});this.g=null;this.l={};this.columns=null;this.j=Tva}w(j1,WC);var Tva=E.V("plugin.area.KMLAreaParser");g=j1.prototype;
g.Bb=function(a){this.oc();if(Bl(a))this.g=a;else if("string"===typeof a)this.g=VA(a);else if(a instanceof ArrayBuffer){if(Jw(a)){Uva(this,a);return}(a=Ow(a))?this.g=VA(a):(E.error(this.j,"The buffer source does not appear to be text"),this.uc())}else if(a instanceof Blob){sf(zw(a),this.Bb,this);return}if(this.g){if((a=Ag(this.g))&&"kml"!==a.localName.toLowerCase()){var b=mB("kml",this.g);b.appendChild(a);this.g.appendChild(b);a=b}a?this.Hh():(E.error(this.j,"No KML content to parse!"),this.uc())}else E.error(this.j,
"Content must be a valid KML document!"),this.uc()};function Uva(a,b){zip.createReader(new zip.ArrayBufferReader(b),t(function(a){a.getEntries(this.uL.bind(this))},a),t(function(){this.uc();E.error(this.j,"Error reading zip file!")},a))}
g.uL=function(a){for(var b=null,c=null,d=/(doc|index)\.kml$/i,e=/\.kml$/i,f=0,h=a.length;f<h;f++){var k=a[f];!b&&d.test(k.filename)?b=k:e.test(k.filename)&&(c||(c=k),this.l[k.filename]=k)}(b=b||c)?(a=b,a.getData(new zip.BlobWriter,this.vL.bind(this,a.filename))):(E.error(this.j,"No KML found in the ZIP!"),this.uc())};g.vL=function(a,b){if(b&&b instanceof Blob){var c=new FileReader;c.onload=this.tL.bind(this,a);c.readAsText(b)}else E.error(this.j,"There was a problem unzipping the KMZ!"),this.uc()};
g.tL=function(a,b){(a=b.target.result)&&"string"===typeof a?this.g||this.Bb(a):(E.error(this.j,"There was a problem reading the ZIP content!"),this.uc())};g.oc=function(){this.g=null};g.vd=function(){return null!=this.g};g.Wc=function(){var a=null;this.g&&(a=this.g,this.g=null,a=this.Ic.cg(a,{featureProjection:N}));if(a){this.columns=[];var b={};a.forEach(function(a){if(a=a.Vb())for(var c in a)b[c]=!0});for(var c in b)this.columns.push(new FF(c))}return a};g.getColumns=function(){return this.columns};function k1(){pS.call(this);this.j=!1;this.fileName=""}w(k1,pS);k1.prototype.S=function(){return"Area Import - KML"};k1.prototype.Ib=function(a,b){k1.C.Ib.call(this,a,b);b=new IR;b.file=a;b.title=a.getFileName()||"";b=Fa(this.l,b);var c=new j1;c.Ra("complete",b,!1,this);c.Ra("error",b,!1,this);c.Bb(a.Ob())};
k1.prototype.l=function(a,b){b=b.target;var c=b.Wc(),d=b.getColumns()||[];Ma(b);a.columns=d;a.preview=c;FE({label:"KML Area Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"450","min-width":"300","max-width":"800",height:"auto",modal:"true","show-close":"true"},"<kmlarea></kmlarea>",void 0,void 0,void 0,{config:a})};W.directive("kmlarea",[function(){return{restrict:"E",templateUrl:"v1542394219/views/plugin/kml/kmlarea.html",controller:l1,controllerAs:"areaFiles"}}]);
function l1(a,b,c){lG.call(this,a,b,c)}w(l1,h1);l1.$inject=["$scope","$element","$timeout"];l1.prototype.finish=function(){l1.C.finish.call(this);var a=new j1;a=new bD(a);a.Ra("complete",this.g,!1,this);gD(a,this.config.file.Ob())};l1.prototype.finish=l1.prototype.finish;l1.prototype.getFileName=function(){return this.config.file&&this.config.file.getFileName()||void 0};l1.prototype.g=function(a){a=a.target;var b=a.getData()||[];a.dispose();Sva(this,b);this.close()};function m1(a){if(!a||4>a.byteLength)return!1;a=(new DataView(a.slice(0,4))).getUint32(0);var b=a&255,c=a>>8&255;return 3==(a>>24&255)&&1<=b&&31>=b&&1<=c&&12>=c}function n1(a){a=new DataView(a.slice(0,4));try{return 9994==a.getUint32(0)}catch(b){return!1}};function Vva(a,b,c){this.name=a;this.type=b;this.length=c};function Wva(){this.data=null;this.j=this.o=this.l=0;this.fields=[];this.g=0};function Xva(){this.data=null;this.g=this.position=0};function Yva(){this.data=null;this.g=new Wva;this.j=new Xva;this.l=this.position=this.o=0};function o1(){A.call(this);this.g=[];this.j=null;this.s=this.l=!1;this.o=[]}w(o1,WC);var p1=E.V("plugin.file.shp.SHPParser");g=o1.prototype;g.oc=function(){this.j=null;this.l=!1};g.J=function(){this.oc();this.o.length=0};g.getColumns=function(){return this.g};g.vd=function(){return this.l&&null!=this.j.data&&this.j.position<this.j.data.byteLength};
g.Wc=function(){var a=null;try{var b=new DataView(this.j.data.slice(this.j.position,this.j.position+8)),c=2*b.getUint32(4);this.j.o=b.getUint32(0);this.j.position+=8;b=new DataView(this.j.data.slice(this.j.position,this.j.position+c));var d=b.getUint32(0,!0);if(1==d||11==d||21==d){a=new ek;var e=b.getFloat64(4,!0),f=b.getFloat64(12,!0),h=[e,f];if(11==d){var k=b.getFloat64(20,!0);h.push(k);a.set("ALTITUDE",k)}a.set("LAT",f);a.set("LAT_DDM",Mu(f,!1));a.set("LAT_DMS",Lu(f,!1));a.set("LON",e);a.set("LON_DDM",
Mu(e,!0));a.set("LON_DMS",Lu(e,!0));a.sb(iu(new Jk(h)))}else if(3==d||5==d||13==d||15==d||23==d||25==d){a=new ek;var l=b.getInt32(36,!0),m=b.getInt32(40,!0),n=4*l,p=16*m,r=[];for(k=0;k<l;k++){var u=b.getInt32(44+4*k,!0);r.push(u)}0==r.length&&r.push(0);l=null;if(13==d||15==d)for(l=[],p=44+n+p+16,k=0;k<m;k++){var v=b.getFloat64(p+8*k,!0);l.push(v)}v=[];n=44+n;for(u=p=0;u<r.length;u++){for(var x=[],B=u+1<r.length?r[u+1]:m,F=r[u];F<B;F++,p++){var D=16*F;e=b.getFloat64(n+D,!0);f=b.getFloat64(n+D+8,!0);
isNaN(e)||isNaN(f)?E.ib(p1,"Record #"+this.j.o+" lat/lon could not be parsed!"):(D=[e,f],l&&p<l.length&&!isNaN(l[p])&&D.push(l[p]),x.push(D))}v.push(x)}b=null;if(5==d||15==d||25==d)if(1<v.length){d=[];for(k=0;k<v.length;k++){h=v[k];var S;if(S=0<d.length){e=0;if(3<h.length&&Eu(h))for(f=0;f<h.length;f++){var ia=h[f],ea=h[f+1==h.length?0:f+1];e+=(ea[0]-ia[0])*(ea[1]+ia[1])}S=0>e}S?d[d.length-1].push(h):d.push([h])}b=new Rr(d)}else b=new Rk(v);else b=1<v.length?new Ar(v):new yr(v[0]);a.sb(iu(b))}else 0!=
d&&E.ib(p1,"Unsupported shape type ("+d+") encountered. Only POINT(1,11,21), POLYLINE(3,13,23) & POLYGON(5,15,25) are supported");if(a&&this.j.g.data){h=a;var ca=this.j.g,Y=this.j.o;if(Y<=ca.l){var ja=ca.j+(Y-1)*ca.o;Y=0;for(var Ga=ca.fields.length;Y<Ga;Y++){var Oa=ca.fields[Y],tc=ca.data.slice(ja,ja+Oa.length),Ta=Ow(tc);if(Ta){var ka=Nb(Ta);"N"==Oa.type?(ka=Number(ka),isNaN(ka)&&(ka=null)):"L"==Oa.type&&(ka=!!ka);ja+=Oa.length;h.set(Oa.name,ka)}}}}this.j.position+=c}catch(Vb){throw Vb;}a&&a.ga(String(H(a)));
return a};function Zva(a){var b=[];if(a.l){for(;a.vd()&&50>b.length;){var c=a.Wc();c&&b.push(c)}a.oc()}return b}
g.Bb=function(a){this.s=this.l=!1;this.o.length=0;if(a){if(q(a))for(var b=a.length;b--;)a[b]instanceof ArrayBuffer?this.o.push(a[b]):q1("Invalid SHP source!");else a instanceof ArrayBuffer?this.o.push(a):q1("Invalid SHP source!");if(0<this.o.length){this.j=new Yva;for(a=this.o.length;a--;)b=this.o[a],Jw(b)?$va(this,b):n1(b)?this.j.data?E.ib(p1,"Ignoring extra SHP file while trying to parse a SHP/ZIP file."):awa(this,b):m1(b)&&(this.j.g.data?E.ib(p1,"Ignoring extra DBF file while parsing a SHP/ZIP file."):
(bwa(this,b),cwa(this)));this.s||(this.j.data?this.j.g.data?this.Hh():(q1("No valid DBF file found!"),this.uc()):(q1("No valid SHP file found!"),this.uc()))}}};g.uc=function(){this.l=!0;this.s=!1;o1.C.uc.call(this)};g.Hh=function(){this.l=!0;this.s=!1;o1.C.Hh.call(this)};function q1(a){E.error(p1,a)}function cwa(a){a.g.length=0;if(a.j.g)for(var b=a.j.g.fields,c=0,d=b.length;c<d;c++){var e=new FF(b[c].name);e.selectable=!1;e.sortable=!1;a.g.push(e)}}
function $va(a,b){a.s=!0;zip.createReader(new zip.ArrayBufferReader(b),t(function(a){a.getEntries(this.CL.bind(this))},a),t(function(){q1("Error reading zip file!")},a))}g.CL=function(a){for(var b=!1,c=!1,d=0,e=a.length;d<e;d++){var f=a[d];!b&&r1.test(f.filename)?(b=!0,f.getData(new zip.ArrayBufferWriter,this.Ry.bind(this,f))):!c&&s1.test(f.filename)&&(c=!0,f.getData(new zip.ArrayBufferWriter,this.Ry.bind(this,f)))}b?c||(q1("No valid DBF file found!"),this.uc()):(q1("No valid SHP file found!"),this.uc())};
g.Ry=function(a,b){b instanceof ArrayBuffer&&(r1.test(a.filename)?awa(this,b):s1.test(a.filename)&&(bwa(this,b),cwa(this)));!this.l&&this.j.data&&this.j.g.data&&this.Hh()};function awa(a,b){1E3==(new DataView(b)).getUint32(28,!0)&&(a.j.data=b,a.j.position=100)}
function bwa(a,b){a=a.j.g;var c=new DataView(b);a.l=c.getUint32(4,!0);a.j=c.getUint16(8,!0)+1;a.o=c.getUint16(10,!0);a.fields.length=0;for(var d=32;d<a.j;){var e=Ow(b.slice(d,d+10));if(13==e.charCodeAt(0))break;var f=String.fromCharCode(c.getUint8(d+12)),h=c.getUint8(d+16);e=Nb(e);a.fields.push(new Vva(e,f,h));d+=32}a.data=b};function t1(){IR.call(this);this.zipFile=this.file2=null;this.lineAlpha=1;this.fillAlpha=.5;this.append=!0}w(t1,IR);function dwa(a,b){a.columns=[];a.preview=[];var c=new o1(a);c.Bb(a.zipFile.Ob());Yd(c,"complete",t(function(){this.preview=Zva(c);this.columns=c.getColumns()||[];for(var a=0,e=this.columns.length;a<e;a++){var f=this.columns[a];f.width=0;WF(f)}b();c.dispose()},a),!1,a)}
t1.prototype.wb=function(){this.columns=[];this.preview=[];if(this.file||this.file2){var a=[];this.file&&a.push(this.file.Ob());this.file2&&a.push(this.file2.Ob());var b=new o1(this);b.Bb(a);this.preview=Zva(b);this.columns=b.getColumns()||[];a=0;for(var c=this.columns.length;a<c;a++){var d=this.columns[a];d.width=0;WF(d)}b.dispose()}};Fw("application/shapefile",function(a){return Wc(a&&(n1(a)||m1(a)))});Fw("application/zip; subtype=shape",Kw(/\.shp$/i),0,"application/zip");var r1=/\.shp$/i,s1=/\.dbf$/i;function u1(){D0.call(this);this.template="<shpfilesstep></shpfilesstep>";this.title="Files"}w(u1,D0);u1.prototype.ki=function(a){try{a.wb();var b=a.preview;if((!a.mappings||0>=a.mappings.length)&&b&&0<b.length){var c=hB.u().Nd(b);c&&0<c.length&&(a.mappings=c)}}catch(d){}};W.directive("shpfilesstep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/plugin/shp/shpfilesstep.html",controller:v1,controllerAs:"filesStep"}}]);
function v1(a){this.v=a;this.g=a.config;this.j=document.getElementById("dbfFile");Yd(this.j,"change",this.o,!1,this);this.l=document.getElementById("shpFile");Yd(this.l,"change",this.o,!1,this);this.loading=!1;this.dbfName=w1(this.g.file2);this.dbfValid=!!this.dbfName;this.dbfError=null;this.shpName=w1(this.g.file);this.shpValid=!!this.shpName;this.shpError=null;a.$on("$destroy",this.B.bind(this));x1(this,"shp");x1(this,"dbf");y1(this)}v1.$inject=["$scope"];
v1.prototype.B=function(){de(this.j,"change",this.o,!1,this);de(this.l,"change",this.o,!1,this);this.v=this.g=this.l=this.j=null};function y1(a){a.v.$emit("validate",a.dbfValid&&a.shpValid);X(a.v)}v1.prototype.lG=function(a){"dbf"==a&&this.j?this.j.click():"shp"==a&&this.l&&this.l.click()};v1.prototype.onBrowse=v1.prototype.lG;v1.prototype.o=function(a){a=a.target;var b=a==this.j?"dbf":"shp";a.files&&0<a.files.length?(this.loading=!0,tf(Pw(a.files[0]),Fa(this.A,b),Fa(this.s,b),this)):this.Qv(b)};
v1.prototype.A=function(a,b){this.loading=!1;if(b){this.g.descriptor||qy(my.u(),b);var c="dbf"==a?m1:n1,d=b.Ob();d&&d instanceof ArrayBuffer&&c(d)?("dbf"==a?this.g.file2=b:this.g.file=b,this[a+"Name"]=w1(b),this[a+"Valid"]=!0):this[a+"Valid"]=!1}x1(this,a);y1(this)};function x1(a,b,c){a[b+"Error"]=a[b+"Valid"]?null:c?c:a[b+"Name"]?"Selected file is not "+("a"+("shp"==b?"n ":" ")+b.toUpperCase()+" file")+".":"Please choose "+("a"+("shp"==b?"n ":" ")+b.toUpperCase()+" file")+"."}
function w1(a){if(!a)return"";var b=a.Ka();return b&&!Uw(b)?b:a.getFileName()||""}v1.prototype.s=function(a,b){this.loading=!1;var c=a+"File";b&&"string"===typeof b||(b='Unable to load file "'+(this.v[c]?this.v[c].name:"unknown")+'".');this[a+"Valid"]=!1;x1(this,a,b);y1(this);E.error(v1.g,b)};v1.prototype.Qv=function(a){"dbf"==a?(this.g.file2=null,this.j.value=null):(this.g.file=null,this.l.value=null);this[a+"Name"]="";this[a+"Valid"]=!1;x1(this,a);y1(this)};v1.prototype.onClear=v1.prototype.Qv;
v1.prototype.Ki=function(a){var b=new IQ;b.Lb(this[a+"Name"]);b.H("complete",Fa(this.G,a),!1,this);b.H("cancel",Fa(this.I,a),!1,this);b.Ki()};v1.prototype.loadUrl=v1.prototype.Ki;v1.prototype.G=function(a,b){b=b.target;b.removeAllListeners();(b=b.j)?this.A(a,b):this.s(a,"Unable to load URL!")};v1.prototype.I=function(a,b){b.target.removeAllListeners();this.s(a,"Unable to load URL!")};function z1(){pS.call(this);this.j=!1}w(z1,pS);z1.prototype.S=function(){return"Area Import - SHP"};
z1.prototype.Ib=function(a,b){z1.C.Ib.call(this,a,b);b=new t1;var c=a.getFileName();r1.test(c)?(b.file=a,b.title=c):s1.test(c)?(b.file2=a,b.title=c.split(s1)[0]+".shp"):(b.zipFile=a,b.title=c);FE({label:"SHP Area Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"450","min-width":"300","max-width":"800",height:"auto",modal:"true","show-close":"true"},'<shparea resize-with=".js-window"></shparea>',void 0,void 0,void 0,{config:b})};
W.directive("shparea",[function(){return{restrict:"E",templateUrl:"v1542394219/views/plugin/shp/shparea.html",controller:A1,controllerAs:"areaFiles"}}]);function A1(a,b,c){lG.call(this,a,b,c);this.scope.$on("validate",this.g.bind(this));this.config.zipFile&&dwa(this.config,X.bind(this,this.scope))}w(A1,h1);A1.$inject=["$scope","$element","$timeout"];A1.prototype.g=function(){this.config.wb();X(this.scope)};
A1.prototype.SE=function(){var a=this.config;return a.zipFile?!a.columns||0==a.columns.length||!a.title&&!a.titleColumn:!a.file||!a.file2||!a.title&&!a.titleColumn};A1.prototype.invalid=A1.prototype.SE;A1.prototype.finish=function(){A1.C.finish.call(this);var a=new o1(this.config);a=new bD(a);a.Ra("complete",this.j,!1,this);this.config.zipFile?gD(a,this.config.zipFile.Ob()):gD(a,[this.config.file.Ob(),this.config.file2.Ob()])};A1.prototype.finish=A1.prototype.finish;
A1.prototype.j=function(a){a=a.target;var b=a.getData()||[];a.dispose();Sva(this,b);this.close()};Fw("application/vnd.google-earth.kml+xml",function(a,b,c){var d;c&&(/^(document|folder|kml)$/i.test(c.yz)||/\/kml\//i.test(c.Xr))&&(d=c);return Wc(d)},0,"text/xml");Fw("application/vnd.google-earth.kmz",Kw(/\.kml$/i),0,"application/zip");function B1(){y_.call(this);this.id="areas"}w(B1,y_);B1.prototype.init=function(){var a=Ae;Dla(Be);OQ(a,"text/csv",new c1);NQ(a,"CSV",!0);OQ(a,"application/vnd.geo+json",new g1);NQ(a,"GeoJSON",!0);OQ(a,"application/vnd.google-earth.kml+xml",new k1);OQ(a,"application/vnd.google-earth.kmz",new k1);NQ(a,"KML/KMZ",!0);OQ(a,"application/shapefile",new z1);OQ(a,"application/zip; subtype=shape",new z1);NQ(a,"Shapefile (SHP/DBF or ZIP)",!0)};function C1(){this.j=!1}w(C1,oS);C1.prototype.Ib=function(a){a=a.Ka();if(!a||Uw(a)||!Mw&&Tw(a))a="The audio manager does not support local files. Only files from a URL can be played.",At(zt.u(),a,rs);else{var b=PZ.u();if(!c){var c=a.lastIndexOf(".");0>c&&(c=a.length);c=a.substring(a.lastIndexOf("/")+1,c)}b.j[c]=a;delete b.l[a];delete b.s[a];b=O.get(["userSounds"],{});b[c]=a;O.set(["userSounds"],b);E.info(QZ,'Added sound "'+c+'" from '+a);a='Added new sound "'+c+'"';At(zt.u(),a,ts)}};Fw("application/audio",function(a,b){return Wc(b&&/\.(mp3|wav|ogg|m4a)$/i.test(b.getFileName()))},1E4);function D1(){y_.call(this);this.id="audio"}w(D1,y_);D1.prototype.init=function(){var a=KQ.u();NQ(a,"Audio files for application sounds.");OQ(a,"application/audio",new C1)};function E1(){VX.call(this)}w(E1,VX);E1.prototype.Pd=function(a){var b=[];try{var c=a.W(),d=un(T.u().Y()).g;a=0;for(var e=d.length;a<e;a++)if(d[a]instanceof lP){var f=d[a];if(-1<mn(f).g.indexOf(c)){mb(b,Xb(99-a,2)+f.Qc());break}}}catch(h){}return b};E1.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a.substring(2));pz(b,!1);b.collapsed=!1;return b};function F1(a,b,c){HX.call(this,[],a,b,c)}w(F1,TX);g=F1.prototype;g.Ol=function(){return pw(T.u()).filter(function(a){return!a.Mj()})};g.Cn=function(a){if(a.Zo)var b=a.Zo();else b=new HA,b.ze(a);pz(b,!0);return b};
g.Bo=function(a,b){if(!(a instanceof E1))for(a=b.length;a--;){var c=void 0,d=b[a].na(),e=b[a];if(d&&1<d.length){var f=Eb(d,ewa);d.length=0;for(c in f){var h=f[c];if(1<h.length){for(var k=Number.MAX_VALUE,l="Unknown",m=0,n=h.length;m<n;m++){var p=h[m].ba()||"";p.length<k&&(l=p,k=p.length)}k=new PK;k.ga(c+"#_group");k.Ta(l);l=new HA;m=0;for(n=h.length;m<n;m++)if(p=h[m]){var r=p.W();r&&k.g.push(r);l.R(p)}l.ze(k);d.push(l)}else 1==h.length&&d.push(h[0])}c=e.ba();m=c.indexOf("(");f=c.substring(m).split(/[^0-9]+/);
c=c.substring(0,m);for(m=f.length;m--;)""===f[m]&&f.splice(m,1);for(m=0;m<f.length;m++){f[m]=parseInt(f[m],10);if(0===m)var u=d.length/f[0];f[m]*=u}e.Da(c+"("+f[0]+(1<f.length?" of "+f[1]:"")+")")}}};g.Hz=function(a){this.g?a.sort(hsa):a.sort(KX)};g.El=function(a){var b=pw(T.u());if(b&&0<b.length)for(var c=0,d=b.length;c<d;c++){var e=new HA;e.ze(b[c]);a.push(e)}else JX(this,a)};function ewa(a){var b=a.D().split("#");b.pop();return 1<b.length?b.join("#"):a.D()};function G1(a){VX.call(this);this.j=NaN;this.o=a||!1}w(G1,VX);
var H1=[{label:"Last Minute",offset:6E4},{label:"Last 5 Minutes",offset:3E5},{label:"Last 15 Minutes",offset:9E5},{label:"Last 30 Minutes",offset:18E5},{label:"Last Hour",offset:36E5},{label:"Last 3 Hours",offset:108E5},{label:"Last 6 Hours",offset:216E5},{label:"Last 12 Hours",offset:432E5},{label:"Last 24 Hours",offset:864E5},{label:"Last 48 Hours",offset:1728E5},{label:"Last 7 Days",offset:6048E5},{label:"Last 2 Weeks",offset:12096E5},{label:"Last 30 Days",offset:2592E6},{label:"Last 60 Days",
offset:5184E6}];G1.prototype.init=function(){G1.C.init.call(this);this.j=Ha()};G1.prototype.Pd=function(a){var b=[],c=Number.NEGATIVE_INFINITY;(a=a instanceof jU?a.Ja():V.Ja(a.D()))&&(c=a.Of());if(!isNaN(c)&&c>Number.NEGATIVE_INFINITY){if(c>this.j)return mb(b,"xxReports future activity"),b;a=0;for(var d=H1.length;a<d;a++)if(this.j-H1[a].offset<=c)return mb(b,Xb(a,2)+H1[a].label),b;mb(b,"yyNo recent activity");return b}mb(b,"zzCould not determine activity");return b};
G1.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a.substring(2));pz(b,!1);-1<a.indexOf("Last")?oz(b,"Contains all results that report activity over the "+b.ba().toLowerCase()+"."):-1<a.indexOf("zz")?oz(b,"Contains all results for which the activity could not be determined."):-1<a.indexOf("yy")?oz(b,"Contains all results that do not have any recent activity."):-1<a.indexOf("xx")&&oz(b,"Contains all results that report future activity and thus cannot be accurately binned inthe other groups");b.collapsed=
!this.o;return b};var qua="search.v1";function I1(){A.call(this);this.j={};this.l=null;this.g={};this.g.descriptor="c-toggle-switch";this.g.folder="fa fa-fw fa-folder";this.g.missing="fa fa-fw fa-chain-broken";this.g[qua]="fa fa-fw fa-search"}w(I1,A);wa(I1);var XZ="favorite";g=I1.prototype;g.wg=function(a){return this.g[a]||"fa fa-fw fa-external-link"};function $Z(){var a=O.get([XZ]);a||(a=[]);return a}
function J1(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.key==b)return d;if("folder"==d.type&&(d=J1(d.children,b)))return d}return null}function fwa(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.key==b)rb(a,c);else if("folder"==d.type){var e=fwa(d.children,b);e.length!=d.children.length&&(d.children=e)}}return a}function gwa(a,b){var c=[],d=Eb(a,function(a){return a.type});db(b,function(a){(a=d[a])&&wb(c,a)});(a=d.folder)&&db(a,function(a){wb(c,gwa(a.children,b))});return c}
function hwa(a,b){a=gwa(a,b);yb(a,void 0,function(a){return a.key});return a}function iwa(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(e.key==c){nb(e.children,b);break}else if("folder"==e.type){var f=iwa(e.children,b,c);if(f.length!=e.children.length){e.children=f;break}}}return a}
g.save=function(a,b,c,d,e,f){var h=$Z(),k=h.length,l;(l=J1($Z(),b))?(l=Gs(l),h=fwa(h,b)):l={children:[],key:b,time:(new Date).getTime(),type:a,value:"",key2:f?f:""};l.value=c;l.time=(new Date).getTime();if(e&&0<e.length)for(yb(e),a=0;a<e.length;a++)h=iwa(h,l,e[a]);else nb(h,l);O.set([XZ],h);d&&k!=h.length&&(c="<strong>"+Tb(c||".",50)+"</strong>",Az.test(b)&&(c='<a href="'+b+'" target="_blank">'+c+"</a>"),At(Ct,"Saved Favorite: "+c,ts))};
g.filter=function(a,b,c){var d=[];b?d=hwa(a,b):d=a?vb(a):[];c&&d&&(d.length=Math.min(d.length,c));return d};g.handleEvent=function(a,b,c){if(b=this.j[b])b(c),a.preventDefault()};g.clear=function(){O.set([XZ],[])};var pua=I1.u();function K1(){VX.call(this)}w(K1,VX);K1.prototype.Pd=function(a){var b=[];try{if(a.D()){var c=V.Ja(a.D()),d;if(d=c){var e=c.D();d=J1($Z(),e)}d?b.push("Favorites"):b.push("Other")}else b.push("Other")}catch(f){}return b};K1.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a);pz(b,!1);b.zd(!1);return b};function L1(){VX.call(this)}w(L1,VX);L1.prototype.Pd=function(a){var b=[];try{var c=a.W().rb()||"Unknown Provider";mb(b,c)}catch(d){}return b};L1.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a);pz(b,!1);b.collapsed=!1;return b};function M1(){VX.call(this)}w(M1,VX);M1.prototype.Pd=function(a){var b=[];try{var c=a.W(),d=un(T.u().Y()).g,e=c.Qc()||"00Unknown Type";a=0;for(var f=d.length;a<f;a++)if(d[a]instanceof lP){var h=d[a];if(-1<mn(h).g.indexOf(c)||"Tile and Feature Groups"==e&&"Feature Layers"==h.Qc())var k=Xb(99-a,2)+e}mb(b,k||e)}catch(l){}return b};M1.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a.substring(2));pz(b,!1);b.collapsed=!1;return b};function N1(a){lY.call(this,a);this.j=null}w(N1,lY);N1.prototype.init=function(){N1.C.init.call(this);if(this.j=O.get(["tagList"]))for(var a=0,b=this.j.length;a<b;a++)this.j[a]=this.j[a].toUpperCase()};N1.prototype.Pd=function(a){var b=[],c=null;try{(c=a.getTags())||(c=a.getParent().getTags())}catch(f){}if(c&&this.j){a=0;for(var d=c.length;a<d;a++){var e=c[a].toUpperCase();-1<this.j.indexOf(e)&&mb(b,"a"+e)}}0===b.length&&b.push("zNot Specified");return b};W.directive("layertree",[function(){var a=iK();a.controller=O1;return a}]);function O1(a,b,c){a.dragEnabled=!0;jK.call(this,a,b,c)}w(O1,jK);O1.$inject=["$scope","$element","$compile"];O1.prototype.xt=function(a){var b=this.ta.getDataItem(a[0]);if(!b)return!1;var c=b instanceof HA;if(!c&&!b.L)return!1;b=b.depth;if(0===b&&!c)return!1;for(var d=1,e=a.length;d<e;d++){var f=this.ta.getDataItem(a[d]);if(f instanceof HA!=c||f.depth!=b||!c&&!f.L)return!1}return!0};
O1.prototype.ei=function(a,b){if(isNaN(b))return!1;var c=this.Gb.getItem(a[0]);if(!c)return!1;if(c instanceof HA)for(var d=0,e=a.length;d<e;d++){if(a[d]==b||a[d]==b-1)return!1;var f=this.ta.getDataItem(a[d]);if(f.depth<c.depth)return!1;var h=this.ta.getDataItem(b);if(!h||h.depth!==c.depth)for(var k=b;0<=k&&(!h||h.depth!==c.depth);)k--,h=this.ta.getDataItem(k);if(!h||h.Xd!==f.Xd)return!1;k=sA.u();if(uA(k,f.D())!==uA(k,h.D()))return!1}else return c.L&&O1.C.ei.call(this,a,b)?(h=this.ta.getDataItem(b))&&
h.Ha()==c.Ha()?c.yt(h,this.l):!1:!1;return!0};
O1.prototype.xl=function(a,b){if(!isNaN(b)){var c=this.Gb.getItem(a[0]);if(c){if(c instanceof HA){for(var d=!1,e=this.ta.getDataItem(b);!(e instanceof HA)||e.depth!==c.depth;)d=!0,b--,e=this.ta.getDataItem(b);if(e){var f=e.W();b=[f.D()];c=sA.u();f instanceof PK&&(b=f.g.map(uw));for(var h=0,k=a.length;h<k;h++)if(e=this.ta.getDataItem(a[h])){f=e.W();e=[f.D()];f instanceof PK&&(e=f.g.map(uw));f=0;for(var l=e.length;f<l;f++)for(var m=0,n=b.length;m<n;m++)wA(c,e[f],b[m],!d)}c.update();c.save()}}else c.L&&
O1.C.xl.call(this,a,b);this.scope.$emit("search")}}};Cc(VF,{name:{order:-60,width:200},description:{order:-55}});var P1="name description BEARING LAT LON LAT_DDM LON_DDM LAT_DMS LON_DMS MGRS SEMI_MAJOR SEMI_MINOR SEMI_MAJ_UNITS SEMI_MINOR_UNITS ORIENTATION centerShape shape labels labelColor labelSize".split(" ");function Q1(a,b){y.call(this);this.Ba=null;this.lb=!1;this.state="ready";this.title="Add/Remove KML Node";this.node=a;this.parent=b}w(Q1,y);Q1.prototype.J=function(){Q1.C.J.call(this);if(this.node){var a=this.node.getParent();a&&!a.Xa()||Ma(this.node);this.node=null}};
function jwa(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.node?a.node.Xa()?(a.state="error",a.Ba="Node has been disposed.",!1):a.parent?a.parent.Xa()?(a.state="error",a.Ba="Parent node has been disposed.",!1):!0:(a.state="error",a.Ba="Parent node has not been provided.",!1):(a.state="error",a.Ba="Node has not been provided.",!1)}
Q1.prototype.add=function(){if(this.node&&this.parent){var a=this.parent.O();if(a)R1(a,[this.node],!0);else return this.state="error",this.Ba="Node source is not available.",!1;this.parent.R(this.node);return!0}this.state="error";this.Ba="Node/parent are not available.";return!1};
Q1.prototype.remove=function(){if(this.node&&this.parent){this.parent.removeChild(this.node);var a=this.node.O();if(a)S1(a,this.node,!1);else return this.state="error",this.Ba="Node source is not available.",!1;return!0}this.state="error";this.Ba="Node/parent are not available.";return!1};function T1(a,b){Q1.call(this,a,b);this.title="Add KML Node";if(a=a.ba())this.title+=' "'+a+'"'}w(T1,Q1);T1.prototype.Fa=function(){return jwa(this)&&(this.state="executing",this.add())?(this.state="success",!0):!1};T1.prototype.Cb=function(){this.state="reverting";return this.remove()?(this.state="ready",!0):!1};var kwa={Circle:'<i class="fa fa-circle-o fa-fw compact" title="Circle Geometry"></i>',GeometryCollection:'<i class="fa fa-picture-o fa-fw compact" title="Geometry Collection"></i>',LineString:'<i class="fa fa-share-alt fa-fw compact" title="Line String Geometry"></i>',LinearRing:'<i class="fa fa-square-o fa-fw compact" title="Linear Ring Geometry"></i>',MultiPoint:'<i class="fa fa-th fa-fw compact" title="Multi Point Geometry"></i>',MultiLineString:'<i class="fa fa-slack fa-fw compact" title="Multi Line String Geometry"></i>',
MultiPolygon:'<i class="fa fa-bullseye fa-fw compact" title="Multi Polygon Geometry"></i>',Point:'<i class="fa fa-circle fa-fw compact" title="Point Geometry"></i>',Polygon:'<i class="fa fa-star-o fa-fw compact" title="Polygon Geometry"></i>'};function U1(a){Q1.call(this,a,a.getParent());this.title="Remove KML Node";if(a=a.ba())this.title+=' "'+a+'"'}w(U1,Q1);U1.prototype.Fa=function(){return jwa(this)&&(this.state="executing",this.remove())?(this.state="success",!0):!1};U1.prototype.Cb=function(){this.state="reverting";return this.add()?(this.state="ready",!0):!1};W.directive("kmlnodeui",[function(){return{restrict:"E",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canAddChildren()" ng-click="nodeUi.addFolder()"><i class="fa fa-folder fa-fw c-glyph" title="Create a new folder"></i></span><span ng-if="nodeUi.canAddChildren()" ng-click="nodeUi.addPlace()"><i class="fa fa-map-marker fa-fw c-glyph" title="Create a new place"></i></span><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit the {{nodeUi.isFolder() ? \'folder\' : \'place\'}}"></i></span><span ng-if="nodeUi.canRemove()" ng-click="nodeUi.tryRemove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the {{nodeUi.isFolder() ? \'folder\' : \'place\'}}"></i></span></span>',
controller:V1,controllerAs:"nodeUi"}}]);function V1(a,b){eF.call(this,a,b)}w(V1,eF);V1.$inject=["$scope","$element"];V1.prototype.Tc=function(){var a=this.scope.item;return null!=a&&a.Tc()};V1.prototype.isFolder=V1.prototype.Tc;V1.prototype.Ef=function(){var a=this.scope.item;a&&W1({parent:a})};V1.prototype.addFolder=V1.prototype.Ef;V1.prototype.uj=function(){var a=this.scope.item;a&&X1({parent:a})};V1.prototype.addPlace=V1.prototype.uj;
V1.prototype.gh=function(){var a=this.scope.item;return null!=a&&a.gh};V1.prototype.canAddChildren=V1.prototype.gh;V1.prototype.hh=function(){var a=this.scope.item;return null!=a&&a.P};V1.prototype.canEdit=V1.prototype.hh;V1.prototype.ol=function(){var a=this.scope.item;return null!=a&&a.U};V1.prototype.canRemove=V1.prototype.ol;
V1.prototype.Vk=function(){var a=this.scope.item;if(a)if(a.Ke()){var b=a.ba(),c="Are you sure you want to remove <strong>"+b+"</strong> from the tree? This will also remove all descendants.";cK({confirm:this.g.bind(this,a),prompt:c,windowOptions:{icon:"fa fa-trash-o",label:"Remove "+b}})}else this.g(a)};V1.prototype.tryRemove=V1.prototype.Vk;V1.prototype.g=function(a){a=new U1(a);gF(EF,a)};V1.prototype.Pc=function(){var a=this.scope.item;a&&(a.Tc()?W1({node:a}):X1({feature:a.getFeature(),node:a}))};
V1.prototype.edit=V1.prototype.Pc;function Y1(){jz.call(this);this.j="<kmlnodeui></kmlnodeui>";this.qf=!1;this.Ga("on");this.log=lwa;this.Ia=this.hb=this.U=this.P=this.gh=!1;this.g=this.B=this.wa=null;this.jb=!1;this.source=null;this.ra=!0;this.G={}}w(Y1,jz);var lwa=E.V("plugin.file.kml.ui.KMLNode"),mwa=["children","state","collapsed"];g=Y1.prototype;g.J=function(){Y1.C.J.call(this);this.source=this.wa=this.g=null};g.yt=function(a,b){return a.Tc()||"sibling"==b};g.getFeature=function(){return this.g};
g.zf=function(a){this.g&&xh(this.g,"propertychange",this.Qy,this);(this.g=a)&&I(this.g,"propertychange",this.Qy,this);this.dispatchEvent(new U("icons"));this.dispatchEvent(new U("label"))};g.Qy=function(a){a instanceof U&&"loading"===a.l&&this.Va(!!a.o)};function Z1(a,b){if(a.g)return!0;a=a.na();return!!a&&a.some(function(a){return(b||"off"!=a.getState())&&Z1(a,b)})}
g.Oa=function(a){if(this.g)return[this.g];var b=[],c=this.na();if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];("off"!=f.getState()||a)&&(f=f.Oa(a))&&(b=b.concat(f))}return b};g.Ua=function(){return this.wa};g.setImage=function(a){this.wa&&xh(this.wa,"propertychange",this.kw,this);if(this.wa=a)I(this.wa,"propertychange",this.kw,this),this.Ga(this.wa.bd()?"on":"off")};g.kw=function(a){a instanceof U&&"visible"===a.l&&this.Ga(a.o?"on":"off")};
function nwa(a,b){if(a.wa)return[a.wa];var c=[];if(a=a.na())for(var d=0,e=a.length;d<e;d++){var f=a[d];("off"!=f.getState()||b)&&(f=nwa(f,b))&&(c=c.concat(f))}return c}g.Sj=function(a){if(this.B)return[this.B];var b=[],c=this.na();if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];("off"!=f.getState()||a)&&(f=f.Sj(a))&&(b=b.concat(f))}return b};
g.aa=function(){var a=null;if(this.wa){var b=this.wa.O();b instanceof $1&&(a=b.wa.aa())}else if((b=this.Oa())&&b.length){a=Th();for(var c=0,d=b.length;c<d;c++){var e=b[c].X();null!=e&&ci(a,e.aa())}}return a};g.D=function(){var a;return this.g&&(a=this.g.D())?a.toString():this.wa&&(a=this.wa.D())?a:this.B?this.B:Y1.C.D.call(this)};g.mb=function(){return this.hb};Y1.prototype.isLoading=Y1.prototype.mb;g=Y1.prototype;g.Va=function(a){this.hb!=a&&(this.hb=a,this.dispatchEvent(new U("loading",a,!a)))};
g.je=function(){return this.ba()||""};g.O=function(){return this.source};g.getTags=function(){return null};g.index=function(a){var b=a.ba()||"";a instanceof Y1&&(b in this.G||(this.G[b]=[]),this.G[b].push(a))};g.kA=function(a){var b=a.ba()||"";if(b in this.G){var c=this.G[b];a=c.indexOf(a);-1<a&&c.splice(a,1);0===c.length&&delete this.G[b]}};g.mp=function(a){var b=a.ba()||"";return b in this.G?-1!==this.G[b].indexOf(a):!1};
g.R=function(a,b,c){if(a instanceof Y1){var d=this.merge(a);return d?d:Y1.C.R.call(this,a,b,c)}E.error(this.log,'Unable to add non-KML node "'+a.ba()+'" to the KML tree!');return null};g.merge=function(a){var b=this.G[a.ba()||""];if(b)for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e.Ia)return e.zf(a.getFeature()),e.Ia=!1,e.ga(a.D()),e}return null};g.Tc=function(){return null==this.g&&null==this.wa&&null==this.B};
g.Hc=function(){if(this.Tc())return'<i class="fa fa-folder'+(this.Ke()&&!this.collapsed?"-open":"")+' fa-fw"></i>';if(this.wa)return'<i class="fa fa-photo fa-fw compact" title="Ground Overlay"></i>';if(this.B)return'<i class="fa fa-photo fa-fw compact" title="Screen Overlay"></i>';var a='<i class="fa fa-info-circle fa-fw compact gold-icon pointer" title="Feature Info" ng-click="itemAction(\'featureInfo\')"></i>',b=this.g.X();if(b&&(b=b.T(),b in kwa)){b=kwa[b];var c=OB(this.g);c&&(b=b.replace("><",
' style="color:'+xv(c)+'"><'));a=b+a}return a};g.yy=function(a){"featureInfo"==a&&this.g&&(a=this.source?this.source.S():void 0,KI(this.g,a))};g.uf=function(a){var b=a.l;this.source&&this.source.mb()&&b&&-1==mwa.indexOf(b)||(Y1.C.uf.call(this,a),"collapsed"==b?this.dispatchEvent(new U(b)):"loading"===b&&this.dispatchEvent(new U(b,a.o,a.s)))};g.ej=function(){this.g&&this.source&&(this.jb=!0,this.source.Fi(this.g)||sN(this.source,[this.g]))};
g.Jh=function(){this.g&&this.source&&(this.jb=!1,sN(this.source,null))};g.Bb=function(a){this.source=a};g.Ga=function(a){var b=this.getState();Y1.C.Ga.call(this,a);a=this.getState();this.B?(b=JE(this.B))&&"on"===a&&b():b!=a&&this.ra&&this.source&&"both"!==a&&(this.source.AA.start(),this.jb&&("on"===a?sN(this.source,[this.g]):sN(this.source,null)))};g.nA=function(a,b){a.ra=!1;a.Ga(b);a.ra=!0};
function owa(a){var b=a.na();if(b&&0<b.length){a=0;for(var c=b.length;a<c;a++)owa(b[a])}else a.collapsed=!0};function W1(a){var b=a.node,c=b?b.ba():"New Folder";b=(b?"Edit":"Add")+" Folder";a={confirm:Fa(pwa,a),defaultValue:c,prompt:"Please choose a label for the folder:",windowOptions:{icon:"fa fa-folder",label:b}};LL(a)}function pwa(a,b){a.name=b;a2(a)}function a2(a){var b=a.node;b||(b=new Y1,b.collapsed=!1,b.gh=!0,b.P=!0,b.L=!0,b.U=!0);b.Da(a.name||"Unnamed Folder");a.parent&&(a=qwa(a.parent),a=new T1(b,a),gF(EF,a));return b}
function X1(a){FE({id:"placemarkEdit",label:(a.feature?"Edit":"Add")+" Place",icon:"fa fa-map-marker",x:"center",y:"center",width:700,"min-width":400,"max-width":2E3,height:"auto","min-height":300,"max-height":2E3,modal:!1,"show-close":!0},"<placemarkedit></placemarkedit>",void 0,void 0,void 0,{options:a})}
function b2(a){var b=a.node;b||(b=new Y1,b.gh=!1,b.P=!0,b.L=!0,b.U=!0);var c=a.feature||null;b.zf(c);c&&(b.Da(c.get("name")||"Unnamed Place"),WB(c),c.ia());a.parent&&(a=qwa(a.parent),a=new T1(b,a),gF(EF,a));return b}function qwa(a){var b=a,c=a.O();c&&(c=c.P)&&c!=a.Ha()&&(b=c);return b}function c2(a){return(a=(a=a.W())?a.O():null)?a.P:null};W.directive("anydate",[function(){return{restrict:"E",replace:!0,scope:{initialStart:"=initialstart",initialEnd:"=initialend",initialType:"=initialtype",disabled:"=?",help:"=?"},templateUrl:"v1542394219/views/datetime/anydate.html",controller:d2,controllerAs:"anydate"}}]);
function d2(a){this.v=a;this.dateType=a.initialType||"instant";this.timesValid=!0;this.startDate=a.initialStart||null;this.endDate=a.initialEnd||null;this.startUnknown="range"==this.dateType&&!this.startDate;this.endUnknown="range"==this.dateType&&!this.endDate;this.help=this.v.help;a.$watch("anydate.dateType",function(a,c){a!=c&&(this.endUnknown=this.startUnknown=!1,e2(this),f2(this))}.bind(this));a.$watch("anydate.startUnknown",function(a,c){a!=c&&(a&&(this.endUnknown=!1),e2(this),f2(this))}.bind(this));
a.$watch("anydate.endUnknown",function(a,c){a!=c&&(a&&(this.startUnknown=!1),e2(this),f2(this))}.bind(this));a.$watch("anydate.startDate",function(b,c){b!=c&&(a.anyDateForm.startDate&&(c=a.anyDateForm.startDate,c.$setViewValue(b),c.$setDirty()),e2(this),f2(this))}.bind(this));a.$watch("anydate.endDate",function(b,c){b!=c&&(a.anyDateForm.endDate&&(c=a.anyDateForm.endDate,c.$setViewValue(b),c.$setDirty()),e2(this),f2(this))}.bind(this));a.$on("resetForm",function(){this.dateType="notime";this.endDate=
this.startDate=null;this.endUnknown=this.startUnknown=!1}.bind(this));e2(this);a.$on("$destroy",this.g.bind(this))}d2.$inject=["$scope","$element","$compile","$timeout"];d2.prototype.g=function(){this.v=null};
function f2(a){switch(a.dateType){case "notime":a.v.$emit("anydate:change",null,null,null);break;case "instant":a.v.$emit("anydate:change",a.startDate,null,null);break;case "range":if(null!=a.startDate&&null==a.endDate&&!a.startUnknown&&!a.endUnknown){var b=a.startDate.split("T");b=b[0]+"T23:59:59Z";a.endDate=b}a.v.$emit("anydate:change",null,a.startUnknown?null:a.startDate,a.endUnknown?null:a.endDate);break;default:a.v.$emit("anydate:change",null,null,null)}}
function e2(a){if("range"==a.dateType&&a.startDate&&a.endDate&&!a.startUnknown&&!a.endUnknown){var b=(new Date(a.startDate)).getTime();a.timesValid=(new Date(a.endDate)).getTime()>b?!0:void 0}else a.timesValid=!0};W.directive("simplemde",[function(){return{restrict:"E",replace:!0,scope:{text:"=",edit:"=",maxlength:"=",isRequired:"=",basictoolbar:"=?",toolbar:"=?"},templateUrl:"v1542394219/views/text/simplemde.html",controller:g2}}]);function rwa(a){if(a){var b=$(a).scope(),c="";b&&(c=b.text?b.text.length:0,b.maxlength&&(c+=" / "+b.maxlength));b=Wf(c);a.innerHTML=Vf(b)}}
var swa=[{className:"count",defaultValue:rwa,onUpdate:rwa}],twa="bold italic strikethrough heading-smaller heading-bigger | code quote unordered-list ordered-list | link image horizontal-rule table | preview side-by-side fullscreen".split(" "),uwa="bold italic strikethrough heading-smaller heading-bigger | code quote unordered-list ordered-list | preview".split(" ");
function g2(a,b,c){this.v=a;this.K=b;this.Ma=c;this.v.id=$b();this.g=null;this.j=a.toolbar||twa;this.v.basictoolbar&&(this.j=uwa);a.text=a.text||"";a.$watch("edit",t(function(){c(this.qn.bind(this),100)},this));a.$on("$destroy",this.XK.bind(this));this.v&&this.Ma(this.init.bind(this))}g2.$inject=["$scope","$element","$timeout"];g=g2.prototype;g.XK=function(){this.v=this.K=this.Ma=this.g=null};g.eC=function(a){return Vy(this.parent.markdown(a))};
function vwa(a){var b=a.j;return{autoDownloadFontAwesome:!1,autofocus:!1,autosave:{enabled:!1},element:a.K.find(".js-simplemde__textarea")[0],initialValue:a.v.text,spellChecker:!1,toolbar:b,status:swa,previewRender:a.eC}}
g.init=function(){this.K&&(this.g=new SimpleMDE(vwa(this)),this.v.previewText=h2(this.v.text),this.v.$watch("text",t(function(a){a!=this.g.value()&&(this.g.value(a),X(this.v),this.Ma(this.qn.bind(this),1E3),this.Ma(this.qn.bind(this),2E3));this.v.previewText=h2(this.v.text)},this)),this.g.codemirror.on("change",this.WK.bind(this)),this.g.codemirror.on("refresh",this.kJ.bind(this)),this.Ma(this.qn.bind(this),5E3))};g.qn=function(){this.g&&this.g.codemirror.setSize()};
g.WK=function(){this.v&&this.v.simplemdeform&&this.v.simplemdeform.$setDirty();this.v.text=this.g.value();X(this.v)};g.kJ=function(){for(var a=this.K;a&&a.length;)if(a.hasClass("modal")){this.g.isFullscreenActive()?a.addClass("c-simplemde__fullscreen"):a.removeClass("c-simplemde__fullscreen");break}else a=a.parent()};function h2(a){if(a){var b=a;(a=SimpleMDE.prototype.markdown.call({},a))?(a=$f("div",void 0,a),a=vg(a)):a=null;a&&(b=zl(a,!1));return Vy(b)}return""};function wwa(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/windows/featureedit.html",controller:i2,controllerAs:"ctrl"}}W.directive("featureedit",[wwa]);
function i2(a,b,c){y.call(this);this.scope=a;this.element=b;this.l=this.A=this.o=null;b=Ca(this);this.scope.featureControlsID="featureControls"+b;this.scope.featureLabelsID="featureLabels"+b;this.scope.featureStyleID="featureStyle"+b;this.s=null;this.help={semiMajor:"Semi-major axis of the ellipse in the specified units.",semiMinor:"Semi-minor axis of the ellipse in the specified units.",orientation:"Orientation of the ellipse in degrees from north between 0\u00b0 and 360\u00b0. Values outside this range will be adjusted automatically.",
iconRotation:"Rotation of the icon in degrees from north between 0\u00b0 and 360\u00b0. Values outside this range will be adjusted automatically."};this.color="rgba(255,255,255,1)";this.opacity=1;this.size=3;this.icon={path:xM().path};this.centerIcon={path:xM().path};this.iconSet=zM;this.iconSrc=yM;this.pointGeometry=null;this.dateType="notime";this.endTime=this.startTime=void 0;this.name=this.description="";this.shapes="None;Point;Square;Triangle;Icon;Ellipse;Ellipse with Center".split(";");this.shape=
"Point";this.centerShapes=["Point","Square","Triangle","Icon"];this.centerShape="Point";this.semiMajor=void 0;this.semiMajorUnits="nmi";this.semiMinor=void 0;this.semiMinorUnits="nmi";this.iconRotation=this.orientation=void 0;this.units=["nmi","mi","km","m"];this.altitude=0;this.altUnits="m";this.altUnitOptions=mc(pB);this.labelColor="rgba(255,255,255,1)";this.labelSize=14;this.labelColumns=xwa.filter(function(a){return!KB(a)}).map(function(a){return new FF(a)});this.labels=[];this.showLabels=!0;
this.timeHelp={title:"Time Selection",content:"Add a time to enable interaction with the Timeline. If 'No Time' is selected, the Place will always be visible",VR:"right"};this.j=a.options||{};this.timeEditEnabled=void 0!==this.j.timeEditEnabled?this.j.timeEditEnabled:!0;this.callback=this.j.callback;this.B=this.g=null;if(b=this.j.feature){var d=MB(b);d&&(this.labelColumns=d.getColumns().filter(function(a){return!KB(a.field)}),this.timeEditEnabled=d.Ap());this.l=b;if(this.g=b.Vb())delete this.g._selectStyle,
delete this.g._highlightStyle,delete this.g._labelStyle,(d=this.g._style)&&(this.g._style=Gs(d)),this.g.labelColor||(this.g.labelColor=void 0),this.g.labelSize||(this.g.labelSize=void 0);ywa(this,b);0==this.labels.length&&this.labels.push(tH())}else{this.l=new ek;this.l.ga("features#temporary");this.l.set("_node",!1);if(b=this.j.name)this.l.set(j2,b,!0),this.name=b;(b=this.j.geometry)?b instanceof Jk?(b=b.clone().toLonLat(),(b=vk(b))&&(this.pointGeometry={lat:b[1],lon:b[0]})):this.B=b:this.pointGeometry=
{lat:NaN,lon:NaN,alt:NaN};this.labels.push(zc(zwa))}this.pointGeometry&&(a.$watch("ctrl.pointGeometry.lat",this.wb.bind(this)),a.$watch("ctrl.pointGeometry.lon",this.wb.bind(this)));a.$watch("ctrl.description",this.wb.bind(this));a.$watch("ctrl.color",this.iw.bind(this));a.$watch("ctrl.opacity",this.wb.bind(this));a.$watch("ctrl.size",this.wb.bind(this));a.$watch("ctrl.shape",this.wb.bind(this));a.$watch("ctrl.centerShape",this.wb.bind(this));a.$watch("ctrl.labelColor",this.wb.bind(this));a.$watch("ctrl.labelSize",
this.wb.bind(this));a.$watch("ctrl.showLabels",this.wb.bind(this));a.$on("icon:change",this.Wf.bind(this));a.$on("labelColor.reset",this.I.bind(this));a.$on("position:mapEnabled",this.N.bind(this));a.$on("labelcontrols:columnChange",this.Qi.bind(this));a.$on("anydate:change",function(a,b,c,d){a.stopPropagation();c||d?(this.dateType="range",this.startTime=(new Date(c)).getTime(),this.endTime=(new Date(d)).getTime()):(b?(this.dateType="instant",this.startTime=(new Date(b)).getTime()):(this.dateType=
"notime",this.startTime=void 0),this.endTime=void 0);this.wb()}.bind(this));a.$on("$destroy",this.dispose.bind(this));c(function(){a.$emit("window.ready")},150)}w(i2,y);i2.$inject=["$scope","$element","$timeout"];var zwa={column:"name",showColumn:!1},j2="name",xwa=[j2,"description","BEARING","LAT","LON","ALTITUDE","ALTITUDE_UNITS","LAT_DDM","LON_DDM","LAT_DMS","LON_DMS","MGRS","SEMI_MAJOR","SEMI_MINOR","SEMI_MAJ_UNITS","SEMI_MINOR_UNITS","ORIENTATION","shape","centerShape","labels","labelColor","labelSize"];
i2.prototype.J=function(){i2.C.J.call(this);Ma(this.s);this.s=null;this.o&&(rh(this.o),this.o=null);this.A&&(this.A(),this.A=null);this.l&&("features#temporary"==this.l.D()&&T.u().Fb(this.l,!0),this.l=null);this.element=this.scope=null};i2.prototype.accept=function(){var a=this.j.feature=this.j.feature||new ek;a.Ue("_node",!0);this.labels&&(this.labels=this.labels.filter(function(a){return null!=a.column}));k2(this,a);a.D()||a.ga(H(a));this.callback&&this.callback(this.j);this.close()};
i2.prototype.accept=i2.prototype.accept;i2.prototype.cancel=function(){var a=this.j.feature;if(a&&this.g){a.qc(this.g);jH(a);var b=LB(a);b&&CH(b,[a])}C.dispatchEvent("spatial:restoreFeature");this.close()};i2.prototype.cancel=i2.prototype.cancel;i2.prototype.close=function(){KE(this.element)};i2.prototype.G=function(a){switch(a.keyCode){case 27:this.scope&&this.scope.$broadcast("position:mapEnabled",!1,"pointGeometry")}};i2.prototype.Ru=function(){return QG.test(this.shape)};
i2.prototype.isEllipse=i2.prototype.Ru;i2.prototype.ws=function(){return"Icon"===this.shape};i2.prototype.showIcon=i2.prototype.ws;i2.prototype.Dn=function(){return TG[this.shape]&&"Icon"===this.centerShape};i2.prototype.showCenterIcon=i2.prototype.Dn;i2.prototype.dm=function(){return this.j.feature instanceof ZB};i2.prototype.isFeatureDynamic=i2.prototype.dm;
i2.prototype.N=function(a,b){a.targetScope!==this.scope&&(a.stopPropagation(),b?(this.o||(a=T.u().Y(),this.o=I(a,"singleclick",this.L,this)),this.A=JE(),this.s||(this.s=new Lg(document),this.s.H("key",this.G,!1,this))):(Ma(this.s),this.s=null,this.o&&(rh(this.o),this.o=null),this.A&&(this.A(),this.A=null)))};i2.prototype.L=function(a){"singleclick"==a.type&&a.coordinate&&1<a.coordinate.length&&(a=Ui(a.coordinate,N,"EPSG:4326"),this.scope.$broadcast("position:mapClick",a,!0),this.wb());return!1};
i2.prototype.wb=function(){if(this.l)if(k2(this,this.l),"features#temporary"==this.l.D()){var a=T.u();a.Fb(this.l,!1);a.ac(this.l)}else(a=LB(this.l))&&CH(a,[this.l])};i2.prototype.updatePreview=i2.prototype.wb;
function ywa(a,b){a.name=b.get(j2);a.description=b.get("_mdDescription")||b.get("description");var c=b.get("recordTime");c?(a.startTime=c.Pa(),a.startTimeISO=a.startTime?(new Date(a.startTime)).toISOString():void 0,a.endTime=c.Ya()===a.startTime?void 0:c.Ya(),a.endTimeISO=a.endTime?(new Date(a.endTime)).toISOString():void 0,a.dateType=a.endTime>a.startTime?"range":"instant"):a.dateType="notime";c=b.get("shape");-1<a.shapes.indexOf(c)&&(a.shape=c);c=b.get("centerShape");-1<a.centerShapes.indexOf(c)&&
(a.centerShape=c);c=b.get("_style");var d;if(c){q(c)?((d=ib(c,EH))&&(a.labels=d.labels),c=c[0]):c.labels&&(a.labels=c.labels);(d=fH(c))&&(a.size=d);if(d=QB(c))a.color=xv(d),a.labelColor=a.color;if(c=bH(c))a.icon=c,a.centerIcon=c}c=b.get("labelColor");if(null!=c&&(a.labelColor=c,"None"===a.shape)){var e=yv(c);e&&(a.opacity=e[3])}(d="None"===a.shape?c:d)&&(e=yv(d))&&(a.opacity=e[3]);a.labelSize=l2(b,"labelSize",14);d=b.get("showLabels");null!=d&&(a.showLabels=d);if(d=b.X())a.B=d,d instanceof Jk&&(d=
d.clone(),d.toLonLat(),(d=vk(d))&&2<=d.length&&(c=d[2]||0,e=b.get("ALTITUDE_UNITS")||"m",a.pointGeometry={lon:d[0],lat:d[1],alt:c},a.altitude=tB(c,e,"m"),a.altUnits=e),a.semiMajor=l2(b,"SEMI_MAJOR"),a.semiMinor=l2(b,"SEMI_MINOR"),a.semiMajorUnits=b.get("SEMI_MAJ_UNITS")||a.semiMajorUnits,a.semiMinorUnits=b.get("SEMI_MINOR_UNITS")||a.semiMinorUnits,a.orientation=l2(b,"ORIENTATION"));if(!a.dm()){b=b.get("BEARING");"string"!==typeof b||Lb(b)||(b=Number(b));if(null==b||isNaN(b))b=void 0;a.iconRotation=
b}a.wb()}function l2(a,b,c){c=c||void 0;a=Number(a.get(b));return null==a||isNaN(a)?c:a}
function k2(a,b){if(b){Awa(a,b);b.set(j2,a.name);b.set("description",h2(a.description));b.set("_mdDescription",a.description);switch(a.dateType){case "notime":b.set("recordTime",void 0);break;case "instant":b.set("recordTime",new Pv(a.startTime));break;case "range":b.set("recordTime",new Uv(a.startTime,a.endTime))}var c;a.g&&a.g._style?c=Gs(a.g._style):c=[Gs($B)];b.set("_style",c);b.set("shape",a.shape);b.set("centerShape",a.centerShape);a.dm()||!a.ws()&&!a.Dn()?(b.set("BEARING",void 0),b.set("showRotation",
!1),b.set("rotationColumn",void 0)):(b.set("BEARING","number"===typeof a.iconRotation?a.iconRotation%360:void 0),b.set("showRotation",!0),b.set("rotationColumn","BEARING"));Bwa(b);c instanceof Array?c.forEach(function(a){Cwa(this,a)},a):Cwa(a,c);a.showLabels?VB(b):UB(b);Dwa(b);m2(b);jH(b);C.dispatchEvent("spatial:updateFeature")}}
function Cwa(a,b){var c=Math.round(100*Je(a.opacity,0,1))/100,d=lj(a.color);d[3]=c;d=ZG(d);aH(b,d);gH(b,a.size);"None"===a.shape&&aC(b,0);var e=a.Dn();"Icon"!==a.shape&&!e||null==b.image||(b.image.color=d,b.image.scale=hH(a.size),cH(b,e?a.centerIcon:a.icon));d=lj(a.labelColor);d[3]=c;d=ZG(d);b.labels=a.labels;b.labelColor=d;b.labelSize=parseInt(a.labelSize,10)||14}
function Awa(a,b){if(a.pointGeometry){var c=Number(a.pointGeometry.lon),d=Number(a.pointGeometry.lat),e=a.altUnits||"m",f=tB(Number(a.altitude)||0,"m",e);b.set("ALTITUDE",f);b.set("ALTITUDE_UNITS",e);isNaN(c)||isNaN(d)||(c=new Jk([c,d,f]),iu(c),b.sb(c),HB(b,!0),a.Ru()&&null!=a.semiMajor&&null!=a.semiMinor&&null!=a.orientation?(b.set("SEMI_MAJOR",a.semiMajor),b.set("SEMI_MINOR",a.semiMinor),b.set("SEMI_MAJ_UNITS",a.semiMajorUnits),b.set("SEMI_MINOR_UNITS",a.semiMinorUnits),b.set("ORIENTATION",a.orientation%
360),DB(b,!0)):(b.set("SEMI_MAJOR",void 0),b.set("SEMI_MINOR",void 0),b.set("SEMI_MAJ_UNITS",void 0),b.set("SEMI_MINOR_UNITS",void 0),b.set("ORIENTATION",void 0),b.set("ellipse",void 0),b.set("lineOfBearing",void 0)),a.dm()||!a.ws()&&!a.Dn()||null==a.iconRotation?(b.set("BEARING",void 0),b.set("showRotation",!1),b.set("rotationColumn","")):(b.set("showRotation",!0),b.set("BEARING",a.iconRotation%360),b.set("rotationColumn","BEARING")))}else a.B&&b.sb(a.B.clone())}
i2.prototype.Qi=function(a){a.stopPropagation();this.wb()};i2.prototype.iw=function(a,b){a!=b&&this.labelColor==b&&(this.labelColor=a);this.wb()};i2.prototype.onIconColorChange=i2.prototype.iw;i2.prototype.Wf=function(a,b){a.stopPropagation();this.centerIcon=this.icon=b;this.wb()};i2.prototype.onIconChange=i2.prototype.Wf;i2.prototype.I=function(a){a.stopPropagation();this.labelColor=this.color;this.wb()};
i2.prototype.xD=function(){var a=1E-16;null!=this.semiMinor&&this.semiMinorUnits&&this.semiMajorUnits&&(a=tB(this.semiMinor,this.semiMajorUnits,this.semiMinorUnits));return a};i2.prototype.getSemiMajorMin=i2.prototype.xD;i2.prototype.gG=function(){1E-16===this.semiMinor&&(this.semiMinor=1);1E-16===this.semiMajor&&(this.semiMajor=1);this.wb()};i2.prototype.onAxisChange=i2.prototype.gG;
function Dwa(a){if(a){var b=a.get("_style");if(b=q(b)?b[0]:b){var c=b.labels;if(c){for(var d=[],e=[],f=0;f<c.length;f++)c[f].column&&(d.push(c[f].column),e.push(c[f].showColumn?"1":"0"));if(0<d.length){var h=d.join(",");var k=e.join(",")}}a.set("labels",h);a.set("showLabelColumns",k);a.set("labelColor",b.labelColor);a.set("labelSize",b.labelSize)}}}
function m2(a){if(a){var b=a.get("showLabels");"string"!=typeof b&&!0!==b||a.set("showLabels","true"==b||"1"==b);(b=a.get("_style"))&&(q(b)?b.forEach(function(b){Ewa(a,b)}):Ewa(a,b))}}function Ewa(a,b){if(a&&b){var c=a.get("labels"),d=a.get("showLabelColumns");if(c){var e=[];c=c.split(",");d=d?d.split(","):null;if(c)for(var f=0;f<c.length;f++)c[f]&&e.push({column:c[f],showColumn:d&&"1"==d[f]});b.labels=e}(e=a.get("labelColor"))&&(b.labelColor=e);(a=a.get("labelSize"))&&(b.labelSize=a)}}
function Bwa(a){if(a){var b=a.get("_style");if(b=q(b)?b[0]:b){var c=a.get("shape");if(null!=c){QG.test(c)?DB(a,!0):"ellipse"===b.geometry&&delete b.geometry;var d=OG[c];d&&d.config&&zs(d.config,b);d=a.get("centerShape");var e=TG[c];d&&e&&(d=OG[d])&&d.config&&zs(d.config,b);"Icon"!=c?(a=b.image,"icon"==a.type&&delete a.type,d=ZG(a.color||"rgba(255,255,255,1)"),e=a.scale?Math.round(3*a.scale):3,delete a.scale,a.radius=a.radius||e,a.fill=a.fill||{},a.fill.color=d,b.stroke=b.stroke||{},b.stroke.color=
d,b.stroke.width=b.stroke.width||e,"None"==c&&aC(b,0)):(c=a.get("BEARING"),isNaN(c)||(b.image.rotation=Le(c)))}}}};W.directive("placemarkedit",[function(){var a=wwa();a.controller=n2;return a}]);
function n2(a,b,c){i2.call(this,a,b,c);this.name||(this.name="New Place");this.labelColumns=P1.filter(function(a){return!KB(a)}).map(function(a){return new FF(a)});this.j=a.options||{};if(a=this.j.time)this.startTimeISO=(this.startTime=a.Pa())?(new Date(this.startTime)).toISOString():void 0,this.endTimeISO=(this.endTime=a.Ya()===this.startTime?void 0:a.Ya())?(new Date(this.endTime)).toISOString():void 0,this.dateType=this.endTime>this.startTime?"range":"instant"}w(n2,i2);
n2.$inject=["$scope","$element","$timeout"];n2.prototype.accept=function(){var a=this.j.feature=this.j.feature||new ek;this.labels&&(this.labels=this.labels.filter(function(a){return null!=a.column}));k2(this,a);a.D()||a.ga(H(a));b2(this.j);this.close()};n2.prototype.accept=n2.prototype.accept;W.directive("places",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/plugin/places/places.html",controller:o2,controllerAs:"places"}}]);function o2(a){y.call(this);this.v=a;var b=p2.u();(this.g=b.j)||b.s||b.Ra("loaded",this.j,!1,this);this.contextMenu=eZ;this.treeData=this.g?[this.g]:[];this.selected=null;a.$on("$destroy",this.dispose.bind(this))}w(o2,y);o2.$inject=["$scope"];
o2.prototype.J=function(){o2.C.J.call(this);p2.u().M("loaded",this.j,!1,this);this.v=this.g=null};o2.prototype.j=function(){if(this.g=p2.u().j)this.treeData=[this.g],X(this.v)};o2.prototype.GE=function(){return null!=this.g};o2.prototype.hasRoot=o2.prototype.GE;o2.prototype.Jf=function(){this.g?(q2(this.g),Q(R.u(),"places.export",1)):At(Ct,"Nothing to export.",ss)};o2.prototype["export"]=o2.prototype.Jf;o2.prototype.import=function(){p2.u();Q(R.u(),"places.import",1)};o2.prototype["import"]=o2.prototype.import;
o2.prototype.Ef=function(){for(var a=this.selected&&1==this.selected.length?this.selected[0]:this.g;a&&!a.Tc();)a=a.getParent();a&&W1({parent:a});Q(R.u(),"places.addFolder",1)};o2.prototype.addFolder=o2.prototype.Ef;o2.prototype.uj=function(){for(var a=this.selected&&1==this.selected.length?this.selected[0]:this.g;a&&!a.Tc();)a=a.getParent();a&&X1({parent:a});Q(R.u(),"places.addPlace",1)};o2.prototype.addPlace=o2.prototype.uj;
o2.prototype.CC=function(){var a=this.selected&&0<this.selected.length?this.selected[0]:this.g;a&&(a.zd(!1,!0),this.v.$broadcast(LH));Q(R.u(),"places.expandAll",1)};o2.prototype.expandAll=o2.prototype.CC;o2.prototype.jC=function(){var a=this.selected&&0<this.selected.length?this.selected[0]:this.g;a&&(a.zd(!0,!0),this.v.$broadcast(LH));Q(R.u(),"places.collapseAll",1)};o2.prototype.collapseAll=o2.prototype.jC;W.directive("layers",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/layers.html",controller:r2,controllerAs:"layers"}}]);W.directive("layerswin",[function(){return{restrict:"AE",replace:!0,scope:{tab:"@"},templateUrl:"v1542394219/views/windows/layers.html"}}]);
function r2(a,b){mY.call(this,a,b,200);this.title="layers";try{this.scope.contextMenu=eZ}catch(c){}this.scope.views=Fwa;this.l="Z-Order";this.g=new F1("layerTree",a);this.o={};mZ&&(this.o[".add-data-group"]=mZ);a=T.u();a.H("addLayer",this.search,!1,this);a.H("removeLayer",this.search,!1,this);O.H(XZ,this.search,!1,this);this.scope.showTiles=!0;this.scope.showFeatures=!0;this.scope.tilesBtnIcon="v1542394219/images/tiles-base.png";this.scope.featuresBtnIcon="v1542394219/images/features-base.png";this.init()}
w(r2,mY);r2.$inject=["$scope","$element"];var Gwa=[],Fwa={Favorites:new K1,INT:new N1(!0),"Recently Updated":new G1(!0),Source:new L1,Tag:new lY(!0),Type:new M1,"Z-Order":new E1};r2.prototype.destroy=function(){var a=T.u();a.M("addLayer",this.search,!1,this);a.M("removeLayer",this.search,!1,this);O.M(XZ,this.search,!1,this);r2.C.destroy.call(this)};r2.prototype.close=function(){KE(this.element)};r2.prototype.lq=function(){Q(R.u(),"addData.groupBy",1);this.search()};r2.prototype.onGroupByChanged=r2.prototype.lq;
r2.prototype.Qf=function(a){return a&&a instanceof HA?a.W().Nj()||"defaultlayerui":null};r2.prototype.getUi=r2.prototype.Qf;r2.prototype.Yj=function(a){return angular.element("#js-window__container").scope().mainCtrl[a]?!0:!!angular.element('div[label="'+a+'"].window').length};r2.prototype.isWindowActive=r2.prototype.Yj;
r2.prototype.Dh=function(a){var b=this.o[a];if(b){var c=this.element.find(a);c&&0<c.length&&(this.scope.menu=a,C.Ra(KF,this.A,!1,this),b.open(void 0,{my:"left top",at:"left bottom",of:c}))}};r2.prototype.openMenu=r2.prototype.Dh;r2.prototype.A=function(){this.scope.menu=null};r2.prototype.toggle=function(a){CX(a)||C.dispatchEvent(new jE("toggleUI",a))};r2.prototype.toggle=r2.prototype.toggle;
r2.prototype.zN=function(){this.scope.showTiles=!this.scope.showTiles;for(var a=pw($t),b=0;b<a.length;b++)if(!Gwa.some(function(c){return c(a[b])})){var c=a[b].T();c&&"VECTOR"!=c&&a[b].Bd(this.Sz())}};r2.prototype.toggleTileLayers=r2.prototype.zN;r2.prototype.Sz=function(){return this.scope.showTiles};r2.prototype.showTiles=r2.prototype.Sz;
r2.prototype.sN=function(){this.scope.showFeatures=!this.scope.showFeatures;for(var a=pw($t),b=0;b<a.length;b++){var c=a[b].T();if(c&&"VECTOR"==c&&!(a[b]instanceof kP))if(P(a[b],"os.layer.ICustomLayerVisible")){c=this.Sk();var d=a[b].O().P;d&&d.Ga(c?"on":"off")}else a[b].Bd(this.Sk())}};r2.prototype.toggleFeatureLayers=r2.prototype.sN;r2.prototype.Sk=function(){return this.scope.showFeatures};r2.prototype.showFeatures=r2.prototype.Sk;function Hwa(a){return a instanceof HN&&"Map Layers"==a.Qc()};W.directive("basemaplayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/plugin/basemap/basemaplayerui.html",controller:s2,controllerAs:"basemap"}}]);function s2(a,b,c){f0.call(this,a,b,c);a.$on("minZoom.spin",this.tq.bind(this));a.$on("minZoom.spinchange",this.tq.bind(this));a.$on("maxZoom.spin",this.sq.bind(this));a.$on("maxZoom.spinchange",this.sq.bind(this));this.mapMinZoom=2;this.mapMaxZoom=25;this.B=new le(this.wI,1E3,this)}w(s2,f0);
s2.$inject=["$scope","$element","$timeout"];g=s2.prototype;g.md=function(){s2.C.md.call(this);if(this.scope){var a=this.scope;a:{var b=this.scope.items;if(b)for(var c=0,d=b.length;c<d;c++)try{var e=b[c].W();if(e){var f=Math.round(Pz(T.u(),e.ge()));break a}}catch(l){}f=2}a.minZoom=f;a=this.scope;a:{if(f=this.scope.items)for(b=0,c=f.length;b<c;b++)try{var h=f[b].W();if(h){var k=Math.round(Pz(T.u(),h.he()));break a}}catch(l){}k=25}a.maxZoom=k}};
g.tq=function(a,b){if(a=this.scope.items){b=Nz(T.u(),b);for(var c=0,d=a.length;c<d;c++)try{a[c].W().kj(b),this.B.start()}catch(e){}}};g.sq=function(a,b){if(a=this.scope.items){b=Nz(T.u(),b);for(var c=0,d=a.length;c<d;c++)try{a[c].W().lj(b),this.B.start()}catch(e){}}};g.wI=function(){if(T.u().Qa()){var a=this.scope.items;if(a)for(var b=0,c=a.length;b<c;b++){var d=a[b].W();d&&d.O()&&d.O().refresh()}}};
g.Ad=function(a){var b=T.u(),c;if(b.Qa()){var d=Yu(b);d&&(c=d.wj(d.Qg(),0))}else c=M(b.Y()).ab();null!=c&&(this.scope[a]=Math.floor(Pz(b,c)),"minZoom"==a?this.tq(null,this.scope[a]):this.sq(null,this.scope[a]))};s2.prototype.setCurrent=s2.prototype.Ad;function jZ(a){HN.call(this,a);this.yf=va}w(jZ,HN);jZ.prototype.Nj=function(){return"basemaplayerui"};var Iwa=!1;jZ.prototype.Va=function(a){jZ.C.Va.call(this,a);this.getError()&&!Iwa&&(At(Ct,"One or more Map Layers are having issues reaching the remote server. Please try adding another Map Layer or [click here to add a working one|basemapAddFailover].",ss),Iwa=!0)};function t2(){US.call(this)}w(t2,US);t2.prototype.Ye=function(a){a=zc(a);a.layerClass=jZ;var b=a.baseType;return Hv(Ev.u(),b).Ye(a)};function u2(){SK.call(this);this.nl=!0;this.l=null;this.vb(["GEOINT"]);this.Sb("Map Layers");this.Oc="basemap"}w(u2,SK);g=u2.prototype;g.hs=function(a){this.l=a};g.td=function(){return'<img src="v1542394219/images/tiles-base.png" title="Tile layer"/>'};g.Pl=function(){return"Map Layer"};g.Sa=function(){var a=zc(this.l);a.id=this.D();a.provider=this.rb();a.animate=!1;a.title=this.S();a.layerType=this.T();a.tags=this.getTags();a.noClear=!0;return a};
g.rb=function(){return this.l&&"provider"in this.l?this.l.provider:u2.C.rb.call(this)};g.Xh=function(){this.Sa().projection===N.Tb&&!0===this.B&&this.setActive(this.B);this.B=void 0};g.sa=function(a){a||(a={});a.canDelete=this.nl;a.origConf=this.l;return u2.C.sa.call(this,a)};g.restore=function(a){u2.C.restore.call(this,a);this.l=a.origConf;this.nl=a.canDelete;!this.nl&&isNaN(this.sg)&&(this.sg=Ha()+864E5)};function v2(){vP.call(this);this.fb("Show terrain on the 3D globe.");this.Cc(null);this.vb(["GEOINT","Terrain","Elevation"]);this.Ta("Terrain");this.Sb(null);this.Oc="terrain";this.l=!1;O.H("os.map.enableTerrain",this.Hy,!1,this)}w(v2,vP);g=v2.prototype;g.J=function(){v2.C.J.call(this);O.M("os.map.enableTerrain",this.Hy,!1,this)};g.td=function(){return'<i class="fa fa-area-chart" title="This layer provides terrain in 3D mode"></i>'};
g.eg=function(){this.l=!0;O.set("os.map.enableTerrain",this.isActive());this.l=!1;return v2.C.eg.call(this)};g.restore=function(a){v2.C.restore.call(this,a);this.B=O.get("os.map.enableTerrain",!1);this.Xh()};g.Hy=function(a){this.l||a.j===this.isActive()||this.setActive(a.j)};function w2(){SI.call(this);this.ga("basemap");this.g=this.l=null;this.o={};this.jm=!1;EP.u().H("load",this.dJ,!1,this);C.H("map:terrainDisabled",this.Mw,!1,this);C.H("basemapAddFailover",this.dt,!1,this)}w(w2,lU);g=w2.prototype;g.J=function(){w2.C.J.call(this);C.M("map:terrainDisabled",this.Mw,!1,this);C.M("basemapAddFailover",this.dt,!1,this)};
g.bc=function(a){this.Da("Map Layers");if(this.l=a.defaults)this.g=this.l[N.Tb];var b=a.failSet;b&&(this.o=b);b=V;for(var c=["maps","userMaps"],d=0,e=c.length;d<e;d++){var f=a[c[d]],h;for(h in f){var k=f[h];if(k){var l=k.type?k.type.toLowerCase():null;if("terrain"==l)l=k.options,k=k.baseType,l&&k&&(l.type=k,O.set("os.map.terrainOptions",l)),k=this.D()+"#terrain",l=b.Ja(k),l||(l=new v2,l.ga(k),bJ(b,l));else if("basemap"==l){var m=this.D()+"#"+h;l=b.Ja(m);l||(l=new u2,l.ga(m),l.Cc(this.ba()),bJ(b,l));
l.hs(k);l.nl=0<d;l.Ta(k.title);l.fb(k.description);l.sg=NaN;l.Xh()}}}}};g.load=function(){this.dispatchEvent(new QI("dataProviderLoading",this));var a=!1;if(!this.na())for(var b=pE(V,this.D()+"#"),c=0,d=b.length;c<d;c++){var e=b[c];mU(this,e,!1,!1);"basemap"==e.Oc&&e.isActive()&&(a=!0)}if(!a&&V&&this.g&&0<this.g.length)for(c=0,d=this.g.length;c<d;c++)(a=V.Ja(this.D()+"#"+this.g[c]))&&a.setActive(!0);this.dispatchEvent(new QI("dataProviderLoaded",this))};
g.dt=function(){var a=this.o[N.Tb];if(a)for(var b=V,c=this.D()+"#",d=0,e=a.length;d<e;d++){var f=b.Ja(c+a[d]);f&&f.setActive(!0)}};g.dJ=function(a){for(var b=pw(T.u()),c=a.layers,d=0,e={},f=0,h=c.remove.length;f<h;f++)e[c.remove[f].id]=!0;f=0;for(h=c.add.length;f<h;f++)"basemap"===c.add[f].type.toLowerCase()&&d++;f=0;for(h=b.length;f<h;f++){var k=b[f];!(k.D()in e)&&k instanceof jZ&&d++}if(!d&&(f=a.target.g)&&(a=this.l[f.Tb]))for(b=V,f=0,h=a.length;f<h;f++)(d=b.Ja(this.D()+"#"+a[f]))&&c.add.push(d.Sa())};
g.Mw=function(){var a=V.Ja(this.D()+"#terrain");a&&(qE(V,a),Qoa(this,a),Ma(a))};function fla(a){lP.call(this,a);this.l=-1E3;this.j=Hwa;this.Zd("Map Layers")}w(fla,lP);function x2(){cX.call(this);this.description="Saves the current map layers";this.enabled=!1;this.j={type:"map"};this.title="Map Layers"}w(x2,cX);E.V("plugin.basemap.v3.BaseMapState");x2.prototype.isValid=function(a){try{return a instanceof jZ&&null!=a.Sa()}catch(b){}return!1};x2.prototype.Vq=function(a,b,c,d){(b=x2.C.Vq.call(this,a,b,c,d))&&XA(b,{type:a.Sa().baseType||"wms"});return b};
x2.prototype.Id=function(a,b,c){switch(a){case "minResolution":a=Math.round(Pz(T.u(),b)-1);Z("maxZoom",c,a);break;case "maxResolution":a=Math.round(Pz(T.u(),b)-1);Z("minZoom",c,a);break;case "minZoom":case "maxZoom":break;default:x2.C.Id.call(this,a,b,c)}};
x2.prototype.Wq=function(a){a=x2.C.Wq.call(this,a);a.baseType=a.type.toUpperCase();a.layerType="Map Layers";a.type="basemap";a.id=a.id.replace("#","-");"string"==typeof a.url&&(a.crossOrigin=sx(a.url));"number"===typeof a.minZoom&&(a.minZoom+=1);"number"===typeof a.maxZoom&&(a.maxZoom+=1);return a};function y2(){eX.call(this);this.description="Saves the current map layers";this.enabled=!1;this.g="mapLayers";this.j={type:"map"};this.title="Map Layers"}w(y2,hX);E.V("plugin.basemap.v4.BaseMapState");y2.prototype.isValid=function(a){try{return a instanceof jZ&&null!=a.Sa()}catch(b){}return!1};y2.prototype.Xq=function(a,b,c,d){(b=y2.C.Xq.call(this,a,b,c,d))&&XA(b,{type:a.Sa().baseType||"wms"});return b};
y2.prototype.Jd=function(a,b,c){switch(a){case "minResolution":a=Math.round(Pz(T.u(),b)-1);Z("maxZoom",c,a);break;case "maxResolution":a=Math.round(Pz(T.u(),b)-1);Z("minZoom",c,a);break;case "minZoom":case "maxZoom":break;default:y2.C.Jd.call(this,a,b,c)}};
y2.prototype.Yq=function(a){a=y2.C.Yq.call(this,a);a.baseType=a.type.toUpperCase();a.layerType="Map Layers";a.type="basemap";a.id=a.id.replace("#","-");"string"==typeof a.url&&(a.crossOrigin=sx(a.url));"number"===typeof a.minZoom&&(a.minZoom+=1);"number"===typeof a.maxZoom&&(a.maxZoom+=1);return a};function z2(){y_.call(this);this.id="basemap"}w(z2,y_);z2.prototype.init=function(){var a=V;ZI(a,new RI(this.id,w2,"Map Layers","Map layers provide background imagery. They often include streets, borders, or other reference information."));$I(a,this.id,u2);$I(a,"terrain",v2);ela();Iv(Ev.u(),"basemap",t2);a=fX.u();EU(a,"v3",x2);EU(a,"v4",y2);Gwa.push(Hwa)};function A2(a,b){z.call(this,a);this.data=b}w(A2,z);Ia("os.job.JobCommand",{START:0,STOP:1,PAUSE:2});Ia("os.job.JobState",{IDLE:0,EXECUTING:1,COMPLETE:2,PAUSED:3,STOPPED:4,ERROR:5,LOG:6});function B2(a,b,c){A.call(this);this.name=b;this.Ba=c;this.state=0;this.o=a;this.j=new Worker(a);this.j.onmessage=Jwa;this.j.g=this;this.g=new je(1E3);this.g.H("tick",this.l,!1,this)}w(B2,A);var Kwa=E.V("os.job.Job");B2.prototype.O=function(){return this.o};B2.prototype.getName=function(){return this.name};B2.prototype.l=function(){};
function Jwa(a){if(a&&a.data){var b=this.g;a=a.data;if(a.state){var c=b.state;switch(a.state){case 0:b.state=a.state;b.g.stop();break;case 1:b.state=a.state;b.g.start();a.data&&b.dispatchEvent(new A2("job:dataready",a.data));break;case 3:b.state=a.state;b.g.stop();break;case 4:b.state=a.state;b.g.stop();b.dispatchEvent(new A2("job:complete"));break;case 2:b.state=a.state;b.g.stop();b.dispatchEvent(new A2("job:complete",a.data));break;case 5:b.state=a.state;b.g.stop();b.dispatchEvent(new A2("job:error",
a.data));break;case 6:if(a.data&&a.level&&E.hasOwnProperty(a.level))E[a.level](Kwa,"["+b.name+"] "+a.data)}c!=a.state&&b.dispatchEvent(new A2("job:change"))}}}function Lwa(a,b){a.j.postMessage({command:0,data:b})};var C2=E.V("os.capture"),D2=null;
function E2(a,b,c,d,e){a=a||document.querySelector("canvas");if(a instanceof HTMLCanvasElement&&!F2(a)){b=b||0;c=c||0;d=null!=d?d:a.width;e=null!=e?e:a.height;var f=a.getContext("2d");if(f)return f.getImageData(b,c,d,e);if(f=vj(a)){a=new Uint8Array(d*e*4);f.readPixels(b,c,d,e,f.RGBA,f.UNSIGNED_BYTE,a);D2||(D2=document.createElement("CANVAS"),D2.getContext("2d"));f=D2.getContext("2d").createImageData(d,e);var h=f.data;for(b=0;b<d;b++)for(c=0;c<e;c++){var k=4*(b+d*c),l=4*(b+d*(e-c-1));h[k++]=a[l++];
h[k++]=a[l++];h[k++]=a[l++];h[k]=a[l]}return f}}return null}
function Mwa(a){if(a){var b=new B2("v1542394219/src/worker/dataurltoarray.js","Canvas to Blob","Converting canvas data URL to a Blob.");b.Ra("job:complete",function(a){Ma(a.target);if(a.data instanceof Uint8Array){a=new Blob([a.data],{type:"image/png"});var b="Screenshot "+moment().format("YYYY-MM-DD_HHmmss")+".png";fS(b,a,"image/png")}else At(Ct,"Failed saving canvas to PNG",rs,C2)});b.Ra("job:error",function(a){Ma(a.target);At(Ct,"string"===typeof a.data?a.data:"Screen capture failed due to an unspecified error",
rs,C2)});Lwa(b,{dataUrl:a})}}function Nwa(){var a=document.querySelector("canvas");return Wc(a instanceof HTMLCanvasElement?a:null)}function F2(a){if(a&&(a=a.getContext("2d"),a instanceof CanvasRenderingContext2D))try{a.getImageData(0,0,1,1)}catch(b){return!0}return!1}function G2(){return 1};function H2(){A.call(this);this.aborted=!1;this.data=null;this.o="";this.B=0;this.status="";this.title="Give me a title please";this.g=null;this.A=[];this.log=Owa;this.j=new Tg}w(H2,A);var Owa=E.V("os.capture.AbstractRecorder");g=H2.prototype;g.J=function(){H2.C.J.call(this);Ma(this.g);this.g=null;Ma(this.j);this.j=null;this.Xi()};g.Xi=function(){this.Xa()||(this.aborted=!1);this.data=null;this.B=this.A.length=0;this.o="";this.g&&this.g.nk();this.j&&this.j.M("resize",this.Dq,!1,this)};
g.init=function(){this.j&&this.j.Ra("resize",this.Dq,!1,this)};g.abort=function(a){this.aborted||(this.aborted=!0,this.g&&this.g.abort(),E.error(this.log,a||"Recording aborted by user."))};function I2(a,b,c){c&&E.error(a.log,a.o,c);a.o="Encountered an error while recording: "+b;a.abort(a.o);a.dispatchEvent("capture:error")}function J2(a,b){a.status=b;a.dispatchEvent("capture:status")}g.Dq=function(){this.aborted||(this.abort("Resizing the browser would result in a distorted recording."),I2(this,"Resizing the browser would result in a distorted recording."))};function K2(a,b){H2.call(this);this.log=Pwa;this.title="Record Timeline";this.I=a||Nwa;this.L=b||null;this.G=hw.u();this.l=null}w(K2,H2);var Pwa=E.V("os.capture.TimelineRecorder");g=K2.prototype;g.J=function(){K2.C.J.call(this);this.L=this.I=null};g.Xi=function(){K2.C.Xi.call(this);this.l&&(this.l.cancel(),this.l=null)};g.abort=function(a){var b=this.aborted;K2.C.abort.call(this,a);!b&&this.l&&(this.l.cancel(),this.l=null)};
g.Ek=function(){this.I().then(function(a){a?(this.Xi(),this.init(),this.B=-1,this.dispatchEvent("capture:progress"),Qwa(this)):I2(this,"no canvas to record")},this.Fq,this)};
function Qwa(a){if(!a.o&&!a.aborted){if(0===a.A.length)a.G.first();else if(Zia(a.G))a.G.next();else{Rwa(a);return}J2(a,"Waiting for frame to render...");a.l=(a.L?a.L():Wc()).then(function(){J2(this,"Generating image frame...");this.I().then(function(a){a?(this.A.push(a),Qwa(this)):I2(this,"failed retrieving canvas frame")},this.Fq,this)},a.Fq,a)}}
g.Fq=function(a){if(!this.aborted){var b="Failed retrieving canvas frame:",c;a instanceof Error?c=a:b="string"==typeof a?b+(" "+a):b+" unspecified error.";I2(this,b,c)}};function Rwa(a){a.g?(a.g.H("capture:progress",a.fH,!1,a),a.g.H("capture:status",a.gH,!1,a),a.g.Ra("capture:complete",a.GJ,!1,a),a.g.Ra("capture:error",a.HJ,!1,a),a.j&&a.j.M("resize",a.Dq,!1,a),a.dispatchEvent("capture:unblock"),a.g.init(a.G.U),a.g.j=a.A,a.g.Xc()):I2(a,"no video export format provided")}
g.fH=function(a){if(a=a.target)this.B=a.B,this.dispatchEvent("capture:progress")};g.gH=function(a){(a=a.target)&&J2(this,a.status)};g.GJ=function(a){if(a=a.target)this.data=a.A,J2(this,"Done!"),this.dispatchEvent("capture:complete")};g.HJ=function(a){(a=a.target)&&a.o?I2(this,a.o):I2(this,"Unable to create recording: video export failed unexpectedly.")};function L2(){A.call(this);this.description="";this.Tt="unknown";this.o="";this.A=null;this.B=0;this.status="";this.title="Give me a title!";this.j=[];this.log=Swa;this.s=void 0}w(L2,A);var Swa=E.V("os.capture.AbstractVideoEncoder");g=L2.prototype;g.J=function(){L2.C.J.call(this);this.nk()};g.abort=va;g.nk=function(){this.j.length=0;this.A=null};g.init=function(a,b){this.nk();this.frameRate=a;this.quality=b||1};
g.Xc=function(){if(this.Su())this.az();else if(this.s){var a=ze(ue(ve(this.s)));tf(Aw(a),this.az,this.DI,this)}else M2(this,this.title+" encoder is not available")};g.Su=function(){return!0};function M2(a,b,c){c&&E.error(a.log,a.o,c);a.o="Encountered an error while exporting video: "+b;a.dispatchEvent("capture:error")}g.DI=function(a){this.s=void 0;M2(this,a?a.message:"failed to load the "+this.title+" encoder")};function N2(){L2.call(this);this.description="Widely supported format, but may exhibit loss of quality.";this.Tt="gif";this.title="GIF";this.s="v1542394219/vendor/gif/gif.js";this.l=[];this.g=null}w(N2,L2);g=N2.prototype;g.abort=function(){this.g&&this.g.abort()};g.nk=function(){N2.C.nk.call(this);this.l.length=0;this.g&&(this.g.removeAllListeners(),this.g.cleanUp(),this.g=null)};g.Su=function(){return null!=window.GIF};
g.az=function(){try{this.g=new GIF({background:"#000",cleanUp:!0,quality:100-99*this.quality,transparent:0,workerScript:"v1542394219/vendor/gif/gif.worker.js",workers:4});Twa(this);var a=1/this.frameRate*1E3;this.l.forEach(function(b){this.g.addFrame(b,{delay:a})},this);this.g.on("progress",this.uH.bind(this));this.g.on("finished",this.tH.bind(this));this.g.render();this.B=0;this.dispatchEvent("capture:progress");this.status="Generating animated GIF...";this.dispatchEvent("capture:status")}catch(b){M2(this,
"failed generating GIF",b)}};function Twa(a){for(var b=[],c=0;c<a.j.length;c++)b.push(Uwa(a,a.j[c])),1<b.length&&b.push(Uwa(a,a.j[c]));a.j.length=0;a.l.push(b[0]);for(c=0;c<b.length-1;c+=2)a.l.push(Vwa(b[c],b[c+1]))}function Vwa(a,b){a=new Uint32Array(a.data.buffer);for(var c=new Uint32Array(b.data.buffer),d=0;d<a.length;d++)a[d]===c[d]&&(c[d]=0);return b}function Uwa(a,b){try{return E2(b)}catch(c){M2(a,"failed retrieving canvas frame",c)}return null}g.uH=function(a){this.B=Math.ceil(100*a);this.dispatchEvent("capture:progress")};
g.tH=function(a){this.A=a;this.dispatchEvent("capture:complete")};W.directive("loadingBar",[function(){return{replace:!0,restrict:"E",scope:{total:"=?",complete:"=?",message:"=?",delay:"@"},templateUrl:"v1542394219/views/modal/loading.html",controller:O2,controllerAs:"loadctrl",link:Wwa}}]);
function O2(a,b,c){this.K=b;this.Ma=c;this.j=100;this.complete=0;this.indeterminate=this.show=!1;this.message="Loading...";this.s=a.$watch("total",t(function(a){a&&Mb(a)&&(a=dc(a),0<a&&(this.j=a))},this));this.o=a.$watch("complete",t(function(a){if("number"===typeof a&&(0>a?(this.complete=100,this.indeterminate=!0):(this.complete=Math.floor(a/this.j*100),this.indeterminate=!1),a=ng("progress-bar",this.K[0]))){var b=this.complete+"%";"number"==typeof b&&(b=Math.round(b)+"px");a.style.width=b}},this));
a.$on("$destroy",this.l.bind(this))}O2.$inject=["$scope","$element","$timeout"];function Xwa(a,b){b=b?b:0;a.g=a.Ma(t(function(){this.show=!0},a),b)}O2.prototype.l=function(){this.g&&this.Ma.cancel(this.g);this.Ma=this.K=null;this.s();this.o()};function Wwa(a,b,c,d){Xwa(d,c.delay)};W.directive("recordingui",[function(){return{restrict:"E",replace:!0,scope:{recorder:"="},templateUrl:"v1542394219/views/capture/recordingui.html",controller:P2,controllerAs:"recordui"}}]);
function P2(a,b){this.v=a;this.K=b;this.g=a.recorder;this.recordingCritical=this.recording=!1;this.progress=0;this.status="";this.title="Recording "+moment().format("YYYY-MM-DD_HHmmss");this.encoders=[new N2];this.encoder=this.encoders[0];this.persister=null;this.persisters={};if((b=BG(AG))&&0<b.length){this.persister=b[0];for(var c=0,d=b.length;c<d;c++)this.persisters[b[c].ba()]=b[c]}this.K.find('input[name="title"]').focus();a.$emit("window.ready");a.$on("$destroy",this.j.bind(this))}
P2.$inject=["$scope","$element"];P2.prototype.j=function(){Ma(this.g);this.K=this.v=this.g=null};function Q2(a){KE(a.K);a.recording=!1;Ywa(a)}P2.prototype.cancel=function(){this.g&&this.g.abort();Q2(this)};P2.prototype.cancel=P2.prototype.cancel;
P2.prototype.Ek=function(){if(this.g){this.g.H("capture:progress",this.uI,!1,this);this.g.H("capture:status",this.vI,!1,this);this.g.Ra("capture:unblock",this.mJ,!1,this);this.g.Ra("capture:complete",this.sI,!1,this);this.g.Ra("capture:error",this.tI,!1,this);this.recordingCritical=this.recording=!0;Ywa(this);var a=IE("recordUi");if(a){var b=a.children().first().scope();b&&b.windowCtrl&&(NE(b.windowCtrl),b.modal=!0);a.draggable("option","zIndex",1049);a.css("zIndex","1049")}this.g.g=this.encoder;
this.g.Ek()}else At(Ct,"Unable to create recording: recorder not configured.",rs),Q2(this)};P2.prototype.record=P2.prototype.Ek;P2.prototype.bD=function(a){return a&&a.title||"Unknown Type"};P2.prototype.getEncoderTitle=P2.prototype.bD;P2.prototype.aD=function(a){(a=a&&a.description||"")&&(a='<i class="fa fa-info-circle text-danger"></i>&nbsp;'+a);return a};P2.prototype.getEncoderDescription=P2.prototype.aD;g=P2.prototype;g.uI=function(){this.g&&(this.progress=this.g.B,X(this.v))};
g.mJ=function(){if(this.g){this.recordingCritical=!1;var a=IE("recordUi");if(a){var b=a.children().first().scope();b&&b.windowCtrl&&(OE(b.windowCtrl),b.modal=!1);a.draggable("option","zIndex",990);a.css("zIndex","990")}X(this.v)}};g.vI=function(){this.g&&(this.status=this.g.status,X(this.v))};g.sI=function(){this.persister&&this.g&&this.g.data?this.persister.save(this.title+"."+this.encoder.Tt,this.g.data,"image/gif",this.title):At(Ct,"Unable to create recording: recording data missing.",rs);Q2(this)};
g.tI=function(a){(a=a.target)&&a.o?At(Ct,"Recording failed. Please see the log for more details.",rs):At(Ct,"Unable to create recording: unspecified reason.",rs);Q2(this)};function Ywa(a){document.getElementById("timeline-record-button").classList.toggle("disabled",!!a.recording)};function R2(){y_.call(this);this.id="capture";this.log=Zwa;this.j=!1;this.g=this.Ku()}w(R2,y_);var Zwa=E.V("os.ui.capture.AbstractCapturePlugin");g=R2.prototype;g.init=function(){C.H("timeline.capture",this.bC,!1,this);C.H("timeline.record",this.pM,!1,this)};g.Ku=function(){return[]};function $wa(a){a.j||(a.j=!0,od&&At(Ct,"Screen capture may not work as expected in Internet Explorer due to browser limitations. To use this feature, we recommend switching to Chrome or Firefox.",ss,Zwa))}
g.bC=function(){$wa(this);this.Pm().then(function(){this.fr().then(function(a){if(a){try{var b=a.toDataURL()}catch(c){a=xs("your system administrator"),a=Fz(a),At(Ct,"Unable to save canvas due to cross-origin content. Please contact <b>"+a+"</b> for support.",rs,C2)}Mwa(b)}},this.Zx,this)},this.Zx,this)};
g.Zx=function(a){var b="Failed to take screenshot:",c;a instanceof Error?c=a:"string"==typeof a&&(b+=" "+a);E.error(this.log,b,c);At(Ct,"Unable to take screenshot. Please see the log for more details.",rs)};g.lu=function(){return new K2(this.fr.bind(this),this.Pm.bind(this,!0))};
g.pM=function(){$wa(this);var a=this.lu();a&&!IE("recordUi")&&FE({id:"recordUi",label:a.title||"Give me a title please",icon:"fa fa-circle text-danger",x:"center",y:"center",width:"350","min-width":"275","max-width":"500",height:"auto",modal:"false","show-close":"true"},'<recordingui recorder="recorder"></recordingui>',void 0,void 0,void 0,{recorder:a})};
g.fr=function(){return new Oc(function(a,b){var c,d=0,e=0;for(c=0;c<this.g.length;c++)d+=this.g[c].gr(),e+=this.g[c].ay();0<d&&0<e?(c=document.createElement("canvas"),c.width=e,c.height=d,axa(this,a,b,c,0)):b("nothing to capture")},this)};function axa(a,b,c,d,e){var f=a.g[e];f?bxa(f,d).then(function(){axa(this,b,c,d,++e)},function(a){c("failed capturing "+f.title+": "+a)},a):b(d)}g.Pm=function(){return Wc()};function S2(a){a=a||{};this.priority=0;this.g=a.selector||null;this.title="unknown"}
function bxa(a,b){return new Oc(function(a,d){this.j().then(function(c){if(c){var d=this.getPosition(b),e=d[0],k=d[1],l=c.width,m=c.height,n=this.ob();if(n){var p=b.getContext("2d");n=n instanceof Image?p.createPattern(n,"repeat"):n;p.fillStyle=n;p.fillRect(e,k,l,m)}this.tt();e=d[0];d=d[1];k=Math.min(c.width,b.width-e);m=Math.min(c.height,b.height-d);if(0<m&&0<k){if((m<c.height||k<c.width)&&E.ib(C2,"Canvas overlay cropped by ["+(c.width-k)+", "+(c.height-m)+"] pixels."),l=E2(c,void 0,void 0,k,m)){c=
E2(b,e,d,k,m);k=c.data;l=l.data;for(m=0;m<l.length;m+=4)p=l[m+3]/255,0<p&&(1>p?(k[m]=Math.round(l[m]*p+(1-p)*k[m]),k[m+1]=Math.round(l[m+1]*p+(1-p)*k[m+1]),k[m+2]=Math.round(l[m+2]*p+(1-p)*k[m+2])):(k[m]=l[m],k[m+1]=l[m+1],k[m+2]=l[m+2],k[m+3]=l[m+3]));b.getContext("2d").putImageData(c,e,d)}}else E.error(C2,"Unable to overlay canvas: height = "+m+", width = "+k+".")}a()},d,this)},a)}g=S2.prototype;g.tt=function(){};
function T2(a){return"string"==typeof a.g?document.querySelector(a.g):"function"==typeof a.g?a.g():null}g.ob=function(){return null};g.getPosition=function(){return[0,0]};g.gr=function(){return 0};g.ay=function(){return 0};function U2(a){S2.call(this,a)}w(U2,S2);U2.prototype.j=function(){return new Oc(function(a,b){var c=T2(this);c?svgAsDataUri(c,{scale:G2()},this.o.bind(this,a,b)):a(null)},this)};U2.prototype.o=function(a,b,c){if(c){var d=new Image;d.onload=this.l.bind(this,a,b,d);d.onerror=function(){a(null)};d.src=c}else a(null)};U2.prototype.l=function(a,b,c){if(c instanceof Image){var d=document.createElement("canvas");d.width=c.width;d.height=c.height;d.getContext("2d").drawImage(c,0,0)}a(d||null)};function V2(a){a=a||{};a.selector=a.selector||"svg.c-svg-timeline";S2.call(this,a);this.title="Timeline";this.tc=a.fill||"#fff";this.s=a.overlay||!1}w(V2,U2);V2.prototype.ob=function(){return this.tc};V2.prototype.getPosition=function(a){return[0,a.height-cxa(this)]};V2.prototype.gr=function(){return this.s?0:cxa(this)};function cxa(a){if(a=T2(a))if(a=a.getBoundingClientRect())return a.height*G2();return 0};function W2(a){S2.call(this,a)}w(W2,S2);W2.prototype.j=function(){var a=T2(this);if(F2(a))return Xc("The HTML 2D canvas has been tainted");if(a){var b=G2(),c=a.getBoundingClientRect();c=a.width/c.width;c!==b&&(b/=c,c=document.createElement("canvas"),c.width=a.width*b,c.height=a.height*b,c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height),a=c)}return Wc(a)};function PP(a){sl.call(this,a?a:{});this.type="IMAGE"}G(PP,sl);function X2(a,b,c,d,e,f){this.G=b;this.B=a.aa();var h=b.aa(),k=h?ki(c,h):c;h=kva(a,b,ii(k),d);this.s=new mva(a,b,k,this.B,.5*h);this.j=d;this.g=c;a=nva(this.s);this.A=(this.Re=f(a,h,e))?this.Re.l:1;this.Tk=this.o=null;e=2;this.Re&&(e=0);lo.call(this,c,d,this.A,e)}G(X2,lo);g=X2.prototype;g.J=function(){1==this.state&&(rh(this.Tk),this.Tk=null);lo.prototype.J.call(this)};g.Ua=function(){return this.o};g.Wa=function(){return this.G};
g.Jk=function(){var a=this.Re.getState();2==a&&(this.o=lva(gi(this.g)/this.j,hi(this.g)/this.j,this.A,this.Re.ab(),0,this.j,this.g,this.s,[{extent:this.Re.aa(),image:this.Re.Ua()}],0));this.state=a;this.ia()};g.load=function(){if(0==this.state){this.state=1;this.ia();var a=this.Re.getState();2==a||3==a?this.Jk():(this.Tk=I(this.Re,"change",function(){var a=this.Re.getState();if(2==a||3==a)rh(this.Tk),this.Tk=null,this.Jk()},this),this.Re.load())}};function Y2(a){lm.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state});this.s=void 0!==a.resolutions?a.resolutions:null;this.g=null;this.o=0}G(Y2,lm);Y2.prototype.Pf=function(){return this.s};
Y2.prototype.Ua=function(a,b,c,d){var e=this.Wa();if(e&&d&&!Wi(e,d)){if(this.g){if(this.o==this.Yb&&Wi(this.g.Wa(),d)&&this.g.ab()==b&&bi(this.g.aa(),a))return this.g;this.g.dispose();this.g=null}this.g=new X2(e,d,a,b,c,function(a){return li(a,this.wa.aa())?this.wa:null}.bind(this));this.o=this.Yb;return this.g}e&&(d=e);return li(a,this.wa.aa())?this.wa:null};
Y2.prototype.j=function(a){a=a.target;switch(a.getState()){case 1:this.dispatchEvent(new Z2(dxa,a));break;case 2:this.dispatchEvent(new Z2(exa,a));break;case 3:this.dispatchEvent(new Z2(fxa,a))}};function gxa(a,b){a.Ua().src=b}function Z2(a,b){Ah.call(this,a);this.image=b}G(Z2,Ah);var dxa="imageloadstart",exa="imageloadend",fxa="imageloaderror";function $2(a,b,c,d,e,f){lo.call(this,a,b,c,0);this.o=d;this.wa=new Image;null!==e&&(this.wa.crossOrigin=e);this.g=null;this.state=0;this.j=f}G($2,lo);g=$2.prototype;g.Ua=function(){return this.wa};g.JF=function(){this.state=3;this.g.forEach(rh);this.g=null;this.ia()};g.KF=function(){void 0===this.resolution&&(this.resolution=hi(this.extent)/this.wa.height);this.state=2;this.g.forEach(rh);this.g=null;this.ia()};
g.load=function(){if(0==this.state||3==this.state)this.state=1,this.ia(),this.g=[wh(this.wa,"error",this.JF,this),wh(this.wa,"load",this.KF,this)],this.j(this,this.o)};g.setImage=function(a){this.wa=a};function a3(a){a=a||{};var b=a.params||{};gP.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:!("TRANSPARENT"in b?b.TRANSPARENT:1),projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0,transition:a.transition});this.I=void 0!==a.gutter?a.gutter:0;this.j=b;this.B=!0;this.o=a.serverType;
this.G=void 0!==a.hidpi?a.hidpi:!0;this.L=Th();hxa(this);this.Yg(ixa(this))}G(a3,gP);g=a3.prototype;g.Lo=function(){return this.I};g.gf=function(){return this.j};g.Ai=function(a){return this.G&&void 0!==this.o?a:1};function ixa(a){var b=0,c=[],d;for(d in a.j)c[b++]=d+"-"+a.j[d];return c.join("/")}
g.lh=function(a,b,c){var d=this.tileGrid;d||(d=this.Rd(c));if(!(d.Pf().length<=a[0])){1==b||this.G&&void 0!==this.o||(b=1);var e=d.ab(a[0]),f=Yl(d,a,this.L),h=Ul(bm(d,a[0]),this.Uh);d=this.I;if(0!==d){var k=this.Uh;void 0===k&&(k=[0,0]);k[0]=h[0]+2*d;k[1]=h[1]+2*d;h=k;f=Vh(f,e*d,f)}1!=b&&(h=Tl(h,b,this.Uh));e={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};nh(e,this.j);d=h;h=b;if(b=this.urls){e.WIDTH=d[0];e.HEIGHT=d[1];e[this.B?"CRS":"SRS"]=c.Tb;"STYLES"in this.j||
(e.STYLES="");if(1!=h)switch(this.o){case "geoserver":d=90*h+.5|0;e.FORMAT_OPTIONS="FORMAT_OPTIONS"in e?e.FORMAT_OPTIONS+(";dpi:"+d):"dpi:"+d;break;case "mapserver":e.MAP_RESOLUTION=90*h;break;case "carmentaserver":case "qgis":e.DPI=90*h;break;default:Rh(!1,52)}c=c.fh;this.B&&"ne"==c.substr(0,2)&&(c=f[0],f[0]=f[1],f[1]=c,c=f[2],f[2]=f[3],f[3]=c);e.BBOX=f.join(",");a=Dva(1==b.length?b[0]:b[ti((a[1]<<a[0])+a[2],b.length)],e)}else a=void 0;return a}};
g.updateParams=function(a){nh(this.j,a);hxa(this);this.Yg(ixa(this))};function hxa(a){a:{var b=(""+(a.j.VERSION||"1.3.0")).split(".");for(var c=["1","3"],d=0;d<Math.max(b.length,c.length);d++){var e=parseInt(b[d]||"0",10),f=parseInt(c[d]||"0",10);if(e>f){b=1;break a}if(f>e){b=-1;break a}}b=0}a.B=0<=b};var b3=void 0,jxa=void 0;function c3(){if(void 0===b3){var a=document.createElement("canvas");a.setAttribute("style","image-rendering: -moz-crisp-edges; image-rendering: pixelated;");a=a.style.imageRendering;(b3=!!a)&&(jxa=a)}return b3}function e3(a){return a.get("olcs.projection")||a.Wa()};function f3(a,b){this.g=a;this.qd=null;this.B=b||null;this.l=!1;this.A=this.j=this.s=null;if(a=this.g.get("olcs.proxy"))"function"===typeof a?this.o={getURL:a}:"string"===typeof a&&(this.o=new Cesium.DefaultProxy(a));this.I=new Cesium.Event;this.If=document.createElement("canvas");this.If.width=1;this.If.height=1;this.g.on("change",function(){this.lp()},this);this.lp()}
Object.defineProperties(f3.prototype,{ready:{get:function(){return this.l}},rectangle:{get:function(){return this.A}},tileWidth:{get:function(){var a=this.g.tileGrid;return a?Array.isArray(bm(a,0))?bm(a,0)[0]:bm(a,0):256}},tileHeight:{get:function(){var a=this.g.tileGrid;return a?Array.isArray(bm(a,0))?bm(a,0)[1]:bm(a,0):256}},maximumLevel:{get:function(){var a=this.g.tileGrid;return a?a.maxZoom:18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this.j}},tileDiscardPolicy:{get:function(){}},
errorEvent:{get:function(){return this.I}},credit:{get:function(){return this.s}},proxy:{get:function(){return this.o}},hasAlphaChannel:{get:function(){return!0}},pickFeatures:{get:function(){}}});f3.prototype.lp=function(){if(!this.l&&"ready"==this.g.getState()){this.qd=e3(this.g)||this.B;if(this.qd==Li("EPSG:4326"))this.j=new Cesium.GeographicTilingScheme;else if(this.qd==Li("EPSG:3857"))this.j=new Cesium.WebMercatorTilingScheme;else return;this.A=this.j.rectangle;this.s=kxa(this.g);this.l=!0}};
function kxa(a){var b="";a=a.vj;"function"===typeof a&&(a=a());a&&a.forEach(function(a){b+="string"===typeof a?a:a.qp});return 0<b.length?new Cesium.Credit(b,!0):null}f3.prototype.getTileCredits=function(){};f3.prototype.getTileCredits=f3.prototype.getTileCredits;
f3.prototype.requestImage=function(a,b,c){var d=this.g.tileUrlFunction;return d&&this.qd?(a=d.call(this.g,[this.j instanceof Cesium.GeographicTilingScheme?c+1:c,a,-b-1],1,this.qd),this.o&&(a=this.o.getURL(a)),a?Cesium.ImageryProvider.loadImage(this,a):this.If):this.If};f3.prototype.requestImage=f3.prototype.requestImage;function lxa(a){var b=a.canvas;b=new Cesium.Cartesian2(b.clientWidth/2,b.clientHeight/2);var c=a.camera.getPickRay(b);return a.globe.pick(c,a)||a.camera.pickEllipsoid(b)}function mxa(a,b){return a&&b?(a=Zi(a,b,"EPSG:4326"),Cesium.Rectangle.fromDegrees(a[0],a[1],a[2],a[3])):null}
function nxa(a,b){if(!(a instanceof ul||a instanceof PP))return null;var c=a.O();if(c instanceof gP){var d=e3(c);d||(d=b);var e=d;d=e===Li("EPSG:3857");e=e===Li("EPSG:4326");if(d||e)c=new f3(c,b);else return null}else return null;d={};if(a=a.get("olcs.extent")||a.aa())d.rectangle=mxa(a,b);return new Cesium.ImageryLayer(c,d)}function g3(a,b){var c=1,d=!0;[a.layer].concat(a.parents).forEach(function(a){var b=a.Xb();void 0!==b&&(c*=b);a=a.Hb();void 0!==a&&(d&=a)});b.alpha=c;b.show=d}
function Zu(a){return 2<a.length?Cesium.Cartesian3.fromDegrees(a[0],a[1],a[2]):Cesium.Cartesian3.fromDegrees(a[0],a[1])}function h3(a){for(var b=[],c=0;c<a.length;++c)b.push(Zu(a[c]));return b}function i3(a,b){var c=Li("EPSG:4326");b=Li(b);if(b!==c){var d=a.Vb();a=a.clone();a.transform(b,c);a.qc(d)}return a}
function j3(a){a=a||"black";if(Array.isArray(a))return new Cesium.Color(Cesium.Color.byteToFloat(a[0]),Cesium.Color.byteToFloat(a[1]),Cesium.Color.byteToFloat(a[2]),a[3]);if("string"==typeof a)return Cesium.Color.fromCssColorString(a)};function k3(){throw Error("TileGridTilingScheme created before initialization!");}
k3.init=function(){k3=function(a){this.g=a.tileGrid;a=a.Wa()||N;var b=Wi(a,Li("EPSG:4326"));Wi(a,Li("EPSG:3857"));this.j=Cesium.Ellipsoid.WGS84;this.o=b?new Cesium.GeographicProjection(this.j):new Cesium.WebMercatorProjection(this.j);this.qd=a;a=Zi(this.g.aa(),this.qd,"EPSG:4326");a=a.map(function(a){return a*Cu});this.l=new Cesium.Rectangle(a[0],a[1],a[2],a[3])};w(k3,Cesium.TilingScheme);k3.init=va;Object.defineProperties(k3.prototype,{ellipsoid:{get:function(){return this.j}},rectangle:{get:function(){return this.l}},
projection:{get:function(){return this.o}}});k3.prototype.getNumberOfXTilesAtLevel=function(a){var b=em(this.g,a);if(b)return b.maxX-b.minX+1;var c=this.g.A;if(void 0!==c){var d=this.g.minZoom;b=em(this.g,d);return Math.pow(c,Math.log(b.maxX-b.minX+1)/Math.log(c)-d+a)}return 0};k3.prototype.getNumberOfYTilesAtLevel=function(a){var b=em(this.g,a);if(b)return b.maxY-b.minY+1;var c=this.g.A;if(void 0!==c){var d=this.g.minZoom;b=em(this.g,d);return Math.pow(c,Math.log(b.maxY-b.minY+1)/Math.log(c)-d+a)}return 0};
k3.prototype.rectangleToNativeRectangle=function(a,b){a=[a.west*Du,a.south*Du,a.east*Du,a.north*Du];a=Zi(a,"EPSG:4326",this.qd);b=b||new Cesium.Rectangle;b.west=a[0];b.south=a[1];b.east=a[2];b.north=a[3];return b};k3.prototype.tileXYToNativeRectangle=function(a,b,c,d){a=this.tileXYToRectangle(a,b,c,d);return this.rectangleToNativeRectangle(a,d)};k3.prototype.tileXYToRectangle=function(a,b,c,d){a=Yl(this.g,[c,a,-b-1]);a=Zi(a,this.qd,"EPSG:4326");d=d||new Cesium.Rectangle;d.west=a[0]*Cu;d.south=a[1]*
Cu;d.east=a[2]*Cu;d.north=a[3]*Cu;return d};k3.prototype.positionToTileXY=function(a,b,c){if(this.contains(a)){a=Ti([a.longitude*Du,a.latitude*Du],this.qd);var d=$l(this.g,b),e=this.g.ab(b),f=Ul(bm(this.g,b),this.g.s);b=(a[0]-d[0])/e/f[0];a=(d[1]-a[1])/e/f[1];c=c||new Cesium.Cartesian2;c.x=Math.floor(b);c.y=Math.floor(a);return c}};k3.prototype.contains=function(a){var b=this.l;return!(1E-12<a.latitude-b.north||-1E-12>a.latitude-b.south||-1E-12>a.longitude-b.west||1E-12<a.longitude-b.east)}};function l3(a,b){f3.call(this,a,b);this.G=!1}w(l3,f3);l3.prototype.dispose=function(){this.G=!0};l3.prototype.Xa=function(){return this.G};l3.prototype.lp=function(){this.l||"ready"!=this.g.getState()||(this.qd=e3(this.g)||this.B,this.j=new k3(this.g),this.A=this.j.rectangle,this.s=kxa(this.g)||null,this.l=!0)};
l3.prototype.requestImage=function(a,b,c){b=-b-1;var d=Cesium.when.defer(),e=this.g.Rd(this.qd);if(c<e.minZoom-1||c>e.maxZoom)return d.resolve(this.If),d.promise;var f=Ho(this.g,c,a,b,1,this.qd);a=f.getState();if(4===a)d.resolve(this.If);else if(2===a)d.resolve(f.Ua());else if(3===a)d.resolve(this.If);else{f.load();var h=I(f,"change",function(){var a=f.getState();4===a?(d.resolve(this.If),rh(h)):2===a?(d.resolve(f.Ua()),rh(h)):3===a&&(d.resolve(this.If),rh(h))})}return d.promise};
l3.prototype.requestImage=l3.prototype.requestImage;Object.defineProperties(l3.prototype,{minimumLevel:{get:function(){return 1}},tileWidth:{get:function(){var a=this.g.tileGrid;return a?(a=bm(a,a.minZoom),Array.isArray(a)?a[0]:a):256}},tileHeight:{get:function(){var a=this.g.tileGrid;return a?(a=bm(a,a.minZoom),Array.isArray(a)?a[1]:a):256}}});function m3(a){this.B="string"===typeof a.credit?new Cesium.Credit(a.credit):void 0;this.G=new Cesium.Event;this.l="Terrain";this.o=!1;this.j=new Cesium.GeographicTilingScheme({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1});this.maxLevel=a.maxLevel||11;this.minLevel=a.minLevel||8;this.tileSize=a.tileSize||128;this.A=Cesium.TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(this.j.ellipsoid,this.tileSize,this.j.getNumberOfXTilesAtLevel(0));this.I={heightScale:1,heightOffset:0,
elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1};this.url=a.url;this.useProxy=a.useProxy||!1}Object.defineProperties(m3.prototype,{credit:{get:function(){return this.B}},errorEvent:{get:function(){return this.G}},ready:{get:function(){return this.o},set:function(a){this.o=a}},tilingScheme:{get:function(){return this.j}},hasVertexNormals:{get:function(){return!1}},hasWaterMask:{get:function(){return!1}}});m3.prototype.getName=function(){return this.l};
m3.prototype.Qh=function(a){this.l=a};m3.prototype.getLevelMaximumGeometricError=function(a){return this.A/(1<<a)};m3.prototype.getTileDataAvailable=function(){return!0};function n3(a){m3.call(this,a);this.g=a.layers;this.g.sort(oxa);0<this.g.length&&this.Qh(this.g[this.g.length-1].layerName);this.maxLevel=this.g[0].maxLevel;this.minLevel=this.g[this.g.length-1].minLevel;this.ready=!0}w(n3,m3);n3.prototype.getTileDataAvailable=function(a,b,c){return n3.C.getTileDataAvailable.call(this,a,b,c)&&c<this.maxLevel};
n3.prototype.requestTileGeometry=function(a,b,c,d){var e=void 0;if(c<this.maxLevel&&c>=this.minLevel){var f=0;for(var h=this.g.length;f<h;f++){var k=this.g[f];if(c<k.maxLevel&&c>=k.minLevel){e=k.layerName;break}}}f=e;if(!f)return new Cesium.HeightmapTerrainData({buffer:new Uint8Array(this.tileSize*this.tileSize),width:this.tileSize,height:this.tileSize});e=this.url+"?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&CRS=EPSG%3A4326&STYLES=";e=e+("&LAYERS="+f)+"&FORMAT=image%2Fbil"+("&WIDTH="+this.tileSize+
"&HEIGHT="+this.tileSize);f=this.tilingScheme.tileXYToNativeRectangle(a,b,c);h=(f.east-f.west)/this.tileSize;k=(f.north-f.south)/this.tileSize;f.west-=.5*h;f.east+=.5*h;f.south-=.5*k;f.north+=.5*k;e+="&BBOX="+f.south+","+f.west+","+f.north+","+f.east;this.useProxy&&(e=zy(e));if(d=Cesium.defaultValue(d,!0)){if(d=Cesium.loadArrayBuffer(e,void 0,new Cesium.Request({throttle:!0})),!d)return}else d=Cesium.loadArrayBuffer(e);e=c+1;c=0|(this.getTileDataAvailable(2*a,2*b,e)?1:0);c|=this.getTileDataAvailable(2*
a+1,2*b,e)?2:0;c|=this.getTileDataAvailable(2*a,2*b+1,e)?4:0;c|=this.getTileDataAvailable(2*a+1,2*b+1,e)?8:0;return Cesium.when(d,this.s.bind(this,c))};
n3.prototype.s=function(a,b){var c;var d=new DataView(b);var e=new ArrayBuffer(this.tileSize*this.tileSize*2),f=new DataView(e);if(e.byteLength===b.byteLength){for(var h=c=0,k=0;k<e.byteLength;k+=2)b=d.getInt16(k,!1),-500<b&&9E3>b?(f.setInt16(k,b,!0),h+=b,c++):f.setInt16(k,0<c?h/c:0,!0);c=new Int16Array(e)}d=c;if(void 0===d)throw new Cesium.DeveloperError("unexpected height buffer size");return new Cesium.HeightmapTerrainData({buffer:d,width:this.tileSize,height:this.tileSize,childTileMask:a,structure:this.I})};
function oxa(a,b){return Bb(b.maxLevel,a.maxLevel)};var pxa={DO:"ellipsoid",EO:"ellipsoidOutline",MA:"geometry",LO:"geometryOutline"},qxa=/ellipsoid/i,rxa=/outline/i;function sxa(){if(void 0===window.Cesium){window.CESIUM_BASE_URL="v1542394219/vendor/cesium";var a=ze(ue(ve("v1542394219/vendor/cesium/Cesium.js"))),b=O.get("cesium.loadTimeout",3E4);return Aw(a,{timeout:b})}return Wc()}var o3=void 0,txa=void 0;function uxa(){return txa=Cesium.JulianDate.fromDate(new Date(hw.u().g),txa)}
function vxa(a,b){if(!(a instanceof ul))return null;var c=a.O();if(c instanceof gP){var d=c.Wa();d||(d=b);var e=d===Li("EPSG:3857");d=d===Li("EPSG:4326");if(e||d)c=new l3(c,b);else return null}else return null;e={};a=a.aa();null!=a&&null!==b&&(e.rectangle=mxa(a,b));return new Cesium.ImageryLayer(c,e)}function p3(a,b){g3({layer:a,parents:[]},b);a=a.Ml();null!=a&&(b.hue=a*Cesium.Math.RADIANS_PER_DEGREE)}function wxa(a){return new Cesium.CesiumTerrainProvider(a)}
function xxa(a){return wxa({url:Cesium.IonResource.fromAssetId(null!=a.assetId?a.assetId:1,{accessToken:a.accessToken})})}function yxa(a){return new n3(a)};function q3(){S2.call(this,void 0);this.g=r3;this.title="Map"}w(q3,W2);q3.prototype.tt=function(){var a=T.u();a.Qa()?(a=a.g)&&a.By():(a=a.Y())&&xn(a)};q3.prototype.gr=function(){var a=T2(this);return a?a.height:0};q3.prototype.ay=function(){var a=T2(this);return a?a.width:0};q3.prototype.ob=function(){return O.get(["bgColor"],"#000")};function r3(){return(T.u().Qa()?document.querySelector("canvas.webgl-canvas"):document.querySelector(".ol-viewport > canvas"))||null}
function zxa(){var a=r3();if(a){var b=a.getBoundingClientRect();return a.width/b.width}return 1};function s3(){S2.call(this,void 0);this.g=".js-legend__render-container canvas";this.title="Legend"}w(s3,W2);s3.prototype.getPosition=function(){var a=r3();var b=T2(this);if(a&&b){var c=a.getBoundingClientRect();a=a.width/c.width;var d=b.getBoundingClientRect();b=d.left*a;c=(d.top-c.top)*a}else b=O.get(zR,0),c=O.get(AR,0);return[b,c]};function t3(){S2.call(this,void 0);this.title="Map Overlay";this.g=".ol-overviewmap:not(.ol-collapsed) canvas"}w(t3,W2);
t3.prototype.j=function(){var a=null,b=T2(this);if(F2(b))return Xc("The HTML 2D canvas has been tainted");if(b){var c=G2(),d=b.getBoundingClientRect(),e=c/(b.width/d.width);a=document.createElement("canvas");a.width=b.width*e;a.height=b.height*e;e=a.getContext("2d");var f=O.get(["bgColor"],"#000");e.fillStyle=f;e.fillRect(0,0,a.width,a.height);e.drawImage(b,0,0,b.width,b.height,0,0,a.width,a.height);e.strokeStyle=f;e.lineWidth=3*c;e.strokeRect(0,0,a.width,a.height);if(b=document.querySelector(".ol-overviewmap-box"))b=
b.getBoundingClientRect(),b.height<=d.height&&b.width<=d.width&&(e.strokeStyle="#f00",e.lineWidth=2*c,Cj&&e.setLineDash([2*c,2*c]),e.strokeRect(c*(b.left-d.left),c*(b.top-d.top),c*b.width,c*b.height))}return Wc(a)};t3.prototype.getPosition=function(){var a=0,b=0,c=r3(),d=T2(this);c&&d&&(a=c.getBoundingClientRect(),c=c.width/a.width,d=d.getBoundingClientRect(),a=c*(a.right-d.width-10),b=10*c);return[a,b]};function u3(a,b){K2.call(this,a,b);this.log=Axa;this.s=void 0}w(u3,K2);var Axa=E.V("plugin.capture.TimelineRecorder");u3.prototype.init=function(){u3.C.init.call(this);var a=V;this.s=a.A;FL(a,!1);a.H("propertychange",this.N,!1,this)};u3.prototype.Xi=function(){u3.C.Xi.call(this);var a=V;a.M("propertychange",this.N,!1,this);void 0!=this.s&&(FL(a,this.s),this.s=void 0)};u3.prototype.N=function(a){this.aborted||"timeFilterEnabled"!==a.l||(this.s=void 0,I2(this,"The application time filter has been changed externally, which may cause unexpected behavior in the recording. Recording has been aborted."))};function v3(){R2.call(this);this.log=Bxa}w(v3,R2);wa(v3);var Bxa=E.V("plugin.capture.CapturePlugin");
v3.prototype.init=function(){v3.C.init.call(this);var a=rZ;a&&(a=a.Ha(),a.R({label:"Screenshot",eventType:"timeline.capture",tooltip:"Save a screenshot",da:['<i class="fa fa-fw fa-camera"></i>'],qa:"map.features.screenCapture",sort:20}),a.R({label:"Recording",eventType:"timeline.record",tooltip:"Save an animated GIF recording",da:['<i class="fa fa-fw fa-circle"></i>'],qa:"map.features.screenCapture",sort:21}).Aa=Cxa);G2=zxa};
function Cxa(){var a=hw.u(),b=a.g,c=b-a.cc(),d=OM(a).start;a=OM(a).end;this.visible=c!=d||b!=a}v3.prototype.Ku=function(){var a=[new q3,new t3,new s3];od||a.push(new V2({fill:"#888"}));return a};v3.prototype.lu=function(){return new u3(this.fr.bind(this),this.Pm.bind(this,!0))};v3.prototype.Pm=function(a){return new Oc(function(b){a?ke(function(){Dxa(b)},100):b()},this)};function Dxa(a){hb(pw(T.u()),function(a){return!a.mb()})?ke(a,1E3):ke(function(){Dxa(a)},100)};function w3(){this.g={}}wa(w3);var Exa=E.V("os.webgl.SynchronizerManager");function x3(a,b,c){b in a.g?E.error(Exa,"A synchronizer of that type is already registered!"):a.g[b]=c};function y3(a){this.s=a;this.j=a.g;this.A=this.j.canvas;this.l=this.g.bind(this);this.I="mousemove mousedown mouseup touchstart touchend touchmove pointerdown pointerup pointermove wheel".split(" ");this.o()}y3.prototype.o=function(){this.j.requestRenderMode=!0;for(var a=la(this.I),b=a.next();!b.done;b=a.next())this.A.addEventListener(b.value,this.l,!1);window.addEventListener("resize",this.l,!1);tn(this.s.ha).on("change",this.l)};
y3.prototype.B=function(){for(var a=la(this.I),b=a.next();!b.done;b=a.next())this.A.removeEventListener(b.value,this.l,!1);window.removeEventListener("resize",this.l,!1);Eh(tn(this.s.ha),"change",this.l);this.j.requestRenderMode=!1};y3.prototype.g=function(){this.j.requestRender()};function z3(a,b){this.l=a;this.g=a.camera;this.ha=b;this.N=this.j=null;this.B=this.G=z3.g;this.s=this.o=0;this.L=null;this.I=!1;this.ha.on("change:view",function(){Fxa(this,M(this.ha))},this);Fxa(this,M(this.ha))}z3.g=function(a,b,c){c=c||a.length;if(b)for(var d=0;d<c;++d)b[d]=a[d];return a};function Fxa(a,b){a.j&&(Dh(a.N),a.N=null);if(a.j=b){var c=Xi(b.Wa(),"EPSG:4326"),d=Xi("EPSG:4326",b.Wa());a.G=c;a.B=d;a.N=I(b,"propertychange",a.AE,a);a.Lh()}else a.G=z3.g,a.B=z3.g}g=z3.prototype;
g.AE=function(){this.I||this.Lh()};g.Fz=function(a){this.j&&gl(this.j,a)};g.ju=function(){if(this.j)return al(this.j)||0};g.An=function(a){this.o=a;this.Yk()};g.pu=function(){return this.o};g.getPosition=function(){if(this.B){var a=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.g.position);return this.B([180*a.longitude/Math.PI,180*a.latitude/Math.PI])}};g.Qg=function(){return Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.g.position).height};
g.Yk=function(){if(this.j&&this.G){var a=$k(this.j);if(a){a=this.G(a);a=new Cesium.Cartographic(si(a[0]),si(a[1]));if(this.l.globe){var b=this.l.globe.getHeight(a);a.height=b||0}a=Cesium.Ellipsoid.WGS84.cartographicToCartesian(a);b={pitch:this.o-Cesium.Math.PI_OVER_TWO,heading:-al(this.j),roll:void 0};this.g.setView({destination:a,orientation:b});this.g.moveBackward(this.s);this.ql(!0)}}};
g.Lh=function(){if(this.j&&this.G){var a=$k(this.j);if(void 0!==a&&null!==a){a=this.G(a);var b=this.j.ab();this.s=this.ci(b||0,si(a[1]));this.Yk()}}};
g.bl=function(){if(this.j&&this.B){this.I=!0;var a=Cesium.Ellipsoid.WGS84,b=this.l,c=lxa(b),d=c;d||(d=b.globe,b=this.g.positionCartographic.clone(),d=d.getHeight(b),b.height=d||0,d=Cesium.Ellipsoid.WGS84.cartographicToCartesian(b));this.s=Cesium.Cartesian3.distance(d,this.g.position);b=a.cartesianToCartographic(d);cl(this.j,this.B([180*b.longitude/Math.PI,180*b.latitude/Math.PI]));fl(this.j,this.wj(this.s,b?b.latitude:0));if(c){d=this.g.position;b=new Cesium.Cartesian3;a.geocentricSurfaceNormal(c,
b);a=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(d,c,a);Cesium.Cartesian3.normalize(a,a);d=this.g.up;var e=this.g.right,f=new Cesium.Cartesian3(-c.y,c.x,0);e=Cesium.Cartesian3.angleBetween(e,f);c=Cesium.Cartesian3.cross(c,d,new Cesium.Cartesian3).z;gl(this.j,0>c?e:-e);c=Math.acos(Cesium.Cartesian3.dot(b,a));this.o=isNaN(c)?0:c}else gl(this.j,this.g.heading),this.o=-this.g.pitch+Math.PI/2;this.I=!1}};
g.ql=function(a){var b=this.L,c=this.g.viewMatrix;b&&Cesium.Matrix4.equalsEpsilon(b,c,1E-5)||(this.L=c.clone(),!0!==a&&this.bl())};g.ci=function(a,b){var c=this.l.canvas,d=this.g.frustum.fovy,e=yi(this.j.Wa());return a*c.clientHeight*e*Math.cos(Math.abs(b))/2/Math.tan(d/2)};g.wj=function(a,b){var c=this.l.canvas,d=this.g.frustum.fovy,e=yi(this.j.Wa());return 2*a*Math.tan(d/2)/e/Math.cos(Math.abs(b))/c.clientHeight};function A3(a,b){this.map=a;this.view=M(a);this.scene=b;mn(tn(a));this.o=tn(a);this.vh={};this.j={};this.l={}}A3.prototype.sd=function(){this.oz(!0);for(var a in this.l)this.l[a].forEach(Dh);for(a in this.j)this.j[a].forEach(Dh);this.l={};this.j={};this.vh={};Gxa(this,this.o)};A3.prototype.Em=function(){};
function Gxa(a,b){var c=[{layer:b,parents:[]}];for(b={};0<c.length;){b.Mg=c.splice(0,1)[0];b.olLayer=b.Mg.layer;var d=H(b.olLayer).toString();a.j[d]=[];var e=null;b.olLayer instanceof kn?(Hxa(a,b.olLayer),b.olLayer!==a.o&&(e=a.sl(b.Mg)),e||mn(b.olLayer).forEach(function(b){return function(d){d&&(d={layer:d,parents:b.olLayer===a.o?[]:[b.Mg.layer].concat(b.Mg.parents)},c.push(d))}}(b))):(e=a.sl(b.Mg),e||(b.Na=d,b.Ii=b.Mg,b.Ah=function(b){return function(){var c=a.sl(b.Ii);c&&(Eh(b.Ii.layer,"change",
b.Ah,a),Ixa(a,c,b.Na,b.Ii.layer),a.Em())}}(b),a.j[d].push(I(b.Ii.layer,"change",b.Ah,a))));e&&Ixa(a,e,d,b.olLayer);b={olLayer:b.olLayer,Mg:b.Mg,Ii:b.Ii,Ah:b.Ah,Na:b.Na}}a.Em()}function Ixa(a,b,c,d){a.vh[c]=b;a.j[c].push(I(d,"change:zIndex",a.Em,a));b.forEach(function(b){a.gt(b)})}function Jxa(a,b){b=H(b).toString();var c=a.vh[b];c&&(c.forEach(function(b){a.sz(b,!1);a.Nt(b)}),a.j[b].forEach(Dh),delete a.j[b]);delete a.vh[b];return!!c}
function Kxa(a,b){b!==a.o&&(b=H(b).toString(),a.l[b].forEach(function(a){Dh(a)}),delete a.l[b],delete a.vh[b])}function Lxa(a,b){if(b)for(var c=[b];0<c.length;){b=c.splice(0,1)[0];var d=Jxa(a,b);b instanceof kn&&(Kxa(a,b),d||mn(b).forEach(function(a){c.push(a)}))}}
function Hxa(a,b){var c=H(b).toString(),d=[];a.l[c]=d;var e=[],f=function(){var a=mn(b);a&&(e=[a.on("add",function(a){Gxa(this,a.element)},this),a.on("remove",function(a){Lxa(this,a.element)},this)],d.push.apply(d,[].concat(ma(e))))}.bind(a);f();d.push(b.on("change:layers",function(){e.forEach(function(a){var b=d.indexOf(a);0<=b&&d.splice(b,1);Dh(a)});f()}))};function B3(a,b){this.Pb=b.imageryLayers;this.fj=new Cesium.ImageryLayerCollection;A3.call(this,a,b)}G(B3,A3);g=B3.prototype;g.gt=function(a){this.Pb.add(a);this.fj.add(a)};g.Nt=function(a){a.destroy()};g.sz=function(a,b){this.Pb.remove(a,b);this.fj.remove(a,!1)};g.oz=function(a){for(var b=0;b<this.fj.length;++b)this.Pb.remove(this.fj.get(b),a);this.fj.removeAll(!1)};function Mxa(a,b){return(a=nxa(a,b))?[a]:null}
g.sl=function(a){var b=a.layer,c=H(b).toString(),d=this.view.Wa(),e=Mxa(b,d);if(e){var f=[];[a.layer].concat(a.parents).forEach(function(b){f.push(b.on(["change:opacity","change:visible"],function(){for(var b=0;b<e.length;++b)g3(a,e[b])}))});for(d=0;d<e.length;++d)g3(a,e[d]);f.push(b.on("change:extent",function(){for(var a=0;a<e.length;++a)this.Pb.remove(e[a],!0),this.fj.remove(e[a],!1);delete this.vh[H(b)];this.sd()},this));f.push(b.on("change",function(){for(var a=0;a<e.length;++a){var b=this.Pb.indexOf(e[a]);
0<=b&&(this.Pb.remove(e[a],!1),this.Pb.add(e[a],b))}},this));this.j[c].push.apply(this.j[c],[].concat(ma(f)))}return Array.isArray(e)?e:null};g.Em=function(){for(var a=this,b=[],c={},d=[this.o];0<d.length;){var e=d.splice(0,1)[0];b.push(e);c[H(e)]=e.xc();e instanceof kn&&(e=mn(e))&&d.unshift.apply(d,[].concat(ma(e.g)))}kk(b,function(a,b){return c[H(a)]-c[H(b)]});b.forEach(function(b){b=H(b).toString();(b=a.vh[b])&&b.forEach(a.YF,a)})};g.YF=function(a){this.Pb.raiseToTop(a)};function Nxa(a,b){b=new Cesium.BillboardCollection({scene:b});var c=new Cesium.PrimitiveCollection;this.j=[];this.g=new Cesium.PrimitiveCollection;this.context={projection:a,billboards:b,featureToCesiumMap:{},primitives:c};this.g.add(b);this.g.add(c)}Nxa.prototype.destroy=function(){this.j.forEach(Dh);this.j.length=0};function C3(a){this.scene=a;this.l=this.o.bind(this)}C3.prototype.o=function(a){var b=a.target,c=b.olcs_cancellers;if(c)if(a=a.feature){b=H(a);var d=c[b];d&&(d(),delete c[b])}else{for(d in c)if(c.hasOwnProperty(d))c[d]();b.olcs_cancellers={}}};
function Oxa(a,b,c,d,e,f){var h={flat:!0,renderState:{depthTest:{enabled:!0}}};void 0!==f&&(h.renderState||(h.renderState={}),h.renderState.lineWidth=f);d=new Cesium.GeometryInstance({geometry:d,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(e)}});if(D3(a,b,c)==Cesium.HeightReference.CLAMP_TO_GROUND){if((c=d.geometry.constructor)&&!c.createShadowVolume)return null;c=new Cesium.GroundPrimitive({geometryInstances:d})}else c=new Cesium.PerInstanceColorAppearance(h),c=new Cesium.Primitive({geometryInstances:d,
appearance:c});h=c;h.olLayer=a;h.olFeature=b;return c}function E3(a,b){var c=a.ob()?a.ob().La():null;a=a.kb()?a.kb().La():null;var d="black";a&&b?d=a:c&&(d=c);return j3(d)}function F3(a){a=a.kb()?a.kb().g:void 0;return void 0!==a?a:1}function Pxa(a,b,c,d,e,f){var h=E3(f,!1),k=E3(f,!0),l=new Cesium.PrimitiveCollection;f.ob()&&(d=Oxa(a,b,c,d,h),l.add(d));f.kb()&&(a=Oxa(a,b,c,e,k,F3(f)))&&l.add(a);return l}
function G3(a,b,c,d,e,f){if(f instanceof Cesium.PrimitiveCollection)var h=f;else h=new Cesium.PrimitiveCollection,h.add(f);if(!e.ub())return h;e=e.ub();var k=e.ub();a=new Cesium.LabelCollection({scene:a.scene});var l=ii(d.aa());d instanceof tk&&(f=vk(d),l[2]=3==f.length?f[2]:0);f={};f.position=Zu(l);f.text=k;f.heightReference=D3(b,c,d);d=e.Vf;k=e.o;0!=d&&0!=k&&(d=new Cesium.Cartesian2(d,k),f.pixelOffset=d);f.font=e.Ge()||"10px sans-serif";d=void 0;e.ob()&&(f.fillColor=E3(e,!1),d=Cesium.LabelStyle.FILL);
e.kb()&&(f.outlineWidth=F3(e),f.outlineColor=E3(e,!0),d=Cesium.LabelStyle.OUTLINE);e.ob()&&e.kb()&&(d=Cesium.LabelStyle.FILL_AND_OUTLINE);f.style=d;switch(e.g){case "left":d=Cesium.HorizontalOrigin.LEFT;break;case "right":d=Cesium.HorizontalOrigin.RIGHT;break;default:d=Cesium.HorizontalOrigin.CENTER}f.horizontalOrigin=d;if(e.l){switch(e.l){case "top":var m=Cesium.VerticalOrigin.TOP;break;case "middle":m=Cesium.VerticalOrigin.CENTER;break;case "bottom":m=Cesium.VerticalOrigin.BOTTOM;break;case "alphabetic":m=
Cesium.VerticalOrigin.TOP;break;case "hanging":m=Cesium.VerticalOrigin.BOTTOM}f.verticalOrigin=m}m=a.add(f);m.olLayer=b;m.olFeature=c;a&&h.add(a);return h}function Qxa(a,b,c,d,e,f){d=i3(d,e);e=Wk(d);var h=3==e.length?e[2]:0,k=e.slice();k[0]+=Xk(d);e=Zu(e);k=Zu(k);var l=Cesium.Cartesian3.distance(e,k);k=new Cesium.CircleGeometry({center:e,radius:l,height:h});e=new Cesium.CircleOutlineGeometry({center:e,radius:l,extrudedHeight:h,height:h});e=Pxa(b,c,d,k,e,f);return G3(a,b,c,d,f,e)}
C3.prototype.g=function(a,b,c,d,e){c=i3(c,d);d=h3(c.getCoordinates());var f=F3(e);if(D3(a,b,c)==Cesium.HeightReference.CLAMP_TO_GROUND){var h=E3(e,!0),k=0;f=Math.max(3,f);for(var l=[],m=la([1E3,4E3,16E3,64E3,254E3,1E6,1E7]),n=m.next();!n.done;n=m.next())n=n.value,f*=2.14,l.push(new Cesium.GeometryInstance({geometry:new Cesium.oO({positions:d,width:f,vertexFormat:Cesium.VertexFormat.g}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(h),OR:new Cesium.BO(k,n-1)}})),k=n;d=new Cesium.GroundPrimitive({geometryInstances:l})}else h=
Cesium.PolylineMaterialAppearance,e.ob(),(k=e.kb())?(l=k.La(),l=j3(l),k=k.j?Cesium.Material.fromType("Stripe",{horizontal:!1,repeat:500,evenColor:l,oddColor:new Cesium.Color(0,0,0,0)}):Cesium.Material.fromType("Color",{color:l})):k=null,h=new h({material:k}),d=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.PolylineGeometry({positions:d,width:f,vertexFormat:h.vertexFormat})}),appearance:h});f=d;f.olLayer=a;f.olFeature=b;return G3(this,a,b,c,e,d)};
C3.prototype.j=function(a,b,c,d,e){c=i3(c,d);if(5==c.getCoordinates()[0].length&&"rectangle"===b.X().get("olcs.polygon_kind")){d=c.getCoordinates()[0];var f=Sh(d);var h=Cesium.Rectangle.fromDegrees(f[0],f[1],f[2],f[3]),k=0;if(3==d[0].length)for(f=0;f<d.length;f++)k=Math.max(k,d[f][2]);f=new Cesium.RectangleGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:h,height:k});d=new Cesium.RectangleOutlineGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:h,height:k})}else{f=Uk(c);d={};for(h=0;h<f.length;++h)k=
f[h].getCoordinates(),k=h3(k),0==h?d.positions=k:(d.holes||(d.holes=[]),d.holes.push({positions:k}));f=new Cesium.PolygonGeometry({polygonHierarchy:d,perPositionHeight:!0});d=new Cesium.PolygonOutlineGeometry({polygonHierarchy:d,perPositionHeight:!0})}d=Pxa(a,b,c,f,d,e);return G3(this,a,b,c,e,d)};
function D3(a,b,c){c=c.get("altitudeMode");void 0===c&&(c=b.get("altitudeMode"));void 0===c&&(c=a.get("altitudeMode"));a=Cesium.HeightReference.NONE;"clampToGround"===c?a=Cesium.HeightReference.CLAMP_TO_GROUND:"relativeToGround"===c&&(a=Cesium.HeightReference.RELATIVE_TO_GROUND);return a}
function Rxa(a,b,c,d,e,f,h){e instanceof pL&&e.load();var k=e.Ua(1),l=function(){if(k&&(k instanceof HTMLCanvasElement||k instanceof Image||k instanceof HTMLImageElement)){var a=d.getCoordinates();a=Zu(a);var l,m=e.Xb();void 0!==m&&(l=new Cesium.Color(1,1,1,m));m=D3(b,c,d);l={image:k,color:l,scale:e.j(),heightReference:m,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,position:a};l=f.add(l);l.olLayer=b;l.olFeature=c;h&&h(l)}}.bind(a);if(k instanceof Image&&(""==k.src||0==k.naturalHeight||0==k.naturalWidth||
!k.complete)){var m=!1,n=b.O();n.on(["removefeature","clear"],a.l);(a=n.olcs_cancellers)||(a=n.olcs_cancellers={});n=H(c);if(a[n])a[n]();a[n]=function(){m=!0};wh(k,"load",function(){f.isDestroyed()||m||l()})}else l()}
function H3(a,b,c,d,e,f,h,k){d=i3(d,e);e=null;var l=f.Ua();if(l){var m=d.get("olcs_model")||c.get("olcs_model");m?(h=m(),e=Object.assign({},{scene:a.scene},h.cesiumOptions),k=Cesium.Model.QR(e),e=new Cesium.PrimitiveCollection,e.add(k),h.debugModelMatrix&&e.add(new Cesium.AO({modelMatrix:h.debugModelMatrix}))):Rxa(a,b,c,d,l,h,k)}return f.ub()?G3(a,b,c,d,f,e||new Cesium.Primitive):e}
function Sxa(a,b,c,d,e,f,h,k){function l(a,d){var h=new Cesium.PrimitiveCollection;a.forEach(function(a){h.add(d(b,c,a,e,f))});return h}switch(d.T()){case "MultiPoint":d=Qr(d);if(f.ub()){var m=new Cesium.PrimitiveCollection;d.forEach(function(d){(d=H3(a,b,c,d,e,f,h,k))&&m.add(d)});return m}d.forEach(function(d){H3(a,b,c,d,e,f,h,k)});return null;case "MultiLineString":return d=Cr(d),l(d,a.g.bind(a));case "MultiPolygon":return d=Tr(d),l(d,a.j.bind(a));default:d.T()}}
function Txa(a,b,c){var d=a.ke(),e=null;d&&(e=d.call(a,c));!e&&b&&(e=b(a,c));return e?Array.isArray(e)?e:[e]:null}function Uxa(a,b,c){return c||(c=a.get("olcs.3d_geometry"))&&c instanceof kj?c:b&&(b=(0,b.ef)(a),b instanceof kj)?b:a.X()}
function I3(a,b,c,d,e,f){function h(a){var b=e.featureToCesiumMap[H(c)];b instanceof Array?b.push(a):e.featureToCesiumMap[H(c)]=[a]}f=Uxa(c,d,f);if(!f)return null;var k=e.projection;switch(f.T()){case "GeometryCollection":var l=new Cesium.PrimitiveCollection;Np(f).forEach(function(f){f&&(f=I3(a,b,c,d,e,f))&&l.add(f)});return l;case "Point":return(f=H3(a,b,c,f,k,d,e.billboards,h))?f:null;case "Circle":return Qxa(a,b,c,f,k,d);case "LineString":return a.g(b,c,f,k,d);case "Polygon":return a.j(b,c,f,k,
d);case "MultiPoint":case "MultiLineString":case "MultiPolygon":return(f=Sxa(a,b,c,f,k,d,e.billboards,h))?f:null;case "LinearRing":throw Error("LinearRing should only be part of polygon.");default:throw Error("Ol geom type not handled : "+f.T());}}
function Vxa(a,b,c,d){var e=c.Wa();c=c.ab();if(void 0===c||!e)throw Error("View not ready");var f=b.O().Oa();e=new Nxa(e,a.scene);for(var h=e.context,k=0;k<f.length;++k){var l=f[k];if(l){var m=Txa(l,b.ke(),c);if(m&&m.length){for(var n=null,p=0;p<m.length;p++){var r=I3(a,b,l,m[p],h);if(r)if(!n)n=r;else if(r)for(var u=0,v;v=r.get(u);)n.add(v),u++}n&&(d[H(l)]=n,e.g.add(n))}}}return e};function J3(a,b,c){this.s=c||new C3(b);this.g=new Cesium.PrimitiveCollection;b.primitives.add(this.g);this.g.destroyPrimitives=!1;A3.call(this,a,b)}G(J3,A3);g=J3.prototype;g.gt=function(a){a.g.counterpart=a;this.g.add(a.g)};g.Nt=function(a){a.g.destroy()};g.sz=function(a,b){a.destroy();this.g.destroyPrimitives=b;this.g.remove(a.g);this.g.destroyPrimitives=!1};
g.oz=function(a){if(this.g.destroyPrimitives=a)for(a=0;a<this.g.length;++a)this.g.get(a).counterpart.destroy();this.g.removeAll();this.g.destroyPrimitives=!1};function Wxa(a,b){var c=!0;[a.layer].concat(a.parents).forEach(function(a){a=a.Hb();c=void 0!==a?c&a:!1});b.show=c}
g.sl=function(a){var b=a.layer;if(!(b instanceof wl))return null;var c=b.O(),d=this.view,e={},f=Vxa(this.s,b,d,e),h=f.g,k=f.j;[a.layer].concat(a.parents).forEach(function(b){k.push(I(b,"change:visible",function(){Wxa(a,h)}))});Wxa(a,h);var l=function(a){var c=this.s;var k=f.context,l=d.Wa(),m=d.ab();if(void 0!=m&&l)if(m=Txa(a,b.ke(),m),m.length){k.projection=l;l=null;for(var n=0;n<m.length;n++){var B=I3(c,b,a,m[n],k);if(!l)l=B;else if(B)for(var F=0,D;D=B.get(F);)l.add(D),F++}c=l}else c=null;else c=
null;c&&(e[H(a)]=c,h.add(c))}.bind(this),m=function(a){a=H(a);var b=f.context,c=b.featureToCesiumMap[a];c&&(delete b.featureToCesiumMap[a],c.forEach(function(a){a instanceof Cesium.Billboard&&b.billboards.remove(a)}));c=e[a];delete e[a];c&&h.remove(c)}.bind(this);k.push(I(c,"addfeature",function(a){l(a.feature)},this));k.push(I(c,"removefeature",function(a){m(a.feature)},this));k.push(I(c,"changefeature",function(a){a=a.feature;m(a);l(a)},this));return f?[f]:null};function K3(a){Fh.call(this);this.L=a;this.id=a.id;this.insertFirst=void 0!==a.insertFirst?a.insertFirst:!0;this.stopEvent=void 0!==a.stopEvent?a.stopEvent:!0;this.element=document.createElement("DIV");this.element.className=void 0!==a.className?a.className:"ol-overlay-container ol-selectable";this.element.style.position="absolute";this.autoPan=void 0!==a.autoPan?a.autoPan:!1;this.autoPanAnimation=a.autoPanAnimation||{};this.autoPanMargin=void 0!==a.autoPanMargin?a.autoPanMargin:20;this.g={ll:"",
im:"",rn:"",Jn:"",visible:!0};this.s=null;I(this,Hh(L3),this.Yl,this);I(this,Hh(M3),this.jp,this);I(this,Hh(N3),this.mE,this);I(this,Hh(O3),this.Bu,this);I(this,Hh(P3),this.pE,this);void 0!==a.element&&this.set(L3,a.element);this.set(N3,void 0!==a.offset?a.offset:[0,0]);this.set(P3,void 0!==a.positioning?a.positioning:"top-left");void 0!==a.position&&this.set(O3,a.position)}G(K3,Fh);g=K3.prototype;g.tb=function(){return this.get(L3)};g.D=function(){return this.id};g.Y=function(){return this.get(M3)};
g.cc=function(){return this.get(N3)};g.getPosition=function(){return this.get(O3)};g.Yl=function(){tj(this.element);var a=this.tb();a&&this.element.appendChild(a)};g.jp=function(){this.s&&(sj(this.element),rh(this.s),this.s=null);var a=this.Y();a&&(this.s=I(a,"postrender",this.render,this),this.kg(),a=this.stopEvent?a.A:a.B,this.insertFirst?a.insertBefore(this.element,a.childNodes[0]||null):a.appendChild(this.element))};g.render=function(){this.kg()};g.mE=function(){this.kg()};
g.Bu=function(){this.kg();if(this.get(O3)&&this.autoPan){var a=this.Y();if(a&&sn(a)){var b=Xxa(sn(a),vn(a)),c=this.tb(),d=c.offsetWidth,e=getComputedStyle(c);d+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10);e=c.offsetHeight;var f=getComputedStyle(c);e+=parseInt(f.marginTop,10)+parseInt(f.marginBottom,10);var h=Xxa(c,[d,e]);c=this.autoPanMargin;Yh(b,h)||(d=h[0]-b[0],e=b[2]-h[2],f=h[1]-b[1],h=b[3]-h[3],b=[0,0],0>d?b[0]=d-c:0>e&&(b[0]=Math.abs(e)+c),0>f?b[1]=f-c:0>h&&(b[1]=Math.abs(h)+c),0===
b[0]&&0===b[1])||(c=$k(M(a)),c=a.Vd(c),b=[c[0]+b[0],c[1]+b[1]],M(a).animate({center:a.cd(b),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing}))}}};g.pE=function(){this.kg()};g.setMap=function(a){this.set(M3,a)};function Xxa(a,b){var c=a.getBoundingClientRect();a=c.left+window.pageXOffset;c=c.top+window.pageYOffset;return[a,c,a+b[0],c+b[1]]}g.ec=function(a){this.g.visible!==a&&(this.element.style.display=a?"":"none",this.g.visible=a)};
g.kg=function(){var a=this.Y(),b=this.getPosition();a&&a.j&&b?(b=a.Vd(b),a=vn(a),Yxa(this,b,a)):this.ec(!1)};
function Yxa(a,b,c){var d=a.element.style,e=a.cc(),f=a.get(P3);a.ec(!0);var h=e[0];e=e[1];if("bottom-right"==f||"center-right"==f||"top-right"==f)""!==a.g.im&&(a.g.im=d.left=""),h=Math.round(c[0]-b[0]-h)+"px",a.g.rn!=h&&(a.g.rn=d.right=h);else{""!==a.g.rn&&(a.g.rn=d.right="");if("bottom-center"==f||"center-center"==f||"top-center"==f)h-=a.element.offsetWidth/2;h=Math.round(b[0]+h)+"px";a.g.im!=h&&(a.g.im=d.left=h)}if("bottom-left"==f||"bottom-center"==f||"bottom-right"==f)""!==a.g.Jn&&(a.g.Jn=d.top=
""),b=Math.round(c[1]-b[1]-e)+"px",a.g.ll!=b&&(a.g.ll=d.bottom=b);else{""!==a.g.ll&&(a.g.ll=d.bottom="");if("center-left"==f||"center-center"==f||"center-right"==f)e-=a.element.offsetHeight/2;b=Math.round(b[1]+e)+"px";a.g.Jn!=b&&(a.g.Jn=d.top=b)}}var L3="element",M3="map",N3="offset",O3="position",P3="positioning";function Q3(a){this.o=null;this.l=a.scene;this.I=a.synchronizer;this.xa=a.parent;this.G=void 0;this.A=new MutationObserver(this.Yl.bind(this));this.B=[];this.j=[];this.j.push(this.xa.on("change:position",this.Ok.bind(this)));this.j.push(this.xa.on("change:element",this.Ok.bind(this)));this.j.push(this.xa.on("change:offset",this.Ok.bind(this)));this.j.push(this.xa.on("change:position",this.Ok.bind(this)));this.j.push(this.xa.on("change:positioning",this.Ok.bind(this)));K3.call(this,this.xa.L);this.qc(this.xa.Vb());
this.jp()}G(Q3,K3);function Zxa(a,b){a.A.disconnect();a.A.observe(b,{attributes:!1,childList:!0,characterData:!0,subtree:!0});a.B.forEach(function(a){a.disconnect()});for(var c=a.B.length=0;c<b.childNodes.length;c++){var d=b.childNodes[c];if(1===d.nodeType){var e=new MutationObserver(a.Yl.bind(a));e.observe(d,{attributes:!0,subtree:!0});a.B.push(e)}}}g=Q3.prototype;g.Ok=function(a){a.target&&a.key&&this.set(a.key,a.target.get(a.key))};
g.jp=function(){this.o&&(this.o(),sj(this.element));this.o=null;var a=this.l;a&&(this.o=a.postRender.addEventListener(this.kg.bind(this)),this.kg(),a=this.stopEvent?this.I.j:this.I.l,this.insertFirst?a.insertBefore(this.element,a.childNodes[0]||null):a.appendChild(this.element))};g.Bu=function(){var a=this.getPosition();if(a){var b=M(this.xa.Y()).Wa();this.G=Ui(a,b,"EPSG:4326")}else this.G=void 0;this.kg()};
g.Yl=function(){function a(b,c){var d=b.cloneNode();c&&c.appendChild(d);b.nodeType!=Node.TEXT_NODE&&d.addEventListener("click",function(a){b.dispatchEvent(new MouseEvent("click",a));a.stopPropagation()});c=b.childNodes;for(var e=0;e<c.length;e++)c[e]&&a(c[e],d);return d}tj(this.element);var b=this.tb();if(b&&b.parentNode&&b.parentNode.childNodes)for(var c=la(b.parentNode.childNodes),d=c.next();!d.done;d=c.next())d=a(d.value,null),this.element.appendChild(d);b.parentNode&&Zxa(this,b.parentNode)};
g.kg=function(){var a=this.G;if(this.l&&a){a=2===a.length?Cesium.Cartesian3.g(a)[0]:Cesium.Cartesian3.j(a)[0];var b=this.l.camera,c=new Cesium.BoundingSphere(new Cesium.Cartesian3,6356752);(new Cesium.YP(c,b.position)).RR(a)?1!==b.frustum.g(b.position,b.direction,b.up).KR(new Cesium.BoundingSphere(a))?this.ec(!1):(this.ec(!0),a=this.l.g(a),Yxa(this,[a.x,a.y],[this.l.canvas.width,this.l.canvas.height])):this.ec(!1)}else this.ec(!1)};
g.destroy=function(){this.o&&this.o();this.A&&this.A.disconnect();Dh(this.j);this.j.splice(0);this.element.removeNode?this.element.removeNode(!0):this.element.remove();this.element=null};function R3(a,b){var c=this;this.map=a;this.o=this.map.Sj();this.scene=b;this.j=document.createElement("DIV");this.j.className="ol-overlaycontainer-stopevent";"click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" ").forEach(function(a){I(c.j,a,function(a){return a.stopPropagation()})});this.scene.canvas.parentElement.appendChild(this.j);this.l=document.createElement("DIV");this.l.className="ol-overlaycontainer";this.scene.canvas.parentElement.appendChild(this.l);
this.g={}}R3.prototype.sd=function(){$xa(this);this.o.forEach(this.s,this);this.o.on("add",this.A.bind(this));this.o.on("remove",this.B.bind(this))};R3.prototype.A=function(a){this.s(a.element)};R3.prototype.s=function(a){if(a){var b=new Q3({scene:this.scene,synchronizer:this,parent:a});a=H(a).toString();this.g[a]=b}};R3.prototype.B=function(a){a=H(a.element).toString();var b=this.g[a];b&&(b.destroy(),delete this.g[a])};
function $xa(a){Object.keys(a.g).forEach(function(b){a.g[b].destroy();delete a.g[b]})};function S3(a){this.bb=null;this.ha=a.map;this.nb=a.time||function(){return Cesium.JulianDate.now()};this.Nb=Xi(M(this.ha).Wa(),"EPSG:4326");this.pa=this.Z=0;this.ka=!0;this.A=document.createElement("DIV");var b=document.createAttribute("style");b.value="position:absolute;top:0;left:0;width:100%;height:100%;visibility:hidden;";this.A.setAttributeNode(b);if(b=a.target||null)"string"===typeof b&&(b=document.getElementById(b)),b.appendChild(this.A);else{var c=this.ha.g.querySelector(".ol-overlaycontainer");
c&&c.parentNode&&c.parentNode.insertBefore(this.A,c)}if((this.B=!b)&&a.stopOpenLayersEventsPropagation){b="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" ");c=0;for(var d=b.length;c<d;++c)I(this.A,b[c],function(a){return a.stopPropagation()})}this.j=document.createElement("CANVAS");b=document.createAttribute("style");b.value="position:absolute;top:0;left:0;width:100%;height:100%;";this.j.setAttributeNode(b);c3()&&(b=this.j.style,c3(),b.imageRendering=jxa||
"");this.j.oncontextmenu=function(){return!1};this.j.onselectstart=function(){return!1};this.A.appendChild(this.j);this.o=!1;this.Ca=[];this.l=null;b=void 0!==a.sceneOptions?a.sceneOptions:{};b.canvas=this.j;b.scene3DOnly=!0;this.g=new Cesium.Scene(b);b=this.g.screenSpaceCameraController;b.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.SHIFT});b.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.ALT});
b.enableLook=!1;this.g.camera.constrainedAxis=Cesium.Cartesian3.UNIT_Z;this.s=new z3(this.g,this.ha);this.ra=new Cesium.Globe(Cesium.Ellipsoid.WGS84);this.ra.baseColor=Cesium.Color.WHITE;this.g.globe=this.ra;this.g.skyAtmosphere=new Cesium.SkyAtmosphere;b=new Cesium.SingleTileImageryProvider({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",rectangle:Cesium.Rectangle.fromDegrees(0,0,1,1)});this.ra.imageryLayers.addImageryProvider(b,
0);this.hb=new Cesium.DataSourceCollection;this.N=new Cesium.DataSourceDisplay({scene:this.g,dataSourceCollection:this.hb});a=a.createSynchronizers?a.createSynchronizers(this.ha,this.g,this.hb):[new B3(this.ha,this.g),new J3(this.ha,this.g),new R3(this.ha,this.g)];this.aq();for(b=a.length-1;0<=b;--b)a[b].sd();this.B&&(a=this.j.nextElementSibling)&&(a.style.display="none");this.jb=0;this.U=void 0;this.Ia=Number.POSITIVE_INFINITY;this.I=!1;this.P=this.G=this.oa=null;this.Ea=!1;this.L=new Cesium.BoundingSphere;
(new Cesium.EventHelper).add(this.g.postRender,S3.prototype.ON,this);Cesium.Camera.g=!1}
Object.defineProperties(S3.prototype,{trackedFeature:{get:function(){return this.oa},set:function(a){if(this.oa!==a){var b=this.g;if(a&&a.X()){this.oa=a;this.Ea=!0;var c=this.Nb;b={position:new Cesium.CallbackProperty(function(){var b=a.X().getCoordinates();b=c(b,void 0,b.length);return Zu(b)},!1),point:{pixelSize:1,color:Cesium.Color.TRANSPARENT}};this.G=this.N.defaultDataSource.entities.add(b)}else this.Ea=!1,b.screenSpaceCameraController.enableTilt=!0,this.G&&this.N.defaultDataSource.entities.remove(this.G),
this.P=this.oa=this.G=null,b.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}}}});function T3(a){void 0!==a.U&&(cancelAnimationFrame(a.U),a.U=void 0);a.o&&!a.I&&(a.U=requestAnimationFrame(a.cG.bind(a)))}g=S3.prototype;
g.cG=function(a){this.U=void 0;a-this.jb<1E3/this.Ia||(this.jb=a,a=this.nb(),this.g.initializeFrame(),this.aq(),this.N.update(a),this.P&&this.N.getBoundingSphere(this.G,!1,this.L)===Cesium.BoundingSphereState.DONE&&(this.L.radius=1,this.P.update(a,this.L)),this.g.render(a),this.s.ql());T3(this)};
g.ON=function(){if(this.Ea){var a=this.G,b=this.g,c=this.N.getBoundingSphere(a,!1,this.L);if(c!==Cesium.BoundingSphereState.PENDING){b.screenSpaceCameraController.enableTilt=!1;if(c=c!==Cesium.BoundingSphereState.FAILED?this.L:void 0)c.radius=1;this.P=new Cesium.EntityView(a,b,b.mapProjection.ellipsoid);this.P.update(this.nb(),c);this.Ea=!1}}};
g.aq=function(){var a=this.j.clientWidth,b=this.j.clientHeight;if(!(0===a|0===b||a===this.Z&&b===this.pa&&!this.ka)){var c=1;c3()||(c*=window.devicePixelRatio||1);this.ka=!1;this.Z=a;this.pa=b;a*=c;b*=c;this.j.width=a;this.j.height=b;this.g.camera.frustum.aspectRatio=a/b}};g.mc=function(){return this.o};
g.eb=function(a){var b=this;if(this.o!==a)if(this.o=a,this.A.style.visibility=this.o?"visible":"hidden",this.o){aya(this);if(this.B){var c=this.ha.interactions;c.forEach(function(a){b.Ca.push(a)});c.clear();a=tn(this.ha);a.Hb()&&(this.l=a,this.l.ec(!1));this.ha.B.classList.add("olcs-hideoverlay");this.ha.A.classList.add("olcs-hideoverlay")}this.s.Lh();T3(this)}else this.B&&(c=this.ha.interactions,this.Ca.forEach(function(a){c.push(a)}),this.Ca.length=0,this.ha.B.classList.remove("olcs-hideoverlay"),
this.ha.A.classList.remove("olcs-hideoverlay"),this.l&&(this.l.ec(!0),this.l=null)),this.s.bl()};function aya(a){a=M(a.ha);var b=$k(a);if(!Zk(a)||isNaN(b[0])||isNaN(b[1]))throw Error("The OpenLayers map is not properly initialized: "+b+" / "+a.ab());};function U3(){y.call(this);this.enabled=this.A=!1;this.map=void 0;this.log=bya;this.g=void 0;this.jN=60;this.B="bgColor os.map.enableLighting os.map.enableTerrain os.map.fogEnabled os.map.fogDensity os.map.terrainOptions".split(" ")}w(U3,y);var bya=E.V("os.webgl.AbstractWebGLRenderer");g=U3.prototype;g.J=function(){U3.C.J.call(this);this.B.forEach(function(a){O.M(a,this.Gw,!1,this)},this)};g.Y=function(){return this.map};g.setMap=function(a){this.map=a};g.Vm=function(){return this.A};
g.Ar=function(){this.A||(this.B.forEach(function(a){O.H(a,this.Gw,!1,this)},this),this.A=!0);return Wc()};g.By=va;function cla(a){a.g&&a.g.reset()}g.mc=function(){return this.enabled};g.eb=function(a){this.g&&this.g.setActive(a);this.enabled=a};
g.Gw=function(a){switch(a.type){case "bgColor":a=a.j;wv(a)&&this.Cy(a);break;case "os.map.enableLighting":this.Rz(!!a.j);break;case "os.map.enableTerrain":this.ys(!!a.j);break;case "os.map.fogEnabled":this.vs(!!a.j);break;case "os.map.fogDensity":"number"===typeof a.j&&this.ks(a.j);break;case "os.map.terrainOptions":this.mc()&&this.Ks()}};g.Cy=function(){};g.vs=function(){};g.ks=function(){};g.Rz=function(){};g.xo=function(){O.set("os.map.enableTerrain",!1);C.dispatchEvent("map:terrainDisabled")};
g.ys=function(){};g.Ks=function(){};g.cu=function(){return["absolute"]};function V3(a,b){this.l=a;this.g=a.camera;this.ha=b;this.s=this.o=0;this.L=null;this.A=this.I=!1;this.P=new uR(this.bl,100,this)}w(V3,z3);z3=V3;g=V3.prototype;g.mc=function(){return this.A};g.eb=function(a){(this.A=a)&&this.Lh()};g.Qg=function(){return this.g.positionCartographic.height};g.aa=function(){var a=this.g.computeViewRectangle();return a?[a.west,a.south,a.east,a.north].map(Cesium.Math.toDegrees):void 0};g.ju=function(){return this.g.heading};
g.Fz=function(a){this.g.setView({NR:this.g.positionCartographic,orientation:{heading:a,pitch:this.g.pitch,roll:this.g.roll}})};g.pu=function(){return this.o};g.An=function(a){this.o=a;this.Yk()};
function RP(a,b){if(a.A){var c=null!=b.duration?b.duration:1E3,d="smooth"===b.flightMode?Cesium.EasingFunction.LINEAR_NONE:void 0;if(b.center){var e=Ui(b.center,N,"EPSG:4326");var f=new Cesium.Cartographic(si(e[0]),si(e[1]))}else f=a.g.positionCartographic.clone();e=null!=b.altitude?b.altitude:a.Qg();e=Math.min(e,a.l.screenSpaceCameraController.maximumZoomDistance);var h=null!=b.heading?si(b.heading):a.g.heading,k=null!=b.pitch?si(b.pitch):a.g.pitch,l=null!=b.roll?si(b.roll):a.g.roll;b.positionCamera?
(f.height=e,a.g.flyTo({destination:Cesium.Ellipsoid.WGS84.cartographicToCartesian(f),duration:c/1E3,easingFunction:d,orientation:{heading:h,pitch:k,roll:l}})):(f.height=0,f=new Cesium.BoundingSphere(Cesium.Ellipsoid.WGS84.cartographicToCartesian(f)),b=new Cesium.HeadingPitchRange(h,k,null!=b.range?b.range:e),a.g.flyToBoundingSphere(f,{offset:b,duration:c/1E3,easingFunction:d}))}}
function W3(a){var b,c=document.querySelector("canvas.webgl-canvas");c&&(b=a.g.pickEllipsoid(new Cesium.Cartesian2(c.width/2,c.height/2)));return b?Cesium.Cartesian3.distance(a.g.positionWC,b):a.Qg()}
function cya(a,b){var c=Cesium.SceneTransforms.wgs84ToWindowCoordinates(a.l,b);if(c&&0<c.x&&0<c.y){var d=document.querySelector("canvas.webgl-canvas");if(c.x<=d.width&&c.y<=d.height){var e=Cesium.Cartesian3.distance(b,a.g.positionWC);(b=a.g.pickEllipsoid(c))&&Cesium.Cartesian3.distance(b,a.g.positionWC)<e&&(e=void 0)}}return e}function cS(a,b){var c=W3(a);b=c-c*b;var d=a.l.screenSpaceCameraController,e=d.maximumZoomDistance;b<c-e&&(b=c-e);Math.abs(b)>d.minimumZoomDistance&&a.g.zoomIn(b)}
g.Yk=function(){var a=M(this.ha);if(a){var b=$k(a);if(b){b=Ui(b,N,"EPSG:4326");b=new Cesium.Cartographic(si(b[0]),si(b[1]));if(this.l.globe){var c=this.l.globe.getHeight(b);b.height=null!=c?c:0}b=Cesium.Ellipsoid.WGS84.cartographicToCartesian(b);a={pitch:this.o-Cesium.Math.PI_OVER_TWO,heading:-al(a),roll:void 0};this.g.setView({destination:b,orientation:a});this.g.moveBackward(this.s);this.ql(!0)}}};
g.Lh=function(){var a=M(this.ha);if(this.A&&a){var b=$k(a);b&&(Ui(b,N,"EPSG:4326"),a=a.ab()||0,this.s=this.ci(a,0),this.Yk())}};
g.bl=function(){var a=M(this.ha);if(this.A&&a){this.I=!0;var b=Cesium.Ellipsoid.WGS84,c=this.l,d=lxa(c),e=d;e||(e=c.globe,c=this.g.positionCartographic.clone(),e=e.getHeight(c),c.height=null!=e?e:0,e=Cesium.Ellipsoid.WGS84.cartographicToCartesian(c));this.s=Cesium.Cartesian3.distance(e,this.g.position);c=b.cartesianToCartographic(e);cl(a,Ui([180*(c?c.longitude:0)/Math.PI,180*(c?c.latitude:0)/Math.PI],"EPSG:4326",N));c=this.wj(this.s,0);fl(a,a.constrainResolution(c,0,0));if(d){e=this.g.position;c=
new Cesium.Cartesian3;b.geocentricSurfaceNormal(d,c);b=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(e,d,b);Cesium.Cartesian3.normalize(b,b);e=this.g.up;var f=this.g.right,h=new Cesium.Cartesian3(-d.y,d.x,0);f=Cesium.Cartesian3.angleBetween(f,h);d=Cesium.Cartesian3.cross(d,e,new Cesium.Cartesian3).z;gl(a,0>d?f:-f);a=Math.acos(Cesium.Cartesian3.dot(c,b));this.o=isNaN(a)?0:a}else gl(a,this.g.heading),this.o=-this.g.pitch+Math.PI/2;this.I=!1}};
g.ql=function(a){var b=this.L,c=this.g.viewMatrix;b&&Cesium.Matrix4.equalsEpsilon(b,c,1E-5)||(this.L=c.clone(),!0!==a&&this.P.kf())};g.ci=function(a,b){var c=this.l.canvas,d=this.g.frustum.fovy,e=yi(M(this.ha).Wa());return a*(c.clientHeight||300)*e*Math.cos(Math.abs(b))/2/Math.tan(d/2)};g.wj=function(a,b){var c=this.l.canvas,d=this.g.frustum.fovy,e=yi(M(this.ha).Wa());return 2*a*Math.tan(d/2)/e/Math.cos(Math.abs(b))/c.clientHeight};
g.sa=function(){var a=this.g.positionCartographic,b=nB(180*a.latitude/Math.PI)||0,c=nB(180*a.longitude/Math.PI)||0;a=a.height;var d=M(this.ha).Wa(),e=hu(this.ha,a);d=cu(e,d,1);return{center:[c,b],altitude:a,heading:180*this.g.heading/Math.PI,roll:180*this.g.roll/Math.PI,tilt:Je(180*this.g.pitch/Math.PI,-90,0)+90,zoom:d}};
g.restore=function(a){var b=new Cesium.Cartographic(Le(a.center[0]),Le(a.center[1]),a.altitude);this.g.setView({destination:Cesium.Ellipsoid.WGS84.cartographicToCartesian(b),orientation:{heading:Le(a.heading),pitch:Le(a.tilt-90),roll:Le(a.roll)}})};iT.prototype.o=void 0;iT.prototype.B=void 0;function dya(){var a=T.u().g;(a=a?X3(a):void 0)&&this.o&&(a.primitives.remove(this.o),this.o=void 0)}
function eya(a,b){if(T.u().Qa()){this.B||(this.B=new Cesium.ColorGeometryInstanceAttribute(Cesium.Color.byteToFloat(this.color[0]),Cesium.Color.byteToFloat(this.color[1]),Cesium.Color.byteToFloat(this.color[2]),this.color[3]));var c=T.u().g;c=c?X3(c):void 0;a=Vi(a,M(this.Y()).Wa());b=Vi(b,M(this.Y()).Wa());c&&a&&b&&(this.o&&c.primitives.remove(this.o),a=this.s.X().getCoordinates()[0].map(pT),b=new Cesium.PolylineColorAppearance,this.o=new Cesium.Primitive({asynchronous:!1,geometryInstances:new Cesium.GeometryInstance({id:"geometryOutline",
geometry:new Cesium.PolylineGeometry({positions:h3(a),vertexFormat:b.vertexFormat,width:2}),attributes:{color:this.B}}),appearance:b}),c.primitives.add(this.o),C.dispatchEvent("map:glRepaint"))}};lT.prototype.A=void 0;lT.prototype.B=void 0;lT.prototype.o=void 0;lT.prototype.G=void 0;function fya(){var a=T.u().g;if(a=a?X3(a):void 0)this.A&&a.primitives.remove(this.A),this.B&&a.primitives.remove(this.B),this.o=this.B=this.A=void 0}
function gya(a,b){if(T.u().Qa()){this.G||(this.G=new Cesium.ColorGeometryInstanceAttribute(0,1,1,1));var c=T.u().g;c=c?X3(c):void 0;a=Vi(a,M(this.Y()).Wa());b=Vi(b,M(this.Y()).Wa());if(c&&a&&b&&this.distance){this.B||(this.B=new Cesium.LabelCollection,c.primitives.add(this.B));this.o||(this.o=this.B.add(),this.o.show=!1,this.o.fillColor=Cesium.Color.YELLOW,this.o.scale=.6);this.A&&c.primitives.remove(this.A);a=Cesium.Cartesian3.fromDegrees(a[0],a[1]);b=new Cesium.PolylineColorAppearance;var d=Cesium.Primitive,
e=Cesium.GeometryInstance,f=Cesium.PolylineGeometry,h=this.distance;h=Cesium.EllipseGeometryLibrary.computeEllipsePositions({center:a,semiMajorAxis:h,semiMinorAxis:h,granularity:Cesium.Math.RADIANS_PER_DEGREE,rotation:0},!1,!0).outerPositions;for(var k=[];0<h.length;){var l=ob(h,0,3);l=new Cesium.Cartesian3(l[0],l[1],l[2]);k.push(l)}0<k.length&&k.push(k[0]);this.A=new d({asynchronous:!1,appearance:b,geometryInstances:new e({geometry:new f({positions:k,vertexFormat:b.vertexFormat,width:2}),attributes:{color:this.G}})});
b=$z.u();this.o.text=cA(b,this.distance,3);this.o.position=a;this.o.show=!0;c.primitives.add(this.A);C.dispatchEvent("map:glRepaint")}}};oT.prototype.pa=void 0;oT.prototype.G=void 0;function hya(){var a=T.u().g;if(a=a?X3(a):void 0)this.pa=void 0,this.G&&(a.primitives.remove(this.G),this.G=void 0)}
function iya(){if(T.u().Qa()){this.pa||(this.pa=j3(this.color));var a=T.u().g;a=a?X3(a):void 0;var b=this.g.X().getCoordinates().map(pT);a&&0<b.length&&(this.G?this.G.removeAll():(this.G=new Cesium.PolylineCollection,a.primitives.add(this.G)),this.G.add({asynchronous:!1,show:!0,material:Cesium.Material.fromType(Cesium.Material.ColorType,{color:this.pa}),positions:Cesium.PolylinePipeline.generateCartesianArc({positions:h3(b)}),width:2}),C.dispatchEvent("map:glRepaint"))}};xT.prototype.A=void 0;function jya(){hya.call(this);var a=T.u().g;(a=a?X3(a):void 0)&&this.A&&(a.primitives.remove(this.A),this.A=null)}
function kya(){iya.call(this);if(T.u().Qa()){var a=T.u().g,b=a?X3(a):void 0;a=this.coords.map(pT);if(b&&1<a.length){var c=Yu(T.u());this.A||(this.A=new Cesium.LabelCollection,b.primitives.add(this.A));b=this.A.length===this.o.length?this.A.get(this.A.length-1):this.A.add();var d=this.o.length-1;b.show=!1;b.eyeOffset=new Cesium.Cartesian3(0,0,-(W3(c)/5));b.font=wH(14);b.style=Cesium.LabelStyle.FILL_AND_OUTLINE;b.outlineWidth=2;b.outlineColor=new Cesium.Color(0,0,0);b.pixelOffset=new Cesium.Cartesian2(4,
0);b.position=Cesium.Cartesian3.fromDegrees(a[d][0],a[d][1]);b.text=zT(this,d);b.show=!0}}};function lya(a,b,c){var d=new Image;d.onload=function(){c.resolve(d)};d.onerror=function(a){c.reject(a)};b&&(d.crossOrigin=sx(a));d.src=a}
function mya(){if(void 0===window.Cesium)throw Error("Cesium has not been loaded!");Cesium.Resource._Implementations.createImage=lya;Cesium.Resource.prototype._makeRequest=function(a){var b=new Ys(a.url||this.url),c=a.headers||this.headers;c&&(b.N=c);a.responseType&&(b.B=a.responseType);var d=Cesium.when.defer();ad(cd(dea(b).then(function(a){d.resolve(a)}),function(a){d.reject(a)}),function(){C.dispatchEvent("map:glRepaint")});return d.promise};Cesium.sj=function(a,b,c){this.g=a;this.key=b;this.color=
c};Cesium.defineProperties(Cesium.sj.prototype,{object:{get:function(){return this.g._pickObjects[this.key]},set:function(a){this.g._pickObjects[this.key]=a}}});Cesium.sj.prototype.destroy=function(){this.g._pickObjects[this.key]=void 0;this.g=null};Cesium.sj.prototype.destroy=Cesium.sj.prototype.destroy;Cesium.Context.prototype.g=function(){this._pickObjects=ys(this._pickObjects)};Cesium.Context.prototype.j=function(a){if(!Cesium.defined(a))throw new Cesium.DeveloperError("object is required.");
++this._nextPickColor[0];var b=this._nextPickColor[0];if(0===b)throw new Cesium.RuntimeError("Out of unique Pick IDs.");this._pickObjects[b]=a;return new Cesium.sj(this,b,Cesium.Color.fromRgba(b))};Cesium.Context.prototype.createPickId=Cesium.Context.prototype.j};function Y3(a){PP.call(this,a);this.ma=$b();this.l=this.B="Image";this.j="Image Overlay";a.title&&this.Ta(this.j+" - "+a.title);this.g=!1;this.N=this.G=null;this.I=!0;this.s=null;this.A="defaultlayerui";this.P=!0;this.L="image";this.o=!0;this.Cf(999)}w(Y3,PP);P(Y3,"os.layer.ILayer");g=Y3.prototype;g.J=function(){Y3.C.J.call(this);this.Va(!1);var a=this.O();a&&a.dispose();a=nH.u();var b=this.D();b in a.g&&delete a.g[b]};g.Sa=function(){return this.s};g.Nk=function(a){this.s=a};g.mb=function(){return this.g};
g.Va=function(a){if(this.g!==a){var b=this.g;this.g=a;this.dispatchEvent(new U("loading",a,b))}};g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.rb=function(){return this.G};g.Cc=function(a){this.G=a};g.ve=function(){return this.I};g.hg=function(a){this.I=a};g.getTags=function(){return this.N};g.vb=function(a){this.N=a};g.S=function(){return this.j};g.Ta=function(a){if(this.j!==a){var b=this.j;this.j=a;this.dispatchEvent(new U("title",a,b))}};g.Qc=function(){return this.B};
g.Zd=function(a){this.B=a};g.Nf=function(){return this.l};g.ye=function(a){this.l=a};g.bd=function(){return this.P};g.Bd=function(a){this.P=a=!!a;this.ec(a);this.dispatchEvent(new U("visible",a,!a))};g.fg=function(a){this.ec(a)};g.Ij=function(){return this.Hb()};g.Qd=function(){return"<defaultlayernodeui></defaultlayernodeui>"};g.Bf=function(){};g.Nj=function(){return this.A};g.gg=function(a){this.A=a};
g.td=function(){var a=mH(nH.u(),this.D());return a?(a=QB(a,!0),DN(this.D(),['<image xlink:href="v1542394219/images/features-base.png" x="0" y="0" width="16px" height="16px"><title>Feature layer</title></image>'],[],a)):'<img src="v1542394219/images/features-base.png" title="Feature layer"/>'};g.Ll=function(){return null};g.Tl=function(){return this.L};g.Pk=function(a){this.L=a};g.Mj=function(){return this.o};g.vn=function(a){this.o=a};
g.Uk=function(a,b){if(bv)switch(a){case "identify":case "goTo":return!0;case "rename":return!!b&&ya(b)&&1===b.length;case "layer:remove":return this.ve();case "refresh":return!0}return!1};g.di=function(a){if(bv)switch(a){case "identify":mw(this);break;case "layer:remove":a=new BA("removeLayer",this.D());C.dispatchEvent(a);break;case "rename":cP(this)}};
g.sa=function(a){a=a||{};a.visible=this.bd();a.opacity=this.Xb();a.minResolution=this.he();a.maxResolution=this.ge();var b=mH(nH.u(),this.D());b&&(a.color=QB(b),a.size=fH(b));return a};
g.restore=function(a){void 0!==a.id&&this.ga(a.id);void 0!==a.provider&&this.Cc(a.provider);void 0!==a.tags&&this.vb(a.tags);void 0!==a.title&&this.Ta(a.title);void 0!==a.layerType&&this.Zd(a.layerType);void 0!==a.explicitType&&this.ye(a.explicitType);void 0!==a.visible&&this.Bd(a.visible);var b=a.opacity;void 0!==b&&this.rd(b);this.lj(a.minResolution||this.he());this.kj(a.maxResolution||this.ge())};function Z3(a){y.call(this);this.map=a;this.s=this.o=!1;this.l=[];this.g={};this.j=new le(this.PN,250,this)}w(Z3,y);g=Z3.prototype;g.J=function(){Z3.C.J.call(this);this.l.forEach(rh);this.l.length=0;Ma(this.j);this.map=this.j=void 0};
g.sd=function(){if(!this.s){for(var a=un(this.map).g,b=0,c=a.length;b<c;b++){var d=a[b];if(d instanceof lP){this.l.push(I(d,"zOrderUpdate",this.zH,this));this.l.push(I(d,"addLayer",this.SH,this));this.l.push(I(d,"removeLayer",this.UH,this));d=mn(d).g;for(var e=0,f=d.length;e<f;e++){var h=d[e];h instanceof sl&&nya(this,h)}}}this.s=!0}};g.reset=function(){for(var a in this.g)this.g[a].reset()};g.setActive=function(a){this.o=a;for(var b in this.g)this.g[b].setActive(a)};
function nya(a,b){var c=b.D();if(c){var d=a.g[c];if(!d){var e=w3.u();var f=b.Tl();(e=f?e.g[f]:null)&&(d=a.Lt(e,b))}d&&(a.g[c]=d,d.setActive(a.o),d.sd(),C.dispatchEvent("map:glRepaint"))}}g.Lt=function(a,b){return new a(b,this.map)};g.zH=function(a){a=a.target;a instanceof lP&&this.Hs(a)};g.PN=function(){for(var a=un(this.map).g,b=0,c=a.length;b<c;b++){var d=a[b];d instanceof lP&&this.Hs(d)}};g.Hs=function(){};
g.SH=function(a){a&&a.layer&&(a="string"===typeof a.layer?T.u().W(a.layer):a.layer,a instanceof sl&&(nya(this,a),this.j&&this.j.start()))};g.UH=function(a){a&&a.layer&&(a="string"===typeof a.layer?T.u().W(a.layer):a.layer)&&(a=a.D(),this.g[a]&&(this.g[a].dispose(),delete this.g[a],this.j&&this.j.start()))};function $3(a,b){Z3.call(this,a);this.A=b}w($3,Z3);$3.prototype.J=function(){$3.C.J.call(this);this.A=void 0};$3.prototype.Lt=function(a,b){return new a(b,this.map,this.A)};
$3.prototype.Hs=function(a){var b=mn(a).g;if(0<b.length){var c=0,d=0;if(b[0]instanceof HN)c=WP(T.u(),HN),d=oya(this,a);else if(b[0]instanceof MK){d=c=WP(T.u(),MK);for(var e=0,f=un(this.map).g,h=f.length;h--&&f[h]!=a;){var k=mn(f[h]).g;0<k.length&&k[k.length-1]instanceof MK&&(e+=k.length)}d=d-e-b.length+1}else b[0]instanceof Y3&&(c=WP(T.u(),Y3),d=oya(this,a));a=0;for(e=b.length;a<e;a++)f=b[a].D(),(f=this.g[f])&&(d=f.Ik(d,c));C.dispatchEvent("map:glRepaint")}};
function oya(a,b){var c=0,d=un(a.map).g;b=d.indexOf(b);if(0<b)for(;b--;){var e=mn(d[b]).g;if(0<e.length&&(e=e[e.length-1],e instanceof Y3||e instanceof HN)&&(e=e.D(),e=a.g[e])){c=pya(e)+1;break}}return c};function a4(){U3.call(this);this.log=qya;this.Kb=void 0;this.s=!1;this.l=[];this.j=void 0;this.o={}}w(a4,U3);var qya=E.V("plugin.cesium.CesiumRenderer");function X3(a){return a.Kb?a.Kb.g:void 0}g=a4.prototype;g.Vm=function(){return!!this.Kb};
g.Ar=function(){return!this.Kb&&this.map?new Oc(function(a,b){sxa().then(function(){try{mya();k3.init();iT.prototype.xx=dya;iT.prototype.yx=eya;lT.prototype.zx=fya;lT.prototype.Ax=gya;oT.prototype.Nq=hya;oT.prototype.Oq=iya;xT.prototype.Nq=jya;xT.prototype.Oq=kya;b4(this,"cesium",wxa);b4(this,"cesium-ion",xxa);b4(this,"wms",yxa);this.Kb=new S3({GR:V3,createSynchronizers:this.oC.bind(this),map:this.map,time:uxa});HH(this.Kb.j,"webgl-canvas");var c=this.Kb,d=this.jN;c.Ia!==d&&(c.Ia=d,T3(c));var e=this.Kb.g;
e.globe.enableLighting=!!O.get("os.map.enableLighting",!1);e.camera.frustum.fov=Cesium.Math.PI_OVER_THREE;var f=O.get(["bgColor"],"#000000");e.globe.baseColor=Cesium.Color.fromCssColorString(f);Cesium.TerrainProvider.g=qd?.05:.25;this.Ks();this.vs(O.get("os.map.fogEnabled",!0));var h=O.get("os.map.fogDensity",.5);0!=h&&.05>h&&(h=.5);this.ks(h);var k=this.Kb.s=new V3(e,this.map),l=e.screenSpaceCameraController,m=du(0,N);l.maximumZoomDistance=k.ci(m,0);l.lookEventTypes=[{eventType:Cesium.CameraEventType.RIGHT_DRAG,
modifier:Cesium.KeyboardEventModifier.SHIFT}];l.enableLook=!0;l.tiltEventTypes=[Cesium.CameraEventType.MIDDLE_DRAG,Cesium.CameraEventType.RIGHT_DRAG];l.rotateEventTypes=[Cesium.CameraEventType.LEFT_DRAG];l.zoomEventTypes=[Cesium.CameraEventType.WHEEL,Cesium.CameraEventType.PINCH,{eventType:Cesium.CameraEventType.WHEEL,modifier:Cesium.KeyboardEventModifier.CTRL}];l.maximumMovementRatio=.02;l.inertiaSpin=0;l.inertiaTranslate=0;l.inertiaZoom=0;var n=this.Kb;n.bb||(n.bb=new y3(n));U3.prototype.Ar.call(this);
a()}catch(p){E.error(this.log,"Failed to create 3D view!",p),b()}},b,this)},this):Wc()};g.eb=function(a){a4.C.eb.call(this,a);if(this.Kb)if(this.Kb.eb(a),a){if(a=this.Kb.g)this.l.push(a.camera.moveStart.addEventListener(this.Ov.bind(this,!0))),this.l.push(a.camera.moveEnd.addEventListener(this.Ov.bind(this,!1)))}else{a=0;for(var b=this.l.length;a<b;a++)this.l[a]();this.l.length=0}};g.By=function(){if(this.Kb){var a=this.Kb.g;a&&(a.initializeFrame(),a.forceRender(uxa()))}};
g.Cy=function(a){this.Kb&&(this.Kb.g.globe.baseColor=Cesium.Color.fromCssColorString(a),C.dispatchEvent("map:glRepaint"))};g.vs=function(a){var b=this.Kb?this.Kb.g:void 0;b&&b.fog.enabled!=a&&(b.fog.enabled=a,C.dispatchEvent("map:glRepaint"))};g.ks=function(a){var b=this.Kb?this.Kb.g:void 0;b&&(a=Je(3E-4*a,0,3E-4),b.fog.density!=a&&(b.fog.density=a),C.dispatchEvent("map:glRepaint"))};g.Rz=function(a){var b=this.Kb?this.Kb.g:void 0;b&&(b.globe.enableLighting=a,C.dispatchEvent("map:glRepaint"))};
g.ys=function(a){if(this.Kb){var b=this.Kb.g;b&&((a=a?this.j:void 0)||(o3||void 0===window.Cesium||(o3=new Cesium.EllipsoidTerrainProvider),a=o3),a&&(b.terrainProvider=a),C.dispatchEvent("map:glRepaint"))}};function b4(a,b,c){b=b.toLowerCase();b in a.o?E.error(a.log,'The terrain provider type "'+b+'" already exists!'):a.o[b]=c}g.xo=function(){rya(this);a4.C.xo.call(this)};
g.Ks=function(){rya(this);var a=O.get("os.map.terrainOptions");if(a){var b=a.type;if(b&&b in this.o){if(a.url){var c=a.url;if(c&&sx(c)===tx){c=new Ve(c);var d=c.o;if(!d){var e=c.l;e||(e=(new Ve(window.location)).l);d="https"===e?443:"http"===e?80:d}d&&Cesium.TrustedServers.add(c.j,d)}}this.j=this.o[b](a);this.j.errorEvent.addEventListener(this.Nw,this)}else b?b in this.o||E.error(this.log,"Unknown terrain provider type: "+b):E.error(this.log,"Terrain provider type not configured.")}a=!!O.get("os.map.enableTerrain",
!1);this.ys(a)};function rya(a){a.j&&(a.j.errorEvent.removeEventListener(a.Nw,a),a.j=void 0)}g.Nw=function(a){E.error(this.log,"Terrain provider initialization error: "+a.message);At(Ct,"Terrain provider failed to initialize and will be disabled. Please see the log for more details.",rs);this.xo()};g.oC=function(a,b){this.g||(this.g=new $3(a,b));return[this.g]};
g.Ov=function(a){if(this.map){var b=M(this.map);if(a&&!this.s)this.s=!0,bl(b,1,1);else if(!a&&this.s&&(this.s=!1,bl(b,1,-1),this.g)){a=this.g;for(var c in a.g)a.g[c].Br()}}};g.cu=function(){return["clampToGround","absolute","relativeToGround"]};S3.prototype.aq=function(){var a=this.j.clientWidth,b=this.j.clientHeight;0===a||0===b||a===this.Z&&b===this.pa&&!this.ka||null!=this.zb||(!0!==this.I&&(this.I=!0,T3(this)),this.zb=setTimeout(function(){var c=1;c3()||(c*=window.devicePixelRatio||1);this.ka=!1;this.Z=a;this.pa=b;a*=c;b*=c;this.j.width=a;this.j.height=b;this.g.camera.frustum.aspectRatio=a/b;this.zb=void 0;!1!==this.I&&(this.I=!1,T3(this))}.bind(this),100))};
S3.prototype.eb=function(a){this.o!==a&&(this.o=a,this.A.style.visibility=this.o?"visible":"hidden",this.o?(this.B&&(a=this.ha.interactions,a.forEach(function(a){P(a,"os.I3DSupport")&&a.yc()||a.setActive(!1)}),a=tn(this.ha),a.Hb()&&(this.l=a,this.l.ec(!1))),this.s.eb(!0),this.s.Lh(),T3(this)):(this.s.bl(),this.s.eb(!1),this.B&&(a=this.ha.interactions,a.forEach(function(a){P(a,"os.I3DSupport")&&a.yc()||a.setActive(!0)}),null!==this.l&&(this.l.ec(!0),this.l=null))))};(function(){var a=y3.prototype.o;y3.prototype.o=function(){C.H("map:glRepaint",this.g,!1,this);hw.u().H("timeline.show",this.g,!1,this);this.j.postUpdate.addEventListener(this.G,this);a.call(this)};var b=y3.prototype.B;y3.prototype.B=function(){C.M("map:glRepaint",this.g,!1,this);hw.u().M("timeline.show",this.g,!1,this);this.j.postUpdate.removeEventListener(this.G,this);b.call(this)};var c=y3.prototype.g,d=0;y3.prototype.G=function(){1E3>Ha()-d&&this.j.requestRender()};y3.prototype.g=function(a){if(!(a&&
a.type&&-1<a.type.indexOf("move"))||a.buttons||a.touches&&a.touches.length||a.pointerId&&0<a.pressure)c.call(this),d=Ha()}})();function B4(a,b){y.call(this);this.A=!1;this.layer=a;this.map=b;this.view=M(b);this.l=hw.u()}w(B4,y);B4.prototype.setActive=function(a){this.A=a};B4.prototype.Ik=function(a){return++a};B4.prototype.Br=va;function C4(a,b,c){B4.call(this,a,b);this.scene=c}w(C4,B4);function D4(a,b,c){this.log=sya;this.B=!1;this.billboards=new Cesium.BillboardCollection({scene:a});this.labels=new Cesium.LabelCollection({scene:a});this.o=new Cesium.PolylineCollection;this.layer=b;this.projection=c;this.featureToCesiumMap={};this.j={};this.s={};this.l={};this.scene=a;this.A=new uR(this.G,500,this);this.g=new Cesium.PrimitiveCollection;this.g.add(this.billboards);this.g.add(this.labels);this.g.add(this.o)}var sya=E.V("plugin.cesium.VectorContext");
D4.prototype.dispose=function(){if(!this.Xa()){Ma(this.A);this.g.destroyPrimitives=!0;try{this.billboards&&(E4(this,this.billboards),this.g.remove(this.billboards),this.billboards=null),this.labels&&(E4(this,this.labels),this.g.remove(this.labels),this.labels=null),this.o&&(E4(this,this.o),this.g.remove(this.o),this.o=null),E4(this,this.g)}catch(a){E.error(this.log,"Failed disposing vector context",a)}finally{this.B=!0}}};D4.prototype.Xa=function(){return this.B};
function tya(a){a.featureToCesiumMap=ys(a.featureToCesiumMap);a.j=ys(a.j);a.s=ys(a.s);a.l=ys(a.l);a.scene.context.g()}function F4(a,b,c,d){if(b&&(b.olLayer=a.layer,b.olFeature=c,b.olGeometry=d,b instanceof Cesium.PrimitiveCollection))for(var e=0,f=b.length;e<f;e++){var h=b.get(e);h&&F4(a,h,c,d)}}
function E4(a,b){if(b&&(b.olLayer=void 0,b.olFeature=void 0,b.olGeometry=void 0,b instanceof Cesium.PrimitiveCollection||b instanceof Cesium.BillboardCollection||b instanceof Cesium.LabelCollection))for(var c=0,d=b.length;c<d;c++){var e=b.get(c);e&&E4(a,e)}}D4.prototype.G=function(){this.billboards._billboardsToUpdate.length=this.billboards.length};D4.prototype.Zn=function(a,b,c){var d=H(c),e=this.s[d];e&&G4(this,e);b.Xa()||(a=this.labels.add(a),this.s[d]=a,H4(this,b,a),F4(this,a,b,c))};
function G4(a,b){var c=H(b.olGeometry);b instanceof Cesium.Billboard?(a.billboards.remove(b),a.j[c]=void 0):b instanceof Cesium.Label?(a.labels.remove(b),a.s[c]=void 0):(b instanceof Cesium.Polyline?a.o.remove(b):a.g.remove(b),a.j[c]=void 0);b.olFeature&&(c=a.featureToCesiumMap[b.olFeature.id])&&qb(c,b);E4(a,b)}function H4(a,b,c){b=b.id;var d=a.l[b];d=void 0!==d?d:c.show;c.show=d;a.featureToCesiumMap[b]=a.featureToCesiumMap[b]||[];a.featureToCesiumMap[b].push(c);a.l[b]=d};function uya(a){this.scene=a;this.A=this.s=null;this.g=Cesium.HeightReference.NONE;this.j=new Cesium.Cartesian3(0,0,0);this.l=new Cesium.Cartesian3(0,0,1E4);this.o={}}var vya={flat:!0,renderState:{depthTest:{enabled:!0}}};function I4(a){var b=N;if(a.s!==b){var c=Li("EPSG:4326");a.A=Wi(c,b)?null:Xi(b,c);a.s=b}return a.A}function J4(a,b,c){return new Cesium.GeometryInstance({id:a,geometry:b,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(c)}})}
function K4(a,b,c,d){var e=Gs(vya);null!=c&&(e.renderState.lineWidth=Je(c,Cesium.ContextLimits.minimumAliasedLineWidth,Cesium.ContextLimits.maximumAliasedLineWidth));c=null!=c?"geometryOutline":"geometry";a=d?d(c,a,b):J4(c,a,b);e=new Cesium.PerInstanceColorAppearance(e);return new Cesium.Primitive({geometryInstances:a,appearance:e})}function L4(a,b){var c=a.ob()?a.ob().La():null;a=a.kb()?a.kb().La():null;var d="black";a&&b?d=a:c&&(d=c);return j3(d)}
function M4(a){return Math.max(1,a.kb()&&a.kb().g||3)}function wya(a,b,c,d){var e=M4(c);d=d.layer.Xb();var f=new Cesium.PrimitiveCollection;f.olLineWidth=e;if(a){var h=L4(c,!1);h.alpha*=d;f.add(K4(a,h))}b&&(a=L4(c,!0),a.alpha=null!=c.kb()?a.alpha*d:0,f.add(K4(b,a,e)));return f}
function xya(a,b,c,d,e){var f=d.X();f instanceof kj&&(c=f);d=d.ub();f=c.Yb;if(null===b.geomRevision||b.geomRevision!==f){var h=I4(a);a:{var k=c;switch(k.T()){case "Point":k=k.flatCoordinates.slice();break a;case "MultiPoint":k=k.flatCoordinates.slice(0,2);break a;default:k=ii(k.aa())}}if(k){h&&(k=h(k));if(c instanceof tk){var l=vk(c);h&&(l=h(l,void 0,l.length));k[2]=l[2]||0}b.position=Zu(k);b.geomRevision=f}}f=void 0;h=e.layer.Xb();d.ob()&&(b.fillColor=L4(d,!1),b.fillColor.alpha*=h,f=Cesium.LabelStyle.FILL);
d.kb()&&(b.outlineWidth=M4(d),b.outlineColor=L4(d,!0),b.outlineColor.alpha*=h,f=Cesium.LabelStyle.OUTLINE);d.ob()&&d.kb()&&(f=Cesium.LabelStyle.FILL_AND_OUTLINE);f&&(b.style=f);if(d.g){switch(d.g){case "center":var m=Cesium.HorizontalOrigin.CENTER;break;case "left":m=Cesium.HorizontalOrigin.LEFT;break;case "right":m=Cesium.HorizontalOrigin.RIGHT}b.horizontalOrigin=m}if(d.l){switch(d.l){case "top":var n=Cesium.VerticalOrigin.TOP;break;case "middle":n=Cesium.VerticalOrigin.CENTER;break;case "bottom":n=
Cesium.VerticalOrigin.BOTTOM;break;case "alphabetic":n=Cesium.VerticalOrigin.TOP;break;case "hanging":n=Cesium.VerticalOrigin.BOTTOM}b.verticalOrigin=n}m=d.ub()||"";b.text=m.replace(/[^\x0a\x0d\x20-\x7e\xa0-\xff]/g,"");b.font=d.Ge()||wH();b.pixelOffset=new Cesium.Cartesian2(d.Vf,d.o);if(c=e.j[H(c)]||null)b.show=c.show;e.scene&&(b.eyeOffset=a.l);b instanceof Cesium.Label&&(b.dirty=!1)}
function yya(a,b,c,d){var e=I4(a);a=b.getCoordinates();if(2>a.length)return null;e&&(a=a.map(function(a){return e(a,void 0,a.length)}));b=b.get("extrude")?"WallGeometry":"PolylineGeometry";a=h3(a);return zya(a,c,d,b)}
function zya(a,b,c,d){var e=d||"PolylineGeometry",f=new Cesium.PolylineColorAppearance;d=M4(c);c=L4(c,!0);c.alpha*=b.layer.Xb();a=new Cesium[e]({positions:a,vertexFormat:f.vertexFormat,width:d});a=J4("geometryOutline",a,c);f=new Cesium.Primitive({geometryInstances:a,appearance:f});f.olLineWidth=d;return f}function N4(a,b,c,d,e,f){f?Aya(a,c,d,e,f):(f={},Aya(a,c,d,e,f),a=H(c),(e=d.j[a])&&G4(d,e),b.Xa()||(f=d.o.add(f),d.j[a]=f,H4(d,b,f),F4(d,f,b,c)))}
function Aya(a,b,c,d,e){var f=b.Yb;if(e.geomRevision!=f){var h=b.getCoordinates();h.length&&b instanceof RA&&(h=h[0]);var k=I4(a);k&&(h=h.map(function(a){return k(a,void 0,a.length)}));e.positions=h3(h);e.geomRevision=f}a=M4(d);d=L4(d,!0);d.alpha*=c.layer.Xb();e.material=Cesium.Material.fromType(Cesium.Material.ColorType,{color:d});e.width=a;e instanceof Cesium.Polyline&&(e.dirty=!1)}function Bya(a,b,c){var d=a.slice();d[2]=0;a=h3([a,d]);return zya(a,c,b)}
function Cya(a,b,c,d,e){var f=null;if(P(d.layer,"os.layer.ILayer")){var h=d.layer.D();if((h=mH(nH.u(),h))&&h.showGroundRef&&(c=c.center,c[2])){f=c.slice();f[2]=0;h=[c,f];if(f=b.get("_groundRefGeom")){var k=f.getCoordinates();(1E-9<Math.abs(k[0][0]-c[0])||1E-9<Math.abs(k[0][1]-c[1]))&&f.ic(h)}else f=new yr(h);b.set("_groundRefGeom",f,!0)}}f&&(c=d.j[H(f)]||null,N4(a,b,f,d,e,c))}function Dya(a,b){a=L4(a,!0);a.alpha=.3*b.layer.Xb();return a}
function Eya(a){var b=new Cesium.Color(1,1,1,1);b.alpha=.75*a.layer.Xb();return b}function Fya(a,b,c,d,e){var f=M4(c),h=new Cesium.PrimitiveCollection;h.olLineWidth=f;c=Dya(c,d);d=Eya(d);h.add(K4(a,c,void 0,e));h.add(K4(b,d,1,e));return h}
function Gya(a,b,c){var d=a.center,e=Zu(d),f=d[2]||void 0,h=a.B,k=a.G;a=Cesium.Math.toRadians(90+a.orientation);h=new Cesium.Cartesian3(h,k,k);k=new Cesium.HeadingPitchRoll(a,0,0);var l=Cesium.Transforms.headingPitchRollToFixedFrame(e,k,Cesium.Ellipsoid.WGS84,void 0,new Cesium.Matrix4);e=new Cesium.EllipsoidGeometry({radii:h});h=new Cesium.EllipsoidOutlineGeometry({radii:h,stackPartitions:2,slicePartitions:4});e=Fya(e,h,c,b,function(a,b,c){return new Cesium.GeometryInstance({id:"geometry"===a?"ellipsoid":
"ellipsoidOutline",geometry:b,modelMatrix:l,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(c)}})});P(b.layer,"os.layer.ILayer")&&(h=b.layer,(h=mH(nH.u(),h.D()))&&h.showGroundRef&&f&&(b=Bya(d,c,b))&&e.add(b));return e}
function Hya(a,b){var c=I4(a);a=Uk(b);for(b=0;b<a.length;++b){var d=a[b].getCoordinates(),e=a[b].aa();c&&(e=c(e),d=d.map(function(a){return c(a,void 0,a.length)}));if((d=h3(d))&&0<d.length)if(0==b)var f=d;else{var h=h||[];h.push(new Cesium.PolygonHierarchy(d))}}return f?new Cesium.PolygonHierarchy(f,h):null}
function Iya(a,b,c,d){var e=null,f=I4(a);var h=!!b.get("extrude");var k=b.clone();k.toLonLat();a:{if(k&&"Polygon"==k.T()&&(k=Uk(k))&&1===k.length&&k[0]){k=Gu(k[0].getCoordinates(),k[0].aa());break a}k=!1}if(k){a=Uk(b)[0].getCoordinates();var l=0,m=0;if(a&&0<a.length)for(var n=0;n<a.length;n+=1)(k=a[n])&&2<k.length&&0!==k[2]&&(m++,l+=k[2]);a=l/m;a=isNaN(a)?0:a;b=Uk(b)[0].aa();f&&(b=f(b));f=Cesium.Rectangle.fromDegrees(b[0],b[1],b[2],b[3]);d.ob()&&(e=new Cesium.RectangleGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,
rectangle:f,height:a,JR:!0,IR:!1,extrudedHeight:h?0:void 0}));h=new Cesium.RectangleOutlineGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:f,height:a,extrudedHeight:h?0:void 0})}else{f=Hya(a,b);if(!f)return null;d.ob()&&(e=new Cesium.PolygonGeometry({polygonHierarchy:f,perPositionHeight:!0,extrudedHeight:h?0:void 0}));h=new Cesium.PolygonOutlineGeometry({polygonHierarchy:f,perPositionHeight:!0,extrudedHeight:h?0:void 0})}return wya(e,h,d,c)}
function O4(a,b,c,d){if(b.get("extrude")&&Ju(b))return Iya(a,b,c,d);var e=Hya(a,b);if(!e)return null;var f=[e.positions];e.holes&&e.holes.forEach(function(a){f.push(a.positions)});var h=new Cesium.PolylineColorAppearance;a=M4(d);b=c.layer.Xb();var k=L4(d,!0);k.alpha=null!=d.kb()?k.alpha*b:0;c=new Cesium.PrimitiveCollection;c.olLineWidth=a;for(var l=0;l<f.length;++l){var m=new Cesium.PolylineGeometry({positions:f[l],vertexFormat:h.vertexFormat,width:a});m=J4("geometryOutline",m,k);m=new Cesium.Primitive({geometryInstances:m,
appearance:h});c.add(m)}d.ob()&&(e=new Cesium.PolygonGeometry({polygonHierarchy:e,perPositionHeight:!1,extrudedHeight:void 0}),d=L4(d,!1),d.alpha*=b,d=K4(e,d),c.add(d));return 1==c.length?(d=c.get(0),d.olLineWidth=a,d):c}function Jya(a,b){switch(b){case "relativeToGround":a.g=Cesium.HeightReference.RELATIVE_TO_GROUND;break;case "clampToGround":a.g=Cesium.HeightReference.CLAMP_TO_GROUND;break;default:a.g=Cesium.HeightReference.NONE}}
function P4(a,b,c,d,e,f){var h=e.Ua();if(h){var k=h.sf();if(2>k){f instanceof Cesium.Billboard&&(f.dirty=!1);0==k&&h.load();var l=b.D();if(!a.o[l]){a.o[l]=!0;var m=h.Ji(function(){m&&rh(m);3>h.sf()&&(!(f instanceof Cesium.Billboard)||d.billboards&&d.billboards.contains(f))&&P4(this,b,c,d,e,f);delete this.o[l]},a)}}else f?Kya(a,c,f,h,d.layer):Lya(a,b,c,d,h)}}
function Lya(a,b,c,d,e){var f=e.Ua(1);if(f instanceof HTMLCanvasElement||f instanceof Image||f instanceof HTMLImageElement)f={heightReference:a.g,show:null==d.l[b.id]||d.l[b.id]},Kya(a,c,f,e,d.layer),a=H(c),(e=d.j[a])&&G4(d,e),b.Xa()||(f=d.billboards.add(f),d.j[a]=f,H4(d,b,f),F4(d,f,b,c))}
function Kya(a,b,c,d,e){var f=b.Yb;if(null==c.geomRevision||c.geomRevision!=f){var h=I4(a);b=b.getCoordinates();b=h?h(b,void 0,b.length):b;c.position=Zu(b);c.geomRevision=f}var k;d instanceof pL?(h=f=d.g.l||void 0,(b=d.La())&&(k=j3(b))):(h=d.Ua(1),f=d.id||H(h));if("string"===typeof h||h instanceof HTMLCanvasElement||h instanceof Image||h instanceof HTMLImageElement)c instanceof Cesium.Billboard?(c.setImage(f,h),c.pixelOffset.x=0,c.pixelOffset.y=0):(c.image=h,c.imageId=f,c.pixelOffset=new Cesium.Cartesian2(0,
0)),k=k||new Cesium.Color(1,1,1,1),k.alpha=e.Xb(),e=d.Xb(),null!=e&&(k.alpha*=e),c.color=k,e=d.j(),c.scale=null!=e?e:1,c.rotation=-d.o||0,c.alignedAxis=Cesium.Cartesian3.UNIT_Z,e=Cesium.HorizontalOrigin.CENTER,k=Cesium.VerticalOrigin.CENTER,f=c.pixelOffset,d instanceof pL&&(h=d.ri(),d=d.tf(),h&&d&&(f.x=Math.round(c.scale*(d[0]-h[0])),e=Cesium.HorizontalOrigin.RIGHT,f.y=Math.round(c.scale*(d[1]-h[1])),k=Cesium.VerticalOrigin.BOTTOM)),c.heightReference=a.g,c.horizontalOrigin=e,c.verticalOrigin=k,c.pixelOffset=
f,c instanceof Cesium.Billboard&&(c.dirty=!1)}
uya.prototype.B=function(a,b,c,d,e){if(e.ready)if(e.isDestroyed()||a.Xa())e.dirty=!0;else{e.Pn=0;for(var f in pxa)try{var h=pxa[f],k=e.getGeometryInstanceAttributes(h);if(k){var l=qxa.test(h),m=rxa.test(h);if(l)var n=m?Eya(d):Dya(c,d);else n=L4(c,m),!m||c&&c.kb()&&WG.stroke.color===c.kb().La()||c.kb()?n.alpha*=d.layer.Xb():n.alpha=0;n&&(k.color=Cesium.ColorGeometryInstanceAttribute.toValue(n,k.color))}}catch(p){}e.dirty=!1}else e.Pn=void 0!==e.Pn?e.Pn+1:1,20>e.Pn&&(a=Fa(this.B,a,b,c,d,e),(new le(a,
100,this)).start()),e.dirty=!1};
function Mya(a,b,c,d,e){switch(c.T()){case "MultiPoint":var f=Qr(c);f.forEach(function(a){P4(this,b,a,d,e)},a);break;case "MultiLineString":f=Cr(c);if(b instanceof ZB)f.forEach(function(a){a&&N4(this,b,a,d,e)},a);else{var h=new Cesium.PrimitiveCollection;f.forEach(function(a){a&&(a=yya(this,a,d,e))&&(h.add(a),h.olLineWidth=a.olLineWidth)},a);return h}break;case "MultiPolygon":f=Tr(c);if((c=c.get("extrude"))&&c.length==f.length)for(var k=0;k<c.length;k++)f[k].set("extrude",c[k],!0);h=new Cesium.PrimitiveCollection;
f.forEach(function(a){a&&(a=O4(this,a,d,e))&&(h.add(a),h.olLineWidth=a.olLineWidth)},a);return h;default:c.T()}return null}
function Nya(a,b,c,d,e,f){if(f){var h=e.s[H(c)]||null;null==h?Lb(Yb(f.ub()))||(h={heightReference:a.g},xya(a,h,c,f,e),e.Zn(h,b,c)):xya(a,h,c,f,e)}if((f=e.j[H(c)]||null)&&null!=f.olLineWidth){h=c.get("_dirty");var k=M4(d);if(h||f.olLineWidth!=k){var l=f.show;G4(e,f);c.set("_dirty",!1);f=null}}h=c.T();c instanceof RA&&(h="ellipse");if(f&&"GeometryCollection"!=h)Oya(a,b,c,d,e,f);else{switch(h){case "GeometryCollection":h=c.g;k=0;for(var m=h.length;k<m;k++){var n=h[k];n&&Nya(a,b,n,d,e)}break;case "Point":P4(a,
b,c,e,d);break;case "Circle":h=I4(a);a=Wk(c);f=a[2]||0;k=a.slice();k[0]+=Xk(c);h&&(a=h(a,void 0,a.length),k=h(k,void 0,k.length));a=Zu(a);k=Zu(k);k=Cesium.Cartesian3.distance(a,k);h=new Cesium.CircleGeometry({center:a,radius:k,height:f});a=new Cesium.CircleOutlineGeometry({center:a,radius:k,extrudedHeight:f,height:f});f=wya(h,a,d,e);break;case "LineString":b instanceof ZB?N4(a,b,c,e,d):f=yya(a,c,e,d);break;case "ellipse":f=e.layer;f=(f=mH(nH.u(),f.D()))&&f.showEllipsoids?Gya(c,e,d):O4(a,c,e,d);Cya(a,
b,c,e,d);break;case "Polygon":f=O4(a,c,e,d);break;case "MultiPoint":case "MultiLineString":case "MultiPolygon":f=Mya(a,b,c,e,d);break;case "LinearRing":throw Error("LinearRing should only be part of polygon.");default:throw Error("OL3 geometry type not handled : "+c.T());}f&&(null!=l&&(f.show=l),d=f,l=H(c),(a=e.j[l])&&G4(e,a),b.Xa()||(e.g.add(d),e.j[l]=d,H4(e,b,d),F4(e,d,b,c)))}}
function Oya(a,b,c,d,e,f){if(f instanceof Cesium.PrimitiveCollection){for(var h=0,k=f.length;h<k;h++)Oya(a,b,c,d,e,f.get(h));f.dirty=!1}else f instanceof Cesium.Billboard?P4(a,b,c,e,d,f):f instanceof Cesium.Polyline?N4(a,b,c,e,d,f):a.B(b,c,d,e,f);c instanceof RA&&Cya(a,b,c,e,d)}
function Pya(a,b,c,d){var e=d.featureToCesiumMap[b.id];if(e)for(var f=0,h=e.length;f<h;f++)e[f].dirty=!0;e=[];var k,l,m;f=d.layer;h=b.ke();void 0!==h&&(m=h.call(b,c));null==m&&(f=f.ke())&&(m=f(b,c));void 0===m?m=null:m instanceof bk&&(m=[m]);for(c=0;c<m.length;c++)m[c].ub()?k||(k=m[c]):e.push(m[c]);if(e)for(k&&(c=b.get("_labelGeometry"))&&(l=b.get(c)),c=0,m=e.length;c<m;c++)if(f=e[c])if(h=(0,f.ef)(b)){var n=l&&l!=h?void 0:k;Nya(a,b,h,f,d,n);n&&(k=void 0)}if(a=d.featureToCesiumMap[b.id])for(b=a.length;b--;)a[b].dirty&&
G4(d,a[b])};function Q4(a,b,c,d){C4.call(this,a,b,c);this.j=d||new uya(c);this.g=null;this.source=this.layer.O();this.source instanceof vL&&Jya(this.j,this.source.Nb);this.o=this.Zh=1}w(Q4,C4);var Qya=["labelVisibility",DH];g=Q4.prototype;g.J=function(){Rya(this);this.source=null;Q4.C.J.call(this)};
g.sd=function(){Rya(this);var a=this.j,b=this.layer,c=this.view,d=c.Wa();c=c.ab();if(null==d||void 0===c)throw Error("view not ready");d=new D4(a.scene,b,d);b=b.O().Oa();for(var e=0,f=b.length;e<f;e++){var h=b[e];h&&Pya(a,h,c,d)}this.g=d;this.qq();this.g&&(R4(this,this.source.Oa()),this.scene.primitives.add(this.g.g),I(this.layer,"change:visible",this.qq,this),I(this.layer,"change:opacity",this.pw,this),I(this.layer,"propertychange",this.Jy,this),I(this.source,"changefeature",this.Pv,this),this.source instanceof
vL?I(this.source,"propertychange",this.Ly,this):(I(this.source,"addfeature",this.Jv,this),I(this.source,"removefeature",this.Ky,this),I(this.source,"clear",this.io,this)))};g.reset=function(){this.source&&S4(this,this.source.Oa(),!0)};
function Rya(a){a.g&&(xh(a.layer,"change:visible",a.qq,a),xh(a.layer,"change:opacity",a.pw,a),xh(a.layer,"propertychange",a.Jy,a),xh(a.source,"changefeature",a.Pv,a),xh(a.source,"propertychange",a.Ly,a),a.source instanceof vL||(xh(a.source,"addfeature",a.Jv,a),xh(a.source,"removefeature",a.Ky,a),xh(a.source,"clear",a.io,a)),a.g.dispose(),a.scene.primitives.remove(a.g.g),a.g=null,C.dispatchEvent("map:glRepaint"))}g.qq=function(){this.g&&this.layer&&(this.g.g.show=this.layer.Hb(),C.dispatchEvent("map:glRepaint"))};
g.pw=function(){this.source&&T4(this,this.source.Oa())};g.Jy=function(a){try{var b=a.l}catch(c){return}this.source&&b&&-1<Qya.indexOf(b)&&(a=a.o||this.source.Oa(),T4(this,a))};g.Jv=function(a){this.ac(a.feature)};g.Ky=function(a){this.Fb(a.feature)};g.Pv=function(a){U4(this,a.feature)};g.io=function(){jc(this.g.featureToCesiumMap,function(a,b){this.Fb(b)},this)};
g.Ly=function(a){try{var b=a.l}catch(f){return}var c=this.source;switch(b){case "cleared":this.io();break;case "featureVisibility":if(!c.Md||!c.ra){var d=a.o;if(d){b=0;for(var e=d.length;b<e;b++)(a=d[b])&&!a.Xa()&&V4(this,a,!c.Fi(a))}}break;case "animationFrame":(a=a.o)&&jc(a,function(a,b){(b=ym(c,b))&&V4(this,b,a)},this);break;case "altitude":this.source instanceof vL&&(Jya(this.j,this.source.Nb),T4(this,c.Oa()));break;case "animationEnabled":R4(this,c.Oa());break;case "features":if(d=a.o)for(b=
0,e=d.length;b<e;b++)this.ac(d[b]);if(a=a.s){b=0;for(e=a.length;b<e;b++)this.Fb(a[b]);tya(this.g)}break;case "highlightedItems":(d=a.s)&&Sya(this,d,!1);(a=a.o)&&Sya(this,a,!0);break;case "selectedItemsAdded":case "selectedItemsRemoved":case "selectedItemsChanged":e=c.Dd.match(fha);d=a.o;e?S4(this,d):T4(this,d);"selectedItemsChanged"==b&&(d=a.s,e?S4(this,d):T4(this,d));break;case "geometryShape":case "geometryCenterShape":if(d=a.s,a=a.o,QG.test(a)||QG.test(d)||PG.test(a)||PG.test(d))d=c.Oa(),S4(this,
d)}};function U4(a,b){if(a.view&&a.g&&a.source&&null!=a.source.Sc[b.ma]){var c=a.view.ab();null!=c&&(Pya(a.j,b,c,a.g),!(a.source instanceof vL)||a.source.Md&&a.source.ra||R4(a,[b]),C.dispatchEvent("map:glRepaint"))}}function T4(a,b){if(a.A)for(var c=0,d=b.length;c<d;c++)U4(a,b[c])}function S4(a,b,c){if(a.A||c){c=0;for(var d=b.length;c<d;c++){var e=b[c],f=a.g.featureToCesiumMap[e.id];f=f&&0<f.length&&f[0].show;a.Fb(e);a.ac(e);V4(a,e,f)}C.dispatchEvent("map:glRepaint")}}
g.ac=function(a){U4(this,a);var b=a.id,c=this.g.featureToCesiumMap[b];if(c){b=0;for(var d=c.length;b<d;b++)this.cm(c[b],a);C.dispatchEvent("map:glRepaint")}else this.g.l[b]=Tya(this,a)};g.Fb=function(a){if("number"===typeof a||"string"===typeof a)a=ym(this.source,a);if(null!==a&&this.g){var b=this.g,c=a.id;if(a=b.featureToCesiumMap[c]){b.featureToCesiumMap[c]=void 0;b.l[c]=void 0;c=0;for(var d=a.length;c<d;c++)G4(b,a[c])}b.A.kf();C.dispatchEvent("map:glRepaint")}};
function Tya(a,b){return a.source instanceof vL?!a.source.Fi(b)&&(!a.source.Md||!a.source.ra):!1}g.cm=function(a,b){if(this.source instanceof vL){var c=b.id;this.g.l[c]=Tya(this,b);a.show=this.g.l[c];a instanceof Cesium.Billboard&&(a.eyeOffset=this.j.j)}};function R4(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e){var f=a.g.featureToCesiumMap[e.id];if(f)for(var h=0,k=f.length;h<k;h++)a.cm(f[h],e)}}C.dispatchEvent("map:glRepaint")}
function Sya(a,b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];U4(a,f);if(f=a.g.featureToCesiumMap[f.id])for(var h=0,k=f.length;h<k;h++){var l=a,m=f[h],n=c,p=Yu(T.u());m instanceof Cesium.Billboard?n&&p?(n=cya(p,m.position),null!=n&&(m.eyeOffset=new Cesium.Cartesian3(0,0,.99*-n))):m.eyeOffset=l.j.j:m instanceof Cesium.Label&&(n&&l.scene&&p?(n=cya(p,m.position),null!=n&&(n=new Cesium.Cartesian3(0,0,.99*-n),m.eyeOffset=n?n:l.j.l)):m.eyeOffset=l.j.l)}}}
function Uya(a){var b=Yu(T.u());if(b&&(b=W3(b),b=new Cesium.Cartesian3(0,0,-(a.Zh*Math.round(b/(10*a.o)))),a.j.l=b,a.g&&a.g.labels)){b=0;for(var c=a.g.labels.length;b<c;b++){var d=a.g.labels.get(b);d&&(d.eyeOffset=a.j.l)}}}function V4(a,b,c){a.g.l[b.id]=c;var d=a.g.featureToCesiumMap[b.id];if(d){for(var e=0,f=d.length;e<f;e++)d[e].show=c;c&&U4(a,b)}C.dispatchEvent("map:glRepaint")}g.Ik=function(a,b){if(this.Zh!=a||this.o!=b)this.Zh=a,this.o=b,Uya(this),Vya(this);return++a};
function Vya(a){var b=Yu(T.u());if(b&&(b=W3(b),b=-(a.Zh*Math.round(b/(100*a.o))),b!=a.j.j.z)){b=new Cesium.Cartesian3(0,0,b);a.j.j=b;b=a.source.Oa();for(var c=0,d=b.length;c<d;c++){var e=a,f=e.g.featureToCesiumMap[b[c].id];if(f)for(var h=0,k=f.length;h<k;h++){var l=f[h];l instanceof Cesium.Billboard&&(l.eyeOffset=e.j.j)}}}}g.Br=function(){Uya(this);Vya(this)};function W4(a,b,c){Q4.call(this,a,b,c)}w(W4,Q4);W4.prototype.cm=function(a,b){W4.C.cm.call(this,a,b);if(a instanceof Cesium.PrimitiveCollection&&0<a.length){var c=a.get(0);c.olFeature=b}if(c&&b)try{var d=b.X();if(d instanceof Rk){var e=d.getCoordinates(),f=d.aa();1==e.length&&Gu(e[0],d.aa())&&(c.geometryInstances.geometry=new Cesium.RectangleOutlineGeometry({rectangle:Cesium.Rectangle.fromDegrees(f[0],f[1],f[2],f[3])}))}}catch(h){}};function X4(a,b,c){C4.call(this,a,b,c);this.g=null;this.j=!0;I(this.layer,"propertychange",this.Iy,this)}w(X4,C4);g=X4.prototype;g.J=function(){xh(this.layer,"propertychange",this.Iy,this);this.scene.imageryLayers.remove(this.g);this.g=null;X4.C.J.call(this)};
g.sd=function(){var a=this.scene.imageryLayers;this.g&&(a.remove(this.g),this.g=null);if(this.j){var b=this.layer.get("url");if(b){var c=this.layer.O(),d;c instanceof $1&&(d=c.wa.aa());d&&4===d.length&&!fi(d)&&(a.addImageryProvider(new Cesium.SingleTileImageryProvider({url:b,rectangle:Cesium.Rectangle.fromDegrees(d[0],d[1],d[2],d[3])})),this.g=a.get(a.length-1),this.g.imageryProvider.errorEvent.addEventListener(this.aM.bind(this)))}}};g.aM=function(){this.scene.imageryLayers.remove(this.g)};
g.Ik=function(a){this.sd();return++a};g.reset=function(){this.sd()};g.Iy=function(a){a instanceof U&&"visible"==a.l&&(this.j=a.o,this.sd(),C.dispatchEvent("map:glRepaint"))};function Y4(a,b,c,d){for(var e=[],f=0;f<b.length;f++)e.push(I(a,b[f],c,d,void 0))}function Z4(a,b,c,d){for(var e=0;e<b.length;e++)xh(a,b[e],c,d)};function $4(a,b,c){C4.call(this,a,b,c);this.Pb=c.imageryLayers;this.j=this.g=null;this.o=-1;this.s=new le(this.wL,50,this);(a=M(T.u().Y()))&&I(a,"change:resolution",this.Vi,this)}w($4,C4);var a5="change:brightness change:contrast change:hue change:opacity change:saturation change:visible".split(" "),Wya=["change:minResolution","change:maxResolution"];g=$4.prototype;
g.J=function(){Ma(this.s);this.s=null;var a=M(T.u().Y());a&&xh(a,"change:resolution",this.Vi,this);xh(this.layer,"propertychange",this.Ir,this);Xya(this);b5(this);this.Pb=null;$4.C.J.call(this)};g.sd=function(){this.s&&this.s.start()};
g.wL=function(){Xya(this);b5(this);I(this.layer,"propertychange",this.Ir,this);if(this.g=vxa(this.layer,this.view.Wa()))p3(this.layer,this.g),this.Vi(),this.Pb.add(this.g,-1<this.o?this.o:void 0),Y4(this.layer,a5,this.an,this),Y4(this.layer,Wya,this.Vi,this),I(this.layer,"change:extent",this.sd,this),I(this.layer,"change",this.Zm,this);this.layer instanceof VP&&this.layer.L&&Yya(this)};g.reset=function(){};
g.Vi=function(){if(this.layer&&this.g&&!this.j){var a=this.view.Wa(),b=this.view.ab(),c=this.layer.he(),d=this.layer.ge();c=void 0!==c?c:du(42,a);d=void 0!==d?d:du(1,a);a=cu(c,a);this.g.show=(20<=a||c<=b)&&b<=d&&this.layer.Hb()}};g.Ik=function(a){if(this.o!==a){if(this.o=a,this.g&&(this.Pb.remove(this.g,!1),this.Pb.add(this.g,a++)),this.j)for(var b in this.j)this.Pb.remove(this.j[b],!1),this.Pb.add(this.j[b],a++)}else a=pya(this)+1;return a};
function pya(a){var b=a.g?a.Pb.indexOf(a.g):-1;-1<b&&a.j&&(b+=kc(a.j));return b}function Xya(a){xh(a.layer,"propertychange",a.Ir,a);a.g&&(Z4(a.layer,a5,a.an,a),Z4(a.layer,Wya,a.Vi,a),xh(a.layer,"change:extent",a.sd,a),xh(a.layer,"change",a.Zm,a),a.g.imageryProvider instanceof l3&&a.g.imageryProvider.dispose(),a.Pb.remove(a.g,!0),a.g=null,C.dispatchEvent("map:glRepaint"))}
function Yya(a){a.g&&a.layer.O()instanceof a3&&(a.g.show=!1,Z4(a.layer,a5,a.an,a),xh(a.layer,"change",a.Zm,a),a.Xk(),Y4(a.layer,a5,a.Xk,a),I(a.layer,"change",a.Xk,a))}function b5(a){Z4(a.layer,a5,a.Xk,a);xh(a.layer,"change",a.Xk,a);if(a.j){for(var b in a.j)a.Pb.remove(a.j[b],!0),a.j[b].imageryProvider instanceof l3&&a.j[b].imageryProvider.dispose(),delete a.j[b];a.j=null}a.layer&&a.g&&(p3(a.layer,a.g),Y4(a.layer,a5,a.an,a),I(a.layer,"change",a.Zm,a))}
g.Xk=function(){var a={};var b=this.layer.I;var c=this.l.L,d=this.l.g-this.l.cc(),e=this.l.g;b=Cva(b,oC(new Date(d),c,0).getTime(),oC(new Date(e),c,0).getTime(),c);if(d=this.j?this.j[b]:void 0)delete this.j[b];else{c=this.Pb.indexOf(this.g);d=this.layer.O();e=this.layer.Sa();e.id=$b();var f=lw(e);e=f.O();f.Bb(null);f.dispose();d=d.gf();d.TIME=b;e.updateParams(d);d=new l3(e);d=new Cesium.ImageryLayer(d);this.Pb.add(d,c+1)}p3(this.layer,d);d.alpha=this.layer.Xb()||0;a[b]=d;if(this.j)for(var h in this.j)a[h]=
this.j[h],a[h].alpha=0;this.j=a;C.dispatchEvent("map:glRepaint")};g.an=function(){p3(this.layer,this.g);this.Vi()};g.Zm=function(){if(this.g&&this.g.show){var a=this.Pb.indexOf(this.g);0<=a&&(this.Pb.remove(this.g,!1),this.Pb.add(this.g,a))}C.dispatchEvent("map:glRepaint")};g.Ir=function(a){if(a instanceof U){var b=a.l;"animationEnabled"==b?a.o?Yya(this):b5(this):b==DH&&this.sd()}C.dispatchEvent("map:glRepaint")};function c5(){y_.call(this);this.id="cesium"}w(c5,y_);c5.prototype.init=function(){a:{var a=T.u(),b=new a4;if(a.g){if(a.g.Vm()){E.error(NP,"A WebGL renderer has already been set and initialized on the map.");break a}a.g.setMap(void 0)}a.g=b;a.g&&a.g.setMap(a.ha)}a=w3.u();x3(a,"vector",Q4);x3(a,"tile",$4);x3(a,"image",X4);x3(a,"draw",W4)};var Zya=null;W.directive("descriptorresultcard",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/plugin/descriptor/resultcard.html",controller:d5,controllerAs:"ctrl"}}]);function d5(a,b){this.v=a;this.K=b;this.v["short"]=!1;this.v.showFullDescription=!1;b=this.K.find(".js-card-title-icons");b.children().remove();b.prepend(this.kd("icons"));this.featureCount=void 0;(b=this.v.result)&&null!=b.o&&(this.featureCount=b.o);a.$on("$destroy",this.g.bind(this))}d5.$inject=["$scope","$element"];
d5.prototype.g=function(){this.v=this.K=null};d5.prototype.Ja=function(){var a=this.v.result;return a?a.xi():null};
d5.prototype.kd=function(a){var b=this.Ja();if(b)switch(a.toLowerCase()){case "id":return b.D();case "active":return b.isActive();case "icons":return b.td();case "provider":return b.rb();case "tags":return b.getTags().join(", ");case "title":return b.S();case "type":return b.Pl();case "description":return b.qb();case "snippet":if(a=b.qb()){a=a.split(/\n\n/);for(var c=b=0,d=a.length;c<d;c++)if(-1<a[c].indexOf(".")){b=c;break}a=a[b];125<a.length&&(a=a.substring(0,125)+" ...",this.v["short"]=!0);return a}}return""};
d5.prototype.getField=d5.prototype.kd;d5.prototype.toggle=function(){var a=this.Ja();a&&(a.setActive(!a.isActive()),a.isActive()&&C.dispatchEvent(new lA("userToggledDescriptor",a)))};d5.prototype.toggle=d5.prototype.toggle;d5.prototype.XM=function(a){this.v.showFullDescription=a;X(this.v)};d5.prototype.showFullDescription=d5.prototype.XM;function e5(a,b,c){f_.call(this,a,b);this.o=c}w(e5,f_);e5.prototype.g=function(){return'<descriptorresultcard result="result"></descriptorresultcard>'};e5.prototype.l=function(){};function f5(){}f5.prototype.o=function(){return!1};f5.prototype.s=function(a){return a};function g5(a,b,c){b&&(a in c||(c[a]={}),b in c[a]||(c[a][b]=0),c[a][b]++)}function h5(a,b,c){a in b||(b[a]=0);b[a]+=c||0};function i5(){this.j=null;this.l=-1}w(i5,f5);function mua(a,b){a.j=null;a.l=-1;b&&(b=fsa(b).replace(/\.\*/g,""),a.j=new RegExp(b,"gi"),a.l=Ha()-12096E5)}i5.prototype.load=function(){};i5.prototype.g=function(a,b,c){if(this.j){h5("SearchTerm",c);for(var d=[a.je(),a.S()],e=b=0,f=d.length;e<f;e++)d[e]&&(b+=this.jc(this.j,d[e],10*(e+1)));b&&(a=a.od,isNaN(a)||(b+=Math.max(0,a-this.l)/12096E5*5));(a=b)&&h5("SearchTerm",c,a)}};
i5.prototype.jc=function(a,b,c){c=c||3;for(var d=0,e=a.exec(b),f=a.source.split(/[(|)]/),h={},k=0,l=f.length;k<l;k++)f[k]&&(h[f[k]]=0);for(;e&&e.length;){k=1;for(l=e.length;k<l;k++)d+=c*e[k].length/b.length,f=e[k].toLowerCase(),f in h&&(h[f]=1);e=a.exec(b)}c=b=0;for(var m in h)b+=h[m],c++;a.lastIndex=0;return d*b/c};function j5(){}w(j5,f5);j5.prototype.load=function(a,b){(a=a.rb())&&g5("Source",a,b)};j5.prototype.g=function(a,b,c){if(b=b.Source)a=(a=a.rb())?b.indexOf(a):-1,h5("Source",c,-1<a?1:0)};function k5(){}w(k5,f5);k5.prototype.load=function(a,b){if(a=a.getTags())for(var c=0,d=a.length;c<d;c++){var e=a[c];e&&g5("Tag",e,b)}};k5.prototype.g=function(a,b,c){if(b=b.Tag)if(h5("Tag",c),a=a.getTags())for(var d=0,e=b.length;d<e;d++)h5("Tag",c,-1<a.indexOf(b[d])?1:0)};function l5(){}w(l5,f5);l5.prototype.load=function(a,b){if(a=a.getTags())for(var c=0,d=a.length;c<d;c++){var e=a[c];e&&(e=e.split(/:/))&&2===e.length&&g5(e[0],e[1],b)}};l5.prototype.g=function(a,b,c){a=a.getTags();for(var d in b){var e=b[d];h5(d,c);for(var f=0,h=e.length;f<h;f++){var k=d+":"+e[f];a&&-1<a.indexOf(k)&&h5(d,c,1)}}};function m5(){}w(m5,f5);m5.prototype.o=function(a){return"Type"===a};m5.prototype.s=function(a){return Jb(a,"s")&&!Jb(a,"es")?a.substring(0,a.length-1):a};m5.prototype.load=function(a,b){(a=a.T())&&g5("Type",a,b)};m5.prototype.g=function(a,b,c){if(b=b.Type)a=(a=a.T())?b.indexOf(a):-1,h5("Type",c,-1<a?1:0)};function n5(a){h_.call(this,"descriptor",a);this.log=$ya;this.priority=90;this.type="descriptor";this.j=[];this.l=new i5;this.g=[new l5,new j5,new m5,new k5,this.l]}w(n5,h_);P(n5,"os.search.IFacetedSearch");var $ya=E.V("plugin.descriptor.DescriptorSearch");n5.prototype.cancel=function(){};n5.prototype.Tq=function(a){this.term=a;this.dispatchEvent(new fU("autocomplete.success",this.term,[]))};
n5.prototype.ds=function(a,b,c){this.term=a;this.j.length=0;mua(this.l,a);a=pE(V);var d=[],e=this.j,f=this.priority;if(a)for(var h=0,k=a.length;h<k;h++){var l=a[h],m=l.Jj();if(!m||m.mc()){m=aza(this,l);var n=function(a){a&&(a=f+a/100,e.push(new e5(l,a)))};m instanceof Oc?d.push(m.then(n)):n(m)}}Ab(e,function(a,b){return Bb(b.jc(),a.jc())});if(d.length){var p=this;Zc(d).then(function(){p.dispatchEvent(new fU("success",p.term,sE(e,b,c),e.length))})}else this.dispatchEvent(new fU("success",this.term,
sE(e,b,c),e.length));return!0};n5.prototype.ba=function(a,b){for(var c=0,d=this.g.length;c<d;c++)if(this.g[c].o(a))return this.g[c].s(b);return b};function aza(a,b){function c(){var a=0,b;for(b in e){var c=e[b];if(!c)return 0;a+=c}return a}var d={},e={};a=a.g;for(var f=[],h=0,k=a.length;h<k;h++){var l=a[h].g(b,d,e);l&&f.push(l)}return f.length?new Oc(function(a){Zc(f).then(function(){a(c())})}):c()};function o5(){y_.call(this);this.id="descriptorsearch"}w(o5,y_);o5.prototype.init=function(){Zya||(hU(gU.u(),new n5("Layers")),Zya=new n5("Layers"))};function MR(){SK.call(this);this.Za=this.G=null;this.l=new IR;this.Oc="file"}w(MR,SK);P(MR,"os.data.IReimport");P(MR,"os.data.IUrlDescriptor");g=MR.prototype;g.Pl=function(){return"Layer"};g.td=function(){return'<img src="v1542394219/images/features-base.png" title="Feature layer"/>'};g.Qd=function(){return"<defaultfilenodeui></defaultfilenodeui>"};
g.Sa=function(){var a={};a.id=this.D();a.animate=!0;a.color=this.La();a.load=!0;a.originalUrl=this.G;a.parserConfig=this.l;a.provider=this.rb();a.tags=this.getTags();a.title=this.S();a.url=this.Ka();a.mappings=this.l.mappings;a.detectColumnTypes=!0;return a};g.Ka=function(){return this.Za};g.Lb=function(a){this.Za=a};g.yh=function(a){return a==this.Ka()};function p5(a,b){a.l=b;a.A={}}g.Vc=function(a){this.l.color=a;MR.C.Vc.call(this,a)};g.fb=function(a){this.l.description=a;MR.C.fb.call(this,a)};
g.vb=function(a){this.l.tags=a?a.join(", "):"";MR.C.vb.call(this,a)};g.Ta=function(a){this.l.title=a;MR.C.Ta.call(this,a)};g.clearData=function(){var a=this.Ka();a&&Uw(a)&&ny(my.u(),a)};g.sa=function(a){a||(a={});a.originalUrl=this.G;a.url=this.Za;var b=this.l.mappings;b&&(hB.u(),a.mappings=kB(0,b));return MR.C.sa.call(this,a)};g.restore=function(a){this.G=a.originalUrl||null;this.Za=a.url||null;if(a.mappings){var b=hB.u();b=lB(b,a.mappings);this.l.mappings=b}MR.C.restore.call(this,a);this.Xh()};function q5(){SI.call(this)}w(q5,lU);q5.prototype.bc=function(a){this.ga("file");this.Da("Files");q5.C.bc.call(this,a);this.jm=!1};q5.prototype.Je=function(){return"Contains all "+this.D().toUpperCase()+" files that have been imported into the application."};function r5(){SI.call(this)}w(r5,q5);wa(r5);r5.prototype.bc=function(a){r5.C.bc.call(this,a);this.ga("csv");this.Da("CSV Files")};function s5(a){MR.call(this);this.Oc="csv";this.l=a||new b1}w(s5,MR);s5.prototype.T=function(){return"Feature Layers"};s5.prototype.Sa=function(){var a=s5.C.Sa.call(this);a.type="CSV";a.commentChar=this.l.commentChar;a.dataRow=this.l.dataRow;a.delimiter=this.l.delimiter;a.headerRow=this.l.headerRow;a.useHeader=this.l.useHeader;return a};
s5.prototype.sa=function(a){a||(a={});a.commentChar=this.l.commentChar;a.dataRow=this.l.dataRow;a.delimiter=this.l.delimiter;a.headerRow=this.l.headerRow;a.useHeader=this.l.useHeader;return s5.C.sa.call(this,a)};s5.prototype.restore=function(a){this.l.commentChar=a.commentChar;this.l.dataRow=a.dataRow;this.l.delimiter=a.delimiter;this.l.headerRow=a.headerRow;this.l.useHeader=a.useHeader;s5.C.restore.call(this,a)};
function bza(a,b){a.Vc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);p5(a,b)};function t5(){A.call(this);this.items=this.fields=null;this.log=cza;this.Yf=this.name=null}w(t5,A);var cza=E.V("os.ex.AbstractExporter");g=t5.prototype;g.J=function(){t5.C.J.call(this);this.reset()};g.lb=function(){return!1};g.Sh=function(){return!1};g.reset=function(){this.Yf=this.items=this.fields=null};g.js=function(a){this.fields=a};g.setItems=function(a){this.items=a};g.Pj=function(){return"text/plain"};g.getName=function(){return this.name};g.Qh=function(a){this.name=a};g.Xc=function(){};
g.cancel=function(){};g.zg=function(){return null};g.zs=function(){return!1};function u5(){t5.call(this);this.log=dza;this.g=[]}w(u5,t5);var dza=E.V("os.ui.file.csv.AbstractCSVExporter");g=u5.prototype;g.reset=function(){u5.C.reset.call(this);this.g.length=0};g.getExtension=function(){return"csv"};g.ba=function(){return"CSV"};g.Pj=function(){return"text/csv"};
g.Xc=function(){for(var a=0,b=this.items.length;a<b;a++){var c=this.items[a];var d=null==c?null:{},e=c?c.X():null;if(null!=e){e=e.clone().toLonLat();try{var f=e.getCoordinates();f&&"number"===typeof f[0]&&(d.LAT=String(f[1]),d.LON=String(f[0]),d.LAT_DDM=Mu(f[1],!1,!1),d.LON_DDM=Mu(f[0],!0,!1),d.LAT_DMS=Lu(f[1],!1,!1),d.LON_DMS=Lu(f[0],!0,!1),d.MGRS=osasm.toMGRS(f))}catch(m){}"LAT"in d||(d.LAT="",d.LON="",d.LAT_DDM="",d.LON_DDM="",d.LAT_DMS="",d.LON_DMS="",d.MGRS="");d.GEOMETRY=PS.Ps(c,{dataProjection:"EPSG:4326",
featureProjection:N});if(e=c.get("recordTime"))Ov(e,"os.time.TimeRange")?(d.START_TIME=Vv(e),d.END_TIME=Wv(e)):d.TIME=e.toISOString()}if(this.fields){e=0;for(var h=this.fields.length;e<h;e++){var k=this.fields[e];if(!(k in d)){var l=c.get(this.fields[e]);null==l&&(l="");As(l)&&!q(l)&&(d[k]=l)}}}(c=d)&&this.g.push(c)}0<this.g.length&&(this.Yf="\ufeff",this.Yf+=Papa.unparse(this.g,{newline:"\n"}))};g.cancel=function(){};function eza(){u5.call(this);this.log=fza}w(eza,u5);var fza=E.V("plugin.file.csv.CSVExporter");function v5(){M_.call(this);this.g=new b1}w(v5,M_);
v5.prototype.dc=function(a){v5.C.dc.call(this,a);null!=a.parserConfig?this.g=a.parserConfig:(null!=a.commentChar&&(this.g.commentChar=a.commentChar),null!=a.dataRow&&(this.g.dataRow=a.dataRow),null!=a.delimiter&&(this.g.delimiter=a.delimiter),null!=a.headerRow&&(this.g.headerRow=a.headerRow),null!=a.useHeader&&(this.g.useHeader=a.useHeader),null!=a.mappings&&(this.g.mappings=a.mappings),null!=a.skipTimeMappings&&(this.g.skipTimeMappings=a.skipTimeMappings),null!=a.skipGeoMappings&&(this.g.skipGeoMappings=
a.skipGeoMappings))};v5.prototype.wd=function(a){a=v5.C.wd.call(this,a);eD(a,this.g.mappings);return a};v5.prototype.xf=function(){return new Z0(this.g)};function w5(){D0.call(this);this.template="<optionsstep></optionsstep>";this.title="Options"}w(w5,D0);w5.prototype.isValid=function(a){return this.valid&&!!a.title};W.directive("optionsstep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/wiz/optionsstep.html",controller:x5,controllerAs:"optionsStep"}}]);
function x5(a){this.v=a;this.j=a.config.title;a.$watch("config.title",this.g.bind(this));a.$watch("optionsForm.$valid",this.o.bind(this));a.$on("$destroy",this.l.bind(this))}x5.$inject=["$scope"];x5.prototype.l=function(){this.v=null};x5.prototype.g=function(a){a&&a!=this.j?(a=oy(my.u(),Sw(a)),this.v.optionsForm.title.$setValidity("exists",!a)):this.v.optionsForm.title.$setValidity("exists",!0)};x5.prototype.o=function(a){this.v.$emit("validate",a)};function y5(a){this.dateType="combined";this.timeColumn=this.dateColumn="";this.dateFormat=sC[0];this.timeFormat=tC[0];this.l=this.j=null;this.g=a||"start"}y5.prototype.Sb=function(a){this.g=a};y5.prototype.T=function(){return this.g};
function gza(a,b){a.j=null;a.l=null;for(var c=0,d=b.length;c<d;c++){var e=b[c];e.T()==a.T()&&(e instanceof TS?(a.l=e.clone(),a.timeColumn=a.l.ja,a.timeFormat=a.l.Kj()):(a.j=e.clone(),a.dateColumn=a.j.ja,a.dateFormat=a.j.Kj()))}a.dateType=a.l?"separate":a.j instanceof SS?"dateonly":"combined"}
function z5(a){var b=[];switch(a.dateType){case "combined":var c=new RS(a.g);c.ja=a.dateColumn;c.format=a.dateFormat;b.push(c);break;case "separate":c=new SS(a.g);c.ja=a.dateColumn;c.format=a.dateFormat;b.push(c);c=new TS(a.g);c.ja=a.timeColumn;c.format=a.timeFormat;b.push(c);break;case "dateonly":c=new SS(a.g),c.ja=a.dateColumn,c.format=a.dateFormat,b.push(c)}return b}
y5.prototype.Wb=function(){var a=this.dateColumn&&this.dateFormat;"separate"==this.dateType&&(a=a&&this.timeColumn&&this.timeFormat);return a};W.directive("timehelp",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/window/timehelp.html",controller:A5,controllerAs:"th"}}]);function A5(a,b){this.K=b;a.$on("$destroy",this.g.bind(this))}A5.$inject=["$scope","$element"];A5.prototype.g=function(){this.K=null};A5.prototype.close=function(){KE(this.K)};A5.prototype.close=A5.prototype.close;W.directive("timeinstantui",[function(){return{restrict:"E",replace:!0,scope:{config:"=",model:"=",valid:"=",label:"@"},templateUrl:"v1542394219/views/wiz/timeinstantui.html",controller:B5,controllerAs:"tiUI"}}]);
function B5(a){this.v=a;this.g=a.model;this.j=a.config;this.dtFormats=sC;this.dFormats=rC;this.tFormats=tC;this.timeFormat=this.dateFormat="";this.types=[{id:"combined",label:"Date/Time"},{id:"separate",label:"Separate Date and Time"},{id:"dateonly",label:"Date Only"}];this.sample="";this.result=null;"combined"==this.g.dateType?this.dateFormat=kb(this.dtFormats,this.g.dateFormat)?this.g.dateFormat:"Custom":(this.dateFormat=kb(this.dFormats,this.g.dateFormat)?this.g.dateFormat:"Custom","separate"==
this.g.dateType&&(this.timeFormat=kb(this.tFormats,this.g.timeFormat)?this.g.timeFormat:"Custom"));C5(this);a.$on("$destroy",this.l.bind(this))}B5.$inject=["$scope"];B5.prototype.l=function(){this.v=null};
function C5(a){a.v.valid=!1;a.sample=null;a.result=null;if(a.j.preview&&0<a.j.preview.length){a.g.dateColumn&&(a.sample=hza(a,a.g.dateColumn));if("separate"==a.g.dateType&&a.g.timeColumn){a.sample=a.sample||"";var b=hza(a,a.g.timeColumn);a.sample+=(a.sample?" ":"")+b}if(null==a.sample)a.sample="separate"==a.g.dateType?"Please choose Date and Time columns.":"Please choose a Date column.";else if(b=null,"separate"==a.g.dateType&&a.g.dateColumn&&a.g.timeColumn&&a.g.dateFormat&&a.g.timeFormat?b=a.g.dateFormat+
" "+a.g.timeFormat:"separate"!=a.g.dateType&&a.g.dateColumn&&a.g.dateFormat&&(b=a.g.dateFormat),b&&(b=FC(a.sample,b,!0)))a.result=b.toISOString(),a.v.valid=!0}else a.sample="No preview data available. Please check the import configuration."}function hza(a,b){for(var c="",d=0,e=a.j.preview.length;d<e&&!c;d++)c=Nb(String($A(a.j.preview[d],b)||""));return c}B5.prototype.change=function(){C5(this)};B5.prototype.change=B5.prototype.change;
function iza(a){if(a.j.preview&&0<a.j.preview.length&&a.g.dateColumn){var b=null,c=String($A(a.j.preview[0],a.g.dateColumn)||"");c&&(b=DC(c,"combined"==a.g.dateType?a.dtFormats:a.dFormats));b?(a.dateFormat=b,a.g.dateFormat=b):a.dateFormat="Custom"}C5(a)}function jza(a){if(a.j.preview&&0<a.j.preview.length&&a.g.timeColumn){var b=null,c=String($A(a.j.preview[0],a.g.timeColumn)||"");c&&(b=DC(c,a.tFormats));b?(a.timeFormat=b,a.g.timeFormat=b):a.timeFormat="Custom"}C5(a)}
B5.prototype.KG=function(){iza(this);"separate"==this.g.dateType&&jza(this);C5(this)};B5.prototype.onDateType=B5.prototype.KG;B5.prototype.IG=function(){iza(this);C5(this)};B5.prototype.onDateColumn=B5.prototype.IG;B5.prototype.iJ=function(){jza(this);C5(this)};B5.prototype.onTimeColumn=B5.prototype.iJ;B5.prototype.JG=function(){this.dateFormat&&"Custom"!=this.dateFormat&&(this.g.dateFormat=this.dateFormat,C5(this))};B5.prototype.onDateFormat=B5.prototype.JG;
B5.prototype.jJ=function(){this.timeFormat&&"Custom"!=this.timeFormat&&(this.g.timeFormat=this.timeFormat,C5(this))};B5.prototype.onTimeFormat=B5.prototype.jJ;function D5(){D0.call(this);this.template="<timestep></timestep>";this.title="Time";this.timeType="none";this.startModel=new y5;this.endModel=new y5("end")}w(D5,D0);D5.prototype.g=function(a){if(!this.j&&a.mappings&&0<a.mappings.length){for(var b=[],c=[],d=a.mappings.length;d--;){var e=a.mappings[d];e instanceof RS&&("end"==e.T()?c.push(e):b.push(e))}0<b.length&&(gza(this.startModel,b),this.timeType="instant");0<c.length&&(gza(this.endModel,c),this.timeType="range");D5.C.g.call(this,a)}};
D5.prototype.ki=function(a){if(a.mappings)for(var b=a.mappings.length;b--;)a.mappings[b]instanceof RS&&a.mappings.splice(b,1);b=[];"none"!=this.timeType?(a.skipTimeMappings=!1,"instant"==this.timeType?(this.startModel.Sb("instant"),b=b.concat(z5(this.startModel))):"range"==this.timeType&&(this.startModel.Sb("start"),b=b.concat(z5(this.startModel)),b=b.concat(z5(this.endModel))),0<b.length&&(a.mappings=a.mappings?a.mappings.concat(b):b)):a.skipTimeMappings=!0};
D5.prototype.isValid=function(){return"instant"==this.timeType?this.valid&&this.startModel.Wb():"range"==this.timeType?this.valid&&this.startModel.Wb()&&this.endModel.Wb():!0};W.directive("timestep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/wiz/timestep.html",controller:E5,controllerAs:"timeStep"}}]);
function E5(a){this.v=a;this.endValid=this.startValid=!0;a.$watch("step.timeType",this.j.bind(this));a.$watch("step.startModel.dateType",this.g.bind(this));a.$watch("step.endModel.dateType",this.g.bind(this));a.$watch("timeStep.startValid",this.j.bind(this));a.$watch("timeStep.endValid",this.j.bind(this));a.$on("$destroy",this.l.bind(this))}E5.$inject=["$scope"];E5.prototype.l=function(){this.v=null};E5.prototype.g=function(){this.v.$broadcast("resizePreview")};
E5.prototype.j=function(){var a=this.v.step.timeType,b=!0;"range"==a?b=this.startValid&&this.endValid:"instant"==a&&(b=this.startValid);this.v.$emit("validate",b);this.g()};E5.prototype.Gp=function(){document.getElementById("time-help")||FE({label:"Custom Date/Time Formats",icon:"fa fa-clock-o",x:"-10",y:"center",width:"445","min-width":"250","max-width":"600",height:"445","min-height":"250","max-height":"600","show-close":!0,modal:!0},"<timehelp></timehelp>")};E5.prototype.launchHelp=E5.prototype.Gp;function F5(a,b,c,d){T0.call(this,a,b,c,d);this.g=my.u()}w(F5,T0);F5.$inject=["$scope","$element","$timeout","$attrs"];g=F5.prototype;g.pl=function(){this.vk();F5.C.pl.call(this)};g.vk=function(){this.config&&(this.config.file=null,this.config.descriptor=null)};g.finish=function(){if(this.config.descriptor){var a=this.config.descriptor;a.setActive(!1);this.Gs(a,this.config)}else a=this.to();this.Xz(a);F5.C.finish.call(this)};
g.Xz=function(a){var b=this.config.file.Ka();b&&Uw(b)?tf(ry(this.g,this.config.file),Fa(this.Vg,a),this.kk,this):this.Vg(a)};g.Vg=function(a){bJ(V,a);this.Yn(a);this.vk()};g.kk=function(){At(zt.u(),"Failed storing local file! Unable to finish import.",rs);this.vk()};function G5(a,b,c,d){F5.call(this,a,b,c,d)}w(G5,F5);G5.$inject=["$scope","$element","$timeout","$attrs"];G5.prototype.Yn=function(a){mU(r5.u(),a)};G5.prototype.to=function(){var a=this.config,b=a.file,c=r5.u(),d=new s5(a);d.ga(TI(c));d.Cc(c.ba());d.Lb(b.Ka());bza(d,a);return d};G5.prototype.Gs=function(a,b){bza(a,b)};W.directive("csvimport",[function(){var a=S0();a.controller=G5;return a}]);function H5(){pS.call(this)}w(H5,pS);H5.prototype.S=function(){return"CSV"};
H5.prototype.Ib=function(a,b){H5.C.Ib.call(this,a,b);var c=[new L0,new O0,new D5,new w5],d=new b1;b&&this.g(b,d);d.file=a;d.title=a.getFileName();Mva(d);FE({label:"CSV Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"900","min-width":"500","max-width":"2000",height:"700","min-height":"500","max-height":"2000",modal:!0,"show-close":!0,"no-scroll":!0},'<csvimport resize-with=".js-window"></csvimport>',void 0,void 0,void 0,{config:d,steps:c})};
H5.prototype.g=function(a,b){H5.C.g.call(this,a,b);b.commentChar=a.commentChar;b.dataRow=a.dataRow;b.delimiter=a.delimiter;b.headerRow=a.headerRow;b.useHeader=a.useHeader};function I5(){y_.call(this);this.id="csv"}w(I5,y_);I5.prototype.init=function(){var a=V;ZI(a,new RI("csv",r5,"CSV Layers","CSV Layers"));$I(a,this.id,s5);Iv(Ev.u(),"CSV",v5);a=KQ.u();NQ(a,"CSV",!0);OQ(a,"text/csv",new H5);PQ(a,this.id,Z0);JY(AG,new eza)};function J5(){SI.call(this)}w(J5,q5);wa(J5);J5.prototype.bc=function(a){J5.C.bc.call(this,a);this.ga("geojson");this.Da("GeoJSON Files")};function K5(a){MR.call(this);this.Oc="geojson";this.l=a||new f1}w(K5,MR);K5.prototype.T=function(){return"Feature Layers"};K5.prototype.Sa=function(){var a=K5.C.Sa.call(this);a.type="GeoJSON";return a};function kza(a,b){a.Vc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);p5(a,b)};function L5(){t5.call(this);this.log=lza}w(L5,t5);var lza=E.V("plugin.file.geojson.GeoJSONExporter");L5.prototype.ba=function(){return"GeoJSON"};L5.prototype.getExtension=function(){return"geojson"};L5.prototype.Pj=function(){return"application/vnd.geo+json"};
L5.prototype.Xc=function(){for(var a=!1,b=!1,c=0,d=this.items.length;c<d;c++){var e=this.items[c].get("recordTime");e&&(Ov(e,"os.time.TimeRange")?(this.items[c].set("START_TIME",Vv(e)),this.items[c].set("END_TIME",Wv(e)),b||(this.fields.push("START_TIME"),this.fields.push("END_TIME"),b=!0)):(this.items[c].set("TIME",e.toISOString()),a||(this.fields.push("TIME"),a=!0)))}this.Yf=(new DD).Qs(this.items,{featureProjection:N,dataProjection:"EPSG:4326",fields:this.fields})};function M5(a,b,c,d){F5.call(this,a,b,c,d)}w(M5,F5);M5.$inject=["$scope","$element","$timeout","$attrs"];M5.prototype.Yn=function(a){mU(J5.u(),a)};M5.prototype.to=function(){var a=this.config,b=a.file,c=J5.u(),d=new K5(a);d.ga(TI(c));d.Cc(c.ba());d.Lb(b.Ka());kza(d,a);return d};M5.prototype.Gs=function(a,b){kza(a,b)};W.directive("geojsonimport",[function(){var a=S0();a.controller=M5;return a}]);function N5(){pS.call(this)}w(N5,pS);N5.prototype.S=function(){return"GeoJSON"};
N5.prototype.Ib=function(a,b){N5.C.Ib.call(this,a,b);var c=[new D5,new w5],d=new f1;b&&this.g(b,d);d.file=a;d.title=a.getFileName();try{d.wb();var e=d.preview.slice(0,24);if((!d.mappings||0>=d.mappings.length)&&e&&0<e.length){var f=hB.u().Nd(e);f&&0<f.length&&(d.mappings=f)}}catch(h){}FE({label:"Import GeoJSON",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},
'<geojsonimport resize-with=".js-window"></geojsonimport>',void 0,void 0,void 0,{config:d,steps:c})};function O5(){M_.call(this);this.g=new f1}w(O5,M_);O5.prototype.dc=function(a){O5.C.dc.call(this,a);this.g=a.parserConfig||new f1};O5.prototype.wd=function(a){a=O5.C.wd.call(this,a);null!=this.g.mappings?dD(a,this.g.mappings):cD(a,["Altitude","Orientation","SemiMajor","SemiMinor","DateTime"]);return a};O5.prototype.xf=function(){return MQ("geojson")};function P5(){d1.call(this)}w(P5,d1);var mza=E.V("plugin.file.geojson.GeoJSONSimpleStyleParser");P5.prototype.Wc=function(){var a=P5.C.Wc.call(this);a.forEach(this.Xc,this);return a};
P5.prototype.Xc=function(a){P5.C.Xc.call(this,a);try{var b=a.get("marker-size"),c=a.get("marker-symbol"),d=a.get("marker-color"),e=a.get("stroke"),f=a.get("stroke-opacity"),h=a.get("stroke-width"),k=a.get("fill"),l=a.get("fill-opacity");if(b||c||d||e||f||h||k||l){b=b||"medium";c=c||"";d=d||"7e7e7e";e=e||"555555";f=f||1;h=h||2;k=k||"555555";l=l||.6;var m={},n=yv(e),p=yv(k),r=yv(d),u="rgba("+p[0]+","+p[1]+","+p[2]+","+l+")",v="rgba("+n[0]+","+n[1]+","+n[2]+","+f+")";d=!1;if(85!=p[0]||85!=p[1]||85!=
p[2])m.fill={color:u},d=!0;m.stroke={width:h};d||(m.stroke={color:v});if(c){h=c+"-24.png";if("number"===typeof c||c.match(/^[a-z0-9]$/))h="marker-24.png";c=.8;"medium"===b?c=.8:"small"===b?c=.6:"large"===b&&(c=1);m.image={color:"rgba("+r[0]+","+r[1]+","+r[2]+",1)",type:"icon",anchor:[.5,.5],scale:c,src:"v1542394219/images/icons/maki/v1/"+h};m.zIndex=151}else m.image={color:v,stroke:{color:v,width:h},fill:{color:u}};a.set("_style",m);jH(a)}}catch(x){E.error(mza,"Failed to style the feature!",x)}};Fw("application/json",function(a,b,c){if(c&&"string"===typeof c){a=oboe();var d=!1;a.fail(function(a){a.thrown&&/^Invalid null /.test(a.thrown.message)||(d=!0)});a.emit("data",c);var e=d?e:a.root()}return Wc(e)},0,"text/plain");function nza(a){if("FeatureCollection"===a.type||"Feature"===a.type)return!0;for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];if(Aa(c)||Array.isArray(c))if(c=nza(c))return c}return!1}Fw("application/vnd.geo+json",function(a,b,c){var d;c&&nza(c)&&(d=c);return Wc(d)},0,"application/json");DD.prototype.g=function(a,b){b=wD(this,b);var c={type:"Feature"},d=a.D();void 0!==d&&(c.id=d);(d=a.X())?c.geometry=ED(d,b):c.geometry=null;a=a.la;b=b.fields;for(var e in a)0!==e.indexOf("_")&&(!b||-1<b.indexOf(e))&&Object(a[e])!==a[e]&&(c.properties||(c.properties={}),c.properties[e]=a[e]);return c};function Q5(){y_.call(this);this.id="geojson"}w(Q5,y_);Q5.prototype.init=function(){var a=V;ZI(a,new RI("geojson",J5,"GeoJSON Layers","GeoJSON Layers"));$I(a,this.id,K5);Iv(Ev.u(),"GeoJSON",O5);a=KQ.u();NQ(a,"GeoJSON",!0);OQ(a,"application/vnd.geo+json",new N5);PQ(a,this.id,P5);PQ(a,this.id+"-simplespec",P5);JY(AG,new L5)};function R5(){IR.call(this)}w(R5,IR);R5.prototype.wb=function(){var a=MQ("gml");a.Bb(this.file.Ob());var b=25,c=[];for(a.g={};a.vd()&&b--;){var d=a.Wc();if(q(d))for(var e=0,f=d.length;e<f;e++){var h=d[e];h.ga(String(H(h)));c.push(h)}d=h.Ub();e=0;for(f=d.length;e<f;e++){var k=d[e];if(k&&!KB(k)&&!(k in a.g)){var l=new FF(k);l.selectable=!0;l.sortable=!0;a.g[k]=l}}}this.preview=c||[];this.columns=a.getColumns()||[];b=0;for(c=this.columns.length;b<c;b++)e=this.columns[b],e.width=0,WF(e);a.dispose()};function S5(){SI.call(this)}w(S5,q5);wa(S5);S5.prototype.bc=function(a){S5.C.bc.call(this,a);this.ga("gml");this.Da("GML Files")};function T5(a){MR.call(this);this.Oc="gml";this.l=a||new R5}w(T5,MR);T5.prototype.T=function(){return"Feature Layers"};T5.prototype.Sa=function(){var a=T5.C.Sa.call(this);a.type="GML";a.showForceColor=!0;return a};function oza(a,b){a.Vc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);p5(a,b)};function U5(a,b){this.scope=a;this.element=b;this.config=a.config;this.o=a.config.title;this.log=pza;a.$watch("config.title",this.l.bind(this));a.$on("$destroy",this.destroy.bind(this));a.$emit("window.ready")}U5.$inject=["$scope","$element"];var pza=E.V("os.ui.file.ui.AbstractFileImportCtrl");U5.prototype.destroy=function(){this.element=this.scope=this.config=null};function V5(a){a.config&&(a.config.file=null,a.config.descriptor=null)}
U5.prototype.l=function(a){a&&a!=this.o?(a=oy(my.u(),Sw(a)),this.scope.importForm.title.$setValidity("exists",!a)):this.scope.importForm.title.$setValidity("exists",!0)};U5.prototype.accept=function(){var a=this.g(),b=this.config.file.Ka();b&&Uw(b)?tf(ry(my.u(),this.config.file),Fa(this.j,a),this.s,this):this.j(a);KE(this.element)};U5.prototype.accept=U5.prototype.accept;U5.prototype.cancel=function(){V5(this);KE(this.element)};U5.prototype.cancel=U5.prototype.cancel;U5.prototype.rb=function(){return null};
U5.prototype.j=function(a){bJ(V,a);var b=this.rb();b&&mU(b,a);V5(this);a.isActive()&&C.dispatchEvent(new lA("userToggledDescriptor",a))};U5.prototype.s=function(){At(zt.u(),"Failed storing local file! Unable to finish import.",rs);V5(this)};W.directive("gmlimport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/file/genericfileimport.html",controller:W5,controllerAs:"ctrl"}}]);function W5(a,b){U5.call(this,a,b)}w(W5,U5);W5.$inject=["$scope","$element"];W5.prototype.g=function(){if(this.config.descriptor){var a=this.config.descriptor;oza(a,this.config)}else{a=this.config;var b=a.file,c=S5.u(),d=new T5(a);d.ga(TI(c));d.Cc(c.ba());d.Lb(b.Ka());oza(d,a);a=d}return a};W5.prototype.rb=function(){return S5.u()};function X5(){pS.call(this)}w(X5,pS);X5.prototype.S=function(){return"GML"};X5.prototype.Ib=function(a,b){X5.C.Ib.call(this,a,b);var c=new R5;b&&this.g(b,c);c.file=a;c.title=a.getFileName();FE({label:"Import GML",icon:"fa fa-file-text",x:"center",y:"center",width:400,"min-width":400,"max-width":800,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<gmlimport></gmlimport>",void 0,void 0,void 0,{config:c})};function Y5(a){a=a?a:{};TU.call(this,a);this.g["http://www.opengis.net/gml"].featureMember=Fl(TU.prototype.dn);this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}G(Y5,TU);g=Y5.prototype;
g.ez=function(a,b){a=zl(a,!1).replace(/^\s*|\s*$/g,"");var c=b[0].srsName;b="enu";c&&(c=Li(c))&&(b=c.fh);a=a.trim().split(/\s+/);for(var d,e,f=[],h=0,k=a.length;h<k;h++)e=a[h].split(/,+/),c=parseFloat(e[0]),d=parseFloat(e[1]),e=3===e.length?parseFloat(e[2]):0,"en"===b.substr(0,2)?f.push(c,d,e):f.push(d,c,e);return f};g.cM=function(a,b){a=Ol([null],this.CA,a,b,this);return Zh(a[1][0],a[1][1],a[1][3],a[1][4])};g.QE=function(a,b){(a=Ol(void 0,this.fl,a,b,this))&&b[b.length-1].push(a)};
g.jL=function(a,b){(a=Ol(void 0,this.fl,a,b,this))&&(b[b.length-1][0]=a)};g.el={"http://www.opengis.net/gml":{coordinates:Gl(Y5.prototype.ez)}};g.Wn={"http://www.opengis.net/gml":{innerBoundaryIs:Y5.prototype.QE,outerBoundaryIs:Y5.prototype.jL}};g.CA={"http://www.opengis.net/gml":{coordinates:Fl(Y5.prototype.ez)}};
g.Ts={"http://www.opengis.net/gml":{Point:Gl(TU.prototype.kz),MultiPoint:Gl(TU.prototype.iz),LineString:Gl(TU.prototype.gn),MultiLineString:Gl(TU.prototype.hz),LinearRing:Gl(TU.prototype.gz),Polygon:Gl(TU.prototype.hn),MultiPolygon:Gl(TU.prototype.jz),Box:Gl(Y5.prototype.cM)}};var qza={image:{type:"circle",color:"rgba(255,255,255,1)",fill:{color:"rgba(255,255,255,1)"}},stroke:{color:"rgba(255,255,255,1)",width:3}};function Z5(){this.format=new fV;this.dataProjection=this.features=null;this.j=0}var rza=E.V("os.ui.file.gml.GMLParser");g=Z5.prototype;
g.Bb=function(a){this.features=null;this.j=0;this.dataProjection=null;a instanceof ArrayBuffer&&(a=Ow(a)||null);var b;"string"===typeof a?b=VA(a):a instanceof Document&&(b=a);if(b){if(b.querySelector("[srsName]"))try{this.dataProjection=this.format.kn(b)}catch(c){E.ib(rza,"Failed reading projection from GML",c)}this.dataProjection||(this.dataProjection=this.Wa());(a=b.querySelectorAll("featureMember, featureMembers"))&&0<a.length&&(this.features=[].map.call(a,function(a){return a}))}};
g.oc=function(){this.features=null;this.j=0};g.vd=function(){return null!=this.features&&this.features.length>this.j};g.Wa=function(){return Li("EPSG:4326")};
g.Wc=function(){var a=null,b=this.features[this.j++];if(b)try{a=this.format.cg(b,{dataProjection:this.dataProjection,featureProjection:this.Wa()}),null!=a&&(a instanceof ek&&(a=[a]),a.forEach(function(a){var b=a.Ud,c=a.X();b&&"geometry"!=b&&c&&(fk(a,"geometry"),a.sb(c));var f=a.get("styleVariation");wv(f)&&(b={},eH(qza,b),c=b.image,f=ZG(f),c.color=f,c.fill.color=f,b.stroke.color=f,a.set("_style",b,!0),a.set("shape","circle"))}))}catch(c){E.error(rza,"Failed reading feature from GML",c),this.features.length=
0}return a&&1==a.length?a[0]:a};function $5(){Z5.call(this)}w($5,Z5);var sza=/^(geometry|recordtime|time|styleurl)$/i;$5.prototype.Wa=function(){return N};$5.prototype.dispose=function(){this.oc()};$5.prototype.oc=function(){this.features=null;this.j=0};$5.prototype.getColumns=function(){if(!this.g&&this.s){this.g=[];for(var a in this.s)"recordTime"===a?this.g.push(new FF("TIME","recordTime")):sza.test(a)||this.g.push(new FF(a));this.s=null}return this.g};function a6(){M_.call(this);this.g=new R5}w(a6,M_);a6.prototype.dc=function(a){a6.C.dc.call(this,a);this.g=a.parserConfig||new R5};a6.prototype.wd=function(a){a=a6.C.wd.call(this,a);null!=this.g.mappings?dD(a,this.g.mappings):cD(a,["Altitude","Orientation","SemiMajor","SemiMinor","DateTime"]);return a};a6.prototype.xf=function(){return MQ("gml")};TU.prototype.kn=function(a){return Li(this.srsName||Ag(a).getAttribute("srsName")||a.querySelector("[srsName]").getAttribute("srsName"))};Fw("application/gml+xml",dS(/^(gml|featurecollection)$/i,/\/(gml|wfs)/i),0,"text/xml");function b6(){y_.call(this);this.id="gml"}w(b6,y_);b6.prototype.init=function(){var a=V;ZI(a,new RI("gml",S5,"GML Layers","GML Layers"));$I(a,this.id,T5);Iv(Ev.u(),this.id,a6);a=KQ.u();NQ(a,this.id.toUpperCase(),!0);OQ(a,"application/gml+xml",new X5);PQ(a,this.id,$5)};function c6(){SI.call(this)}w(c6,q5);wa(c6);c6.prototype.bc=function(a){c6.C.bc.call(this,a);this.ga("gpx");this.Da("GPX Files")};function d6(){MR.call(this);this.Oc="gpx"}w(d6,MR);d6.prototype.T=function(){return"Feature Layers"};d6.prototype.Sa=function(){var a=d6.C.Sa.call(this);a.type="GPX";return a};function tza(a,b){a.Vc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);p5(a,b)};function e6(a){a=a?a:{};RU.call(this);this.defaultDataProjection=Li("EPSG:4326");this.g=a.readExtensions}G(e6,RU);var f6=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function g6(a,b,c,d){a.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(a.push(d.ele),delete d.ele,b.hasZ=!0):a.push(0);"time"in d?(a.push(d.time),delete d.time,b.hasM=!0):a.push(0);return a}
function h6(a,b,c){var d="XY",e=2;a.hasZ&&a.hasM?(d="XYZM",e=4):a.hasZ?(d="XYZ",e=3):a.hasM&&(d="XYM",e=3);if(4!==e){var f;var h=0;for(f=b.length/4;h<f;h++)b[h*e]=b[4*h],b[h*e+1]=b[4*h+1],a.hasZ&&(b[h*e+2]=b[4*h+2]),a.hasM&&(b[h*e+2]=b[4*h+3]);b.length=b.length/4*e;if(c)for(h=0,f=c.length;h<f;h++)c[h]=c[h]/4*e}return d}function i6(a,b){var c=b[b.length-1],d=a.getAttribute("href");null!==d&&(c.link=d);Nl(uza,a,b)}function j6(a,b){b[b.length-1].extensionsNode_=a}
function vza(a,b){var c=b[0];if(a=Ol({flatCoordinates:[],layoutOptions:{}},wza,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.layoutOptions;delete a.layoutOptions;d=h6(d,b);var e=new yr(null);zr(e,d,b);xD(e,!1,c);c=new ek(e);c.qc(a);return c}}
function xza(a,b){var c=b[0];if(a=Ol({flatCoordinates:[],ends:[],layoutOptions:{}},yza,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.ends;delete a.ends;var e=a.layoutOptions;delete a.layoutOptions;e=h6(e,b,d);var f=new Ar(null);Br(f,e,b,d);xD(f,!1,c);c=new ek(f);c.qc(a);return c}}function zza(a,b){var c=b[0];if(b=Ol({},Aza,a,b)){var d={};a=g6([],d,a,b);d=h6(d,a);a=new Jk(a,d);xD(a,!1,c);c=new ek(a);c.qc(b);return c}}
var Bza={rte:vza,trk:xza,wpt:zza},Cza=L(f6,{rte:Fl(vza),trk:Fl(xza),wpt:Fl(zza)}),uza=L(f6,{text:J(aV,"linkText"),type:J(aV,"linkType")}),wza=L(f6,{name:J(aV),cmt:J(aV),desc:J(aV),src:J(aV),link:i6,number:J(ZU),extensions:j6,type:J(aV),rtept:function(a,b){var c=Ol({},Dza,a,b);c&&(b=b[b.length-1],g6(b.flatCoordinates,b.layoutOptions,a,c))}}),Dza=L(f6,{ele:J(XU),time:J(WU)}),yza=L(f6,{name:J(aV),cmt:J(aV),desc:J(aV),src:J(aV),link:i6,number:J(ZU),type:J(aV),extensions:j6,trkseg:function(a,b){var c=
b[b.length-1];Nl(Eza,a,b);c.ends.push(c.flatCoordinates.length)}}),Eza=L(f6,{trkpt:function(a,b){var c=Ol({},k6,a,b);c&&(b=b[b.length-1],g6(b.flatCoordinates,b.layoutOptions,a,c))}}),k6=L(f6,{ele:J(XU),time:J(WU)}),Aza=L(f6,{ele:J(XU),time:J(WU),magvar:J(XU),geoidheight:J(XU),name:J(aV),cmt:J(aV),desc:J(aV),src:J(aV),link:i6,sym:J(aV),type:J(aV),fix:J(aV),sat:J(ZU),hdop:J(XU),vdop:J(XU),pdop:J(XU),ageofdgpsdata:J(XU),dgpsid:J(ZU),extensions:j6});
function Fza(a,b){b||(b=[]);for(var c=0,d=b.length;c<d;++c){var e=b[c];if(a.g){var f=e.get("extensionsNode_")||null;a.g(e,f)}e.set("extensionsNode_",void 0)}}e6.prototype.Sr=function(a,b){if(!(0<=f6.indexOf(a.namespaceURI)))return null;var c=Bza[a.localName];if(!c)return null;a=c(a,[vD(this,a,b)]);if(!a)return null;Fza(this,[a]);return a};e6.prototype.Bk=function(a,b){return 0<=f6.indexOf(a.namespaceURI)?"gpx"==a.localName&&(a=Ol([],Cza,a,[vD(this,a,b)]))?(Fza(this,a),a):[]:[]};
function l6(a,b,c){a.setAttribute("href",b);b=c[c.length-1].properties;Pl({node:a},Gza,Ll,[b.linkText,b.linkType],c,Hza)}function m6(a,b,c){var d=c[c.length-1],e=d.node.namespaceURI,f=d.properties;a.setAttributeNS(null,"lat",b[1]);a.setAttributeNS(null,"lon",b[0]);switch(d.geometryLayout){case "XYZM":0!==b[3]&&(f.time=b[3]);case "XYZ":0!==b[2]&&(f.ele=b[2]);break;case "XYM":0!==b[2]&&(f.time=b[2])}b="rtept"==a.nodeName?Iza[e]:Jza[e];d=Ml(f,b);Pl({node:a,properties:f},Kza,Ll,d,c,b)}
var Hza=["text","type"],Gza=L(f6,{text:K(cV),type:K(cV)}),Lza=L(f6,"name cmt desc src link number type rtept".split(" ")),Mza=L(f6,{name:K(cV),cmt:K(cV),desc:K(cV),src:K(cV),link:K(l6),number:K(eV),type:K(cV),rtept:Il(K(m6))}),Iza=L(f6,["ele","time"]),Nza=L(f6,"name cmt desc src link number type trkseg".split(" ")),Qza=L(f6,{name:K(cV),cmt:K(cV),desc:K(cV),src:K(cV),link:K(l6),number:K(eV),type:K(cV),trkseg:Il(K(function(a,b,c){Pl({node:a,geometryLayout:b.layout,properties:{}},Oza,Pza,b.getCoordinates(),
c)}))}),Pza=Jl("trkpt"),Oza=L(f6,{trkpt:K(m6)}),Jza=L(f6,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),Kza=L(f6,{ele:K(dV),time:K(function(a,b){b=new Date(1E3*b);b=b.getUTCFullYear()+"-"+ok(b.getUTCMonth()+1)+"-"+ok(b.getUTCDate())+"T"+ok(b.getUTCHours())+":"+ok(b.getUTCMinutes())+":"+ok(b.getUTCSeconds())+"Z";a.appendChild(xl.createTextNode(b))}),magvar:K(dV),geoidheight:K(dV),name:K(cV),cmt:K(cV),desc:K(cV),src:K(cV),link:K(l6),
sym:K(cV),type:K(cV),fix:K(cV),sat:K(eV),hdop:K(dV),vdop:K(dV),pdop:K(dV),ageofdgpsdata:K(dV),dgpsid:K(eV)}),Rza={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Sza(a,b){if(a=a.X())if(a=Rza[a.T()])return yl(b[b.length-1].node.namespaceURI,a)}
var Tza=L(f6,{rte:K(function(a,b,c){var d=c[0],e=b.Vb();a={node:a,properties:e};if(b=b.X())b=xD(b,!0,d),a.geometryLayout=b.layout,e.rtept=b.getCoordinates();d=Lza[c[c.length-1].node.namespaceURI];e=Ml(e,d);Pl(a,Mza,Ll,e,c,d)}),trk:K(function(a,b,c){var d=c[0],e=b.Vb();a={node:a,properties:e};if(b=b.X())b=xD(b,!0,d),e.trkseg=Cr(b);d=Nza[c[c.length-1].node.namespaceURI];e=Ml(e,d);Pl(a,Qza,Ll,e,c,d)}),wpt:K(function(a,b,c){var d=c[0],e=c[c.length-1];e.properties=b.Vb();if(b=b.X())b=xD(b,!0,d),e.geometryLayout=
b.layout,m6(a,b.getCoordinates(),c)})});e6.prototype.Un=function(a,b){b=wD(this,b);var c=yl("http://www.topografix.com/GPX/1/1","gpx");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd");c.setAttribute("version","1.1");c.setAttribute("creator","OpenLayers");Pl({node:c},Tza,Sza,a,[b]);return c};function n6(){this.Ic=new e6;this.g=null;this.hA=0}n6.prototype.Bb=function(a){a instanceof ArrayBuffer&&(a=Ow(a)||null);Bl(a)?this.g=a:"string"===typeof a&&(this.g=Dl(a))};n6.prototype.oc=function(){this.g=null};n6.prototype.vd=function(){return null!=this.g};
n6.prototype.Wc=function(){var a=null;if(this.g&&(a=this.g,this.g=null,a=this.Ic.cg(a,{featureProjection:N}))){for(var b=[],c=a.length-1;0<=c;c--){var d=a[c],e=d.X();if(e instanceof tk){var f=e.getCoordinates();f&&(e instanceof yr||e instanceof Ar?(a.splice(c,1),(e instanceof yr?[f]:f).forEach(function(a){this.hA++;a.forEach(function(a){var c=new ek;Uza(c,a);c.set("TRACK_ID",this.hA);b.push(c)},this)},this)):e instanceof Jk&&Uza(d,f))}}a=a.concat(b)}return a};
function Uza(a,b){var c=b[3];b=new Jk(b.slice(0,3));a.sb(b);if(c){if(b=c.extensions){b=zg(b);for(var d=0,e=b.length;d<e;d++){var f=b[d];a.set(f.localName,f.textContent)}}c=c.time;null!=c&&a.set("time",(new Date(1E3*c)).toISOString())}}k6=L(f6,{ele:J(XU),time:J(WU),extensions:j6});k6=L(f6,{ele:J(XU),time:J(WU),extensions:j6});
g6=function(a,b,c,d){a.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(a.push(d.ele),delete d.ele,b.hasZ=!0):a.push(0);"time"in d||"extensionsNode_"in d?(a.push({extensions:d.extensionsNode_,time:d.time}),delete d.extensionsNode_,delete d.time,b.hasM=!0):a.push(0);return a};function o6(){M_.call(this)}w(o6,M_);o6.prototype.xf=function(a){return new n6(a)};o6.prototype.pd=function(a){a=o6.C.pd.call(this,a);if(!od||Bd(10))a.B="document";return a};o6.prototype.wd=function(a){a=o6.C.wd.call(this,a);a.A=!0;return a};o6.prototype.O=function(){return new xN};Fw("application/vnd.gpx+xml",dS(/^gpx$/i,/\/gpx\//i),0,"text/xml");W.directive("gpximport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/file/genericfileimport.html",controller:p6,controllerAs:"ctrl"}}]);function p6(a,b){U5.call(this,a,b)}w(p6,U5);p6.$inject=["$scope","$element"];p6.prototype.g=function(){if(this.config.descriptor){var a=this.config.descriptor;a.setActive(!1);tza(a,this.config)}else{a=this.config;var b=a.file,c=c6.u(),d=new d6;d.ga(TI(c));d.Cc(c.ba());d.Lb(b.Ka());d.Vc("rgba(255,255,255,1)");tza(d,a);a=d}return a};
p6.prototype.rb=function(){return c6.u()};function q6(){pS.call(this)}w(q6,pS);q6.prototype.S=function(){return"GPX"};q6.prototype.Ib=function(a,b){q6.C.Ib.call(this,a,b);var c=new IR;b&&this.g(b,c);c.file=a;c.title=a.getFileName();FE({label:"Import GPX",icon:"fa fa-file-text",x:"center",y:"center",width:400,"min-width":400,"max-width":800,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<gpximport></gpximport>",void 0,void 0,void 0,{config:c})};function r6(){y_.call(this);this.id="gpx"}w(r6,y_);r6.prototype.init=function(){var a=V;ZI(a,new RI("gpx",c6,"GPX Layers","GPX Layers"));$I(a,this.id,d6);Iv(Ev.u(),this.id,o6);a=KQ.u();NQ(a,this.id.toUpperCase(),!0);OQ(a,"application/vnd.gpx+xml",new q6);PQ(a,this.id,n6)};function s6(){SI.call(this)}w(s6,q5);wa(s6);s6.prototype.bc=function(a){s6.C.bc.call(this,a);this.ga("kml");this.Da("KML Files")};function t6(){MR.call(this);this.Oc="kml"}w(t6,MR);t6.prototype.T=function(){return"Feature Layers"};t6.prototype.Sa=function(){var a=t6.C.Sa.call(this);a.type="KML";a.colorControl="colorControl:pickerReset";a.showForceColor=!0;return a};function Vza(a,b){a.Vc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);p5(a,b)};function u6(){t5.call(this);this.log=Wza;this.L=!1;this.G=[];this.ka=0}w(u6,t5);var Wza=E.V("os.ex.ZipExporter");function v6(a,b){b&&void 0===window.zip&&(b=!1,At(Ct,"Compression is not supported in this application! Defaulting to uncompressed output.",rs,a.log));a.L=b}g=u6.prototype;g.getExtension=function(){return""};g.ba=function(){return"ZIP"};g.nn=function(a){a="Error creating "+this.ba()+" file: "+a;At(Ct,a,rs,this.log);this.dispatchEvent(new z("error"))};g.lb=function(){return this.L};
g.reset=function(){u6.C.reset.call(this);this.ka=this.G.length=0};g.Xc=function(){this.Ne();0<this.G.length?this.L?(this.ka=0,zip.createWriter(new zip.BlobWriter,this.Vn.bind(this),this.nn.bind(this))):(this.Yf=this.G[0].Ob(),this.dispatchEvent(new z("complete"))):this.nn("No output created by export process")};g.Ne=function(){};
g.Vn=function(a){if(this.ka<this.G.length){var b=this.G[this.ka++],c=b.getFileName();b=b.Ob();c?"string"===typeof b?a.add(c,new zip.TextReader(b),this.Vn.bind(this,a)):b instanceof ArrayBuffer?a.add(c,new zip.ArrayBufferReader(b),this.Vn.bind(this,a)):b instanceof Blob?a.add(c,new zip.BlobReader(b),this.Vn.bind(this,a)):this.nn("Unrecognized datatype"):this.nn("No filename provided")}else a.close(this.wJ.bind(this))};g.wJ=function(a){this.Yf=a;this.dispatchEvent(new z("complete"))};function w6(){u6.call(this);this.log=Xza;this.L=!0;this.g=this.Ia=this.j=null;this.N={};this.N.Folder=this.Lr.bind(this);this.N.Placemark=this.XL.bind(this);this.Ca=this.o=this.fields=null;this.s={};this.I=zc(vM);this.U=null;this.bb={};this.l=null;this.B=!0;this.oa=this.P=this.ra=!1}w(w6,u6);var Xza=E.V("os.ui.file.kml.AbstractKMLExporter");g=w6.prototype;g.reset=function(){w6.C.reset.call(this);this.o=this.g=this.Ia=this.j=null;this.I=zc(vM);this.U=null;this.bb={};this.s={};this.l=null};
g.getExtension=function(){return this.L?"kmz":"kml"};g.ba=function(){return"KML"};g.Pj=function(){return this.L?"application/vnd.google-earth.kmz":"application/vnd.google-earth.kml+xml"};
g.Ne=function(){this.j=TA("kml","http://www.opengis.net/kml/2.2");var a=Ag(this.j);a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx","http://www.google.com/kml/ext/2.2");this.g=KC("Document","http://www.opengis.net/kml/2.2",a);KC("name","http://www.opengis.net/kml/2.2",this.g,this.Ia||this.getName()||"KML Document");KC("visibility","http://www.opengis.net/kml/2.2",this.g,1);this.o=LC("Folder","http://www.opengis.net/kml/2.2",this.j);KC("name","http://www.opengis.net/kml/2.2",this.o,this.Ia||
this.getName()||"KML Document");a=0;for(var b=this.items.length;a<b;a++)Yza(this,this.items[a]);1<this.o.childElementCount&&this.g.appendChild(this.o);a=WA(this.j);Ib(a,"<?")||(a='<?xml version="1.0"?>'+a);b=new Lw;b.j=this.getName()+".kml";b.g=a;this.G.push(b)};g.jr=function(a){var b=null,c=this.iu(a);c&&(b=Zza(this,a,c));!b&&this.Ca&&(b=Zza(this,a,this.Ca));return b};
function Zza(a,b,c){if(c){for(var d=[],e=0;e<c.length;e++){var f=a.Po(b,c[e]);f&&d.push(f)}if(0<d.length)return d.join(" - ")}return null}function Yza(a,b){var c=a.getParent(b);if(c){var d=a.fu(b);if(d&&a.N[d]){var e=a.D(b);c=KC(d,"http://www.opengis.net/kml/2.2",c,void 0,{id:e});(e=a.jr(b))&&KC("name","http://www.opengis.net/kml/2.2",c,e);(0,a.N[d])(c,b)}}}
g.Lr=function(a,b){var c=this.xp(b)?1:0;KC("visibility","http://www.opengis.net/kml/2.2",a,c);if(a=this.na(b))for(b=0;b<a.length;b++)Yza(this,a[b])};
g.XL=function(a,b){var c=this.ou(b),d=[c],e=this.La(b);(this.B||"default"==c)&&d.push(e);var f="default"==c?void 0:this.wg(b);"icon"==c&&this.ra&&(f=this.wg(b),d.push(String(bc(f.href))),"number"===typeof f.scale&&1!=f.scale&&d.push(String(f.scale)));c=d.join("-");if(!(c in this.bb)){d=f;f=LC("Style","http://www.opengis.net/kml/2.2",this.j,void 0,{id:c});var h=KC("IconStyle","http://www.opengis.net/kml/2.2",f);null!=d?(this.B&&KC("color","http://www.opengis.net/kml/2.2",h,e),null!=d.scale&&KC("scale",
"http://www.opengis.net/kml/2.2",h,d.scale),h=KC("Icon","http://www.opengis.net/kml/2.2",h),KC("href","http://www.opengis.net/kml/2.2",h,d.href)):KC("color","http://www.opengis.net/kml/2.2",h,e);d=KC("LineStyle","http://www.opengis.net/kml/2.2",f);KC("color","http://www.opengis.net/kml/2.2",d,e);KC("width","http://www.opengis.net/kml/2.2",d,2);d=KC("PolyStyle","http://www.opengis.net/kml/2.2",f);KC("color","http://www.opengis.net/kml/2.2",d,e);KC("fill","http://www.opengis.net/kml/2.2",d,0);(e=this.g.querySelector("Folder"))?
e.parentNode&&e.parentNode.insertBefore(f,e):this.g.appendChild(f);this.bb[c]=!0}Lb(Yb(c))||KC("styleUrl","http://www.opengis.net/kml/2.2",a,"#"+c);null===this.l&&(this.l=this.nu(b));a:{if(this.l&&(e=this.kd(b,this.l),!isNaN(e))){c=LC("Style","http://www.opengis.net/kml/2.2",this.j);f=KC("IconStyle","http://www.opengis.net/kml/2.2",c);KC("heading","http://www.opengis.net/kml/2.2",f,e%360);e=c;break a}e=null}e&&a.appendChild(e);e=this.xp(b)?1:0;KC("visibility","http://www.opengis.net/kml/2.2",a,e);
e=LC("ExtendedData","http://www.opengis.net/kml/2.2",this.j);if(c=this.getTime(b)){if(Ov(c,"os.time.TimeRange")){if((f=c.Pa())&&f!=Qv){var k=k||KC("TimeSpan","http://www.opengis.net/kml/2.2",a);KC("begin","http://www.opengis.net/kml/2.2",k,BC(new Date(f),void 0,void 0,!0))}(f=c.Ya())&&f!=Rv&&(k=k||KC("TimeSpan","http://www.opengis.net/kml/2.2",a),KC("end","http://www.opengis.net/kml/2.2",k,BC(new Date(f),void 0,void 0,!0)))}else(f=c.Pa())&&f!=Qv&&(k=KC("TimeStamp","http://www.opengis.net/kml/2.2",
a),KC("when","http://www.opengis.net/kml/2.2",k,BC(new Date(f),void 0,void 0,!0)));k=KC("Data","http://www.opengis.net/kml/2.2",e,void 0,{name:"TIME"});KC("value","http://www.opengis.net/kml/2.2",k,c.toString())}(k=this.X(b))&&Pl({node:a},NV,MV,[k],[]);if((k=this.Ho(b))&&0<k.length){c=0;for(f=k.length;c<f;c++)if(d=this.kd(b,k[c]),null!=d)if(void 0===l&&"string"===typeof d&&JA.test(k[c])){if(!Lb(Yb(d))){var l=KC("description","http://www.opengis.net/kml/2.2",a);l.appendChild(this.j.createCDATASection(d))}}else As(d)&&
(h=KC("Data","http://www.opengis.net/kml/2.2",e,void 0,{name:k[c]}),KC("value","http://www.opengis.net/kml/2.2",h,String(d)));null==this.l||kb(k,this.l)||(l=KC("Data","http://www.opengis.net/kml/2.2",e,void 0,{name:this.l}),KC("value","http://www.opengis.net/kml/2.2",l,String(this.kd(b,this.l))))}0<e.childElementCount&&a.appendChild(e)};g.na=function(){return null};g.fu=function(){return"Placemark"};g.Ho=function(){return this.fields};g.js=function(a){this.fields=a};
g.wg=function(){return this.U?this.U:this.I};g.wc=function(a){this.U=a};g.Po=function(a,b){return"string"==typeof b?this.kd(a,b)||null:null};g.xp=function(){return!0};g.getParent=function(){return this.o};g.iu=function(){return null};lk=function(a,b,c){return function(d,e){if(void 0!==d)return d=Math.max(Math.log(b/d)/Math.log(a)+e,0).toFixed(1),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};g=ql.prototype;g.ug=function(){return this.get("brightness")};g.vg=function(){return this.get("contrast")};g.Ml=function(){return this.get("hue")};g.yg=function(){return this.get("saturation")};g.ij=function(a){this.set("brightness",a)};g.jj=function(a){this.set("contrast",a)};g.ls=function(a){this.set("hue",a)};g.mj=function(a){this.set("saturation",a)};rn.prototype.Tz=function(a){a=H(a).toString();this.G[a]||(this.G[a]=!0,this.render())};rn.prototype.mA=function(a){a=H(a).toString();this.G[a]&&(delete this.G[a],this.render())};Nv["ol.layer.Group"]=kn;oj=function(a,b){b=b||[];b[0]=ri(a[0]+.5|0,0,255);b[1]=ri(a[1]+.5|0,0,255);b[2]=ri(a[2]+.5|0,0,255);b[3]=Math.round(100*ri(a[3],0,1))/100;return b};Op.prototype.sc=function(a,b,c,d,e){if(this.g){var f=b.viewState.resolution,h=b.viewState.rotation;b=b.skippedFeatureUids;var k=this.W(),l={};return this.g.sc(a,f,h,c,b,function(a){var b=H(a).toString();if(!(b in l))return l[b]=!0,d.call(e,a,k)},null)}};
(function(){var a=Xo.prototype.Mi;Xo.prototype.Mi=function(b){b&&T.u().Qa()&&(b.viewState.rotation=0);if(b){var c=this.g,d=b.size[0]+"px",e=b.size[1]+"px";c.style.width!==d&&(c.style.width=d);c.style.height!==e&&(c.style.height=e)}a.call(this,b)}})();var $za=[{image:{type:"icon",anchorOrigin:"bottom-left",anchorXUnits:"fraction",anchorYUnits:"fraction",crossOrigin:"anonymous",rotation:0,src:"http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png"},stroke:{color:"rgba(255,255,255,1)",width:3}}];function x6(a,b,c){for(var d in a)a[d]&&(a[d][b]=c)}
function y6(a){a=zl(a,!1);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],a=[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255],oj(a,a)}x6(HV,"color",J(y6));x6(Rpa,"color",J(y6));x6(Vpa,"color",J(y6));function aAa(a){a=Ol({},bAa,a,[]);var b=null;if(null!=a.when)b=new Pv(a.when);else if(null!=a.begin||null!=a.end)b=new Uv(a.begin,a.end);return b}var cAa=L(wV,{refreshInterval:J(ZU),refreshMode:J(aV),viewRefreshMode:J(aV),viewRefreshTime:J(ZU)});
zs(cAa,IV,!1);var dAa=L(wV,{color:J(y6)});zs(dAa,GV,!1);var eAa=L(wV,{TimeStamp:J(aAa,"recordTime"),TimeSpan:J(aAa,"recordTime")}),bAa=L(wV,{when:J(NC),begin:J(NC),end:J(NC)});zs(eAa,JV,!1);function fAa(a,b){var c=vpa(a,b);(a=Ol({},gAa,a,b))&&c.qc(a);return c}var hAa=L(wV,{Track:Fl(BV)}),gAa=L(wV,{altitudeMode:J(aV),interpolate:J(UU)},L(vV,{interpolate:J(UU)})),iAa=L(wV,{MultiTrack:J(fAa,"geometry"),Track:J(BV,"geometry")},L(vV,{MultiTrack:J(fAa,"geometry")})),jAa=L(wV,{coord:upa});zs(hAa,wpa,!1);
zs(jAa,xpa,!1);zs(iAa,JV,!0);MV=function(a,b){b=b[b.length-1].node.namespaceURI;var c=a.T(),d=QV[c];a instanceof tk&&(a=a.layout,"XYM"===a||"XYZM"===a)&&("LineString"===c?(d="gx:Track",b="http://www.google.com/kml/ext/2.2"):"MultiLineString"===c&&(d="gx:MultiTrack",b="http://www.google.com/kml/ext/2.2"));return yl(b,d)};function kAa(a){for(var b=zl(a,!1).trim(),c=null,d=a;d&&!c;)c=d.QB,d=d.parentNode;return!a.baseURI||c&&b in c?b:gf(a.baseURI,b).toString()}x6(JV,"styleUrl",J(kAa));var lAa=L(wV,{href:J(kAa)});
zs(lAa,IV,!0);zs(lAa,Qpa,!0);function mAa(a,b){if(b instanceof yr){var c=b.flatCoordinates;b=b.stride;for(var d=0;d<c.length;d+=b){var e=yl("http://www.google.com/kml/ext/2.2","gx:coord"),f=c[d]+" "+c[d+1];3<b&&(f+=" "+c[d+2]);cV(e,f);f=yl("http://www.opengis.net/kml/2.2","when");var h=(new Date(c[d+b-1])).toISOString();cV(f,h);a.appendChild(e);a.appendChild(f)}}}
var nAa=L(wV,{MultiGeometry:K(function(a,b,c){if(b instanceof Kr){a={node:a};b=Np(b);for(var d=0,e=b.length;d<e;d++)Pl(a,NV,MV,[b[d]],c)}else LV(a,b,c)})},L(vV,{MultiTrack:K(function(a,b,c){if(b instanceof Ar){b=Cr(b);for(var d=0;d<b.length;d++){var e=yl("http://www.google.com/kml/ext/2.2","gx:Track");mAa(e,b[d],c);a.appendChild(e)}}}),Track:K(mAa)}));zs(nAa,NV,!0);QV.GeometryCollection="MultiGeometry";
zV=function(a){a=zl(a,!1);for(var b=[],c=/^[^\d+.-]*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d*(?:e[+\-]?\d+)?))?\s*/i,d;d=c.exec(a);)b.push(parseFloat(d[1]),parseFloat(d[2]),d[3]?parseFloat(d[3]):0),a=a.substr(d[0].length);return b};x6(tpa,"coordinates",Gl(zV));x6(DV,"coordinates",Gl(zV));function oAa(a){return XU(a)}x6(GV,"scale",J(oAa));x6(HV,"scale",J(oAa));x6(Spa,"Url",function(a,b){Nl(IV,a,b)});
x6(Fpa,"IconStyle",function(a,b){if(a=Ol({},GV,a,b)){b=b[b.length-1];var c="Icon"in a?a.Icon:{};var d=(d=c.href)?d:"__ignore__";var e=a.hotSpot;if(e){var f=[e.x,e.y];var h=e.xunits;var k=e.yunits}var l;e=c.x;var m=c.y;void 0!==e&&void 0!==m&&(l=[e,m]);var n;e=c.w;c=c.h;void 0!==e&&void 0!==c&&(n=[e,c]);var p;c=a.heading;void 0!==c&&(p=si(c));c=a.scale;e=d?sx(d):void 0;"none"==e&&(e=void 0);f=new pL({anchor:f,anchorOrigin:"bottom-left",anchorXUnits:h,anchorYUnits:k,color:a.color,crossOrigin:e,offset:l,
offsetOrigin:"bottom-left",rotation:p,scale:c,size:n,src:d});b.imageStyle=f}});W.directive("kmlexport",[function(){return{restrict:"E",scope:{exporter:"=",simple:"=?"},templateUrl:"v1542394219/views/plugin/kml/kmlexport.html",controller:z6,controllerAs:"kmlexport"}}]);
function z6(a){this.v=a;this.g=a.exporter;this.icon={path:this.g.I?this.g.I.href:xM().path};this.useItemColor=this.g.B;this.useItemIcon=this.g.ra;this.compress=this.g.L;this.exportEllipses=this.g.P;this.useCenterPoint=this.g.oa;this.iconSet=zM;this.iconSrc=yM;a.$watch("kmlexport.icon.path",this.j.bind(this));a.$watch("kmlexport.useItemColor",this.j.bind(this));a.$watch("kmlexport.useItemIcon",this.j.bind(this));a.$watch("kmlexport.compress",this.j.bind(this));a.$watch("kmlexport.exportEllipses",this.j.bind(this));
a.$watch("kmlexport.useCenterPoint",this.j.bind(this));a.$on("$destroy",this.l.bind(this));this.j()}z6.$inject=["$scope"];z6.prototype.l=function(){this.g=this.v=null};z6.prototype.j=function(){this.g&&this.v&&(this.g.B=this.useItemColor,this.g.ra=this.useItemIcon,v6(this.g,this.compress),this.g.P=this.exportEllipses,this.g.oa=this.useCenterPoint,this.icon&&this.g.wc({href:this.icon.path}))};function FG(){w6.call(this);this.log=pAa;this.A={};this.Z={}}w(FG,w6);var pAa=E.V("plugin.file.kml.KMLExporter");g=FG.prototype;g.reset=function(){FG.C.reset.call(this);this.A={};this.Z={}};g.Sh=function(){return!0};g.La=function(a){a=OB(a,A6(a));if(!a||"string"!=typeof a&&!q(a))a="rgba(255,255,255,1)";return YG(a)};g.kd=function(a,b){return IB(a,b)};
g.Po=function(a,b){return"object"==typeof b&&b.column?(a=this.kd(a,b.column),null!=a?(b.showColumn?b.column+": ":"")+String(a):null):FG.C.Po.call(this,a,b)};g.D=function(a){return a.D()};g.Ho=function(a){a=A6(a);var b=null;a&&(b=a.D(),b in this.Z||(this.Z[b]=BL(a)||[]),b=this.Z[b]);return b||this.fields};
g.getParent=function(a){var b=this.g;if(b&&(a=A6(a))){var c=a.D();c in this.A?b=this.A[c]:(b=KC("Folder","http://www.opengis.net/kml/2.2",b),KC("name","http://www.opengis.net/kml/2.2",b,a.S()),b=this.A[c]=b)}return b};g.Vb=function(){for(var a=(void 0).Vb(),b=nc(a),c=0,d=b.length;c<d;c++){var e=b[c];(Ib(e,"_")||KB(e))&&delete a[e]}return a};g.ou=function(a){var b="default",c=this.X(a);!c||"Point"!=c.T()&&"GeometryCollection"!=c.T()||(a=A6(a),b="Icon"==(a?a.Dd:null)?"icon":"point");return b};
g.getTime=function(a){a=a.get("recordTime");return P(a,"os.time.ITime")?a:null};g.X=function(a){var b;a&&((b=a.get("geometry"))&&(b=b.clone().toLonLat()),this.P&&(a=DB(a),!a||a instanceof Jk||(this.oa&&b instanceof Jk?b=new Kr([a,b]):b=a)));return b};g.nu=function(a){if(a&&(a=PB(a))&&a.showRotation)return a.rotationColumn};function A6(a){var b=null;a&&(a=a.get("sourceId"),"string"===typeof a&&(b=NB.O(a)));return b}g.zg=function(){return'<kmlexport exporter="exporter" simple="simple"></kmlexport>'};
g.iu=function(a){if(a){var b=a.get("sourceId");if(b&&"draw"!=b){if(a instanceof ZB||!(b in this.s)){var c=mH(nH.u(),b);a=a.get("_style");c&&c.labels&&qAa(c.labels)?this.s[b]=c.labels:a&&q(a)?(c=ib(a,EH))&&(this.s[b]=c.labels):this.s[b]=null}return this.s[b]}}return null};function qAa(a){return a?a.some(function(a){return"object"==typeof a&&a.column}):!1}g.zs=function(){return!0};function B6(){this.Ic=new gV({showPointNames:!1});this.g=null}B6.prototype.Bb=function(a){a instanceof ArrayBuffer&&(a=Ow(a)||null);Bl(a)?this.g=a:"string"===typeof a&&(this.g=Dl(a))};B6.prototype.oc=function(){this.g=null};B6.prototype.vd=function(){return null!=this.g};B6.prototype.Wc=function(){var a=null;this.g&&(a=this.g,this.g=null,a=this.Ic.cg(a));return a};function C6(a){sS.call(this,a);this.g=this.G=null;this.B=this.N=0}w(C6,sS);g=C6.prototype;g.J=function(){C6.C.J.call(this);this.G=null};g.getColumns=function(){return this.g};g.Si=function(a){var b=this.j,c=this.G;b.A=c;b.U=!!c;C6.C.Si.call(this,a)};
g.jk=function(a){this.G=this.j.A;this.g=this.j.getColumns();this.N=this.j.oa;0<this.B&&At(Ct,(1===this.B?"An area was":this.B+" areas were")+" removed from the original due to invalid topology. One possible  reason is a repeating or invalid coordinate.",ss);C6.C.jk.call(this,a)};
g.bs=function(a){var b=null;a instanceof jz&&a.getFeature()&&(b=a.getFeature());if(b){a=this.B;var c=b,d=c.X(),e=0;if(d instanceof Kr){c=d.g;for(var f=c.length;0<f;f--)if(c[f]instanceof Rk||c[f]instanceof Rr)d=UD(c[f],!1,!0),void 0!==d?c[f]=d:(c.splice(f,1),e++)}else if(d instanceof Rk||d instanceof Rr)d=UD(d,!1,!0),void 0===d&&e++,c.sb(d);this.B=a+e;C6.C.bs.call(this,b)}};g.Gr=function(a){var b=null;a.getFeature()&&(b=a.getFeature());b&&(this.o||this.l)&&C6.C.Gr.call(this,b)};function $1(a){var b=a.imageExtent,c=void 0!==a.crossOrigin?a.crossOrigin:null,d=void 0!==a.imageLoadFunction?a.imageLoadFunction:gxa;Y2.call(this,{attributions:a.attributions,logo:a.logo,projection:Li(a.projection)});this.wa=new $2(b,void 0,1,a.url,c,d);this.l=a.imageSize?a.imageSize:null;I(this.wa,"change",this.j,this)}G($1,Y2);
$1.prototype.j=function(a){if(2==this.wa.getState()){var b=this.wa.aa(),c=this.wa.Ua();if(this.l){var d=this.l[0];var e=this.l[1]}else d=c.width,e=c.height;b=Math.ceil(gi(b)/(hi(b)/e));if(b!=d){b=qj(b,e);var f=b.canvas;b.drawImage(c,0,0,d,e,0,0,f.width,f.height);this.wa.setImage(f)}}Y2.prototype.j.call(this,a)};function D6(){this.lb=!1}D6.prototype.pause=va;D6.prototype.reset=va;function E6(a){this.lb=!1;this.A=Math.max(a,0);this.l=void 0;this.o=0;this.j=void 0}w(E6,D6);g=E6.prototype;g.Fa=function(){return this.lb?(this.Cl(),Wc()):new Oc(this.Cl,this)};g.pause=function(){if(void 0!==this.j){clearTimeout(this.j);this.j=void 0;var a=Date.now()-this.o;this.l=Math.max(F6(this)-a,0)}};g.reset=function(){void 0!==this.j&&(clearTimeout(this.j),this.j=void 0);this.l=void 0;this.o=0};function F6(a){return void 0!==a.l?a.l:a.A}
g.Cl=function(a,b){var c=F6(this);0<c?(this.j=setTimeout(this.Dm.bind(this,a,b),c),this.o=Date.now()):this.Dm(a,b)};g.Dm=function(a){this.reset();a&&a()};function G6(a){E6.call(this,a.duration||5E3);"smooth"!==a.flightMode&&(a.flightMode="bounce");this.g=a}w(G6,E6);G6.prototype.Fa=function(){var a=F6(this);if(0<a){var b=Gs(this.g);b.duration=a;b.center&&(b.center=Ui(b.center,"EPSG:4326",N));QP(T.u(),b)}return G6.C.Fa.call(this)};G6.prototype.pause=function(){void 0!==this.j&&Tka();G6.C.pause.call(this)};G6.prototype.reset=function(){void 0!==this.j&&Tka();G6.C.reset.call(this)};function H6(a,b,c){A.call(this);this.name=a||"Unnamed Tour";this.description=b||"";this.playing=this.repeat=!1;this.l=c||[];this.j=0;this.g=void 0}w(H6,A);function I6(a,b){a.playing!==b&&(a.playing=b,a.dispatchEvent("playing"))}g=H6.prototype;g.play=function(){if(this.playing)this.reset(),Hc(this.play,this);else{I6(this,!0);for(var a=0;a<this.j;a++){var b=this.l[a];b&&b.lb&&b.Fa()}this.Gy()}};g.pause=function(){I6(this,!1);this.g&&(this.g.cancel(),this.g=void 0);this.l.forEach(function(a){a.pause()})};
g.reset=function(){this.j=0;I6(this,!1);this.g&&(this.g.cancel(),this.g=void 0);this.l.forEach(function(a){a.reset()})};g.Gy=function(){if(this.playing){var a=this.l[this.j];a?this.g=a.Fa().then(this.eH,this.dH,this):this.reset()}};g.eH=function(){this.g=void 0;this.j++;this.j>this.l.length&&(this.repeat?this.j=0:this.reset());Hc(this.Gy,this)};g.dH=function(){this.playing&&this.reset()};function J6(a){this.lb=!1;this.j=a;this.g=!1}w(J6,D6);J6.prototype.Fa=function(){return new Oc(function(a){Hc(function(){this.g||(this.g=!0,this.j.pause());a()},this)},this)};J6.prototype.reset=function(){this.g=!1};function K6(a,b){E6.call(this,b||0);this.lb=!0;this.g=void 0;this.s=a}w(K6,E6);g=K6.prototype;g.Cl=function(a,b){this.g?rAa(this):K6.C.Cl.call(this,a,b)};g.Dm=function(a,b){K6.C.Dm.call(this,a,b);rAa(this)};function rAa(a){a.g||(a.g=document.createElement("audio"),a.g.src=a.s,a.Is(),O.H("mute",a.Is,!1,a));a.g.play()}g.Is=function(){if(this.g){var a=PZ.u();this.g.muted=a.g}};g.pause=function(){K6.C.pause.call(this);this.g&&this.g.pause()};
g.reset=function(){K6.C.reset.call(this);this.g&&(O.M("mute",this.Is,!1,this),this.g.pause(),this.g=void 0)};var L6=wV.concat(vV),tAa=L(L6,{Playlist:function(a,b){if(a=Ol([],sAa,a,b))b=b[b.length-1],b instanceof H6&&(b.l=a,b.reset())},description:J(aV),name:J(aV)}),sAa=L(L6,{FlyTo:Fl(function(a,b){var c;if(a=Ol({},uAa,a,b)){(c=a.Camera)||(c=a.LookAt||{});b=1E3*(a.duration||0);var d="smooth"===a.flyToMode?"smooth":"bounce",e;c.longitude&&c.latitude&&(e=[c.longitude,c.latitude]);c=new G6({center:e,altitude:c.altitude||0,duration:b,heading:c.heading||void 0,pitch:(c.tilt||0)-90,range:c.range||void 0,roll:c.roll||
void 0,flightMode:d,positionCamera:!!a.Camera})}return c}),SoundCue:Fl(function(a,b){var c;a=Ol({},vAa,a,b);a.href&&(c=new K6(a.href,1E3*(a.delayedStart||0)));return c}),TourControl:Fl(function(a,b){var c;a=1<b.length?b[b.length-2]:void 0;a instanceof H6&&(c=new J6(a));return c}),Wait:Fl(function(a,b){a=1E3*(Ol({},wAa,a,b).duration||0);return new E6(a)})}),uAa=L(L6,{duration:J(XU),flyToMode:J(aV),Camera:J(function(a,b){return Ol({},xAa,a,b)}),LookAt:J(function(a,b){return Ol({},yAa,a,b)})}),xAa=L(wV,
{longitude:J(XU),latitude:J(XU),altitude:J(XU),heading:J(XU),tilt:J(XU),roll:J(XU),altitudeMode:J(aV)}),yAa=L(wV,{longitude:J(XU),latitude:J(XU),altitude:J(XU),heading:J(XU),tilt:J(XU),range:J(XU),altitudeMode:J(aV)}),vAa=L(L6,{href:J(aV),delayedStart:J(XU)}),wAa=L(L6,{duration:J(XU)});function M6(a){Y1.call(this);this.Ga("off");this.log=zAa;this.I=0;this.zb='<i class="fa fa-link fa-fw compact" title="KML network link - enable to load"></i>';this.s=this.o=null;this.nb=4E3;this.Nb=0;this.gc="onChange";this.l=null;this.oa=a;N6(this)}w(M6,Y1);var zAa=E.V("plugin.file.kml.ui.KMLNetworkLinkNode");g=M6.prototype;g.J=function(){M6.C.J.call(this);this.o&&(this.o.dispose(),this.o=null);this.s&&(this.s.dispose(),this.s=null);this.l&&(this.l.dispose(),this.l=null)};
function AAa(a){var b=Ha(),c=" in "+CC(new Date(b-a.I));a.I=b;return c}function O6(a,b){b='Unable to load KML network link "'+a.ba()+'"'+(" ("+a.oa+")")+": "+b;E.error(a.log,b);At(zt.u(),b,rs);a.Ga("off");P6(a,'<i class="fa fa-unlink fa-fw compact text-danger" title="Unable to load network link"></i>');a.Va(!1)}g.xg=function(){return"onInterval"==this.gc?this.nb:0};g.Qe=function(a){this.nb=Math.max(a,this.Nb);N6(this)};g.refresh=function(){this.l?me(this.l):this.Py()};
function N6(a){var b=!1;a.l&&(b=a.l.isActive(),a.l.dispose());a.l=new le(a.Py,a.xg(),a);b&&a.l.start()}g.Py=function(){if(!this.s){this.s=new Ys(this.oa);if(!od||Bd(10))this.s.B="arraybuffer";this.s.H("success",this.AL,!1,this);this.s.H("error",this.BL,!1,this)}this.source?(S1(this.source,this),this.Va(!0),P6(this,'<i class="fa fa-link fa-fw compact text-warning" title="Loading network link..."></i>'),this.I=Ha(),this.s.load()):O6(this,"source is null")};
g.Bb=function(a){this.source&&xh(this.source,"kmlSource:refresh",this.Kw,this);M6.C.Bb.call(this,a);this.source&&I(this.source,"kmlSource:refresh",this.Kw,this)};g.Kw=function(){"off"!=this.getState()&&this.refresh()};
g.Ga=function(a){var b=this.getState();M6.C.Ga.call(this,a);a=this.getState();b!=a&&("off"==a?(this.l&&this.l.stop(),this.s&&this.s.abort(),this.o&&this.o.stop(),this.source&&S1(this.source,this),P6(this,'<i class="fa fa-link fa-fw compact" title="KML network link - enable to load"></i>'),this.Va(!1)):this.source&&(this.o||(this.o=new C6(new Q6({})),a=Fy(this.oa),this.o.L=a,this.o.H("threadProgress",this.FH,!1,this),this.o.H("complete",this.zL,!1,this)),this.l&&!this.l.isActive()&&"off"==b&&me(this.l)))};
g.AL=function(){var a="Request complete for "+this.ba()+(" ("+this.oa+")")+AAa(this);E.info(this.log,a);a=this.s.g;bt(this.s);a?this.o?gD(this.o,a):O6(this,"importer is null"):O6(this,"response is empty")};g.BL=function(){O6(this,this.s?this.s.s.join(" "):"unknown error");bt(this.s)};g.FH=function(){this.o&&this.source&&R1(this.source,this.o.getData())};
g.zL=function(){var a="Import complete for "+this.ba()+(" ("+this.oa+")")+AAa(this);E.info(this.log,a);this.Va(!1);var b=(a=this.na())&&0<a.length?a[0]:null,c=this.o.G,d=c?c.na():[];if(b!==(d&&0<d.length?d[0]:null)||a&&a.length!=d.length)this.zc(d?d:null),this.collapsed=null==c;"off"!=this.getState()?(P6(this,'<i class="fa fa-link fa-fw compact text-success" title="KML network link"></i>'),this.Nb=Math.max(this.o.N,0),this.Qe(this.nb),this.l&&0<this.xg()&&this.l.start()):this.source&&S1(this.source,
this)};g.Hc=function(){return this.zb};function P6(a,b){a.zb=b;a.dispatchEvent(new U("icons"))};W.directive("kmltournodeui",[function(){return{restrict:"E",replace:!0,template:'<span class="slick-node-ui" ng-if="ctrl.show()"><span ng-if="!ctrl.isPlaying()" ng-click="ctrl.play()" title="Play the tour"><i class="fa fa-fw fa-play c-glyph"></i></span><span ng-if="ctrl.isPlaying()" ng-click="ctrl.pause()" title="Pause the tour"><i class="fa fa-fw fa-pause c-glyph"></i></span><span ng-click="ctrl.reset()" title="Reset the tour"><i class="fa fa-fw fa-undo c-glyph"></i></span></span>',controller:R6,
controllerAs:"ctrl"}}]);function R6(a,b){eF.call(this,a,b);a=(a=this.scope.item)?a.l:void 0;(this.g=a)&&this.g.H("playing",this.l,!1,this)}w(R6,eF);R6.$inject=["$scope","$element"];R6.prototype.destroy=function(){R6.C.destroy.call(this);this.g&&(this.g.M("playing",this.l,!1,this),this.g=void 0)};R6.prototype.l=function(){X(this.scope)};R6.prototype.ud=function(){return null!=this.g&&this.g.playing};R6.prototype.isPlaying=R6.prototype.ud;R6.prototype.show=function(){return R6.C.show.call(this)||this.ud()};
R6.prototype.show=R6.prototype.show;R6.prototype.play=function(){this.g&&this.g.play()};R6.prototype.play=R6.prototype.play;R6.prototype.pause=function(){this.g&&this.g.pause()};R6.prototype.pause=R6.prototype.pause;R6.prototype.reset=function(){this.g&&this.g.reset()};R6.prototype.reset=R6.prototype.reset;function S6(a){Y1.call(this);pz(this,!1);this.j="<kmltournodeui></kmltournodeui>";this.l=a}w(S6,Y1);S6.prototype.J=function(){S6.C.J.call(this);Ma(this.l);this.l=void 0};S6.prototype.ba=function(){return this.l?this.l.name:S6.C.ba.call(this)};S6.prototype.Je=function(){return this.l?this.l.description:S6.C.Je.call(this)};S6.prototype.Hc=function(){return'<i class="fa fa-video-camera fa-fw" title="KML Tour"></i>'};function T6(a){a=null!=a?a:{};this.s=null!=a.filter?a.filter:!1;this.g=null!=a.Iu?a.Iu:!1;this.o=a.param||"filter";this.A=null!=a.dA?a.dA:!0;Ss.call(this,"OGCFilter",100)}w(T6,Ss);T6.prototype.j=function(a){a=a.g;var b=(this.A?"{temporal}":"")+(this.s?"{customFilter}":"");b||this.g?a.set(this.o,'<Filter xmlns="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+(this.g||b?"<And>":"")+(this.g?"{identifiers}":"")+(b?b:"")+(this.g||b?"</And>":"")+"</Filter>"):a.remove(this.o)};W.directive("confirmcolumn",[function(){return{replace:!0,restrict:"E",templateUrl:"v1542394219/views/window/confirmcolumn.html",controller:BAa,controllerAs:"confirm"}}]);function BAa(a){this.column=null;a.$watch("confirm.column",function(b,c){b!=c&&(a.$parent.confirmValue=b)});a.$emit("window.ready")}BAa.$inject=["$scope"];var U6=E.V("plugin.track"),CAa="name description ELAPSED_AVERAGE_SPEED ELAPSED_DISTANCE ELAPSED_DURATION TOTAL_DISTANCE TOTAL_DURATION LAT LON LAT_DDM LON_DDM LAT_DMS LON_DMS MGRS ALTITUDE".split(" "),DAa={stroke:{width:3},zIndex:0},EAa={geometry:"_currentPosition",image:{type:"icon",scale:1,src:vM.href}};function FAa(a){return a?"track"===a.get("sourceId"):!1}
function V6(a){var b=T.u();var c=b.W("track");!c&&a&&(a={animate:!0,color:"rgba(255,255,255,1)",collapsed:!1,columns:CAa,editable:!0,explicitType:"",id:"track",layerType:"Feature Layers",loadOnce:!0,provider:ws()||null,showLabels:!1,showRoot:!1,size:3,title:"Tracks",type:"track"},(c=lw(a))&&Ky(b,c));if(b=c)if(b=b.O())return b.P;return null}function GAa(a,b){return b?b.get(a):void 0}function HAa(a){if(a=a.get("recordTime"))return a.Pa()}
function IAa(a,b){a=a[a.length-1];b=b[b.length-1];return a>b?1:a<b?-1:0}function JAa(a,b){var c="recordTime"==b?HAa:GAa.bind(null,b);a=a.map(function(a){var b=c(a);if(null!=b){a=a.X();if(a instanceof Jk)var d=vk(a);else if(a instanceof Kr){a=a.g;for(var h=0;h<a.length;h++){var k=a[h];if(k instanceof Jk)if(d){d=void 0;break}else d=vk(k)}}else a instanceof Pr&&(h=a.flatCoordinates,h.length===a.stride&&(d=h.slice()));d&&(3>d.length&&d.push(0),d.push(b));return d}}).filter(CA);a.sort(IAa);return a}
function KAa(a){var b=a.cN||"recordTime",c,d=a.geometry;if(!d&&a.features&&a.features.length){var e=JAa(a.features,b);if(e.length){d=new yr(e,"XYZM");var f=a.features[0].get("color");(e=MB(a.features[0]))&&(c=e?e.La():void 0)}}if(d){d instanceof yr&&(d.toLonLat(),d=Uu(d),iu(d));d.set("_normalized",!0);var h;"recordTime"===b?h=new ZB(d,LAa,MAa,NAa):h=new ek(d);d=a.id||"track-"+$b();h.ga(d);h.set("ID",d);W6(h);h.set("name",a.name||d);h.set("_sortField",b);b=X6(h,!0);d=Y6(h);Z6(h,b,d);OAa(h);b=Gs(DAa);
d=Gs(EAa);f=a.color||f||c||"rgba(255,255,255,1)";aH(b,f,["stroke"]);aH(d,f,["image"]);h.set("_style",[b,d]);VB(h);d.labels=[{column:a.label||"name",showColumn:!1}];h.set("shape","Icon");jH(h);return h}}function PAa(a){var b=a.get("_currentPosition");a.set("_currentPosition",void 0);Ma(b);b=a.get("_currentLine");a.set("_currentLine",void 0);Ma(b)}
function W6(a){var b=a.get("_currentLine")||a.X();if(b){var c=b.flatCoordinates;c=c.slice(c.length-b.stride);var d=a.get("_currentPosition");d?Kk(d,b.layout,c):(d=new Jk(c),a.set("_currentPosition",d),a.set("_labelGeometry","_currentPosition"));HB(a,!0,d);jH(a)}}
function X6(a,b){var c=$z.u(),d=0;b&&(b=a.X(),b=$6(b),0<b?(d=Math.round(100*b)/100,a.set("TOTAL_DISTANCE",cA(c,d,3))):a.set("TOTAL_DISTANCE",0));(b=a.get("_currentLine"))?(b=$6(b),0<b?(d=Math.round(100*b)/100,a.set("ELAPSED_DISTANCE",cA(c,d,3))):a.set("ELAPSED_DISTANCE",0)):(b=a.X(),b=$6(b),0<b&&(d=Math.round(100*b)/100),a.set("ELAPSED_DISTANCE",a.get("TOTAL_DISTANCE")));return d}
function Y6(a){var b=a.X(),c=a.get("_sortField"),d=0;b&&"recordTime"==c?(c=b.flatCoordinates,b=c[c.length-1]-c[b.stride-1],a.set("TOTAL_DURATION",0<b?moment.duration(b).humanize():"Unknown"),(c=a.get("_currentLine"))?(d=0,c instanceof yr?(c.toLonLat(),d=QAa(c.getCoordinates()),iu(c)):c instanceof Ar&&(c.toLonLat(),d=RAa(c.getCoordinates()),iu(c)),d=Math.min(b,d),a.set("ELAPSED_DURATION",0<d?moment.duration(d).humanize():0)):(d=b,a.set("ELAPSED_DURATION",a.get("TOTAL_DURATION")))):(a.set("ELAPSED_DURATION",
"Unknown"),a.set("TOTAL_DURATION","Unknown"));return d}function Z6(a,b,c){var d=0;0<b&&(d=(b/(c/3600)).toFixed(3)+" km/h");a.set("ELAPSED_AVERAGE_SPEED",d)}function OAa(a){if("recordTime"==a.get("_sortField")){var b=a.get("recordTime"),c=a.X();if(c){var d=c.flatCoordinates;d=new Uv(d[c.stride-1],d[d.length-1])}a.set("recordTime",d);b==d||d&&b&&d.equals(b)||(a=MB(a))&&a.mn()}}
function $6(a){var b=0;a instanceof yr?(a.toLonLat(),b=SAa(a.getCoordinates()),iu(a)):a instanceof Ar&&(a.toLonLat(),b=TAa(a.getCoordinates()),iu(a));return b}function SAa(a){var b=0;if(a&&1<a.length)for(var c=1;c<a.length;c++)b+=osasm.geodesicInverse(a[c-1],a[c]).distance;return b}function TAa(a){var b=0;a&&a.forEach(function(a){b+=SAa(a)});return b}function QAa(a){var b=0;a&&1<a.length&&(b=a[0],a=a[a.length-1],b=a[a.length-1]-b[b.length-1]);return b}
function RAa(a){var b=0;a&&a.forEach(function(a){b+=QAa(a)});return b}
function UAa(a,b){return new Oc(function(c,d){var e=b||"recordTime",f=("recordTime"==e?HAa:GAa.bind(null,e))(a);if(null==f||""==f){if(f=MB(a))f=f.getColumns().slice(),f.sort(Zga.bind(null,"name")),VAa(f,"recordTime"==e?"Track features do not have a time component. Please choose a column that can be used to sort points in the track.":'Features do not have a value defined for the sort field "'+e+'". Please choose a new column to sort points in the track:').then(function(b){UAa(a,b.field).then(function(a){c(a)},
function(){d("cancel")})},function(){d("cancel")})}else c(e)})}function WAa(a){return new Oc(function(b,c){LL({confirm:b,cancel:c,defaultValue:a,select:!0,prompt:"Please provide a name for the track:",windowOptions:{label:"Track Name",icon:"fa fa-share-alt",modal:!0}})})}
function VAa(a,b){return new Oc(function(c,d){c={confirm:c,cancel:d,columns:a,prompt:b,windowOptions:{label:"Choose Track Sort Column",width:400,icon:"fa fa-warning",modal:!0}};d={columns:c.columns,prompt:c.prompt};var e=c.windowOptions||{};e.label=e.label||"Choose Column";e.height="auto";cK({confirm:c.confirm,confirmValue:c.defaultValue,cancel:c.cancel,prompt:"<confirmcolumn></confirmcolumn>",windowOptions:e},d)})}
function LAa(a){var b=a.get("_style");if(b=b?b[0]:null)b.geometry="_currentLine",m2(a),jH(a)}function MAa(a,b){PAa(a);if(!b){if(b=(b=a.get("_style"))?b[0]:null)delete b.geometry,jH(a);b=X6(a);var c=Y6(a);Z6(a,b,c);W6(a)}}
function NAa(a,b,c){if("recordTime"===a.get("_sortField")){var d=a.X();if(d instanceof yr||d instanceof Ar){var e=d.flatCoordinates,f=d.stride,h=d instanceof Ar?d.Fd():void 0;d=d.layout;if(e&&("XYM"===d||"XYZM"===d)){d=XAa(e,b,f);var k=XAa(e,c,f);YAa(a,b,d,c,k,e,f,h);b=X6(a);c=Y6(a);Z6(a,b,c);a.ia()}}}}function XAa(a,b,c){a=Fr(a,b,c,c-1);0>a&&(a=-a-1);return a}
function ZAa(a,b,c,d){if(0===b)var e=c.slice(0,d);else if(b===c.length)e=c.slice(c.length-d);else{var f=c[b-1];f=(a-f)/(c[b+d-1]-f);var h=b-d;e=c[h];var k=c[h+1];e=[e+f*(c[b]-e),k+f*(c[b+1]-k)];4===d&&(d=c[h+2],e.push(d+f*(c[b+2]-d)));e.push(a)}return e}
function YAa(a,b,c,d,e,f,h,k){var l=a.get("_currentLine"),m=4===h?"XYZM":"XYM";l||(l=k?new Ar([],m):new yr([],m),a.set("_currentLine",l));for(var n=[],p=c;p<e;p++)n.push(f[p]);n.length+c>h&&(n.length=n.length+c-h);if(n.length>=e-c)n.length=e-c;else if(0<e-c)for(p=n.length;p<e-c;p++)n.push(f[p]);k=k?k.filter(function(a){return a<=n.length+c}):void 0;if(n.length<f.length&&(!k||!k.length||k[k.length-1]!==n.length)){if(d=ZAa(d,e,f,h))for(p=0;p<d.length;p++)n.push(d[p]);if(b=ZAa(b,c,f,h))for(p=0;p<b.length;p++)nb(n,
b[p],p);k&&k.push(n.length)}l.set("_dirty",!0);l instanceof yr?zr(l,m,n):k&&Br(l,m,n,k);W6(a)}function $Aa(a){for(var b=a.length+1,c=0;c<a.length;c++){var d=a[c],e=d.get("_style");q(e)||(e=[e]);for(var f=0;f<e.length;f++){var h=e[f];h.zIndex=a.length-c;"_currentPosition"==h.geometry&&(h.zIndex+=b)}jH(d);d.ia()}};function Q6(){A.call(this);this.l=null;this.ma=$b();this.o=a7;this.U=!1;this.s=this.g=this.A=null;this.G=[];this.I={};this.Ia={};this.oa=this.ra=this.Ca=0;this.j={};this.B={};this.P=0;this.ka={};this.N=aBa.slice();this.L=new RegExp("^("+this.N.join("|")+")$");this.Z={Placemark:{parent:null,Fy:JV}}}w(Q6,WC);var aBa=["NetworkLink","Placemark","GroundOverlay","ScreenOverlay","Tour"],a7=E.V("plugin.file.kml.KMLParser"),bBa=/^(geometry|recordtime|time|styleurl|_kmlStyle)$/i;g=Q6.prototype;
g.oc=function(){this.l=null;this.U=!1;this.s=this.g=this.A=null;this.G.length=0;this.I={};this.oa=this.ra=this.Ca=0};g.getColumns=function(){if(!this.g&&this.s){this.g=[];for(var a in this.s)"recordTime"===a?this.g.push(new FF("TIME","recordTime")):bBa.test(a)||this.g.push(new FF(a));this.s=null}return this.g};g.vd=function(){return 0<this.G.length};
g.Bb=function(a){this.oc();if(Bl(a))this.l=a;else if("string"===typeof a)a=a.replace(rga,""),this.l=VA(a);else if(a instanceof ArrayBuffer){if(Jw(a)){this.j={};cBa(this,a);return}(a=Ow(a))?this.l=VA(a):(E.error(this.o,"Source buffer does not appear to be text"),this.uc())}else if(a instanceof Blob){sf(zw(a),this.Bb,this);return}if(this.l){if((a=Ag(this.l))&&"kml"!==a.localName.toLowerCase()){var b=mB("kml",this.l);b.appendChild(a);this.l.appendChild(b);a=b}if(a){a=this.l.querySelectorAll("styleUrl");
b=!1;for(var c=0,d=a.length;c<d;c++){var e=zl(a[c],!0).trim();if(e){var f=e.replace(/#.*/,"");if(f=encodeURI(f)===f?f:void 0)b=!0,Eg(a[c],"#"+e.replace("#","_")),f in this.B||(f in this.ka?(e=this.ka[f],e.getData(new zip.BlobWriter,this.Ny.bind(this,e.filename)),this.B[f]=!0):(e=new Ys(f),e.H("success",this.bw,!1,this),e.H("error",this.bw,!1,this),this.B[f]=e,e.load()))}}b||dBa(this)}else E.error(this.o,"No KML content to parse!"),this.uc()}else E.error(this.o,"Content must be a valid KML document!"),
this.uc()};g.bw=function(a){var b=a.target,c=b.j.toString(),d=this.B[c]?c:decodeURI(c);delete this.B[d];d=b.g;b.dispose();"success"===a.type?eBa(this,d,c):fBa(this)};function eBa(a,b,c){try{var d=VA(b),e=a.l.querySelector("Document")||Ag(a.l),f=d.querySelectorAll("Style");b=0;for(var h=f.length;b<h;b++){var k=f[b];k.setAttribute("id",c+"_"+k.getAttribute("id"));e.appendChild(k)}}catch(l){E.error(a.o,"Could not parse KML stylesheet "+c)}fBa(a)}function fBa(a){for(var b in a.B)return;dBa(a)}
function dBa(a){var b=Ag(a.l),c=zg(b);if(c&&0<c.length)for(a.G.push({children:[b],index:0,node:null}),a.Hh(),b=0;b<c.length;b++){var d=c[b];"NetworkLinkControl"==d.localName&&d.querySelector("minRefreshPeriod")&&(a.oa=1E3*parseInt(d.querySelector("minRefreshPeriod").textContent,10))}else E.error(a.o,"Empty KML tree!"),a.uc()}
function cBa(a,b){zip.createReader(new zip.ArrayBufferReader(b),t(function(a){a.getEntries(this.yL.bind(this))},a),t(function(){this.uc();E.error(this.o,"Error reading zip file!")},a))}
g.yL=function(a){for(var b=null,c=null,d=/(doc|index)\.kml$/i,e=/\.kml$/i,f=/\.(png|jpg|jpeg|gif|bmp)$/i,h=0,k=a.length;h<k;h++){var l=a[h];if(!b&&d.test(l.filename))b=l;else if(e.test(l.filename))c||(c=l),this.ka[l.filename]=l;else if(f.test(l.filename)){var m=f.exec(l.filename);m.lastIndex=0;this.P++;l.getData(new zip.Data64URIWriter("image/"+m[1]),this.YL.bind(this,l.filename))}}(b=b||c)?(a=new ne(this.ME.bind(this)),a.qh=this.My.bind(this,b,!0),a.Ri=this.My.bind(this,b,!1),a.start(200,2E4)):(E.error(this.o,
"No KML found in the ZIP!"),this.uc())};g.My=function(a,b){b||E.error(this.o,"Failed to process KMZ images in a timely manner - skipping "+this.P+" images.");a.getData(new zip.BlobWriter,this.Ny.bind(this,a.filename))};g.ME=function(){return 0>=this.P};g.YL=function(a,b){"string"===typeof a&&"string"===typeof b?(this.j[a]=b,this.P--):(E.error(this.o,"There was a problem unzipping the KMZ!"),this.uc())};
g.Ny=function(a,b){if(b&&b instanceof Blob){var c=new FileReader;c.onload=this.xL.bind(this,a);c.readAsText(b)}else E.error(this.o,"There was a problem unzipping the KMZ!"),this.uc()};g.xL=function(a,b){(b=b.target.result)&&"string"===typeof b?this.l?(delete this.B[a],eBa(this,b,a)):this.Bb(b):(E.error(this.o,"There was a problem reading the ZIP content!"),this.uc())};
g.Wc=function(){var a=null,b=null,c=this.G[this.G.length-1],d=c.node,e=c.children,f=e[c.index];if(!f)return a="Encountered null child under node "+(d?d.ba():"Unknown")+" - skipping.",E.ib(this.o,a),null;f.QB=this.j;var h=f.localName;try{if("Document"===h||"Folder"===h||"kml"===h){if(b=gBa(this,f,d)){if(this.U){var k=b.na();if(k)for(var l=0,m=k.length;l<m;l++)k[l].Ia=!0}var n=zg(f);n&&0<n.length&&(a={children:n,index:0,node:b});if("Document"===h){var p=MC(f,"Schema");k=0;for(var r=p.length;k<r;k++){var u=
p[k].name||p[k].getAttribute("name");if(u){-1===this.N.indexOf(u)&&this.N.push(u);var v=MC(p[k],"SimpleField");l={};n=m=0;for(var x=v.length;n<x;n++){var B=null,F=v[n].type||v[n].getAttribute("type");F=F.toLowerCase();switch(F){case "bool":B=UU;break;case "int":case "short":case "float":case "double":B=XU;break;case "uint":case "ushort":B=ZU;break;default:B=aV}var D=v[n].name||v[n].getAttribute("name");D&&B&&(l[D]=J(B),m++)}m&&(this.Z[u]={parent:p[k].getAttribute("parent"),Fy:L(wV,l)})}}this.L=new RegExp("^("+
this.N.join("|")+")$")}}}else this.L&&this.L.test(h)&&"NetworkLinkControl"!=h&&(b=gBa(this,f,d))}catch(S){b=a=null,E.error(this.o,"Failed parsing node type: "+h,S)}++c.index;if(c.index>=e.length){if(this.U&&d&&(c=d.na()))for(e=c.length;e--;)h=c[e],h.Ia&&(d.pz(e),h.dispose());this.G.pop()}a&&(this.G.push(a),hBa(this,f));return b};
function gBa(a,b,c){var d=null;if("NetworkLink"===b.localName){d=null;var e=Ol({},Spa,b,[]);if(e&&e.href){d=new M6(e.href);var f=e.refreshMode;if(f&&qc(Nia,f)){var h=d;h.gc=f;N6(h);switch(f){case "onInterval":e=e.refreshInterval,"number"!==typeof e||isNaN(e)||d.Qe(1E3*e)}}}}else if("GroundOverlay"===b.localName){if(void 0!==b&&b.querySelector("name")&&b.querySelector("Icon")&&(b.querySelector("LatLonBox")||b.querySelector("LatLonQuad"))){e=b.querySelector("Icon").querySelector("href").textContent;
a.j[e]&&(e=a.j[e]);f=-180;h=180;var k=-360,l=360;if(b.querySelector("LatLonBox"))l=b.querySelector("LatLonBox"),f=parseFloat(l.querySelector("north").textContent),h=parseFloat(l.querySelector("south").textContent),k=parseFloat(l.querySelector("east").textContent),l=parseFloat(l.querySelector("west").textContent);else{var m=b.querySelector("LatLonQuad").querySelector("coordinates").textContent;m=m.split(" ");for(var n=0;4>n;n++){var p=parseFloat(m[n].split(",")[0]),r=parseFloat(m[n].split(",")[1]);
p<l&&(l=p);p>k&&(k=p);r<h&&(h=r);r>f&&(f=r)}}f=[Math.min(l,k),Math.min(h,f),Math.max(l,k),Math.max(h,f)];f=Zi(f,"EPSG:4326",N);e=new Y3({source:new $1({url:e,imageExtent:f}),url:e})}else e=null;e&&(d=new Y1,d.setImage(e))}else if("ScreenOverlay"===b.localName){a:{if(void 0!==b&&b.querySelector("name")&&b.querySelector("Icon")){if((e=b.querySelector("visibility"))&&0==parseInt(e.textContent,10)){e=null;break a}e=b.querySelector("name").textContent;f=b.querySelector("Icon").querySelector("href").textContent;
a.j[f]&&(f=a.j[f]);b:{if((h=b.querySelector("screenXY"))&&(m=h.attributes)&&m.getNamedItem("x")&&m.getNamedItem("y")){h=m.getNamedItem("x").value;k=m.getNamedItem("xunits").value;l=m.getNamedItem("y").value;m=m.getNamedItem("yunits").value;n=vn(T.u().Y());p={x:0,y:0};"fraction"==k?.5==h?p.x="center":p.x=n[0]*h:p.x=h;"fraction"==m?.5==l?p.y="center":p.y=n[1]-n[1]*l:p.y=l;h=p;break b}h=null}b:{if((k=b.querySelector("size"))&&(n=k.attributes)&&n.getNamedItem("x")&&n.getNamedItem("y")){k=n.getNamedItem("x").value;
l=n.getNamedItem("xunits").value;m=n.getNamedItem("y").value;n=n.getNamedItem("yunits").value;p={x:0,y:0};r=vn(T.u().Y());"fraction"==l?-1!=k&&0!=k&&(p.x=r[0]*k):p.x=k;"fraction"==n?-1!=m&&0!=m&&(p.y=r[1]*m):p.y=m;l=p;break b}l=null}k=a.ma+a.ra;a.ra++;if(h&&l){e={image:f,name:a.A.ba()+" - "+e,id:k,size:l,xy:h,"show-hide":!0};Bva(e);e=k;break a}}e=null}e&&(d=new Y1,d.B=e)}else if("Tour"===b.localName)e=b&&"Tour"===b.localName?Ol(new H6,tAa,b,[]):void 0,e&&(d=new S6(e));else if(a.L&&a.L.test(b.localName)&&
"NetworkLinkControl"!=b.localName){f=a.Z[b.localName];for(h={geometry:null};f;)h=Ol(h,f.Fy,b,[]),f=f.parent?a.Z[f.parent]:null;if(h){f=h.geometry;delete h.geometry;f&&("Point"==f.T()&&(l=vk(f),1<l.length&&(h.LAT=h.LAT||l[1],h.LON=h.LON||l[0],2<l.length&&0!=l[2]&&(h.GEOM_ALT=h.GEOM_ALT||l[2]))),iu(f));h.Style&&(h._kmlStyle=h.Style,delete h.Style);(f instanceof yr||f instanceof Ar)&&"XYZM"===f.layout?(f instanceof Ar&&f.get("interpolate")&&(f=f.flatCoordinates,f=Dk(f,0,f.length,4),f=new yr(f)),f=KAa({geometry:f,
name:h.name})):f=new ek(f);if(f){l=H(f);f.ga(a.ma+"#"+l);h.ID=h.ID||l;f.qc(h);a.s||(a.s=[]);for(k in h)a.s[k]=!0;h=f;l=[];k=null;if(m=h.get("styleUrl"))l.push(iBa(a,decodeURIComponent(m))),k=iBa(a,decodeURIComponent(m),!0);(m=h.get("_kmlStyle"))&&m.length&&l.push(m.map(a.Mp,a));for(m=b.parentNode;m;)m.Xu&&l.unshift(m.Xu),m=m.parentNode;l.unshift($za);if(l=l.reduce(jBa,null)){if(m=h.get("_style"))if(q(m))for(n=0;n<m.length;n++)zs(l,m[n]);else zs(l,m);else h.set("_style",l,!0);k&&k.length&&h.set("_customHighlightStyle",
k[0],!0);!h.get("shape")&&oH(l)&&h.set("shape","Icon");!h.get("centerShape")&&oH(l)&&h.set("centerShape","Icon");jH(h)}if(k=h.get("description")){for(e in a.j)l="src=[\"']"+e.replace(/(.)/g,"[$1]")+"[\"']",l=new RegExp(l),k=k.replace(l,'src="'+a.j[e]+'"'),l="src=[\"']"+(new Ve(e)).toString().replace(/(.)/g,"[$1]")+"[\"']",l=new RegExp(l),k=k.replace(l,'src="'+a.j[e]+'"');h.set("description",k)}}e=f}else e=null;e&&(d=new Y1,d.zf(e))}else d=new Y1;if(d)for(e=d,f=kBa,h=Ag(b);null!==h;h=h.nextElementSibling)k=
f[h.localName],void 0!==k&&k.call(a,e,h);d&&(d.ba()||(e=b.id||b.getAttribute("id"),d.Da(e||lBa(a,b.localName))),null!=c?d=c.R(d):null===a.A?a.A=d:a.A.ba()!=d.ba()?(a.A.dispose(),a.A=d):d=a.A);return d}function lBa(a,b){a.Ca++;return"kml"==b?"kmlroot":"Unnamed "+a.Ca+" ["+b+"]"}function jBa(a,b){b&&b.length&&(a=a||{},zs(b[0],a,!0,!1),1<b.length&&E.ib(a7,"An array of style configs with more than one entry was found!"));return a}
function hBa(a,b){for(var c=MC(b,"Style"),d=0,e=c.length;d<e;d++){var f=c[d],h=FV(f,[]),k=f.id||f.getAttribute("id");if(k){if(k in a.I){var l=k+"-"+$b();Array.prototype.slice.call(b.querySelectorAll("styleUrl")).forEach(function(a){a.textContent.replace(/^#/,"")==k&&(a.textContent="#"+l)});k=l}a.I[k]=h.map(a.Mp,a)}else b.Xu=h.map(a.Mp,a)}c=MC(b,"StyleMap");d=0;for(e=c.length;d<e;d++)if(f=c[d],k=f.id||f.getAttribute("id"))for(b=MC(f,"Pair"),f=0,h=b.length;f<h;f++){var m=RC(b[f],"key"),n=RC(b[f],"styleUrl");
m&&n&&(m=m.trim(),m="normal"===m?a.I:a.Ia,n=n.trim().replace(/^#/,""),n in a.I&&(m[k]=a.I[n]))}else E.error(a7,'StyleMap tags must have an "id" attribute')}g.Mp=function(a){var b=null;if(a&&(b={},nH.u().l.l(a,b),b.image&&b.image.src))try{var c=decodeURIComponent(b.image.src);c&&c in this.j&&(b.image.src=this.j[c])}catch(d){}return b};function iBa(a,b,c){var d=b.indexOf("#");-1<d&&(b=b.substring(d+1));a=c?a.Ia:a.I;return b in a?a[b]:null}
var kBa={name:function(a,b){a.Da(zl(b,!0).trim()||null)},open:function(a,b){a.collapsed="1"!==zl(b,!0).trim()},visibility:function(a,b){(b=zl(b,!0).trim())&&(VU(b)||a.Ga("off"));(a=a.getFeature())&&a.set("visibility",void 0)}};function b7(a){xN.call(this,a);this.log=mBa;this.gd=0;this.P=null;this.I={};this.Hg=!0;this.AA=new le(this.Rn,50,this);this.yA=!1;this.lf=null;this.nb=[];this.overlays=[];C.H("toggleUI",this.Oy,!1,this)}w(b7,xN);var mBa=E.V("plugin.file.kml.KMLSource");g=b7.prototype;g.J=function(){b7.C.J.call(this);C.M("toggleUI",this.Oy,!1,this);nBa(this,!0);oBa(this,!0);this.I={};c7(this,null)};g.Oy=function(a){this.I[a.id]&&this.I[a.id].Ga("off")};function c7(a,b){a.P&&a.P!==b&&a.P.dispose();a.P=b}
g.ac=function(a){b7.C.ac.call(this,a);this.Hb()||wN(this,[a])};g.Nc=function(a){b7.C.Nc.call(this,a);this.Hb()||wN(this,a)};function nBa(a,b){for(var c=0;c<a.nb.length;c++){var d=a.nb[c];T.u().pc(d);b&&a.removeNode(d.D())}a.nb=[];sN(a,null)}function oBa(a,b){for(var c=0;c<a.overlays.length;c++){var d=a.overlays[c],e=IE(d);b&&(KE(e),a.removeNode(d))}a.overlays=[]}
function R1(a,b,c){for(var d=[],e=[],f=[],h=0,k=b.length;h<k;h++){var l=b[h];if(l instanceof Y1){l.Bb(a);var m=l.getFeature();if(m){var n=l.D();a.I[n]=l;d.push(m)}if(m=l.Ua())n=l.D(),a.I[n]=l,e.push(m);if(m=l.B)n=l.D(),a.I[n]=l,f.push(m)}c&&(l=l.na())&&0<l.length&&R1(a,l,!0)}0<d.length&&a.Nc(d);if(0<e.length)for(b=0;b<e.length;b++)Ky(T.u(),e[b]),a.nb.push(e[b]);if(0<f.length)for(e=0;e<f.length;e++)a.overlays.push(f[e])}g.Nm=function(){this.B&&R1(this,this.B.getData())};
g.Mm=function(a){c7(this,this.B.G);pBa(this,this.B.N);if(this.ck)this.columns&&(this.columns.some(cG)||this.columns.sort(XF),this.dispatchEvent(new U("columns",this.columns)));else{var b=this.B.getColumns();b&&(this.hc=!1,this.setColumns(b),this.hc=!0,this.dispatchEvent(new U("columns",this.columns)))}this.Rn();b7.C.Mm.call(this,a)};g.Fb=function(a){this.removeNode(a.D());sN(this,null);b7.C.Fb.call(this,a)};
g.removeNode=function(a){if(this.Hg){var b=this.I[a];b&&(b.D()==a?(this.I[a]=void 0,b.dispose(),(a=b.getParent())&&a.removeChild(b)):(this.I[a]=void 0,this.I[b.D()]=b))}};
function S1(a,b,c){a.Hg=void 0!==c?c:!1;a.U&&a.U.isActive()&&me(a.U);(c=b.Oa(!0))&&0<c.length&&a.dg(c);if((c=nwa(b,!0))&&0<c.length){for(var d=0;d<c.length;d++){var e=c[d];T.u().pc(e);qb(a.nb,e);a.removeNode(e.D())}sN(a,null)}if((b=b.Sj(!0))&&0<b.length)for(c=0;c<b.length;c++)d=b[c],e=IE(d),qb(a.overlays,d),KE(e),a.removeNode(d);iN(a);a.Hg=!0}g.Mr=function(a){Bwa(a);m2(a);b7.C.Mr.call(this,a);this.AA.start()};
g.Rn=function(){for(var a=this.Oa(),b=[],c=[],d,e=0,f=a.length;e<f;e++){var h=a[e],k=h.D();(d=this.I[k])?"on"==d.getState()?b.push(h):"off"==d.getState()&&c.push(h):E.ib(this.log,"Feature ["+k+"] is not in the KML tree!")}e=0;for(f=this.nb.length;e<f;e++)a=this.nb[e],k=a.D(),(d=this.I[k])?"on"==d.getState()?a.Bd(!0):"off"==d.getState()&&a.Bd(!1):E.ib(this.log,"Image ["+k+"] is not in the KML tree!");b.length&&this.Sk(b);c.length&&(wN(this,c),rN(this,c));this.yA=!0};
g.On=function(a,b){b7.C.On.call(this,a,b);if(this.yA)for(var c=0,d=a.length;c<d;c++){var e=a[c].D();if(e in this.I){e=this.I[e];var f=b?"on":"off";e.ra=!1;e.Ga(f);e.ra=!0}else E.ib(this.log,"Show/hide feature ["+e+"] is not in the KML tree!")}};g.refresh=function(){nBa(this,!1);oBa(this,!1);this.I=ys(this.I);this.lf?(wja(this,this.lf.Ob()),this.lf=null):b7.C.refresh.call(this);this.dispatchEvent("kmlSource:refresh")};g.Gi=function(){return!1};
g.Qe=function(a){var b=this.gd/1E3;if(this.Ea!=a||this.Ea<b){this.Ea=a;this.A&&(this.A.M("tick",this.qk,!1,this),this.A.Sd()||this.A.stop());this.A=null;if(0<this.Ea){var c=Math.max(a,b);c!=a&&At(Ct,"The selected refresh period is lower than the minimum ("+b+" seconds) allowed by the KML. The minimum will be used instead.",ss);this.A=yL[c];this.A||(this.A=new je(1E3*c),yL[c]=this.A);this.A.H("tick",this.qk,!1,this);this.A.start()}this.dispatchEvent(new U("refreshInterval"))}};
function pBa(a,b){a.gd!=b&&(a.gd=Math.max(b,0),a.Ea<a.gd/1E3&&a.Qe(a.Ea))}g.Ap=function(){return!0};g.sa=function(a){a=b7.C.sa.call(this,a);a.minRefreshPeriod=this.gd;return a};g.restore=function(a){b7.C.restore.call(this,a);a.minRefreshPeriod&&pBa(this,a.minRefreshPeriod)};function d7(a){HA.call(this);this.l=null;this.s=0;this.o=void 0;this.ze(a)}w(d7,HA);d7.prototype.J=function(){var a=this.W();a instanceof e7&&(a.collapsed=this.collapsed);this.o&&(ee(this.o),this.o=void 0);this.ze(null);this.zc(null);d7.C.J.call(this)};d7.prototype.uf=function(a){d7.C.uf.call(this,a);"loading"==a.l&&(a.o?this.s++:this.s--,this.dispatchEvent(new U("loading")))};d7.prototype.mb=function(){return 0<this.s||d7.C.mb.call(this)};d7.prototype.isLoading=d7.prototype.mb;
function f7(a){a=a.W();return a instanceof e7?a.g:!1}d7.prototype.ze=function(a){d7.C.ze.call(this,a);var b=null;if(a instanceof e7){var c=a.O();c instanceof b7&&(b=c);this.collapsed=a.collapsed}a=b;this.l&&xh(this.l,"propertychange",this.G,this);if(this.l=a)I(a,"propertychange",this.G,this),qBa(this)};d7.prototype.G=function(a){a instanceof U&&"loading"==a.l&&qBa(this)};
function qBa(a){if(a.l&&!a.l.mb()){var b=a.na(),c=b&&0<b.length?b[0].Ha():null;b=a.l.P;if(c!==b){a.o&&(ee(a.o),a.o=void 0);c=!0;var d=a.W();d instanceof e7&&(c=d.l);b?c?a.zc(b.na()):(rBa(a),a.o=b.H("propertychange",a.I,!1,a)):a.zc(null)}}}d7.prototype.I=function(a){"children"==a.l&&rBa(this)};function rBa(a){var b=a.l?a.l.P:null,c=null;b&&(c="kmlroot"==b.ba()?b.na()[0].na():b.na());a.zc(c,!0)}
d7.prototype.aa=function(){var a=null,b=this.na();if(b)for(var c=0,d=b.length;c<d;c++){var e=b[c].aa();e&&(a?ci(a,e):a=e)}return a};function e7(a){MK.call(this,a);this.g=this.collapsed=!1;this.l=!0}w(e7,MK);P(e7,"os.layer.ICustomLayerVisible");g=e7.prototype;g.J=function(){var a=this.O();a&&(a=a.Uq())&&(a=a.j)&&(a.j={});e7.C.J.call(this)};g.Zo=function(){var a=new d7(this);a.collapsed=this.collapsed;return a};g.Bd=function(){};g.bd=function(){var a=this.O().P;return a?"on"===a.getState():e7.C.bd.call(this)};g.sa=function(a){a=e7.C.sa.call(this,a);a.collapsed=this.collapsed;a.editable=this.g;a.showRoot=this.l;return a};
g.restore=function(a){e7.C.restore.call(this,a);null!=a.collapsed&&(this.collapsed=a.collapsed);null!=a.editable&&(this.g=a.editable);null!=a.showRoot&&(this.l=a.showRoot)};function g7(){M_.call(this)}w(g7,M_);g=g7.prototype;g.wd=function(a){var b=new C6(this.xf(a));a=Fy(a.url);b.L=a;cD(b,["Altitude","SemiMajor","SemiMinor"]);return b};g.W=function(a){return new e7({source:a})};g.xf=function(a){return new Q6(a)};g.pd=function(a){a=g7.C.pd.call(this,a);if(!od||Bd(10))a.B="arraybuffer";return a};g.O=function(a){var b=new b7(void 0);b.lf=a.parserConfig?a.parserConfig.file:null;return b};function h7(){w6.call(this);this.ra=this.B=!0;this.log=sBa;this.A={}}w(h7,w6);var sBa=E.V("plugin.file.kml.KMLTreeExporter");g=h7.prototype;g.reset=function(){h7.C.reset.call(this);this.A={}};g.Sh=function(){return!1};g.jr=function(a){return a.ba()};g.na=function(a){return a.na()};g.La=function(a){a=OB(a.getFeature());if(!a||"string"!=typeof a&&!q(a))a="rgba(255,255,255,1)";return YG(a)};g.fu=function(a){return a.Tc()?"Folder":"Placemark"};g.kd=function(a,b){return IB(a.getFeature(),b)};
g.Ho=function(a){!this.fields&&(a=a.O())&&(this.fields=BL(a,!0));return this.fields};g.wg=function(a){var b=h7.C.wg.call(this,a);if(a=a.getFeature())if(b=zc(b),a=a.get("_style"),q(a)&&(a=a[0]),a&&a.image&&(a=a.image,a.src&&(b.href=a.src),a=fH(a)))b.scale=(b.scale||1)*hH(a);return b};g.D=function(a){return String(H(a))};
g.getParent=function(a){var b=this.g;if(b){var c=a.getParent();if(c){var d=c.D();this.A[d]?b=this.A[d]:null!=this.items&&-1<this.items.indexOf(a)||!(a=this.getParent(c))||(b=KC("Folder","http://www.opengis.net/kml/2.2",a),KC("name","http://www.opengis.net/kml/2.2",b,this.jr(c)),KC("open","http://www.opengis.net/kml/2.2",b,c.collapsed?0:1),b=this.A[d]=b)}}return b};
g.Vb=function(){var a=(void 0).getFeature();if(a){var b=a.Vb();a=nc(b);for(var c=0,d=a.length;c<d;c++){var e=a[c];(Ib(e,"_")||KB(e))&&delete b[e]}}return b||null};g.ou=function(a){var b="default";(a=this.X(a))&&"Point"==a.T()&&(b="icon");return b};g.getTime=function(a){return(a=a.getFeature())?a.get("recordTime")||null:null};g.zg=function(){return""};g.xp=function(a){return"off"!=a.getState()};
g.Lr=function(a,b){this.A[b.D()]=a;KC("open","http://www.opengis.net/kml/2.2",a,b.collapsed?0:1);h7.C.Lr.call(this,a,b)};g.zs=function(){return!1};g.X=function(a){var b;if(a=a?a.getFeature():null)(b=a.X())&&(b=b.clone().toLonLat()),this.P&&(a=DB(a),!a||a instanceof Jk||(this.oa&&b instanceof Jk?b=new Kr([a,b]):b=a));return b};g.nu=function(a){if((a=a?a.getFeature():null)&&(a=PB(a))&&a.showRotation)return a.rotationColumn};W.directive("kmltreeexport",[function(){return{restrict:"E",scope:{rootNode:"="},templateUrl:"v1542394219/views/plugin/kml/kmltreeexport.html",controller:i7,controllerAs:"treeExport"}}]);function q2(a){FE({label:"Export Places",icon:"fa fa-download",x:"center",y:"center",width:400,"min-width":300,"max-width":2E3,height:"auto","show-close":!0},'<kmltreeexport root-node="rootNode"></kmltreeexport>',void 0,void 0,void 0,{rootNode:a})}
function i7(a,b){this.scope=a;this.element=b;this.title=(b=this.scope.rootNode)&&b.ba()||(ws()+" KML Tree").trim();this.exporter=new h7;this.persisters={};this.persister=null;if((b=BG(AG))&&0<b.length){this.persister=b[0];for(var c=0,d=b.length;c<d;c++)this.persisters[b[c].ba()]=b[c]}a.$on("$destroy",this.destroy.bind(this));setTimeout(function(){a.$emit("window.ready")},0)}i7.$inject=["$scope","$element"];i7.prototype.destroy=function(){this.element=this.scope=null};i7.prototype.cancel=function(){KE(this.element)};
i7.prototype.cancel=i7.prototype.cancel;i7.prototype.confirm=function(){var a=this.scope.rootNode;a&&(a=a.na()||[a],CG(a,null,this.title,this.exporter,this.persister),KE(this.element))};i7.prototype.confirm=i7.prototype.confirm;function j7(a){this.visible=!1;if(this.eventType&&a&&1==a.length&&(a=a[0],a instanceof Y1))switch(this.eventType){case "kml:buffer":this.visible=Z1(a);break;case "kml:selectAll":case "kml:deselectAll":this.visible=a.Tc()&&Z1(a);break;case "kml:goTo":this.visible=!!a.Ua()||Z1(a);break;case "kml:load":this.visible=a instanceof M6&&"off"===a.getState();break;case "kml:refresh":this.visible=a instanceof M6&&"off"!==a.getState()&&!a.mb();break;case "kml:featureInfo":this.visible=!!a.getFeature();break;
default:this.visible=a.Tc()}}
function k7(a){var b=a.getContext();if(b&&1==b.length&&(b=b[0],b instanceof Y1)){var c=b.O();if(c)switch(a.type){case "kml:buffer":(a=b.Oa())&&0<a.length&&(b=b.ba()+" Buffer",iQ({features:a,title:b}));break;case "kml:goTo":(b=b.aa())&&!fi(b)&&gF(EF,new dv(b));break;case "kml:selectAll":tN(c,b.Oa());break;case "kml:deselectAll":rN(c,b.Oa());break;case "kml:removeAll":S1(c,b,!0);owa(b);break;case "kml:load":b.Ga("on");break;case "kml:refresh":b.refresh();break;case "kml:featureInfo":a=c?c.S():void 0,
(b=b.getFeature())&&KI(b,a)}}};W.directive("kmlimport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/file/genericfileimport.html",controller:l7,controllerAs:"ctrl"}}]);function l7(a,b){U5.call(this,a,b)}w(l7,U5);l7.$inject=["$scope","$element"];l7.prototype.g=function(){if(this.config.descriptor){var a=this.config.descriptor;Vza(a,this.config)}else{a=this.config;var b=a.file,c=s6.u(),d=new t6;d.ga(TI(c));d.Cc(c.ba());d.Lb(b.Ka());d.Vc("rgba(255,255,255,1)");Vza(d,a);a=d}return a};
l7.prototype.rb=function(){return s6.u()};function m7(){pS.call(this)}w(m7,pS);m7.prototype.S=function(){return"KML"};m7.prototype.Ib=function(a,b){m7.C.Ib.call(this,a,b);var c=new IR;b&&this.g(b,c);c.file=a;c.title=a.getFileName();FE({label:"Import KML",icon:"fa fa-file-text",x:"center",y:"center",width:400,"min-width":400,"max-width":800,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<kmlimport></kmlimport>",void 0,void 0,void 0,{config:c})};function n7(){y_.call(this);this.id="kml"}w(n7,y_);
n7.prototype.init=function(){var a=V;ZI(a,new RI("kml",s6,"KML Layers","KML Layers"));$I(a,this.id,t6);Iv(Ev.u(),this.id,g7);a=KQ.u();NQ(a,"KML/KMZ",!0);OQ(a,"application/vnd.google-earth.kml+xml",new m7);OQ(a,"application/vnd.google-earth.kmz",new m7);PQ(a,this.id,Q6);PQ(a,"kmlfeature",B6);JY(AG,new FG);if((a=eZ)&&!a.Ha().find("kml:goTo")){a=a.Ha();var b=a.find("Tools");a.R({label:"Load",eventType:"kml:load",tooltip:"Load the network link",da:['<i class="fa fa-fw fa-cloud-download"></i>'],Aa:j7,
ya:k7,sort:gZ++});a.R({label:"Refresh",eventType:"kml:refresh",tooltip:"Refresh the network link",da:['<i class="fa fa-fw fa-refresh"></i>'],Aa:j7,ya:k7,sort:gZ++});a.R({label:"Feature Info",eventType:"kml:featureInfo",tooltip:"Display detailed feature information",da:['<i class="fa fa-fw fa-info-circle"></i>'],Aa:j7,ya:k7,sort:gZ++});a.R({label:"Go To",eventType:"kml:goTo",tooltip:"Repositions the map to display features at this level of the tree",da:['<i class="fa fa-fw fa-fighter-jet"></i>'],Aa:j7,
ya:k7,sort:gZ++});a.R({label:"Select All",eventType:"kml:selectAll",tooltip:"Selects all features under the folder",da:['<i class="fa fa-fw fa-check-circle"></i>'],Aa:j7,ya:k7,sort:gZ++});a.R({label:"Deselect All",eventType:"kml:deselectAll",tooltip:"Deselects all features under the folder",da:['<i class="fa fa-fw fa-times-circle"></i>'],Aa:j7,ya:k7,sort:gZ++});a.R({label:"Remove All",eventType:"kml:removeAll",tooltip:"Removes everything under the folder",da:['<i class="fa fa-fw fa-times"></i>'],
Aa:j7,ya:k7,sort:gZ++});b.R({label:"Create Buffer Region...",eventType:"kml:buffer",tooltip:"Creates buffer regions around loaded data",da:['<i class="fa fa-fw fa-dot-circle-o"></i>'],Aa:j7,ya:k7})}};function o7(){SI.call(this)}w(o7,q5);wa(o7);o7.prototype.bc=function(a){o7.C.bc.call(this,a);this.ga("shp");this.Da("SHP Files")};function p7(a){MR.call(this);this.Oc="shp";this.l=a||new t1;this.o=this.s=null}w(p7,MR);g=p7.prototype;g.T=function(){return"Feature Layers"};g.Sa=function(){var a=p7.C.Sa.call(this);a.type="SHP";a.originalUrl2=this.s;a.url2=this.o;return a};g.yh=function(a){return a==this.Ka()||a==this.o};g.clearData=function(){p7.C.clearData.call(this);var a=this.o;a&&Uw(a)&&ny(my.u(),a)};g.sa=function(a){a||(a={});a.originalUrl2=this.s;a.url2=this.o;return p7.C.sa.call(this,a)};
g.restore=function(a){this.s=a.originalUrl2||null;this.o=a.url2||null;p7.C.restore.call(this,a)};function tBa(a,b){a.Vc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);p5(a,b)};W.directive("shpexport",[function(){return{restrict:"E",scope:{exporter:"="},templateUrl:"v1542394219/views/plugin/shp/shpexport.html",controller:q7,controllerAs:"shpexport"}}]);function q7(a){this.v=a;this.g=a.exporter;a.exportEllipses=this.g.oa;a.$watch("exportEllipses",this.j.bind(this));a.$on("$destroy",this.l.bind(this));this.j()}q7.$inject=["$scope"];q7.prototype.l=function(){this.g=this.v=null};q7.prototype.j=function(){this.g&&this.v&&(this.g.oa=this.v.exportEllipses)};function GG(){u6.call(this);this.log=uBa;this.L=!0;this.U={};this.P={};this.I={};this.B={};this.Z={};this.g=[];this.j=new Yva;this.ra=0;this.N=-1;this.oa=!1;this.s=this.o=this.l=this.A=null}w(GG,u6);var uBa=E.V("plugin.file.shp.SHPExporter");g=GG.prototype;g.getExtension=function(){return"zip"};g.ba=function(){return"SHP"};g.Pj=function(){return"application/zip"};g.cancel=function(){};
function vBa(a,b,c){var d=c.name,e=c.field;b=b.get(e);var f=typeof b;0!=e.indexOf("_")&&"geometry"!=e&&(b instanceof Date?b=b.toISOString():(b=Yb(b),b=Nb(b)),d in a.U||(e=(d.replace(" ","_")+"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00").substr(0,10),qc(a.U,e)&&(e in a.P||(a.P[e]=0),a.P[e]++,e=(e.substr(0,9)+String(a.P[e])).substr(0,10)),a.U[d]=e),d in a.I?a.B[d]=Math.min(Math.max(a.B[d],b.length),255):(a.B[d]=Math.min(b.length,255),a.g.push(c)),d in a.I?"L"==a.I[d]&&"boolean"!=f?a.I[d]="C":"N"==a.I[d]&&
"number"!=f&&(a.I[d]="C"):a.I[d]="boolean"==f?"L":"number"==f?"N":"C","N"==a.I[d]&&b.match(/^\d*\.\d+$/)?a.Z[d]=Math.min(Math.max(a.Z[d]||0,b.replace(/^\d*\./,"").length),255):a.Z[d]=0)}
g.setItems=function(a){GG.C.setItems.call(this,a);this.g=[];this.B={};this.Z={};this.I={};this.U={};this.P={};if(this.items&&0<this.items.length){a=this.items[0];var b=null;if(a){var c=a.get("sourceId");"string"===typeof c&&(b=NB.O(c))}c=b&&b.getColumns()||nc(a.Vb());for(var d=0;d<this.items.length;d++)if(a=this.items[d],b)for(var e=0;e<c.length;e++){var f=c[e];f={name:f.name,field:f.field};c[e].visible&&!Lb(Yb(f.name))&&vBa(this,a,f)}else for(e=0;e<c.length;e++)f=c[e],f={name:f,field:f},Lb(Yb(f.name))||
vBa(this,a,f)}this.A=null;this.ra=0;this.N=-1;this.s=this.o=this.l=null};function wBa(a){a.j.l=100;a.j.g.g=32*a.g.length+33;a.j.j.g=100;for(var b=0,c=a.items.length;b<c;b++){var d=xBa(a,a.items[b]);null!=d&&(d instanceof Kr?db(Np(d),function(a){yBa(this,a)},a):yBa(a,d))}}function yBa(a,b){"MultiPolygon"==b.T()?db(Tr(b),function(a){r7(this,a)},a):"MultiPoint"==b.T()?db(Qr(b),function(a){r7(this,a)},a):r7(a,b)}
function r7(a,b){var c=b.T();zBa(c);a.j.j.g+=8;a.j.l+=8;var d=0;if("Point"==c)c=b.getCoordinates(),d=20,"XYZ"==b.layout&&0!=c[2]&&(d=36);else if("LineString"==c||"MultiLineString"==c||"Polygon"==c){d=1;var e=[];"LineString"==c?e=b.getCoordinates():(c=b.getCoordinates(),d=c.length,db(c,function(a){db(a,function(a){e.push(a)})}));c=e.length;d=44+4*d+16*c;if("XYZ"==b.layout)for(b=0;b<e.length;b++)if(0!=e[b][2]){d+=32+16*c;break}}a.j.l+=d;db(a.g,function(a){this.j.g.g+=this.B[a.name]},a);a.j.g.g++}
function ABa(a){var b=32+32*a.g.length;a.o.setUint8(0,3);var c=new Date;a.o.setUint8(1,c.getUTCFullYear()-1900);a.o.setUint8(2,c.getUTCMonth()+1);a.o.setUint8(3,c.getUTCDate());a.o.setUint16(8,b,!0);var d=0;jc(a.B,function(a){d+=a});a.o.setUint16(10,d+1,!0);db(a.g,function(a,b){b=32+32*b;a=a.name;s7(this.o,b,this.U[a]);s7(this.o,b+11,this.I[a]);this.o.setUint8(b+16,this.B[a]);this.o.setUint8(b+17,this.Z[a])},a);a.o.setUint8(b,13);a.j.g.position=b+1}
function s7(a,b,c){for(var d=0;c&&d<c.length;++d)a.setUint8(b,c.charCodeAt(d)),b++}
g.Ne=function(){wBa(this);this.j.data=new ArrayBuffer(this.j.l);this.j.g.data=new ArrayBuffer(this.j.g.g);this.j.j.data=new ArrayBuffer(this.j.j.g);this.l=new DataView(this.j.data);this.o=new DataView(this.j.g.data);this.s=new DataView(this.j.j.data);this.l.setUint32(0,9994);this.l.setUint32(28,1E3,!0);this.j.position=100;ABa(this);this.s.setUint32(0,9994);this.s.setUint32(28,1E3,!0);this.j.j.position=100;for(var a=0,b=0,c=this.items.length;b<c;b++)BBa(this,this.items[b])||a++;0<a&&At(Ct,"Skipped "+
a+" feature"+(1<a?"s":"")+" that did not have a geometry.",ss,this.log);a<this.items.length&&(this.l.setUint32(24,this.j.position/2),this.l.setFloat64(36,this.A[0],!0),this.l.setFloat64(44,this.A[1],!0),this.l.setFloat64(52,this.A[2],!0),this.l.setFloat64(60,this.A[3],!0),this.s.setUint32(24,this.j.j.position/2),this.s.setFloat64(36,this.A[0],!0),this.s.setFloat64(44,this.A[1],!0),this.s.setFloat64(52,this.A[2],!0),this.s.setFloat64(60,this.A[3],!0),this.s.setUint32(32,this.N,!0),this.o.setUint32(4,
this.ra,!0),a=new Lw,b=this.j.data.slice(0,this.j.position),a.g=b,a.j=this.name+".shp",this.G.push(a),a=new Lw,b=this.j.g.data.slice(0,this.j.g.position),a.g=b,a.j=this.name+".dbf",this.G.push(a),a=new Lw,b=this.j.j.data.slice(0,this.j.j.position),a.g=b,a.j=this.name+".shx",this.G.push(a))};function BBa(a,b){var c=xBa(a,b);return null!=c?(c instanceof Kr?db(Np(c),function(a){CBa(this,b,a)},a):CBa(a,b,c),!0):!1}
function xBa(a,b){var c;b&&(c=b.get("geometry"))&&(c=c.clone().toLonLat(),a.oa&&(a=DB(b),!a||a instanceof Jk||(c=a)));return c}function zBa(a){if("Point"!=a&&"MultiPoint"!=a&&"LineString"!=a&&"MultiLineString"!=a&&"MultiPolygon"!=a&&"Polygon"!=a)throw Error(a+" is not supported");}
function t7(a,b,c){var d=c.T();zBa(d);a.s.setUint32(a.j.j.position,a.j.position/2);a.j.j.position+=4;b.get("RECNUM")?a.l.setUint32(a.j.position,b.get("RECNUM")):a.l.setUint32(a.j.position,++a.ra);a.j.position+=8;var e=a.j.position,f=c.aa();f&&(a.A=a.A?ci(a.A,f):Wh(f));var h=0,k=-1;if("Point"==d)d=c.getCoordinates(),k=1,h=20,"XYZ"==c.layout&&0!=d[2]&&(k=11,h=36),a.l.setFloat64(e+4,d[0],!0),a.l.setFloat64(e+12,d[1],!0),11==k&&a.l.setFloat64(e+20,d[2],!0);else if("LineString"==d||"MultiLineString"==
d||"Polygon"==d){switch(d){case "LineString":case "MultiLineString":k=3;break;case "Polygon":k=5}var l=1,m=[];if("LineString"==d)m=c.getCoordinates(),a.l.setInt32(e+44,0,!0);else{h=c.getCoordinates();l=h.length;db(h,function(a){db(a,function(a){m.push(a)})});var n=0;for(d=0;d<l;d++)a.l.setInt32(e+44+4*d,n,!0),n+=h[d].length}var p=m.length,r=4*l;n=16*p;h=44+r+n;if("XYZ"==c.layout)for(d=0;d<m.length;d++)if(0!=m[d][2]){h+=32+16*p;k=3==k?13:15;break}a.l.setFloat64(e+4,f[0],!0);a.l.setFloat64(e+12,f[1],
!0);a.l.setFloat64(e+20,f[2],!0);a.l.setFloat64(e+28,f[3],!0);a.l.setInt32(e+36,l,!0);a.l.setInt32(e+40,p,!0);c=e+44+r;f=c+n+16;for(d=0;d<m.length;d++)l=16*d,a.l.setFloat64(c+l,m[d][0],!0),a.l.setFloat64(c+l+8,m[d][1],!0),13!=k&&15!=k||a.l.setFloat64(f+8*d,m[d][2],!0)}if(0>a.N||1==a.N&&1!=k)a.N=k,a.l.setUint32(32,a.N,!0);a.l.setUint32(e,k,!0);a.j.position+=h;a.l.setUint32(e-4,h/2);a.s.setUint32(a.j.j.position,h/2);a.j.j.position+=4;DBa(a,b)}
function CBa(a,b,c){"MultiPolygon"==c.T()?db(Tr(c),function(a){t7(this,b,a)},a):"MultiPoint"==c.T()?db(Qr(c),function(a){t7(this,b,a)},a):t7(a,b,c)}
function DBa(a,b){db(a.g,function(a){var c=a.name;a=a.field;var e=b.get(a);"recordTime"==a?e=e.toISOString():(e=Yb(e),e=Nb(e));e.length>this.B[c]&&(e=e.substr(0,this.B[c]));s7(this.o,this.j.g.position,e);for(a=e.length;a<this.B[c];++a)this.o.setUint8(this.j.g.position+a,0);this.j.g.position+=this.B[c]},a);a.o.setUint8(a.j.g.position,32);a.j.g.position++}g.zg=function(){return'<shpexport exporter="exporter"></shpexport>'};function u7(a){vL.call(this,a);this.log=EBa;this.o=null;this.I=0;this.B=[];this.P=[]}w(u7,vL);P(u7,"os.source.IImportSource");var EBa=E.V("os.source.MultiRequest");g=u7.prototype;g.clear=function(){this.P=[];this.o&&this.o.reset();u7.C.clear.call(this)};g.J=function(){u7.C.J.call(this);this.P.length=0;FBa(this,[]);this.Ph(null)};function GBa(a){if(a.mb()){a.Va(!1);for(var b=0,c=a.B.length;b<c;b++)a.B[b].abort()}}g.Zg=function(a){var b=this.N;u7.C.Zg.call(this,a);b&&!a&&this.refresh()};
g.refresh=function(){if(!this.N&&(this.o&&this.o.reset(),0<this.B.length&&(this.clear(),GBa(this),0<this.B.length&&!this.N))){this.I=Ha();this.Va(!0);for(var a=0,b=this.B.length;a<b;a++)this.B[a].load(!1)}};g.Uq=function(){return this.o};g.Ph=function(a){a!==this.o&&(this.o&&(this.o.M("threadProgress",this.Kx,!1,this),this.o.M("complete",this.Jx,!1,this),this.o.reset()),this.o=a)&&(this.o.H("threadProgress",this.Kx,!1,this),this.o.H("complete",this.Jx,!1,this))};
function FBa(a,b){a.mb()&&a.Va(!1);for(var c=0,d=a.B.length;c<d;c++){var e=a.B[c];e.M("success",a.Lx,!1,a);e.M("error",a.Mx,!1,a);e.dispose()}a.B=b;c=0;for(d=a.B.length;c<d;c++)e=a.B[c],e.H("success",a.Lx,!1,a),e.H("error",a.Mx,!1,a)}
g.Lx=function(a){a=a.target;var b="Request complete for "+this.S()+HBa(this,a)+IBa(this);E.info(this.log,b);this.P.push(a.g);bt(a);this.B.length==this.P.length&&(this.o?(gD(this.o,this.P),this.P=[]):(b='No importer set on source "'+this.S()+'"!',E.ib(this.log,b),At(zt.u(),b,rs),this.Va(!1)))};g.Mx=function(a){GBa(this);this.P=[];a="There was an error loading the data source: "+a.target.s.join(" ");E.error(this.log,a);At(zt.u(),a,rs)};g.Kx=function(){this.o&&this.Nc(this.o.getData())};
g.Jx=function(){this.Va(!1);var a="Import complete for "+this.S()+HBa(this)+IBa(this);E.info(this.log,a)};function IBa(a){var b=Ha(),c=" in "+CC(new Date(b-a.I));a.I=b;return c}function HBa(a,b){var c="",d=[];if(b)d.push(b.j.toString());else{b=0;for(var e=a.B.length;b<e;b++){var f=a.B[b];f.j&&d.push(f.j.toString())}}0<d.length&&(c=" ("+d.join(", ")+")");return c};function v7(){M_.call(this);this.log=JBa;this.g=null}w(v7,M_);var JBa=E.V("plugin.file.shp.SHPLayerConfig");g=v7.prototype;g.dc=function(a){v7.C.dc.call(this,a);this.g=a.parserConfig||new t1};
g.Ye=function(a){this.dc(a);if(!a.url)return E.error(this.log,"Unable to create SHP layer without a source URL!"),null;var b;if(a.url2){var c=b=new u7(void 0),d=[];this.url=a.url;d.push(this.pd(a));this.url=a.url2;d.push(this.pd(a));FBa(c,d)}else this.url=a.url,b=new xN(void 0),yN(b,this.pd(a));b.ga(this.id);b.Ph(this.wd(a));b.Ta(this.title);oN(b,this.animate);c=this.W(b,a);a&&c.restore(a);a.load&&b.refresh();return c};g.wd=function(a){a=v7.C.wd.call(this,a);dD(a,this.g.mappings);return a};
g.xf=function(a){var b=this.g||new t1;void 0!==a.lineAlpha&&(b.lineAlpha=a.lineAlpha);void 0!==a.fillAlpha&&(b.fillAlpha=a.fillAlpha);void 0!==a.append&&(b.append=a.append);return new o1(b)};g.pd=function(a){a=v7.C.pd.call(this,a);if(!od||Bd(10))a.B="arraybuffer";return a};function w7(a,b,c,d){F5.call(this,a,b,c,d)}w(w7,F5);w7.$inject=["$scope","$element","$timeout","$attrs"];g=w7.prototype;g.vk=function(){this.config&&(this.config.file2=null,this.config.zipFile=null);w7.C.vk.call(this)};
g.Xz=function(a){if(this.config.zipFile)Uw(this.config.zipFile)?tf(ry(this.g,this.config.zipFile),Fa(this.Vg,a),this.kk,this):this.Vg(a);else{var b=Uw(this.config.file),c=Uw(this.config.file2);b&&c?tf(wf(ry(this.g,this.config.file2),ry(this.g,this.config.file)),Fa(this.Vg,a),this.kk,this):b?tf(ry(this.g,this.config.file),Fa(this.Vg,a),this.kk,this):c?tf(ry(this.g,this.config.file2),Fa(this.Vg,a),this.kk,this):this.Vg(a)}};g.Yn=function(a){mU(o7.u(),a)};
g.to=function(){var a=this.config,b=a.zipFile||a.file,c=a.zipFile?null:a.file2,d=o7.u(),e=new p7(a);e.ga(TI(d));e.Cc(d.ba());e.Lb(b.Ka());c&&(e.o=c.Ka());tBa(e,a);return e};g.Gs=function(a,b){tBa(a,b)};W.directive("shpimport",[function(){var a=S0();a.controller=w7;return a}]);function x7(){pS.call(this)}w(x7,pS);x7.prototype.S=function(){return"SHP"};
x7.prototype.Ib=function(a,b){x7.C.Ib.call(this,a,b);var c=[new u1,new D5,new w5],d=new t1;b&&this.g(b,d);b=a.getFileName();r1.test(b)?(d.file=a,d.title=b):(d.file2=a,d.title=b.split(s1)[0]+".shp");FE({label:"SHP Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},'<shpimport resize-with=".js-window"></shpimport>',void 0,void 0,void 0,{config:d,steps:c})};function y7(){this.s=this.A=this.l=this.o=null}w(y7,pS);y7.prototype.Ib=function(a,b){y7.C.Ib.call(this,a,b);this.l=this.o=null;this.A=a;void 0!==b&&(this.s=b);zip.createReader(new zip.ArrayBufferReader(a.Ob()),t(function(a){a.getEntries(this.B.bind(this))},this),function(){var b='Error reading zip file "'+a.getFileName()+'"!';At(zt.u(),b,rs)})};
y7.prototype.B=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];(r1.test(d.filename)||s1.test(d.filename))&&d.getData(new zip.ArrayBufferWriter,this.G.bind(this,d))}};
y7.prototype.G=function(a,b){b instanceof ArrayBuffer&&(!this.o&&r1.test(a.filename)?this.o=Qw(a.filename,Sw(a.filename),void 0,b):!this.l&&s1.test(a.filename)&&(this.l=Qw(a.filename,Sw(a.filename),void 0,b)));if(this.o&&this.l){if(this.o&&this.l){a=[new D5,new w5];b=new t1;this.s&&(this.g(this.s,b),this.s=null);b.file=this.o;b.file2=this.l;b.zipFile=this.A;b.title=this.A.getFileName();b.wb();var c=b.preview;(!b.mappings||0>=b.mappings.length)&&c&&0<c.length&&(c=hB.u().Nd(c))&&0<c.length&&(b.mappings=
c);FE({label:"SHP Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},'<shpimport resize-with=".js-window"></shpimport>',void 0,void 0,void 0,{config:b,steps:a})}else At(zt.u(),"Zip file does not contain both SHP and DBF files!",rs);this.A=this.l=this.o=null}};function z7(){y_.call(this);this.id="shp"}w(z7,y_);z7.prototype.init=function(){var a=V;ZI(a,new RI("shp",o7,"SHP Layers","SHP Layers"));$I(a,this.id,p7);Iv(Ev.u(),this.id,v7);a=KQ.u();NQ(a,"Shapefile (SHP/DBF or ZIP)",!0);OQ(a,"application/shapefile",new x7);OQ(a,"application/zip; subtype=shape",new y7);PQ(a,this.id,o1);JY(AG,new GG)};function A7(a,b){h_.call(this,a,b);this.g=[];this.o=[];this.l=this.j=null}w(A7,h_);g=A7.prototype;g.Ql=function(){return null};g.cancel=function(){this.j&&(this.j.dispose(),this.j=null);this.l&&(this.l.dispose(),this.l=null);this.o.length=0;this.g.length=0};g.Tq=function(a){this.cancel();this.term=a;this.dispatchEvent(new fU("autocomplete.success",this.term,this.o,this.o.length))};
g.ds=function(a,b,c){this.cancel();if(this.term=a){b=null;(c=this.Ql(c))&&a&&(a=encodeURIComponent(a),c=c.replace(/{s}/g,a),c=c.replace(/{l}/g,a.toLowerCase()),c=c.replace(/{u}/g,a.toUpperCase()));if(a=c)b=new Ys,Zs(b,a),ct(b,"application/json, text/plain, */*");if(b)return b.Ra("success",this.Bh,!1,this),b.Ra("error",this.GI,!1,this),b.load(),this.j=b,!0}this.dispatchEvent(new fU("success",this.term,this.g,this.g.length));return!0};
function KBa(a,b){b.target.removeAllListeners();a.dispatchEvent(new fU("success",a.term,a.g,a.g.length))}g.Bh=function(a){KBa(this,a)};g.GI=function(a){KBa(this,a)};W.directive("googleplacesattrcard",[function(){return{replace:!0,restrict:"E",templateUrl:"v1542394219/views/plugin/google/places/attrcard.html",controller:LBa,controllerAs:"attrCtrl"}}]);function LBa(a,b){a=a.result.xi();for(var c="",d=0,e=a.length;d<e;d++)c+="<div>"+a[d]+"</div>";b.html(c)}LBa.$inject=["$scope","$element"];function B7(a){f_.call(this,a,96)}w(B7,f_);B7.prototype.g=function(){return'<googleplacesattrcard result="result"></googleplacesattrcard>'};W.directive("googleplacesresultcard",[function(){return{replace:!0,restrict:"E",templateUrl:"v1542394219/views/plugin/google/places/resultcard.html",controller:C7,controllerAs:"resultCtrl"}}]);function C7(a,b){i_.call(this,a,b)}w(C7,i_);C7.$inject=["$scope","$element"];function D7(a){k_.call(this,a,"name");this.j=95}w(D7,k_);D7.prototype.g=function(){return'<googleplacesresultcard result="result"></googleplacesresultcard>'};function E7(a){A7.call(this,"google-places",a);this.type="google-places"}w(E7,A7);E7.prototype.Ql=function(){var a=O.get(["plugin","google","places","url"]),b=O.get(["plugin","google","places","nearby"]);if(b){var c=O.get(["plugin","google","places","extentThreshold"],2E5),d=T.u().Y().aa();d=Zi(d,N,"EPSG:4326");d=osasm.geodesicInverse(d.slice(0,2),d.slice(2,4)).distance;d<=c&&(a=b.replace("{radius}",Math.min(5E4,Math.round(d/2)).toString()))}return a};
E7.prototype.Bh=function(a){var b=a.target;try{var c=JSON.parse(b.g),d=c.status;b=null;if("OVER_QUERY_LIMIT"===d)b="The "+this.getName()+" search has reached the daily request quota. Please wait until after midnight PST or contact the administrator.";else if("REQUEST_DENIED"===d||"INVALID_REQUEST"===d)b="The "+this.getName()+" search is misconfigured. Please contact the administrator.";if(b)At(zt.u(),b,rs);else{var e=c.html_attributions;e&&e.length&&this.g.push(new B7(e));var f=c.results,h=O.get(["plugin",
"google","places","maxResults"],5);c=0;for(var k=Math.min(h,f.length);c<k;c++){var l=f[c];h={};h.name=l.name;var m=l.types;m&&(m=m.map(function(a){return a.replace(/_/g," ")}));h.types=m;h.vicinity=l.vicinity||l.formatted_address;var n=l.geometry;if(n){var p=n.location;p&&(h.geometry=iu(new Jk([p.lng,p.lat])))}if(h.geometry){var r=new ek(h);this.g.push(new D7(r))}}}}catch(u){}E7.C.Bh.call(this,a)};function F7(){y_.call(this);this.id="google-places"}w(F7,y_);F7.prototype.init=function(){O.get(["plugin","google","places","url"])&&hU(gU.u(),new E7("Places (Google)"))};var MBa={XO:"intensity",fB:"size",MO:"gradient"};function NBa(a){return(a=a?NB.O(a):void 0)?a.Oa().map(function(a,c){if(a){var b=null;var e=a.X();if(e&&-1===e.aa().indexOf(Infinity)){b=new ek;var f=e.T();b.set("_geometryType",f);b.set("_heatmapGeometry",rF(e));f=a.get("ellipse");a=RB(a);!f||"Ellipse"!=a&&"Ellipse with Center"!=a||(b.set("_geometryType",f.T()),b.set("_heatmapGeometry",rF(f)));e=e.aa();e=new Jk(ii(e));b.sb(e)}if(b)return b.ga(c),b}}).filter(CA):void 0}
function OBa(a){for(var b=qj(1,256),c=b.createLinearGradient(0,0,1,256),d=1/(a.length-1),e=0,f=a.length;e<f;++e)c.addColorStop(e*d,a[e]);b.fillStyle=c;b.fillRect(0,0,1,256);return b.getImageData(0,0,1,256).data}function PBa(a){var b=a.G.Ua().toDataURL(),c=new B2("v1542394219/src/worker/dataurltoarray.js","Canvas to Blob","Converting canvas data URL to a Blob.");c.Ra("job:complete",Fa(QBa,a));c.Ra("job:error",RBa);Lwa(c,{dataUrl:b})}
function QBa(a,b){Ma(b.target);if(b.data instanceof Uint8Array){var c=new Blob([b.data],{type:"image/png"});b=new Lw;b.j="heatmap.png";b.g=c;b.l="image/png";c=a.S();a=a.aa().slice();mi(a,1/1.5);var d=T.u(),e=M(d.Y()),f=$k(e)[1];e=$k(e)[0];a:{var h=0;if(d.Qa()){d=Yu(d);if(!d){d=h;break a}h=d.Qg()}else{var k=M(d.ha).ab();if(null==k){d=h;break a}d=vn(d.Y());h=gu([d[0],d[1]],k)}d=h}f='<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://www.opengis.net/kml/2.2"><Document><name>Heatmap</name><Camera><latitude>'+
f+"</latitude><longitude>"+e+"</longitude><altitude>"+d+"</altitude><tilt>0</tilt><heading>0</heading><roll>0</roll></Camera><GroundOverlay><name>"+c+"</name><Icon><href>heatmap.png</href></Icon><LatLonBox><north>"+a[3]+"</north><south>"+a[1]+"</south><east>"+a[2]+"</east><west>"+a[0]+"</west></LatLonBox></GroundOverlay></Document></kml>";a=new Lw;a.j="index.kml";a.g=f;a.l="application/vnd.google-earth.kml+xml";f=new u6;f.G.push(a);f.G.push(b);v6(f,!0);CG([a],[""],c+".kmz",f)}else At(Ct,"Failed saving canvas to PNG")}
function RBa(a){Ma(a.target);At(Ct,"string"===typeof a.data?a.data:"Screen capture failed due to an unspecified error",rs)};function G7(a,b,c){GN.call(this,a,b,c);this.title="Change heatmap gradient"}w(G7,GN);G7.prototype.j=function(){var a=this.W();return a?a.s:null};G7.prototype.g=function(a,b){if(a=this.W())a.s=b,a.B=OBa(a.s),H7(a,"gradient")};G7.prototype.Sg=function(){return{}};function I7(a,b,c){GN.call(this,a,b,c);this.title="Change heatmap intensity"}w(I7,GN);I7.prototype.j=function(){var a=this.W();return a?a.g:null};I7.prototype.g=function(a,b){if(a=this.W())a.g=b,H7(a,"intensity")};I7.prototype.Sg=function(){return{}};function J7(a,b,c){GN.call(this,a,b,c);this.title="Change heatmap intensity"}w(J7,GN);J7.prototype.j=function(){var a=this.W();return a?a.l:null};J7.prototype.g=function(a,b){(a=this.W())&&a.setSize(b)};J7.prototype.Sg=function(){return{}};W.directive("heatmaplayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/plugin/heatmap/heatmap.html",controller:K7,controllerAs:"heatmap"}}]);function K7(a,b,c){lO.call(this,a,b,c);a.$on("size.slidestop",this.Xf.bind(this));a.$on("intensity.slidestop",this.A.bind(this));a.$on("intensity.spinstop",this.A.bind(this));this.maxIntensity=50;this.j=this.j.concat(mc(MBa));this.G=new le(this.B,1E3,this)}w(K7,lO);K7.$inject=["$scope","$element","$timeout"];
K7.prototype.md=function(){K7.C.md.call(this);if(this.scope){var a=this.scope;a:{var b=this.scope.items;if(b)for(var c=0,d=b.length;c<d;c++)try{var e=b[c].W();if(e){var f=e.l;break a}}catch(n){}f=1}a.size=f;a=this.scope;a:{if(f=this.scope.items)for(b=0,c=f.length;b<c;b++)try{var h=f[b].W();if(h){var k=h.g;break a}}catch(n){}k=this.maxIntensity/2}a.intensity=k;this.scope.gradients=[{title:"Rainbow",gradient:Rea},{title:"Thermal",gradient:qv}];a:{if(k=this.scope.items)for(h=0,a=k.length;h<a;h++)try{var l=
k[h].W();if(l){var m=l.s;break a}}catch(n){}m=[]}this.scope.gradient=this.scope.gradients[m==qv?1:0]}};K7.prototype.vH=function(){var a=this.scope.gradient.gradient;this.xb(function(b){return new G7(b.D(),a)})};K7.prototype.onGradientChange=K7.prototype.vH;K7.prototype.Xf=function(a,b){this.xb(function(a){return new J7(a.D(),b)})};K7.prototype.A=function(a,b){this.scope.intensity=b;this.G.start()};K7.prototype.B=function(){var a=this.scope.intensity;this.xb(function(b){return new I7(b.D(),a)})};function L7(a){a=a||{};a.renderMode||(a.renderMode="image");MK.call(this,a);this.s=qv;this.B=OBa(this.s);this.G=null;this.g=25;this.l=5;this.N={};this.vn(!1);this.gg("heatmaplayerui");this.Pk("heatmap");this.Zd("Image");this.ye("Image");a.title&&this.Ta("Heatmap - "+a.title);this.yb(this.gN.bind(this));this.set("renderOrder",null);I(this,"precompose",this.pI,this)}w(L7,MK);P(L7,"os.layer.ILayer");g=L7.prototype;g.J=function(){L7.C.J.call(this);this.N=null};
g.pI=function(a){if(a&&a.context){var b=Uo(T.u().Y().wi(),a.target);if((b=b?b.wa:void 0)&&b!==this.G){this.G=b;b=b.Ua();var c=b.getContext("2d"),d=a.frameState;a=d?d.extent:void 0;var e=d?d.pixelRatio:void 0;d=d?d.viewState.resolution:void 0;if(c&&b&&a&&null!=e&&null!=d){e=c.getImageData(0,0,b.width,b.height);d=e.data;for(var f,h=0,k=d.length;h<k;h+=4)if(f=4*d[h+3])d[h]=this.B[f],d[h+1]=this.B[f+1],d[h+2]=this.B[f+2],d[h+3]=4*f;c.putImageData(e,0,0);a=a.slice();mi(a,1.5);c=document.createElement("canvas");
c.width=b.width;c.height=b.height;c.getContext("2d").drawImage(b,0,0);this.set("url",c.toDataURL())}}}};g.gN=function(a){var b,c=1/this.g,d=a.get("_heatmapGeometry")instanceof Jk;d&&(b=this.N[this.g]);b||(a=this.createImage(a),c=new pL({opacity:c,img:a,imgSize:[a.width,a.height]}),b=[new bk({image:c})],d&&(this.N[this.g]=b));return b};
g.createImage=function(a){var b=qj(1,1),c=a.get("_geometryType");a=a.get("_heatmapGeometry");switch(c){case "Point":b=this.l;a=b+6;c=2*a;a-=250;c=qj(c,c);c.shadowOffsetX=c.shadowOffsetY=250;c.shadowBlur=5;c.shadowColor="#000";c.beginPath();c.arc(a,a,b,0,2*Math.PI,!0);c.fill();b=c;break;case "MultiPoint":b=null;if(a){c=M7(a);a=a.getCoordinates();var d=this.l,e=Math.abs(c[1][1]-c[0][1])+10;b=qj(Math.abs(c[1][0]-c[0][0])+10,e);b.shadowOffsetY=4*e;b.shadowBlur=5;b.shadowColor="#000";for(var f=0,h=a.length;f<
h;f++){var k=a[f],l=$u(T.u().Y(),k);k=Math.abs(c[0][0]-l[0])+5;l=Math.abs(c[0][1]-l[1])+5-4*e;b.beginPath();b.arc(k,l,d,0,2*Math.PI,!0);b.fill()}}break;case "LineString":b=null;if(a){c=M7(a);a=a.getCoordinates();d=Math.abs(c[1][1]-c[0][1])+20;b=qj(Math.abs(c[1][0]-c[0][0])+20,d);e=0;for(f=a.length;e<f;e++)h=a[e],k=$u(T.u().Y(),h),h=Math.abs(c[0][0]-k[0])+10,k=Math.abs(c[0][1]-k[1])+10-4*d,0===e?b.moveTo(h,k):b.lineTo(h,k);b.lineWidth=this.l;b.shadowOffsetY=4*d;b.shadowBlur=5;b.shadowColor="#000";
b.stroke()}break;case "Polygon":b=null;if(a){c=M7(a);a=a.getCoordinates();d=Math.abs(c[1][1]-c[0][1])+20;b=qj(Math.abs(c[1][0]-c[0][0])+20,d);e=0;for(f=a.length;e<f;e++)for(h=a[e],k=0,l=h.length;k<l;k++){var m=h[k],n=$u(T.u().Y(),m);m=Math.abs(c[0][0]-n[0])+10;n=Math.abs(c[0][1]-n[1])+10-4*d;0===k?b.moveTo(m,n):b.lineTo(m,n)}SBa(b,d)}break;case "MultiPolygon":if(b=null,a){c=M7(a);a=a.getCoordinates();d=Math.abs(c[1][1]-c[0][1])+20;b=qj(Math.abs(c[1][0]-c[0][0])+20,d);e=0;for(f=a.length;e<f;e++)for(h=
a[e],k=0,l=h.length;k<l;k++){m=h[k];n=0;for(var p=m.length;n<p;n++){var r=m[n],u=$u(T.u().Y(),r);r=Math.abs(c[0][0]-u[0])+10;u=Math.abs(c[0][1]-u[1])+10-4*d;0===n?b.moveTo(r,u):b.lineTo(r,u)}}SBa(b,d)}}return b.canvas};g.aa=function(){var a=(a=this.G)?a.aa().slice():ev(T.u()).slice();mi(a,1.5);return a};g.setSize=function(a){this.l=a;H7(this,"size")};function H7(a,b){a.N={};CH(a,void 0,b)}
g.Uk=function(a,b){var c=this.O();switch(a){case "layer:remove":case "identify":return!0;case "rename":return!!b&&ya(b)&&1===b.length;case "refresh":return c instanceof xN}return!1};g.di=function(a){switch(a){case "export":PBa(this);break;case "identify":gka(this);break;case "layer:remove":a=new BA("removeLayer",this.D());C.dispatchEvent(a);break;case "rename":cP(this)}};function M7(a){var b=a.aa();a=$u(T.u().Y(),[b[0],b[3]]);b=$u(T.u().Y(),[b[2],b[1]]);return[a,b]}
function SBa(a,b){a.shadowOffsetY=4*b;a.shadowBlur=10;a.shadowColor="#000";a.fill()};function N7(){US.call(this);this.log=TBa;this.animate=!1}w(N7,US);var TBa=E.V("plugin.heatmap.HeatmapLayerConfig");N7.prototype.Ye=function(a){this.dc(a);var b=this.O(a);b=this.W(b,a);b.ga(a.id);null!=a.explicitType&&b.ye(a.explicitType);return b};N7.prototype.W=function(a,b){return new L7({source:a,title:b.title})};N7.prototype.O=function(a){a=a||{};a.features=NBa(a.sourceId);return new tm(a)};function O7(a,b,c){C4.call(this,a,b,c);this.Pb=c.imageryLayers;this.g=null;this.o=this.layer.bd();this.s=-1;this.j=new le(this.DL,75,this);I(this.layer,"propertychange",this.Sy,this);Y4(this.layer,UBa,this.Ty,this)}w(O7,C4);var UBa=["change:opacity"];g=O7.prototype;g.J=function(){Ma(this.j);this.j=null;xh(this.layer,"propertychange",this.Sy,this);Z4(this.layer,UBa,this.Ty,this);this.Pb.remove(this.g);this.g=null;O7.C.J.call(this)};g.sd=function(){this.j&&this.j.start()};
g.DL=function(){if(this.o){var a=this.Pb.length||void 0;this.g&&(a=this.g?this.Pb.indexOf(this.g):-1,this.Pb.remove(this.g),this.g=null);var b=this.layer.get("url");if(!b)P7(this);else if(b){var c=this.layer.aa().slice();mi(c,1/1.5);this.g=this.Pb.addImageryProvider(new Cesium.SingleTileImageryProvider({url:b,rectangle:Cesium.Rectangle.fromDegrees(c[0],c[1],c[2],c[3])}),a);p3(this.layer,this.g);C.dispatchEvent("map:glRepaint")}}};
g.Sy=function(a){if(a instanceof U){var b=a.l;"visible"==b?(this.o=a.o,this.layer&&this.g&&(p3(this.layer,this.g),C.dispatchEvent("map:glRepaint"))):"intensity"!=b&&"size"!=b&&"gradient"!=b||P7(this)}};g.Ty=function(){p3(this.layer,this.g);C.dispatchEvent("map:glRepaint")};
function P7(a){if(T.u().Qa()&&a.o){xn(a.map);for(var b=a.map.wi(),c=a.map.j,d,e=0,f=c.layerStatesArray.length;e<f;++e)d=c.layerStatesArray[e],d=d.layer,d===a.layer&&(c.layerStatesArray[e].visible=!0,c.layerStatesArray[e].extent=void 0,d=c.extent.slice(),mi(d,2),c.extent=d);b.Mi(c);a.sd()}}g.Br=function(){P7(this)};g.Ik=function(a){this.s!==a?(this.s=a,this.g&&(this.Pb.remove(this.g,!1),this.Pb.add(this.g,a++))):a=(this.g?this.Pb.indexOf(this.g):-1)+1;return a};g.reset=function(){this.sd()};function VBa(){var a=eZ;if(a&&!a.Ha().find("heatmap:export")){a=a.Ha();var b=a.find("Tools");a.R({label:"Heatmap",type:"group",children:[{label:"Export Heatmap...",eventType:"heatmap:export",tooltip:"Exports the heatmap as a KML Ground Overlay",da:['<i class="fa fa-fw fa-download"></i>'],Aa:WBa,ya:XBa,qa:"layers.contextMenu.featureLayer.heatMap"}]});b.R({label:"Generate Heatmap",eventType:"heatmap:generate",tooltip:"Generate a heatmap of current features",da:['<i class="fa fa-fw fa-fire"></i>'],Aa:hZ,
ya:YBa,qa:"layers.contextMenu.featureLayer.heatMap"})}}function WBa(a){this.visible=!1;a&&1==a.length&&(a=a[0],a instanceof HA&&(this.visible=a.W()instanceof L7))}function XBa(a){(a=a.getContext())&&1==a.length&&(a=a[0].W(),a instanceof L7&&PBa(a))}
function YBa(a){if(a=a.getContext())if(a=IA(a),a.length)for(var b=0;b<a.length;b++){var c=a[b],d=c.O();!d||0>=d.Z?At(Ct,"No features in selected layer. Unable to generate heatmap.",ss):(c={id:$b(),sourceId:c.O().D(),title:c.S(),animate:!1,layerType:"Feature Layers",explicitType:"",type:"heatmap",loadOnce:!0},C.dispatchEvent(new TK("configureAndAddLayer",c)))}};function Q7(){y_.call(this);this.id="heatmap"}w(Q7,y_);wa(Q7);Q7.prototype.init=function(){Iv(Ev.u(),"heatmap",N7);VBa();V.H("dataSourceAdded",function(a){(a=a.source)&&a instanceof vL&&(a.oa["heatmap:generate"]=!0)});x3(w3.u(),"heatmap",O7)};function ZBa(a,b){return a+"["+AB(b)+"]"}function $Ba(a){var b={};a=a.querySelectorAll("PropertyName");for(var c=[],d=0;d<a.length;d++){var e=zl(a[d],!0).trim();e&&-1==c.indexOf(e)&&c.push(e)}c.forEach(function(a,c){a&&(b[a]="v"+c)});return b}
function aCa(a,b){if(Hha(a)){a:{var c=new TJ;UJ(c,a);if(c.op&&c.g&&(a=c.op,b=b[c.g])){b=a.jd(b,c.literal);break a}b=""}return b}if(c=MJ(a))a:{if((a=a.childNodes)&&0<a.length){for(var d=[],e=0;e<a.length;e++){var f=aCa(a[e],b);Lb(f)||d.push(f)}if(0<d.length)switch(c){case "And":b="("+d.join("&&")+")";break a;case "Or":b="("+d.join("||")+")";break a;case "Not":b="!("+d.join("||")+")";break a}}b=""}else b="";return b};function R7(){eJ.call(this);this.Ta("New Filter Action");this.actions=[];this.s=$a;this.B=void 0}w(R7,eJ);g=R7.prototype;g.Zf=function(a){R7.C.Zf.call(this,a);var b=fJ(this);if(b)a:{var c=this.B||ZBa;a=[];var d=$Ba(b);if(!uc(d)){for(var e in d){var f=c("item",e);a.push("var "+d[e]+"="+String(f)+";")}e=aCa(b,d);if(!Lb(e)){a.push("return ",e,";");a=Function("item",a.join(""));break a}}a=$a}else a=$a;this.s=a};
function bCa(a,b,c){if(c){c=c.filter(a.s);for(var d=0;d<a.actions.length;d++)a.actions[d].reset(b,c)}}g.Ne=function(a,b){if(b&&(b=b.filter(this.s),0<b.length))for(a=0;a<this.actions.length;a++)this.actions[a].Fa(b)};g.sa=function(a){a=R7.C.sa.call(this,a)||{};a.actions=this.actions.map(function(a){return a.sa()});return a};g.restore=function(a){R7.C.restore.call(this,a);this.actions.length=0;if(a=a.actions)for(var b=S7.u(),c=0;c<a.length;c++){var d=a[c];(d=T7(b,d.id,d))&&this.actions.push(d)}};
g.Wi=function(a){var b=this.S();var c=a.S();c=b<c?-1:b>c?1:0;b=this.actions.length;0==c&&(c=b<a.actions.length?-1:b>a.actions.length?1:0);if(0==c)for(;b--;){c=PC(this.actions[b].rc());var d=PC(a.actions[b].rc());c=c<d?-1:c>d?1:0}0==c&&(b=this.pb(),a=a.pb(),c=b<a?-1:b>a?1:0);return c};function cCa(a){return a.isEnabled()};function dCa(a,b){a=a?a.ba():"";b=b?b.ba():"";return Bb(a,b)};function U7(a,b){this.g=a;this.index=b;this.lb=!1;this.title="Add/Remove "+S7.u().g;this.Ba=null;this.state="ready"}function eCa(a){var b=S7.u().g||"Entry";return"ready"!==a.state?(a.Ba="Command not in ready state",!1):a.g?a.g.type?a.g.pb()?!0:(a.Ba=b+" does not contain a filter",!1):(a.Ba=b+" type not set",!1):(a.Ba=b+" not provided",!1)}U7.prototype.add=function(){this.g&&fCa(S7.u(),this.g,this.index)};U7.prototype.remove=function(){this.g&&gCa(S7.u(),this.g)};function V7(a,b){U7.call(this,a,b);a&&(this.title="Add "+S7.u().g+' "'+a.S()+'"')}w(V7,U7);V7.prototype.Fa=function(){return eCa(this)?(this.state="executing",this.add(),this.state="success",!0):!1};V7.prototype.Cb=function(){this.state="reverting";this.remove();this.state="ready";return!0};function W7(a,b){U7.call(this,a,b);a&&(this.title="Remove "+S7.u().g+' "'+a.S()+'"')}w(W7,U7);W7.prototype.Fa=function(){return eCa(this)?(this.state="executing",this.remove(),this.state="success",!0):!1};W7.prototype.Cb=function(){this.state="reverting";this.add();this.state="ready";return!0};function hCa(a,b){var c=S7.u(),d=[];a.forEach(function(a){var e=fJ(a);if(e){if(!b){var h=PJ.ld(a.T());if(h){var k=h.ff();var l="filterable"}}k||(k=a.T(),l="exact");k=mB(c.s,void 0,void 0,{active:a.isEnabled()?"true":"false",title:a.S(),description:a.qb()||"",type:k,typeHint:l});l=Z("filter",k);OC(e,l,"ogc","http://www.opengis.net/ogc");var m=Z("actions",k);a.actions.forEach(function(a){m.appendChild(a.rc())});d.push(k)}});return d}
function X7(a){var b=a.S(),c=a.clone();c.ga($b());c.Ta(b+" Copy");a=S7.u();c=new V7(c);c.title="Copy "+a.g+' "'+b+'"';return c}function iCa(a){var b;a&&(a=PJ.ld(a))&&(b=a.Fe());return b||[]}function jCa(a,b){if(b&&(!a||0!==b.Wi(a))){var c=[],d=S7.u(),e=Y7(d,b.T()),f=b.S();if(a){var h=jb(e,function(b){return b==a});f=a.S();c.push(new W7(a,h))}c.push(new V7(b,h));1<c.length?(b=new oF,b.Zb(c),b.title="Update "+d.g+' "'+f+'"',gF(EF,b)):gF(EF,c[0])}}
function Z7(a){var b=Y7(S7.u(),a.T());b=jb(b,function(b){return b==a});0>b&&(b=void 0);return new W7(a,b)};function $7(){NU.call(this);var a=S7.u(),b=a.g+"s";this.description="Saves the current "+b;this.priority=90;this.g=a.A;this.title=b}w($7,NU);var a8=E.V("os.state.v4.FilterAction"),b8={};
$7.prototype.load=function(a,b){a=OU(a);if(a instanceof Element)try{var c=S7.u(),d=zg(a);if(d&&0<d.length){a=0;for(var e=d.length;a<e;a++){var f=d[a],h=kCa(f);if(h&&1==h.length){var k=h[0];k.ga(MU(b,k.D()));k.Sb(lCa(f,b));k.l=!0;k.eb(!0);fCa(c,k);b in b8||(b8[b]=[]);b8[b].push(k)}else E.error(a8,"There was an error loading a filter action for state file "+b+". Multiple entries were parsed from a single node.")}}}catch(l){E.error(a8,"There was an error loading a filter action for state file "+b,l)}else E.error(a8,
"Unable to load state content!")};function lCa(a,b){a=String(a.getAttribute("type"));return MU(b,a)}$7.prototype.remove=function(a){if(a in b8){for(var b=S7.u(),c=b8[a],d=0,e=c.length;d<e;d++)gCa(b,c[d]);delete b8[a]}};
$7.prototype.Yc=function(a,b){try{for(var c=S7.u(),d=GL(EL.u()),e=[],f=0,h=d.length;f<h;f++){var k=Y7(c,d[f].D());e=e.concat(k.filter(cCa))}var l=hCa(e,!0);if(l)for(f=0;f<l.length;f++)b.appendChild(l[f]);b.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:ogc","http://www.opengis.net/ogc");this.Kd(a,b)}catch(m){LU(this,m.message||"Unspecified error.")}};function c8(){this.g=null}c8.prototype.Bb=function(a){a instanceof ArrayBuffer&&(a=Ow(a)||null);a instanceof Document?this.g=a:"string"==typeof a&&(this.g=VA(a))};c8.prototype.oc=function(){this.g=null};c8.prototype.vd=function(){return!!this.g};c8.prototype.Wc=function(){if(this.g){var a=this.g,b=S7.u(),c=[];if((a=Ag(a).querySelectorAll(b.s))&&0<a.length)for(b=0;b<a.length;b++){var d=kCa(a[b]);d&&0<d.length&&(c=c.concat(d))}this.g=null;return c}return null};
function kCa(a){var b=S7.u(),c=[],d=[],e=null,f=a.getAttribute("title")||"",h=a.getAttribute("description")||"",k=a.getAttribute("type")||"",l;"exact"==a.getAttribute("typeHint")?l=[k]:l=QJ(k);if(k=a.querySelector("filter"))e=WA(Ag(k)),e=e.replace(/xmlns=("|')[^"']*("|')/g,""),e=e.replace(/ogc:/g,""),e=e.replace(/>\s+</g,"><");if((a=a.querySelector("actions"))&&a.childNodes.length)for(k=zg(a),a=0;a<k.length;a++){var m=void 0;var n=b,p=k[a],r=null;if(p){var u=p.localName.toLowerCase();for(m in n.l){var v=
n.l[m];if(v.j.toLowerCase()==u){r=v.clone();r.ad(p);break}}}(m=r)&&c.push(m)}if(e&&0<l.length)for(b=b.zj(),b.Ta(f),b.Sb(l[0]),b.fb(h),b.Zf(e),b.eb(!0),b.actions=c,d.push(b),a=1;a<l.length;a++)c=b.clone(),c.ga($b()),c.Sb(l[a]),d.push(c);return d};W.directive("filteractionimport",[function(){var a=iS();a.controller=d8;return a}]);function d8(a,b,c){jS.call(this,a,b,c);this.l=S7.u().g;this.showMatch=!1}w(d8,nS);d8.$inject=["$scope","$element","$sce"];d8.prototype.iy=function(){return new c8};d8.prototype.gu=function(a){var b="Filter: "+LJ(fJ(a),1E3);a instanceof R7&&0<a.actions.length&&(a=a.actions.map(function(a){return a.ba()}).join(", ")||"None",b+="\nActions: "+a);return b};
d8.prototype.finish=function(){var a=S7.u(),b=[];this.ao();for(var c in this.found)for(var d=this.found[c].filterModels,e=0;e<d.length;e++){var f=d[e].filter;f&&b.push(f)}c=zt.u();0<b.length?(a=a.g+(1==b.length?"":"s"),e=b.map(function(a){return new V7(a)}),1<e.length?(d=new oF,d.Zb(e),d.title="Import "+b.length+" "+a):d=e[0],gF(EF,d),b="Successfully imported <b>"+b.length+"</b> "+a+".",At(c,b,ts)):(b="No "+a.g+"s were imported!",At(c,b,ss));KE(this.element)};d8.prototype.finish=d8.prototype.finish;
d8.prototype.Io=function(){return"fa-magic"};d8.prototype.getFilterIcon=d8.prototype.Io;function e8(){qS.call(this);this.label="Import "+S7.u().g+"s"}w(e8,qS);e8.prototype.l=function(){return'<filteractionimport filter-data="filterData" layer-id="layerId"></filteractionimport>'};Fw("text/xml; subtype=FEATUREACTIONS",dS(/^featureActions$/,/\/state\//i),0,"text/xml");var f8=void 0;function mCa(a){this.visible=!1;a&&1<=a.length&&(this.visible=!0)}function nCa(a){this.visible=!1;a&&1==a.length&&(this.visible=!0)}function oCa(a){this.visible=!1;a&&1<a.length&&(this.visible=!0)}function pCa(a){this.visible=!1;if(a&&1==a.length)"on"==a[0].getState()?this.visible=!1:this.visible=!0;else if(a&&1<a.length)for(var b=0;b<a.length;b++)if("off"==a[b].getState()){this.visible=!0;break}}
function qCa(a){this.visible=!1;if(a&&1==a.length)"off"==a[0].getState()?this.visible=!1:this.visible=!0;else if(a&&1<a.length)for(var b=0;b<a.length;b++)if("on"==a[b].getState()){this.visible=!0;break}}function rCa(a){var b=a.getContext();if(b&&1==b.length){var c=b[0].gb();c&&(b=X7(c),gF(EF,b))}else if(b&&1<b.length){a=[];for(var d=0;d<b.length;d++)if(c=b[d].gb())c=X7(c),a.push(c);a.length&&(b=new iO,b.Zb(a),b.title="Copy feature action nodes"+(1<a.length?"s":""),gF(hF.u(),b))}}
function sCa(a){(a=a.getContext())&&1==a.length&&(a=a[0].gb())&&tCa(a.T(),a)}function uCa(a){if((a=a.getContext())&&1<=a.length){for(var b=[],c=[],d,e=0;e<a.length;e++){var f=a[e].gb();f&&(b.push(f),c.push(f),d=vCa(f.T()))}b.length&&c.length&&wCa(b,c,d,g8)}}function xCa(a){(a=a.getContext())&&1==a.length&&(a=a[0].gb())&&(a=Z7(a),gF(EF,a))}
function yCa(a){var b=a.getContext();if(b&&1<b.length){a=[];for(var c=0;c<b.length;c++){var d=b[c].gb();d&&(d=Z7(d),a.push(d))}a.length&&(b=new iO,b.Zb(a.sort(function(a,b){return a.index>b.index?1:a.index<b.index?-1:0})),b.title="Remove feature action nodes"+(1<a.length?"s":""),gF(hF.u(),b))}}function zCa(a){if((a=a.getContext())&&1<=a.length)for(var b=0;b<a.length;b++)a[b].Ga("on")}function ACa(a){if((a=a.getContext())&&1<=a.length)for(var b=0;b<a.length;b++)a[b].Ga("off")};function h8(a,b){rK.call(this,a,b);this.G=S7.u().pi().sort(dCa);this.s=-1;this.actions=[];this.availableActions=[];if((b=this.g)&&b.actions){b=b.actions.slice();for(var c=0;c<b.length;c++)this.actions.push({id:b[c].D(),action:b[c]})}this.element.find(".action-container").sortable({items:".filter-action-row",handle:".handle",axis:"y",containment:"parent",snap:!0,tolerance:"pointer",start:this.N.bind(this),stop:this.I.bind(this)});i8(this);0==this.actions.length&&this.et();a.$on("$destroy",t(this.o,
this));V.H("dataSourceRemoved",this.B,!1,this)}w(h8,rK);h8.$inject=["$scope","$element"];h8.prototype.et=function(){if(0<this.availableActions.length){var a=S7.u(),b=this.availableActions[0].id;if(a=T7(a,b))this.actions.push({id:b,action:a}),i8(this)}};h8.prototype.addAction=h8.prototype.et;h8.prototype.vM=function(a){-1<a&&a<this.actions.length&&(this.actions.splice(a,1),i8(this),C.dispatchEvent("action:update"))};h8.prototype.removeAction=h8.prototype.vM;
h8.prototype.FN=function(a){if((a=this.actions[a])&&a.id!=a.action.D()){var b=T7(S7.u(),a.id);b&&(a.action=b,i8(this));C.dispatchEvent("action:update")}};h8.prototype.updateAction=h8.prototype.FN;function i8(a){for(var b=a.availableActions.length=0;b<a.G.length;b++){var c=a.G[b];c.unique&&a.actions.some(function(a){return a.id==c.D()})||a.availableActions.push({id:c.D(),label:c.ba()})}}
h8.prototype.mC=function(a){if(this.g&&a){var b=this.g.T();if(!IE("importActionConfig")){var c=a.l;c&&FE({id:"importActionConfig",label:a.label,icon:"fa fa-gear",x:"center",y:"center",width:350,"min-width":200,"max-width":2E3,height:"auto",modal:!0,"show-close":!1,"no-scroll":!0},"<confirm><"+c+"></"+c+"></confirm>",void 0,void 0,void 0,{action:a,type:b,yesText:"OK",yesIcon:"fa fa-check",yesButtonClass:"btn-primary",noText:"Cancel",noIcon:"fa fa-ban",noButtonClass:"btn-secondary"})}}};
h8.prototype.configAction=h8.prototype.mC;h8.prototype.B=function(a){a&&a.source&&this.g&&this.g.T()==a.source.D()&&this.cancel()};h8.prototype.o=function(){h8.C.o.call(this);V.M("dataSourceRemoved",this.B,!1,this)};h8.prototype.cancel=function(){BCa();h8.C.cancel.call(this)};h8.prototype.cancel=h8.prototype.cancel;h8.prototype.finish=function(){BCa();this.g.actions=this.actions.map(function(a){return a.action});h8.C.finish.call(this)};h8.prototype.finish=h8.prototype.finish;
h8.prototype.fm=function(){return 0==this.actions.length?!0:h8.C.fm.call(this)};h8.prototype.isInvalid=h8.prototype.fm;h8.prototype.QC=function(){return 0<this.availableActions.length?"Add a new action":"All available actions have been added"};h8.prototype.getAddActionTooltip=h8.prototype.QC;
h8.prototype.N=function(a,b){(a=this.element.find(".action-container").sortable("instance"))&&a.containment&&(a.containment[3]+=3);b.helper&&b.placeholder&&b.placeholder.height(b.helper.height());b.item&&(b.item.find(".handle").addClass("moving"),this.s=b.item.index())};h8.prototype.I=function(a,b){b.item&&(b.item.find(".handle").removeClass("moving"),a=b.item.index(),this.s!=a&&(Hb(this.actions,this.s,a),X(this.scope)))};function BCa(){KE(IE("importActionConfig"))};W.directive("editfeatureaction",[function(){var a=qK();a.templateUrl="v1542394219/views/plugin/featureaction/editfeatureaction.html";a.controller=j8;a.controllerAs="ctrl";return a}]);function j8(a,b){h8.call(this,a,b);this.j=this.l=null;C.H("action:update",this.ss,!1,this)}w(j8,h8);j8.$inject=["$scope","$element"];j8.prototype.o=function(){j8.C.o.call(this);C.M("action:update",this.ss,!1,this)};
j8.prototype.ss=function(){this.element.find(".labelCanvas").remove();this.element.find(".styleCanvas").remove();this.element.find(".soundPreview").remove();this.l=this.j=null;for(var a=0;a<this.actions.length;a++){var b=this.actions[a].action;if("featureStyleAction"==b.id){var c=b;b=new ek;var d;this.l=document.createElement("canvas");this.l.setAttribute("class","styleCanvas");this.l.height=27;this.l.width=150;this.element.find(".js-filter-action__controls:has(option[selected='selected'][value='string:featureStyleAction'])").append(this.l);
if(this.l){var e=this.l.getContext("2d");e.clearRect(0,0,this.l.clientWidth,this.l.clientHeight);e=UK(e);c=Gs(c.g);if(null!=c){(d=OG[c.shape||SB])&&d.config&&d.config.image&&eH(d.config,c);if(QG.test(c.shape)){c.stroke.width=3;var f=TG[c.shape];d=jL([50,16],30,f);f&&(f=Gs(c.centerShape?OG[c.centerShape]:OG.Point),f.config&&oH(f.config)?gH(f.config,1):gH(f.config,2),eH(f.config,c))}else gH(c,10),d=new Jk([50,16]),oH(c)&&(c.image.anchor=[.5,.5],gH(c,2),aH(c,c.image.fill.color));b.sb(d);c=rH(nH.u(),
c);null!=c&&(d=c.Ua(),f=d.sf(),2>f?(0==f&&d.load(),d.Ji(CCa,d)):e.jh(b,c))}}}else"featureLabelAction"==b.id?(c=b,b=new ek,this.j=document.createElement("canvas"),this.j.setAttribute("class","labelCanvas"),this.j.height=24,this.j.width=150,this.element.find(".js-filter-action__controls:has(option[selected='selected'][value='string:featureLabelAction'])").append(this.j),this.j&&(e=this.j.getContext("2d"),e.clearRect(0,0,this.j.clientWidth,this.j.clientHeight),e=UK(e),d=Gs(c.g),null!=d&&(c=ZG(d.color||
"rgba(255,255,255,1)"),d=Gs(d.labels),d=FM(d),null!=d&&0<d.length&&(f=b.get("_style")||{},d[0].column="COLUMN",f.labels=d,f.labelColor=c,f.labelSize=14,b.set("_style",f,!0),b.set("showLabels",!0),b.set(d[0].column,"VALUE"),b.sb(new Jk([20,10])),jH(b),c=b.Qb(),null!=c&&1<c.length&&e.jh(b,c[1]))))):"featureSoundAction"==b.id&&(b=Gs(b.oe),this.element.find(".js-filter-action__controls:has(option[selected='selected'][value='string:featureSoundAction'])").append('<span class="soundPreview"><i class="fa fa-fw fa-music"></i> '+
b.sound+"</span>"))}};j8.prototype.showActionPreview=j8.prototype.ss;function CCa(){this.Wk(CCa,this);3>this.sf()&&C.dispatchEvent("action:update")};function vCa(a){var b=S7.u().g+"s";a&&(a=T.u().W(a),P(a,"os.layer.ILayer")&&(a=a.S())&&(b=a+" "+b));return b}function DCa(a){var b;if(a){var c=XI.u().O(a);c&&(b=gia(c))}return b||iCa(a)}
function tCa(a,b){var c=b?b.clone():void 0,d=DCa(a);b=jCa.bind(null,b);var e=S7.u(),f=e.g;c?f="Edit "+f:(c=e.zj(),c.eb(!0),c.Sb(a),f="Create "+f);FE({id:"editfeatureaction",icon:"fa fa-magic",label:f,x:"center",y:"center","show-close":!0,"no-scroll":!1,"min-width":400,"min-height":500,"max-width":1E3,"max-height":1E3,modal:!0,width:850,height:600},"editfeatureaction",void 0,void 0,void 0,{entry:c,type:a,columns:d,callback:b})}
function ECa(){var a=T.u().W(this.entryType),b=!0;a&&a.Sa()&&void 0!==a.Sa().featureActionRefresh&&(b=a.Sa().featureActionRefresh);return b};function k8(){this.l=this.label=this.id="";this.unique=!0;this.j="AbstractImportAction"}k8.prototype.D=function(){return this.id};k8.prototype.getId=k8.prototype.D;k8.prototype.ba=function(){return this.label};k8.prototype.getLabel=k8.prototype.ba;k8.prototype.XC=function(){return this.l};k8.prototype.getConfigUI=k8.prototype.XC;k8.prototype.bF=function(){return this.unique};k8.prototype.isUnique=k8.prototype.bF;k8.prototype.clone=function(){var a=new this.constructor;a.restore(this.sa());return a};
k8.prototype.sa=function(a){a=a||{};a.id=this.id;return a};k8.prototype.rc=function(){return mB(this.j)};function l8(){k8.call(this);this.id="featureLabelAction";this.label="Set Label";this.l="featurelabelaction";this.j="featureLabelAction";this.g=Gs(m8)}w(l8,k8);var m8={color:"rgba(255,255,255,1)",size:14,labels:[tH()],customName:"",customValue:""};g=l8.prototype;g.reset=function(a,b){for(a=0;a<b.length;a++){var c=b[a];if(c){var d=c.get("_featureActionOriginalConfig");c.set("_style",d,!0)}}lH(b);(a=LB(b[0]))&&CH(a,b)};
g.Fa=function(a){var b=this.g.customName||void 0,c=this.g.customValue||void 0,d=this.g.labels;d=FM(d);for(var e=ZG(this.g.color||"rgba(255,255,255,1)"),f=parseInt(this.g.size,10)||14,h=0;h<a.length;h++){var k=a[h];if(k){if(0<d.length){var l=k.get("_style"),m=Gs(l)||{};m.temporary=!0;if(q(m))for(var n=0;n<m.length;n++)m[n].labels=d,m[n].labelColor=e,m[n].labelSize=f;else m.labels=d,m.labelColor=e,m.labelSize=f;k.set("_style",m,!0);Dwa(k);null==l||l.temporary||null!=k.get("_featureActionOriginalConfig")||
k.set("_featureActionOriginalConfig",l,!0)}b&&c&&(l=k.get(b),k.set(b,c),C.dispatchEvent(new YA("feature:valueChange",k.id,c,l)))}}b&&c&&(c=MB(a[0]))&&(nM(c,b,void 0,!0,!0),c.dispatchEvent(new U("data")));lH(a);(b=LB(a[0]))&&CH(b,a);GM()};g.sa=function(a){a=l8.C.sa.call(this,a);a.labelConfig=this.g;return a};g.restore=function(a){if(a=a.labelConfig)this.g={},zs(a,this.g)};
g.rc=function(){var a=l8.C.rc.call(this),b=this.g.color;b&&Z("color",a,xv(b));b=this.g.size;null!=b&&Z("size",a,String(b));b=this.g.customName;var c=this.g.customValue;b&&c&&(Z("customName",a,b),Z("customValue",a,c));b=this.g.labels;b=FM(b);if(0<b.length){c=Z("labels",a);for(var d=0;d<b.length;d++){var e=b[d];Z("label",c,void 0,{column:e.column,showColumn:String(e.showColumn)})}}return a};
g.ad=function(a){var b=Gs(m8);if(a){var c=RC(a,"color");wv(c)&&(b.color=ZG(c));c=parseFloat(RC(a,"size"));isNaN(c)||(b.size=c);c=RC(a,"customName");var d=RC(a,"customValue");c&&d&&(b.customName=c,b.customValue=d);if((a=a.querySelectorAll("label"))&&0<a.length){c=[];for(d=0;d<a.length;d++){var e=a[d],f=e.getAttribute("column");e="true"==e.getAttribute("showColumn");f&&c.push({column:f,showColumn:e})}0<c.length&&(b.labels=c)}}this.g=b};function S7(){A.call(this);this.g="Import Action";this.s="importAction";this.A="importActions";this.j={};this.l={};this.log=FCa;HG.u().Ra("load",this.load,!1,this);C.H("importAction:addEntry",this.Iv,!1,this)}w(S7,A);wa(S7);var FCa=E.V("os.im.action.ImportActionManager");g=S7.prototype;g.J=function(){S7.C.J.call(this);C.M("importAction:addEntry",this.Iv,!1,this)};function T7(a,b,c){var d=null;b&&a.l[b]&&(d=a.l[b].clone(),c&&d.restore(c));return d}g.pi=function(){return mc(this.l)};
function n8(a,b){b.id?(b.id in a.l&&E.ib(a.log,'The import action with id "'+b.id+'" is being overridden!'),a.l[b.id]=b):E.error(a.log,'Unable to register import action without an identifier! Action label is "'+b.ba()+'".')}g.zj=function(){return new R7};function Y7(a,b){if(b)b=a.j[b]?a.j[b].slice():[];else{b=[];for(var c in a.j)b=b.concat(a.j[c])}return b}
function fCa(a,b,c){if(b&&b.type&&b.pb()){var d=-1;b.type in a.j?(d=Y7(a,b.type),d=jb(d,function(a){return a.D()==b.D()})):a.j[b.type]=[];var e=a.j[b.type];-1<d?e[d]=b:-1<c&&c<e.length?nb(e,b,c):e.push(b);a.dispatchEvent("importAction:refresh");a.save()}}g.Hl=function(){return null};g.Ne=function(a,b,c){if((b=b||this.Hl(a))&&0<b.length){var d=this.j[a];if(d&&0<d.length)for(var e=0;e<d.length;e++)d[e].isEnabled()?d[e].Ne(a,b):c&&bCa(d[e],a,b)}};
function gCa(a,b){if(b&&b.type in a.j){var c=b.type,d=a.Hl(b.type);if(d&&0<d.length){var e=a.j[c];if(e&&0<e.length)for(var f=0;f<e.length;f++)bCa(e[f],c,d)}c=a.j[b.type];qb(c,b);0==c.length&&delete a.j[b.type];a.Ne(b.type);a.dispatchEvent("importAction:refresh");a.save()}}g.load=function(){var a=O.get("os.importActions",{}),b;for(b in a){var c=[],d=a[b];if(d)for(var e=0;e<d.length;e++){var f=this.zj();f.restore(d[e]);c.push(f)}this.j[b]=c}this.wx();this.dispatchEvent("importAction:refresh")};
g.wx=va;g.save=function(){var a={},b;for(b in this.j){var c=this.j[b];if(0<c.length){for(var d=[],e=0;e<c.length;e++){var f=c[e];f.l||d.push(f.sa())}a[b]=d}}O.set("os.importActions",a)};
g.Iv=function(a){var b=a.g;if(b&&!(b instanceof R7))try{var c=this.zj();c.restore(b.sa());c instanceof R7?b=c:(E.error(this.log,"Failed adding "+this.g.toLowerCase()+". Unable to determine entry type."),b=null)}catch(d){E.error(this.log,"Failed adding "+this.g.toLowerCase()+":",d),b=null}b?(c=new V7(b),gF(EF,c),a.Fa&&(a=this.Hl(b.T()),b.Ne(a))):At(Ct,"Failed adding "+this.g.toLowerCase()+". See the log for details.",rs)};function GCa(){R7.call(this);this.Ta("New Feature Action");this.B=hga}w(GCa,R7);function o8(){S7.call(this);this.g="Feature Action";this.log=HCa;this.A="featureActions";this.s="featureAction";this.o={}}w(o8,S7);wa(o8);Cc(S7,{u:function(){return o8.u()}});var HCa=E.V("plugin.im.action.feature.Manager");g=o8.prototype;g.J=function(){o8.C.J.call(this);var a=EL.u();a&&(a.M("dataSourceAdded",this.Uy,!1,this),a.M("dataSourceRemoved",this.Vy,!1,this));for(var b in this.o)rh(this.o[b]);this.o={}};g.zj=function(){return new GCa};g.Hl=function(a){return(a=EL.u().O(a))?a.Oa():null};
g.wx=function(){var a=EL.u();a.H("dataSourceAdded",this.Uy,!1,this);a.H("dataSourceRemoved",this.Vy,!1,this);a=GL(a);for(var b=0,c=a.length;b<c;b++)ICa(this,a[b])};function ICa(a,b){if(P(b,"os.source.IImportSource")){var c=b.D();c&&!a.o[c]&&(a.o[c]=I(b,"propertychange",a.EL,a),a.Ne(c))}}g.Uy=function(a){a&&a.source&&ICa(this,a.source)};g.Vy=function(a){a&&a.source&&(a=a.source.D(),a in this.o&&(rh(this.o[a]),delete this.o[a]))};
g.EL=function(a){try{var b=a.l}catch(d){return}var c=a.target;c&&"preprocessFeatures"===b&&(a=a.o)&&0<a.length&&this.Ne(c.D(),a)};function p8(){k8.call(this);this.id="featureSoundAction";this.label="Set Sound";this.j="featureSoundAction";this.l="featureactionsoundconfig";this.oe=Gs(q8);this.sounds=kua();var a=this.sounds.indexOf("Default");this.oe.sound=-1<a?this.sounds[a]:this.sounds[0]||""}w(p8,k8);var q8={sound:"",playDelay:30};g=p8.prototype;g.reset=va;g.Fa=function(){PZ.u().play(this.oe.sound,1E3*this.oe.playDelay)};g.sa=function(a){a=p8.C.sa.call(this,a);a.soundConfig=this.oe;return a};
g.restore=function(a){if(a=a.soundConfig)this.oe={},zs(a,this.oe)};g.rc=function(){var a=p8.C.rc.call(this),b=this.oe.sound,c=this.oe.playDelay;null!=b&&Z("sound",a,String(b));null!=c&&Z("playDelay",a,String(c));return a};g.ad=function(a){var b=Gs(q8);if(a){var c=RC(a,"playDelay");b.sound=String(RC(a,"sound"));b.playDelay=Number(c);this.oe=b}};function r8(){k8.call(this);this.id="featureStyleAction";this.label="Set Style";this.l="featureactionstyleconfig";this.j="featureStyleAction";this.o=Ca(this);this.g=Gs($B)}w(r8,k8);P(r8,"os.legend.ILegendRenderer");g=r8.prototype;g.reset=function(a,b){for(a=0;a<b.length;a++){var c=b[a];if(c){c.set("_featureStyleAction",void 0);c.set("shape",void 0,!0);c.set("centerShape",void 0,!0);var d=c.get("_featureActionOriginalConfig");c.set("_style",d,!0)}}lH(b);(a=LB(b[0]))&&CH(a,b)};
g.Fa=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){var d=c.get("_style"),e=Gs(d)||{};e.temporary=!0;if(q(e))for(var f=0;f<e.length;f++)e[f].zIndex=10,eH(this.g,e[f]);else e.zIndex=10,eH(this.g,e);c.set("_style",e,!0);c.set("_featureStyleAction",this.o,!0);null==d||d.temporary||null!=c.get("_featureActionOriginalConfig")||c.set("_featureActionOriginalConfig",d,!0);(d=this.g.shape)&&d!=SB?c.set("shape",d,!0):c.set("shape",void 0,!0);(d=this.g.centerShape)&&"Point"!=d?c.set("centerShape",
d,!0):c.set("centerShape",void 0,!0)}}lH(a);(b=LB(a[0]))&&CH(b,a)};g.sa=function(a){a=r8.C.sa.call(this,a);a.styleConfig=this.g;return a};g.restore=function(a){if(a=a.styleConfig)this.g={},zs(a,this.g)};
g.rc=function(){var a=r8.C.rc.call(this),b=QB(this.g,!0);b&&(Z("color",a,xv(b)),Z("opacity",a,String(3<b.length?b[3]:1)));b=fH(this.g);null!=b&&Z("size",a,String(b));b=this.g.shape||SB;Z("shape",a,String(b));"Icon"==b&&(b=bH(this.g)||xM(),Z("iconSrc",a,b.path));b=this.g.centerShape||"Point";Z("centerShape",a,String(b));"Icon"==b&&(b=bH(this.g)||xM(),Z("iconSrc",a,b.path));Z("showRotation",a,String(this.g.showRotation||!1));Z("rotationColumn",a,String(this.g.rotationColumn||!1));return a};
g.ad=function(a){var b=Gs($B);if(a){var c=RC(a,"color");if(wv(c)){var d=yv(c);d&&(c=parseFloat(RC(a,"opacity")),d[3]=isNaN(c)?1:Je(c,0,1),c=ZG(d));aH(b,c)}d=parseFloat(RC(a,"size"));isNaN(d)||gH(b,d);if(d=RC(a,"shape"))b.shape=d,(c=RC(a,"centerShape"))&&(b.centerShape=c),("Icon"==d||TG[d]&&"Icon"===c)&&cH(b,{path:RC(a,"iconSrc")});b.showRotation=!!RC(a,"showRotation");b.rotationColumn=RC(a,"rotationColumn")}this.g=b};
g.yf=function(a,b,c){if(b&&0<b.length&&b.some(JCa,this)&&c instanceof R7){b=Gs(this.g);var d=b.shape||SB,e=OG[d];e&&e.config&&e.config.image&&(eH(e.config,b),"Icon"==d?Bs(b,["image","scale"],a.fontSize/32):Bs(b,["image","radius"],Math.round(a.fontSize/3)));d=a.showVector?10:0;wL(b,a,c.S(),d)}};function JCa(a){return a.la._featureStyleAction===this.o};function KCa(a,b){if(b.showFeatureActions){var c=a.O();if(c&&uL(c)){a=Y7(o8.u(),c.D()).filter(LCa);var d=c.fe();for(c=0;c<a.length;c++){var e=a[c];e.actions.filter(MCa).forEach(function(a){a.yf(b,d,e)})}}}}function LCa(a){return a.actions.some(MCa)}function MCa(a){return P(a,"os.legend.ILegendRenderer")};function NCa(a){this.visible=!1;var b=S7.u();b&&!uc(b.l)&&a&&1==a.length&&(a=IA(a).filter(OP))&&1==a.length&&"Reference Layers"!=a[0].Qc()&&(a=a[0].O(),this.visible=P(a,"os.source.IImportSource"))}
function OCa(a){if((a=IA(a.getContext()).filter(OP))&&1==a.length&&"Reference Layers"!=a[0].Qc()){a=a[0].D();var b="Feature Actions",c=("featureActions-"+a).replace(/\s/g,"").replace(/[^\w]/g,"-");if(IE(c))HE(c);else{var d=nw(a);d&&(b+=" for "+d);FE({id:c,label:b,key:c,icon:"fa fa-magic",x:"center",y:"center",width:500,height:500,"show-close":!0,"no-scroll":!0,"min-width":300,"max-width":2E3,"min-height":400,"max-height":2E3},"<featureactions></featureactions>",void 0,void 0,void 0,{type:a,helpTitle:"Feature Actions",
helpText:"Feature Actions perform tasks on data that matches a filter, as it is loaded into the application. For example, you can change the style of features if they match certain criteria.<br><br>Actions are executed in order (top-down), and data matching multiple filters will override previous actions. Actions can be reordered by dragging them in the list."})}}else At(Ct,"Unexpected layer selection. Please select a single layer and try again.",ss)};W.directive("filteractionnodeui",[function(){var a=nta();a.controller=s8;a.template='<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-click="nodeUi.copy()"><i class="fa fa-copy fa-fw c-glyph" title="Copy the action"></i></span><span ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit the action"></i></span><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the action"></i></span></span>';return a}]);
function s8(a,b){eF.call(this,a,b)}w(s8,QY);s8.$inject=["$scope","$element"];s8.prototype.copy=function(){var a=this.scope.item.gb();a&&(this.scope.$emit("importAction:copyEntry",a),Q(R.u(),"importAction.copy",1))};s8.prototype.copy=s8.prototype.copy;s8.prototype.Pc=function(){var a=this.scope.item.gb();a&&(this.scope.$emit("importAction:editEntry",a),Q(R.u(),"importAction.edit",1))};s8.prototype.edit=s8.prototype.Pc;
s8.prototype.remove=function(){var a=this.scope.item.gb();a&&(this.scope.$emit("importAction:removeEntry",a),Q(R.u(),"importAction.remove",1))};s8.prototype.remove=s8.prototype.remove;function t8(a){PY.call(this,a);this.bb=!1;this.Ca="If the action should automatically execute against loaded data";this.j="<filteractionnodeui></filteractionnodeui>"}w(t8,PY);t8.prototype.Co=function(){var a=t8.C.Co.call(this);this.g&&this.g.actions&&(a+="\nActions: "+this.g.actions.map(function(a){return a.ba()}).join(", "));return a};t8.prototype.Ga=function(a){t8.C.Ga.call(this,a);S7.u().save()};
function PCa(a){return a?a.map(function(a){return a?new t8(a):void 0}).filter(function(a){return!!a}):[]}function u8(a){return a?a.map(function(a){return a.gb()}).filter(function(a){return!!a}):[]};var g8="selected";W.directive("filteractionexport",[function(){return{restrict:"E",templateUrl:"v1542394219/views/im/action/filteractionexport.html",controller:v8,controllerAs:"ctrl"}}]);function v8(a,b){y.call(this);this.scope=a;this.element=b;this.exportType=a.exportType||"active";this.fileName=a.fileName;this.errorMsg=void 0;a.$emit("window.ready");a.$on("$destroy",this.dispose.bind(this));this.Wb()}w(v8,y);v8.$inject=["$scope","$element"];
v8.prototype.J=function(){v8.C.J.call(this);this.element=this.scope=null};v8.prototype.cancel=function(){KE(this.element)};v8.prototype.cancel=v8.prototype.cancel;
v8.prototype.Wb=function(){this.errorMsg=void 0;switch(this.exportType){case "active":this.scope.entries.some(cCa)||(this.errorMsg="No actions are currently active.");break;case "all":0==this.scope.entries.length&&(this.errorMsg="No actions are available to export.");break;case g8:this.scope.selected&&0!=this.scope.selected.length||(this.errorMsg="No actions are currently selected.")}};v8.prototype.validate=v8.prototype.Wb;
v8.prototype.save=function(){switch(this.exportType){case "active":var a=this.scope.entries.filter(function(a){return a.isEnabled()});break;case "all":a=this.scope.entries;break;case g8:a=this.scope.selected}a&&QCa(this.fileName+".xml",a);KE(this.element)};v8.prototype.save=v8.prototype.save;
function wCa(a,b,c,d){a={entries:a,selected:b,fileName:c,exportType:d};b={id:"filteractionexport",label:"Export "+S7.u().g+"s",icon:"fa fa-download",x:"center",y:"center",width:"400",height:"auto",modal:"true","show-close":"true"};FE(b,"<filteractionexport></filteractionexport>",void 0,void 0,void 0,a)}
function QCa(a,b){if(0<b.length){var c=S7.u();c=LC(c.A,"http://www.bit-sys.com/state/v4");if(b=hCa(b,!1))for(var d=0;d<b.length;d++)c.appendChild(b[d]);fS(a,PC(c),"text/xml")}else At(Ct,"No actions to export.",ss)};function w8(a,b){y.call(this);this.scope=a;this.element=b;this.entryType=this.scope.type;this.entries=[];this.selected=null;S7.u().H("importAction:refresh",this.refresh,!1,this);a.$on("importAction:copyEntry",this.CG.bind(this));a.$on("importAction:editEntry",this.YG.bind(this));a.$on("importAction:removeEntry",this.zI.bind(this));a.$on("slickgrid.orderChange",this.mI.bind(this));a.$on("$destroy",this.dispose.bind(this));this.refresh()}w(w8,y);w8.$inject=["$scope","$element"];
w8.prototype.J=function(){w8.C.J.call(this);S7.u().M("importAction:refresh",this.refresh,!1,this);this.element=this.scope=null};w8.prototype.refresh=function(){var a=Y7(S7.u(),this.entryType);this.entries=PCa(a);X(this.scope)};w8.prototype.apply=function(){RCa(this)};w8.prototype.apply=w8.prototype.apply;w8.prototype.close=function(){KE(this.element)};w8.prototype.close=w8.prototype.close;
function RCa(a){if(a.entries){var b=u8(a.entries),c=S7.u();if(a=a.entryType)c.j[a]=b,c.dispatchEvent("importAction:refresh"),c.save()}}w8.prototype.getColumns=function(){return iCa(this.entryType)};w8.prototype.g=function(){return S7.u().g+"s"};w8.prototype.editEntry=w8.prototype.Hf;g=w8.prototype;g.CG=function(a,b){a.stopPropagation();b&&(a=X7(b),gF(hF.u(),a))};g.YG=function(a,b){a.stopPropagation();b&&this.Hf(b)};g.mI=function(a){a.stopPropagation();RCa(this)};
g.zI=function(a,b){a.stopPropagation();b&&(a=Z7(b),gF(hF.u(),a))};g.HE=function(){return this.selected&&0<this.selected.length};w8.prototype.hasSelected=w8.prototype.HE;w8.prototype.Zj=function(){Q(R.u(),"importAction.export",1);var a=u8(this.entries),b=u8(this.selected);wCa(a,b,this.g())};w8.prototype.launchExport=w8.prototype.Zj;w8.prototype.jF=function(){Q(R.u(),"importAction.import",1);C.dispatchEvent(new lE("importFile",void 0,void 0,{layerId:this.entryType}))};w8.prototype.launchImport=w8.prototype.jF;W.directive("autoheight",[function(){return{restrict:"A",scope:{parent:"@",siblings:"@",height:"@autoheight",minHeight:"@minheight"},controller:x8}}]);
function x8(a,b){this.v=a;this.K=b;this.j=1;this.v.height&&(b=Number(this.v.height.replace(/%/,"")),isNaN(b)||100<b||0>=b?b=1:1<b&&100>=b&&(b/=100),this.j=b);this.g=this.l.bind(this);b=null;if(this.v&&this.K){var c=this.K.parent(),d=this.v.parent;d&&(b=c.closest(d));b&&b.length||(b=c)}if(this.xa=b)this.xa.resize(this.g),(b=a.siblings)&&this.xa.find(b).resize(this.g),Xy(this.l.bind(this));a.$on("$destroy",this.o.bind(this))}x8.$inject=["$scope","$element","$injector"];
x8.prototype.o=function(){if(this.xa){this.xa.removeResize(this.g);var a=this.v.siblings;if(a)try{this.xa.find(a).removeResize(this.g)}catch(b){}this.xa=null}this.v=this.K=this.g=null};x8.prototype.l=function(){if(this.K&&this.xa){var a=0,b=this.v.siblings;b&&this.xa.find(b).each(function(){a+=$(this).outerHeight(!0)});b=Number(this.v.minHeight)||0;b=Math.max((this.xa.height()-a)*this.j,b);this.K.css("height",b+"px")}};W.directive("featureactions",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/im/action/importactions.html",controller:y8,controllerAs:"ctrl"}}]);function y8(a,b){this.contextMenu=f8;w8.call(this,a,b);V.H("dataSourceRemoved",this.j,!1,this)}w(y8,w8);y8.$inject=["$scope","$element"];y8.prototype.j=function(a){a&&a.source&&this.entryType&&this.entryType==a.source.D()&&this.close()};y8.prototype.close=function(){y8.C.close.call(this);V.M("dataSourceRemoved",this.j,!1,this)};
y8.prototype.close=y8.prototype.close;y8.prototype.apply=function(){y8.C.apply.call(this);if(this.entryType){var a=XI.u().O(this.entryType);if(a){var b=ECa();a.Fg()&&b?a.refresh():o8.u().Ne(a.D(),a.Oa(),!0)}}};y8.prototype.apply=y8.prototype.apply;y8.prototype.getColumns=function(){return DCa(this.entryType)};y8.prototype.g=function(){return vCa(this.entryType)};y8.prototype.Hf=function(a){this.entryType&&tCa(this.entryType,a)};y8.prototype.editEntry=y8.prototype.Hf;W.directive("addcolumnform",[function(){return{restrict:"E",replace:!0,scope:{name:"=",value:"=",validators:"&"},templateUrl:"v1542394219/views/data/addcolumnform.html",controller:z8,controllerAs:"ctrl"}}]);function z8(a,b){this.v=a;a.$on("$destroy",t(this.j,this));b(this.g.bind(this))}z8.$inject=["$scope","$timeout"];z8.prototype.j=function(){this.v=null};
z8.prototype.g=function(){if(this.v){var a=this.v.columnForm,b=this.v.validators?this.v.validators():null;a&&b&&b.forEach(function(b){var c=a[b.model];c&&(c.$validators[b.id]=b.handler)},this)}};function SCa(a,b,c){a=a.getColumns();if(b=b||c){c=0;for(var d=a.length;c<d;c++){var e=a[c],f=b.toLowerCase();if(!e.temp&&(e.field.toLowerCase()===f||e.name.toLowerCase()==f))return!1}}return!0};function A8(a,b){y.call(this);this.scope=a;this.element=b;this.action=a.action;this.type=a.type||"";a.$parent.confirmCallback=this.sn.bind(this);a.$parent.confirmValue=this.action;a.$on("$destroy",this.dispose.bind(this))}w(A8,y);A8.$inject=["$scope","$element"];A8.prototype.J=function(){A8.C.J.call(this);this.scope=this.element=this.action=null};A8.prototype.bg=function(){this.scope&&this.scope.$emit("window.ready")};A8.prototype.sn=va;W.directive("featurelabelaction",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/plugin/featureaction/featurelabelactionconfig.html",controller:B8,controllerAs:"ctrl"}}]);
function B8(a,b){A8.call(this,a,b);this.addCustomLabel=!1;this.validators=[];this.customLabelWarning="The custom label will be added to each feature, but will not appear on the map unless selected in the columns above.";this.j=new FF;this.l=new le(this.Es,100,this);this.o=void 0;this.g=this.action&&this.action.g?Gs(this.action.g):Gs(m8);a.$on("labelColor.change",this.s.bind(this));a.$on("labelColor.reset",this.A.bind(this));a.$on("labelSize.spinstop",this.Xf.bind(this));a.$on("labelcontrols:columnChange",
this.Wb.bind(this));a.$watch("config.customName",this.GG.bind(this));this.bg()}w(B8,A8);B8.$inject=["$scope","$element"];g=B8.prototype;g.J=function(){B8.C.J.call(this);Ma(this.l);this.l=null};
g.bg=function(){if(this.type){var a=XI.u().O(this.type);a&&this.validators.push({id:"duplicate",model:"name",handler:SCa.bind(this,a)})}this.g&&(this.scope.config=this.g,this.scope.color=this.o=xv(this.g.color||"rgba(255,255,255,1)"),this.scope.size=this.g.size||14,a=T.u().W(this.type),P(a,"os.layer.ILayer")&&(this.scope.columns=eO(a)),this.scope.columns||(this.scope.columns=[]),this.g.customName&&this.g.customValue&&(this.addCustomLabel=!0));this.Es();B8.C.bg.call(this)};
g.sn=function(){this.action&&this.g&&(this.addCustomLabel||(this.g.customName="",this.g.customValue=""),this.action.g=this.g,C.dispatchEvent("action:update"))};g.Wb=function(){var a=this.j.name;this.showCustomWarning=this.addCustomLabel&&a?!this.scope.config.labels.some(function(b){return b.column===a}):!1};g.GG=function(a,b){a!=b&&this.l&&this.l.start()};
g.Es=function(){qb(this.scope.columns,this.j);var a=(this.g&&this.g.customName||"").trim();a&&(this.j.name=a,this.j.field=a,this.showCustomWarning=!1,this.addCustomLabel&&this.scope&&this.scope.columns&&(a=bG.bind(void 0,"field",a),ib(this.scope.columns,a)||(this.scope.columns.push(this.j),this.scope.columns.sort(YF))));this.Wb();X(this.scope)};B8.prototype.updateCustomColumn=B8.prototype.Es;
B8.prototype.s=function(a,b){a.stopPropagation();this.g&&(a=b?ZG(b):"rgba(255,255,255,1)",this.g.color=a,this.scope.color=xv(a))};B8.prototype.A=function(a){a.stopPropagation();this.s(a,this.o)};B8.prototype.Xf=function(a,b){a.stopPropagation();this.g&&null!=b&&(this.g.size=b)};W.directive("featureactionlegendsettings",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/plugin/featureaction/featureactionlegendsettings.html"}}]);W.directive("featureactionsoundconfig",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/plugin/featureaction/featuresoundactionconfig.html",controller:C8,controllerAs:"ctrl"}}]);function C8(a,b){A8.call(this,a,b);a.$on("playDelay.spinstop",this.j.bind(this));this.sounds=kua();this.g=this.action&&this.action.oe?Gs(this.action.oe):Gs(q8);this.bg()}w(C8,A8);C8.$inject=["$scope","$element"];
C8.prototype.bg=function(){C8.C.bg.call(this);this.scope.playDelay=this.g.playDelay;this.sound=this.g.sound;this.help="Set the time between sound notifications in seconds"};C8.prototype.sn=function(){this.action&&this.g&&(this.action.oe=this.g)};C8.prototype.VI=function(){var a=this.sound;PZ.u().play(a);this.g.sound=this.sound};C8.prototype.onSoundChange=C8.prototype.VI;C8.prototype.j=function(a,b){a.stopPropagation();this.g&&null!=b&&(this.g.playDelay=b)};W.directive("featureactionstyleconfig",[function(){return{restrict:"E",replace:!0,template:'<div><vectorstylecontrols color="color" opacity="opacity" size="size" icon="icon" center-icon="centerIcon" icon-set="ctrl.iconSet" icon-src="ctrl.iconSrc" shape="shape" shapes="shapes" center-shape="centerShape" center-shapes="centerShapes" show-color-reset="true"></vectorstylecontrols><iconstylecontrols ng-show="ctrl.showRotationOption()" columns="columns" show-rotation="showRotation" rotation-column="rotationColumn"></iconstylecontrols></div>',
controller:D8,controllerAs:"ctrl"}}]);
function D8(a,b){A8.call(this,a,b);this.iconSet=zM;this.iconSrc=yM;this.g=Gs($B);this.l=void 0;this.action&&this.action.g&&eH(this.action.g,this.g);a.$on("color.change",this.Wy.bind(this));a.$on("color.reset",this.FL.bind(this));a.$on("opacity.slidestop",this.kI.bind(this));a.$on("size.slidestop",this.Xf.bind(this));a.$on("icon:change",this.Wf.bind(this));a.$on("vector:shapeChange",this.Ui.bind(this));a.$on("vector:centerShapeChange",this.Pi.bind(this));a.$on(sO,this.o.bind(this));a.$on(tO,this.j.bind(this));
this.bg()}w(D8,A8);D8.$inject=["$scope","$element"];g=D8.prototype;
g.bg=function(){if(this.g){var a=QB(this.g,!0);a?(this.scope.color=this.l=iv(a),this.scope.opacity=3<a.length?a[3]:1):(this.scope.color=xv("rgba(255,255,255,1)"),this.scope.opacity=1);aH(this.g,QB(this.g));this.scope.size=fH(this.g);this.scope.shape=this.g.shape||SB;TCa(this);this.scope.centerShape=this.g.centerShape||"Point";UCa(this);this.scope.showRotation=this.g.showRotation||!1;this.scope.rotationColumn=this.g.rotationColumn||"";if(this.type&&(a=XI.u().O(this.type),Ov(a,"os.source.Vector"))){var b=
nc(OG);this.scope.shapes=eb(b,a.Zz,a);this.scope.centerShapes=eb(b,a.Uu,a);this.scope.columns=Mja(a);Lb(this.scope.rotationColumn)&&kN(a,"BEARING")&&(this.scope.rotationColumn="BEARING",this.j(void 0,this.scope.rotationColumn))}}D8.C.bg.call(this)};g.sn=function(){this.action&&this.g&&(this.action.g=this.g,C.dispatchEvent("action:update"))};
g.Wy=function(a,b){a&&a.stopPropagation();if(this.g){a=b?ZG(b):"rgba(255,255,255,1)";b=yv(a);var c=this.scope.opacity;b&&null!=c&&(b[3]=c,a=ZG(b));aH(this.g,a);this.scope.color=xv(a)}};g.FL=function(a){a&&a.stopPropagation();this.Wy(a,this.l)};g.Wf=function(a,b){a&&a.stopPropagation();this.g&&b&&cH(this.g,b)};g.kI=function(a,b){a&&a.stopPropagation();this.g&&null!=b&&aC(this.g,b)};g.Xf=function(a,b){a&&a.stopPropagation();this.g&&null!=b&&gH(this.g,b)};
g.Ui=function(a,b){a&&a.stopPropagation();this.g&&(this.g.shape=b);TCa(this)};g.Pi=function(a,b){a&&a.stopPropagation();this.g&&(this.g.centerShape=b);UCa(this)};function TCa(a){a.scope.icon=a.g&&"Icon"==a.g.shape?bH(a.g)||xM():null;a.Wf(null,a.scope.icon)}function UCa(a){a.scope.centerIcon=a.g&&"Icon"==a.g.centerShape?bH(a.g)||xM():null;a.Wf(null,a.scope.centerIcon)}
g.xs=function(){if(null!=this.scope){var a=this.scope.shape||"",b=this.scope.centerShape||"";return"Icon"==a||(QG.test(a)||PG.test(a))&&"Icon"==b}return!1};D8.prototype.showRotationOption=D8.prototype.xs;D8.prototype.o=function(a,b){a&&a.stopPropagation();this.g&&(this.g.showRotation=b)};D8.prototype.j=function(a,b){a&&a.stopPropagation();b&&this.g&&(this.g.rotationColumn=b)};function E8(){y_.call(this);this.id="featureAction"}w(E8,y_);wa(E8);E8.prototype.J=function(){E8.C.J.call(this);var a=eZ;a&&!a.Ha().find("featureAction:launch")&&(a=a.Ha().find("Tools"))&&a.removeChild("featureAction:launch");Ma(f8);f8=void 0};
E8.prototype.init=function(){var a=o8.u();n8(a,new l8);n8(a,new r8);n8(a,new p8);OQ(KQ.u(),"text/xml; subtype=FEATUREACTIONS",new e8);(a=eZ)&&!a.Ha().find("featureAction:launch")&&a.Ha().find("Tools").R({label:"Feature Actions...",eventType:"featureAction:launch",tooltip:"Perform actions on imported data matching a filter",da:['<i class="fa fa-fw fa-magic"></i>'],Aa:NCa,ya:OCa,qa:"layers.contextMenu.featureActions"});a=fX.u();EU(a,"v3",$7);EU(a,"v4",$7);f8||(f8=new IF(new HF({type:"root",children:[{label:"Copy",
eventType:"featureactionnodes:copy",tooltip:"Copy the action",da:['<i class="fa fa-copy fa-fw"></i>'],Aa:mCa,ya:rCa,qa:"importAction.copy"},{label:"Edit",eventType:"featureactionnodes:edit",tooltip:"Edit the action",da:['<i class="fa fa-pencil fa-fw"></i>'],Aa:nCa,ya:sCa,qa:"importAction.edit"},{label:"Export Selected",eventType:"featureactionnodes:export",tooltip:"Export the action",da:['<i class="fa fa-fw fa-download"></i>'],Aa:mCa,ya:uCa,qa:"importAction.export"},{label:"Remove",eventType:"featureactionnodes:remove",
tooltip:"Remove the action",da:['<i class="fa fa-fw fa-times"></i>'],Aa:nCa,ya:xCa,qa:"importAction.remove"},{label:"Remove Selected",eventType:"featureactionnodes:removeSelected",tooltip:"Removes selected actions",da:['<i class="fa fa-fw fa-times"></i>'],Aa:oCa,ya:yCa,qa:"action.feature.node.removeSelected"},{label:"Toggle On",eventType:"featureactionnodes:toggleOn",tooltip:"Toggles the actions on",da:['<i class="fa fa-fw fa-check-square-o"></i>'],Aa:pCa,ya:zCa,qa:"action.feature.node.toggleOn"},
{label:"Toggle Off",eventType:"featureactionnodes:toggleOff",tooltip:"Toggles the actions off",da:['<i class="fa fa-fw fa-square-o"></i>'],Aa:qCa,ya:ACa,qa:"action.feature.node.toggleOff"}]})));nL({priority:1E3,render:KCa,settingsUI:"featureactionlegendsettings",defaultSettings:{showFeatureActions:!0}})};function F8(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function VCa(){}function WCa(a){var b=new XCa;return Bl(a)?YCa(b,a):Cl(a)?ZCa(b,a):"string"===typeof a?(a=Dl(a),YCa(b,a)):null};function XCa(){this.version=void 0}G(XCa,VCa);function YCa(a,b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType==Node.ELEMENT_NODE)return ZCa(a,b);return null}function ZCa(a,b){a.version=b.getAttribute("version").trim();return(a=Ol({version:a.version},$Ca,b,[]))?a:null}function G8(a,b){return Ol({},aDa,a,b)}function H8(a,b){return Ol({},bDa,a,b)}function cDa(a,b){if(b=G8(a,b))return a=[$U(a.getAttribute("width")),$U(a.getAttribute("height"))],b.size=a,b}
function dDa(a,b){return Ol([],eDa,a,b)}
var I8=[null,"http://www.opengis.net/wms"],$Ca=L(I8,{Service:J(function(a,b){return Ol({},fDa,a,b)}),Capability:J(function(a,b){return Ol({},gDa,a,b)})}),gDa=L(I8,{Request:J(function(a,b){return Ol({},hDa,a,b)}),Exception:J(function(a,b){return Ol([],iDa,a,b)}),Layer:J(function(a,b){return Ol({},jDa,a,b)})}),fDa=L(I8,{Name:J(aV),Title:J(aV),Abstract:J(aV),KeywordList:J(dDa),OnlineResource:J(F8),ContactInformation:J(function(a,b){return Ol({},kDa,a,b)}),Fees:J(aV),AccessConstraints:J(aV),LayerLimit:J(ZU),
MaxWidth:J(ZU),MaxHeight:J(ZU)}),kDa=L(I8,{ContactPersonPrimary:J(function(a,b){return Ol({},lDa,a,b)}),ContactPosition:J(aV),ContactAddress:J(function(a,b){return Ol({},mDa,a,b)}),ContactVoiceTelephone:J(aV),ContactFacsimileTelephone:J(aV),ContactElectronicMailAddress:J(aV)}),lDa=L(I8,{ContactPerson:J(aV),ContactOrganization:J(aV)}),mDa=L(I8,{AddressType:J(aV),Address:J(aV),City:J(aV),StateOrProvince:J(aV),PostCode:J(aV),Country:J(aV)}),iDa=L(I8,{Format:Fl(aV)}),jDa=L(I8,{Name:J(aV),Title:J(aV),
Abstract:J(aV),KeywordList:J(dDa),CRS:Hl(aV),EX_GeographicBoundingBox:J(function(a,b){var c=Ol({},nDa,a,b);if(c){a=c.westBoundLongitude;b=c.southBoundLatitude;var d=c.eastBoundLongitude;c=c.northBoundLatitude;if(void 0!==a&&void 0!==b&&void 0!==d&&void 0!==c)return[a,b,d,c]}}),BoundingBox:Hl(function(a){var b=[YU(a.getAttribute("minx")),YU(a.getAttribute("miny")),YU(a.getAttribute("maxx")),YU(a.getAttribute("maxy"))],c=[YU(a.getAttribute("resx")),YU(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),
extent:b,res:c}}),Dimension:Hl(function(a){return{name:a.getAttribute("name"),units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:VU(a.getAttribute("multipleValues")),nearestValue:VU(a.getAttribute("nearestValue")),current:VU(a.getAttribute("current")),values:aV(a)}}),Attribution:J(function(a,b){return Ol({},oDa,a,b)}),AuthorityURL:Hl(function(a,b){if(b=G8(a,b))return b.name=a.getAttribute("name"),b}),Identifier:Hl(aV),MetadataURL:Hl(function(a,
b){if(b=G8(a,b))return b.type=a.getAttribute("type"),b}),DataURL:Hl(G8),FeatureListURL:Hl(G8),Style:Hl(function(a,b){return Ol({},pDa,a,b)}),MinScaleDenominator:J(XU),MaxScaleDenominator:J(XU),Layer:Hl(function(a,b){var c=b[b.length-1],d=Ol({},jDa,a,b);if(d)return b=VU(a.getAttribute("queryable")),void 0===b&&(b=c.queryable),d.queryable=void 0!==b?b:!1,b=$U(a.getAttribute("cascaded")),void 0===b&&(b=c.cascaded),d.cascaded=b,b=VU(a.getAttribute("opaque")),void 0===b&&(b=c.opaque),d.opaque=void 0!==
b?b:!1,b=VU(a.getAttribute("noSubsets")),void 0===b&&(b=c.noSubsets),d.noSubsets=void 0!==b?b:!1,(b=YU(a.getAttribute("fixedWidth")))||(b=c.fixedWidth),d.fixedWidth=b,(a=YU(a.getAttribute("fixedHeight")))||(a=c.fixedHeight),d.fixedHeight=a,["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(d[a]=(d[a]||[]).concat(c[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in d||(d[a]=c[a])}),d})}),oDa=L(I8,
{Title:J(aV),OnlineResource:J(F8),LogoURL:J(cDa)}),nDa=L(I8,{westBoundLongitude:J(XU),eastBoundLongitude:J(XU),southBoundLatitude:J(XU),northBoundLatitude:J(XU)}),hDa=L(I8,{GetCapabilities:J(H8),GetMap:J(H8),GetFeatureInfo:J(H8)}),bDa=L(I8,{Format:Hl(aV),DCPType:Hl(function(a,b){return Ol({},qDa,a,b)})}),qDa=L(I8,{HTTP:J(function(a,b){return Ol({},rDa,a,b)})}),rDa=L(I8,{Get:J(G8),Post:J(G8)}),pDa=L(I8,{Name:J(aV),Title:J(aV),Abstract:J(aV),LegendURL:Hl(cDa),StyleSheetURL:J(G8),StyleURL:J(G8)}),aDa=
L(I8,{Format:J(aV),OnlineResource:J(F8)}),eDa=L(I8,{Keyword:Fl(aV)});function sDa(){}function tDa(a,b){if(a){var c=oc(a,["Attribution","Title"])||"";c&&((a=oc(a,["Attribution","OnlineResource"])||"")&&(c='<a href="'+a+'" target="_blank">'+c+"</a>"),c=Vy(c),b.G=c)}};function J8(){}w(J8,sDa);
J8.prototype.g=function(a,b){var c;if(a&&b){b.Ta(a.Title||"");b.fb(a.Abstract||"");tDa(a,b);var d=a.Name;if(d){b.ka=d;d=String(a.opaque).toLowerCase();b.mk="1"==d||"true"==d;["Extent","Dimension"].forEach(function(d){if(d=a[d])for(c=0;c<d.length;c++)uDa(b,String(d[c].name),String(d[c].values))});b.oa=a.CRS;if((d=a.LatLonBoundingBox)&&0<d.length)for(c=0;c<d.length;c++)if("EPSG:4326"==d[c].crs){vDa(b,vb(d[c].extent));break}if(d=a.Style){var e=[],f=[];e.push(zc(hM));for(c=0;c<d.length;c++){var h=d[c],
k=String(h.Title),l=String(h.Name),m={label:k?k:l,data:l};e.push(m);via.test(k)?(b.Vc(l),m.data=""):(h=oc(h,["LegendURL",0]))&&f.push(h)}e.length&&(b.nb=e);f.length&&(b.hb=f)}if(d=oc(a,["KeywordList"])){e=[];for(c=d.length;c--;)f=String(d[c]),kb(e,f)||e.push(f);b.vb(e)}}}};function K8(){}w(K8,sDa);
K8.prototype.g=function(a,b){var c;if(a&&b&&(b.Ta(a.Title||""),b.fb(a.Abstract||""),tDa(a,b),c=a.Name)){b.ka=c;c=String(a.opaque).toLowerCase();b.mk="1"==c||"true"==c;var d=a.Dimension;if(d)for(c=0;c<d.length;c++)uDa(b,String(d[c].name),String(d[c].values));var e=a.BoundingBox;if(e){d=null;for(c=0;c<e.length;c++)if("CRS:84"==e[c].crs){c=vb(e[c].extent);b.ra=c;break}else"EPSG:4326"==e[c].crs&&(d=e[c]);!b.getBBox()&&d&&(c=vb(d.extent),b.ra=[c[1],c[0],c[3],c[2]])}b.oa=a.CRS;if(d=a.Style){e=[];var f=
[];e.push(zc(hM));for(c=0;c<d.length;c++){var h=d[c],k=String(h.Title),l=String(h.Name),m={label:k?k:l,data:l};e.push(m);via.test(k)?(b.Vc(l),m.data=""):(h=oc(h,["LegendURL",0]))&&f.push(h)}e.length&&(b.nb=e);f.length&&(b.hb=f)}if(a=oc(a,["KeywordList"])){d=[];for(c=a.length;c--;)e=String(a[c]),kb(d,e)||d.push(e);b.vb(d)}}};var L8={"1.1.1":new J8,"1.3.0":new K8};function M8(){UI.call(this);this.log=N8;this.s="ogc";this.af=[];this.gc=null;this.o={};this.g=new jz;this.I=null;this.Gm=this.Fm="";this.gd=null;this.rf=!1;this.jb="";this.lf=[];this.nb="";this.l=null;this.B=this.zb="";this.P=this.U=!1}w(M8,UI);var N8=E.V("os.ui.ogc.OGCServer");function O8(a){return a.Fm||a.jb}function P8(a){return a.Gm||a.B}g=M8.prototype;g.ph=function(){return this.jb||O8(this)};g.Rh=function(a){this.jb=a};g.Bi=function(){return this.B||P8(this)};g.Rk=function(a){this.B=a};
g.init=function(){M8.C.init.call(this);this.g.ga("WFS (Features) Only");this.g.Da("WFS (Features) Only");this.o["WFS (Features) Only"]=0};g.bc=function(a){M8.C.bc.call(this,a);this.Rk(a.wms);this.Gm=a.wms;this.zb=a.wmsTimeFormat;this.nb=a.wmsDateFormat;this.Rh(a.wfs);this.Fm=a.wfs;this.gd="wfsParams"in a?new af(a.wfsParams):null;this.l="wmsParams"in a?new af(a.wmsParams):null};
g.finish=function(){this.rr()&&(this.I&&(this.tj(this.I),this.I=null,wDa(this,this)),this.g.Ke()&&this.Ef(this.g),this.G||xDa(this),M8.C.finish.call(this))};
g.load=function(a){M8.C.load.call(this,a);this.zc(null);this.P=this.U=!1;this.Fc=0;if(a=P8(this)){E.info(N8,this.ba()+" requesting WMS GetCapabilities");yDa(this,a);var b=this.og;if(b&&0<b.length){this.Fc=b.length;for(var c=this.Ka(),d=0;d<b.length;d++){var e=a.replace(c,b[d]);yDa(this,e,this.Lv,Fa(this.aG,b[d]))}}}else this.U=!0,this.finish();VI(this,!1);this.g.zc(null);O8(this)?(E.info(N8,this.ba()+" requesting WFS GetCapabilities"),a=new Ve(O8(this)),b=this.gd?this.gd.clone():new af,df(b,!0),kf(b,
"service")||b.set("service","WFS"),b.set("request","GetCapabilities"),Ze(a,b),b=new Ys(a),ct(b,"*/*"),b.H("success",this.Fu,!1,this),b.H("error",this.xm,!1,this),b.L=iM,E.za(N8,"Loading WFS GetCapabilities from URL: "+a.toString()),this.Va(!0),b.load()):(this.P=!0,this.finish())};g.rr=function(){return M8.C.rr.call(this)&&this.U&&this.P&&0>=this.Fc};g.Lv=function(a){Ma(a.target);this.Fc--;this.finish()};
g.aG=function(a,b){this.og&&(qb(this.og,a),0==this.og.length&&(this.og=null));a='Alternate URL "'+a+'" for '+this.ba()+" failed loading WMS GetCapabilities and has been removed.";At(zt.u(),a,rs,this.log);this.Lv(b)};
function yDa(a,b,c,d){b=new Ve(b);var e=a.l?a.l.clone():new af;df(e,!0);kf(e,"service")||e.set("service","WMS");e.set("request","GetCapabilities");var f="1.3.0";kf(e,"version")&&(f=e.get("version"));e.set("version",f);Ze(b,e);c=c||a.Hu;d=d||a.xm;e=new Ys(b);ct(e,"*/*");e.H("success",c,!1,a);e.H("error",d,!1,a);e.L=iM;E.za(N8,"Loading WMS GetCapabilities from URL: "+b.toString());a.Va(!0);e.load()}
g.Hu=function(a){E.info(N8,this.ba()+" WMS GetCapabilities request completed. Parsing data...");a=a.target;a.M("success",this.Hu);a.M("error",this.xm);a:{var b=a.g,c='<a target="_blank" href="'+a.j.toString()+'">WMS Capabilities</a>';if(b){var d=void 0;a=void 0;try{b=b.replace(/<(\/)?SRS>/g,"<$1CRS>"),b=b.replace(/<LatLonBoundingBox/g,'<BoundingBox CRS="CRS:84"'),d=VA(b),a=WCa(d)}catch(l){Q8(this,"The response XML for "+c+" is invalid!");break a}if(a){b=a.version;if(!this.ba())try{this.Da(a.Service.Title)}catch(l){}this.gc=
b in L8?L8[b]:L8["1.1.1"];c=d=null;var e=oc(a,"Capability","Request","GetMap","DCPType",0,"HTTP","Get","OnlineResource");if(e){var f=e.indexOf("?");-1<f?(d=e.substring(0,f),f<d.length-1&&(c=new af(d.substring(f+1)))):d=e}null!=d&&(this.B=d||this.B);if((d=a)&&!this.G&&!O.get(["devSanity"],!1)&&(d=oc(d,"Service","AccessConstraints")))for(d=Ub(d,"&")?("document"in qa)?uaa(d):waa(d):d,d=VA(d).querySelectorAll("ConsentStatement"),e=0,f=d.length;e<f;e++){var h=d[e].textContent;At(zt.u(),h,us)}(d=oc(a,"Service",
"Abstract"))&&"string"===typeof d&&this.af.push(d);if(d=oc(a,"Capability","Layer")){if(!q(d)&&"Layer"in d){var k=oc(a,"Capability","Layer","CRS")||oc(a,"Capability","Layer","SRS");d=d.Layer}this.I=[];a=0;for(e=d.length;a<e;a++)(f=zDa(this,d[a],b,k))&&this.I.push(f)}null!=c&&(this.l||(this.l=new af),this.l.extend(c))}this.U=!0;this.finish()}else Q8(this,c+" response is empty!")}};
g.Fu=function(a){E.info(N8,this.ba()+" WFS GetCapabilities request completed. Parsing data...");var b=a.target;b.M("success",this.Fu);b.M("error",this.xm);a:if(a=b.g,b='<a target="_blank" href="'+b.j.toString()+'">WFS Capabilities</a>',a){var c=null;try{c=VA(a)}catch(x){Q8(this,"The response XML for "+b+" is invalid!");break a}if(!this.ba())try{var d=c.querySelector("Title");this.Da(d.textContent||d.value||d.nodeValue)}catch(x){}if(b=c.querySelector("Operation[name=GetFeature]")){d=b.querySelector("Post");
null!=d?(d=d.attributes[0],this.Rh(d.value||d.nodeValue),this.rf=!0):(d=b.querySelector("Get"),null!=d&&(d=d.attributes[0],this.Rh(d.value||d.nodeValue)));var e=["OUTPUTFORMAT","OutputFormat","outputFormat","outputformat"],f=[];d=0;for(a=e.length;d<a&&!f.length;d++)f=b.querySelectorAll("Parameter[name="+e[d]+"]  Value");b=[];d=0;for(a=f.length;d<a;d++)b.push(f[d].textContent);this.lf=b}d=c.querySelectorAll("ServiceIdentification");0<d.length&&(d=d[0].querySelectorAll("Abstract"),0<d.length&&this.af.push(d[0].textContent));
b=this.D()+"#";c=c.querySelectorAll("FeatureType");f=V;d=0;for(a=c.length;d<a;d++){var h=c[d],k=h.querySelectorAll("Name")[0],l=h.querySelectorAll("Title")[0].textContent;e=null;var m=k.textContent,n="",p=m;Ub(m,":")&&(p=m.split(":"),n=p[0],p=p[1]);n&&(n="xmlns:"+n,(k=k.getAttribute(n))&&(e=n+'="'+k+'"'));(k=f.Ja(b+m))||(k=f.Ja(b+p));k||(k=ADa(this,l));k||(k=aJ(V,"ogc"),k.ga(b+m),k.o=!0,k.Vc("rgba(255,255,255,1)"),k.Ta(l),k.Cc(this.ba()));k.Ca=this.s;if(l=h.querySelectorAll("Keyword")){n=k.getTags()||
[];for(var r=0,u=l.length;r<u;r++){var v=l[r].textContent;-1==n.indexOf(v)&&n.push(v)}k.vb(n)}YV(p)&&(k.bb=!0);(h=h.querySelector("Abstract"))&&!k.qb()&&k.fb(h.textContent);k.o=!0;k.Rh(this.ph());k.Hg=this.rf;k.L=m;k.gc=e;k.lf=this.lf;k.s||(h=new jU,kU(h,k),this.g.R(h));e=k;e.Me=this;bJ(V,e)}this.P=!0;this.finish()}else Q8(this,b+" response is empty!")};function ADa(a,b){if(a=pE(V,a.D()+"#"))for(var c=0,d=a.length;c<d;c++){var e=a[c];if("ogc"===e.Oc&&e.S()==b&&(e.s||e.o))return a[c]}return null}
g.xm=function(a){var b=a.target;a=b.s;var c=b.j;Ma(b);b=c.toString();c=c.g.get("service");c='Request failed for <a target="_blank" href="'+b+'">'+c+" Capabilities</a>: ";a&&(c+=a.join(" "));Q8(this,c)};function Q8(a,b){a.getError()||(b="Server ["+a.ba()+"]: "+b,a.G||At(zt.u(),b,rs),E.error(N8,b),WI(a,b),a.Va(!1))}
function zDa(a,b,c,d,e){var f=null;if(a.gc){var h=null,k=b.Name;k&&(k=a.D()+"#"+k,h=V.Ja(k));h||(k=b.Title)&&(h=ADa(a,k));if(h){var l=a.g.na();if(l){k=0;for(var m=l.length;k<m;k++)if(l[k].D()==h.D()){a.g.removeChild(l[k]);break}}}k=h||aJ(V,"ogc");k.Ca=a.s;a.gc.g(b,k);e=k.G||e;k.G=e||null;d=(k.oa||[]).concat(d);yb(d);k.oa=d;h=!1;k.Rj()||(f=new jU,(m=k.ka)&&"IWMSLayer"!=m?(k.s=!0,k.Nb=a.l,k.Li=c,k.Rk(a.Bi()),k.mf=a.nb,k.qf=a.zb,k.Cc(a.ba()),k.ga(a.D()+"#"+k.ka),k.Me=a,bJ(V,k),kU(f,k)):h=!0);if("Layer"in
b)for(h=!0,f=new jz,f.ga(k.S()||""),f.Da(k.S()),oz(f,k.qb()||""),b=b.Layer,q(b)||(b=[b]),k=0,m=b.length;k<m;k++)(l=zDa(a,b[k],c,d,e))&&f.R(l);if(h&&(l=f.na(),!l||0===l.length))return null}return f}g.Ef=function(a){var b=a.D();if(b&&b in this.o&&this.Ke()){b=this.o[b];for(var c=this.na(),d=0,e=c.length;d<e;d++){var f=c[d].D();if(!(f&&f in this.o)||this.o[f]<b){var h=d;break}}}this.R(a,!1,h)};
function wDa(a,b,c){var d=b.na();if(d&&0<d.length){if(b.getParent()){var e=b.ba();e&&(c?c.push(e):c=[e]);e=0;for(var f=d.length;e<f;e++)wDa(a,d[e],c);c&&c.pop()}}else if(null!=c&&b instanceof jU&&(a=b.Ja()))try{a.getTags()||a.vb([]);var h=a.getTags();e=0;for(f=c.length;e<f;e++){var k=c[e];kb(h,k)||h.push(k)}}catch(l){}}
function xDa(a,b){b=b||a;if(b instanceof jU){var c=b.Ja();if(c)try{c.sg=NaN,c.Xh(),c.dispatchEvent(new U("title"))}catch(d){}}if((b=b.na())&&0<b.length)for(c=b.length;c--;)xDa(a,b[c])};function R8(){M8.call(this);this.log=BDa;this.s="geoserver"}w(R8,M8);var BDa=E.V("plugin.ogc.GeoServer");R8.prototype.bc=function(a){this.init();this.Da(a.label);this.eb(a.enabled);this.Ee=a.editable;var b=a.url;this.Rk(b);this.Gm=b;this.Rh(b);this.Fm=b;this.zb=a.wmsTimeFormat||"{start}/{end}";this.nb=a.wmsDateFormat||"YYYY-MM-DDTHH:mm:ss[Z]"};var CDa=/\/(geoserver|.*?gs)(\/|(\/.*)?\/(ows|web)\/?)?([?#]|$)/i;function S8(a,b,c){this.s=this.g=null;this.A=!1;this.l=this.o=this.j=null;a&&(b=null!=b?b:[],b.sort(DDa),this.init(a,b,void 0!==c?c:!1))}function DDa(a,b){return Pb(a.name,b.name)}Nv["os.ogc.wfs.FeatureType"]=S8;var EDa=["up","start","begin"],FDa=["down","stop","end"],T8={},GDa="gml:Point gml:LineString gml:Polygon gml:MultiPoint gml:MultiLineString gml:MultiPolygon gml:GeometryCollection gml:Geometry gml:Surface gml:MultiSurface gml:PointPropertyType gml:LineStringPropertyType gml:PolygonPropertyType gml:MultiPointPropertyType gml:MultiLineStringPropertyType gml:MultiPolygonPropertyType gml:GeometryCollectionPropertyType gml:GeometryPropertyType gml:SurfacePropertyType gml:MultiSurfacePropertyType".split(" ");
g=S8.prototype;g.Ul=function(){return eb(this.g,HDa)};g.Jo=function(){return this.s};g.Ez=function(a){this.s=a};g.te=function(){return this.j||!this.A?this.j:"validTime"};g.zn=function(a){this.j=a};g.Mf=function(){return this.j&&this.o?this.o:this.te()};g.un=function(a){this.o=a};g.getColumns=function(){return this.g};g.setColumns=function(a){this.g=a};
g.init=function(a,b,c){this.l=a;this.g=b;this.A=c;for(var d=a=null,e=null,f=b.length;f--;){var h=b[f],k=h.name,l=h.type,m=k.toLowerCase();h=l.toLowerCase();if(!this.s&&-1<GDa.indexOf(l))this.s=k;else{if(l=!a&&U8(h))a:if(l=m,this.l&&this.l in T8)l=T8[this.l][0].toLowerCase()==l;else{for(var n=EDa.length;n--;)if(Ub(l,EDa[n])){l=!0;break a}l=!1}if(l)a=k;else{if(l=!d&&U8(h))a:if(this.l&&this.l in T8)l=T8[this.l][1].toLowerCase()==m;else{for(l=FDa.length;l--;)if(Ub(m,FDa[l])){l=!0;break a}l=!1}l?d=k:kb(IDa,
k)&&this.g.splice(f,1)}}c||!U8(h)||e||(e=k)}a&&d&&(this.j=a,this.o=d);!this.j&&e&&(this.j=e)};g.sa=function(a){a=a||{};a.featureTypeUser={startDateColumnName:this.te(),endDateColumnName:this.Mf()};return a};g.restore=function(a){a.featureTypeUser&&(JDa(this,a.featureTypeUser.startDateColumnName)&&this.zn(a.featureTypeUser.startDateColumnName),JDa(this,a.featureTypeUser.endDateColumnName)&&this.un(a.featureTypeUser.endDateColumnName))};
function JDa(a,b){if(b&&a.g&&0<a.g.length)for(var c=0;c<a.g.length;c+=1)if(a.g[c]&&a.g[c].name===b)return!0;return!1}function U8(a){return Ub(a,"datetime")}function HDa(a){return U8(a.type.toLowerCase())}var IDa=["ID","DATE_TIME"];function KDa(){this.g=null}
KDa.prototype.parse=function(a){var b=[];a=VA(a);a:{for(a=Ag(a);null!==a;a=a.nextSibling)if(1==a.nodeType){var c=a;break a}c=null}if(c){if(!this.g){this.g=[];a=[];var d=[];for(c=Ag(c);null!==c;c=c.nextSibling)1==c.nodeType&&("element"==c.localName?a.push(c):"complexType"==c.localName&&d.push(c));var e=0;for(c=a.length;e<c;e++){var f=a[e],h=null;if(f.getAttribute("name")){var k=f.getAttribute("type");if(k){var l=k.indexOf(":");-1!=l&&(k=k.substr(l+1));l=0;for(var m=d.length;l<m;l++){var n=d[l];if(k==
n.getAttribute("name")){h=n;break}}}}f&&h&&this.g.push({element:f,lC:h})}}a=0;for(d=this.g.length;a<d;a++){e=this.g[a];c=null;h=e.lC;e=e.element.getAttribute("name");f=!1;(k=h.querySelector("extension"))&&"gml:DynamicFeatureType"==k.getAttribute("base")&&(f=!0);h=h.querySelectorAll("element");k=[];l=0;for(m=h.length;l<m;l++){var p=h[l];n=p.getAttribute("name");var r=p.getAttribute("type");r||(p=p.querySelector("simpleType"))&&(p=p.querySelector("restriction"))&&(r=p.getAttribute("base"));if(n&&r){p=
r.indexOf(":");-1<p&&-1===r.indexOf("gml:")&&(r=r.substring(p+1));p=LDa;for(var u in p)p[u].test(r)&&(r=u);k.push({name:n,type:r})}}e&&(c=new S8(e,k,f));c&&b.push(c)}}return b};var LDa={decimal:/^double$/i,integer:/^(int|long)$/i,string:/^bool(ean)?$/i};function V8(){A.call(this);this.o=null;this.j=new af;this.Za=this.g=this.l=null}w(V8,A);var W8=E.V("os.ogc.wfs.DescribeFeatureLoader");g=V8.prototype;g.Ka=function(){return this.Za};g.Lb=function(a){var b=a.indexOf("?");-1<b?(this.Za=a.substring(0,b),this.g||(a=new af(a.substring(b+1),!1),df(a,!0),kf(a,"typename")&&(this.g=a.get("typename")))):this.Za=a};g.se=function(){return this.o};
g.load=function(){if(this.g&&this.Za){kf(this.j,"SERVICE")||this.j.set("SERVICE","WFS");kf(this.j,"VERSION")||this.j.set("VERSION","1.1.0");kf(this.j,"TYPENAME")||this.j.set("TYPENAME",this.g);this.j.set("REQUEST","DescribeFeatureType");var a=new Ve(this.Za);Ze(a,this.j);this.l=new Ys(a);this.l.H("success",this.ZJ,!1,this);this.l.H("error",this.NG,!1,this);this.l.L=iM;E.info(W8,'Loading DescribeFeatureType for "'+this.g+'" on '+this.Za);this.l.load()}else this.dispatchEvent(new z("complete")),E.error(W8,
"DescribeFeatureType missing url and/or typename!")};g.ZJ=function(a){a=a.target;a.removeAllListeners();(a=(new KDa).parse(a.g))&&0<a.length?this.o=a[0]:E.error(W8,'Unable to parse DescribeFeatureType for "'+this.g+'" on '+this.Za+"!");this.dispatchEvent(new z("complete"))};g.NG=function(a){a.target.removeAllListeners();E.error(W8,'Failed to load DescribeFeatureType for "'+this.g+'" on '+this.Za+"!");this.dispatchEvent(new z("complete"))};function X8(){return{restrict:"E",scope:!0,template:X8.j,controller:Y8,controllerAs:"nodeUi"}}X8.j='<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.filtersEnabled" ng-click="nodeUi.filter()"><i class="fa fa-filter fa-fw c-glyph" title="Manage filters"ng-class="{\'text-success\': nodeUi.filtered, \'c-glyph__off\': !nodeUi.filtered}"></i></span></span>';W.directive("filterabledescriptornodeui",[X8]);
function Y8(a,b){eF.call(this,a,b);this.l=a.item;WE.H("propertychange",this.g,!1,this);this.g()}w(Y8,eF);Y8.$inject=["$scope","$element"];Y8.prototype.destroy=function(){Y8.C.destroy.call(this);WE.M("propertychange",this.g,!1,this)};Y8.prototype.g=function(){var a=this.l.Ja();try{this.filtersEnabled=a.Eg()}catch(b){this.filtersEnabled=!1;return}a=a.mh();this.filtered=gb(a,function(a){return IK(PJ,a)})};Y8.prototype.filter=function(){var a=this.l.Ja();a&&a.Hi()};Y8.prototype.filter=Y8.prototype.filter;function Z8(){SK.call(this);this.hb=this.l=this.N=this.I=this.ra=this.G=null;this.mk=!1;this.nb=null;this.o=this.Hg=!1;this.lf=this.zb=this.gc=this.L=null;this.s=!1;this.oa=this.Li=this.rf=this.qf=this.Nb=this.mf=this.ka=null;this.bb=!1;this.ck=MDa;this.Oc="ogc"}w(Z8,SK);Nv["plugin.ogc.OGCLayerDescriptor"]=Z8;P(Z8,"os.data.IAreaTest");P(Z8,"os.filter.IFilterable");P(Z8,"os.ui.ogc.IFeatureTypeDescriptor");P(Z8,"os.ui.ogc.IOGCDescriptor");var MDa=/#features/;g=Z8.prototype;g.Pl=function(){return"Layer"};
g.T=function(){return this.s&&this.o?"Tile and Feature Groups":this.s?"Tile Layers":this.o?"Feature Layers":null};
g.td=function(){var a=[];this.s&&a.push('<image xlink:href="v1542394219/images/tiles-base.png" x="0" y="0" width="16px" height="16px"><title>Tile layer</title></image>');this.o&&a.push('<image xlink:href="v1542394219/images/features-base.png" x="0" y="0" width="16px" height="16px"><title>Feature layer</title></image>');$8(this)&&a.push('<image class="time-icon" xlink:href="v1542394219/images/time-base.png" x="0" y="0" width="16px" height="16px"><title>This layer supports animation over time</title></image>');var b=
"",c=this.La()?yv(this.La()):[255,255,255,1];this.bb&&(b+='<i class="fa fa-exclamation-circle text-danger" title="This layer is soon to be deleted"></i>');return b+=DN($b(),a,[],c)};g.Go=function(){var a="";this.s&&(a="Tiles");this.o&&(a+=this.s?" and Features":"Features");return a};g.mh=function(){var a=[this.D()];this.s&&a.push(this.D()+"#tiles");this.o&&a.push(this.D()+"#features");return a};g.Rj=function(){return this.mk};g.getBBox=function(){return this.ra};function vDa(a,b){a.ra=b}g.se=function(){return this.l};
g.Eg=function(){return this.o};g.ph=function(){return this.zb};g.Rh=function(a){this.zb=a};g.Bi=function(){return this.rf};g.Rk=function(a){this.rf=a};function DY(a){return a.zb+"!!"+a.L}function uDa(a,b,c){null==a.N&&(a.N={});a.N[b]=c;"time"==b&&(c=c.split("/"),1<c.length?(b=(new Date(c[0])).getTime(),c=(new Date(c[1])).getTime(),a.U=Math.min(c,b),a.P=Math.max(c,b)):(a.U=NaN,a.P=NaN))}
g.eg=function(){if(this.isActive())this.I=this.eg.bind(this),this.Xj()&&(Z8.C.eg.call(this),this.bb&&ZV(this.S()),wP(this));else return Z8.C.eg.call(this);return!1};g.Xj=function(){if(this.o&&!this.l){var a=new V8;a.Lb(this.ph());a.g=this.L;a.Ra("complete",this.GL,!1,this);a.load();return!1}return!0};g.Tc=function(){return!1};function $8(a){return a.s?null!=a.N&&"time"in a.N:null!=a.l?null!==a.l.te()||null!==a.l.Mf():!1}
g.Sa=function(){var a=[];this.s&&a.push(NDa(this));this.o&&a.push(ODa(this));return a};
function NDa(a){var b={};b.id=a.D()+"#tiles";var c=new af;c.set("LAYERS",a.ka);c.set("VERSION",a.Li||"1.3.0");null!=a.Nb&&c.extend(a.Nb);b.baseColor=a.La();b.colorControl="colorControl:pickerReset";b.animate=$8(a);b.dateFormat=a.mf;b.extent=a.getBBox();b.layerType=a.T();b.legends=a.hb;b.params=c;b.provider=a.rb();b.styles=a.nb;b.tags=a.getTags();b.timeFormat=a.qf;b.title=a.S();b.type="WMS";b.projections=a.oa;(c=a.G)&&(b.attributions=[c]);c=a.Bi();var d=[c];if(a.Me){var e=a.Me.Ka(),f=a.Me.og;if(e&&
f)for(var h=0;h<f.length;h++)d.push(c.replace(e,f[h]))}b.urls=d;b.provider&&(b.visible=O.get(["providers",a.rb().toLowerCase(),"visible"],!0));return b}
function ODa(a){var b={};b.id=a.D()+"#features";var c=wia();c.set("typename",a.L);a.gc&&c.set("namespace",a.gc);b.baseColor=a.La();b.color=a.La();b.colorControl="colorControl:pickerReset";b.animate=$8(a);b.exclusions=!0;b.featureType=a.l;b.filter=!0;b.layerType=a.T();b.load=!0;b.params=c;b.provider=a.rb();b.spatial=!0;b.tags=a.getTags();b.temporal=$8(a);b.title=a.S();b.type="WFS";if((c=a.ph())&&a.Me instanceof UI){var d=a.Me.Ka();var e=a.Me;var f=[e.url];e.og&&(f=f.concat(e.og));e.Ia>=f.length&&(e.Ia=
0);e=f[e.Ia++]||"";d&&e&&(c=c.replace(d,e))}b.url=c;b.usePost=a.Hg;b.formats=a.lf;b.provider&&(b.visible=O.get(["providers",a.rb().toLowerCase(),"visible"],!0));return b}
g.GL=function(a){(a=a.target.se())?(this.l=a,this.Ia&&(this.l.restore(this.Ia),this.Ia=null,delete this.Ia)):(yka(this.hd)?this.o=!1:this.setActive(!1),a=yka(this.hd)?"Failed loading DescribeFeatureType for "+this.L+". Feature requests have been disabled for this layer.":"Network is disconnected. "+this.L+" is unavailable.",At(zt.u(),a,rs));this.I&&(this.I(),this.I=null)};g.Hi=function(){this.I=this.Hi;if(this.Xj()){var a=this.D()+"#features";kY(a,this.S()+" Features")}};g.ff=function(){return DY(this)};
g.Fe=function(){return this.l?this.l.getColumns():null};g.Qd=function(){return Z8.C.Qd.call(this)+"<filterabledescriptornodeui></filterabledescriptornodeui>"};g.sa=function(a){a=Z8.C.sa.call(this,a);this.l&&(a=this.l.sa(a));return a};g.restore=function(a){Z8.C.restore.call(this,a);this.l?this.l.restore(a):this.Ia=a};g.Jl=function(){return this.mh().filter(function(a){return this.ck.test(a)},this)};var PDa=dS(/^W((MT_)?M|F)S_Capabilities$/i,null),QDa=dS(/ExceptionReport$/,/\/(ows|ogc)(\/|$)/);function RDa(a){if(a)for(var b=0,c=a.length;b<c;b++)if(a[b])return a[b]}Fw("ogc",function(a,b,c){return Zc([PDa(a,b,c),QDa(a,b,c)]).then(RDa)},0,"text/xml");function SDa(a,b){return Wc(b&&CDa.test(b.Ka()))}Fw("geoserver",SDa,0,"ogc");Fw("geoserver",SDa,0,"text/html");W.directive("geoserver",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/forms/singleurl.html",controller:a9,controllerAs:"ctrl"}}]);function a9(a,b){K_.call(this,a,b);b=a.config.file;a.config.url=b?b.Ka().replace(/(\/geoserver|\/.*?gs)(\/.*)(web|ows)[#?\/].*$/,"/geoserver$1ows"):this.Ka();a.config.type="geoserver";a.urlExample="http://www.example.com/geoserver/ows"}w(a9,K_);a9.$inject=["$scope","$element"];a9.prototype.Jj=function(){var a=new R8;a.bc(this.scope.config);return a};
a9.prototype.Ka=function(){return this.g?P8(this.g):""};W.directive("ogcserver",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/plugin/ogc/ui/ogcserverimport.html",controller:b9,controllerAs:"ctrl"}}]);
function b9(a,b){J_.call(this,a,b);a.config.type="ogc";if(b=a.config.file){var c=b.Ob(),d=b.Ka();if(c){var e=c.match(/title>([^<]*)<\//i);e&&1<e.length&&(a.config.label=e[1]);if(-1!=c.search(/wms/gi)||-1!=d.search(/wms/gi))a.config.wms=b.Ka();else if(-1!=c.search(/wfs/gi)||-1!=d.search(/wfs/gi))a.config.wfs=b.Ka()}}else this.g&&(a.config.label=this.g.ba(),a.config.wms=this.g.Bi(),a.config.wfs=this.g.ph());this.element.find('input[name="title"]').focus()}w(b9,J_);b9.$inject=["$scope","$element"];
g=b9.prototype;g.Jj=function(){var a=this.g||new M8;a.bc(this.scope.config);return a};g.Bi=function(){return this.g?P8(this.g):""};g.ph=function(){return this.g?O8(this.g):""};g.Ux=function(){var a={},b=["label","enabled","type","wms","wfs"],c=this.scope.config,d;for(d in c)-1<b.indexOf(d)&&(a[d]=c[d]);return a};g.Zt=function(){return this.Bi()!==this.scope.config.wms||this.ph()!==this.scope.config.wfs};
g.hj=function(){this.g.Da(this.scope.config.label);this.g.Rk(this.scope.config.wms);this.g.Rh(this.scope.config.wfs);this.g.Gm=this.scope.config.wms;this.g.Fm=this.scope.config.wfs;b9.C.hj.call(this)};function c9(a){var b="<Or>",c=[],d=0,e;for(e in a)c.push(e),d=a[e].length;for(e=0;e<d;e++){for(var f="<And>",h=0;h<c.length;h++)f=Zb(f,("<PropertyIsEqualTo><PropertyName>"+c[h]+"</PropertyName><Literal>{{"+c[h]+"}}</Literal></PropertyIsEqualTo>").replace("{{"+c[h]+"}}",a[c[h]][e]));f+="</And>";0>b.indexOf(f)&&(b+=f)}N_.call(this,"relateLayer","filter","{identifiers}",b+"</Or>")}w(c9,N_);function d9(){}d9.prototype.format=function(a){return a.pb()||""};d9.prototype.wrap=function(a,b){b=b?"And":"Or";return"<"+b+">"+a+"</"+b+">"};d9.prototype.wrapAll=function(a){return a?"<And>"+a+"</And>":""};function e9(a){this.g=a||"GEOM"}e9.prototype.format=function(a){var b="",c=this.X(a);if(c){var d=c.T();b=JC(a.get("title")||"New Area");a=JC(a.get("description"));switch(d){case "Circle":c=new Rk([Au(Wk(c),Xk(c))]);b=SV(c,this.g,b,a)||"";break;case "MultiLineString":case "Polygon":d=c.getCoordinates();b=1==d.length&&Gu(d[0],c.aa())?Fqa(c.aa(),this.g,b,a):SV(c,this.g,b,a)||"";break;case "LineString":case "MultiPolygon":b=SV(c,this.g,b,a)||"";break;default:b=Fqa(c.aa(),this.g,b,a)}}return b};
e9.prototype.X=function(a){return a?a.X():null};e9.prototype.Sh=function(){return!0};e9.prototype.j=function(a){return a?"<Or>"+a+"</Or>":""};function f9(a){e9.call(this,a)}w(f9,e9);f9.prototype.j=function(a){return"<And>"+a+"</And>"};f9.prototype.format=function(a){a=f9.C.format.call(this,a);return a=a.replace(/(BBOX|Intersects)/g,"Disjoint")};function g9(a){e9.call(this,a)}w(g9,f9);g9.prototype.X=function(a){(a=a.get("_originalGeometry")||a.X())&&(a=a.clone().toLonLat());return a};function h9(a){e9.call(this,a)}w(h9,e9);h9.prototype.X=function(a){if(a=a.get("_originalGeometry")||a.X())a=a.clone().toLonLat(),Qu(a);return a};function TDa(a){U_.call(this);this.modifier=new N_("filter","filter","{customFilter}","");this.o=new h9(a);this.s=new g9(a);this.j=new d9;this.g=!0}w(TDa,U_);function UDa(){this.g=this.l="validTime";this.j=!1}
UDa.prototype.format=function(a){var b=Qe(YM(a));1>b.length&&(a.o.isEmpty()?b=[cL(a.j)]:(b=(new Date).getTime()+864E5,b=[SM(b,b+1E3)]));a="<Or>";for(var c=0;c<b.length;c++){var d="<And>";d+="<PropertyIsGreaterThanOrEqualTo><PropertyName>{endColumn}</PropertyName><Literal>{start}</Literal></PropertyIsGreaterThanOrEqualTo><PropertyIsLessThan><PropertyName>{startColumn}</PropertyName><Literal>{end}</Literal></PropertyIsLessThan>";var e=b[c],f=BC(new Date(e.start),void 0,!1,!0),h=BC(new Date(e.end),void 0,
!1,!0);this.j&&(h=1E3*Math.floor(e.start/1E3),f=BC(new Date(h),void 0,!1,!0),e=1E3*Math.ceil(e.end/1E3),e=e<=h?h+1E3:e,h=BC(new Date(e),void 0,!1,!0));d=d.replace(/{startColumn}/g,this.l);d=d.replace(/{endColumn}/g,this.g);d=d.replace(/{start}/g,f);d=d.replace(/{end}/g,h);d+="</And>";a+=d}return a+"</Or>"};function i9(){Ss.call(this,"FilterCleanerModifier",-100)}w(i9,Ss);i9.prototype.j=function(a){a=a.g;var b=a.get("filter");b&&a.set("filter",VDa(b))};function VDa(a){if(!a)return a;try{var b=VA(a);if(b)return WDa(Ag(b)),PC(b)}catch(c){}return a}function WDa(a){for(var b=Ag(a),c;b;)c=b.nextSibling,WDa(b),b=c;b=a.localName;if("And"==b||"Or"==b||"Not"==b)Ag(a)?"Not"!=b&&(!a.childNodes||2>a.childNodes.length)&&(b=a.parentNode,b.removeChild(a),b.appendChild(Ag(a))):a.parentNode.removeChild(a)};function j9(){}var XDa="filter maxfeatures namespace outputformat request resulttype service sortby srsname typename version".split(" ");j9.prototype.Lm=function(){return"text/xml"};
j9.prototype.format=function(a){var b=a.g,c=b.Ub(),d={};XDa.forEach(function(a){for(var e=0;e<c.length;e++)if(c[e].toLowerCase()===a){d[a]=b.get(c[e]);b.remove(c[e]);c.splice(e,1);break}});a=d.maxfeatures;a='maxFeatures="'+Math.min(void 0!=a?a:Ry()+1,3E5)+'"';var e=d.version||"1.1.0",f=d.namespace||"",h=d.resulttype||"results";"hits"==h&&(a="");a='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" '+
f+' service="WFS" version="'+e+'" resultType="'+h+'" '+a;(e=d.outputformat)&&(a+=' outputFormat="'+e+'"');a=a+">"+('<wfs:Query srsName="'+(d.srsname||"EPSG:4326")+'" typeName="'+d.typename+'">');(e=d.sortby)&&(a+="<ogc:SortBy>"+e+"</ogc:SortBy>");(e=d.filter)&&(a+=e);return a+"</wfs:Query></wfs:GetFeature>"};W.directive("chooseTimeColumn",[function(){return{restrict:"AE",replace:!0,scope:{id:"=",deferred:"="},templateUrl:"v1542394219/views/plugin/ogc/ui/choosetimecolumn.html",controller:k9,controllerAs:"chooseTime"}}]);function k9(a,b){y.call(this);this.v=a;this.K=b;this.j=V.Ja(this.v.id);this.g=null;this.j?(this.g=this.j.se(),this.v.title=this.j.S(),this.start=this.g.te(),this.end=this.g.Mf(),this.timeColumns=this.j.se().Ul(),a.$emit("window.ready")):KE(this.K)}w(k9,y);k9.$inject=["$scope","$element"];
k9.prototype.J=function(){k9.C.J.call(this);this.v=null};k9.prototype.save=function(){this.g.zn(this.start);this.g.un(this.end);this.v.deferred&&this.v.deferred.callback();KE(this.K);this.dispose()};k9.prototype.save=k9.prototype.save;
function YDa(a,b){IE("chooseTimeColumn")?HE("chooseTimeColumn"):FE({id:"chooseTimeColumn",label:"Choose Time Columns",icon:"fa fa-clock-o",x:"center",y:"center",width:"425","min-width":"400","max-width":"800",height:"auto","min-height":"200","max-height":"900",modal:"true"},'<choose-time-column id="id" deferred="deferred"></choose-time-column>',void 0,void 0,void 0,{id:a,deferred:b})};W.directive("ogclayernodeui",[function(){var a=NK();a.template=a.template.replace(">",'><span ng-if="chooseTime" ng-click="nodeUi.chooseTime()"><i class="fa fa-clock-o fa-fw c-glyph" title="Choose Time Columns"></i></span>');a.controller=l9;return a}]);function l9(a,b){OK.call(this,a,b);this.g=V.Ja(RK(this));b=!1;if(P(this.g,"os.ui.ogc.IFeatureTypeDescriptor")){var c=this.g.se();c&&(b=(null!==c.te()||null!==c.Mf())&&2<=c.Ul().length&&"validTime"!=c.te())}a.chooseTime=b}w(l9,OK);
l9.$inject=["$scope","$element"];l9.prototype.dC=function(){var a=new mf;sf(a,function(){this.g.setActive(!1);this.g.setActive(!0)},this);YDa(RK(this),a)};l9.prototype.chooseTime=l9.prototype.dC;function m9(){M_.call(this);this.j=!0;this.g=this.featureType=null}w(m9,M_);g=m9.prototype;g.dc=function(a){m9.C.dc.call(this,a);void 0!==a.describeType&&(this.j=a.describeType);void 0!==a.featureType&&(this.featureType=a.featureType);this.params&&(this.params.get("typename")&&(this.g=this.params.get("typename")),ZDa(this,a))};
g.Ye=function(a){this.dc(a);var b=this.O(a);b.ga(this.id);yN(b,this.pd(a));b.Ph(this.wd(a));oN(b,void 0!==this.animate?this.animate:!1);b.Ta(this.title);var c=this.W(b,a);a&&c.restore(a);this.j?this.featureType?$Da(this,c,a):this.url&&this.g&&(b=new V8,b.Lb(this.url),b.g=this.g,b.Ra("complete",this.HL.bind(this,c,a)),b.load()):a.load&&(b=c.O(),b.refresh());return c};
g.HL=function(a,b,c){(c=c.target.se())?(this.featureType=c,$Da(this,a,b)):(a="Failed loading DescribeFeatureType for "+this.g+". Feature layer will not be loaded.",At(zt.u(),a,rs))};g.pd=function(a){a=m9.C.pd.call(this,a);var b=this.params.get("outputformat"),c=/json/i;b&&c.test(b)&&ct(a,"application/json, text/plain, */*");a.L=iM;a.U=new j9;return a};
function $Da(a,b,c){function d(){if(f&&!f.Xa()){var a=c.featureType=this.featureType;a&&Tua(b,c,a);this.hl(b,c);(a=f.o)&&$s(a,new i9)}}function e(){f&&!f.Xa()&&c.load&&f.refresh()}var f=b.O();if(a.featureType){var h=new mf;sf(h,d,a);sf(h,e);!(c.temporal&&2<=a.featureType.Ul().length)||a.featureType.te()&&a.featureType.Mf()?h.callback():YDa(a.id,h)}else e()}
g.hl=function(a,b){b=null!=b.animate?b.animate:!1;a=a.O().Uq();var c=[],d=this.featureType.te(),e=this.featureType.Mf();b&&d&&(d!=e?(b=new RS("start"),b.ja=d,b.format="ISO",c.push(b),b=new RS("end"),b.ja=e):(b=new RS("instant"),"validTime"==d&&-1<this.url.indexOf("/ogc/wfsServer")&&(d="DATE_TIME"),b.ja=d),b.format="ISO",c.push(b));c&&0<c.length&&eD(a,c);cD(a,["Altitude","Radius","SemiMajor","SemiMinor"])};var n9=[/^application\/json$/,/gml\\?3/i,/gml\\?2/i];
function ZDa(a,b){b=b.formats;var c=a.params.get("outputformat");if(c)for(var d=0,e=n9.length;d<e;d++){var f=n9[d];if(c&&f.test(c))return d}if(b)for(d=0,e=n9.length;d<e;d++){f=n9[d];c=0;for(var h=b.length;c<h;c++)if(f.test(b[c]))return a.params&&a.params.set("outputformat",b[c]),d}return 1}m9.prototype.xf=function(a){a=ZDa(this,a);var b;0===a?(b=MQ("geojson"))||(b=new d1):(b=new $5,2===a&&(b.format=new Y5));return b};
m9.prototype.W=function(a){a=new MK({source:a});a.Bf("<ogclayernodeui></ogclayernodeui>");return a};m9.prototype.O=function(a){a=m9.C.O.call(this,a);a.Nr=!0;return a};function o9(){m9.call(this)}w(o9,m9);
o9.prototype.hl=function(a,b){o9.C.hl.call(this,a,b);var c=a.O(),d=null!=b.exclusions?b.exclusions:!1,e=null!=b.filter?b.filter:!1,f=null!=b.spatial?b.spatial:!1,h=null!=b.temporal?b.temporal:!!this.featureType.te(),k=null!=b.featureIDs?b.featureIDs:null,l=null!=b.relatedLayer?b.relatedLayer:null;b=WE;if(k||h||f||e||d){var m={PR:d,filter:e,Iu:!!k||!!l,XR:f,dA:h};if(e){var n=aEa.bind(void 0,a);a.o=n;n=bEa.bind(void 0,a);a.I=n}if(a=c.o)$s(a,new T6(m)),k&&(k=new c9({ID:k}),$s(a,k)),l&&(k=new c9(l),$s(a,
k),c.Cr=!0),(k=this.featureType.Jo())&&(f||d||e)&&(d=new TDa(k),d.Bb(c),b.j.push(d),b.l.start()),h&&(d=new UDa,d.l=this.featureType.te()||"validTime",d.g=this.featureType.Mf()||"validTime",-1<this.url.indexOf("ogc/wfsServer")&&(d.j=!0),e=new N_("temporal","filter","{temporal}",""),h=new O_,h.l=d,h.g=e,h.Bb(c),d=dU.u(),c=c.D(),d.g[c]=h,eU(h,d.j,!1))}};function aEa(a){kY(a.D())}function bEa(a){return(a=a.Sa())&&a.featureType&&(a=a.featureType)?a.getColumns():null};function p9(a){a3.call(this,a);this.Yp=!0}w(p9,a3);P(p9,"os.source.IStyle");p9.prototype.Qb=function(){var a=this.gf();if(a)var b=a.STYLES||"";return b};p9.prototype.yb=function(a){a="string"==typeof a?a:null!=a?a.data:"";if(a!=this.Qb()){var b=this.gf();b.STYLES=a;this.Ec.clear();this.updateParams(b);this.dispatchEvent(new U("style"))}};function q9(){t0.call(this);this.animate=!1}w(q9,t0);g=q9.prototype;g.dc=function(a){q9.C.dc.call(this,a);this.g=a.animate?VP:this.g};g.po=function(a,b){q9.C.po.call(this,a,b);a.B=b.styles||null;this.animate&&a instanceof VP&&b.dateFormat&&(a.I=b.dateFormat,x0(a))};
g.O=function(a){var b={EXCEPTIONS:"INIMAGE"};if(this.params){var c=this.params.get("VERSION");b.EXCEPTIONS="1.1.1"===c?"application/vnd.ogc.se_inimage":"INIMAGE";c=this.params.Ub();for(var d=0,e=c.length;d<e;d++){var f=c[d];b[a.caseSensitive?f:f.toUpperCase()]=this.params.get(f)}}a={urls:this.urls,params:b,projection:this.projection,tileGrid:this.tileGrid,crossOrigin:this.crossOrigin,wrapX:this.projection.uh()};return new p9(a)};
g.Yo=function(a){if(this.params)for(var b=this.params.Ub(),c=0,d=b.length;c<d;c++)if("WIDTH"==b[c].toUpperCase())return parseInt(this.params.get(b[c]),10);return q9.C.Yo.call(this,a)};g.Xo=function(a){if(this.params)for(var b=this.params.Ub(),c=0,d=b.length;c<d;c++)if("HEIGHT"==b[c].toUpperCase())return parseInt(this.params.get(b[c]),10);return q9.C.Xo.call(this,a)};function r9(){y_.call(this);this.id="ogc"}w(r9,y_);
r9.prototype.init=function(){var a=V,b=new RI("geoserver",R8,"GeoServer","");ZI(a,new RI("ogc",M8,"OGC Server","OGC Servers provide raster imagery through WMS (Web Map Service) and vector features through WFS (Web Feature Service) servers"));ZI(a,b);$I(a,"ogc",Z8);a=Ev.u();Iv(a,"WMS",q9);Iv(a,"WFS",o9);var c=cEa;b="wfs";b in a.g&&E.ib(Fv,"Default layer config is being overridden for: "+b);a.g[b]=c;a=KQ.u();OQ(a,"ogc",new z_("<ogcserver></ogcserver>"));OQ(a,"geoserver",new z_("<geoserver></geoserver>"))};
function cEa(){var a={load:!0,spatial:!0,temporal:!0,exclusions:!1,filter:!0,usePost:!0,params:wia()};a.params.remove("maxfeatures");a.params.remove("outputformat");return a}Ry=function(a){a=a||O.get("os.map.mapMode")||"2d";return O.get("maxFeatures."+a,5E4)};function s9(){}s9.prototype.Eh=function(){return["addLayer"]};s9.prototype.Xc=function(a){if(a&&(q(a)||(a=[a]),a=a.filter(function(a){return Aa(a)}).map(function(a){a.id=a.id||$b();return new tP(a)}),a.length)){if(1<a.length){var b=new oF;b.Zb(a)}else b=a[0];gF(EF,b)}};function t9(){y_.call(this);this.id="openpage"}w(t9,y_);wa(t9);t9.prototype.init=function(){Dt.u().ng(new s9)};var dEa={relation:1.2,way:1.1},eEa={labelColor:"rgba(255,255,255,1)",labels:[{column:"display_name",showColumn:!1}],image:{type:"icon",scale:.75,src:"http://maps.google.com/mapfiles/kml/paddle/wht-blank.png",color:"rgba(0,255,255,1)"},stroke:{width:3,color:"rgba(0,0,255,1)"},fill:{color:"rgba(0,0,255,0.1)"}};function u9(){this.g=void 0;this.j=0;this.format=new DD}var fEa=E.V("plugin.osm.nom.NominatimParser");u9.prototype.Bb=function(a){this.oc();a instanceof ArrayBuffer&&(a=Ow(a)||null);if("string"===typeof a)try{var b=JSON.parse(a)}catch(c){E.error(fEa,"Failed parsing response:",c),b=void 0}else q(a)&&(b=a);b&&(this.g=b)};u9.prototype.oc=function(){this.g=void 0;this.j=0};u9.prototype.vd=function(){return!!this.g&&this.g.length>this.j};
u9.prototype.Wc=function(){var a=this.g[this.j++];if(a)try{delete a.boundingbox;var b=a.geojson;if(b){var c=this.format.Ck(b);c&&(iu(c),a.geometry=c);delete a.geojson}else if(a.lon&&a.lat){var d=Number(a.lon),e=Number(a.lat);isNaN(d)||isNaN(e)||(a.geometry=new Jk([d,e]))}var f=new ek(a)}catch(h){E.error(fEa,"Failed reading feature:",h)}return f};W.directive("nominatimresultcard",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/plugin/osm/nom/nominatimresultcard.html",controller:v9,controllerAs:"ctrl"}}]);
function v9(a,b){i_.call(this,a,b);this.details="";a=[];b=this.kd("category");var c=this.kd("type");b&&c&&(b=ec(b),c=ec(c),a.push(b+" ("+c+")"));if(b=this.feature.get("extratags"))if((c=b.place)&&a.push(ec(c)),b=b.population)c=Number(b),isNaN(c)?a.push("Population: "+b):a.push("Population: "+c.toLocaleString());this.details=a.join(" - ")}w(v9,i_);v9.$inject=["$scope","$element"];v9.prototype.S=function(){return this.feature.get("display_name")||"Unknown Result"};v9.prototype.getTitle=v9.prototype.S;function w9(a){var b=100;if(a){var c=a.get("importance");if(c){var d=a.get("osm_type");d&&d in dEa&&(c*=dEa[d]);b+=c}}else b=0;k_.call(this,a,"display_name",b);a.set("_style",eEa,!0);jH(a)}w(w9,k_);w9.prototype.g=function(){return'<nominatimresultcard result="result"></nominatimresultcard>'};function x9(a){A7.call(this,"nominatim",a);this.type="nominatim"}w(x9,A7);P(x9,"os.search.IGeoSearch");x9.prototype.Nz=function(){return!1};x9.prototype.Ql=function(a){var b=O.get("plugin.osm.nom.url","");b&&a&&(b+="&limit="+a);return b};x9.prototype.Bh=function(a){var b=a.target.g;if(b){var c=new u9;for(c.Bb(b);c.vd();)(b=c.Wc())&&(q(b)?this.g.concat(b.map(function(a){return a?new w9(a):void 0}).filter(CA)):this.g.push(new w9(b)))}x9.C.Bh.call(this,a)};function y9(){y_.call(this);this.id="nominatim"}w(y9,y_);y9.prototype.init=function(){if(O.get("plugin.osm.nom.url")){var a=new x9("Places (OpenStreetMap)");hU(gU.u(),a)}};function z9(a){function b(a){a=k.cd(Dm(k,a));cl(M(l.Y()),a);window.removeEventListener("mousemove",c);window.removeEventListener("mouseup",b)}function c(a){a=k.cd(Dm(k,{clientX:a.clientX-n.offsetWidth/2,clientY:a.clientY+n.offsetHeight/2}));m.set(O3,a)}a=a?a:{};this.j=void 0!==a.collapsed?a.collapsed:!0;this.A=void 0!==a.collapsible?a.collapsible:!0;this.A||(this.j=!1);var d=void 0!==a.className?a.className:"ol-overviewmap",e=void 0!==a.tipLabel?a.tipLabel:"Overview map",f=void 0!==a.collapseLabel?
a.collapseLabel:"\u00ab";"string"===typeof f?(this.s=document.createElement("span"),this.s.textContent=f):this.s=f;f=void 0!==a.label?a.label:"\u00bb";"string"===typeof f?(this.Rb=document.createElement("span"),this.Rb.textContent=f):this.Rb=f;var h=this.A&&!this.j?this.s:this.Rb;f=document.createElement("button");f.setAttribute("type","button");f.title=e;f.appendChild(h);I(f,"click",this.Rp,this);this.B=document.createElement("DIV");this.B.className="ol-overviewmap-map";var k=this.g=new rn({controls:new Kh,
interactions:new Kh,view:a.view});a.layers&&a.layers.forEach(function(a){mn(tn(k)).push(a)},this);e=document.createElement("DIV");e.className="ol-overviewmap-box";e.style.boxSizing="border-box";this.l=new K3({position:[0,0],positioning:"bottom-left",element:e});xca(this.g,this.l);e=document.createElement("div");e.className=d+" ol-unselectable ol-control"+(this.j&&this.A?" ol-collapsed":"")+(this.A?"":" ol-uncollapsible");e.appendChild(this.B);e.appendChild(f);zn.call(this,{element:e,render:a.render?
a.render:gEa,target:a.target});var l=this,m=this.l,n=this.l.tb();n.addEventListener("mousedown",function(){window.addEventListener("mousemove",c);window.addEventListener("mouseup",b)})}G(z9,zn);g=z9.prototype;
g.setMap=function(a){var b=this.Y();a!==b&&(b&&((b=M(b))&&xh(b,Hh("rotation"),this.bm,this),this.g.set("target",null)),zn.prototype.setMap.call(this,a),a&&(this.g.set("target",this.B),this.o.push(I(a,"propertychange",this.kp,this)),0===un(this.g).getLength()&&(b=tn(a),this.g.set("layergroup",b)),a=M(a)))&&(I(a,Hh("rotation"),this.bm,this),Zk(a)&&(this.g.Ve(),A9(this)))};g.kp=function(a){"view"===a.key&&((a=a.oldValue)&&xh(a,Hh("rotation"),this.bm,this),a=M(this.Y()),I(a,Hh("rotation"),this.bm,this))};
g.bm=function(){gl(M(this.g),al(M(this.Y())))};function gEa(){var a=this.Y(),b=this.g;if(a.j&&b.j){var c=vn(a);a=ml(M(a),c);var d=vn(b);c=ml(M(b),d);var e=b.Vd([a[0],a[3]]),f=b.Vd([a[2],a[1]]);b=Math.abs(e[0]-f[0]);e=Math.abs(e[1]-f[1]);f=d[0];d=d[1];b<.1*f||e<.1*d||b>.75*f||e>.75*d?A9(this):Yh(c,a)||(c=this.Y(),a=this.g,c=M(c),cl(M(a),$k(c)))}hEa(this)}function A9(a){var b=a.Y();a=a.g;var c=vn(b);b=ml(M(b),c);a=M(a);mi(b,1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2)));pl(a,b)}
function hEa(a){var b=a.Y(),c=a.g;if(b.j&&c.j){var d=vn(b),e=M(b),f=M(c);c=al(e);b=a.l;var h=a.l.tb(),k=ml(e,d);d=f.ab();e=[k[0],k[1]];f=[k[2],k[3]];if(a=$k(M(a.Y()))){var l=[e[0]-a[0],e[1]-a[1]];qk(l,c);pk(l,a)}b.set(O3,l);h&&(h.style.width=Math.abs((e[0]-f[0])/d)+"px",h.style.height=Math.abs((f[1]-e[1])/d)+"px")}}g.Rp=function(a){a.preventDefault();iEa(this)};
function iEa(a){a.element.classList.toggle("ol-collapsed");a.j?rj(a.s,a.Rb):rj(a.Rb,a.s);a.j=!a.j;var b=a.g;a.j||b.j||(b.Ve(),A9(a),wh(b,"postrender",function(){hEa(this)},a))}g.zd=function(a){this.A&&this.j!==a&&iEa(this)};function B9(a){function b(a){var d=T.u();d.Qa()&&(a=c.cd(Dm(c,a)),QP(d,{center:a}));window.removeEventListener("mouseup",b)}z9.call(this,a);jEa(this);var c=this.g;this.l.tb().addEventListener("mousedown",function(){window.addEventListener("mouseup",b)})}w(B9,z9);var kEa=["overview","show"];B9.prototype.kp=function(a){"view"===a.key&&jEa(this);B9.C.kp.call(this,a)};
function jEa(a){var b=new Yk({projection:N,minZoom:2,maxZoom:25});if(a.Y()){var c=M(a.Y());c&&(cl(b,$k(c)),fl(b,c.ab()))}a.g.set("view",b)}B9.prototype.Rp=function(a){B9.C.Rp.call(this,a);O.set(kEa,this.j)};function C9(){y_.call(this);this.id="overview";this.control=null}w(C9,y_);C9.prototype.init=function(){var a=O.get(kEa,!1);this.control=new B9({collapsed:a,label:"\u00ab",collapseLabel:"\u00bb",layers:[un(T.u().Y()).g[0]]});T.u().Y().controls.push(this.control)};function D9(a){return"file"!==a.l&&"local"!==a.l}function lEa(a,b,c){a=a.O();if(a instanceof xN){var d=a.o;if(d&&(d=d.j)&&D9(d)){var e=d.g;e||(e=new af,Ze(d,e));for(var f in b)e.set(f,b[f]);c&&c.forEach(function(a){e.remove(a)});a.refresh()}}else if(P(a,"os.ol.source.IUrlSource")){var h=a.gf();h&&(Cc(h,b),c&&c.forEach(function(a){delete h[a]}),a.updateParams(h))}}
function mEa(a,b){if(a){var c=a.O();if(c instanceof xN){if(a="string"==typeof b?b:b[0],b=c.o)if(b=b.j)a=String(a).match(Ue),We(b,a[1]||"",!0),b.A=$e(a[2]||""),b.j=$e(a[3]||"",!0),Xe(b,a[4]),Ye(b,a[5]||"",!0),c.refresh()}else P(c,"os.ol.source.IUrlSource")&&(b&&("string"==typeof b?c.Lb(b):0<b.length&&c.Qk(b)),P(a,"os.layer.ILayer")&&a.di("refresh"))}};W.directive("editrequestparams",[function(){return{restrict:"E",replace:!0,scope:{layer:"=",params:"="},templateUrl:"v1542394219/views/plugin/params/editrequestparams.html",controller:E9,controllerAs:"ctrl"}}]);
function E9(a,b){y.call(this);this.scope=a;this.element=b;this.g=0;this.initialKeys=[];this.multiUrl=!1;this.urls=this.selected=this.params=null;var c=a.layer||null;b=null;c&&(c=c.O(),c instanceof xN?(c=c.o)&&(c=c.j)&&(b=c.toString().replace(/\?.*/,"")||null):P(c,"os.ol.source.IUrlSource")&&(c=c.urls)&&(b=c.slice()));"string"==typeof b?(this.urls=[b],this.multiUrl=!1):b&&(this.urls=b,this.multiUrl=!0);if(b=a.params){this.params=[];for(var d in b)this.initialKeys.push(d),this.params.push({id:this.g++,
field:d,value:b[d]})}this.gridOptions={asyncEditorLoading:!1,autoEdit:!0,editable:!0,enableCellNavigation:!0,forceFitColumns:!0,fullWidthRows:!0,multiColumnSort:!1,multiSelect:!1};d=new FF("Field","field");d.editor=Slick.Editors.Text;b=new FF("Value","value");b.editor=Slick.Editors.Text;this.gridColumns=[d,b];a.$on("$destroy",this.dispose.bind(this));a.$emit("window.ready")}w(E9,y);E9.$inject=["$scope","$element"];E9.prototype.J=function(){E9.C.J.call(this);this.element=this.scope=null};
E9.prototype.cancel=function(){this.close()};E9.prototype.cancel=E9.prototype.cancel;E9.prototype.confirm=function(){this.scope&&this.scope.$broadcast("slickgrid.commitEdit");var a=this.scope.layer;if(a){if(this.params){var b={},c=[];this.params.forEach(function(a){var c=Yb(a.field);Lb(c)||(b[c]=Yb(a.value))});this.initialKeys.forEach(function(a){a in b||c.push(a)});lEa(a,b,c)}if(this.urls){var d=this.urls.filter(function(a){return!Lb(a)});0<d.length&&mEa(a,d)}}this.close()};
E9.prototype.confirm=E9.prototype.confirm;E9.prototype.close=function(){KE(this.element)};E9.prototype.GB=function(){this.params&&(this.params=this.params.concat([{id:this.g++,field:"",value:""}]))};E9.prototype.addRow=E9.prototype.GB;E9.prototype.xM=function(){this.selected&&this.params&&(qb(this.params,this.selected),this.params=this.params.slice())};E9.prototype.removeRow=E9.prototype.xM;E9.prototype.IB=function(){this.multiUrl&&this.urls&&this.urls.push("")};E9.prototype.addUrl=E9.prototype.IB;
E9.prototype.AM=function(a){null!=a&&this.urls&&this.urls.length>a&&this.urls.splice(a,1)};E9.prototype.removeUrl=E9.prototype.AM;E9.prototype.FD=function(a){return this.multiUrl?"URL "+(a+1):"URL"};E9.prototype.getUrlLabel=E9.prototype.FD;
E9.prototype.kN=function(){if(!this.urls||0==this.urls.length||this.urls.every(Lb))return this.errorMsg=(this.multiUrl?"At least one ":"")+"URL must be defined.",!1;if(this.params)for(var a=0;a<this.params.length;a++){var b=this.params[a];if(!Lb(Yb(b.value))&&Lb(Yb(b.field)))return this.errorMsg="Value defined without a Field.",!1}this.errorMsg="";return!0};E9.prototype.testValid=E9.prototype.kN;function nEa(a){this.visible=!1;if(a&&1===a.length&&(a=IA(a))&&1===a.length&&a[0]instanceof sl){a:{a=a[0];var b=a.O();if(b instanceof xN){if(a=b.o){a=a.j;a=null!=a&&D9(a);break a}}else if(P(a,"os.layer.ILayer")&&P(b,"os.ol.source.IUrlSource")){a=!0;break a}a=!1}this.visible=a}}
function oEa(a){if((a=IA(a.getContext()))&&1===a.length&&a[0]instanceof sl){a=a[0];var b=null,c=a.O();c instanceof xN?(c=c.o)&&(c=c.j)&&D9(c)&&(b=Qfa(c.g)):P(c,"os.ol.source.IUrlSource")&&(c=c.gf())&&(b=Gs(c));FE({id:"editParams",label:"Edit Parameters",icon:"fa fa-gears",key:"editparams",x:"center",y:"center",width:450,"min-width":450,"max-width":0,height:350,"min-height":250,"show-close":!0,modal:!0},'<editrequestparams layer="layer" params="params"></editrequestparams>',void 0,void 0,void 0,{layer:a,
params:b})}else At(Ct,"Unexpected layer selection. Please select a single layer and try again.",ss)};function F9(){y_.call(this);this.id="params"}w(F9,y_);wa(F9);F9.prototype.J=function(){F9.C.J.call(this);var a=eZ;a&&!a.Ha().find("params:edit")&&(a=a.Ha().find("Layer"))&&a.removeChild("params:edit")};F9.prototype.init=function(){var a=eZ;a&&!a.Ha().find("params:edit")&&a.Ha().find("Layer").R({label:"Edit Parameters...",eventType:"params:edit",tooltip:"Edit request parameters for the layer",da:['<i class="fa fa-fw fa-gears"></i>'],Aa:nEa,ya:oEa,qa:"params.editParams"})};W.directive("peliasgeocoderattrcard",[function(){return{replace:!0,restrict:"E",templateUrl:"v1542394219/views/plugin/pelias/geocoder/attrcard.html",controller:pEa,controllerAs:"attrCtrl"}}]);function pEa(a,b){a=a.result.xi();for(var c="",d=0,e=a.length;d<e;d++)c+="<div>"+a[d]+"</div>";b.html(c)}pEa.$inject=["$scope","$element"];W.directive("peliasgeocoderresultcard",[function(){return{restrict:"E",templateUrl:"v1542394219/views/plugin/pelias/geocoder/resultcard.html",controller:G9,controllerAs:"resultCtrl"}}]);function G9(a,b){i_.call(this,a,b)}w(G9,i_);G9.$inject=["$scope","$element"];function H9(a){k_.call(this,a,"name");this.j=95+a.get("confidence")}w(H9,k_);H9.prototype.g=function(){return'<peliasgeocoderresultcard result="result"></peliasgeocoderresultcard>'};function I9(a){A7.call(this,"pelias.geocoder",a);this.type="pelias.geocoder";this.format=new DD;this.s=qEa}w(I9,A7);var qEa=E.V("plugin.pelias.geocoder.Search");
I9.prototype.Ql=function(){var a=O.get(["plugin","pelias","geocoder","url"]);if(O.get(["plugin","pelias","geocoder","extentParams"])){var b=O.get(["plugin","pelias","geocoder","extentThreshold"],2E5),c=T.u().Y().aa();c=Zi(c,N,"EPSG:4326");c[0]=Ir(c[0]);c[2]=Ir(c[2]);osasm.geodesicInverse(c.slice(0,2),c.slice(2,4)).distance<=b&&(a+="&boundary.rect.min_lat="+c[1]+"&boundary.rect.min_lon="+c[0]+"&boundary.rect.max_lat="+c[3]+"&boundary.rect.max_lon="+c[2])}O.get(["plugin","pelias","geocoder","focusPoint"])&&
(b=O.get(["plugin","pelias","geocoder","focusPointMinZoom"],4),M(T.u().Y()).Vl()>=b&&(b=$k(M(T.u().Y()))))&&(b=Vi(b,N),a+="&focus.point.lat="+b[1]+"&focus.point.lon="+b[0]);return a};
I9.prototype.Bh=function(a){var b=a.target;try{var c=JSON.parse(b.g)}catch(l){E.error(this.s,"The result JSON was malformed",l)}if(c&&(b=c.features,c={featureProjection:N},b))for(var d=0,e=b.length;d<e;d++)try{var f=b[d].bbox,h=this.format.Rr(b[d],c);f&&h.set("extent",f,!0);var k=h.la;k.housenumber&&k.street&&k.postalcode&&(k.address=[k.housenumber+" "+k.street,k.locality,k.region_a||k.region,k.postalcode].join(", "));this.g.push(new H9(h))}catch(l){E.error(this.s,"There was an error parsing a result",
l)}I9.C.Bh.call(this,a)};function J9(){y_.call(this);this.id="pelias.geocoder"}w(J9,y_);J9.prototype.init=function(){O.get(["plugin","pelias","geocoder","url"])&&hU(gU.u(),new I9("Place search (Pelias)"))};var rEa="description _mdDescription centerShape shape labels showLabels showLabelColumns labelColor labelSize ALTITUDE ALTITUDE_UNITS SEMI_MAJOR SEMI_MINOR SEMI_MAJ_UNITS SEMI_MINOR_UNITS ORIENTATION BEARING".split(" ");
function sEa(a,b){var c=qF(a,P1);c.ga(H(c));var d=a.get("_style")||b||$B;d=pH(a,d,b);b=oH(d);!b&&d.image&&(delete d.image.src,delete d.image.scale);c.set("_style",d);if(d=RB(a)||SB)d==SB&&(d=b?"Icon":"Point"),d=d.replace(/^Selected /,""),c.set("shape",d);if(a=TB(a)||SB)a=a.replace(/^Selected /,""),c.set("centerShape",a);return c}function K9(a){return(a=c2(a))?(a=a.na())&&a.length?a[0]:null:null};W.directive("placesnodeui",[function(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.addFolder()"><i class="fa fa-folder fa-fw c-glyph" title="Create a new folder"></i></span><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.addPlace()"><i class="fa fa-map-marker fa-fw c-glyph" title="Create a new place"></i></span><span ng-if="nodeUi.isRemovable()" ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the place></i></span></span>',
controller:L9,controllerAs:"nodeUi"}}]);function L9(a,b){OK.call(this,a,b)}w(L9,OK);L9.$inject=["$scope","$element"];L9.prototype.Ef=function(){var a=this.scope.item;a&&(a=K9(a))&&W1({parent:a})};L9.prototype.addFolder=L9.prototype.Ef;L9.prototype.uj=function(){var a=this.scope.item;a&&(a=K9(a))&&X1({parent:a})};L9.prototype.addPlace=L9.prototype.uj;L9.prototype.hh=function(){var a=this.scope.item;return a?f7(a):!1};L9.prototype.canEdit=L9.prototype.hh;L9.prototype.remove=function(){p2.u().pc()};
L9.prototype.remove=L9.prototype.remove;function p2(){A.call(this);this.B=tEa;this.j=this.l=this.g=null;this.A=this.s=!1;this.o=new le(this.GM,250,this);C.H("reset",this.ML,!1,this);C.H("spatial:updateFeature",this.nz,!1,this);C.H("spatial:restoreFeature",this.nz,!1,this)}w(p2,A);wa(p2);var tEa=E.V("plugin.places.PlacesManager"),M9=Sw(btoa("//plugin.places"));g=p2.prototype;g.J=function(){p2.C.J.call(this);uEa(this)};g.Xy=function(){tf(py(my.u(),M9),this.KL,this.Ak,this)};g.pc=function(){this.g&&(this.g.hg(!0),T.u().pc(this.g,!1))};
g.KL=function(a){if(a){a=new g7;var b={animate:!0,color:"rgba(255,255,255,1)",collapsed:!0,columns:P1,editable:!0,id:"places",layerType:"Reference Layers",load:!0,provider:ws()||null,showLabels:!1,showRoot:!1,title:"Saved Places",type:"kml",url:M9},c=O.get("places.options");c&&zs(c,b,!0);this.g=a.Ye(b);this.g.hg(!1);this.g.P=!0;this.g.Nk(b);this.g.ye("");this.g.gg("");this.g.Bf("<placesnodeui></placesnodeui>");this.g.yf=va;this.l=this.g.O();I(this.l,"propertychange",this.NL,this);this.l.mb()||vEa(this)}else this.A?
this.Ak("Failed saving empty place content to storage."):(this.A=!0,tf(N9('<kml xmlns="http://www.opengis.net/kml/2.2"><Document><name>Saved Places</name></Document></kml>'),this.Xy,this.Ak,this))};g.Ak=function(a,b){E.error(this.B,a,b)};function uEa(a){a.pc();Ma(a.g);a.g=null;a.l=null;a.j=null}g.ML=function(){uEa(this);wt++;tf(N9('<kml xmlns="http://www.opengis.net/kml/2.2"><Document><name>Saved Places</name></Document></kml>'),vt,vt)};
function N9(a){var b=my.u();a=Qw("Saved Places",M9,void 0,a);return ry(b,a)}g.GM=function(){if(this.j){var a=this.j,b=new h7;b.js(rEa);b.Qh("Saved Places");b.setItems(a&&a.na()||[]);v6(b,!0);b.Ra("complete",this.IL,!1,this);b.Ra("error",this.JL,!1,this);b.Xc()}this.g&&O.set("places.options",this.g.sa())};g.IL=function(a){a=a.target;var b=a.Yf||"";a.dispose();null!=b?N9(b):this.Ak("Failed exporting places to browser storage. Content was empty.")};g.JL=function(a){a.target.dispose();this.Ak("Failed exporting places to browser storage.")};
function wEa(a,b){if(b&&(b.gh=b.Tc(),b!==a.j&&(b.P=!0,b.L=!0,b.U=!0),b=b.na()))for(var c=0;c<b.length;c++)wEa(a,b[c])}g.NL=function(a){var b=a.l;"loading"===b?this.l.mb()||vEa(this):!this.o||"featureVisibility"!==b&&"features"!==b||(b=a.s,(a.o||b)&&this.o.start())};
function vEa(a){if(a.l){a.j=a.l.P.na()[0];if(a.j&&(wEa(a,a.j),a.j.collapsed=!1,a.j.H("propertychange",a.LL,!1,a),null==T.u().W("places")&&a.g)){a.g.hg(!1);var b=sA.u(),c=uA(b,"places");Ky(T.u(),a.g);c||(wA(b,"places","draw",!1),b.update(),b.save())}a.s=!0;a.dispatchEvent("loaded")}}g.LL=function(){this.o&&this.o.start()};g.nz=function(){this.l.mn()};W.directive("saveplaces",[function(){return{restrict:"E",scope:{initSources:"&"},templateUrl:"v1542394219/views/plugin/places/saveplaces.html",controller:O9,controllerAs:"ctrl"}}]);
function O9(a,b){bQ.call(this,a);this.element=b;this.config={title:"",description:"",tags:"",features:[]};this.columns=[];this.descSample=this.titleSample="";this.help={title:"Custom title given to all saved places.",titleColumn:"Column used to apply titles to all saved places. If a selected item doesn't have this field defined, a generic title will be given. You may also choose to apply a custom title to new places.",description:"Description applied to all saved places.",descColumn:"Column used to apply descriptions to all saved places. If a selected item doesn't have this field defined, the description will be left blank. You may also choose to apply a custom description to new places.",
tags:"Comma-delimited list of tags to apply to all saved places. Tags can be used to group or search places in the Layers tab of the Layers window.",tagsColumn:"Column used to apply tags to all saved places. Tags can be used to group or search places in the Layers tab of the Layers window.  If an item doesn't have this field defined, the tags will be left blank. You may also choose to provide your own custom tags."};a.$on("exportoptions:change",this.g.bind(this));setTimeout(function(){a.$emit("window.ready")},
0)}w(O9,bQ);O9.$inject=["$scope","$element"];O9.prototype.J=function(){O9.C.J.call(this);this.element=null};O9.prototype.cancel=function(){KE(this.element)};O9.prototype.cancel=O9.prototype.cancel;
O9.prototype.confirm=function(){var a=this.config,b;if(b=p2.u().j){var c=a.features;if(c&&0!=c.length){var d=MB(c[0]);if(d){for(var e=null!=c[0]?PB(c[0],d):void 0,f=[],h=1,k,l=0;l<c.length;l++){var m=c[l];if(m){var n=sEa(m,e);if(a.titleColumn)var p=m.get(a.titleColumn.field);else a.title&&(p=a.title,1<a.features.length&&(p+=" "+(l+1)));p||(p="Unnamed Placemark "+h++);n.set("name",p);m=a.descColumn?m.get(a.descColumn.field):a.description;n.set("description",m);n=b2({feature:n});f.push(n)}}a=d.S();
if(c=b.na())for(l=0;l<c.length;l++)if(c[l].ba()==a){k=c[l];break}if(k){b=[];for(l=0;l<f.length;l++)b.push(new T1(f[l],k));k=new oF;k.Zb(b)}else k=a2({name:a}),k.zc(f),k=new T1(k,b);f=f.length;k.title="Save "+f+" Place"+(1<f?"s":"")+" from "+a;gF(EF,k)}}}At(Ct,"Added "+this.count+" feature"+(1<this.count?"s":"")+" to the Saved Places layer.",ts);this.cancel()};O9.prototype.confirm=O9.prototype.confirm;O9.prototype.sp=function(a){return"places"!=a.D()};
O9.prototype.g=function(a,b,c){a.stopPropagation();this.config&&(this.config.features&&(this.config.features.length=0,b&&0<b.length&&(this.config.features=this.config.features.concat(b))),this.columns=c&&0<c.length?c[0].getColumns().slice():[],this.columns.sort(YF))};function P9(a){this.visible=!1;if(this.eventType&&a&&1==a.length){var b=a[0];if(b instanceof Y1){var c=p2.u();c=c.j.Ha();var d=c===b.Ha();if(d)switch(this.eventType){case "places:addFolder":case "places:addPlacemark":this.visible=b.Tc()&&b.gh;break;case "places:editFolder":this.visible=b.Tc()&&b.P;break;case "places:editPlacemark":this.visible=!b.Tc()&&b.P;break;case "places:export":this.visible=null!=c&&b.Ha()==c;break;case "places:removePlace":this.visible=b.Tc()||b.Ke()?!1:b.U;break;case "places:removeAll":this.visible=
!1;break;default:this.visible=b.Tc()}}else if(b instanceof d7)switch(a=b.W(),a=null!=a&&"places"==a.D(),this.eventType){case "places:export":this.visible=a;break;case "places:addFolder":case "places:addPlacemark":this.visible=a&&f7(b);break;case "places:removeAll":this.visible=a&&b.Ke()}}else if(a&&1<a.length)for(var e=0;e<a.length;e++){b=a[e];if(b instanceof Y1){c=p2.u();c=c.j.Ha();d=c===b.Ha();if(!d){this.visible=!1;break}switch(this.eventType){case "places:removePlace":this.visible=b.U;break;default:this.visible=
!1}}else this.visible=!1;if(!this.visible)break}}function xEa(a){a=BI(a);return 1===a.length?"places"===a[0].get("sourceId"):!1}function yEa(a){this.visible=!1;xEa(a)||1!==AI(a).length||(this.visible=!0)}function zEa(a){this.visible=xEa(a)}function AEa(a){a=BI(a.getContext());if(1===a.length){a=a[0];var b=V.O("places");if(b){a:{if(a){var c=a.D();if((b=b.I[c]||null)&&b.getFeature()===a)break a}b=null}b&&X1({feature:a,node:b})}}}
function Q9(a){var b=a.getContext();if(b&&1==b.length){var c=b[0];if(c instanceof Y1){var d=c.O();if(d)switch(a.type){case "places:addFolder":W1({parent:c});break;case "places:addPlacemark":X1({parent:c});break;case "places:editFolder":W1({node:c});break;case "places:editPlacemark":X1({feature:c.getFeature(),node:c});break;case "places:export":q2(c);break;case "places:removePlace":a=new U1(c),gF(EF,a)}}else if(c instanceof d7){var e=c2(c).na()[0];if(e)switch(a.type){case "places:addFolder":W1({parent:e});
break;case "places:addPlacemark":X1({parent:e});break;case "places:export":q2(e);break;case "places:removeAll":a=c.na();e=[];for(var f=0;f<a.length;f++)c=new U1(a[f]),e.push(c);e.length&&(a=new iO,a.Zb(e),a.title="Remove Place"+(1<e.length?"s":""),gF(hF.u(),a))}}}else if(b&&1<b.length){e=[];for(f=0;f<b.length;f++)if(c=b[f],c instanceof Y1&&(d=c.O()))switch(a.type){case "places:removePlace":c=new U1(c),e.push(c)}e.length&&(a=new iO,a.Zb(e),a.title="Remove Place"+(1<e.length?"s":""),gF(hF.u(),a))}}
function BEa(a){this.visible=!1;if(a&&1==a.length){var b=p2.u().j;if(b)if(a[0]instanceof d7)a=K9(a[0]),this.visible=null!=a&&a!=b;else if(a[0]instanceof HA){if(b=a[0].W(),"places"!=b.D()&&b instanceof MK)if(b instanceof e7)this.visible=!0;else if(b=b.O(),b instanceof vL&&0<b.Z){var c=b.fe();this.visible=null!=c&&0<c.length}}else a[0]instanceof Y1&&(c=a[0].Oa(),this.visible=a[0].Ha()!=b.Ha()&&0<c.length)}}
function CEa(a){var b=a.getContext();b&&a instanceof z&&!Ee()&&(a.preventDefault(),a.stopPropagation(),a=p2.u().j,X1({geometry:new Jk(b),parent:a}))}function DEa(a){var b=a.getContext();if(b&&a instanceof z&&!Ee()){a.preventDefault();a.stopPropagation();a=p2.u().j;var c,d,e=BI(b);if(1===e.length){var f=JB(e[0]);(d=e[0].X())&&(c=d.clone());d=e[0].get("recordTime")}else b=AI(b),1===b.length&&(c=b[0].clone());c&&X1({geometry:c,parent:a,name:f,time:d})}}
function EEa(a){var b=a.getContext();b&&a instanceof z&&!Ee()&&(a.preventDefault(),a.stopPropagation(),a=p2.u().j,b&&1==b.length&&(b[0]instanceof d7?(b=c2(b[0]).na())&&b!=a&&R9(b):b[0]instanceof HA?(b=b[0].W(),"places"!=b.D()&&(b instanceof e7?(b=(a=b.O())?a.P:void 0)&&R9(b):a&&b instanceof MK&&(a=b.O(),IE("savePlaces")?HE("savePlaces"):FE({id:"savePlaces",label:"Save to Places",icon:"fa fa-map-marker",x:"center",y:"center",width:425,"min-width":300,"max-width":800,height:"auto","show-close":!0},
'<saveplaces init-sources="initSources"></saveplaces>',void 0,void 0,void 0,{initSources:a?[a]:void 0})))):b[0]instanceof Y1&&b[0].Ha()!=a&&R9(b[0])))}function R9(a){var b=p2.u().j;if(b){q(a)||(a=[a]);for(var c=[],d=0;d<a.length;d++){var e=a[d],f=FEa(e);f&&(f=new T1(f,b),f.title="Save "+e.ba()+" to Places",c.push(f))}a=new oF;a.Zb(c);gF(hF.u(),a)}}
function FEa(a){var b=null;if(a.Tc()){if(b=a2({name:a.ba()||"Unnamed Folder"}),a=a.na())for(var c=0;c<a.length;c++){var d=FEa(a[c]);d&&b.R(d)}}else if(a=a.getFeature())a=sEa(a),b=b2({feature:a});return b};function S9(){y_.call(this);this.id="places"}w(S9,y_);wa(S9);var GEa=E.V("plugin.places.PlacesPlugin");S9.prototype.J=function(){S9.C.J.call(this);var a=eZ;(a=a?a.Ha().find("Tools"):void 0)&&a.removeChild("Saved Places");(a=bU)&&(a=a.Ha().find("Coordinate"))&&a.removeChild("places:saveToPlaces");if(a=bU)if(a=a.Ha().find("Tools"))a.removeChild("places:saveToPlaces"),a.removeChild("places:editPlacemark")};
S9.prototype.init=function(){try{p2.u().Xy();var a=eZ;a&&!a.Ha().find("Saved Places")&&a.Ha().R({label:"Saved Places",type:"group",sort:fZ++,children:[{label:"Add Folder",eventType:"places:addFolder",tooltip:"Creates a new folder and adds it to the tree",da:['<i class="fa fa-fw fa-folder"></i>'],Aa:P9,ya:Q9,qa:"places.addFolder"},{label:"Add Place",eventType:"places:addPlacemark",tooltip:"Creates a new saved place",da:['<i class="fa fa-fw fa-map-marker"></i>'],Aa:P9,ya:Q9,qa:"places.addPlace"},{label:"Edit Folder",
eventType:"places:editFolder",tooltip:"Edit the folder label",da:['<i class="fa fa-fw fa-pencil"></i>'],Aa:P9,ya:Q9,qa:"places.contextMenu.editFolder"},{label:"Edit Place",eventType:"places:editPlacemark",tooltip:"Edit the saved place",da:['<i class="fa fa-fw fa-pencil"></i>'],Aa:P9,ya:Q9,qa:"places.contextMenu.editPlacemark"},{label:"Export Places...",eventType:"places:export",tooltip:"Exports Saved Places from the selected location",da:['<i class="fa fa-fw fa-download"></i>'],Aa:P9,ya:Q9,qa:"places.contextMenu.export"},
{label:"Save to Places...",eventType:"places:saveToPlaces",tooltip:"Copies selected features to the Saved Places layer, or all features if none selected",da:['<i class="fa fa-fw fa-map-marker"></i>'],Aa:BEa,ya:EEa,qa:"places.contextMenu.saveTo"},{label:"Remove",eventType:"places:removePlace",tooltip:"Removes the place",da:['<i class="fa fa-fw fa-times"></i>'],Aa:P9,ya:Q9,qa:"places.removePlace"},{label:"Remove All",eventType:"places:removeAll",tooltip:"Removes all of the places",da:['<i class="fa fa-fw fa-times"></i>'],
Aa:P9,ya:Q9,qa:"places.removeAll"}]});if((a=bU)&&!a.Ha().find("places:saveToPlaces")){var b=a.Ha().find("Coordinate");b&&b.R({label:"Save to Places...",eventType:"places:saveToPlaces",tooltip:"Creates a new saved place from this location",da:['<i class="fa fa-fw fa-map-marker"></i>'],ya:CEa})}if(b=mF){var c=b.Ha().find("Tools");c.find("places:saveToPlaces")||(c.R({eventType:"places:saveToPlaces",label:"Save to Places...",tooltip:"Creates a new saved place from the area",da:['<i class="fa fa-fw fa-map-marker"></i>'],
Aa:yEa,ya:DEa}),c.R({eventType:"places:editPlacemark",label:"Edit Place",tooltip:"Edit the saved place",da:['<i class="fa fa-fw fa-pencil"></i>'],Aa:zEa,ya:AEa}))}}catch(d){E.error(GEa,"Failed initializing Places plugin:",d)}};function T9(){Gn.call(this,{handleEvent:HEa});this.g=bb(On,Qn)}w(T9,Gn);P(T9,"os.I3DSupport");T9.prototype.yc=function(){return!0};function HEa(a){var b=!1;if("keydown"==a.type&&this.g(a)){var c=a.originalEvent.keyCode;b=!0;switch(c){case 190:Q(R.u(),"map.keyboard.copyCoordinates",1);IEa();break;default:b=!1}}b&&a.preventDefault();return!b};function U9(){y_.call(this);this.id="position"}w(U9,y_);wa(U9);U9.prototype.init=function(){if(bU){var a=bU,b=a.Ha().find("Coordinate");b&&b.R({label:"Copy Coordinates",eventType:"copy",tooltip:"Copy coordinates to clipboard",da:['<i class="fa fa-fw fa-sticky-note"></i>'],ig:".",qa:"map.contextMenu.copyCoordinates"});a.H("copy",JEa)}T.u().Y().interactions.push(new T9)};function JEa(a){IEa(a.getContext())}
function IEa(a){Q(R.u(),"map.features.copyCoordinates",1);for(var b=T.u().Y().controls.g,c=null,d=0,e=b.length;d<e;d++)if(b[d]instanceof rP){c=b[d];break}if(c){b=c;if(a=a||b.ha.cd(b.l)){c="";a=Vi(a,M(b.ha).Wa());for(f in b.j)c+=(0,b.j[f])(a)+"\n";c=c.substring(0,c.length-1);var f=c.replace(/&deg;/g,"\u00b0")}else f="";f&&(IE("copyPosition")?HE("copyPosition"):FE({id:"copyPosition",label:"Copy Coordinates",icon:"fa fa-sticky-note",x:"center",y:"center",width:"300",height:"auto",modal:"true"},'<copy-position value="value"></copy-position>',
void 0,void 0,void 0,{value:f}))}};W.directive("lightstrip",[function(){return{restrict:"AE",replace:!0,template:'<canvas class="position-absolute" height="2" width=""></canvas>',controller:V9,LR:"ctrl"}}]);function V9(a,b){this.K=b;this.l=this.g=null;this.o=new Tg;this.o.H("resize",this.j.bind(this),!1);C.H(BW,this.j,!1,this);a.$on("$destroy",this.s.bind(this));this.j()}V9.$inject=["$scope","$element"];
V9.prototype.s=function(){this.K=this.v=null;this.o.dispose();this.o=null;Eh(this.g,"change:center",this.j,this);C.M(BW,this.j,!1,this)};var W9=[{label:"nightEnd",color:"navy"},{label:"sunrise",color:"lightskyblue"},{label:"sunset",color:"gold"},{label:"night",color:"lightskyblue"}];
V9.prototype.j=function(a){a instanceof AW&&(this.l=a.j);if(this.l&&(a=T.u().Y())){if(!this.g){this.g=M(a);if(!this.g)return;this.g.on("change:center",this.j,this)}if(a=$k(this.g)){this.K.attr("width",this.K.parent().width());var b=this.K[0].getContext("2d"),c=this.K.width(),d=this.K.height();if(144E5<this.l.interval)b.clearRect(0,0,c,d);else{a=Vi(a,N);for(var e=this.l.start,f=this.l.end,h=f-e,k=e,l=e;k<f;l+=864E5){for(var m=SunCalc.getTimes(new Date(l),a[1],a[0]),n=0,p=W9.length;n<p;n++){var r=m[W9[n].label].getTime();
if(r>k){k=c*(k-e)/h;var u=Math.min(c*(r-e)/h,c);b.fillStyle=W9[n].color;b.fillRect(k,0,u-k,d);k=r}}b.fillStyle=W9[0].color;b.fillRect(u,0,c-u,d)}}}}};W.directive("suncalc",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1542394219/views/plugin/suncalc/suncalc.html",controller:X9,controllerAs:"ctrl"}}]);function X9(a,b){this.v=a;this.K=b;this.l=a.coord||null;this.g=hw.u();a.$on("$destroy",this.o.bind(this));this.g.H("timeline.show",this.j,!1,this);this.j()}X9.$inject=["$scope","$element"];X9.prototype.o=function(){this.g.M("timeline.show",this.j,!1,this);this.K=this.v=null};X9.prototype.close=function(){KE(this.K)};
X9.prototype.close=X9.prototype.close;
X9.prototype.j=function(){var a=this.g.g;this.v.time=a;var b=new Date(a),c=this.l||$k(M(T.u().Y()));if(c){c=Vi(c,N);this.v.coord=c;a=SunCalc.getTimes(b,c[1],c[0]);var d=SunCalc.getPosition(b,c[1],c[0]);a=[{label:"Dawn",time:a.dawn.getTime(),color:"#87CEFA"},{label:"Sunrise",time:a.sunrise.getTime(),color:"#FFA500"},{label:"Solar Noon",time:a.solarNoon.getTime(),color:"#FFD700"},{label:"Sunset",time:a.sunset.getTime(),color:"#FFA500"},{label:"Dusk",time:a.dusk.getTime(),color:"#87CEFA"},{label:"Night",
time:a.night.getTime(),color:"#000080"}];this.v.sun={altitude:d.altitude*Du,azimuth:Du*(d.azimuth+Math.PI)%360};d=SunCalc.getMoonTimes(b,c[1],c[0]);c=SunCalc.getMoonPosition(b,c[1],c[0]);b=SunCalc.getMoonIllumination(b);this.v.moonAlwaysDown=d.alwaysDown;this.v.moonAlwaysUp=d.alwaysUp;d.rise&&a.push({label:"Moonrise",time:d.rise.getTime(),color:"#ddd"});d.set&&a.push({label:"Moonset",time:d.set.getTime(),color:"#2F4F4F"});for(var e="",f=KEa,h=0,k=f.length;h<k;h++)if(b.phase>=f[h].min&&b.phase<f[h].max){e=
f[h].label;break}this.v.moon={alwaysUp:d.alwaysUp,alwaysDown:d.alwaysDown,azimuth:Du*(c.azimuth+Math.PI)%360,altitude:c.altitude*Du,brightness:Math.ceil(100*b.fraction)+"%",phase:e};a=a.filter(LEa);a.forEach(MEa);kaa(a);[].push(a);this.v.times=a;X(this.v)}};
var KEa=[{label:"New Moon",min:0,max:.03},{label:"Waxing Crescent",min:.03,max:.22},{label:"First Quarter",min:.22,max:.28},{label:"Waxing Gibbous",min:.28,max:.47},{label:"Full Moon",min:.47,max:.53},{label:"Waning Gibbous",min:.53,max:.72},{label:"Last Quarter",min:.72,max:.78},{label:"Waning Crescent",min:.78,max:.97},{label:"New Moon",min:.97,max:1}];function LEa(a){return"string"===typeof a.time||!isNaN(a.time)}function MEa(a){var b=jv(a.color);a.textColor=iv(Kea(b))}
X9.prototype.OC=function(a){return"number"===typeof a?moment(a+wC).utc().format(tC[7]):a};X9.prototype.formatTime=X9.prototype.OC;X9.prototype.NC=function(a){return void 0!==a?moment(a+wC).utc().format(sC[20])+(0!==wC?" UTC":"")+xC:""};X9.prototype.formatDate=X9.prototype.NC;function Y9(){y_.call(this);this.id="suncalc"}w(Y9,y_);wa(Y9);Y9.prototype.init=function(){var a=bU;if(a){var b=a.Ha().find("Coordinate");b&&(b.R({label:"Sun/Moon Info",eventType:"suncalc",tooltip:"See sun/moon event times for this location",da:['<i class="fa fa-fw fa-sun-o"></i>']}),a.H("suncalc",NEa));(b=a.Ha().find("Options"))&&b.R({label:"Sunlight",eventType:"os.map.enableLighting",type:"check",tooltip:"Light the 3D globe with the Sun",ya:OEa,Aa:PEa})}};
function PEa(){this.visible=T.u().Qa();this.selected=!!O.get("os.map.enableLighting",!1)}function OEa(){O.set("os.map.enableLighting",!this.selected)}function NEa(a){FE({id:"suncalc",label:"Sun and Moon Info",icon:"fa fa-sun-o",x:"center",y:"center",width:400,"min-width":400,"max-width":0,height:400,"min-height":300,"max-height":0,"show-close":!0},"<suncalc></suncalc>",void 0,void 0,void 0,{coord:a.getContext()})};W.directive("tracknodeui",[function(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.addFolder()"><i class="fa fa-folder fa-fw c-glyph" title="Create a new folder"></i></span><span ng-if="nodeUi.isRemovable()" ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the layer and all saved tracks"></i></span></span></span>',controller:Z9,controllerAs:"nodeUi"}}]);
function Z9(a,b){OK.call(this,a,b)}w(Z9,OK);Z9.$inject=["$scope","$element"];Z9.prototype.Ef=function(){var a=this.scope.item;a&&(a=c2(a))&&W1({parent:a})};Z9.prototype.addFolder=Z9.prototype.Ef;Z9.prototype.hh=function(){var a=this.scope.item;return null!=a&&f7(a)};Z9.prototype.canEdit=Z9.prototype.hh;function QEa(a){e7.call(this,a);this.gg("");this.g=!0;this.l=!1;this.yf=va}w(QEa,e7);function $9(a){b7.call(this,a);this.Zr=!1;a=new Y1;a.Da("Tracks");a.Bb(this);c7(this,a)}w($9,b7);$9.prototype.fe=function(){return $9.C.fe.call(this,!0)};$9.prototype.Kr=function(a){$9.C.Kr.call(this,a);$Aa(this.P.Oa(!1))};$9.prototype.Rn=function(){$9.C.Rn.call(this);$Aa(this.P.Oa(!1))};$9.prototype.Ap=function(){return!1};function a$(){M_.call(this)}w(a$,g7);a$.prototype.W=function(a){return new QEa({source:a})};a$.prototype.O=function(){return new $9(void 0)};a$.prototype.pd=function(){return null};function b$(){A.call(this);this.j=[];this.g=[];this.l=T.u();this.B=hw.u();this.o=new ne(this.I.bind(this));this.A=new uR(this.G,1500,this)}w(b$,A);wa(b$);var REa=E.V("plugin.track.TrackManager");b$.prototype.J=function(){Ma(this.o);this.o=void 0;Ma(this.A);this.A=void 0;this.j.forEach(function(a){xh(a,"change",this.s,this)},this);this.j.length=0;this.g.length=0;this.B=this.l=void 0;b$.C.J.call(this)};
function SEa(a,b){b.forEach(function(a){a&&!kb(this.j,a)&&(this.j.push(a),I(a,"change",this.s,this))},a)}function TEa(a,b){b.forEach(function(a){if(a){xh(a,"change",this.s,this);sb(this.j,function(b){return b===a});sb(this.g,function(b){return b===a});for(var b=0;b<this.g.length;b++)this.g[b]==a&&rb(this.g,b)}},a)}b$.prototype.s=function(){var a=OM(this.B),b=NB.O("track");if(b)for(a=new Uv(a.start,a.end),this.g=jw(b.l,a,!1,!1),b=0;b<this.g.length;b++)kb(this.j,this.g[b])||rb(this.g,b);this.A.kf()};
b$.prototype.G=function(){this.o&&this.o.start(100,5E3)};b$.prototype.I=function(){try{var a=M(this.l.Y());if(!a||!Zk(a))return!1;var b=a.ab(),c=ev(this.l);if(bi(c,bu))return!1;if(this.l.Y().j){var d=this.g;a=[];if(d)for(var e=0;e<d.length;e++){var f=d[e].get("_currentPosition");f&&a.push(f.getCoordinates())}var h=Sh(a);fi(h)||Yh(Vh(c,-2),h)||this.l.oi(h,5,Pz(this.l,b))}}catch(k){E.error(REa,"Error checking if map was ready:",k)}return!0};W.directive("confirmtrack",[function(){return{restrict:"E",templateUrl:"v1542394219/views/plugin/track/confirmtrack.html",controller:c$,controllerAs:"confirm"}}]);function c$(a){var b=V6();this.tracks=b?b.Oa():[];this.track=this.tracks[0]||void 0;a.$watch("confirm.track",function(b){a.$parent.confirmValue=b});a.$emit("window.ready")}c$.$inject=["$scope"];c$.prototype.ED=function(a){var b=a.get("name");return b?b:"Unnamed Track (id ="+a.D()+")"};c$.prototype.getTrackName=c$.prototype.ED;
function UEa(){return new Oc(function(a,b){FE({label:"Choose a Track",icon:"fa fa-share-alt",x:"center",y:"center",width:300,"min-width":200,"max-width":1200,height:"auto",modal:"true","show-close":"false","no-scroll":"true"},"<confirm><confirmtrack></confirmtrack></confirm>",void 0,void 0,void 0,{confirmCallback:a,cancelCallback:b,yesText:"OK",yesIcon:"fa fa-check",yesButtonClass:"btn-primary",noText:"Cancel",noIcon:"fa fa-ban",noButtonClass:"btn-secondary"})})};function VEa(a){return a&&1==a.length&&a[0]instanceof HA&&(a=a[0].W(),a instanceof MK&&"track"!==a.D()&&(a=a.O(),a instanceof vL))?0<a.Z:!1}function WEa(a){this.visible=VEa(a)}function XEa(a){var b=V6();this.visible=null!=b&&Z1(b)&&VEa(a)}function YEa(a){var b;if(b=!!a)b=a?0<d$(a).length&&!ZEa(a):!1;this.visible=b}function $Ea(a){this.visible=!!a&&0<d$(a).length&&ZEa(a)}
function ZEa(a){if(a){var b=b$.u();a=d$(a);if(0<a.length){a:{for(var c=0;c<a.length;c++)if(!kb(b.j,a[c])){b=!1;break a}b=!0}return b}}return!1}function aFa(a){return a&&0<a.length?a.filter(function(a){return a instanceof Y1&&null!=a.getFeature()&&a.Ha()===V6()}):null}function bFa(a){if(a=a.getContext())a=d$(a),0<a.length&&SEa(b$.u(),a)}function cFa(a){if(a=a.getContext())a=d$(a),0<a.length&&TEa(b$.u(),a)}
function d$(a){var b=[];if(a)if(a.feature&&FAa(a.feature))b.push(a.feature);else if(q(a)&&1===a.length){var c=aFa(a);c.length===a.length&&b.push(c[0].getFeature())}else if(Ov(a,"os.source.Vector"))for(a=a.Wd.slice(),c=0;c<a.length;c++)FAa(a[c])&&b.push(a[c]);return b}
function dFa(a){var b=IA(a.getContext());b=1===b.length?b[0]:void 0;if(b instanceof wl){var c=b.O();if(c){var d=c.Wd.slice();0==d.length&&(d=c.Oa());if(0<d.length)switch(a.type){case "track:create":a=b.S()+" Track";WAa(a).then(function(a){UAa(d[0]).then(function(b){b={features:d,name:a,cN:b};var c=KAa(b);if(c){c=b2({feature:c});var e=V6(!0);e?(c=new T1(c,e),c.title="Create track from "+b.features.length+" features",gF(hF.u(),c)):E.error(U6,"Unable to create track: track layer missing")}else At(Ct,
"Track creation failed. There were no valid features to create a track from.",ss)})});break;case "track:addTo":UEa().then(function(a){if(a){var b=d,c=a.get("_sortField");if(c){var e=JAa(b,c);c=b.length-e.length;if(e.length){var l=a.get("_originalGeometry")||a.X();l.toLonLat();var m=l;if(m instanceof yr)l=m;else{l=m.flatCoordinates.slice();var n=m.layout,p=m.stride;m=m.Fd();for(var r=m.length;r--;){var u=m[r];l[u-p]!==l[u]&&360!==Math.abs(l[u-p])+Math.abs(l[u])||l[u-p+1]!==l[u+1]||!(3>p||l[u-p+2]===
l[u+2])||l.splice(u-p,p)}p=new yr([],n);zr(p,n,l);l=p}iu(l);n=l.flatCoordinates;p=l.stride;for(m=0;m<e.length;m++)r=e[m],u=Fr(n,r[r.length-1],p,p-1),0>u?pb(n,r,~u):c++}c<b.length&&(b=l,b.toLonLat(),b=Uu(b),iu(b),b.set("_normalized",!0),PAa(a),a.set("_originalGeometry",b),pD(a),e=X6(a,!0),l=Y6(a),Z6(a,e,l),OAa(a),W6(a),b.set("_dirty",!0),a.dispatchEvent(new U("change:originalGeometry")));c&&E.info(U6,"Skipped "+c+" features due to missing/duplicate sort value.")}else E.error(U6,"Unable to add features to track: track is missing sorting data.")}})}}}}
;function e$(){y_.call(this);this.id="track"}w(e$,y_);wa(e$);
e$.prototype.init=function(){var a=eZ;a&&!a.Ha().find("track:create")&&(a=a.Ha().find("Tools"),a.R({label:"Create Track",eventType:"track:create",tooltip:"Creates a new track by linking selected features (or all features if none are selected) in time order.",da:['<i class="fa fa-fw fa-share-alt"></i>'],qa:"track.create-layer",Aa:WEa,ya:dFa}),a.R({label:"Add to Track...",eventType:"track:addTo",tooltip:"Adds selected features (or all features if none are selected) to an existing track.",da:['<i class="fa fa-fw fa-share-alt"></i>'],
qa:"track.addTo-layer",Aa:XEa,ya:dFa}),a.R({label:"Follow Track",eventType:"track:followTrack",tooltip:"Follow the track as it animates.",da:['<i class="fa fa-fw fa-globe"></i>'],qa:"track.followTrack",Aa:YEa,ya:bFa}),a.R({label:"Unfollow Track",eventType:"track:unfollowTrack",tooltip:"Cancel following the track during animation.",da:['<i class="fa fa-fw fa-globe"></i>'],qa:"track.unfollowTrack",Aa:$Ea,ya:cFa}));if(a=mF)a=a.Ha().find("Features"),a.R({eventType:"track:followTrack",label:"Follow Track",
tooltip:"Follow the track as it animates.",da:['<i class="fa fa-fw fa-globe"></i>'],sort:80,Aa:YEa,ya:bFa}),a.R({eventType:"track:unfollowTrack",label:"Unfollow Track",tooltip:"Cancel following the track during animation.",da:['<i class="fa fa-fw fa-globe"></i>'],sort:90,Aa:$Ea,ya:cFa});Iv(Ev.u(),"track",a$)};function f$(a,b,c,d,e){this.s=a;this.A=b;this.B=c;this.G={unique:this.lA,contains:this.nC};this.I=e;PO.call(this,a[0]);this.title="Join Layer";this.j=null;this.o=ow(d||"Joined Layer")}w(f$,PO);g=f$.prototype;
g.Fa=function(){if(Yja(this)){this.state="executing";var a=this.s.map(this.uF,this);if(a){var b=g$(a[0].D()),c=b.O();this.j=c.D();b.Ta(this.o);c.Ta(this.o);b=h$(this.s);c.setColumns(eFa(a,b));var d=this.A.map(this.G[this.B]||this.lA),e=fFa(this.j),f=this.I;a=a.map(function(a,b){a=i$(a,f);return{data:0===b?a.map(e):a,ul:0===b,PE:d[b]}});a=Mda(a,gFa(b));c.Nc(a);this.state="success";return!0}}return!1};g.lA=function(a){return function(b){return b.get(a)}};
g.nC=function(a){this.g=[];return function(b,c){b=b.get(a);if(c&&-1==this.g.indexOf(b))this.g.push(b);else if(b){c=0;for(var d=this.g.length;c<d;c++){var e=this.g[c];if(e&&-1!=e.indexOf(b)||-1!=b.indexOf(e))return e}}return b}.bind(this)};function gFa(a){return function(b,c){var d=b.la,e=c.la,f;for(f in d)void 0===e[f]&&(e[f]=d[f]);if(a)for(d=b.get("sourceId"),e=c.get("sourceId"),b=[],d&&a[d]&&b.push(a[d]),e&&a[e]&&b.push(a[e]),d=0,e=b.length;d<e;d++)hFa(b[d],c);return c}}
g.uF=function(a){this.l=a;return this.O()};g.Cb=function(){this.state="reverting";this.j&&T.u().pc(this.j);this.state="ready";return!0};W.directive("mappingcounter",[function(){return{restrict:"E",replace:!0,scope:{sourceIds:"="},templateUrl:"v1542394219/views/plugin/vectortools/mappingcounter.html",controller:j$,controllerAs:"ctrl"}}]);
function j$(a){this.v=a;this.columnMappingHelp="Column Associations will put data from associated columns on the chosen layers into a single column on the resulting layer. This is useful when the layers you are joining have sparse data of the same type that you wish to analyze together in the resulting layer.";this.mappingCount=0;this.g();mQ.u().H("propertychange",this.g,!1,this);a.$on("$destroy",this.j.bind(this))}j$.$inject=["$scope"];
j$.prototype.j=function(){mQ.u().M("propertychange",this.g,!1,this);this.K=this.v=null};j$.prototype.g=function(){this.mappingCount=0;var a=h$(this.v.sourceIds),b;for(b in a)this.mappingCount+=kc(a[b]);X(this.v)};j$.prototype.hF=function(){Ura("columnMappingSettings")};j$.prototype.launchColumnMappings=j$.prototype.hF;W.directive("join",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/plugin/vectortools/join.html",controller:k$,controllerAs:"ctrl"}}]);
function k$(a,b){wR.call(this);this.v=a;this.K=b;this.j=a.sourceIds;this.name="Joined Layer";this.joinMethod="unique";this.chooseLayerHelp="Joining layers compares values in the chosen columns for each layer against the Primary Layer and combines features whose values match. If the values match, the feature from the other layer will be merged into the matching features in the Primary Layer.";this.joinMethodHelp="The Join Method determines how we compare values between columns.<ul><li> Exact Match: Joins two features when the value is exactly the same on both.</li><li> Contains: Joins two features when one value contains the other.</li>";
this.joinSources=this.j.map(iFa).sort(jFa);this.primarySource=this.joinSources[0].id;this.init();a.$on("$destroy",this.J.bind(this));a.$emit("window.ready")}w(k$,wR);k$.$inject=["$scope","$element"];g=k$.prototype;g.J=function(){k$.C.J.call(this);this.K=this.v=null};g.init=function(){k$.C.init.call(this);Uy.get("$timeout")(this.Hd.bind(this))};g.Yi=function(a){k$.C.Yi.call(this,a);qb(this.j,a.D());this.Hd()};g.Hq=function(a){try{var b=a.l}catch(c){return}"features"===b&&this.Hd()};
g.Hd=function(){this.v.joinForm.$setValidity("featureCount",!0);for(var a=this.count=0,b=this.j.length;a<b;a++){var c=NB.O(this.j[a]);c&&(this.count+=c.Oa().length)}0===this.count?(this.v.joinForm.$setValidity("featureCount",!1),this.popoverText="Nothing to join.",this.popoverTitle="No Features",this.featureCountText="Nothing to join."):2*this.count>Ry()&&(this.v.joinForm.$setValidity("featureCount",!1),this.popoverText="Too many features!",this.popoverTitle="Too Many Features",this.featureCountText=
"This join would result in too many features for OpenSphere to handle. Reduce the number of features you are joining and try again.");X(this.v)};g.close=function(){KE(this.K)};k$.prototype.close=k$.prototype.close;
k$.prototype.accept=function(){var a=this.joinSources.map(function(a){return a.id}),b=this.joinSources.map(function(a){return a.joinColumn.field}),c=a.indexOf(this.primarySource),d=a.splice(c,1);a=d.concat(a);d=b.splice(c,1);b=d.concat(b);a=new f$(a,b,this.joinMethod,this.name);gF(hF.u(),a);this.close()};k$.prototype.accept=k$.prototype.accept;function iFa(a){a=NB.O(a);return{id:a.D(),title:a.S(),cols:a.getColumns().sort(kFa)}}function kFa(a,b){return Pb(a.name,b.name)}
function jFa(a,b){return Pb(a.title,b.title)};function lFa(a,b){this.g=a;this.state="ready";this.title="Merge Layers";this.j="";this.l=ow(b||"Merged Layer")}g=lFa.prototype;g.state="ready";g.lb=!1;g.title="Merge layers";g.Ba=null;function mFa(a){for(var b=Array(a.g.length),c=0;c<a.g.length;c++)b[c]=NB.O(a.g[c]);return b}
g.Fa=function(){if("ready"!==this.state){this.Ba="Command not in ready state.";var a=!1}else mFa(this)?a=!0:(this.state="error",a=!1);if(a&&(this.state="executing",(a=mFa(this))&&0<a.length)){var b=g$({timeEnabled:!0}),c=b.O();this.j=c.D();b.Ta(this.l);c.Ta(this.l);b=h$(this.g);c.setColumns(eFa(a,b));for(var d=[],e=0;e<a.length;e++){var f=a[e];if(f)for(var h=i$(f,void 0),k=null,l=b[f.D()],m=0;m<h.length;m++){var n=h[m];if(n){k||(k=PB(n,f));var p=n,r=k;n=p.clone();n.ga(H(n));var u=p.get("_style")||
r||$B;r=pH(p,u,r);n.set("_style",r);if(u=RB(p))u==SB&&(u=oH(r)?"Icon":"Point"),u=u.replace(/^Selected /,""),n.set("shape",u);if(p=TB(p))p==SB&&(p=oH(r)?"Icon":"Point"),p=p.replace(/^Selected /,""),n.set("centerShape",p);l&&hFa(l,n);n.get("CONTRIBUTING_SOURCE")||n.set("CONTRIBUTING_SOURCE",f.S(!0),!0);d.push(n)}}}nM(c,"CONTRIBUTING_SOURCE");c.Nc(d);this.state="success";return!0}return!1};g.Cb=function(){this.state="reverting";T.u().pc(this.j);this.state="ready";return!0};W.directive("merge",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/plugin/vectortools/merge.html",controller:l$,controllerAs:"ctrl"}}]);function l$(a,b){wR.call(this);this.v=a;this.K=b;this.j=a.sourceIds;this.name="New Layer";this.featureCountText="";this.init();a.$on("$destroy",this.J.bind(this));a.$emit("window.ready")}w(l$,wR);l$.$inject=["$scope","$element"];g=l$.prototype;g.J=function(){l$.C.J.call(this);this.K=this.v=null};
g.init=function(){l$.C.init.call(this);Uy.get("$timeout")(this.Hd.bind(this))};g.Yi=function(a){l$.C.Yi.call(this,a);qb(this.j,a.D());this.Hd()};g.Hq=function(a){try{var b=a.l}catch(c){return}"features"===b&&this.Hd()};
g.Hd=function(){this.v.mergeForm.$setValidity("featureCount",!0);for(var a=this.count=0,b=this.j.length;a<b;a++){var c=NB.O(this.j[a]);c&&(this.count+=c.Oa().length)}0===this.count?(this.v.mergeForm.$setValidity("featureCount",!1),this.popoverText="Nothing to merge.",this.popoverTitle="No Features",this.featureCountText="Nothing to merge."):2*this.count>Ry()&&(this.v.mergeForm.$setValidity("featureCount",!1),this.popoverText="Too many features!",this.popoverTitle="Too Many Features",this.featureCountText=
"This merge would result in too many features for OpenSphere to handle. Reduce the number of features you are merging and try again.");X(this.v)};g.close=function(){KE(this.K)};l$.prototype.close=l$.prototype.close;l$.prototype.accept=function(){var a=new lFa(this.j,this.name);gF(hF.u(),a);this.close()};l$.prototype.accept=l$.prototype.accept;var nFa=1;function i$(a,b){b=b||nFa;switch(b){case 0:return a.Oa();case 1:return a.fe();case 2:return a.Wd.slice();case 3:return rja(a);case 4:return qja(a);default:return[]}}function fFa(a){return function(b){b=b.clone();b.hc=!1;b.set("sourceId",a,!1);b.Ue("_selectStyle",!1);b.Ue("_highlightStyle",!1);b.hc=!0;return b}}
function g$(a){var b=T.u(),c=$b(),d=new vL;d.ga(c);var e=new MK({source:d});e.ga(c);d.Ta(e.S());Ky(b,e);if(a)if("string"===typeof a){if(a=b.W(a))e.restore(a.sa()),a=ow(a.S()),e.Ta(a),d.Ta(a)}else e.restore(a);return e}
function h$(a){function b(a,b){k?(b.layer in a||(a[b.layer]={}),a[b.layer][b.column]=k):k=b.column;return a}function c(b){var c=h.indexOf(b.layer);return{column:b.column,layer:a[c],unit:b.unit}}function d(a,b){a=h.indexOf(a.layer);b=h.indexOf(b.layer);return Bb(a,b)}function e(a){return-1<h.indexOf(a.layer)}function f(a,b){return-1<h.indexOf(b.layer)?a+1:a}var h=a.map(oFa),k=null;return HD(mQ.u()).filter(function(a){return 1<a.getColumns().reduce(f,0)}).reduce(function(a,f){k=null;return f.getColumns().filter(e).map(c).sort(d).reduce(b,
a)},{})}function oFa(a){var b=V.Ja(a);return b&&P(b,"os.filter.IFilterable")?b.ff():a}function hFa(a,b){if(a)for(var c in a){var d=a[c];void 0===b.get(d)&&(b.set(d,b.get(c),!0),b.Ue(c))}}
function eFa(a,b){return a.reduce(function(a,b){return a.concat(b.getColumns().filter(function(b){if("string"===typeof b)return-1===a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if("string"!==typeof a[c]&&a[c].field===b.field)return!1;return!0}))},[]).filter(function(a){a="string"===typeof a?a:a.field;for(var c in b){var e=b[c];if(a in e&&a!==e[a])return!1}return!0}).map(function(a){return a.clone()})};function m$(a,b){PO.call(this,a);this.title="Copy Layer";this.g="";this.j=b}w(m$,PO);m$.prototype.Fa=function(){if(Yja(this)){this.state="executing";var a=this.O();if(a instanceof vL){var b=g$(a.D()).O();this.g=b.D();var c=fFa(this.g);a=i$(a,this.j);b.Nc(a.map(c));this.state="success";return!0}}return!1};m$.prototype.Cb=function(){this.state="reverting";T.u().pc(this.g);this.state="ready";return!0};function n$(){y_.call(this);this.id="vectortools"}w(n$,y_);wa(n$);
n$.prototype.init=function(){var a=eZ;if(a){var b=a.Ha().find("Tools"),c=["All","Shown","Selected","Unselected","Hidden"],d=1E3;[{label:"Copy",type:pFa,icon:"fa-copy",tooltip:"Creates a static copy of the layer"},{label:"Merge",type:o$,icon:"fa-compress",tooltip:"Merges multiple layers into a new static layer"},{label:"Join",type:p$,icon:"fa-object-group",tooltip:"Joins layers by a primary key"}].forEach(function(a){for(var e=b.R({label:a.label,type:"submenu",da:['<i class="fa fa-fw '+a.icon+'"></i>'],
sort:d++}),h=0,k=c.length;h<k;h++)e.R({label:c[h],eventType:a.type+" "+h,tooltip:a.tooltip,da:['<i class="fa fa-fw '+a.icon+'"></i>'],Aa:qFa,ya:rFa,sort:h})})}};var pFa="layer.copy",o$="layer.merge",p$="layer.join";function qFa(a){this.visible=!1;a&&0<a.length&&(this.visible=a.every(function(a){return a instanceof HA?(a=a.W(),a instanceof MK&&"draw"!==a.D()&&"Image"!==a.Qc()):!1}))}
function rFa(a){var b=a.type.split(/\s+/),c=b[0];1<b.length&&(nFa=parseInt(b[1],10));if((a=a.getContext())&&0<a.length)switch(c){case pFa:c=a.map(sFa).filter(CA).reduce(function(a,b){return a+b.Oa().length},0);if(2*c>Ry()){c="Heads up! The copy you just attempted would result in too many features for the tool. Reduce the number of features in your layers before copying.";At(zt.u(),c,ss);break}else if(0===c){c="Nothing to copy.";At(zt.u(),c,us);break}c=a.map(tFa).filter(CA);c.length&&(a=new iO,a.Zb(c),
gF(hF.u(),a));break;case o$:case p$:a=a.map(uFa).filter(CA),2>a.length?(c="You need to pick at least 2 layers for this operation. Please select another layer and try again.",At(zt.u(),c,ss)):c==o$?FE({label:"Merge "+a.length+" Layers",icon:"fa fa-compress","no-scroll":"true",x:"center",y:"center",width:"400",height:"auto","show-close":!0},"<merge></merge>",void 0,void 0,void 0,{sourceIds:a}):c==p$&&FE({label:"Join "+a.length+" Layers",icon:"fa fa-object-group","no-scroll":"true",x:"center",y:"center",
width:"500",height:"auto","show-close":!0},"<join></join>",void 0,void 0,void 0,{sourceIds:a})}}function uFa(a){return(a=GA(a))?a.D():void 0}function sFa(a){if(a=GA(a))return NB.O(a.D())||void 0}function tFa(a){return(a=GA(a))?new m$(a.D()):void 0};function q$(){y_.call(this);this.id="weather"}w(q$,y_);q$.prototype.init=function(){var a=vFa(),b=bU;a&&b&&(a=b.Ha().find("Coordinate"))&&(a.R({label:"Weather Forecast",eventType:"weather",tooltip:"Open the weather forecast for this location",da:['<i class="fa fa-fw fa-umbrella"></i>']}),b.H("weather",wFa))};function vFa(){var a=O.get(["weather","url"]);return a&&-1<a.indexOf("{lat}")&&-1<a.indexOf("{lon}")?a:null}
function wFa(a){a=a.getContext();var b=vFa();a=Vi(a,N);b&&(b=b.replace("{lon}",a[0].toString()),b=b.replace("{lat}",a[1].toString()),window.open(b,"_blank"))};function r$(a){a=a||{};var b=void 0!==a.projection?a.projection:"EPSG:3857";if(void 0!==a.tileGrid)var c=a.tileGrid;else{c={extent:jm(b),maxZoom:a.maxZoom,minZoom:a.minZoom,tileSize:a.tileSize};var d={};nh(d,void 0!==c?c:{});void 0===d.extent&&(d.extent=Li("EPSG:3857").aa());d.resolutions=im(d.extent,d.maxZoom,d.tileSize);delete d.maxZoom;c=new Vl(d)}gP.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:a.opaque,projection:b,reprojectionErrorThreshold:a.reprojectionErrorThreshold,
tileGrid:c,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0,transition:a.transition})}G(r$,gP);function s$(a){a.projection=void 0!==a.projection?a.projection:"EPSG:4326";this.o=a.zoomOffset||0;r$.call(this,a)}w(s$,r$);s$.prototype.Lb=function(a){a=this.urls=rva(a);this.bh(r0(fb(a,this.j,this)))};s$.prototype.Qk=function(a){this.urls=a;this.bh(r0(fb(a,this.j,this)))};
s$.prototype.j=function(a){var b=/\{z\}|%z/g,c=/\{x\}|%x/g,d=/\{y\}|%y/g,e=/\{-y\}/g,f=this.o;return function(h){if(null!==h)return a.replace(b,(h[0]+f).toString()).replace(c,h[1].toString()).replace(d,(-h[2]-1).toString()).replace(e,function(){return((1<<h[0])-h[2]-1).toString()})}};function t$(){t0.call(this)}w(t$,t0);t$.prototype.O=function(a){a&&!a.tileSize&&(a.tileSize=512);a=Gs(a);a.projection=this.projection;a.tileGrid=this.tileGrid;a.crossOrigin=this.crossOrigin;a.wrapX=this.projection.uh();return new s$(a)};function u$(){y_.call(this);this.id="xyz"}w(u$,y_);u$.prototype.init=function(){Iv(Ev.u(),"XYZ",t$)};function v$(a,b,c,d,e){RX.call(this,a,e,"v1542394219/","OpenSphere");this.Ma=d;this.j=new Lg(document);this.legend=this.timeline=!1;var f=f||document;f.addEventListener("mousedown",xA(AA));f.addEventListener("mouseup",xA(AA));f.addEventListener("contextmenu",xA(zA));ud&&qd&&Yd(document,"click",this.VL);od&&O.get(["showRedirect"],!0)&&(b=xFa+'<div class="mt-2">Detailed browser support can be found <a href="old.html">here</a>.</div><div class="form-check"><label class="form-check-label"><input type="checkbox" ng-model="mainCtrl.showRedirectChecked" class="form-check-input">Stop showing this message</label></div>',
cK({confirm:this.l.bind(this),cancel:yFa,prompt:b,yesText:"Continue",noText:"",noIcon:"",windowOptions:{label:"Browser Not Supported",icon:"fa fa-frown-o",x:"center",y:"center",width:"400",height:"auto",modal:"true","no-scroll":"true",headerClass:"bg-warning u-bg-warning-text"}}));Dla(yQ.u());b=KQ.u();NQ(b,"Data filters for supported layers.");OQ(b,"text/xml; subtype=FILTER",new rS);OQ(b,"*/*",new LY);Ela(b,"os",sS);tS=Uy.get("$sanitize");my.u();DR.u();b=DR.u();yX(b,new QR);yX(b,new Vla);yX(b,new hla);
yX(b,new Hz);yX(b,new Xla);yX(b,new ER);yX(b,new ema);yX(b,new tma);yX(b,new nka);yX(b,new GY);yX(b,new mma);b=LX.u();b.g||(b.g=new uQ,b.g.Da("OpenSphere"),b.g.fb("This window displays many of the features available in OpenSphere, and if you have used them."),b.g.collapsed=!1,b.j.R(b.g));Iv(Ev.u(),"static",VS);V=NB=EL.u();jta(AG,new eS);vU=fX.u();tU(new rU("exclusionAreas","Exclusion Areas",qQ,"Clear all exclusion query areas"));tU(new rU("queryEntries","Layer/Area/Filter query combinations",rua,
"Clears all layer/area/filter query combinations"));tU(new rU("layers","Layers",rQ,"Clear all layers except the defaults"));tU(new rU("mapPosition","Map Position",ula,"Reset map position to the default"));tU(new rU("nonQueryFeatures","Non-query Features",vla,"Clears features in the Drawing Layer except for query features"));tU(new rU("queryAreas","Query Areas",pQ,"Clear all spatial query areas"));tU(new rU("states","States",nZ,"Deactivate all states"));b=gU.u();b.B=g_;hU(b,new l_);b=hB.u();jB(b,new RS("instant"));
jB(b,new SS("instant"));jB(b,new TS("instant"));jB(b,new RS("start"));jB(b,new SS("start"));jB(b,new TS("start"));jB(b,new RS("end"));jB(b,new SS("end"));jB(b,new TS("end"));jB(b,new QS);jB(b,new wS);jB(b,new xS);jB(b,new ES);jB(b,new uS);jB(b,new VC);jB(b,new jM);jB(b,new yS);jB(b,new kM);jB(b,new lM);b=uY.u();c=this.YD.bind(this);b.j=c;c=this.Du.bind(this);b.l=c;b=new HF({type:"root",children:[{label:"Box",eventType:"box",tooltip:"Draw a box for query, selection, and zoom",da:['<i class="fa fa-fw fa-square-o"></i> '],
ya:lZ,sort:10},{label:"Circle",eventType:"circle",tooltip:"Draw a circle for query, selection, and zoom",da:['<i class="fa fa-fw fa-circle-o"></i> '],ya:lZ,sort:20},{label:"Polygon",eventType:"polygon",tooltip:"Draw a polygon for query, selection, and zoom",da:['<i class="fa fa-fw fa-star-o"></i> '],ya:lZ,sort:30},{label:"Choose Area",eventType:"chooseArea",tooltip:"Load data for a specific area",da:['<i class="fa fa-fw fa-list-ul"></i> '],ya:lZ,sort:110},{label:"Enter Coordinates",eventType:"enterCoordinates",
tooltip:"Enter coordinates to load data",da:['<i class="fa fa-fw fa-calculator"></i> '],ya:lZ,sort:120},{label:"Whole World",eventType:"queryWorld",tooltip:"Load data for the whole world",da:['<i class="fa fa-fw fa-map-o"></i> '],ya:lZ,sort:140}]});b.R({label:"drawMenuSeparator",type:"separator",sort:100});kZ=new IF(b);if(b=XY.Ha().find("enable"))b.Aa=YY(rta);if(b=XY.Ha().find("disable"))b.Aa=YY(qta);if(b=XY.Ha().find("filter:apply"))b.Aa=YY(tta);if(b=XY.Ha().find("filter:unapply"))b.Aa=YY(sta);if(b=
XY.Ha().find("export"))b.Aa=YY(uta);if(b=XY.Ha().find("filter:remove"))b.Aa=YY(uta);XY.H("enable",aZ);XY.H("disable",aZ);XY.H("filter:apply",aZ);XY.H("filter:unapply",aZ);XY.H("filter:remove",aZ);XY.H("export",aZ);mZ||(mZ=new IF(new HF({type:"root",children:[{label:"",eventType:"Major",type:"group",sort:0,children:[{label:"Add Data",eventType:"openwindow.addData",tooltip:"Browse the data catalog",da:['<i class="fa fa-fw fa-plus"></i>'],ya:CX,qa:"addData.open",sort:0},{label:"Open File or URL",eventType:"importFile",
tooltip:"Import data from a local file or a URL",da:['<i class="fa fa-fw fa-folder-open"></i>'],ig:(De()?"cmd":"ctrl")+"+o",qa:"addData.import",sort:1}]},{label:"",eventType:"Minor",type:"group",sort:1},{label:"Recent",eventType:"Recent",type:"group",Aa:Hta,sort:2}]})));bU||(bU=new IF(new HF({type:"root",children:[{label:"Map",type:"group",children:[{label:"Reset View",eventType:"resetView",tooltip:"Resets to the default view",da:['<i class="fa fa-fw fa-picture-o"></i>'],ig:"V",sort:10,qa:"map.contextMenu.resetView"},
{label:"Reset Rotation",eventType:"resetRotation",tooltip:"Resets to the default rotation",da:['<i class="fa fa-fw fa-compass"></i>'],ig:"R",sort:20,qa:"map.contextMenu.resetRotation"},{label:"Toggle 2D/3D View",eventType:"toggleView",tooltip:"Toggle the map view between 2D and 3D views",da:['<i class="fa fa-fw fa-globe"></i>'],sort:30,qa:"map.features.toggleMode"},{label:"Show Legend",eventType:"showLegend",tooltip:"Display the map legend",da:['<i class="fa fa-fw fa-map-signs"></i>'],sort:50,ya:joa,
qa:"map.features.showLedgendContext"},{label:"Clear Selection",eventType:"clearSelection",tooltip:"Clears the selected features across all layers",da:['<i class="fa fa-fw fa-times-circle"></i>'],sort:60,ya:koa,qa:"map.features.clearSelection"}]},{label:"Options",type:"group",sort:5,children:[{label:"Background Color",eventType:"bgColor",tooltip:"Change the map background color",da:[],Aa:ioa,ya:loa,qa:"map.features.setBackGroundColor"},{label:"Terrain",eventType:"os.map.enableTerrain",type:"check",
tooltip:"Show terrain on the 3D globe",Aa:noa,ya:ooa}]},{label:"Coordinate",type:"group",visible:!1,sort:10,children:[],Aa:hoa}]})));eZ||(eZ=new IF(new HF({type:"root",children:[{label:"Layer",type:"group",sort:fZ++,children:[{label:"Go To",eventType:"goTo",tooltip:"Repositions the map to show the layer",da:['<i class="fa fa-fw fa-fighter-jet"></i>'],Aa:hZ,ya:Bta,qa:"layers.contextMenu.featureLayer.goTo",sort:gZ++},{label:"Identify",eventType:"identify",tooltip:"Identifies a layer on the map",da:['<i class="fa fa-fw fa-eye"></i>'],
Aa:hZ,ya:Cta,qa:"layers.contextMenu.identify",sort:gZ++},{label:"Clear Selection",eventType:"clearSelection",tooltip:"Clears the selection for the layer",da:['<i class="fa fa-fw fa-times-circle"></i>'],Aa:hZ,ya:iZ,qa:"layers.contextMenu.featureLayer.clearSelection",sort:gZ++},{label:"Add to Timeline",eventType:"layer:enableTime",tooltip:"Enables layer animation when the timeline is open",da:['<i class="fa fa-fw fa-clock-o"></i>'],Aa:hZ,ya:iZ,sort:gZ++},{label:"Remove From Timeline",eventType:"layer:disableTime",
tooltip:"Disables layer animation when the timeline is open",da:['<i class="fa fa-fw fa-clock-o"></i>'],Aa:hZ,ya:iZ,sort:gZ++},{label:"Most Recent",eventType:"mostRecent",tooltip:"Adjusts application time to show the most recent data for the layer",da:['<i class="fa fa-fw fa-fast-forward"></i>'],Aa:hZ,ya:iZ,qa:"layers.contextMenu.mostRecent",sort:gZ++},{label:"Refresh",eventType:"refresh",tooltip:"Refreshes the layer",da:['<i class="fa fa-fw fa-refresh"></i>'],Aa:hZ,ya:iZ,qa:"layers.contextMenu.refresh",
sort:gZ++},{label:"Clear Auto/Manual Color",eventType:"resetColor",tooltip:"Clears auto/manual coloring rules, resetting all features to the layer color",da:['<i class="fa fa-fw fa-tint"></i>'],Aa:hZ,ya:iZ,qa:"layers.contextMenu.resetColor",sort:gZ++},{label:"Lock",eventType:"layer:lock",tooltip:"Lock the layer to prevent data from changing",da:['<i class="fa fa-fw fa-lock"></i>'],Aa:hZ,ya:iZ,qa:"layers.contextMenu.lock",sort:gZ++},{label:"Unlock",eventType:"layer:unlock",tooltip:"Unlock the layer and refresh its data",
da:['<i class="fa fa-fw fa-unlock-alt"></i>'],Aa:hZ,ya:iZ,qa:"layers.contextMenu.unlock",sort:gZ++},{label:"Remove",eventType:"layer:remove",tooltip:"Removes the layer",da:['<i class="fa fa-fw fa-times"></i>'],Aa:hZ,ya:iZ,qa:"layers.contextMenu.remove",sort:gZ++},{label:"Rename",eventType:"rename",tooltip:"Rename the layer",da:['<i class="fa fa-fw fa-i-cursor"></i>'],Aa:hZ,ya:iZ,qa:"layers.contextMenu.rename",sort:gZ++},{label:"Show Description",eventType:"showDescription",tooltip:"Gives details about the layer",
da:['<i class="fa fa-fw fa-newspaper-o"></i>'],Aa:hZ,ya:zta,qa:"layers.contextMenu.showDescription",sort:gZ++}]},{label:"Tools",type:"group",sort:fZ++,children:[{label:"Export...",eventType:"export",tooltip:"Repositions the map to show the layer",da:['<i class="fa fa-fw fa-download"></i>'],Aa:hZ,ya:Ata,qa:"layers.contextMenu.export",sort:-1E3}]}]})));rZ||(rZ=new IF(new HF({type:"root",children:[{label:"State",eventType:"state:save",tooltip:"Save the application state",da:['<i class="fa fa-fw fa-bookmark"></i>'],
ya:Pta,qa:"map.features.saveState",ig:"Ctrl+S",sort:10}]})));b=mF;b||(b=mF=new yI(new HF({type:"root",Aa:Bha,children:[{label:"Query",type:"group",sort:10,children:[{label:"Load",eventType:"load",tooltip:"Clear queries, then query for this area for all layers",da:['<i class="fa fa-fw fa-circle-o"></i>'],sort:0,Aa:EI},{label:"Add",eventType:"add",tooltip:"Add a query for this area for all layers",da:['<i class="fa fa-fw fa-plus-circle"></i>'],sort:1,Aa:EI}]},{label:"Exclude",type:"group",sort:20,children:[{label:"Set",
eventType:"exclude",tooltip:"Clear exclusions, then add an exclusion area for all layers",da:['<i class="fa fa-fw fa-ban"></i>'],sort:0,Aa:EI},{label:"Add",eventType:"add_exclude",tooltip:"Add an exclusion area for all layers",da:['<i class="fa fa-fw fa-minus-circle"></i>'],sort:1,Aa:EI}]},{label:"Features",type:"group",sort:30,children:[{label:"Feature Info",eventType:"featureInfo",tooltip:"Show detailed metadata for the feature",da:['<i class="fa fa-fw fa-info-circle"></i>'],sort:10,Aa:FI},{label:"Select",
eventType:"select",tooltip:"Select features in this area",da:['<i class="fa fa-fw fa-check-circle"></i>'],sort:20,Aa:EI},{label:"Select Exclusive",eventType:"selectExclusive",tooltip:"Select only features in this area, deselecting features outside of the area",da:['<i class="fa fa-fw fa-check-circle"></i>'],sort:30,Aa:EI},{label:"Deselect",eventType:"deselect",tooltip:"Deselect features in this area",da:['<i class="fa fa-fw fa-times-circle"></i>'],sort:40,Aa:EI},{label:"Remove Features in Area",eventType:"spatial:removeFeatures",
tooltip:"Remove features in this area from the map",da:['<i class="fa fa-fw fa-times"></i>'],sort:50,Aa:EI},{label:"Remove",tooltip:"Remove the feature from the layer",da:['<i class="fa fa-fw fa-times"></i>'],sort:60,ya:wha,Aa:FI}]},{label:"Tools",type:"group",sort:40,children:[{label:"Zoom",eventType:"zoom",tooltip:"Zoom the map to the feature(s)",da:['<i class="fa fa-fw fa-crop"></i>']},{label:"Modify Area...",eventType:"area:modify",tooltip:"Modify the area",da:['<i class="fa fa-fw fa-edit"></i>'],
Aa:xha}]},{label:"Area",type:"group",sort:50,children:[{label:"Save Area...",eventType:"save",tooltip:"Save the area for future use",da:['<i class="fa fa-fw fa-save"></i>'],sort:10,Aa:yha},{label:"Edit Area Details...",eventType:"edit",tooltip:"Edit area information such as title/description",da:['<i class="fa fa-fw fa-pencil"></i>'],sort:20,Aa:II},{label:"Enable Area",eventType:"enable",tooltip:"Enable the area",da:['<i class="fa fa-fw fa-check-square-o"></i>'],sort:30,Aa:Aha},{label:"Disable Area",
eventType:"disable",tooltip:"Disable the area",da:['<i class="fa fa-fw fa-square-o"></i>'],sort:40,Aa:zha},{label:"Export...",eventType:"export",tooltip:"Export the area",da:['<i class="fa fa-fw fa-download"></i>'],sort:50,Aa:II},{label:"Merge...",eventType:"area:merge",tooltip:"Merge selected areas into a new area",da:['<i class="fa fa-fw fa-link"></i>'],sort:60,Aa:vha},{label:"Remove Area",eventType:"removeArea",tooltip:"Remove the area",da:['<i class="fa fa-fw fa-times"></i>'],sort:70,Aa:II}]}]})),
b.H("load",JI),b.H("add",JI),b.H("exclude",JI),b.H("add_exclude",JI),b.H("featureInfo",JI),b.H("save",JI),b.H("edit",JI),b.H("enable",JI),b.H("disable",JI),b.H("removeArea",JI),b.H("area:modify",JI),b.H("area:merge",JI),b.H("export",JI));if(b=uZ){c=b.Ha();e=$z.u();d=e.l;e=e.g;f=0;var h=100,k;for(k in d){var l=d[k].distance;if(l){var m=l.hf();l=l.S();var n=-1<l.indexOf("Only")?h++:f++;c.R({eventType:m,label:l,tooltip:"Switches to "+l,da:['<i class="fa fa-fw '+(m==e?"fa-check-circle-o":"fa-circle-o")+
'"></i>'],sort:n,qa:Zea["UNITS_"+m.toUpperCase()],Aa:Zta});b.H(m,Yta)}}100<h&&c.R({type:"separator",sort:99})}sZ.H("timeline.select",tZ);sZ.H("timeline.selectExclusive",tZ);sZ.H("timeline.deselect",tZ);sZ.H("timeline.load",Qta);sZ.H("timeline.add",Rta);sZ.H("timeline.slice",Sta);sZ.H("timeline.zoom",Tta);sZ.H("timeline.animate",Vta);sZ.H("timeline.animateSkip",Wta);sZ.H("timeline.animateHold",Uta);sZ.H("timeline.remove",tZ);sZ.H("timeline.activeWindow",Xta);oZ||(oZ=new IF(new HF({type:"root",children:[{label:"Import State",
eventType:"importFile",tooltip:"Import a state from a local file or a URL",da:['<i class="fa fa-fw fa-cloud-download"></i>'],qa:"map.features.importState",sort:100},{label:"Save State",eventType:"state:save",tooltip:"Save the application state",da:['<i class="fa fa-fw fa-floppy-o"></i>'],ya:Ita,qa:"map.features.saveState",sort:101},{label:"Disable States",eventType:"state:clear",tooltip:"Disable all active application states",da:['<i class="fa fa-fw fa-times"></i>'],ya:Ita,qa:"map.features.clearState",
sort:102}]})),V.H("addDescriptor",qZ),V.H("removeDescriptor",qZ),V.H("updateDescriptor",qZ),C.H("descriptorActivated",qZ),C.H("descriptorDeactivated",qZ),pZ=new uR(Jta,50));(k=eZ)&&!k.Ha().find("bufferSelected")&&k.Ha().find("Tools").R({label:"Create Buffer Region...",eventType:"bufferSelected",tooltip:"Create buffer regions around loaded data",da:['<i class="fa fa-fw fa-dot-circle-o"></i>'],Aa:hZ,ya:Fta,qa:"layers.contextMenu.createBuffer"});(k=bU)&&!k.Ha().find("bufferSelected")&&k.Ha().find("Coordinate").R({label:"Create Buffer Region...",
eventType:"bufferSelected",tooltip:"Create a buffer region around the clicked coordinate",da:['<i class="fa fa-fw fa-dot-circle-o"></i>'],ya:Eta});(k=mF)&&k.Ha().find("Tools").R({eventType:"bufferSelected",label:"Create Buffer Region...",tooltip:"Create a buffer region from the feature(s)",da:['<i class="fa fa-fw fa-dot-circle-o"></i>'],Aa:Dta,ya:Gta});aua();hta=mF;nL({render:Dma,priority:-100,settingsUI:"colormodellegendsettings",defaultSettings:{showAuto:!1,showManual:!0,showColumn:!0}});k=T.u();
k.G=poa;k.B=Cma;k.Ra("map:ready",this.EJ,!1,this);$t=T.u();PJ=dba=LK.u();UE=eba=HI.u();WE=fba=$O.u();dY=new IF(new HF({type:"root",children:[{label:"Import File/URL",eventType:"query:importFile",tooltip:"Import areas from a file or URL",da:['<i class="fa fa-fw fa-cloud-download"></i>'],ya:eY,sort:1},{label:"Enter Coordinates",eventType:"query:enterCoordinates",tooltip:"Enter coordinates to load data for a box, circle, or polygon",da:['<i class="fa fa-fw fa-calculator"></i>'],ya:eY,sort:2},{label:"Whole World",
eventType:"query:queryWorld",tooltip:"Load data for the whole world",da:['<i class="fa fa-fw fa-map-o"></i>'],ya:eY,sort:3}]}));Ae=new KQ;NQ(Ae,"Data filters for supported layers.");OQ(Ae,"text/xml; subtype=FILTER",new rS);Be=new yQ;mQ.u();a.$on("windowClose",this.uJ.bind(this));a.$on("windowDragStart",this.Sw.bind(this));a.$on("windowDragStop",this.Sw.bind(this));this.Zq()}w(v$,RX);v$.$inject=["$scope","$element","$compile","$timeout","$injector"];var zFa=E.V("os.MainCtrl");g=v$.prototype;
g.destroy=function(){this.ar();Ma(mZ);mZ=void 0;var a=eZ;(a=a?a.Ha().find("Tools"):void 0)&&a.removeChild("bufferSelected");(a=bU)&&(a=a.Ha().find("Coordinate"))&&a.removeChild("bufferSelected");(a=mF)&&(a=a.Ha().find("Tools"))&&a.removeChild("bufferSelected");Ma(dY);dY=void 0;Ma(kZ);kZ=void 0;XY&&XY.dispose();Ma(bU);bU=void 0;Ma(eZ);eZ=void 0;Ma(rZ);rZ=void 0;Ma(mF);mF=void 0;sZ&&sZ.dispose();Ma(uZ);uZ=void 0;Ma(oZ);oZ=void 0;Ma(pZ);pZ=void 0;this.Ma=this.v=null};
g.uJ=function(a,b){if(a=b.find("iframe")){b=0;for(var c=a.length;b<c;b++){var d=void 0;try{d=new Event("beforeunload")}catch(e){d=document.createEvent("Event"),d.initEvent("beforeunload",!0,!0)}a[b].contentWindow.dispatchEvent(d)}}};
g.Zq=function(){v$.C.Zq.call(this);HC();O.H("time.offset",qga);aO("nav-top-header","os-nav-top",100);aO("nav-top-left","add-data-button",100);aO("nav-top-left","layers-button",200);aO("nav-top-left","os-draw-controls",300);aO("nav-top-left","measure-button",400);aO("nav-top-left","clear-button",500);aO("nav-top-center","date-panel",1);aO("nav-top-right","save-button",200);aO("nav-top-right","state-button",300);aO("nav-top-right",'<search-box show-clear="true"></search-box>',900);aO("nav-top-right",
"help",1E3);aO("nav-bottom-left",'<li id="zoom-level" class="nav-item mr-1 my-auto flex-shrink-0"></li>',100);aO("nav-bottom-left","<scale-line></scale-line>",200);aO("nav-bottom-left",'<li id="mouse-position" class="nav-item mr-1 my-auto flex-shrink-0"></li>',300);aO("nav-bottom-right","settings-button",100);aO("nav-bottom-right","legend-button",200);aO("nav-bottom-right","servers-button",300);aO("nav-bottom-right","alert-button",400);aO("nav-bottom-right","history-button",500);aO("nav-bottom-right",
"mute-button",600);var a=JP.u(),b=De()?91:17;LP(a,"General Controls",0,"Save State",[b,"+",83]);LP(a,"General Controls",0,"Undo",[b,"+",90]);LP(a,"General Controls",0,"Redo",De()?[b,"+",16,"+",90]:[b,"+",89]);O.get("metrics.enabled",!1)&&(FX.Ha().R({eventType:"metrics",label:"OpenSphere Capabilities",tooltip:"Display the OpenSphere Capabilities",da:['<i class="fa fa-fw fa-cubes"></i>'],sort:135}),FX.H("metrics",xta))};g.hq=function(){Ce.eb(!1)};g.rw=function(){Ce.eb(!0)};
g.mz=function(){C.H("reset",this.Uw,!1,this);C.H("configureAndAddLayer",this.ow,!1,this);C.H("toggleUI",this.Vw,!1,this);C.H("importFile",this.wm,!1,this);C.H("importUrl",this.wm,!1,this)};g.ar=function(){C.M("reset",this.Uw,!1,this);C.M("configureAndAddLayer",this.ow,!1,this);C.M("toggleUI",this.Vw,!1,this);C.M("importFile",this.wm,!1,this);C.M("importUrl",this.wm,!1,this)};
g.Nu=function(){Fe.ga("opensphere");Fe.Ta("OpenSphere");Fe.ng(new MY);O.get("xtEnabled",!0)&&Fe.init();localStorage.setItem("opensphere.url",location.pathname);localStorage.setItem("opensphere.xt",Fe.D())};
g.kt=function(){JG(Dv,new c5);JG(Dv,E8.u());JG(Dv,new o5);JG(Dv,new B1);JG(Dv,new D1);JG(Dv,v3.u());JG(Dv,new r9);JG(Dv,new u$);JG(Dv,new z2);JG(Dv,new F7);JG(Dv,new J9);JG(Dv,new y9);JG(Dv,new I5);JG(Dv,new b6);JG(Dv,new Q5);JG(Dv,new r6);JG(Dv,new n7);JG(Dv,new z7);JG(Dv,new q$);JG(Dv,new C9);JG(Dv,new C0);JG(Dv,S9.u());JG(Dv,U9.u());JG(Dv,n$.u());JG(Dv,Q7.u());JG(Dv,F9.u());JG(Dv,Y9.u());JG(Dv,e$.u());JG(Dv,t9.u())};
g.it=function(){MX(Cv,new qoa);MX(Cv,new roa);MX(Cv,new soa);MX(Cv,new wla);MX(Cv,new Foa);MX(Cv,new Goa);MX(Cv,new Koa)};
g.vq=function(a){v$.C.vq.call(this,a);a=V;try{var b=O.get(YI());if(b){var c=Date.now();if(b)for(var d=0,e=b.length;d<e;d++)try{var f=aJ(a,b[d].dType);f&&(f.restore(b[d]),f.D()&&(isNaN(f.sg)||f.sg>c)&&bJ(a,f))}catch(x){E.ib(a.log,"There was an error loading data descriptor #"+d)}}b=O;c=["providers","userProviders"];e=0;for(var h=c.length;e<h;e++){var k=b.get([c[e]]),l;for(l in k){var m=k[l];if("object"==typeof m){m.id=l;f=!0;"enabled"in m&&("string"===typeof m.enabled?f="true"==m.enabled.toLowerCase():
f=m.enabled);a:{d=a;var n=m.type;if(n){n=n.toLowerCase();if(n in d.l){var p=null,r=d.l[n].g;r.u?p=r.u():p=new r;var u=p;break a}E.ib(d.log,'No provider exists for type "'+n+'".')}u=null}u&&(u.ga(l),u.bc(m),u.eb(f),u.Ee=0<e,cJ(a,u),u.mc()&&u.load())}}}for(var v in kA)C.H(kA[v],a.Hr,!1,a)}catch(x){E.error(zFa,"failed restoring descriptors from settings",x)}h=tE.u();uE(h,new oE);h.A.$on("$routeUpdate",h.l.bind(h));h.o=!0;h.l();aO("main-content",'<searchresults parent="#js-main"></searchresults>',100);
zE(vE.u(),"v1542394219/onboarding/intro.json");this.j.H("key",this.CJ,!1,this)};g.Sw=function(a){var b=T.u().Y();b&&("windowDragStart"==a.name?bl(M(b),1,1):bl(M(b),1,-1))};g.VL=function(a){Nd(a,1)&&a.preventDefault()};g.EJ=function(){this.scope.$watch("mainCtrl.timeline",this.CM.bind(this));this.it();this.kt();Dv.init()};g.CM=function(){T.u().Ve()};function AFa(a,b){b=b.bind(a);return a.Ma.bind(a,b)}
g.CJ=function(a){var b=a.target,c=De()?a.metaKey:a.ctrlKey;if(!document.querySelector(".modal-backdrop,.window-modal-bg")){if(b.tagName!=="INPUT".toString()&&b.tagName!=="TEXTAREA".toString())switch(a.keyCode){case 90:c&&(a.preventDefault(),AFa(this,a.shiftKey?this.Ur:this.jA)());break;case 89:c&&(a.preventDefault(),AFa(this,this.Ur)())}switch(a.keyCode){case 75:c&&(Q(R.u(),"map.keyboard.search",1),a.preventDefault(),$(".search-box .search-query").focus());break;case 76:a.altKey&&(Q(R.u(),"map.keyboard.openLayers",
1),CX("layers"));break;case 79:c&&(Q(R.u(),"map.keyboard.generalImport",1),a.preventDefault(),C.dispatchEvent("importFile"));break;case 83:c&&(Q(R.u(),"map.keyboard.saveState",1),a.preventDefault(),FU(),X(this.scope))}}};g.Uw=function(){wt++;PJ.clear();UE.clear();UE.save();var a=new mf;wf(a,my.u().clear());var b=mQ.u();b.clear();wf(a,b.save());tf(a,vt,vt).callback()};g.wm=function(a){a=null!=a?a:new lE("importFile");var b=new LR;TQ(b,a);SQ(b)};
g.ow=function(a){if(a=a.j)if(q(a)){for(var b=[],c=0,d=a.length;c<d;c++){var e=zc(a[c]);e=new tP(e);b.push(e)}c=new oF;c.Zb(b);c.title="Add "+a.length+(1==a.length?" layer.":" layers.");gF(hF.u(),c)}else a=a instanceof Object?a:zc(a),e=new tP(a),e.title="Add "+a.type+' Layer "'+a.title+'"',a.loadOnce?e.Fa():gF(hF.u(),e)};
g.Vw=function(a){a.id in this?a.value&&IE(a.id)?HE(a.id):(this[a.id]="boolean"===typeof a.value?a.value:null!=a.params?!0:!this[a.id],X(this.scope)):CX(a.id);a.qa&&Q(R.u(),a.qa,1);a.params&&this.Ma(function(){Xy(Fa(Iga,a.id,a.params))})};g.YD=function(a){if(a=a[0])a.path&&Mw?this.Du(Rw(a.path)):(a=Pw(a))&&tf(a,this.DJ,this.BJ,this)};g.DJ=function(a){C.dispatchEvent(new lE("importFile",a))};g.BJ=function(a){a&&"string"===typeof a&&(E.error(zFa,a),At(zt.u(),a,rs))};
g.Du=function(a){C.dispatchEvent(new lE("importUrl",a))};g.jA=function(){Q(R.u(),"map.undo",1);var a=hF.u();E.za(xF,"undo"+a.g);(a.j.length&&-1<a.g||-1<a.l)&&a.Mk(a.l-1)};v$.prototype.undoCommand=v$.prototype.jA;v$.prototype.Ur=function(){Q(R.u(),"map.redo",1);var a=hF.u();E.za(xF,"redo "+a.g);a.j.length&&a.g<a.j.length-1&&a.Mk(a.l+1)};v$.prototype.redoCommand=v$.prototype.Ur;var yFa=void 0,xFa="Internet Explorer does not offer a satisfactory user experience and is unsupported by OpenSphere. The application may become unresponsive as a result, and we recommend using Google Chrome. <b>Continue at your own risk.</b>";
v$.prototype.l=function(){O.set(["showRedirect"],!this.showRedirectChecked)};function w$(a){this.g=a}g=w$.prototype;g.init=function(){return this.store?sf(this.store.init(),this.lw,this):Bf("Storage is undefined")};g.lw=function(){};g.gx=function(){var a=[];db(this.g,function(b){a.push(this.store.get(b))},this);var b=new Vr(a,!1,!0,!1,void 0,this);tf(b,this.OJ,this.NJ,this);return b};g.OJ=function(a){var b={user:{}},c=!0;db(a,function(a,e){(c=c&&a[0])&&(b.user[this.g[e]]=a[1]||{})},this);return c?b:Bf("Failed to retrieve part or all of the settings")};
g.NJ=function(){this.pg=!1};function mea(a,b){var c=[];try{db(a.g,function(a){c.push(this.store.set(a,b[a]||{},!0))},a);var d=new Vr(c,!1,!0,!1,void 0,a);sf(d,a.LI,a);return d}catch(e){return Bf("Failed to save settings: "+e.message)}}g.LI=function(a){if(!hb(a,function(a){return a[0]}))return Bf("Failed to save part or all of settings")};function Vt(a,b){return a.store?a.store.remove(b):Af()}g.name="base class";g.pg=!0;g.mm=!1;g.zA="local";g.YB=!1;function x$(a,b){this.g=a;this.store=new jy(BFa,"opensphere.settings",b)}w(x$,w$);P(x$,"os.config.storage.ISettingsStorage");P(x$,"os.config.storage.ISettingsReadableStorage");P(x$,"os.config.storage.ISettingsWritableStorage");var BFa="settings";x$.prototype.name="IndexedDb";function y$(a,b){cs.call(this,a,b)}w(y$,cs);P(y$,"os.storage.IMechanism");y$.prototype.Px=function(){var a=[];Pe(this.pe(!1),function(b){a.push(b)});return a};function z$(a,b){this.g=b;b=new Yr;if(b.g)try{b.g.setItem("__sak","1");b.g.removeItem("__sak");var c=!0}catch(d){c=!1}else c=!1;(c=c?b:null)||(c=new Zr("UserDataSharedStore"),c=c.g?c:null);this.j=new y$(c,a),this.store=new Lx(this.j)}w(z$,w$);P(z$,"os.config.storage.ISettingsStorage");P(z$,"os.config.storage.ISettingsReadableStorage");P(z$,"os.config.storage.ISettingsWritableStorage");
z$.prototype.lw=function(){try{var a=this.j.get("settings");if(a){var b=Ls(JSON.parse(a));db(this.g,function(a){this.j.set(a,JSON.stringify(b[a]||{}))},this);this.j.remove("settings")}}catch(c){return Bf("Failed to migrate localStorage settings")}};z$.prototype.name="localStorage";function A$(){this.g=null;this.namespace=[]}A$.prototype.init=function(){var a=O.g;nt(a,new it(this.g));nt(a,new z$("opensphere",this.namespace));nt(a,new x$(this.namespace));O.Ra("initialized",this.o,!1,this);O.init()};A$.prototype.o=function(){O.Ra("loaded",this.s,!1,this);O.load()};function B$(){A$.call(this);this.j=this.l=null}w(B$,A$);B$.prototype.s=function(){oma().then(function(){if(this.l&&this.j){var a=document.querySelector(this.l);angular.element(a).ready(t(function(){angular.bootstrap(a,[this.j]);O.H("theme",rma,!1,this)},this))}},function(a){if("string"===typeof a)throw Error(a);throw Error("Failed loading application theme: unspecified error.");},this)};function CFa(){B$.call(this);this.l="#ng-app";this.j="os";this.namespace=["core","opensphere"];this.g=this.g||"config/settings.json"}w(CFa,B$);function C$(){this.g=Ha()}var D$=null;C$.prototype.set=function(a){this.g=a};C$.prototype.reset=function(){this.set(Ha())};C$.prototype.get=function(){return this.g};function E$(a){this.j=a||"";D$||(D$=new C$);this.l=D$}E$.prototype.g=!1;function DFa(a){a=new Date(a.j);return F$(a.getFullYear()-2E3)+F$(a.getMonth()+1)+F$(a.getDate())+" "+F$(a.getHours())+":"+F$(a.getMinutes())+":"+F$(a.getSeconds())+"."+F$(Math.floor(a.getMilliseconds()/10))}function F$(a){return 10>a?"0"+a:String(a)}function EFa(a,b){a=(a.j-b)/1E3;b=a.toFixed(3);var c=0;if(1>a)c=2;else for(;100>a;)c++,a*=10;for(;0<c--;)b=" "+b;return b}function G$(a){E$.call(this,a)}w(G$,E$);G$.prototype.g=!0;function H$(a,b){this.l=a||"";this.o=[];this.P=b||"";this.A=new xt(FFa);this.U=t(this.EB,this);this.N=new G$(this.P);this.L={};1!=this.G&&(this.G=!0,jh(),ih.ng(this.U));this.s="1"==GFa(this.l,"enabled");qa.setInterval(t(this.IM,this),7500)}var FFa=500;H$.prototype.g=null;H$.prototype.B=!1;var HFa=H$.prototype.G=!1;g=H$.prototype;g.vt=null;g.Ep=Ha();g.init=function(){this.s&&I$(this)};g.isEnabled=function(){return this.s};g.eb=function(a){(this.s=a)&&I$(this);IFa(this,"enabled",a?"1":"0")};
function J$(a){return!!a.g&&!a.g.closed}g.clear=function(){this.A.clear();J$(this)&&this.dl()};
g.EB=function(a){if(!this.L[a.l]){var b=this.N;if(a){switch(a.o.value){case Xg.value:var c="dbg-sh";break;case Yg.value:c="dbg-sev";break;case Zg.value:c="dbg-w";break;case $g.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.j," ");d.push("[",DFa(a),"] ");d.push("[",EFa(a,b.l.get()),"s] ");d.push("[",a.l,"] ");d=Yf(d.join(""));var e=dg;if(b.g&&a.g){try{var f=a.g,h=ua("window.location.href");if(sa(f))var k={message:f,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};
else{b=!1;try{var l=f.lineNumber||f.line||"Not available"}catch(B){l="Not available",b=!0}try{var m=f.fileName||f.filename||f.sourceURL||qa.$googDebugFname||h}catch(B){m="Not available",b=!0}k=!b&&f.lineNumber&&f.fileName&&f.stack&&f.message&&f.name?f:{message:f.message||"Not available",name:f.name||"UnknownError",lineNumber:l,fileName:m,stack:f.stack||"Not available"}}var n=k.fileName;null!=n||(n="");if(/^https?:\/\//i.test(n)){var p=Gf(n);ve("view-source scheme plus HTTP/HTTPS URL");var r="view-source:"+
Ef(p);var u=Hf(r)}else{var v=ve("sanitizedviewsrc");u=Hf(ue(v))}var x=cg(Yf("Message: "+k.message+"\nUrl: "),$f("a",{href:u,target:"_new"},k.fileName),Yf("\nLine: "+k.lineNumber+"\n\nBrowser stack:\n"+k.stack+"-> [end]\n\nJS stack traversal:\n"+Hd(void 0)+"-> "))}catch(B){x=Yf("Exception trying to expose exception! You win, we lose. "+B)}e=cg(eg,x)}a=Yf(a.s);c=$f("span",{"class":c},cg(a,e));c=cg(d,c,eg)}else c=dg;this.s?(I$(this),this.A.add(c),K$(this,c)):this.A.add(c)}};
function K$(a,b){a.o.push(b);qa.clearTimeout(a.vt);750<Ha()-a.Ep?a.Os():a.vt=qa.setTimeout(t(a.Os,a),250)}g.Os=function(){this.Ep=Ha();if(J$(this)){var a=this.g.document.body;a=a&&100>=a.scrollHeight-(a.scrollTop+a.clientHeight);var b=cg(this.o);this.g.document.write(Vf(b));this.o.length=0;a&&this.g.scrollTo(0,1E6)}};function JFa(a){for(var b=a.A.Jc(),c=0;c<b.length;c++)K$(a,b[c])}
function I$(a){if(!J$(a)&&!a.B){var b=GFa(a.l,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]);b=Number(b[3]);a.B=!0;var f=od?a.l.replace(/[\s\-\.,]/g,"_"):a.l;a.g=window.open("",f,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);a.g||HFa||(alert("Logger popup was blocked"),HFa=!0);a.B=!1;a.g&&a.dl()}}g.zi=function(){return Sf(ve("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}"))};
g.dl=function(){if(J$(this)){this.g.document.open();var a=$f("div",{"class":"dbg-ev",style:ve("text-align:center;")},cg("LOGGING",eg,$f("small",{},"Logger: "+this.l)));a=cg(bg(this.zi()),$f("hr"),a,$f("hr"));K$(this,a);JFa(this)}};function IFa(a,b,c){document.cookie=(b+a.l).replace(/[;=\s]/g,"_")+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(Ha()+2592E6)).toUTCString()}
function GFa(a,b,c){a=(b+a).replace(/[;=\s]/g,"_");b=String(document.cookie);var d=b.indexOf(a+"=");return-1!=d?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,-1==c?b.length:c))):c||""}g.IM=function(){J$(this)&&IFa(this,"dbg",(this.g.screenX||this.g.screenLeft||0)+","+(this.g.screenY||this.g.screenTop||0)+","+(this.g.outerWidth||800)+","+(this.g.outerHeight||500))};function L$(a,b){if(M$){var c=KFa(),d;for(d in c){c=d.replace("fancywindow.sel.","");c=kh(c);var e=c.g,f=window.localStorage.getItem(d).toString();e&&e.toString()==f||(e=fh(f),c.g=e)}}H$.call(this,a,b);this.j=null}w(L$,H$);var M$;a:{try{M$=!!window.localStorage.getItem;break a}catch(a){}M$=!1}g=L$.prototype;
g.Os=function(){this.Ep=Ha();if(J$(this)){for(var a=this.j.tb("log"),b=100>=a.scrollHeight-(a.scrollTop+a.offsetHeight),c=0;c<this.o.length;c++){var d=this.j.sh("DIV","logmsg");d.innerHTML=Vf(this.o[c]);a.appendChild(d)}this.o.length=0;this.wz();b&&(a.scrollTop=a.scrollHeight)}};
g.dl=function(){if(J$(this)){var a=this.g.document;a.open();var b=$f("head",{},cg($f("title",{},"Logging: "+this.l),bg(this.zi())));var c=$f("body",{},cg($f("div",{id:"log",style:ve("overflow:auto")}),$f("div",{id:"head"},cg($f("p",{},$f("b",{},"Logging: "+this.l)),$f("p",{},"LOGGING"),$f("span",{id:"clearbutton"},"clear"),$f("span",{id:"exitbutton"},"exit"),$f("span",{id:"openbutton"},"options"))),$f("div",{id:"options"},cg($f("big",{},$f("b",{},"Options:")),$f("div",{id:"optionsarea"}),$f("span",
{id:"closebutton"},"save and close")))));b=$f("html",{},cg(b,c));a.write(Vf(b));a.close();(od?a.body:this.g).onresize=t(this.wz,this);this.j=new jg(a);this.j.tb("openbutton").onclick=t(this.zJ,this);this.j.tb("closebutton").onclick=t(this.iC,this);this.j.tb("clearbutton").onclick=t(this.clear,this);this.j.tb("exitbutton").onclick=t(this.BC,this);JFa(this)}};
g.zJ=function(){var a=this.j.tb("optionsarea");a.innerHTML=Vf(dg);for(var b=N$(),c=this.j,d=0;d<b.length;d++){var e=b[d];e=c.sh("DIV",{},LFa(this,"sel"+e.getName(),e.g?e.g.name:"INHERIT"),c.sh("SPAN",{},e.getName()||"(root)"));a.appendChild(e)}this.j.tb("options").style.display="block";return!1};
function LFa(a,b,c){a=a.j;b=a.sh("SELECT",{id:b});for(var d=0;d<ch.length;d++){var e=ch[d],f=a.sh("OPTION",{},e.name);c==e.name&&(f.selected=!0);b.appendChild(f)}b.appendChild(a.sh("OPTION",{selected:"INHERIT"==c},"INHERIT"));return b}
g.iC=function(){this.j.tb("options").style.display="none";for(var a=N$(),b=this.j,c=0;c<a.length;c++){var d=a[c],e=b.tb("sel"+d.getName());e=e.options[e.selectedIndex].text;"INHERIT"==e?d.g=null:(e=fh(e),d.g=e)}if(M$)for(a=N$(),b=KFa(),c=0;c<a.length;c++)d="fancywindow.sel."+a[c].getName(),e=a[c].g,d in b?e?window.localStorage.getItem(d)!=e.name&&window.localStorage.setItem(d,e.name):window.localStorage.removeItem(d):e&&window.localStorage.setItem(d,e.name);return!1};
g.wz=function(){var a=this.j,b=a.tb("log"),c=a.tb("head");b.style.top=c.offsetHeight+"px";b.style.height=a.g.body.offsetHeight-c.offsetHeight-(od?4:0)+"px"};g.BC=function(){this.eb(!1);this.g&&this.g.close()};
g.zi=function(){var a=L$.C.zi.call(this),b=Sf(ve("html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:90% monospace}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:80px;font:x-small arial;}#exitbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"));return Pf(a,
b)};function KFa(){for(var a={},b=0,c=window.localStorage.length;b<c;b++){var d=window.localStorage.key(b);null!=d&&Ib(d,"fancywindow.sel.")&&(a[d]=!0)}return a}function N$(){var a=mc(hh);Ab(a,function(a,c){return Bb(a.getName(),c.getName())});return a};function O$(a,b){L$.call(this,a,b)}w(O$,L$);var MFa=ve("#log{background-color:#000;}.logmsg{color:#eee;}.dbg-i{color:#0f0;}#head{background-image: -webkit-gradient(linear,0 0,0 100%,from(#616972),color-stop(70%,#434c55),to(#384149));background-image: -webkit-linear-gradient(#616972,#434c55 70%,#384149);background-image: -moz-linear-gradient(top,#616972,#434c55 70%,#384149);background-image: -o-linear-gradient(#616972,#434c55 70%,#384149);background-image: linear-gradient(#616972,#434c55 70%,#384149);}#head p,#head p b{color:#eee;font-weight:bold;}#clearbutton,#exitbutton,#openbutton{color:#eee;}#closebutton{color:#333;}");
O$.prototype.dl=function(){O$.C.dl.call(this);this.g&&Zd(this.g,"beforeunload",this.I,!1,this)};O$.prototype.I=function(){this.eb(!1);this.g&&(de(this.g,"beforeunload",this.I,!1,this),this.g.close())};O$.prototype.zi=function(){var a=O$.C.zi.call(this),b=Sf(MFa);return Pf(a,b)};function P$(){VX.call(this);this.j=[]}w(P$,VX);P$.prototype.init=function(){P$.C.init.call(this);this.j.length=0;var a=new Date;a.setHours(0,0,0,0);this.j.push({label:"Today",time:a.getTime()});this.j.push({label:"Yesterday",time:a.getTime()-864E5});a.setDate(a.getDate()-a.getDay());this.j.push({label:"This Week",time:a.getTime()});a.setDate(a.getDate()-7);this.j.push({label:"Last Week",time:a.getTime()});a.setDate(a.getDate()-7);this.j.push({label:"2 Weeks Ago",time:a.getTime()})};
P$.prototype.J=function(){this.j.length=0;P$.C.J.call(this)};P$.prototype.Pd=function(a){var b=[],c=null;a instanceof jU&&(c=a.Ja());if(c){a=0;for(var d=this.j.length;a<d;a++){var e=c.od;if(!isNaN(e)&&e>=this.j[a].time){mb(b,a+this.j[a].label);break}}}return b};P$.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a.substring(1));pz(b,!1);oz(b,"All layers activated "+b.ba().toLowerCase());return b};function Q$(){VX.call(this)}w(Q$,VX);Q$.prototype.Pd=function(a){var b=[],c=null;try{a instanceof jU?c=a.Ja().T():"getType"in a?c=a.getType():"type"in a&&(c=a.type)}catch(d){}c||(c="No Type");mb(b,c);return b};Q$.prototype.Ce=function(a){var b=new jz;b.ga(a);b.Da(a);pz(b,!1);return b};function R$(a,b){this.G=ws("the application");this.root=this.Lu();this.o=new le(this.B,250,this);this.element=b;this.scope=a;this.A=a.filter||null;this.term="";this.views=this.Kl();var c=O.get(["addData","groupBy"],"Source");this.view=this.Kl()[c];this.g=this.Mu();this.g.j=this.A;a.$on("$destroy",this.rk.bind(this));Uy.get("$timeout")(function(){b.find(".js-input-search").focus()});this.search()}R$.$inject=["$scope","$element"];g=R$.prototype;g.Mu=function(){return new HX([],"providers",this.scope)};
g.Lu=function(){var a=V.o;a.H("propertychange",this.s,!1,this);return a};g.Kl=function(){return{}};g.rk=function(){this.o.dispose();this.o=null;this.root.M("propertychange",this.s,!1,this);this.element=this.scope=this.g=this.root=null};g.close=function(){KE(this.element)};R$.prototype.close=R$.prototype.close;R$.prototype.Vu=function(){return 0==this.g.l.length};R$.prototype.isTreeEmpty=R$.prototype.Vu;R$.prototype.s=function(a){"children"==a.l?this.search():X(this.scope)};
R$.prototype.search=function(){if(this.root&&this.g&&this.o){var a=(this.root.na()||[]).filter(NFa);this.g.l=a;this.o.start();Q(R.u(),"addData.search",1)}};R$.prototype.search=R$.prototype.search;function NFa(a){if(a.mc()){try{if(a.mb)return!0}catch(b){}a=a.na();return!!a&&0<a.length}return!1}R$.prototype.lq=function(){Q(R.u(),"addData.groupBy",1);this.search()};R$.prototype.onGroupByChanged=R$.prototype.lq;R$.prototype.ko=function(){this.term="";this.search();this.element.find(".search").focus()};
R$.prototype.clearSearch=R$.prototype.ko;R$.prototype.B=function(){var a=this.term,b=this.Kl(),c;for(c in b)if(b[c]===this.view){O.set(["addData","groupBy"],c);break}IX(this.g,a,-1==this.view?null:this.view);X(this.scope)};
R$.prototype.Oo=function(){if(this.Vu())return"No data available. Click the Import File/URL button above to import data into "+this.G+".";var a=this.scope.selected;q(a)&&1==a.length&&(a=a[0]);if(a instanceof jz){var b="";a instanceof jU?(a=a.Ja())&&(b+=vka(a)):b=a.Je();b||(b="No description provided.");if(b)return Q(R.u(),"addData.getInfo",1),Rb(b)}return"Select an item on the left to see more information."};R$.prototype.getInfo=R$.prototype.Oo;W.directive("adddata",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/windows/adddata.html",controller:S$,controllerAs:"addData"}}]);
function S$(a,b){R$.call(this,a,b);this.showServerAlert=V.th();(b=vE.u())&&zE(b,"v1542394219/onboarding/adddata.json");a.filterName=null;bv&&$ta&&(a.openServers=bua);Uea&&Tra&&(a.openAlerts=CX.bind(void 0,"alerts"));a.$on("os.ui.window.params",this.l.bind(this));V.H("dataProviderLoaded",this.j,!1,this);V.H("editDataProvider",this.j,!1,this);V.H("removeDataProvider",this.j,!1,this);O.H(XZ,this.search,!1,this)}w(S$,R$);S$.$inject=["$scope","$element"];
var OFa={Favorites:new K1,INT:new N1,"Recently Updated":new G1,"Recently Used":new P$,Tag:new lY,Type:new Q$,Source:-1};S$.prototype.rk=function(){V.M("dataProviderLoaded",this.j,!1,this);V.M("editDataProvider",this.j,!1,this);V.M("removeDataProvider",this.j,!1,this);O.M(XZ,this.search,!1,this);S$.C.rk.call(this)};S$.prototype.Kl=function(){return OFa};S$.prototype.j=function(a){this.scope&&(a=a?a.j:null,!a||a.getError())&&(this.showServerAlert=V.th(),X(this.scope))};
S$.prototype.tC=function(){this.showServerAlert=!1};S$.prototype.dismissServerAlert=S$.prototype.tC;S$.prototype.iF=function(){Q(R.u(),"addData.import",1);C.dispatchEvent("importFile")};S$.prototype.launchFileImport=S$.prototype.iF;S$.prototype.l=function(a,b){b.filterFunc&&(this.g.j=b.filterFunc,this.search(),this.scope.filterName=b.filterName)};S$.prototype.gC=function(){this.scope.filterName=null;this.g.j=null;this.search()};S$.prototype.clearFilter=S$.prototype.gC;W.directive("clear",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1542394219/views/window/clear.html",controller:T$,controllerAs:"clear"}}]);function T$(a,b,c){this.K=b;this.entries=mc(uU.getEntries());a.$on("windowCancel",this.g.bind(this));a.$on("$destroy",this.j.bind(this));c(function(){a.$emit("window.ready")})}T$.$inject=["$scope","$element","$timeout"];T$.prototype.j=function(){this.K=null};T$.prototype.g=function(){uU.reset()};
T$.prototype.cancel=function(){this.g();this.K&&KE(this.K)};T$.prototype.cancel=T$.prototype.cancel;T$.prototype.accept=function(){uU.clear();this.K&&KE(this.K)};T$.prototype.accept=T$.prototype.accept;function U$(a,b){this.g=DR.u();this.scope=a;this.Ma=b;this.scope.settingsNodes=null;this.scope.selected=null;this.scope.$watch("selected",this.l.bind(this));this.scope.$on("$destroy",this.destroy.bind(this));this.g.H("settingsmanager:pluginadded",this.j,!1,this);this.g.H("settingsmanager:selectedchange",this.j,!1,this);this.j()}U$.$inject=["$scope","$timeout"];
U$.prototype.destroy=function(){this.Ma=this.scope=this.scope.settingsNodes=null;this.g.M("settingsmanager:pluginadded",this.j,!1,this);this.g.M("settingsmanager:selectedchange",this.j,!1,this);this.g=null};U$.prototype.l=function(a){a&&a.D&&this.g.nj(a)};U$.prototype.Qf=function(a){return a&&a instanceof rz?a.g.zg()||"defaultsettingui":null};U$.prototype.getUi=U$.prototype.Qf;U$.prototype.reset=function(){Xra()};U$.prototype.reset=U$.prototype.reset;
U$.prototype.j=function(){this.scope.settingsNodes=this.g.na();this.Ma(t(function(){this.scope.selected=this.g.l;if(!this.scope.selected){for(var a=this.scope,b=this.g,c=null,d=b.na();d&&0<d.length;)c=d[0],d=c.na();b.nj(c);a.selected=c}},this))};W.directive("settings",[function(){return{restrict:"E",replace:!0,scope:{hideClose:"@?"},templateUrl:"v1542394219/views/config/settingswindow.html",controller:V$,controllerAs:"setCon"}}]);function V$(a,b,c){U$.call(this,a,b);this.K=c;a.$on("os.ui.window.params",this.o.bind(this))}w(V$,U$);V$.$inject=["$scope","$timeout","$element"];V$.prototype.destroy=function(){this.K=null};
V$.prototype.o=function(a,b){a=DR.u();for(var c=a.na(),d=0;d<c.length;d++){var e=c[d];if(b&&0<b.length&&e.ba()==b[0]){CR(a,e.D());break}}};V$.prototype.close=function(){KE(this.K)};V$.prototype.close=V$.prototype.close;W.directive("map",[function(){return{restrict:"E",scope:!0,replace:!0,template:'<div id="map-container" class="mw-0 flex-fill"></div>',controller:W$,controllerAs:"mapCtrl"}}]);function W$(a){this.ha=T.u();a.$on("$destroy",this.j.bind(this));Xy(this.g.bind(this))}W$.$inject=["$scope"];var PFa=E.V("os.ui.MapCtrl");W$.prototype.j=function(){this.ha.dispose();this.ha=null};
W$.prototype.g=function(a){"string"===typeof a?E.error(PFa,"Error waiting for Angular to render the page: "+JSON.stringify(a)):this.ha&&this.ha.init()};W.directive("metricdetails",[function(){return{restrict:"E",replace:!0,scope:{metric:"="},templateUrl:"v1542394219/views/config/metricdetails.html",controller:X$,controllerAs:"details"}}]);function X$(a){y.call(this);this.v=a;a.$on("$destroy",this.dispose.bind(this))}w(X$,y);X$.$inject=["$scope"];X$.prototype.J=function(){X$.C.J.call(this);this.v=null};
X$.prototype.ba=function(){if(this.v&&this.v.metric instanceof uQ){for(var a=this.v.metric,b=[a.ba()],c;a&&(c=a.getParent());)if(a=c.ba())b.unshift(a),a=c;else break;return b.join(" > ")}return""};X$.prototype.getLabel=X$.prototype.ba;X$.prototype.qb=function(){return this.v&&this.v.metric instanceof uQ?this.v.metric.qb()||"":""};X$.prototype.getDescription=X$.prototype.qb;W.directive("metrics",[function(){return{restrict:"E",replace:!0,templateUrl:"v1542394219/views/config/metricscontainer.html",controller:Y$,controllerAs:"setCon"}}]);function Y$(a,b,c){R$.call(this,a,b);this.j=LX.u();this.Ma=c;this.scope.metricsNodes=null;this.scope.selected=null;this.details="";this.j.H("metricsmanager:pluginadded",this.l,!1,this);this.j.H("metricsmanager:selectedchange",this.l,!1,this);this.l()}w(Y$,R$);Y$.$inject=["$scope","$element","$timeout"];
Y$.prototype.rk=function(){this.scope.metricsNodes=null;Y$.C.rk.call(this);this.Ma=null;this.j.M("metricsmanager:pluginadded",this.l,!1,this);this.j.M("metricsmanager:selectedchange",this.l,!1,this)};Y$.prototype.Mu=function(){var a=LX.u().j.na()||[];return new HX(a,"metricsNodes",this.scope)};Y$.prototype.Lu=function(){return LX.u().j};Y$.prototype.save=function(){R.u().save()};Y$.prototype.save=Y$.prototype.save;
Y$.prototype.l=function(){this.scope.metricsNodes=this.j.j.na();this.Ma(t(function(){this.scope.selected=this.j.l;if(!this.scope.selected){var a=this.scope,b=this.j;b.nj(b.g);a.selected=b.g}},this))};W.directive("savedwindow",[function(){var a=DE();a.scope.key="@";a.controller=Z$;return a}]);function Z$(a,b,c){Cc(a,QFa(a.key));EE.call(this,a,b,c)}w(Z$,EE);Z$.$inject=["$scope","$element","$timeout"];Z$.prototype.dd=function(a,b){if(b){var c=QFa(this.scope.key),d=b.position;d&&(c.x=d.left,c.y=d.top);if(d=b.size)c.width=d.width,c.height=d.height;d=this.scope.key;var e=O.get(["windows"])||{};e[d]=c;O.set(["windows"],e)}Z$.C.dd.call(this,a,b)};
function QFa(a){return(O.get(["windows"])||{})[a]||{}};var $$=angular.module("os",["ngAnimate","ngSanitize","ngRoute","os.ui"]);$$.qo=function(a){a.otherwise({template:"<os-main></os-main>",reloadOnSearch:!1})};Ia("os.Module.configureModule",$$.qo);$$.qo.$inject=["$routeProvider"];$$.config($$.qo);(function(){var a=new ne(function(){return window.osasm&&!!osasm.geodesicInverse});a.qh=function(){if(document.querySelector(".os-app")){try{window.opener=null}catch(b){}Ce=new O$("os");Rs(sy);Rs(px);Rs(qx);Rs(ty);(new CFa).init()}};a.start(50,1E4)})();
$$.directive("osMain",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1542394219/views/main.html",controller:v$,controllerAs:"mainCtrl"}}]);}).call(window);
//# sourceMappingURL=/Users/welchd/workspace/opensphere-yarn-workspace/workspace/opensphere/.build/opensphere.min.map
